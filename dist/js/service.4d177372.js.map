{"version":3,"file":"js/service.4d177372.js","mappings":"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","sources":["webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/polyfill/index.js","webpack://proactiveServiceSaas/./src/views/serviceInteraction/Detail.vue","webpack://proactiveServiceSaas/./src/components/Version.vue","webpack://proactiveServiceSaas/./src/services/version.js","webpack://proactiveServiceSaas/src/components/Version.vue","webpack://proactiveServiceSaas/./src/components/Version.vue?0aaf","webpack://proactiveServiceSaas/./src/components/Version.vue?339b","webpack://proactiveServiceSaas/./src/components/Flowchart.vue","webpack://proactiveServiceSaas/./src/components/Flow/Graph.vue","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/common/disposable.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isObject.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_freeGlobal.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_root.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/now.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_trimmedEndIndex.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseTrim.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_Symbol.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_getRawTag.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_objectToString.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseGetTag.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isObjectLike.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isSymbol.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/toNumber.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/debounce.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/throttle.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/function/function.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/function/async.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/event/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/event/events.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseHas.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_isKey.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isFunction.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_coreJsData.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_isMasked.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_toSource.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseIsNative.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_getValue.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_getNative.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_nativeCreate.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_hashClear.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_hashDelete.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_hashGet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_hashHas.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_hashSet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_Hash.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_listCacheClear.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/eq.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_assocIndexOf.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_listCacheDelete.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_listCacheGet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_listCacheHas.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_listCacheSet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_ListCache.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_Map.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_mapCacheClear.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_isKeyable.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_getMapData.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_mapCacheDelete.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_mapCacheGet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_mapCacheHas.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_mapCacheSet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_MapCache.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/memoize.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_memoizeCapped.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_stringToPath.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_arrayMap.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseToString.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/toString.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_castPath.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseIsArguments.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isArguments.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_isIndex.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isLength.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_toKey.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_hasPath.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/has.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseGet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_defineProperty.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseAssignValue.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_assignValue.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseSet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_basePickBy.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseHasIn.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/hasIn.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_basePick.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_arrayPush.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_isFlattenable.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseFlatten.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/flatten.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_apply.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_overRest.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/constant.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/identity.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseSetToString.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_shortOut.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_setToString.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_flatRest.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/pick.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_stackClear.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_stackDelete.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_stackGet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_stackHas.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_stackSet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_Stack.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_assignMergeValue.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_createBaseFor.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseFor.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_cloneBuffer.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_Uint8Array.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_cloneArrayBuffer.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_cloneTypedArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_copyArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseCreate.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_overArg.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_getPrototype.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_isPrototype.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_initCloneObject.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isArrayLike.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isArrayLikeObject.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/stubFalse.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isBuffer.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isPlainObject.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseIsTypedArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseUnary.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_nodeUtil.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isTypedArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_safeGet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_copyObject.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseTimes.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_arrayLikeKeys.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_nativeKeysIn.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseKeysIn.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/keysIn.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/toPlainObject.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseMergeDeep.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseMerge.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseRest.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_isIterateeCall.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_createAssigner.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/merge.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_setCacheAdd.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_setCacheHas.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_SetCache.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_arraySome.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_cacheHas.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_equalArrays.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_mapToArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_setToArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_equalByTag.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseGetAllKeys.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_arrayFilter.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/stubArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_getSymbols.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_nativeKeys.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseKeys.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/keys.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_getAllKeys.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_equalObjects.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_DataView.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_Promise.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_Set.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_WeakMap.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_getTag.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseIsEqualDeep.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseIsEqual.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isEqual.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isEmpty.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_arrayEach.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseAssign.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseAssignIn.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_copySymbols.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_getSymbolsIn.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_copySymbolsIn.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_getAllKeysIn.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_initCloneArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_cloneDataView.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_cloneRegExp.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_cloneSymbol.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_initCloneByTag.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseIsMap.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isMap.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseIsSet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isSet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseClone.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/clone.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/cloneDeep.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/defaults.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_customDefaultsMerge.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/mergeWith.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/defaultsDeep.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/object/mixins.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/object/inherit.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/object/object.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/common/basecoat.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseFindIndex.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseIsNaN.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_strictIndexOf.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseIndexOf.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_arrayIncludes.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_arrayIncludesWith.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/noop.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_createSet.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseUniq.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/uniq.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/union.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseSortedIndexBy.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseSortedIndex.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/sortedIndex.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseIsMatch.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_isStrictComparable.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_getMatchData.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_matchesStrictComparable.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseMatches.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/get.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseMatchesProperty.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseProperty.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_basePropertyDeep.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/property.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseIteratee.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/sortedIndexBy.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseForOwn.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_createBaseEach.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseEach.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseMap.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseSortBy.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_compareAscending.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_compareMultiple.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseOrderBy.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/sortBy.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_arrayAggregator.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseAggregator.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_createAggregator.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/groupBy.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseDifference.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/difference.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseExtremum.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseGt.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/max.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_arrayReduce.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_basePropertyOf.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_deburrLetter.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/deburr.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_asciiWords.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_hasUnicodeWord.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_unicodeWords.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/words.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_createCompounder.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseSlice.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_castSlice.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_hasUnicode.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_asciiToArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_unicodeToArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_stringToArray.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_createCaseFirst.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/upperFirst.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/startCase.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/capitalize.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/camelCase.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/upperCase.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/lowerCase.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/lowerFirst.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/string/format.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/string/hashcode.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/string/uuid.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/string/suggestion.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/isNumber.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/_baseClamp.js","webpack://proactiveServiceSaas/./node_modules/lodash-es/clamp.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/number/number.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/platform/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/class.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/elem.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/attr.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/text/annotate.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/text/sanitize.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/datauri/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/unit/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/prefix.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/style.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/selection.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/css.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/data.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/vector/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/text.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/path.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/matrix.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/transform.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/event/hook.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/event/store.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/event/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/event/special.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/event/object.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/event/core.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/event/main.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/mousewheel.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dom/position.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/size-sensor/sensors/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/size-sensor/sensors/object.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/size-sensor/sensors/observer.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/size-sensor/sensors/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/size-sensor/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/algorithm/dijkstra.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/modifier/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/animation/timing.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/animation/interp.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/algorithm/priorityqueue.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/color/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/dictionary/dictionary.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-common/es/css-loader/loader.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/angle.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/geometry.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/point.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/rectangle.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/line.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/ellipse.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/path/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/polyline.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/curve.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/path/segment.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/path/lineto.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/path/close.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/path/moveto.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/path/curveto.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/path/normalize.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-geometry/es/path/path.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/registry.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/grid/dot.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/grid/fixed-dot.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/grid/mesh.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/grid/double-mesh.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/grid/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/background/flip-x.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/background/flip-y.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/background/flip-xy.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/background/watermark.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/background/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/outline.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/highlight.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/blur.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/drop-shadow.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/gray-scale.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/sepia.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/saturate.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/hue-rotate.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/invert.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/brightness.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/filter/contrast.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/raw.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/ref.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/fill.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/stroke.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/text.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/title.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/align.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/style.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/html.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/filter.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/port.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/marker/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/marker/classic.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/marker/diamond.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/marker/path.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/marker/cross.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/marker/async.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/marker/circle.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/marker/ellipse.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/marker/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/marker.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/connection.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/attr/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/config/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/highlighter/class.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/highlighter/opacity.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/util/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/highlighter/stroke.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/highlighter/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/port-layout/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/port-layout/absolute.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/port-layout/ellipse.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/port-layout/line.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/port-layout/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/port-label-layout/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/port-label-layout/side.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/port-label-layout/inout.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/port-label-layout/radial.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/port-label-layout/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/view/view.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/view/markup.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/view/cache.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/view/attr.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/view/flag.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/view/cell.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/view/tool.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connection-strategy/noop.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connection-strategy/pin.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connection-strategy/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/tool/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/tool/button.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/tool/boundary.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/tool/vertices.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/tool/segments.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/tool/anchor.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/tool/arrowhead.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/tool/editor.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/tool/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/node-anchor/bbox.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/node-anchor/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/node-anchor/orth.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/node-anchor/node-center.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/node-anchor/middle-side.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/node-anchor/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/edge-anchor/ratio.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/edge-anchor/length.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/edge-anchor/closest.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/edge-anchor/orth.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/edge-anchor/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connection-point/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connection-point/bbox.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connection-point/rect.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connection-point/boundary.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connection-point/anchor.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connection-point/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/normal.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/oneside.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/orth.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/manhattan/options.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/manhattan/sorted-set.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/manhattan/obstacle-map.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/manhattan/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/manhattan/router.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/manhattan/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/metro.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/er.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/loop.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/router/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connector/normal.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connector/loop.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connector/rounded.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connector/smooth.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connector/jumpover.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/registry/connector/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/model/store.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/model/animation.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/model/cell.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/model/registry.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/model/port.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/model/node.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/model/edge.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/model/collection.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/model/model.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/base.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/rect.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/edge.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/ellipse.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/poly.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/polygon.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/polyline.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/path.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/text-block.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/image.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/circle.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/view/node.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/view/edge.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/view.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/style/raw.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/base.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/css.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/options.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/grid.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/transform.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/background.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/panning.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/mousewheel.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/virtual-render.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/renderer/queueJob.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/renderer/scheduler.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/renderer/renderer.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/defs.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/coord.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/highlight.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/size.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/graph/graph.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6/es/shape/html.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-plugin-dnd/es/style/raw.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-plugin-dnd/es/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-plugin-snapline/es/snapline.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-plugin-snapline/es/style/raw.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-plugin-snapline/es/api.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-plugin-snapline/es/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-plugin-transform/es/transform.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-plugin-transform/es/style/raw.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-plugin-transform/es/api.js","webpack://proactiveServiceSaas/./node_modules/@antv/x6-plugin-transform/es/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/util/string.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/util/array.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/util/number.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/util/object.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/util/math.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/util/function.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/registy/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/base.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/add.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/cover.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/data.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/extent.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/quad.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/find.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/remove.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/root.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/size.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/visit.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/visitAfter.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/x.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/y.js","webpack://proactiveServiceSaas/./node_modules/d3-quadtree/src/quadtree.js","webpack://proactiveServiceSaas/./node_modules/d3-dispatch/src/dispatch.js","webpack://proactiveServiceSaas/./node_modules/d3-timer/src/timer.js","webpack://proactiveServiceSaas/./node_modules/d3-force/src/simulation.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/data/list.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/Graph/enum.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/Graph/toJSON.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/Graph/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/PriorityQueue/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/prim.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/components.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/dfs.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/dijkstra.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/dijkstra-all.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/tarjan.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/find-cycles.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/topsort.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/is-acyclic.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/postorder.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/preorder.js","webpack://proactiveServiceSaas/./node_modules/@antv/graphlib/es/algorithm/floyd-warshall.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/greedy-fas.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/acyclic.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/graph.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/normalize.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/rank/util.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/rank/feasible-tree.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/rank/network-simplex.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/rank/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/parent-dummy-chains.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/nesting-graph.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/add-border-segments.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/coordinate-system.js","webpack://proactiveServiceSaas/./node_modules/@antv/util/esm/lodash/is-type.js","webpack://proactiveServiceSaas/./node_modules/@antv/util/esm/lodash/is-array.js","webpack://proactiveServiceSaas/./node_modules/@antv/util/esm/lodash/max.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/order/init-order.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/order/cross-count.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/order/build-layer-graph.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/order/add-subgraph-constraints.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/order/barycenter.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/order/resolve-conflicts.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/order/sort.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/order/sort-subgraph.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/order/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/util/esm/lodash/min.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/position/bk.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/position/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/order/init-data-order.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/src/layout.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/dagre.js","webpack://proactiveServiceSaas/./node_modules/dagre-compound/dist/dagre-compound.es5.js","webpack://proactiveServiceSaas/./node_modules/is-any-array/lib-esm/index.js","webpack://proactiveServiceSaas/./node_modules/ml-array-max/lib-es6/index.js","webpack://proactiveServiceSaas/./node_modules/ml-array-min/lib-es6/index.js","webpack://proactiveServiceSaas/./node_modules/ml-array-rescale/lib-es6/index.js","webpack://proactiveServiceSaas/./node_modules/ml-matrix/src/inspect.js","webpack://proactiveServiceSaas/./node_modules/ml-matrix/src/mathOperations.js","webpack://proactiveServiceSaas/./node_modules/ml-matrix/src/util.js","webpack://proactiveServiceSaas/./node_modules/ml-matrix/src/stat.js","webpack://proactiveServiceSaas/./node_modules/ml-matrix/src/matrix.js","webpack://proactiveServiceSaas/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://proactiveServiceSaas/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://proactiveServiceSaas/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://proactiveServiceSaas/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://proactiveServiceSaas/./node_modules/@antv/g-webgpu-core/es/ComponentManager.js","webpack://proactiveServiceSaas/./node_modules/@antv/g-webgpu-core/es/components/renderer/gl.js","webpack://proactiveServiceSaas/./node_modules/@antv/g-webgpu-core/es/services/config/ConfigService.js","webpack://proactiveServiceSaas/./node_modules/@antv/g-webgpu-core/es/index.js","webpack://proactiveServiceSaas/./node_modules/@antv/g-webgpu-core/es/utils/isSafari.js","webpack://proactiveServiceSaas/./node_modules/@antv/g-webgpu/es/Kernel.js","webpack://proactiveServiceSaas/./node_modules/@antv/g-webgpu-engine/es/webgl/constants.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/er/grid.js","webpack://proactiveServiceSaas/./node_modules/@antv/layout/es/layout/er/mysqlWorkbench.js","webpack://proactiveServiceSaas/./src/components/Flow/Composition.vue","webpack://proactiveServiceSaas/src/components/Flow/Composition.vue","webpack://proactiveServiceSaas/./src/components/Flow/Composition.vue?e94e","webpack://proactiveServiceSaas/./src/components/Flow/Composition.vue?8511","webpack://proactiveServiceSaas/./src/components/Flow/Operate.vue","webpack://proactiveServiceSaas/src/components/Flow/Operate.vue","webpack://proactiveServiceSaas/./src/components/Flow/Operate.vue?f71a","webpack://proactiveServiceSaas/./src/components/Flow/Operate.vue?b95a","webpack://proactiveServiceSaas/./src/services/anylise.js","webpack://proactiveServiceSaas/src/components/Flow/Graph.vue","webpack://proactiveServiceSaas/./src/components/Flow/Graph.vue?fae5","webpack://proactiveServiceSaas/./src/components/Flow/Graph.vue?38b2","webpack://proactiveServiceSaas/./src/components/Flow/Detail.vue","webpack://proactiveServiceSaas/./src/components/Flow/DialogueDetail.vue","webpack://proactiveServiceSaas/./src/components/Behavior/Index.vue","webpack://proactiveServiceSaas/src/components/Behavior/Index.vue","webpack://proactiveServiceSaas/./src/components/Behavior/Index.vue?0876","webpack://proactiveServiceSaas/./src/components/Behavior/Index.vue?168c","webpack://proactiveServiceSaas/src/components/Flow/DialogueDetail.vue","webpack://proactiveServiceSaas/./src/components/Flow/DialogueDetail.vue?f08c","webpack://proactiveServiceSaas/./src/components/Flow/DialogueDetail.vue?00f4","webpack://proactiveServiceSaas/./src/components/Flow/JudgeDetail.vue","webpack://proactiveServiceSaas/src/components/Flow/JudgeDetail.vue","webpack://proactiveServiceSaas/./src/components/Flow/JudgeDetail.vue?5984","webpack://proactiveServiceSaas/./src/components/Flow/JudgeDetail.vue?2b05","webpack://proactiveServiceSaas/./src/services/skill.js","webpack://proactiveServiceSaas/src/components/Flow/Detail.vue","webpack://proactiveServiceSaas/./src/components/Flow/Detail.vue?aab4","webpack://proactiveServiceSaas/./src/components/Flow/Detail.vue?8762","webpack://proactiveServiceSaas/src/components/Flowchart.vue","webpack://proactiveServiceSaas/./src/components/Flowchart.vue?d892","webpack://proactiveServiceSaas/./src/components/Flowchart.vue?196a","webpack://proactiveServiceSaas/src/views/serviceInteraction/Detail.vue","webpack://proactiveServiceSaas/./src/views/serviceInteraction/Detail.vue?70ba","webpack://proactiveServiceSaas/./src/views/serviceInteraction/Detail.vue?5e85","webpack://proactiveServiceSaas/./src/views/serviceInteraction/List.vue","webpack://proactiveServiceSaas/src/views/serviceInteraction/List.vue","webpack://proactiveServiceSaas/./src/views/serviceInteraction/List.vue?5cf3","webpack://proactiveServiceSaas/./src/views/serviceInteraction/List.vue?032e","webpack://proactiveServiceSaas/./node_modules/lodash/isNumber.js","webpack://proactiveServiceSaas/./node_modules/regl/dist/regl.js","webpack://proactiveServiceSaas/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://proactiveServiceSaas/./node_modules/@babel/runtime/helpers/typeof.js","webpack://proactiveServiceSaas/./node_modules/@babel/runtime/regenerator/index.js"],"sourcesContent":["// compatible with NodeList.prototype.forEach() before chrome 51\n// https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach\nif (typeof window === 'object' &&\n    window.NodeList &&\n    !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = Array.prototype.forEach;\n}\n// compatible with ParentNode.append() before chrome 54\n// https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/append()/append().md\n;\n(function (arr) {\n    arr.forEach((item) => {\n        if (Object.prototype.hasOwnProperty.call(item, 'append')) {\n            return;\n        }\n        Object.defineProperty(item, 'append', {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value(...args) {\n                const docFrag = document.createDocumentFragment();\n                args.forEach((arg) => {\n                    const isNode = arg instanceof Node;\n                    docFrag.appendChild(isNode ? arg : document.createTextNode(String(arg)));\n                });\n                this.appendChild(docFrag);\n            },\n        });\n    });\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\n//# sourceMappingURL=index.js.map","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"detail-page-wrapper\"},[_c('el-page-header',{attrs:{\"content\":\"交互详情\"},on:{\"back\":_vm.goBack}}),_c('el-tabs',{staticStyle:{\"margin-top\":\"10px\"},attrs:{\"type\":\"card\"},on:{\"tab-remove\":_vm.removeTab},model:{value:(_vm.activeTabId),callback:function ($$v) {_vm.activeTabId=$$v},expression:\"activeTabId\"}},_vm._l((_vm.tabsArr),function(item){return _c('el-tab-pane',{key:item.id.toString(),attrs:{\"label\":item.serviceName,\"name\":item.id.toString(),\"closable\":true,\"lazy\":true}},[_c('Version',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mode === 'edit'),expression:\"mode === 'edit'\"}],attrs:{\"serviceId\":item.id}}),_c('Flowchart',{attrs:{\"serviceId\":item.id}})],1)}),1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"version-component-wrapper\"},[_c('div',{staticClass:\"version-wrapper\"},[_c('span',{staticClass:\"edit-statu-title\"},[_vm._v(\" \"+_vm._s(_vm.editStatuStr))]),_c('div',{staticClass:\"button-group-wrapper\"},[_c('el-button',{attrs:{\"type\":\"primary\"}},[_vm._v(\"保存\")]),_c('el-button',{attrs:{\"plain\":\"\"},on:{\"click\":_vm.uploadVersion}},[_vm._v(\"上线\")]),_c('div',{staticClass:\"more\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('el-dropdown',{attrs:{\"placement\":\"bottom-end\",\"trigger\":\"click\",\"hide-on-click\":false},on:{\"command\":_vm.handleCommand}},[_c('i',{staticClass:\"el-icon-more\"}),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"reset\"}},[_vm._v(\"重置\")])],1)],1)],1)],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import fetch from 'cseed-frame/services/_fetch'\r\n\r\nexport function onlineVersionAPI (params) { // 上线服务交互\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/node/online',\r\n    params\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"version-component-wrapper\">\r\n    <div class=\"version-wrapper\">\r\n      <span class=\"edit-statu-title\"> {{ editStatuStr }}</span>\r\n      <div class=\"button-group-wrapper\">\r\n        <el-button type=\"primary\">保存</el-button>\r\n        <el-button plain @click=\"uploadVersion\">上线</el-button>\r\n        <div class=\"more\" @click.stop>\r\n          <el-dropdown\r\n            placement=\"bottom-end\"\r\n            trigger=\"click\"\r\n            :hide-on-click=\"false\"\r\n            @command=\"handleCommand\"\r\n          >\r\n            <i class=\"el-icon-more\"></i>\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n              <el-dropdown-item command=\"reset\">重置</el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n        </div>\r\n        <!-- <span class=\"save-text\">09:30:30 已保存</span> -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport store from 'cseed-frame/store/_index'\r\nimport { getStatuTitleAPI, resetServiceAPI } from '@/services/services'\r\nimport { getVersionIdAPI } from '@/services/flow'\r\nimport { onlineVersionAPI } from '@/services/version'\r\nexport default {\r\n  props: {\r\n    serviceId: {\r\n      type: Number\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      editStatuStr: '未编辑',\r\n      versionId: 0\r\n    }\r\n  },\r\n  methods: {\r\n    handleCommand (payload) {\r\n      if (payload === 'reset') {\r\n        this.resetVersion()\r\n        setTimeout(() => {\r\n          store.commit('flow/updateGraphTree', {\r\n            serviceId: this.serviceId\r\n          })\r\n        }, 300)\r\n      }\r\n    },\r\n    async uploadVersion () {\r\n      const res = await onlineVersionAPI({\r\n        versionId: this.versionId\r\n      })\r\n      if (res.code === 1000) {\r\n        this.$message.success(res.data)\r\n        this.fetchStatuTitle()\r\n        setTimeout(() => {\r\n          store.commit('flow/updateGraphTree', {\r\n            serviceId: this.serviceId\r\n          })\r\n        }, 1000)\r\n      }\r\n    },\r\n    async resetVersion () {\r\n      const res = await resetServiceAPI({\r\n        serviceId: this.serviceId\r\n      })\r\n      if (res.code === 1000) {\r\n        this.$message.success(res.data)\r\n        this.fetchStatuTitle()\r\n      }\r\n    },\r\n    async fetchStatuTitle () { // 获取编辑状态 （目前会触发的场景：上线 重置 mutation:updateStatuTitle）\r\n      try {\r\n        const statuRes = await getStatuTitleAPI({\r\n          serviceId: Number(this.serviceId)\r\n        })\r\n        if (statuRes.code === 1000) {\r\n          this.editStatuStr = statuRes.data\r\n        }\r\n      } catch (error) {\r\n        console.error('fetchStatuTitle error: ', error)\r\n      }\r\n    },\r\n    initVuexListen () {\r\n      store.subscribe((mutation, state) => {\r\n        if (mutation.type === 'flow/updateStatuTitle') {\r\n          // console.debug('updateStatuTitle mutation: ')\r\n          this.fetchStatuTitle()\r\n        } else if (mutation.type === 'flow/updateVersionId') { // 更新版本id\r\n          this.getVersionId()\r\n        }\r\n      })\r\n    },\r\n    async getVersionId () {\r\n      try {\r\n        const res = await getVersionIdAPI({\r\n          serviceId: this.serviceId\r\n        })\r\n        if (res.code === 1000) {\r\n          this.versionId = res.data\r\n        }\r\n      } catch (error) {\r\n        console.error('getVersionId error: ', error)\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.initVuexListen()\r\n    this.getVersionId()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n.version-component-wrapper {\r\n    display flex\r\n    width 100%\r\n    height 40px\r\n    margin-bottom 20px\r\n    justify-content flex-end\r\n    .version-wrapper {\r\n        display flex\r\n        align-items center\r\n        .edit-statu-title {\r\n            font-size 14px\r\n            color #999\r\n            margin-right 10px\r\n        }\r\n        .button-group-wrapper {\r\n            display flex\r\n            align-items center\r\n            position relative\r\n            .more {\r\n                width 20px\r\n                height 20px\r\n                display block\r\n                cursor pointer\r\n                margin-left 10px\r\n                i {\r\n                    font-size 16px\r\n                    color #999\r\n                    transform rotate(90deg)\r\n                }\r\n            }\r\n            .save-text {\r\n                font-size 12px\r\n                color #999\r\n                position absolute\r\n                bottom -20px\r\n                left 0\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Version.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Version.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Version.vue?vue&type=template&id=ff5d8b8a&scoped=true&\"\nimport script from \"./Version.vue?vue&type=script&lang=js&\"\nexport * from \"./Version.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Version.vue?vue&type=style&index=0&id=ff5d8b8a&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ff5d8b8a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flowchart-component-wrapper\"},[(!_vm.isEdit)?_c('div',{staticClass:\"anylise-filter-wrapper\"},[_c('el-form',{attrs:{\"inline\":true}},[_c('el-form-item',[_c('el-radio-group',{attrs:{\"size\":\"medium\"},model:{value:(_vm.anyliseFilterForm.versionId),callback:function ($$v) {_vm.$set(_vm.anyliseFilterForm, \"versionId\", $$v)},expression:\"anyliseFilterForm.versionId\"}},_vm._l((_vm.anyliseVersionList),function(item){return _c('el-radio-button',{key:item.id,attrs:{\"label\":item.id}},[_vm._v(_vm._s(item.humanVersion))])}),1)],1),_c('el-form-item',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"label\":\"维度\"}},[_c('el-radio-group',{model:{value:(_vm.anyliseFilterForm.dataType),callback:function ($$v) {_vm.$set(_vm.anyliseFilterForm, \"dataType\", $$v)},expression:\"anyliseFilterForm.dataType\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"PV\")]),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"UV\")])],1)],1),_c('el-form-item',{staticStyle:{\"margin-left\":\"20px\"},attrs:{\"label\":\"选择日期\"}},[_c('el-date-picker',{attrs:{\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.anyliseFilterForm.time),callback:function ($$v) {_vm.$set(_vm.anyliseFilterForm, \"time\", $$v)},expression:\"anyliseFilterForm.time\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\"查询\")])],1)],1)],1):_vm._e(),_c('Graph',{attrs:{\"showNodeDetail\":_vm.showNodeDetail},on:{\"updateDetail\":_vm.updateDetail}}),(_vm.showDetail)?_c('Detail',{staticClass:\"detail-wrapper\",attrs:{\"showNodeDetail\":_vm.showNodeDetail},on:{\"update:showNodeDetail\":[function($event){_vm.showNodeDetail=$event},function($event){_vm.showNodeDetail = $event}],\"update:show-node-detail\":function($event){_vm.showNodeDetail=$event}}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{class:[_vm.showNodeDetail ? 'limit-graph' : '', 'graph-component']},[(_vm.isEdit)?_c('FlowComposition',{on:{\"drag\":_vm.handleCompositionDrag}}):_vm._e(),_c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"}},[_c('div',{staticClass:\"graph-simply-container\",attrs:{\"id\":_vm.containerId}})]),(_vm.isEdit)?_c('Operate',{on:{\"add\":_vm.addZoom,\"reduce\":_vm.reduceZoom}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable no-underscore-dangle */\nexport class Disposable {\n    get disposed() {\n        return this._disposed === true;\n    }\n    dispose() {\n        this._disposed = true;\n    }\n}\n(function (Disposable) {\n    function dispose() {\n        return (target, methodName, descriptor) => {\n            const raw = descriptor.value;\n            const proto = target.__proto__; // eslint-disable-line\n            descriptor.value = function () {\n                if (this.disposed) {\n                    return;\n                }\n                raw.call(this);\n                proto.dispose.call(this);\n            };\n        };\n    }\n    Disposable.dispose = dispose;\n})(Disposable || (Disposable = {}));\n/**\n * A disposable object which delegates to a callback function.\n */\nexport class DisposableDelegate {\n    /**\n     * Construct a new disposable delegate.\n     *\n     * @param callback - The callback function to invoke on dispose.\n     */\n    constructor(callback) {\n        this.callback = callback;\n    }\n    /**\n     * Test whether the delegate has been disposed.\n     */\n    get disposed() {\n        return !this.callback;\n    }\n    /**\n     * Dispose of the delegate and invoke the callback function.\n     */\n    dispose() {\n        if (!this.callback) {\n            return;\n        }\n        const callback = this.callback;\n        this.callback = null;\n        callback();\n    }\n}\n/**\n * An object which manages a collection of disposable items.\n */\nexport class DisposableSet {\n    constructor() {\n        this.isDisposed = false; // eslint-disable-line:variable-name\n        this.items = new Set();\n    }\n    /**\n     * Test whether the set has been disposed.\n     */\n    get disposed() {\n        return this.isDisposed;\n    }\n    /**\n     * Dispose of the set and the items it contains.\n     *\n     * #### Notes\n     * Items are disposed in the order they are added to the set.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this.items.forEach((item) => {\n            item.dispose();\n        });\n        this.items.clear();\n    }\n    /**\n     * Test whether the set contains a specific item.\n     *\n     * @param item - The item of interest.\n     *\n     * @returns `true` if the set contains the item, `false` otherwise.\n     */\n    contains(item) {\n        return this.items.has(item);\n    }\n    /**\n     * Add a disposable item to the set.\n     *\n     * @param item - The item to add to the set.\n     *\n     * #### Notes\n     * If the item is already contained in the set, this is a no-op.\n     */\n    add(item) {\n        this.items.add(item);\n    }\n    /**\n     * Remove a disposable item from the set.\n     *\n     * @param item - The item to remove from the set.\n     *\n     * #### Notes\n     * If the item is not contained in the set, this is a no-op.\n     */\n    remove(item) {\n        this.items.delete(item);\n    }\n    /**\n     * Remove all items from the set.\n     */\n    clear() {\n        this.items.clear();\n    }\n}\n(function (DisposableSet) {\n    /**\n     * Create a disposable set from an iterable of items.\n     *\n     * @param items - The iterable or array-like object of interest.\n     *\n     * @returns A new disposable initialized with the given items.\n     */\n    function from(items) {\n        const set = new DisposableSet();\n        items.forEach((item) => {\n            set.add(item);\n        });\n        return set;\n    }\n    DisposableSet.from = from;\n})(DisposableSet || (DisposableSet = {}));\n//# sourceMappingURL=disposable.js.map","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","export { debounce, throttle } from 'lodash-es';\nexport function apply(fn, ctx, args) {\n    if (args) {\n        switch (args.length) {\n            case 0:\n                return fn.call(ctx);\n            case 1:\n                return fn.call(ctx, args[0]);\n            case 2:\n                return fn.call(ctx, args[0], args[1]);\n            case 3:\n                return fn.call(ctx, args[0], args[1], args[2]);\n            case 4:\n                return fn.call(ctx, args[0], args[1], args[2], args[3]);\n            case 5:\n                return fn.call(ctx, args[0], args[1], args[2], args[3], args[4]);\n            case 6:\n                return fn.call(ctx, args[0], args[1], args[2], args[3], args[4], args[5]);\n            default:\n                return fn.apply(ctx, args);\n        }\n    }\n    return fn.call(ctx);\n}\nexport function call(fn, ctx, ...args) {\n    return apply(fn, ctx, args);\n}\n//# sourceMappingURL=function.js.map","export function isAsyncLike(obj) {\n    return typeof obj === 'object' && obj.then && typeof obj.then === 'function';\n}\nexport function isAsync(obj) {\n    return obj != null && (obj instanceof Promise || isAsyncLike(obj));\n}\nexport function toAsyncBoolean(...inputs) {\n    const results = [];\n    inputs.forEach((arg) => {\n        if (Array.isArray(arg)) {\n            results.push(...arg);\n        }\n        else {\n            results.push(arg);\n        }\n    });\n    const hasAsync = results.some((res) => isAsync(res));\n    if (hasAsync) {\n        const deferres = results.map((res) => isAsync(res) ? res : Promise.resolve(res !== false));\n        return Promise.all(deferres).then((arr) => arr.reduce((memo, item) => item !== false && memo, true));\n    }\n    return results.every((res) => res !== false);\n}\nexport function toDeferredBoolean(...inputs) {\n    const ret = toAsyncBoolean(inputs);\n    return typeof ret === 'boolean' ? Promise.resolve(ret) : ret;\n}\n//# sourceMappingURL=async.js.map","import { FunctionExt } from '../function';\nexport function call(list, args) {\n    const results = [];\n    for (let i = 0; i < list.length; i += 2) {\n        const handler = list[i];\n        const context = list[i + 1];\n        const params = Array.isArray(args) ? args : [args];\n        const ret = FunctionExt.apply(handler, context, params);\n        results.push(ret);\n    }\n    return FunctionExt.toAsyncBoolean(results);\n}\n//# sourceMappingURL=util.js.map","import { call } from './util';\nimport { FunctionExt } from '../function';\nexport class Events {\n    constructor() {\n        this.listeners = {};\n    }\n    on(name, handler, context) {\n        if (handler == null) {\n            return this;\n        }\n        if (!this.listeners[name]) {\n            this.listeners[name] = [];\n        }\n        const cache = this.listeners[name];\n        cache.push(handler, context);\n        return this;\n    }\n    once(name, handler, context) {\n        const cb = (...args) => {\n            this.off(name, cb);\n            return call([handler, context], args);\n        };\n        return this.on(name, cb, this);\n    }\n    off(name, handler, context) {\n        // remove all events.\n        if (!(name || handler || context)) {\n            this.listeners = {};\n            return this;\n        }\n        const listeners = this.listeners;\n        const names = name ? [name] : Object.keys(listeners);\n        names.forEach((n) => {\n            const cache = listeners[n];\n            if (!cache) {\n                return;\n            }\n            // remove all events with specified name.\n            if (!(handler || context)) {\n                delete listeners[n];\n                return;\n            }\n            for (let i = cache.length - 2; i >= 0; i -= 2) {\n                if (!((handler && cache[i] !== handler) ||\n                    (context && cache[i + 1] !== context))) {\n                    cache.splice(i, 2);\n                }\n            }\n        });\n        return this;\n    }\n    trigger(name, ...args) {\n        let returned = true;\n        if (name !== '*') {\n            const list = this.listeners[name];\n            if (list != null) {\n                returned = call([...list], args);\n            }\n        }\n        const list = this.listeners['*'];\n        if (list != null) {\n            return FunctionExt.toAsyncBoolean([\n                returned,\n                call([...list], [name, ...args]),\n            ]);\n        }\n        return returned;\n    }\n    emit(name, ...args) {\n        return this.trigger(name, ...args);\n    }\n}\n//# sourceMappingURL=events.js.map","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nexport default baseHas;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nexport default isKey;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n","import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import isArray from './isArray.js';\nimport isKey from './_isKey.js';\nimport stringToPath from './_stringToPath.js';\nimport toString from './toString.js';\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nexport default castPath;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n","import castPath from './_castPath.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isIndex from './_isIndex.js';\nimport isLength from './isLength.js';\nimport toKey from './_toKey.js';\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nexport default hasPath;\n","import baseHas from './_baseHas.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nexport default has;\n","import castPath from './_castPath.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nexport default baseGet;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport castPath from './_castPath.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nexport default baseSet;\n","import baseGet from './_baseGet.js';\nimport baseSet from './_baseSet.js';\nimport castPath from './_castPath.js';\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nexport default basePickBy;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nexport default baseHasIn;\n","import baseHasIn from './_baseHasIn.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nexport default hasIn;\n","import basePickBy from './_basePickBy.js';\nimport hasIn from './hasIn.js';\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nexport default basePick;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import Symbol from './_Symbol.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nexport default isFlattenable;\n","import arrayPush from './_arrayPush.js';\nimport isFlattenable from './_isFlattenable.js';\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nexport default baseFlatten;\n","import baseFlatten from './_baseFlatten.js';\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nexport default flatten;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import flatten from './flatten.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nexport default flatRest;\n","import basePick from './_basePick.js';\nimport flatRest from './_flatRest.js';\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nexport default pick;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","import baseKeys from './_baseKeys.js';\nimport getTag from './_getTag.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLike from './isArrayLike.js';\nimport isBuffer from './isBuffer.js';\nimport isPrototype from './_isPrototype.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default isEmpty;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nexport default clone;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","import baseRest from './_baseRest.js';\nimport eq from './eq.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport keysIn from './keysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nexport default defaults;\n","import baseMerge from './_baseMerge.js';\nimport isObject from './isObject.js';\n\n/**\n * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n * objects into destination objects that are passed thru.\n *\n * @private\n * @param {*} objValue The destination value.\n * @param {*} srcValue The source value.\n * @param {string} key The key of the property to merge.\n * @param {Object} object The parent object of `objValue`.\n * @param {Object} source The parent object of `srcValue`.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n * @returns {*} Returns the value to assign.\n */\nfunction customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n  if (isObject(objValue) && isObject(srcValue)) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, objValue);\n    baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n    stack['delete'](srcValue);\n  }\n  return objValue;\n}\n\nexport default customDefaultsMerge;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nexport default mergeWith;\n","import apply from './_apply.js';\nimport baseRest from './_baseRest.js';\nimport customDefaultsMerge from './_customDefaultsMerge.js';\nimport mergeWith from './mergeWith.js';\n\n/**\n * This method is like `_.defaults` except that it recursively assigns\n * default properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaults\n * @example\n *\n * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n * // => { 'a': { 'b': 2, 'c': 3 } }\n */\nvar defaultsDeep = baseRest(function(args) {\n  args.push(undefined, customDefaultsMerge);\n  return apply(mergeWith, undefined, args);\n});\n\nexport default defaultsDeep;\n","/**\n * @see https://www.typescriptlang.org/docs/handbook/mixins.html\n */\nexport function applyMixins(derivedCtor, ...baseCtors) {\n    baseCtors.forEach((baseCtor) => {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n            if (name !== 'constructor') {\n                Object.defineProperty(derivedCtor.prototype, name, Object.getOwnPropertyDescriptor(baseCtor.prototype, name));\n            }\n        });\n    });\n}\n//# sourceMappingURL=mixins.js.map","const extendStatics = Object.setPrototypeOf ||\n    ({ __proto__: [] } instanceof Array &&\n        function (d, b) {\n            d.__proto__ = b; // eslint-disable-line no-proto\n        }) ||\n    function (d, b) {\n        // eslint-disable-next-line no-restricted-syntax\n        for (const p in b) {\n            if (Object.prototype.hasOwnProperty.call(b, p)) {\n                d[p] = b[p];\n            }\n        }\n    };\n/**\n * @see https://github.com/microsoft/TypeScript/blob/5c85febb0ce9d6088cbe9b09cb42f73f9ee8ea05/src/compiler/transformers/es2015.ts#L4309\n */\n// eslint-disable-next-line\nexport function inherit(cls, base) {\n    extendStatics(cls, base);\n    function tmp() {\n        this.constructor = cls;\n    }\n    cls.prototype =\n        base === null\n            ? Object.create(base)\n            : ((tmp.prototype = base.prototype), new tmp());\n}\nclass A {\n}\nconst isNativeClass = /^\\s*class\\s+/.test(`${A}`) || /^\\s*class\\s*\\{/.test(`${class {\n}}`);\n/**\n * Extends class with specified class name.\n */\nexport function createClass(className, base) {\n    let cls;\n    if (isNativeClass) {\n        cls = class extends base {\n        };\n    }\n    else {\n        cls = function () {\n            return base.apply(this, arguments); // eslint-disable-line\n        };\n        inherit(cls, base);\n    }\n    Object.defineProperty(cls, 'name', { value: className });\n    return cls;\n}\n//# sourceMappingURL=inherit.js.map","export { has, pick, merge, isEqual, isEmpty, isObject, isPlainObject, clone, cloneDeep, defaults, defaultsDeep, } from 'lodash-es';\nexport * from './mixins';\nexport * from './inherit';\nexport function ensure(value, defaultValue) {\n    return value != null ? value : defaultValue;\n}\nexport function getValue(obj, key, defaultValue) {\n    const value = obj != null ? obj[key] : null;\n    return defaultValue !== undefined ? ensure(value, defaultValue) : value;\n}\nexport function getNumber(obj, key, defaultValue) {\n    let value = obj != null ? obj[key] : null;\n    if (value == null) {\n        return defaultValue;\n    }\n    value = +value;\n    if (Number.isNaN(value) || !Number.isFinite(value)) {\n        return defaultValue;\n    }\n    return value;\n}\nexport function getBoolean(obj, key, defaultValue) {\n    const value = obj != null ? obj[key] : null;\n    if (value == null) {\n        return defaultValue;\n    }\n    return !!value;\n}\nexport function isMaliciousProp(prop) {\n    return prop === '__proto__';\n}\nexport function getByPath(obj, path, delimiter = '/') {\n    let ret;\n    const keys = Array.isArray(path) ? path : path.split(delimiter);\n    if (keys.length) {\n        ret = obj;\n        while (keys.length) {\n            const key = keys.shift();\n            if (Object(ret) === ret && key && key in ret) {\n                ret = ret[key];\n            }\n            else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\nexport function setByPath(obj, path, value, delimiter = '/') {\n    const keys = Array.isArray(path) ? path : path.split(delimiter);\n    const lastKey = keys.pop();\n    if (lastKey && !isMaliciousProp(lastKey)) {\n        let diver = obj;\n        keys.forEach((key) => {\n            if (!isMaliciousProp(key)) {\n                if (diver[key] == null) {\n                    diver[key] = {};\n                }\n                diver = diver[key];\n            }\n        });\n        diver[lastKey] = value;\n    }\n    return obj;\n}\nexport function unsetByPath(obj, path, delimiter = '/') {\n    const keys = Array.isArray(path) ? path.slice() : path.split(delimiter);\n    const propertyToRemove = keys.pop();\n    if (propertyToRemove) {\n        if (keys.length > 0) {\n            const parent = getByPath(obj, keys);\n            if (parent) {\n                delete parent[propertyToRemove];\n            }\n        }\n        else {\n            delete obj[propertyToRemove];\n        }\n    }\n    return obj;\n}\n// eslint-disable-next-line default-param-last\nexport function flatten(obj, delim = '/', stop) {\n    const ret = {};\n    Object.keys(obj).forEach((key) => {\n        const val = obj[key];\n        let deep = typeof val === 'object' || Array.isArray(val);\n        if (deep && stop && stop(val)) {\n            deep = false;\n        }\n        if (deep) {\n            const flatObject = flatten(val, delim, stop);\n            Object.keys(flatObject).forEach((flatKey) => {\n                ret[key + delim + flatKey] = flatObject[flatKey];\n            });\n        }\n        else {\n            ret[key] = val;\n        }\n    });\n    // eslint-disable-next-line no-restricted-syntax\n    for (const key in obj) {\n        if (!Object.prototype.hasOwnProperty.call(obj, key)) {\n            continue;\n        }\n    }\n    return ret;\n}\n//# sourceMappingURL=object.js.map","import { Events } from '../event';\nimport { ObjectExt } from '../object';\nimport { Disposable } from './disposable';\nexport class Basecoat extends Events {\n}\n(function (Basecoat) {\n    Basecoat.dispose = Disposable.dispose;\n})(Basecoat || (Basecoat = {}));\nObjectExt.applyMixins(Basecoat, Disposable);\n//# sourceMappingURL=basecoat.js.map","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nexport default baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default strictIndexOf;\n","import baseFindIndex from './_baseFindIndex.js';\nimport baseIsNaN from './_baseIsNaN.js';\nimport strictIndexOf from './_strictIndexOf.js';\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nexport default baseIndexOf;\n","import baseIndexOf from './_baseIndexOf.js';\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nexport default arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arrayIncludesWith;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nexport default noop;\n","import Set from './_Set.js';\nimport noop from './noop.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nexport default createSet;\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport cacheHas from './_cacheHas.js';\nimport createSet from './_createSet.js';\nimport setToArray from './_setToArray.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseUniq;\n","import baseUniq from './_baseUniq.js';\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nexport default uniq;\n","import baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport baseUniq from './_baseUniq.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nexport default union;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295,\n    MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n * which invokes `iteratee` for `value` and each element of `array` to compute\n * their sort ranking. The iteratee is invoked with one argument; (value).\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} iteratee The iteratee invoked per element.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndexBy(array, value, iteratee, retHighest) {\n  var low = 0,\n      high = array == null ? 0 : array.length;\n  if (high === 0) {\n    return 0;\n  }\n\n  value = iteratee(value);\n  var valIsNaN = value !== value,\n      valIsNull = value === null,\n      valIsSymbol = isSymbol(value),\n      valIsUndefined = value === undefined;\n\n  while (low < high) {\n    var mid = nativeFloor((low + high) / 2),\n        computed = iteratee(array[mid]),\n        othIsDefined = computed !== undefined,\n        othIsNull = computed === null,\n        othIsReflexive = computed === computed,\n        othIsSymbol = isSymbol(computed);\n\n    if (valIsNaN) {\n      var setLow = retHighest || othIsReflexive;\n    } else if (valIsUndefined) {\n      setLow = othIsReflexive && (retHighest || othIsDefined);\n    } else if (valIsNull) {\n      setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n    } else if (valIsSymbol) {\n      setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n    } else if (othIsNull || othIsSymbol) {\n      setLow = false;\n    } else {\n      setLow = retHighest ? (computed <= value) : (computed < value);\n    }\n    if (setLow) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return nativeMin(high, MAX_ARRAY_INDEX);\n}\n\nexport default baseSortedIndexBy;\n","import baseSortedIndexBy from './_baseSortedIndexBy.js';\nimport identity from './identity.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for the maximum length and index of an array. */\nvar MAX_ARRAY_LENGTH = 4294967295,\n    HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n/**\n * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n * performs a binary search of `array` to determine the index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @private\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {boolean} [retHighest] Specify returning the highest qualified index.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n */\nfunction baseSortedIndex(array, value, retHighest) {\n  var low = 0,\n      high = array == null ? low : array.length;\n\n  if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n    while (low < high) {\n      var mid = (low + high) >>> 1,\n          computed = array[mid];\n\n      if (computed !== null && !isSymbol(computed) &&\n          (retHighest ? (computed <= value) : (computed < value))) {\n        low = mid + 1;\n      } else {\n        high = mid;\n      }\n    }\n    return high;\n  }\n  return baseSortedIndexBy(array, value, identity, retHighest);\n}\n\nexport default baseSortedIndex;\n","import baseSortedIndex from './_baseSortedIndex.js';\n\n/**\n * Uses a binary search to determine the lowest index at which `value`\n * should be inserted into `array` in order to maintain its sort order.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * _.sortedIndex([30, 50], 40);\n * // => 1\n */\nfunction sortedIndex(array, value) {\n  return baseSortedIndex(array, value);\n}\n\nexport default sortedIndex;\n","import Stack from './_Stack.js';\nimport baseIsEqual from './_baseIsEqual.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nexport default baseIsMatch;\n","import isObject from './isObject.js';\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nexport default isStrictComparable;\n","import isStrictComparable from './_isStrictComparable.js';\nimport keys from './keys.js';\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nexport default getMatchData;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nexport default matchesStrictComparable;\n","import baseIsMatch from './_baseIsMatch.js';\nimport getMatchData from './_getMatchData.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nexport default baseMatches;\n","import baseGet from './_baseGet.js';\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nexport default get;\n","import baseIsEqual from './_baseIsEqual.js';\nimport get from './get.js';\nimport hasIn from './hasIn.js';\nimport isKey from './_isKey.js';\nimport isStrictComparable from './_isStrictComparable.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\nimport toKey from './_toKey.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nexport default baseMatchesProperty;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default baseProperty;\n","import baseGet from './_baseGet.js';\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nexport default basePropertyDeep;\n","import baseProperty from './_baseProperty.js';\nimport basePropertyDeep from './_basePropertyDeep.js';\nimport isKey from './_isKey.js';\nimport toKey from './_toKey.js';\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nexport default property;\n","import baseMatches from './_baseMatches.js';\nimport baseMatchesProperty from './_baseMatchesProperty.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\nimport property from './property.js';\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nexport default baseIteratee;\n","import baseIteratee from './_baseIteratee.js';\nimport baseSortedIndexBy from './_baseSortedIndexBy.js';\n\n/**\n * This method is like `_.sortedIndex` except that it accepts `iteratee`\n * which is invoked for `value` and each element of `array` to compute their\n * sort ranking. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The sorted array to inspect.\n * @param {*} value The value to evaluate.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {number} Returns the index at which `value` should be inserted\n *  into `array`.\n * @example\n *\n * var objects = [{ 'x': 4 }, { 'x': 5 }];\n *\n * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n * // => 0\n */\nfunction sortedIndexBy(array, value, iteratee) {\n  return baseSortedIndexBy(array, value, baseIteratee(iteratee, 2));\n}\n\nexport default sortedIndexBy;\n","import baseFor from './_baseFor.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nexport default baseForOwn;\n","import isArrayLike from './isArrayLike.js';\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nexport default createBaseEach;\n","import baseForOwn from './_baseForOwn.js';\nimport createBaseEach from './_createBaseEach.js';\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nexport default baseEach;\n","import baseEach from './_baseEach.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nexport default baseMap;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nexport default baseSortBy;\n","import isSymbol from './isSymbol.js';\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nexport default compareAscending;\n","import compareAscending from './_compareAscending.js';\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nexport default compareMultiple;\n","import arrayMap from './_arrayMap.js';\nimport baseGet from './_baseGet.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseMap from './_baseMap.js';\nimport baseSortBy from './_baseSortBy.js';\nimport baseUnary from './_baseUnary.js';\nimport compareMultiple from './_compareMultiple.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nexport default baseOrderBy;\n","import baseFlatten from './_baseFlatten.js';\nimport baseOrderBy from './_baseOrderBy.js';\nimport baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nexport default sortBy;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nexport default arrayAggregator;\n","import baseEach from './_baseEach.js';\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nexport default baseAggregator;\n","import arrayAggregator from './_arrayAggregator.js';\nimport baseAggregator from './_baseAggregator.js';\nimport baseIteratee from './_baseIteratee.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nexport default createAggregator;\n","import baseAssignValue from './_baseAssignValue.js';\nimport createAggregator from './_createAggregator.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nexport default groupBy;\n","import SetCache from './_SetCache.js';\nimport arrayIncludes from './_arrayIncludes.js';\nimport arrayIncludesWith from './_arrayIncludesWith.js';\nimport arrayMap from './_arrayMap.js';\nimport baseUnary from './_baseUnary.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nexport default baseDifference;\n","import baseDifference from './_baseDifference.js';\nimport baseFlatten from './_baseFlatten.js';\nimport baseRest from './_baseRest.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\nexport default difference;\n","import isSymbol from './isSymbol.js';\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nexport default baseExtremum;\n","/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nexport default baseGt;\n","import baseExtremum from './_baseExtremum.js';\nimport baseGt from './_baseGt.js';\nimport identity from './identity.js';\n\n/**\n * Computes the maximum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * _.max([4, 2, 8, 6]);\n * // => 8\n *\n * _.max([]);\n * // => undefined\n */\nfunction max(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseGt)\n    : undefined;\n}\n\nexport default max;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nexport default arrayReduce;\n","/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default basePropertyOf;\n","import basePropertyOf from './_basePropertyOf.js';\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 's'\n};\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\nexport default deburrLetter;\n","import deburrLetter from './_deburrLetter.js';\nimport toString from './toString.js';\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\n\n/** Used to compose unicode capture groups. */\nvar rsCombo = '[' + rsComboRange + ']';\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('déjà vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\nexport default deburr;\n","/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\nexport default asciiWords;\n","/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\nexport default hasUnicodeWord;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n    rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq;\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n  rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n  rsUpper + '+' + rsOptContrUpper,\n  rsOrdUpper,\n  rsOrdLower,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\nexport default unicodeWords;\n","import asciiWords from './_asciiWords.js';\nimport hasUnicodeWord from './_hasUnicodeWord.js';\nimport toString from './toString.js';\nimport unicodeWords from './_unicodeWords.js';\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nexport default words;\n","import arrayReduce from './_arrayReduce.js';\nimport deburr from './deburr.js';\nimport words from './words.js';\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\";\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\nexport default createCompounder;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n","import baseSlice from './_baseSlice.js';\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nexport default castSlice;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nexport default hasUnicode;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nexport default asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nexport default unicodeToArray;\n","import asciiToArray from './_asciiToArray.js';\nimport hasUnicode from './_hasUnicode.js';\nimport unicodeToArray from './_unicodeToArray.js';\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nexport default stringToArray;\n","import castSlice from './_castSlice.js';\nimport hasUnicode from './_hasUnicode.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nexport default createCaseFirst;\n","import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nexport default upperFirst;\n","import createCompounder from './_createCompounder.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts `string` to\n * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n *\n * @static\n * @memberOf _\n * @since 3.1.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the start cased string.\n * @example\n *\n * _.startCase('--foo-bar--');\n * // => 'Foo Bar'\n *\n * _.startCase('fooBar');\n * // => 'Foo Bar'\n *\n * _.startCase('__FOO_BAR__');\n * // => 'FOO BAR'\n */\nvar startCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + upperFirst(word);\n});\n\nexport default startCase;\n","import toString from './toString.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts the first character of `string` to upper case and the remaining\n * to lower case.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to capitalize.\n * @returns {string} Returns the capitalized string.\n * @example\n *\n * _.capitalize('FRED');\n * // => 'Fred'\n */\nfunction capitalize(string) {\n  return upperFirst(toString(string).toLowerCase());\n}\n\nexport default capitalize;\n","import capitalize from './capitalize.js';\nimport createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the camel cased string.\n * @example\n *\n * _.camelCase('Foo Bar');\n * // => 'fooBar'\n *\n * _.camelCase('--foo-bar--');\n * // => 'fooBar'\n *\n * _.camelCase('__FOO_BAR__');\n * // => 'fooBar'\n */\nvar camelCase = createCompounder(function(result, word, index) {\n  word = word.toLowerCase();\n  return result + (index ? capitalize(word) : word);\n});\n\nexport default camelCase;\n","import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string`, as space separated words, to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the upper cased string.\n * @example\n *\n * _.upperCase('--foo-bar');\n * // => 'FOO BAR'\n *\n * _.upperCase('fooBar');\n * // => 'FOO BAR'\n *\n * _.upperCase('__foo_bar__');\n * // => 'FOO BAR'\n */\nvar upperCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toUpperCase();\n});\n\nexport default upperCase;\n","import createCompounder from './_createCompounder.js';\n\n/**\n * Converts `string`, as space separated words, to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the lower cased string.\n * @example\n *\n * _.lowerCase('--Foo-Bar--');\n * // => 'foo bar'\n *\n * _.lowerCase('fooBar');\n * // => 'foo bar'\n *\n * _.lowerCase('__FOO_BAR__');\n * // => 'foo bar'\n */\nvar lowerCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + word.toLowerCase();\n});\n\nexport default lowerCase;\n","import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to lower case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.lowerFirst('Fred');\n * // => 'fred'\n *\n * _.lowerFirst('FRED');\n * // => 'fRED'\n */\nvar lowerFirst = createCaseFirst('toLowerCase');\n\nexport default lowerFirst;\n","import { camelCase, startCase, upperCase, lowerCase, upperFirst, } from 'lodash-es';\nexport { lowerFirst, upperFirst, camelCase } from 'lodash-es';\n// @see: https://medium.com/@robertsavian/javascript-case-converters-using-lodash-4f2f964091cc\nconst cacheStringFunction = (fn) => {\n    const cache = Object.create(null);\n    return ((str) => {\n        const hit = cache[str];\n        return hit || (cache[str] = fn(str));\n    });\n};\nexport const kebabCase = cacheStringFunction((s) => s.replace(/\\B([A-Z])/g, '-$1').toLowerCase());\nexport const pascalCase = cacheStringFunction((s) => startCase(camelCase(s)).replace(/ /g, ''));\nexport const constantCase = cacheStringFunction((s) => upperCase(s).replace(/ /g, '_'));\nexport const dotCase = cacheStringFunction((s) => lowerCase(s).replace(/ /g, '.'));\nexport const pathCase = cacheStringFunction((s) => lowerCase(s).replace(/ /g, '/'));\nexport const sentenceCase = cacheStringFunction((s) => upperFirst(lowerCase(s)));\nexport const titleCase = cacheStringFunction((s) => startCase(camelCase(s)));\n//# sourceMappingURL=format.js.map","/* eslint-disable no-bitwise */\n/**\n * Return a simple hash code from a string.\n * Source from: https://github.com/sindresorhus/fnv1a/blob/master/index.js#L25\n */\nexport function hashcode(str) {\n    let hash = 2166136261;\n    let isUnicoded = false;\n    let string = str;\n    for (let i = 0, ii = string.length; i < ii; i += 1) {\n        let characterCode = string.charCodeAt(i);\n        // Non-ASCII characters trigger the Unicode escape logic\n        if (characterCode > 0x7f && !isUnicoded) {\n            string = unescape(encodeURIComponent(string));\n            characterCode = string.charCodeAt(i);\n            isUnicoded = true;\n        }\n        hash ^= characterCode;\n        hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\n    }\n    return hash >>> 0;\n}\n//# sourceMappingURL=hashcode.js.map","/* eslint-disable no-bitwise */\nexport function uuid() {\n    // credit: http://stackoverflow.com/posts/2117523/revisions\n    // return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    //   const r = (Math.random() * 16) | 0\n    //   const v = c === 'x' ? r : (r & 0x3) | 0x8\n    //   return v.toString(16)\n    // })\n    let res = '';\n    const template = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n    for (let i = 0, len = template.length; i < len; i += 1) {\n        const s = template[i];\n        const r = (Math.random() * 16) | 0;\n        const v = s === 'x' ? r : s === 'y' ? (r & 0x3) | 0x8 : s;\n        res += v.toString(16);\n    }\n    return res;\n}\n//# sourceMappingURL=uuid.js.map","// @see: https://github.com/microsoft/TypeScript/blob/master/src/compiler/checker.ts\n/**\n * Given a name and a list of names that are not equal to the name, return a\n * spelling suggestion if there is one that is close enough. Names less than\n * length 3 only check for case-insensitive equality, not Levenshtein distance.\n *\n * - If there is a candidate that's the same except for case, return that.\n * - If there is a candidate that's within one edit of the name, return that.\n * - Otherwise, return the candidate with the smallest Levenshtein distance,\n *     except for candidates:\n *       * With no name\n *       * Whose length differs from the target name by more than 0.34 of the\n *         length of the name.\n *       * Whose levenshtein distance is more than 0.4 of the length of the\n *         name (0.4 allows 1 substitution/transposition for every 5 characters,\n *         and 1 insertion/deletion at 3 characters)\n */\nexport function getSpellingSuggestion(name, candidates, getName) {\n    const maximumLengthDifference = Math.min(2, Math.floor(name.length * 0.34));\n    // If the best result isn't better than this, don't bother.\n    let bestDistance = Math.floor(name.length * 0.4) + 1;\n    let bestCandidate;\n    let justCheckExactMatches = false;\n    const nameLowerCase = name.toLowerCase();\n    // eslint-disable-next-line\n    for (const candidate of candidates) {\n        const candidateName = getName(candidate);\n        if (candidateName !== undefined &&\n            Math.abs(candidateName.length - nameLowerCase.length) <=\n                maximumLengthDifference) {\n            const candidateNameLowerCase = candidateName.toLowerCase();\n            if (candidateNameLowerCase === nameLowerCase) {\n                if (candidateName === name) {\n                    continue;\n                }\n                return candidate;\n            }\n            if (justCheckExactMatches) {\n                continue;\n            }\n            if (candidateName.length < 3) {\n                // Don't bother, user would have noticed a\n                // 2-character name having an extra character.\n                continue;\n            }\n            // Only care about a result better than the best so far.\n            const distance = levenshteinWithMax(nameLowerCase, candidateNameLowerCase, bestDistance - 1);\n            if (distance === undefined) {\n                continue;\n            }\n            if (distance < 3) {\n                justCheckExactMatches = true;\n                bestCandidate = candidate;\n            }\n            else {\n                // Debug.assert(distance < bestDistance)\n                bestDistance = distance;\n                bestCandidate = candidate;\n            }\n        }\n    }\n    return bestCandidate;\n}\nfunction levenshteinWithMax(s1, s2, max) {\n    let previous = new Array(s2.length + 1); // eslint-disable-line\n    let current = new Array(s2.length + 1); // eslint-disable-line\n    /** Represents any value > max. We don't care about the particular value. */\n    const big = max + 1;\n    for (let i = 0; i <= s2.length; i += 1) {\n        previous[i] = i;\n    }\n    for (let i = 1; i <= s1.length; i += 1) {\n        const c1 = s1.charCodeAt(i - 1);\n        const minJ = i > max ? i - max : 1;\n        const maxJ = s2.length > max + i ? max + i : s2.length;\n        current[0] = i;\n        /** Smallest value of the matrix in the ith column. */\n        let colMin = i;\n        for (let j = 1; j < minJ; j += 1) {\n            current[j] = big;\n        }\n        for (let j = minJ; j <= maxJ; j += 1) {\n            const dist = c1 === s2.charCodeAt(j - 1)\n                ? previous[j - 1]\n                : Math.min(\n                /* delete */ previous[j] + 1, \n                /* insert */ current[j - 1] + 1, \n                /* substitute */ previous[j - 1] + 2);\n            current[j] = dist;\n            colMin = Math.min(colMin, dist);\n        }\n        for (let j = maxJ + 1; j <= s2.length; j += 1) {\n            current[j] = big;\n        }\n        if (colMin > max) {\n            // Give up -- everything in this column is > max\n            // and it can't get better in future columns.\n            return undefined;\n        }\n        const temp = previous;\n        previous = current;\n        current = temp;\n    }\n    const res = previous[s2.length];\n    return res > max ? undefined : res;\n}\n//# sourceMappingURL=suggestion.js.map","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nexport default isNumber;\n","/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nexport default baseClamp;\n","import baseClamp from './_baseClamp.js';\nimport toNumber from './toNumber.js';\n\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nexport default clamp;\n","export { isNumber, clamp } from 'lodash-es';\n/**\n * Returns the remainder of division of `n` by `m`. You should use this\n * instead of the built-in operation as the built-in operation does not\n * properly handle negative numbers.\n */\nexport function mod(n, m) {\n    return ((n % m) + m) % m;\n}\nexport function random(lower, upper) {\n    if (upper == null) {\n        upper = lower == null ? 1 : lower; // eslint-disable-line\n        lower = 0; // eslint-disable-line\n    }\n    else if (upper < lower) {\n        const tmp = lower;\n        lower = upper; // eslint-disable-line\n        upper = tmp; // eslint-disable-line\n    }\n    return Math.floor(Math.random() * (upper - lower + 1) + lower);\n}\nexport function isPercentage(val) {\n    return typeof val === 'string' && val.slice(-1) === '%';\n}\nexport function normalizePercentage(num, ref) {\n    if (num == null) {\n        return 0;\n    }\n    let raw;\n    if (typeof num === 'string') {\n        raw = parseFloat(num);\n        if (isPercentage(num)) {\n            raw /= 100;\n            if (Number.isFinite(raw)) {\n                return raw * ref;\n            }\n        }\n    }\n    else {\n        raw = num;\n    }\n    if (!Number.isFinite(raw)) {\n        return 0;\n    }\n    if (raw > 0 && raw < 1) {\n        return raw * ref;\n    }\n    return raw;\n}\nexport function parseCssNumeric(val, units) {\n    function getUnit(regexp) {\n        const matches = new RegExp(`(?:\\\\d+(?:\\\\.\\\\d+)*)(${regexp})$`).exec(val);\n        if (!matches) {\n            return null;\n        }\n        return matches[1];\n    }\n    const number = parseFloat(val);\n    if (Number.isNaN(number)) {\n        return null;\n    }\n    // determine the unit\n    let regexp;\n    if (units == null) {\n        // accept any unit, as well as no unit\n        regexp = '[A-Za-z]*';\n    }\n    else if (Array.isArray(units)) {\n        if (units.length === 0) {\n            return null;\n        }\n        regexp = units.join('|');\n    }\n    else if (typeof units === 'string') {\n        regexp = units;\n    }\n    const unit = getUnit(regexp);\n    if (unit === null) {\n        return null;\n    }\n    return {\n        unit,\n        value: number,\n    };\n}\nexport function normalizeSides(box) {\n    if (typeof box === 'object') {\n        let left = 0;\n        let top = 0;\n        let right = 0;\n        let bottom = 0;\n        if (box.vertical != null && Number.isFinite(box.vertical)) {\n            top = bottom = box.vertical;\n        }\n        if (box.horizontal != null && Number.isFinite(box.horizontal)) {\n            right = left = box.horizontal;\n        }\n        if (box.left != null && Number.isFinite(box.left))\n            left = box.left;\n        if (box.top != null && Number.isFinite(box.top))\n            top = box.top;\n        if (box.right != null && Number.isFinite(box.right))\n            right = box.right;\n        if (box.bottom != null && Number.isFinite(box.bottom))\n            bottom = box.bottom;\n        return { top, right, bottom, left };\n    }\n    let val = 0;\n    if (box != null && Number.isFinite(box)) {\n        val = box;\n    }\n    return { top: val, right: val, bottom: val, left: val };\n}\n//# sourceMappingURL=number.js.map","/* eslint-disable no-underscore-dangle */\nlet _IS_MAC = false;\nlet _IS_IOS = false;\nlet _IS_WINDOWS = false;\nlet _IS_IE = false;\nlet _IS_IE11 = false;\nlet _IS_EDGE = false;\nlet _IS_NETSCAPE = false;\nlet _IS_CHROME_APP = false;\nlet _IS_CHROME = false;\nlet _IS_OPERA = false;\nlet _IS_FIREFOX = false;\nlet _IS_SAFARI = false;\nlet _SUPPORT_TOUCH = false;\nlet _SUPPORT_POINTER = false;\nlet _SUPPORT_PASSIVE = false;\nlet _NO_FOREIGNOBJECT = false;\nif (typeof navigator === 'object') {\n    const ua = navigator.userAgent;\n    _IS_MAC = ua.indexOf('Macintosh') >= 0;\n    _IS_IOS = !!ua.match(/(iPad|iPhone|iPod)/g);\n    _IS_WINDOWS = ua.indexOf('Windows') >= 0;\n    _IS_IE = ua.indexOf('MSIE') >= 0;\n    _IS_IE11 = !!ua.match(/Trident\\/7\\./);\n    _IS_EDGE = !!ua.match(/Edge\\//);\n    _IS_NETSCAPE =\n        ua.indexOf('Mozilla/') >= 0 &&\n            ua.indexOf('MSIE') < 0 &&\n            ua.indexOf('Edge/') < 0;\n    _IS_CHROME = ua.indexOf('Chrome/') >= 0 && ua.indexOf('Edge/') < 0;\n    _IS_OPERA = ua.indexOf('Opera/') >= 0 || ua.indexOf('OPR/') >= 0;\n    _IS_FIREFOX = ua.indexOf('Firefox/') >= 0;\n    _IS_SAFARI =\n        ua.indexOf('AppleWebKit/') >= 0 &&\n            ua.indexOf('Chrome/') < 0 &&\n            ua.indexOf('Edge/') < 0;\n    if (typeof document === 'object') {\n        _NO_FOREIGNOBJECT =\n            !document.createElementNS ||\n                `${document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject')}` !== '[object SVGForeignObjectElement]' ||\n                ua.indexOf('Opera/') >= 0;\n    }\n}\nif (typeof window === 'object') {\n    _IS_CHROME_APP =\n        window.chrome != null &&\n            window.chrome.app != null &&\n            window.chrome.app.runtime != null;\n    _SUPPORT_POINTER = window.PointerEvent != null && !_IS_MAC;\n}\nif (typeof document === 'object') {\n    _SUPPORT_TOUCH = 'ontouchstart' in document.documentElement;\n    try {\n        const options = Object.defineProperty({}, 'passive', {\n            get() {\n                _SUPPORT_PASSIVE = true;\n            },\n        });\n        const div = document.createElement('div');\n        if (div.addEventListener) {\n            div.addEventListener('click', () => { }, options);\n        }\n    }\n    catch (err) {\n        // pass\n    }\n}\nexport var Platform;\n(function (Platform) {\n    Platform.IS_MAC = _IS_MAC;\n    Platform.IS_IOS = _IS_IOS;\n    Platform.IS_WINDOWS = _IS_WINDOWS;\n    Platform.IS_IE = _IS_IE;\n    Platform.IS_IE11 = _IS_IE11;\n    Platform.IS_EDGE = _IS_EDGE;\n    /**\n     * A flag indicating whether the browser is Netscape (including Firefox).\n     */\n    Platform.IS_NETSCAPE = _IS_NETSCAPE;\n    /**\n     * A flag indicating whether the the this is running inside a Chrome App.\n     */\n    Platform.IS_CHROME_APP = _IS_CHROME_APP;\n    Platform.IS_CHROME = _IS_CHROME;\n    Platform.IS_OPERA = _IS_OPERA;\n    Platform.IS_FIREFOX = _IS_FIREFOX;\n    Platform.IS_SAFARI = _IS_SAFARI;\n    /**\n     * A flag indicating whether this device supports touchstart/-move/-end\n     * events (Apple iOS, Android, Chromebook and Chrome Browser on touch-enabled\n     * devices).\n     */\n    Platform.SUPPORT_TOUCH = _SUPPORT_TOUCH;\n    /**\n     * A flag indicating whether this device supports Microsoft pointer events.\n     */\n    Platform.SUPPORT_POINTER = _SUPPORT_POINTER;\n    Platform.SUPPORT_PASSIVE = _SUPPORT_PASSIVE;\n    /**\n     * A flag indicating whether foreignObject support is not available. This\n     * is the case for Opera, older SVG-based browsers and all versions of IE.\n     */\n    Platform.NO_FOREIGNOBJECT = _NO_FOREIGNOBJECT;\n    Platform.SUPPORT_FOREIGNOBJECT = !Platform.NO_FOREIGNOBJECT;\n})(Platform || (Platform = {}));\n(function (Platform) {\n    function getHMRStatus() {\n        const mod = window.module;\n        if (mod != null && mod.hot != null && mod.hot.status != null) {\n            return mod.hot.status();\n        }\n        return 'unkonwn';\n    }\n    Platform.getHMRStatus = getHMRStatus;\n    function isApplyingHMR() {\n        return getHMRStatus() === 'apply';\n    }\n    Platform.isApplyingHMR = isApplyingHMR;\n    // This function checks if the specified event is supported by the browser.\n    // Source: http://perfectionkills.com/detecting-event-support-without-browser-sniffing/\n    const TAGNAMES = {\n        select: 'input',\n        change: 'input',\n        submit: 'form',\n        reset: 'form',\n        error: 'img',\n        load: 'img',\n        abort: 'img',\n    };\n    function isEventSupported(event) {\n        const elem = document.createElement(TAGNAMES[event] || 'div');\n        const eventName = `on${event}`;\n        let isSupported = eventName in elem;\n        if (!isSupported) {\n            elem.setAttribute(eventName, 'return;');\n            isSupported = typeof elem[eventName] === 'function';\n        }\n        return isSupported;\n    }\n    Platform.isEventSupported = isEventSupported;\n})(Platform || (Platform = {}));\n//# sourceMappingURL=index.js.map","const rclass = /[\\t\\r\\n\\f]/g;\nconst rnotwhite = /\\S+/g;\nconst fillSpaces = (str) => ` ${str} `;\nexport function getClass(elem) {\n    return (elem && elem.getAttribute && elem.getAttribute('class')) || '';\n}\nexport function hasClass(elem, selector) {\n    if (elem == null || selector == null) {\n        return false;\n    }\n    const classNames = fillSpaces(getClass(elem));\n    const className = fillSpaces(selector);\n    return elem.nodeType === 1\n        ? classNames.replace(rclass, ' ').includes(className)\n        : false;\n}\nexport function addClass(elem, selector) {\n    if (elem == null || selector == null) {\n        return;\n    }\n    if (typeof selector === 'function') {\n        return addClass(elem, selector(getClass(elem)));\n    }\n    if (typeof selector === 'string' && elem.nodeType === 1) {\n        const classes = selector.match(rnotwhite) || [];\n        const oldValue = fillSpaces(getClass(elem)).replace(rclass, ' ');\n        let newValue = classes.reduce((memo, cls) => {\n            if (memo.indexOf(fillSpaces(cls)) < 0) {\n                return `${memo}${cls} `;\n            }\n            return memo;\n        }, oldValue);\n        newValue = newValue.trim();\n        if (oldValue !== newValue) {\n            elem.setAttribute('class', newValue);\n        }\n    }\n}\nexport function removeClass(elem, selector) {\n    if (elem == null) {\n        return;\n    }\n    if (typeof selector === 'function') {\n        return removeClass(elem, selector(getClass(elem)));\n    }\n    if ((!selector || typeof selector === 'string') && elem.nodeType === 1) {\n        const classes = (selector || '').match(rnotwhite) || [];\n        const oldValue = fillSpaces(getClass(elem)).replace(rclass, ' ');\n        let newValue = classes.reduce((memo, cls) => {\n            const className = fillSpaces(cls);\n            if (memo.indexOf(className) > -1) {\n                return memo.replace(className, ' ');\n            }\n            return memo;\n        }, oldValue);\n        newValue = selector ? newValue.trim() : '';\n        if (oldValue !== newValue) {\n            elem.setAttribute('class', newValue);\n        }\n    }\n}\nexport function toggleClass(elem, selector, stateVal) {\n    if (elem == null || selector == null) {\n        return;\n    }\n    if (stateVal != null && typeof selector === 'string') {\n        stateVal ? addClass(elem, selector) : removeClass(elem, selector);\n        return;\n    }\n    if (typeof selector === 'function') {\n        return toggleClass(elem, selector(getClass(elem), stateVal), stateVal);\n    }\n    if (typeof selector === 'string') {\n        const metches = selector.match(rnotwhite) || [];\n        metches.forEach((cls) => {\n            hasClass(elem, cls) ? removeClass(elem, cls) : addClass(elem, cls);\n        });\n    }\n}\n//# sourceMappingURL=class.js.map","import { hasClass } from './class';\nlet idCounter = 0;\nexport function uniqueId() {\n    idCounter += 1;\n    return `v${idCounter}`;\n}\nexport function ensureId(elem) {\n    if (elem.id == null || elem.id === '') {\n        elem.id = uniqueId();\n    }\n    return elem.id;\n}\n/**\n * Returns true if object is an instance of SVGGraphicsElement.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement\n */\nexport function isSVGGraphicsElement(elem) {\n    if (elem == null) {\n        return false;\n    }\n    return typeof elem.getScreenCTM === 'function' && elem instanceof SVGElement;\n}\nexport const ns = {\n    svg: 'http://www.w3.org/2000/svg',\n    xmlns: 'http://www.w3.org/2000/xmlns/',\n    xml: 'http://www.w3.org/XML/1998/namespace',\n    xlink: 'http://www.w3.org/1999/xlink',\n    xhtml: 'http://www.w3.org/1999/xhtml',\n};\nexport const svgVersion = '1.1';\nexport function createElement(tagName, doc = document) {\n    return doc.createElement(tagName);\n}\nexport function createElementNS(tagName, namespaceURI = ns.xhtml, doc = document) {\n    return doc.createElementNS(namespaceURI, tagName);\n}\nexport function createSvgElement(tagName, doc = document) {\n    return createElementNS(tagName, ns.svg, doc);\n}\nexport function createSvgDocument(content) {\n    if (content) {\n        const xml = `<svg xmlns=\"${ns.svg}\" xmlns:xlink=\"${ns.xlink}\" version=\"${svgVersion}\">${content}</svg>`; // lgtm[js/html-constructed-from-input]\n        const { documentElement } = parseXML(xml, { async: false });\n        return documentElement;\n    }\n    const svg = document.createElementNS(ns.svg, 'svg');\n    svg.setAttributeNS(ns.xmlns, 'xmlns:xlink', ns.xlink);\n    svg.setAttribute('version', svgVersion);\n    return svg;\n}\nexport function parseXML(data, options = {}) {\n    let xml;\n    try {\n        const parser = new DOMParser();\n        if (options.async != null) {\n            const instance = parser;\n            instance.async = options.async;\n        }\n        xml = parser.parseFromString(data, options.mimeType || 'text/xml');\n    }\n    catch (error) {\n        xml = undefined;\n    }\n    if (!xml || xml.getElementsByTagName('parsererror').length) {\n        throw new Error(`Invalid XML: ${data}`);\n    }\n    return xml;\n}\nexport function tagName(node, lowercase = true) {\n    const nodeName = node.nodeName;\n    return lowercase ? nodeName.toLowerCase() : nodeName.toUpperCase();\n}\nexport function index(elem) {\n    let index = 0;\n    let node = elem.previousSibling;\n    while (node) {\n        if (node.nodeType === 1) {\n            index += 1;\n        }\n        node = node.previousSibling;\n    }\n    return index;\n}\nexport function find(elem, selector) {\n    return elem.querySelectorAll(selector);\n}\nexport function findOne(elem, selector) {\n    return elem.querySelector(selector);\n}\nexport function findParentByClass(elem, className, terminator) {\n    const ownerSVGElement = elem.ownerSVGElement;\n    let node = elem.parentNode;\n    while (node && node !== terminator && node !== ownerSVGElement) {\n        if (hasClass(node, className)) {\n            return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nexport function contains(parent, child) {\n    const bup = child && child.parentNode;\n    return (parent === bup ||\n        !!(bup && bup.nodeType === 1 && parent.compareDocumentPosition(bup) & 16) // eslint-disable-line no-bitwise\n    );\n}\nexport function remove(elem) {\n    if (elem) {\n        const elems = Array.isArray(elem) ? elem : [elem];\n        elems.forEach((item) => {\n            if (item.parentNode) {\n                item.parentNode.removeChild(item);\n            }\n        });\n    }\n}\nexport function empty(elem) {\n    while (elem.firstChild) {\n        elem.removeChild(elem.firstChild);\n    }\n}\nexport function append(elem, elems) {\n    const arr = Array.isArray(elems) ? elems : [elems];\n    arr.forEach((child) => {\n        if (child != null) {\n            elem.appendChild(child);\n        }\n    });\n}\nexport function prepend(elem, elems) {\n    const child = elem.firstChild;\n    return child ? before(child, elems) : append(elem, elems);\n}\nexport function before(elem, elems) {\n    const parent = elem.parentNode;\n    if (parent) {\n        const arr = Array.isArray(elems) ? elems : [elems];\n        arr.forEach((child) => {\n            if (child != null) {\n                parent.insertBefore(child, elem);\n            }\n        });\n    }\n}\nexport function after(elem, elems) {\n    const parent = elem.parentNode;\n    if (parent) {\n        const arr = Array.isArray(elems) ? elems : [elems];\n        arr.forEach((child) => {\n            if (child != null) {\n                parent.insertBefore(child, elem.nextSibling);\n            }\n        });\n    }\n}\nexport function appendTo(elem, target) {\n    if (target != null) {\n        target.appendChild(elem);\n    }\n}\nexport function isElement(x) {\n    return !!x && x.nodeType === 1;\n}\n// Determines whether a node is an HTML node\nexport function isHTMLElement(elem) {\n    try {\n        // Using W3 DOM2 (works for FF, Opera and Chrome)\n        return elem instanceof HTMLElement;\n    }\n    catch (e) {\n        // Browsers not supporting W3 DOM2 don't have HTMLElement and\n        // an exception is thrown and we end up here. Testing some\n        // properties that all elements have (works on IE7)\n        return (typeof elem === 'object' &&\n            elem.nodeType === 1 &&\n            typeof elem.style === 'object' &&\n            typeof elem.ownerDocument === 'object');\n    }\n}\nexport function children(parent, className) {\n    const matched = [];\n    let elem = parent.firstChild;\n    for (; elem; elem = elem.nextSibling) {\n        if (elem.nodeType === 1) {\n            if (!className || hasClass(elem, className)) {\n                matched.push(elem);\n            }\n        }\n    }\n    return matched;\n}\n//# sourceMappingURL=elem.js.map","import { ns } from './elem';\nimport { kebabCase } from '../string/format';\nexport const CASE_SENSITIVE_ATTR = [\n    'viewBox',\n    'attributeName',\n    'attributeType',\n    'repeatCount',\n    'textLength',\n    'lengthAdjust',\n];\nexport function getAttribute(elem, name) {\n    return elem.getAttribute(name);\n}\nexport function removeAttribute(elem, name) {\n    const qualified = qualifyAttr(name);\n    if (qualified.ns) {\n        if (elem.hasAttributeNS(qualified.ns, qualified.local)) {\n            elem.removeAttributeNS(qualified.ns, qualified.local);\n        }\n    }\n    else if (elem.hasAttribute(name)) {\n        elem.removeAttribute(name);\n    }\n}\nexport function setAttribute(elem, name, value) {\n    if (value == null) {\n        return removeAttribute(elem, name);\n    }\n    const qualified = qualifyAttr(name);\n    if (qualified.ns && typeof value === 'string') {\n        elem.setAttributeNS(qualified.ns, name, value);\n    }\n    else if (name === 'id') {\n        elem.id = `${value}`;\n    }\n    else {\n        elem.setAttribute(name, `${value}`);\n    }\n}\nexport function setAttributes(elem, attrs) {\n    Object.keys(attrs).forEach((name) => {\n        setAttribute(elem, name, attrs[name]);\n    });\n}\nexport function attr(elem, name, value) {\n    if (name == null) {\n        const attrs = elem.attributes;\n        const ret = {};\n        for (let i = 0; i < attrs.length; i += 1) {\n            ret[attrs[i].name] = attrs[i].value;\n        }\n        return ret;\n    }\n    if (typeof name === 'string' && value === undefined) {\n        return elem.getAttribute(name);\n    }\n    if (typeof name === 'object') {\n        setAttributes(elem, name);\n    }\n    else {\n        setAttribute(elem, name, value);\n    }\n}\nexport function qualifyAttr(name) {\n    if (name.indexOf(':') !== -1) {\n        const combinedKey = name.split(':');\n        return {\n            ns: ns[combinedKey[0]],\n            local: combinedKey[1],\n        };\n    }\n    return {\n        ns: null,\n        local: name,\n    };\n}\nexport function kebablizeAttrs(attrs) {\n    const result = {};\n    Object.keys(attrs).forEach((key) => {\n        const name = CASE_SENSITIVE_ATTR.includes(key) ? key : kebabCase(key);\n        result[name] = attrs[key];\n    });\n    return result;\n}\nexport function styleToObject(styleString) {\n    const ret = {};\n    const styles = styleString.split(';');\n    styles.forEach((item) => {\n        const section = item.trim();\n        if (section) {\n            const pair = section.split('=');\n            if (pair.length) {\n                ret[pair[0].trim()] = pair[1] ? pair[1].trim() : '';\n            }\n        }\n    });\n    return ret;\n}\nexport function mergeAttrs(target, source) {\n    Object.keys(source).forEach((attr) => {\n        if (attr === 'class') {\n            target[attr] = target[attr]\n                ? `${target[attr]} ${source[attr]}`\n                : source[attr];\n        }\n        else if (attr === 'style') {\n            const to = typeof target[attr] === 'object';\n            const so = typeof source[attr] === 'object';\n            let tt;\n            let ss;\n            if (to && so) {\n                tt = target[attr];\n                ss = source[attr];\n            }\n            else if (to) {\n                tt = target[attr];\n                ss = styleToObject(source[attr]);\n            }\n            else if (so) {\n                tt = styleToObject(target[attr]);\n                ss = source[attr];\n            }\n            else {\n                tt = styleToObject(target[attr]);\n                ss = styleToObject(source[attr]);\n            }\n            target[attr] = mergeAttrs(tt, ss);\n        }\n        else {\n            target[attr] = source[attr];\n        }\n    });\n    return target;\n}\n//# sourceMappingURL=attr.js.map","import { ObjectExt } from '../object';\nimport { mergeAttrs } from '../dom/attr';\nexport function annotate(t, annotations, opt = {}) {\n    const offset = opt.offset || 0;\n    const compacted = [];\n    const ret = [];\n    let curr;\n    let prev;\n    let batch = null;\n    for (let i = 0; i < t.length; i += 1) {\n        curr = ret[i] = t[i];\n        for (let j = 0, jj = annotations.length; j < jj; j += 1) {\n            const annotation = annotations[j];\n            const start = annotation.start + offset;\n            const end = annotation.end + offset;\n            if (i >= start && i < end) {\n                if (typeof curr === 'string') {\n                    curr = ret[i] = {\n                        t: t[i],\n                        attrs: annotation.attrs,\n                    };\n                }\n                else {\n                    curr.attrs = mergeAttrs(mergeAttrs({}, curr.attrs), annotation.attrs);\n                }\n                if (opt.includeAnnotationIndices) {\n                    if (curr.annotations == null) {\n                        curr.annotations = [];\n                    }\n                    curr.annotations.push(j);\n                }\n            }\n        }\n        prev = ret[i - 1];\n        if (!prev) {\n            batch = curr;\n        }\n        else if (ObjectExt.isObject(curr) && ObjectExt.isObject(prev)) {\n            batch = batch;\n            // Both previous item and the current one are annotations.\n            // If the attributes didn't change, merge the text.\n            if (JSON.stringify(curr.attrs) === JSON.stringify(prev.attrs)) {\n                batch.t += curr.t;\n            }\n            else {\n                compacted.push(batch);\n                batch = curr;\n            }\n        }\n        else if (ObjectExt.isObject(curr)) {\n            // Previous item was a string, current item is an annotation.\n            batch = batch;\n            compacted.push(batch);\n            batch = curr;\n        }\n        else if (ObjectExt.isObject(prev)) {\n            // Previous item was an annotation, current item is a string.\n            batch = batch;\n            compacted.push(batch);\n            batch = curr;\n        }\n        else {\n            // Both previous and current item are strings.\n            batch = (batch || '') + curr;\n        }\n    }\n    if (batch != null) {\n        compacted.push(batch);\n    }\n    return compacted;\n}\nexport function findAnnotationsAtIndex(annotations, index) {\n    return annotations\n        ? annotations.filter((a) => a.start < index && index <= a.end)\n        : [];\n}\nexport function findAnnotationsBetweenIndexes(annotations, start, end) {\n    return annotations\n        ? annotations.filter((a) => (start >= a.start && start < a.end) ||\n            (end > a.start && end <= a.end) ||\n            (a.start >= start && a.end < end))\n        : [];\n}\nexport function shiftAnnotations(annotations, index, offset) {\n    if (annotations) {\n        annotations.forEach((a) => {\n            if (a.start < index && a.end >= index) {\n                a.end += offset;\n            }\n            else if (a.start >= index) {\n                a.start += offset;\n                a.end += offset;\n            }\n        });\n    }\n    return annotations;\n}\n//# sourceMappingURL=annotate.js.map","/**\n * Replaces all spaces with the Unicode No-break space.\n * ref: http://www.fileformat.info/info/unicode/char/a0/index.htm\n *\n * IE would otherwise collapse all spaces into one. This is useful\n * e.g. in tests when you want to compare the actual DOM text content\n * without having to add the unicode character in the place of all spaces.\n */\nexport function sanitize(text) {\n    return text.replace(/ /g, '\\u00A0');\n}\n//# sourceMappingURL=sanitize.js.map","export var DataUri;\n(function (DataUri) {\n    function isDataUrl(url) {\n        const prefix = 'data:';\n        return url.substr(0, prefix.length) === prefix;\n    }\n    DataUri.isDataUrl = isDataUrl;\n    /**\n     * Converts an image at `url` to base64-encoded data uri.\n     * The mime type of the image is inferred from the `url` file extension.\n     */\n    function imageToDataUri(url, callback) {\n        // No need to convert to data uri if it is already in data uri.\n        if (!url || isDataUrl(url)) {\n            // Keep the async nature of the function.\n            setTimeout(() => callback(null, url));\n            return;\n        }\n        const onError = () => {\n            callback(new Error(`Failed to load image: ${url}`));\n        };\n        const onLoad = window.FileReader\n            ? // chrome, IE10+\n                (xhr) => {\n                    if (xhr.status === 200) {\n                        const reader = new FileReader();\n                        reader.onload = (evt) => {\n                            const dataUri = evt.target.result;\n                            callback(null, dataUri);\n                        };\n                        reader.onerror = onError;\n                        reader.readAsDataURL(xhr.response);\n                    }\n                    else {\n                        onError();\n                    }\n                }\n            : (xhr) => {\n                const toString = (u8a) => {\n                    const CHUNK_SZ = 0x8000;\n                    const c = [];\n                    for (let i = 0; i < u8a.length; i += CHUNK_SZ) {\n                        c.push(String.fromCharCode.apply(null, u8a.subarray(i, i + CHUNK_SZ)));\n                    }\n                    return c.join('');\n                };\n                if (xhr.status === 200) {\n                    let suffix = url.split('.').pop() || 'png';\n                    if (suffix === 'svg') {\n                        suffix = 'svg+xml';\n                    }\n                    const meta = `data:image/${suffix};base64,`;\n                    const bytes = new Uint8Array(xhr.response);\n                    const base64 = meta + btoa(toString(bytes));\n                    callback(null, base64);\n                }\n                else {\n                    onError();\n                }\n            };\n        const xhr = new XMLHttpRequest();\n        xhr.responseType = window.FileReader ? 'blob' : 'arraybuffer';\n        xhr.open('GET', url, true);\n        xhr.addEventListener('error', onError);\n        xhr.addEventListener('load', () => onLoad(xhr));\n        xhr.send();\n    }\n    DataUri.imageToDataUri = imageToDataUri;\n    function dataUriToBlob(dataUrl) {\n        let uri = dataUrl.replace(/\\s/g, '');\n        uri = decodeURIComponent(uri);\n        const index = uri.indexOf(',');\n        const dataType = uri.slice(0, index); // e.g. 'data:image/jpeg;base64'\n        const mime = dataType.split(':')[1].split(';')[0]; // e.g. 'image/jpeg'\n        const data = uri.slice(index + 1);\n        let decodedString;\n        if (dataType.indexOf('base64') >= 0) {\n            // data may be encoded in base64\n            decodedString = atob(data);\n        }\n        else {\n            // convert the decoded string to UTF-8\n            decodedString = unescape(encodeURIComponent(data));\n        }\n        // write the bytes of the string to a typed array\n        const ia = new Uint8Array(decodedString.length);\n        for (let i = 0; i < decodedString.length; i += 1) {\n            ia[i] = decodedString.charCodeAt(i);\n        }\n        return new Blob([ia], { type: mime });\n    }\n    DataUri.dataUriToBlob = dataUriToBlob;\n    function downloadBlob(blob, fileName) {\n        const msSaveBlob = window.navigator.msSaveBlob;\n        if (msSaveBlob) {\n            // requires IE 10+\n            // pulls up a save dialog\n            msSaveBlob(blob, fileName);\n        }\n        else {\n            // other browsers\n            // downloads directly in Chrome and Safari\n            // presents a save/open dialog in Firefox\n            // Firefox bug: `from` field in save dialog always shows `from:blob:`\n            // https://bugzilla.mozilla.org/show_bug.cgi?id=1053327\n            const url = window.URL.createObjectURL(blob);\n            const link = document.createElement('a');\n            link.href = url;\n            link.download = fileName;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            // mark the url for garbage collection\n            window.URL.revokeObjectURL(url);\n        }\n    }\n    DataUri.downloadBlob = downloadBlob;\n    function downloadDataUri(dataUrl, fileName) {\n        const blob = dataUriToBlob(dataUrl);\n        downloadBlob(blob, fileName);\n    }\n    DataUri.downloadDataUri = downloadDataUri;\n    function parseViewBox(svg) {\n        const matches = svg.match(/<svg[^>]*viewBox\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        if (matches && matches[2]) {\n            return matches[2].replace(/\\s+/, ' ').split(' ');\n        }\n        return null;\n    }\n    function getNumber(str) {\n        const ret = parseFloat(str);\n        return Number.isNaN(ret) ? null : ret;\n    }\n    function svgToDataUrl(svg, options = {}) {\n        let viewBox = null;\n        const getNumberFromViewBox = (index) => {\n            if (viewBox == null) {\n                viewBox = parseViewBox(svg);\n            }\n            if (viewBox != null) {\n                return getNumber(viewBox[index]);\n            }\n            return null;\n        };\n        const getNumberFromMatches = (reg) => {\n            const matches = svg.match(reg);\n            if (matches && matches[2]) {\n                return getNumber(matches[2]);\n            }\n            return null;\n        };\n        let w = options.width;\n        if (w == null) {\n            w = getNumberFromMatches(/<svg[^>]*width\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        }\n        if (w == null) {\n            w = getNumberFromViewBox(2);\n        }\n        if (w == null) {\n            throw new Error('Can not parse width from svg string');\n        }\n        let h = options.height;\n        if (h == null) {\n            h = getNumberFromMatches(/<svg[^>]*height\\s*=\\s*([\"']?)(.+?)\\1[^>]*>/i);\n        }\n        if (h == null) {\n            h = getNumberFromViewBox(3);\n        }\n        if (h == null) {\n            throw new Error('Can not parse height from svg string');\n        }\n        const decoded = encodeURIComponent(svg)\n            .replace(/'/g, '%27')\n            .replace(/\"/g, '%22');\n        const header = 'data:image/svg+xml';\n        const dataUrl = `${header},${decoded}`;\n        return dataUrl;\n    }\n    DataUri.svgToDataUrl = svgToDataUrl;\n})(DataUri || (DataUri = {}));\n//# sourceMappingURL=index.js.map","let millimeterSize;\nconst supportedUnits = {\n    px(val) {\n        return val;\n    },\n    mm(val) {\n        return millimeterSize * val;\n    },\n    cm(val) {\n        return millimeterSize * val * 10;\n    },\n    in(val) {\n        return millimeterSize * val * 25.4;\n    },\n    pt(val) {\n        return millimeterSize * ((25.4 * val) / 72);\n    },\n    pc(val) {\n        return millimeterSize * ((25.4 * val) / 6);\n    },\n};\n// eslint-disable-next-line\nexport var Unit;\n(function (Unit) {\n    function measure(cssWidth, cssHeight, unit) {\n        const div = document.createElement('div');\n        const style = div.style;\n        style.display = 'inline-block';\n        style.position = 'absolute';\n        style.left = '-15000px';\n        style.top = '-15000px';\n        style.width = cssWidth + (unit || 'px');\n        style.height = cssHeight + (unit || 'px');\n        document.body.appendChild(div);\n        const rect = div.getBoundingClientRect();\n        const size = {\n            width: rect.width || 0,\n            height: rect.height || 0,\n        };\n        document.body.removeChild(div);\n        return size;\n    }\n    Unit.measure = measure;\n    function toPx(val, unit) {\n        if (millimeterSize == null) {\n            millimeterSize = measure('1', '1', 'mm').width;\n        }\n        const convert = unit ? supportedUnits[unit] : null;\n        if (convert) {\n            return convert(val);\n        }\n        return val;\n    }\n    Unit.toPx = toPx;\n})(Unit || (Unit = {}));\n//# sourceMappingURL=index.js.map","const hyphenPattern = /-(.)/g;\nfunction camelize(str) {\n    return str.replace(hyphenPattern, (_, char) => char.toUpperCase());\n}\nconst memoized = {};\nconst prefixes = ['webkit', 'ms', 'moz', 'o'];\nconst testStyle = document ? document.createElement('div').style : {};\nfunction getWithPrefix(name) {\n    for (let i = 0; i < prefixes.length; i += 1) {\n        const prefixedName = prefixes[i] + name;\n        if (prefixedName in testStyle) {\n            return prefixedName;\n        }\n    }\n    return null;\n}\nexport function getVendorPrefixedName(property) {\n    const name = camelize(property);\n    if (memoized[name] == null) {\n        const capitalizedName = name.charAt(0).toUpperCase() + name.slice(1);\n        memoized[name] = name in testStyle ? name : getWithPrefix(capitalizedName);\n    }\n    return memoized[name];\n}\n//# sourceMappingURL=prefix.js.map","import { getVendorPrefixedName } from './prefix';\nexport function setPrefixedStyle(style, name, value) {\n    const vendor = getVendorPrefixedName(name);\n    if (vendor != null) {\n        style[vendor] = value;\n    }\n    style[name] = value;\n}\nexport function getComputedStyle(elem, name) {\n    // IE9+\n    const computed = elem.ownerDocument &&\n        elem.ownerDocument.defaultView &&\n        elem.ownerDocument.defaultView.opener\n        ? elem.ownerDocument.defaultView.getComputedStyle(elem, null)\n        : window.getComputedStyle(elem, null);\n    if (computed && name) {\n        return computed.getPropertyValue(name) || computed[name];\n    }\n    return computed;\n}\nexport function hasScrollbars(container) {\n    const style = getComputedStyle(container);\n    return (style != null && (style.overflow === 'scroll' || style.overflow === 'auto'));\n}\n//# sourceMappingURL=style.js.map","export const clearSelection = (function () {\n    const doc = document;\n    if (doc.selection) {\n        return function () {\n            doc.selection.empty();\n        };\n    }\n    if (window.getSelection) {\n        return function () {\n            const selection = window.getSelection();\n            if (selection) {\n                if (selection.empty) {\n                    selection.empty();\n                }\n                else if (selection.removeAllRanges) {\n                    selection.removeAllRanges();\n                }\n            }\n        };\n    }\n    return function () { };\n})();\n//# sourceMappingURL=selection.js.map","import { getVendorPrefixedName } from './prefix';\nconst numericProps = {\n    animationIterationCount: true,\n    columnCount: true,\n    flexGrow: true,\n    flexShrink: true,\n    fontWeight: true,\n    gridArea: true,\n    gridColumn: true,\n    gridColumnEnd: true,\n    gridColumnStart: true,\n    gridRow: true,\n    gridRowEnd: true,\n    gridRowStart: true,\n    lineHeight: true,\n    opacity: true,\n    order: true,\n    orphans: true,\n    widows: true,\n    zIndex: true,\n};\nexport function isCSSVariable(prop) {\n    return /^--/.test(prop);\n}\nexport function computeStyle(elem, prop, isVariable) {\n    const style = window.getComputedStyle(elem, null);\n    return isVariable\n        ? style.getPropertyValue(prop) || undefined\n        : style[prop] || elem.style[prop];\n}\nexport function computeStyleInt(elem, prop) {\n    return parseInt(computeStyle(elem, prop), 10) || 0;\n}\nfunction getSuffixedValue(prop, value) {\n    return !numericProps[prop] && typeof value === 'number' ? `${value}px` : value;\n}\nexport function css(elem, prop, value) {\n    if (typeof prop === 'string') {\n        const isVariable = isCSSVariable(prop);\n        if (!isVariable) {\n            prop = getVendorPrefixedName(prop); // eslint-disable-line\n        }\n        if (value === undefined) {\n            return computeStyle(elem, prop, isVariable);\n        }\n        if (!isVariable) {\n            value = getSuffixedValue(prop, value); // eslint-disable-line\n        }\n        const style = elem.style;\n        if (isVariable) {\n            style.setProperty(prop, value);\n        }\n        else {\n            style[prop] = value;\n        }\n        return;\n    }\n    // eslint-disable-next-line\n    for (const key in prop) {\n        css(elem, key, prop[key]);\n    }\n}\n//# sourceMappingURL=css.js.map","import { StringExt } from '../string';\nconst dataset = new WeakMap();\nexport function getData(elem, name) {\n    const key = StringExt.camelCase(name);\n    const cache = dataset.get(elem);\n    if (cache) {\n        return cache[key];\n    }\n}\nexport function setData(elem, name, value) {\n    const key = StringExt.camelCase(name);\n    const cache = dataset.get(elem);\n    if (cache) {\n        cache[key] = value;\n    }\n    else {\n        dataset.set(elem, {\n            [key]: value,\n        });\n    }\n}\nexport function data(elem, name, value) {\n    if (!name) {\n        const datas = {};\n        Object.keys(dataset).forEach((key) => {\n            datas[key] = getData(elem, key);\n        });\n        return datas;\n    }\n    if (typeof name === 'string') {\n        if (value === undefined) {\n            return getData(elem, name);\n        }\n        setData(elem, name, value);\n        return;\n    }\n    // eslint-disable-next-line\n    for (const key in name) {\n        data(elem, key, name[key]);\n    }\n}\n//# sourceMappingURL=data.js.map","import * as Dom from '../dom/main';\nexport class Vector {\n    get [Symbol.toStringTag]() {\n        return Vector.toStringTag;\n    }\n    get type() {\n        return this.node.nodeName;\n    }\n    get id() {\n        return this.node.id;\n    }\n    set id(id) {\n        this.node.id = id;\n    }\n    constructor(elem, attrs, children) {\n        if (!elem) {\n            throw new TypeError('Invalid element to create vector');\n        }\n        let node;\n        if (Vector.isVector(elem)) {\n            node = elem.node;\n        }\n        else if (typeof elem === 'string') {\n            if (elem.toLowerCase() === 'svg') {\n                node = Dom.createSvgDocument();\n            }\n            else if (elem[0] === '<') {\n                const doc = Dom.createSvgDocument(elem);\n                // only import the first child\n                node = document.importNode(doc.firstChild, true);\n            }\n            else {\n                node = document.createElementNS(Dom.ns.svg, elem);\n            }\n        }\n        else {\n            node = elem;\n        }\n        this.node = node;\n        if (attrs) {\n            this.setAttributes(attrs);\n        }\n        if (children) {\n            this.append(children);\n        }\n    }\n    transform(matrix, options) {\n        if (matrix == null) {\n            return Dom.transform(this.node);\n        }\n        Dom.transform(this.node, matrix, options);\n        return this;\n    }\n    translate(tx, ty = 0, options = {}) {\n        if (tx == null) {\n            return Dom.translate(this.node);\n        }\n        Dom.translate(this.node, tx, ty, options);\n        return this;\n    }\n    rotate(angle, cx, cy, options = {}) {\n        if (angle == null) {\n            return Dom.rotate(this.node);\n        }\n        Dom.rotate(this.node, angle, cx, cy, options);\n        return this;\n    }\n    scale(sx, sy) {\n        if (sx == null) {\n            return Dom.scale(this.node);\n        }\n        Dom.scale(this.node, sx, sy);\n        return this;\n    }\n    /**\n     * Returns an SVGMatrix that specifies the transformation necessary\n     * to convert this coordinate system into `target` coordinate system.\n     */\n    getTransformToElement(target) {\n        const ref = Vector.toNode(target);\n        return Dom.getTransformToElement(this.node, ref);\n    }\n    removeAttribute(name) {\n        Dom.removeAttribute(this.node, name);\n        return this;\n    }\n    getAttribute(name) {\n        return Dom.getAttribute(this.node, name);\n    }\n    setAttribute(name, value) {\n        Dom.setAttribute(this.node, name, value);\n        return this;\n    }\n    setAttributes(attrs) {\n        Dom.setAttributes(this.node, attrs);\n        return this;\n    }\n    attr(name, value) {\n        if (name == null) {\n            return Dom.attr(this.node);\n        }\n        if (typeof name === 'string' && value === undefined) {\n            return Dom.attr(this.node, name);\n        }\n        if (typeof name === 'object') {\n            Dom.attr(this.node, name);\n        }\n        else {\n            Dom.attr(this.node, name, value);\n        }\n        return this;\n    }\n    svg() {\n        return this.node instanceof SVGSVGElement\n            ? this\n            : Vector.create(this.node.ownerSVGElement);\n    }\n    defs() {\n        const context = this.svg() || this;\n        const defsNode = context.node.getElementsByTagName('defs')[0];\n        if (defsNode) {\n            return Vector.create(defsNode);\n        }\n        return Vector.create('defs').appendTo(context);\n    }\n    text(content, options = {}) {\n        Dom.text(this.node, content, options);\n        return this;\n    }\n    tagName() {\n        return Dom.tagName(this.node);\n    }\n    clone() {\n        return Vector.create(this.node.cloneNode(true));\n    }\n    remove() {\n        Dom.remove(this.node);\n        return this;\n    }\n    empty() {\n        Dom.empty(this.node);\n        return this;\n    }\n    append(elems) {\n        Dom.append(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    appendTo(target) {\n        Dom.appendTo(this.node, Vector.isVector(target) ? target.node : target);\n        return this;\n    }\n    prepend(elems) {\n        Dom.prepend(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    before(elems) {\n        Dom.before(this.node, Vector.toNodes(elems));\n        return this;\n    }\n    replace(elem) {\n        if (this.node.parentNode) {\n            this.node.parentNode.replaceChild(Vector.toNode(elem), this.node);\n        }\n        return Vector.create(elem);\n    }\n    first() {\n        return this.node.firstChild\n            ? Vector.create(this.node.firstChild)\n            : null;\n    }\n    last() {\n        return this.node.lastChild\n            ? Vector.create(this.node.lastChild)\n            : null;\n    }\n    get(index) {\n        const child = this.node.childNodes[index];\n        return child ? Vector.create(child) : null;\n    }\n    indexOf(elem) {\n        const children = Array.prototype.slice.call(this.node.childNodes);\n        return children.indexOf(Vector.toNode(elem));\n    }\n    find(selector) {\n        const vels = [];\n        const nodes = Dom.find(this.node, selector);\n        if (nodes) {\n            for (let i = 0, ii = nodes.length; i < ii; i += 1) {\n                vels.push(Vector.create(nodes[i]));\n            }\n        }\n        return vels;\n    }\n    findOne(selector) {\n        const found = Dom.findOne(this.node, selector);\n        return found ? Vector.create(found) : null;\n    }\n    findParentByClass(className, terminator) {\n        const node = Dom.findParentByClass(this.node, className, terminator);\n        return node ? Vector.create(node) : null;\n    }\n    matches(selector) {\n        const node = this.node;\n        const matches = this.node.matches;\n        const matcher = node.matches ||\n            node.matchesSelector ||\n            node.msMatchesSelector ||\n            node.mozMatchesSelector ||\n            node.webkitMatchesSelector ||\n            node.oMatchesSelector ||\n            null;\n        return matcher && matcher.call(node, selector);\n    }\n    contains(child) {\n        return Dom.contains(this.node, Vector.isVector(child) ? child.node : child);\n    }\n    wrap(node) {\n        const vel = Vector.create(node);\n        const parentNode = this.node.parentNode;\n        if (parentNode != null) {\n            parentNode.insertBefore(vel.node, this.node);\n        }\n        return vel.append(this);\n    }\n    parent(type) {\n        let parent = this; // eslint-disable-line @typescript-eslint/no-this-alias\n        // check for parent\n        if (parent.node.parentNode == null) {\n            return null;\n        }\n        // get parent element\n        parent = Vector.create(parent.node.parentNode);\n        if (type == null) {\n            return parent;\n        }\n        // loop trough ancestors if type is given\n        do {\n            if (typeof type === 'string' ? parent.matches(type) : parent instanceof type) {\n                return parent;\n            }\n        } while ((parent = Vector.create(parent.node.parentNode)));\n        return parent;\n    }\n    children() {\n        const children = this.node.childNodes;\n        const vels = [];\n        for (let i = 0; i < children.length; i += 1) {\n            const currentChild = children[i];\n            if (currentChild.nodeType === 1) {\n                vels.push(Vector.create(children[i]));\n            }\n        }\n        return vels;\n    }\n    eachChild(fn, deep) {\n        const children = this.children();\n        for (let i = 0, l = children.length; i < l; i += 1) {\n            fn.call(children[i], children[i], i, children);\n            if (deep) {\n                children[i].eachChild(fn, deep);\n            }\n        }\n        return this;\n    }\n    index() {\n        return Dom.index(this.node);\n    }\n    hasClass(className) {\n        return Dom.hasClass(this.node, className);\n    }\n    addClass(className) {\n        Dom.addClass(this.node, className);\n        return this;\n    }\n    removeClass(className) {\n        Dom.removeClass(this.node, className);\n        return this;\n    }\n    toggleClass(className, stateVal) {\n        Dom.toggleClass(this.node, className, stateVal);\n        return this;\n    }\n    toLocalPoint(x, y) {\n        return Dom.toLocalPoint(this.node, x, y);\n    }\n    /**\n     * Samples the underlying SVG element (it currently works only on\n     * paths - where it is most useful anyway). Returns an array of objects\n     * of the form `{ x: Number, y: Number, distance: Number }`. Each of these\n     * objects represent a point on the path. This basically creates a discrete\n     * representation of the path (which is possible a curve). The sampling\n     * interval defines the accuracy of the sampling. In other words, we travel\n     * from the beginning of the path to the end by interval distance (on the\n     * path, not between the resulting points) and collect the discrete points\n     * on the path. This is very useful in many situations. For example, SVG\n     * does not provide a built-in mechanism to find intersections between two\n     * paths. Using sampling, we can just generate bunch of points for each of\n     * the path and find the closest ones from each set.\n     */\n    sample(interval = 1) {\n        if (this.node instanceof SVGPathElement) {\n            return Dom.sample(this.node, interval);\n        }\n        return [];\n    }\n    toPath() {\n        return Vector.create(Dom.toPath(this.node));\n    }\n    toPathData() {\n        return Dom.toPathData(this.node);\n    }\n}\n(function (Vector) {\n    Vector.toStringTag = `X6.${Vector.name}`;\n    function isVector(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Vector) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const vector = instance;\n        if ((tag == null || tag === Vector.toStringTag) &&\n            vector.node instanceof SVGElement &&\n            typeof vector.sample === 'function' &&\n            typeof vector.toPath === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Vector.isVector = isVector;\n    function create(elem, attrs, children) {\n        return new Vector(elem, attrs, children);\n    }\n    Vector.create = create;\n    function createVectors(markup) {\n        if (markup[0] === '<') {\n            const svgDoc = Dom.createSvgDocument(markup);\n            const vels = [];\n            for (let i = 0, ii = svgDoc.childNodes.length; i < ii; i += 1) {\n                const childNode = svgDoc.childNodes[i];\n                vels.push(create(document.importNode(childNode, true)));\n            }\n            return vels;\n        }\n        return [create(markup)];\n    }\n    Vector.createVectors = createVectors;\n    function toNode(elem) {\n        if (isVector(elem)) {\n            return elem.node;\n        }\n        return elem;\n    }\n    Vector.toNode = toNode;\n    function toNodes(elems) {\n        if (Array.isArray(elems)) {\n            return elems.map((elem) => toNode(elem));\n        }\n        return [toNode(elems)];\n    }\n    Vector.toNodes = toNodes;\n})(Vector || (Vector = {}));\n//# sourceMappingURL=index.js.map","/* eslint-disable no-control-regex */\nimport { Text } from '../text';\nimport { attr } from './attr';\nimport { Vector } from '../vector';\nimport { createSvgElement, empty } from './elem';\nconst canvasContext = document.createElement('canvas').getContext('2d');\nfunction createTextPathNode(attrs, elem) {\n    const vel = Vector.create(elem);\n    const textPath = Vector.create('textPath');\n    const d = attrs.d;\n    if (d && attrs['xlink:href'] === undefined) {\n        const path = Vector.create('path').attr('d', d).appendTo(vel.defs());\n        textPath.attr('xlink:href', `#${path.id}`);\n    }\n    if (typeof attrs === 'object') {\n        textPath.attr(attrs);\n    }\n    return textPath.node;\n}\nfunction annotateTextLine(lineNode, lineAnnotations, options) {\n    const eol = options.eol;\n    const baseSize = options.baseSize;\n    const lineHeight = options.lineHeight;\n    let maxFontSize = 0;\n    let tspanNode;\n    const fontMetrics = {};\n    const lastJ = lineAnnotations.length - 1;\n    for (let j = 0; j <= lastJ; j += 1) {\n        let annotation = lineAnnotations[j];\n        let fontSize = null;\n        if (typeof annotation === 'object') {\n            const annotationAttrs = annotation.attrs;\n            const vTSpan = Vector.create('tspan', annotationAttrs);\n            tspanNode = vTSpan.node;\n            let t = annotation.t;\n            if (eol && j === lastJ) {\n                t += eol;\n            }\n            tspanNode.textContent = t;\n            // Per annotation className\n            const annotationClass = annotationAttrs.class;\n            if (annotationClass) {\n                vTSpan.addClass(annotationClass);\n            }\n            // set the list of indices of all the applied annotations\n            // in the `annotations` attribute. This list is a comma\n            // separated list of indices.\n            if (options.includeAnnotationIndices) {\n                vTSpan.attr('annotations', annotation.annotations.join(','));\n            }\n            // Check for max font size\n            fontSize = parseFloat(annotationAttrs['font-size']);\n            if (fontSize === undefined)\n                fontSize = baseSize;\n            if (fontSize && fontSize > maxFontSize)\n                maxFontSize = fontSize;\n        }\n        else {\n            if (eol && j === lastJ) {\n                annotation += eol;\n            }\n            tspanNode = document.createTextNode(annotation || ' ');\n            if (baseSize && baseSize > maxFontSize) {\n                maxFontSize = baseSize;\n            }\n        }\n        lineNode.appendChild(tspanNode);\n    }\n    if (maxFontSize) {\n        fontMetrics.maxFontSize = maxFontSize;\n    }\n    if (lineHeight) {\n        fontMetrics.lineHeight = lineHeight;\n    }\n    else if (maxFontSize) {\n        fontMetrics.lineHeight = maxFontSize * 1.2;\n    }\n    return fontMetrics;\n}\nconst emRegex = /em$/;\nfunction emToPx(em, fontSize) {\n    const numerical = parseFloat(em);\n    if (emRegex.test(em)) {\n        return numerical * fontSize;\n    }\n    return numerical;\n}\nfunction calculateDY(alignment, linesMetrics, baseSizePx, lineHeight) {\n    if (!Array.isArray(linesMetrics)) {\n        return 0;\n    }\n    const n = linesMetrics.length;\n    if (!n)\n        return 0;\n    let lineMetrics = linesMetrics[0];\n    const flMaxFont = emToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    let rLineHeights = 0;\n    const lineHeightPx = emToPx(lineHeight, baseSizePx);\n    for (let i = 1; i < n; i += 1) {\n        lineMetrics = linesMetrics[i];\n        const iLineHeight = emToPx(lineMetrics.lineHeight, baseSizePx) || lineHeightPx;\n        rLineHeights += iLineHeight;\n    }\n    const llMaxFont = emToPx(lineMetrics.maxFontSize, baseSizePx) || baseSizePx;\n    let dy;\n    switch (alignment) {\n        case 'middle':\n            dy = flMaxFont / 2 - 0.15 * llMaxFont - rLineHeights / 2;\n            break;\n        case 'bottom':\n            dy = -(0.25 * llMaxFont) - rLineHeights;\n            break;\n        case 'top':\n        default:\n            dy = 0.8 * flMaxFont;\n            break;\n    }\n    return dy;\n}\nexport function text(elem, content, options = {}) {\n    content = Text.sanitize(content); // eslint-disable-line\n    const eol = options.eol;\n    let textPath = options.textPath;\n    const verticalAnchor = options.textVerticalAnchor;\n    const namedVerticalAnchor = verticalAnchor === 'middle' ||\n        verticalAnchor === 'bottom' ||\n        verticalAnchor === 'top';\n    // Horizontal shift applied to all the lines but the first.\n    let x = options.x;\n    if (x === undefined) {\n        x = elem.getAttribute('x') || 0;\n    }\n    // Annotations\n    const iai = options.includeAnnotationIndices;\n    let annotations = options.annotations;\n    if (annotations && !Array.isArray(annotations)) {\n        annotations = [annotations];\n    }\n    // Shift all the <tspan> but first by one line (`1em`)\n    const defaultLineHeight = options.lineHeight;\n    const autoLineHeight = defaultLineHeight === 'auto';\n    const lineHeight = autoLineHeight ? '1.5em' : defaultLineHeight || '1em';\n    let needEmpty = true;\n    const childNodes = elem.childNodes;\n    if (childNodes.length === 1) {\n        const node = childNodes[0];\n        if (node && node.tagName.toUpperCase() === 'TITLE') {\n            needEmpty = false;\n        }\n    }\n    if (needEmpty) {\n        empty(elem);\n    }\n    attr(elem, {\n        // Preserve spaces, do not consecutive spaces to get collapsed to one.\n        'xml:space': 'preserve',\n        // An empty text gets rendered into the DOM in webkit-based browsers.\n        // In order to unify this behaviour across all browsers\n        // we rather hide the text element when it's empty.\n        display: content || options.displayEmpty ? null : 'none',\n    });\n    // Set default font-size if none\n    const strFontSize = attr(elem, 'font-size');\n    let fontSize = parseFloat(strFontSize);\n    if (!fontSize) {\n        fontSize = 16;\n        if ((namedVerticalAnchor || annotations) && !strFontSize) {\n            attr(elem, 'font-size', `${fontSize}`);\n        }\n    }\n    let containerNode;\n    if (textPath) {\n        // Now all the `<tspan>`s will be inside the `<textPath>`.\n        if (typeof textPath === 'string') {\n            textPath = { d: textPath };\n        }\n        containerNode = createTextPathNode(textPath, elem);\n    }\n    else {\n        containerNode = document.createDocumentFragment();\n    }\n    let dy;\n    let offset = 0;\n    let annotatedY;\n    const lines = content.split('\\n');\n    const linesMetrics = [];\n    const lastI = lines.length - 1;\n    for (let i = 0; i <= lastI; i += 1) {\n        dy = lineHeight;\n        let lineClassName = 'v-line';\n        const lineNode = createSvgElement('tspan');\n        let lineMetrics;\n        let line = lines[i];\n        if (line) {\n            if (annotations) {\n                // Find the *compacted* annotations for this line.\n                const lineAnnotations = Text.annotate(line, annotations, {\n                    offset: -offset,\n                    includeAnnotationIndices: iai,\n                });\n                lineMetrics = annotateTextLine(lineNode, lineAnnotations, {\n                    eol: i !== lastI && eol,\n                    baseSize: fontSize,\n                    lineHeight: autoLineHeight ? null : lineHeight,\n                    includeAnnotationIndices: iai,\n                });\n                // Get the line height based on the biggest font size\n                // in the annotations for this line.\n                const iLineHeight = lineMetrics.lineHeight;\n                if (iLineHeight && autoLineHeight && i !== 0) {\n                    dy = iLineHeight;\n                }\n                if (i === 0) {\n                    annotatedY = lineMetrics.maxFontSize * 0.8;\n                }\n            }\n            else {\n                if (eol && i !== lastI) {\n                    line += eol;\n                }\n                lineNode.textContent = line;\n            }\n        }\n        else {\n            // Make sure the textContent is never empty. If it is, add a dummy\n            // character and make it invisible, making the following lines correctly\n            // relatively positioned. `dy=1em` won't work with empty lines otherwise.\n            lineNode.textContent = '-';\n            lineClassName += ' v-empty-line';\n            const lineNodeStyle = lineNode.style;\n            lineNodeStyle.fillOpacity = 0;\n            lineNodeStyle.strokeOpacity = 0;\n            if (annotations) {\n                lineMetrics = {};\n            }\n        }\n        if (lineMetrics) {\n            linesMetrics.push(lineMetrics);\n        }\n        if (i > 0) {\n            lineNode.setAttribute('dy', dy);\n        }\n        // Firefox requires 'x' to be set on the first line\n        if (i > 0 || textPath) {\n            lineNode.setAttribute('x', x);\n        }\n        lineNode.className.baseVal = lineClassName;\n        containerNode.appendChild(lineNode);\n        offset += line.length + 1; // + 1 = newline character.\n    }\n    // Y Alignment calculation\n    if (namedVerticalAnchor) {\n        if (annotations) {\n            dy = calculateDY(verticalAnchor, linesMetrics, fontSize, lineHeight);\n        }\n        else if (verticalAnchor === 'top') {\n            // A shortcut for top alignment. It does not depend on font-size nor line-height\n            dy = '0.8em';\n        }\n        else {\n            let rh; // remaining height\n            if (lastI > 0) {\n                rh = parseFloat(lineHeight) || 1;\n                rh *= lastI;\n                if (!emRegex.test(lineHeight))\n                    rh /= fontSize;\n            }\n            else {\n                // Single-line text\n                rh = 0;\n            }\n            switch (verticalAnchor) {\n                case 'middle':\n                    dy = `${0.3 - rh / 2}em`;\n                    break;\n                case 'bottom':\n                    dy = `${-rh - 0.3}em`;\n                    break;\n                default:\n                    break;\n            }\n        }\n    }\n    else if (verticalAnchor === 0) {\n        dy = '0em';\n    }\n    else if (verticalAnchor) {\n        dy = verticalAnchor;\n    }\n    else {\n        // No vertical anchor is defined\n        dy = 0;\n        // Backwards compatibility - we change the `y` attribute instead of `dy`.\n        if (elem.getAttribute('y') == null) {\n            elem.setAttribute('y', `${annotatedY || '0.8em'}`);\n        }\n    }\n    const firstLine = containerNode.firstChild;\n    firstLine.setAttribute('dy', dy);\n    elem.appendChild(containerNode);\n}\nexport function measureText(text, styles = {}) {\n    if (!text) {\n        return { width: 0 };\n    }\n    const font = [];\n    const fontSize = styles['font-size']\n        ? `${parseFloat(styles['font-size'])}px`\n        : '14px';\n    font.push(styles['font-style'] || 'normal');\n    font.push(styles['font-variant'] || 'normal');\n    font.push(styles['font-weight'] || 400);\n    font.push(fontSize);\n    font.push(styles['font-family'] || 'sans-serif');\n    canvasContext.font = font.join(' ');\n    return canvasContext.measureText(text);\n}\nexport function splitTextByLength(text, splitWidth, totalWidth, style = {}) {\n    if (splitWidth >= totalWidth) {\n        return [text, ''];\n    }\n    const length = text.length;\n    const caches = {};\n    let index = Math.round((splitWidth / totalWidth) * length - 1);\n    if (index < 0) {\n        index = 0;\n    }\n    // eslint-disable-next-line\n    while (index >= 0 && index < length) {\n        const frontText = text.slice(0, index);\n        const frontWidth = caches[frontText] || measureText(frontText, style).width;\n        const behindText = text.slice(0, index + 1);\n        const behindWidth = caches[behindText] || measureText(behindText, style).width;\n        caches[frontText] = frontWidth;\n        caches[behindText] = behindWidth;\n        if (frontWidth > splitWidth) {\n            index -= 1;\n        }\n        else if (behindWidth <= splitWidth) {\n            index += 1;\n        }\n        else {\n            break;\n        }\n    }\n    return [text.slice(0, index), text.slice(index)];\n}\nexport function breakText(text, size, styles = {}, options = {}) {\n    const width = size.width;\n    const height = size.height;\n    const eol = options.eol || '\\n';\n    const { width: textWidth } = measureText(text, styles);\n    if (textWidth < width) {\n        return text;\n    }\n    const lines = [];\n    const fontSize = styles.fontSize || 14;\n    const lineHeight = styles.lineHeight\n        ? parseFloat(styles.lineHeight)\n        : Math.ceil(fontSize * 1.4);\n    const maxLines = Math.floor(height / lineHeight);\n    let remainText = text;\n    let remainWidth = textWidth;\n    let ellipsis = options.ellipsis;\n    let ellipsisWidth = 0;\n    if (ellipsis) {\n        if (typeof ellipsis !== 'string') {\n            ellipsis = '\\u2026';\n        }\n        ellipsisWidth = measureText(ellipsis, styles).width;\n    }\n    for (let i = 0; i < maxLines; i += 1) {\n        if (remainWidth > width) {\n            const isLast = i === maxLines - 1;\n            if (isLast) {\n                const [front] = splitTextByLength(remainText, width - ellipsisWidth, remainWidth, styles);\n                lines.push(ellipsis ? `${front}${ellipsis}` : front);\n            }\n            else {\n                const [front, behind] = splitTextByLength(remainText, width, remainWidth, styles);\n                lines.push(front);\n                remainText = behind;\n                remainWidth = measureText(remainText, styles).width;\n            }\n        }\n        else {\n            lines.push(remainText);\n            break;\n        }\n    }\n    return lines.join(eol);\n}\n//# sourceMappingURL=text.js.map","import { attr } from './attr';\nimport { createSvgElement } from './elem';\nexport const KAPPA = 0.551784;\nfunction getNumbericAttribute(elem, attr, defaultValue = NaN) {\n    const v = elem.getAttribute(attr);\n    if (v == null) {\n        return defaultValue;\n    }\n    const n = parseFloat(v);\n    return Number.isNaN(n) ? defaultValue : n;\n}\nexport function sample(elem, interval = 1) {\n    const length = elem.getTotalLength();\n    const samples = [];\n    let distance = 0;\n    let sample;\n    while (distance < length) {\n        sample = elem.getPointAtLength(distance);\n        samples.push({ distance, x: sample.x, y: sample.y });\n        distance += interval;\n    }\n    return samples;\n}\nexport function lineToPathData(line) {\n    return [\n        'M',\n        getNumbericAttribute(line, 'x1'),\n        getNumbericAttribute(line, 'y1'),\n        'L',\n        getNumbericAttribute(line, 'x2'),\n        getNumbericAttribute(line, 'y2'),\n    ].join(' ');\n}\nexport function polygonToPathData(polygon) {\n    const points = getPointsFromSvgElement(polygon);\n    if (points.length === 0) {\n        return null;\n    }\n    return `${svgPointsToPath(points)} Z`;\n}\nexport function polylineToPathData(polyline) {\n    const points = getPointsFromSvgElement(polyline);\n    if (points.length === 0) {\n        return null;\n    }\n    return svgPointsToPath(points);\n}\nfunction svgPointsToPath(points) {\n    const arr = points.map((p) => `${p.x} ${p.y}`);\n    return `M ${arr.join(' L')}`;\n}\nexport function getPointsFromSvgElement(elem) {\n    const points = [];\n    const nodePoints = elem.points;\n    if (nodePoints) {\n        for (let i = 0, ii = nodePoints.numberOfItems; i < ii; i += 1) {\n            points.push(nodePoints.getItem(i));\n        }\n    }\n    return points;\n}\nexport function circleToPathData(circle) {\n    const cx = getNumbericAttribute(circle, 'cx', 0);\n    const cy = getNumbericAttribute(circle, 'cy', 0);\n    const r = getNumbericAttribute(circle, 'r');\n    const cd = r * KAPPA; // Control distance.\n    return [\n        'M',\n        cx,\n        cy - r,\n        'C',\n        cx + cd,\n        cy - r,\n        cx + r,\n        cy - cd,\n        cx + r,\n        cy,\n        'C',\n        cx + r,\n        cy + cd,\n        cx + cd,\n        cy + r,\n        cx,\n        cy + r,\n        'C',\n        cx - cd,\n        cy + r,\n        cx - r,\n        cy + cd,\n        cx - r,\n        cy,\n        'C',\n        cx - r,\n        cy - cd,\n        cx - cd,\n        cy - r,\n        cx,\n        cy - r,\n        'Z',\n    ].join(' ');\n}\nexport function ellipseToPathData(ellipse) {\n    const cx = getNumbericAttribute(ellipse, 'cx', 0);\n    const cy = getNumbericAttribute(ellipse, 'cy', 0);\n    const rx = getNumbericAttribute(ellipse, 'rx');\n    const ry = getNumbericAttribute(ellipse, 'ry') || rx;\n    const cdx = rx * KAPPA; // Control distance x.\n    const cdy = ry * KAPPA; // Control distance y.\n    const d = [\n        'M',\n        cx,\n        cy - ry,\n        'C',\n        cx + cdx,\n        cy - ry,\n        cx + rx,\n        cy - cdy,\n        cx + rx,\n        cy,\n        'C',\n        cx + rx,\n        cy + cdy,\n        cx + cdx,\n        cy + ry,\n        cx,\n        cy + ry,\n        'C',\n        cx - cdx,\n        cy + ry,\n        cx - rx,\n        cy + cdy,\n        cx - rx,\n        cy,\n        'C',\n        cx - rx,\n        cy - cdy,\n        cx - cdx,\n        cy - ry,\n        cx,\n        cy - ry,\n        'Z',\n    ].join(' ');\n    return d;\n}\nexport function rectangleToPathData(rect) {\n    return rectToPathData({\n        x: getNumbericAttribute(rect, 'x', 0),\n        y: getNumbericAttribute(rect, 'y', 0),\n        width: getNumbericAttribute(rect, 'width', 0),\n        height: getNumbericAttribute(rect, 'height', 0),\n        rx: getNumbericAttribute(rect, 'rx', 0),\n        ry: getNumbericAttribute(rect, 'ry', 0),\n    });\n}\nexport function rectToPathData(r) {\n    let d;\n    const x = r.x;\n    const y = r.y;\n    const width = r.width;\n    const height = r.height;\n    const topRx = Math.min(r.rx || r['top-rx'] || 0, width / 2);\n    const bottomRx = Math.min(r.rx || r['bottom-rx'] || 0, width / 2);\n    const topRy = Math.min(r.ry || r['top-ry'] || 0, height / 2);\n    const bottomRy = Math.min(r.ry || r['bottom-ry'] || 0, height / 2);\n    if (topRx || bottomRx || topRy || bottomRy) {\n        d = [\n            'M',\n            x,\n            y + topRy,\n            'v',\n            height - topRy - bottomRy,\n            'a',\n            bottomRx,\n            bottomRy,\n            0,\n            0,\n            0,\n            bottomRx,\n            bottomRy,\n            'h',\n            width - 2 * bottomRx,\n            'a',\n            bottomRx,\n            bottomRy,\n            0,\n            0,\n            0,\n            bottomRx,\n            -bottomRy,\n            'v',\n            -(height - bottomRy - topRy),\n            'a',\n            topRx,\n            topRy,\n            0,\n            0,\n            0,\n            -topRx,\n            -topRy,\n            'h',\n            -(width - 2 * topRx),\n            'a',\n            topRx,\n            topRy,\n            0,\n            0,\n            0,\n            -topRx,\n            topRy,\n            'Z',\n        ];\n    }\n    else {\n        d = ['M', x, y, 'H', x + width, 'V', y + height, 'H', x, 'V', y, 'Z'];\n    }\n    return d.join(' ');\n}\nexport function toPath(elem) {\n    const path = createSvgElement('path');\n    attr(path, attr(elem));\n    const d = toPathData(elem);\n    if (d) {\n        path.setAttribute('d', d);\n    }\n    return path;\n}\nexport function toPathData(elem) {\n    const tagName = elem.tagName.toLowerCase();\n    switch (tagName) {\n        case 'path':\n            return elem.getAttribute('d');\n        case 'line':\n            return lineToPathData(elem);\n        case 'polygon':\n            return polygonToPathData(elem);\n        case 'polyline':\n            return polylineToPathData(elem);\n        case 'ellipse':\n            return ellipseToPathData(elem);\n        case 'circle':\n            return circleToPathData(elem);\n        case 'rect':\n            return rectangleToPathData(elem);\n        default:\n            break;\n    }\n    throw new Error(`\"${tagName}\" cannot be converted to svg path element.`);\n}\n// Inspired by d3.js https://github.com/mbostock/d3/blob/master/src/svg/arc.js\nexport function createSlicePathData(innerRadius, outerRadius, startAngle, endAngle) {\n    const svgArcMax = 2 * Math.PI - 1e-6;\n    const r0 = innerRadius;\n    const r1 = outerRadius;\n    let a0 = startAngle;\n    let a1 = endAngle;\n    if (a1 < a0) {\n        const tmp = a0;\n        a0 = a1;\n        a1 = tmp;\n    }\n    const da = a1 - a0;\n    const df = da < Math.PI ? '0' : '1';\n    const c0 = Math.cos(a0);\n    const s0 = Math.sin(a0);\n    const c1 = Math.cos(a1);\n    const s1 = Math.sin(a1);\n    return da >= svgArcMax\n        ? r0\n            ? // eslint-disable-next-line\n                `M0,${r1}A${r1},${r1} 0 1,1 0,${-r1}A${r1},${r1} 0 1,1 0,${r1}M0,${r0}A${r0},${r0} 0 1,0 0,${-r0}A${r0},${r0} 0 1,0 0,${r0}Z`\n            : // eslint-disable-next-line\n                `M0,${r1}A${r1},${r1} 0 1,1 0,${-r1}A${r1},${r1} 0 1,1 0,${r1}Z`\n        : r0\n            ? // eslint-disable-next-line\n                `M${r1 * c0},${r1 * s0}A${r1},${r1} 0 ${df},1 ${r1 * c1},${r1 * s1}L${r0 * c1},${r0 * s1}A${r0},${r0} 0 ${df},0 ${r0 * c0},${r0 * s0}Z`\n            : // eslint-disable-next-line\n                `M${r1 * c0},${r1 * s0}A${r1},${r1} 0 ${df},1 ${r1 * c1},${r1 * s1}L0,0` +\n                    `Z`;\n}\n//# sourceMappingURL=path.js.map","import { createSvgElement } from './elem';\nconst svgDocument = createSvgElement('svg');\nconst transformRegex = /(\\w+)\\(([^,)]+),?([^)]+)?\\)/gi;\nconst transformSeparatorRegex = /[ ,]+/;\nconst transformationListRegex = /^(\\w+)\\((.*)\\)/;\n/**\n * Returns a SVG point object initialized with the `x` and `y` coordinates.\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGPoint\n */\nexport function createSVGPoint(x, y) {\n    const p = svgDocument.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    return p;\n}\n/**\n * Returns the SVG transformation matrix initialized with the given matrix.\n *\n * The given matrix is an object of the form:\n * {\n *   a: number\n *   b: number\n *   c: number\n *   d: number\n *   e: number\n *   f: number\n * }\n *\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGMatrix\n */\nexport function createSVGMatrix(matrix) {\n    const mat = svgDocument.createSVGMatrix();\n    if (matrix != null) {\n        const source = matrix;\n        const target = mat;\n        // eslint-disable-next-line\n        for (const key in source) {\n            target[key] = source[key];\n        }\n    }\n    return mat;\n}\n/**\n * Returns a SVG transform object.\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGTransform\n */\nexport function createSVGTransform(matrix) {\n    if (matrix != null) {\n        if (!(matrix instanceof DOMMatrix)) {\n            matrix = createSVGMatrix(matrix); // eslint-disable-line\n        }\n        return svgDocument.createSVGTransformFromMatrix(matrix);\n    }\n    return svgDocument.createSVGTransform();\n}\n/**\n * Returns the SVG transformation matrix built from the `transformString`.\n *\n * E.g. 'translate(10,10) scale(2,2)' will result in matrix:\n * `{ a: 2, b: 0, c: 0, d: 2, e: 10, f: 10}`\n */\nexport function transformStringToMatrix(transform) {\n    let mat = createSVGMatrix();\n    const matches = transform != null && transform.match(transformRegex);\n    if (!matches) {\n        return mat;\n    }\n    for (let i = 0, n = matches.length; i < n; i += 1) {\n        const transformationString = matches[i];\n        const transformationMatch = transformationString.match(transformationListRegex);\n        if (transformationMatch) {\n            let sx;\n            let sy;\n            let tx;\n            let ty;\n            let angle;\n            let ctm = createSVGMatrix();\n            const args = transformationMatch[2].split(transformSeparatorRegex);\n            switch (transformationMatch[1].toLowerCase()) {\n                case 'scale':\n                    sx = parseFloat(args[0]);\n                    sy = args[1] === undefined ? sx : parseFloat(args[1]);\n                    ctm = ctm.scaleNonUniform(sx, sy);\n                    break;\n                case 'translate':\n                    tx = parseFloat(args[0]);\n                    ty = parseFloat(args[1]);\n                    ctm = ctm.translate(tx, ty);\n                    break;\n                case 'rotate':\n                    angle = parseFloat(args[0]);\n                    tx = parseFloat(args[1]) || 0;\n                    ty = parseFloat(args[2]) || 0;\n                    if (tx !== 0 || ty !== 0) {\n                        ctm = ctm.translate(tx, ty).rotate(angle).translate(-tx, -ty);\n                    }\n                    else {\n                        ctm = ctm.rotate(angle);\n                    }\n                    break;\n                case 'skewx':\n                    angle = parseFloat(args[0]);\n                    ctm = ctm.skewX(angle);\n                    break;\n                case 'skewy':\n                    angle = parseFloat(args[0]);\n                    ctm = ctm.skewY(angle);\n                    break;\n                case 'matrix':\n                    ctm.a = parseFloat(args[0]);\n                    ctm.b = parseFloat(args[1]);\n                    ctm.c = parseFloat(args[2]);\n                    ctm.d = parseFloat(args[3]);\n                    ctm.e = parseFloat(args[4]);\n                    ctm.f = parseFloat(args[5]);\n                    break;\n                default:\n                    continue;\n            }\n            mat = mat.multiply(ctm);\n        }\n    }\n    return mat;\n}\nexport function matrixToTransformString(matrix) {\n    const m = matrix || {};\n    const a = m.a != null ? m.a : 1;\n    const b = m.b != null ? m.b : 0;\n    const c = m.c != null ? m.c : 0;\n    const d = m.d != null ? m.d : 1;\n    const e = m.e != null ? m.e : 0;\n    const f = m.f != null ? m.f : 0;\n    return `matrix(${a},${b},${c},${d},${e},${f})`;\n}\nexport function parseTransformString(transform) {\n    let translation;\n    let rotation;\n    let scale;\n    if (transform) {\n        const separator = transformSeparatorRegex;\n        // Allow reading transform string with a single matrix\n        if (transform.trim().indexOf('matrix') >= 0) {\n            const matrix = transformStringToMatrix(transform);\n            const decomposedMatrix = decomposeMatrix(matrix);\n            translation = [decomposedMatrix.translateX, decomposedMatrix.translateY];\n            rotation = [decomposedMatrix.rotation];\n            scale = [decomposedMatrix.scaleX, decomposedMatrix.scaleY];\n            const transformations = [];\n            if (translation[0] !== 0 || translation[1] !== 0) {\n                transformations.push(`translate(${translation.join(',')})`);\n            }\n            if (scale[0] !== 1 || scale[1] !== 1) {\n                transformations.push(`scale(${scale.join(',')})`);\n            }\n            if (rotation[0] !== 0) {\n                transformations.push(`rotate(${rotation[0]})`);\n            }\n            transform = transformations.join(' '); // eslint-disable-line\n        }\n        else {\n            const translateMatch = transform.match(/translate\\((.*?)\\)/);\n            if (translateMatch) {\n                translation = translateMatch[1].split(separator);\n            }\n            const rotateMatch = transform.match(/rotate\\((.*?)\\)/);\n            if (rotateMatch) {\n                rotation = rotateMatch[1].split(separator);\n            }\n            const scaleMatch = transform.match(/scale\\((.*?)\\)/);\n            if (scaleMatch) {\n                scale = scaleMatch[1].split(separator);\n            }\n        }\n    }\n    const sx = scale && scale[0] ? parseFloat(scale[0]) : 1;\n    return {\n        raw: transform || '',\n        translation: {\n            tx: translation && translation[0]\n                ? parseInt(translation[0], 10)\n                : 0,\n            ty: translation && translation[1]\n                ? parseInt(translation[1], 10)\n                : 0,\n        },\n        rotation: {\n            angle: rotation && rotation[0] ? parseInt(rotation[0], 10) : 0,\n            cx: rotation && rotation[1]\n                ? parseInt(rotation[1], 10)\n                : undefined,\n            cy: rotation && rotation[2]\n                ? parseInt(rotation[2], 10)\n                : undefined,\n        },\n        scale: {\n            sx,\n            sy: scale && scale[1] ? parseFloat(scale[1]) : sx,\n        },\n    };\n}\nfunction deltaTransformPoint(matrix, point) {\n    const dx = point.x * matrix.a + point.y * matrix.c + 0;\n    const dy = point.x * matrix.b + point.y * matrix.d + 0;\n    return { x: dx, y: dy };\n}\n/**\n * Decomposes the SVG transformation matrix into separate transformations.\n *\n * Returns an object of the form:\n * {\n *   translateX: number\n *   translateY: number\n *   scaleX: number\n *   scaleY: number\n *   skewX: number\n *   skewY: number\n *   rotation: number\n * }\n *\n * @see https://developer.mozilla.org/en/docs/Web/API/SVGMatrix\n */\nexport function decomposeMatrix(matrix) {\n    // @see https://gist.github.com/2052247\n    const px = deltaTransformPoint(matrix, { x: 0, y: 1 });\n    const py = deltaTransformPoint(matrix, { x: 1, y: 0 });\n    const skewX = (180 / Math.PI) * Math.atan2(px.y, px.x) - 90;\n    const skewY = (180 / Math.PI) * Math.atan2(py.y, py.x);\n    return {\n        skewX,\n        skewY,\n        translateX: matrix.e,\n        translateY: matrix.f,\n        scaleX: Math.sqrt(matrix.a * matrix.a + matrix.b * matrix.b),\n        scaleY: Math.sqrt(matrix.c * matrix.c + matrix.d * matrix.d),\n        rotation: skewX,\n    };\n}\nexport function matrixToScale(matrix) {\n    let a;\n    let b;\n    let c;\n    let d;\n    if (matrix) {\n        a = matrix.a == null ? 1 : matrix.a;\n        d = matrix.d == null ? 1 : matrix.d;\n        b = matrix.b;\n        c = matrix.c;\n    }\n    else {\n        a = d = 1;\n    }\n    return {\n        sx: b ? Math.sqrt(a * a + b * b) : a,\n        sy: c ? Math.sqrt(c * c + d * d) : d,\n    };\n}\nexport function matrixToRotation(matrix) {\n    let p = { x: 0, y: 1 };\n    if (matrix) {\n        p = deltaTransformPoint(matrix, p);\n    }\n    const deg = (((180 * Math.atan2(p.y, p.x)) / Math.PI) % 360) - 90;\n    const angle = (deg % 360) + (deg < 0 ? 360 : 0);\n    return {\n        angle,\n    };\n}\nexport function matrixToTranslation(matrix) {\n    return {\n        tx: (matrix && matrix.e) || 0,\n        ty: (matrix && matrix.f) || 0,\n    };\n}\n//# sourceMappingURL=matrix.js.map","import { attr } from './attr';\nimport { isSVGGraphicsElement } from './elem';\nimport { createSVGTransform, parseTransformString, transformStringToMatrix, matrixToTransformString, createSVGMatrix, } from './matrix';\nexport function transform(elem, matrix, options = {}) {\n    if (matrix == null) {\n        return transformStringToMatrix(attr(elem, 'transform'));\n    }\n    if (options.absolute) {\n        elem.setAttribute('transform', matrixToTransformString(matrix));\n        return;\n    }\n    const transformList = elem.transform;\n    const svgTransform = createSVGTransform(matrix);\n    transformList.baseVal.appendItem(svgTransform);\n}\nexport function translate(elem, tx, ty = 0, options = {}) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (tx == null) {\n        return transform.translation;\n    }\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/translate\\([^)]*\\)/g, '').trim();\n    const newTx = options.absolute ? tx : transform.translation.tx + tx;\n    const newTy = options.absolute ? ty : transform.translation.ty + ty;\n    const newTranslate = `translate(${newTx},${newTy})`;\n    // Note that `translate()` is always the first transformation. This is\n    // usually the desired case.\n    elem.setAttribute('transform', `${newTranslate} ${transformAttr}`.trim());\n}\nexport function rotate(elem, angle, cx, cy, options = {}) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (angle == null) {\n        return transform.rotation;\n    }\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/rotate\\([^)]*\\)/g, '').trim();\n    angle %= 360; // eslint-disable-line\n    const newAngle = options.absolute ? angle : transform.rotation.angle + angle;\n    const newOrigin = cx != null && cy != null ? `,${cx},${cy}` : '';\n    const newRotate = `rotate(${newAngle}${newOrigin})`;\n    elem.setAttribute('transform', `${transformAttr} ${newRotate}`.trim());\n}\nexport function scale(elem, sx, sy) {\n    let transformAttr = attr(elem, 'transform');\n    const transform = parseTransformString(transformAttr);\n    if (sx == null) {\n        return transform.scale;\n    }\n    sy = sy == null ? sx : sy; // eslint-disable-line\n    transformAttr = transform.raw;\n    transformAttr = transformAttr.replace(/scale\\([^)]*\\)/g, '').trim();\n    const newScale = `scale(${sx},${sy})`;\n    elem.setAttribute('transform', `${transformAttr} ${newScale}`.trim());\n}\n/**\n * Returns an DOMMatrix that specifies the transformation necessary\n * to convert `elem` coordinate system into `target` coordinate system.\n */\nexport function getTransformToElement(elem, target) {\n    if (isSVGGraphicsElement(target) && isSVGGraphicsElement(elem)) {\n        const targetCTM = target.getScreenCTM();\n        const nodeCTM = elem.getScreenCTM();\n        if (targetCTM && nodeCTM) {\n            return targetCTM.inverse().multiply(nodeCTM);\n        }\n    }\n    // Could not get actual transformation matrix\n    return createSVGMatrix();\n}\n/**\n * Returns an DOMMatrix that specifies the transformation necessary\n * to convert `elem` coordinate system into `target` coordinate system.\n * Unlike getTransformToElement, elem is child of target,Because of the reduction in DOM API calls,\n * there is a significant performance improvement.\n */\nexport function getTransformToParentElement(elem, target) {\n    let matrix = createSVGMatrix();\n    if (isSVGGraphicsElement(target) && isSVGGraphicsElement(elem)) {\n        let node = elem;\n        const matrixList = [];\n        while (node && node !== target) {\n            const transform = node.getAttribute('transform') || null;\n            const nodeMatrix = transformStringToMatrix(transform);\n            matrixList.push(nodeMatrix);\n            node = node.parentNode;\n        }\n        matrixList.reverse().forEach((m) => {\n            matrix = matrix.multiply(m);\n        });\n    }\n    return matrix;\n}\n/**\n * Converts a global point with coordinates `x` and `y` into the\n * coordinate space of the element.\n */\nexport function toLocalPoint(elem, x, y) {\n    const svg = elem instanceof SVGSVGElement\n        ? elem\n        : elem.ownerSVGElement;\n    const p = svg.createSVGPoint();\n    p.x = x;\n    p.y = y;\n    try {\n        const ctm = svg.getScreenCTM();\n        const globalPoint = p.matrixTransform(ctm.inverse());\n        const globalToLocalMatrix = getTransformToElement(elem, svg).inverse();\n        return globalPoint.matrixTransform(globalToLocalMatrix);\n    }\n    catch (e) {\n        return p;\n    }\n}\n//# sourceMappingURL=transform.js.map","export var EventHook;\n(function (EventHook) {\n    const cache = {};\n    function get(type) {\n        return cache[type] || {};\n    }\n    EventHook.get = get;\n    function register(type, hook) {\n        cache[type] = hook;\n    }\n    EventHook.register = register;\n    function unregister(type) {\n        delete cache[type];\n    }\n    EventHook.unregister = unregister;\n})(EventHook || (EventHook = {}));\n//# sourceMappingURL=hook.js.map","export var Store;\n(function (Store) {\n    const cache = new WeakMap();\n    function ensure(target) {\n        if (!cache.has(target)) {\n            cache.set(target, { events: Object.create(null) });\n        }\n        return cache.get(target);\n    }\n    Store.ensure = ensure;\n    function get(target) {\n        return cache.get(target);\n    }\n    Store.get = get;\n    function remove(target) {\n        return cache.delete(target);\n    }\n    Store.remove = remove;\n})(Store || (Store = {}));\n//# sourceMappingURL=store.js.map","import { Store } from './store';\nexport var Util;\n(function (Util) {\n    Util.returnTrue = () => true;\n    Util.returnFalse = () => false;\n    function stopPropagationCallback(e) {\n        e.stopPropagation();\n    }\n    Util.stopPropagationCallback = stopPropagationCallback;\n    function addEventListener(elem, type, handler) {\n        if (elem.addEventListener != null) {\n            elem.addEventListener(type, handler);\n        }\n    }\n    Util.addEventListener = addEventListener;\n    function removeEventListener(elem, type, handler) {\n        if (elem.removeEventListener != null) {\n            elem.removeEventListener(type, handler);\n        }\n    }\n    Util.removeEventListener = removeEventListener;\n})(Util || (Util = {}));\n(function (Util) {\n    const rNotHTMLWhite = /[^\\x20\\t\\r\\n\\f]+/g;\n    const rNamespace = /^([^.]*)(?:\\.(.+)|)/;\n    function splitType(types) {\n        return (types || '').match(rNotHTMLWhite) || [''];\n    }\n    Util.splitType = splitType;\n    function normalizeType(type) {\n        const parts = rNamespace.exec(type) || [];\n        return {\n            originType: parts[1] ? parts[1].trim() : parts[1],\n            namespaces: parts[2]\n                ? parts[2]\n                    .split('.')\n                    .map((ns) => ns.trim())\n                    .sort()\n                : [],\n        };\n    }\n    Util.normalizeType = normalizeType;\n    function isValidTarget(target) {\n        // Accepts only:\n        //  - Node\n        //    - Node.ELEMENT_NODE\n        //    - Node.DOCUMENT_NODE\n        //  - Object\n        //    - Any\n        return target.nodeType === 1 || target.nodeType === 9 || !+target.nodeType;\n    }\n    Util.isValidTarget = isValidTarget;\n    function isValidSelector(elem, selector) {\n        if (selector) {\n            const node = elem;\n            return node.querySelector != null && node.querySelector(selector) != null;\n        }\n        return true;\n    }\n    Util.isValidSelector = isValidSelector;\n})(Util || (Util = {}));\n(function (Util) {\n    let seed = 0;\n    const cache = new WeakMap();\n    function ensureHandlerId(handler) {\n        if (!cache.has(handler)) {\n            cache.set(handler, seed);\n            seed += 1;\n        }\n        return cache.get(handler);\n    }\n    Util.ensureHandlerId = ensureHandlerId;\n    function getHandlerId(handler) {\n        return cache.get(handler);\n    }\n    Util.getHandlerId = getHandlerId;\n    function removeHandlerId(handler) {\n        return cache.delete(handler);\n    }\n    Util.removeHandlerId = removeHandlerId;\n    function setHandlerId(handler, id) {\n        return cache.set(handler, id);\n    }\n    Util.setHandlerId = setHandlerId;\n})(Util || (Util = {}));\n(function (Util) {\n    function getHandlerQueue(elem, event) {\n        const queue = [];\n        const store = Store.get(elem);\n        const bag = store && store.events && store.events[event.type];\n        const handlers = (bag && bag.handlers) || [];\n        const delegateCount = bag ? bag.delegateCount : 0;\n        if (delegateCount > 0 &&\n            // Support: Firefox <=42 - 66+\n            // Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n            // https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n            // Support: IE 11+\n            // ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n            !(event.type === 'click' &&\n                typeof event.button === 'number' &&\n                event.button >= 1)) {\n            for (let curr = event.target; curr !== elem; curr = curr.parentNode || elem) {\n                // Don't check non-elements\n                // Don't process clicks on disabled elements\n                if (curr.nodeType === 1 &&\n                    !(event.type === 'click' && curr.disabled === true)) {\n                    const matchedHandlers = [];\n                    const matchedSelectors = {};\n                    for (let i = 0; i < delegateCount; i += 1) {\n                        const handleObj = handlers[i];\n                        const selector = handleObj.selector;\n                        if (selector != null && matchedSelectors[selector] == null) {\n                            const node = elem;\n                            const nodes = [];\n                            node.querySelectorAll(selector).forEach((child) => {\n                                nodes.push(child);\n                            });\n                            matchedSelectors[selector] = nodes.includes(curr);\n                        }\n                        if (matchedSelectors[selector]) {\n                            matchedHandlers.push(handleObj);\n                        }\n                    }\n                    if (matchedHandlers.length) {\n                        queue.push({ elem: curr, handlers: matchedHandlers });\n                    }\n                }\n            }\n        }\n        // Add the remaining (directly-bound) handlers\n        if (delegateCount < handlers.length) {\n            queue.push({ elem, handlers: handlers.slice(delegateCount) });\n        }\n        return queue;\n    }\n    Util.getHandlerQueue = getHandlerQueue;\n})(Util || (Util = {}));\n(function (Util) {\n    function isWindow(obj) {\n        return obj != null && obj === obj.window;\n    }\n    Util.isWindow = isWindow;\n})(Util || (Util = {}));\n(function (Util) {\n    function contains(a, b) {\n        const adown = a.nodeType === 9 ? a.documentElement : a;\n        const bup = b && b.parentNode;\n        return (a === bup ||\n            !!(bup &&\n                bup.nodeType === 1 &&\n                // Support: IE 9 - 11+\n                // IE doesn't have `contains` on SVG.\n                (adown.contains\n                    ? adown.contains(bup)\n                    : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16)));\n    }\n    Util.contains = contains;\n})(Util || (Util = {}));\n//# sourceMappingURL=util.js.map","import { EventHook } from './hook';\nimport { Util } from './util';\n// Prevent triggered image.load events from bubbling to window.load\nexport var Special;\n(function (Special) {\n    EventHook.register('load', {\n        noBubble: true,\n    });\n})(Special || (Special = {}));\n// Support: Chrome <=73+\n// Chrome doesn't alert on `event.preventDefault()`\n// as the standard mandates.\n(function (Special) {\n    EventHook.register('beforeunload', {\n        postDispatch(elem, event) {\n            if (event.result !== undefined && event.originalEvent) {\n                event.originalEvent.returnValue = event.result;\n            }\n        },\n    });\n})(Special || (Special = {}));\n// For mouseenter/leave call the handler if related is outside the target.\n// NB: No relatedTarget if the mouse left/entered the browser window\n(function (Special) {\n    EventHook.register('mouseenter', {\n        delegateType: 'mouseover',\n        bindType: 'mouseover',\n        handle(target, event) {\n            let ret;\n            const related = event.relatedTarget;\n            const handleObj = event.handleObj;\n            if (!related || (related !== target && !Util.contains(target, related))) {\n                event.type = handleObj.originType;\n                ret = handleObj.handler.call(target, event);\n                event.type = 'mouseover';\n            }\n            return ret;\n        },\n    });\n    EventHook.register('mouseleave', {\n        delegateType: 'mouseout',\n        bindType: 'mouseout',\n        handle(target, event) {\n            let ret;\n            const related = event.relatedTarget;\n            const handleObj = event.handleObj;\n            if (!related || (related !== target && !Util.contains(target, related))) {\n                event.type = handleObj.originType;\n                ret = handleObj.handler.call(target, event);\n                event.type = 'mouseout';\n            }\n            return ret;\n        },\n    });\n})(Special || (Special = {}));\n//# sourceMappingURL=special.js.map","import { Util } from './util';\nexport class EventObject {\n    constructor(e, props) {\n        this.isDefaultPrevented = Util.returnFalse;\n        this.isPropagationStopped = Util.returnFalse;\n        this.isImmediatePropagationStopped = Util.returnFalse;\n        this.isSimulated = false;\n        this.preventDefault = () => {\n            const e = this.originalEvent;\n            this.isDefaultPrevented = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.preventDefault();\n            }\n        };\n        this.stopPropagation = () => {\n            const e = this.originalEvent;\n            this.isPropagationStopped = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.stopPropagation();\n            }\n        };\n        this.stopImmediatePropagation = () => {\n            const e = this.originalEvent;\n            this.isImmediatePropagationStopped = Util.returnTrue;\n            if (e && !this.isSimulated) {\n                e.stopImmediatePropagation();\n            }\n            this.stopPropagation();\n        };\n        if (typeof e === 'string') {\n            this.type = e;\n        }\n        else if (e.type) {\n            this.originalEvent = e;\n            this.type = e.type;\n            // Events bubbling up the document may have been marked as prevented\n            // by a handler lower down the tree; reflect the correct value.\n            this.isDefaultPrevented = e.defaultPrevented\n                ? Util.returnTrue\n                : Util.returnFalse;\n            // Create target properties\n            this.target = e.target;\n            this.currentTarget = e.currentTarget;\n            this.relatedTarget = e.relatedTarget;\n            this.timeStamp = e.timeStamp;\n        }\n        // Put explicitly provided properties onto the event object\n        if (props) {\n            Object.assign(this, props);\n        }\n        // Create a timestamp if incoming event doesn't have one\n        if (!this.timeStamp) {\n            this.timeStamp = Date.now();\n        }\n    }\n}\n(function (EventObject) {\n    function create(originalEvent) {\n        return originalEvent instanceof EventObject\n            ? originalEvent\n            : new EventObject(originalEvent);\n    }\n    EventObject.create = create;\n})(EventObject || (EventObject = {}));\n(function (EventObject) {\n    function addProperty(name, hook) {\n        Object.defineProperty(EventObject.prototype, name, {\n            enumerable: true,\n            configurable: true,\n            get: typeof hook === 'function'\n                ? // eslint-disable-next-line\n                    function () {\n                        if (this.originalEvent) {\n                            return hook(this.originalEvent);\n                        }\n                    }\n                : // eslint-disable-next-line\n                    function () {\n                        if (this.originalEvent) {\n                            return this.originalEvent[name];\n                        }\n                    },\n            set(value) {\n                Object.defineProperty(this, name, {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value,\n                });\n            },\n        });\n    }\n    EventObject.addProperty = addProperty;\n})(EventObject || (EventObject = {}));\n(function (EventObject) {\n    // Common event props including KeyEvent and MouseEvent specific props.\n    const commonProps = {\n        bubbles: true,\n        cancelable: true,\n        eventPhase: true,\n        detail: true,\n        view: true,\n        button: true,\n        buttons: true,\n        clientX: true,\n        clientY: true,\n        offsetX: true,\n        offsetY: true,\n        pageX: true,\n        pageY: true,\n        screenX: true,\n        screenY: true,\n        toElement: true,\n        pointerId: true,\n        pointerType: true,\n        char: true,\n        code: true,\n        charCode: true,\n        key: true,\n        keyCode: true,\n        touches: true,\n        changedTouches: true,\n        targetTouches: true,\n        which: true,\n        altKey: true,\n        ctrlKey: true,\n        metaKey: true,\n        shiftKey: true,\n    };\n    Object.keys(commonProps).forEach((name) => EventObject.addProperty(name, commonProps[name]));\n})(EventObject || (EventObject = {}));\n//# sourceMappingURL=object.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Util } from './util';\nimport { EventHook } from './hook';\nimport { Store } from './store';\nimport { EventObject } from './object';\nimport './special';\nexport var Core;\n(function (Core) {\n    let triggered;\n    function on(elem, types, handler, data, selector) {\n        if (!Util.isValidTarget(elem)) {\n            return;\n        }\n        // Caller can pass in an object of custom data in lieu of the handler\n        let handlerData;\n        if (typeof handler !== 'function') {\n            const { handler: h, selector: s } = handler, others = __rest(handler, [\"handler\", \"selector\"]);\n            handler = h; // eslint-disable-line\n            selector = s; // eslint-disable-line\n            handlerData = others;\n        }\n        // Ensure that invalid selectors throw exceptions at attach time\n        // if (!Util.isValidSelector(elem, selector)) {\n        //   throw new Error('Delegate event with invalid selector.')\n        // }\n        const store = Store.ensure(elem);\n        // Ensure the main handle\n        let mainHandler = store.handler;\n        if (mainHandler == null) {\n            mainHandler = store.handler = function (e, ...args) {\n                return triggered !== e.type ? dispatch(elem, e, ...args) : undefined;\n            };\n        }\n        // Make sure that the handler has a unique ID, used to find/remove it later\n        const guid = Util.ensureHandlerId(handler);\n        // Handle multiple events separated by a space\n        Util.splitType(types).forEach((item) => {\n            const { originType, namespaces } = Util.normalizeType(item);\n            // There *must* be a type, no attaching namespace-only handlers\n            if (!originType) {\n                return;\n            }\n            let type = originType;\n            let hook = EventHook.get(type);\n            // If selector defined, determine special event type, otherwise given type\n            type = (selector ? hook.delegateType : hook.bindType) || type;\n            // Update hook based on newly reset type\n            hook = EventHook.get(type);\n            // handleObj is passed to all event handlers\n            const handleObj = Object.assign({ type,\n                originType,\n                data,\n                selector,\n                guid, handler: handler, namespace: namespaces.join('.') }, handlerData);\n            // Init the event handler queue if we're the first\n            const events = store.events;\n            let bag = events[type];\n            if (!bag) {\n                bag = events[type] = { handlers: [], delegateCount: 0 };\n                // Only use addEventListener if the `hook.steup` returns false\n                if (!hook.setup ||\n                    hook.setup(elem, data, namespaces, mainHandler) === false) {\n                    Util.addEventListener(elem, type, mainHandler);\n                }\n            }\n            if (hook.add) {\n                Util.removeHandlerId(handleObj.handler);\n                hook.add(elem, handleObj);\n                Util.setHandlerId(handleObj.handler, guid);\n            }\n            // Add to the element's handler list, delegates in front\n            if (selector) {\n                bag.handlers.splice(bag.delegateCount, 0, handleObj);\n                bag.delegateCount += 1;\n            }\n            else {\n                bag.handlers.push(handleObj);\n            }\n        });\n    }\n    Core.on = on;\n    function off(elem, types, handler, selector, mappedTypes) {\n        const store = Store.get(elem);\n        if (!store) {\n            return;\n        }\n        const events = store.events;\n        if (!events) {\n            return;\n        }\n        // Once for each type.namespace in types; type may be omitted\n        Util.splitType(types).forEach((item) => {\n            const { originType, namespaces } = Util.normalizeType(item);\n            // Unbind all events (on this namespace, if provided) for the element\n            if (!originType) {\n                Object.keys(events).forEach((key) => {\n                    off(elem, key + item, handler, selector, true);\n                });\n                return;\n            }\n            let type = originType;\n            const hook = EventHook.get(type);\n            type = (selector ? hook.delegateType : hook.bindType) || type;\n            const bag = events[type] || {};\n            const rns = namespaces.length > 0\n                ? new RegExp(`(^|\\\\.)${namespaces.join('\\\\.(?:.*\\\\.|)')}(\\\\.|$)`)\n                : null;\n            // Remove matching events\n            const originHandlerCount = bag.handlers.length;\n            for (let i = bag.handlers.length - 1; i >= 0; i -= 1) {\n                const handleObj = bag.handlers[i];\n                if ((mappedTypes || originType === handleObj.originType) &&\n                    (!handler || Util.getHandlerId(handler) === handleObj.guid) &&\n                    (rns == null ||\n                        (handleObj.namespace && rns.test(handleObj.namespace))) &&\n                    (selector == null ||\n                        selector === handleObj.selector ||\n                        (selector === '**' && handleObj.selector))) {\n                    bag.handlers.splice(i, 1);\n                    if (handleObj.selector) {\n                        bag.delegateCount -= 1;\n                    }\n                    if (hook.remove) {\n                        hook.remove(elem, handleObj);\n                    }\n                }\n            }\n            if (originHandlerCount && bag.handlers.length === 0) {\n                if (!hook.teardown ||\n                    hook.teardown(elem, namespaces, store.handler) === false) {\n                    Util.removeEventListener(elem, type, store.handler);\n                }\n                delete events[type];\n            }\n        });\n        // Remove data and the expando if it's no longer used\n        if (Object.keys(events).length === 0) {\n            Store.remove(elem);\n        }\n    }\n    Core.off = off;\n    function dispatch(elem, evt, ...args) {\n        const event = EventObject.create(evt);\n        event.delegateTarget = elem;\n        const hook = EventHook.get(event.type);\n        if (hook.preDispatch && hook.preDispatch(elem, event) === false) {\n            return;\n        }\n        const handlerQueue = Util.getHandlerQueue(elem, event);\n        // Run delegates first; they may want to stop propagation beneath us\n        for (let i = 0, l = handlerQueue.length; i < l && !event.isPropagationStopped(); i += 1) {\n            const matched = handlerQueue[i];\n            event.currentTarget = matched.elem;\n            for (let j = 0, k = matched.handlers.length; j < k && !event.isImmediatePropagationStopped(); j += 1) {\n                const handleObj = matched.handlers[j];\n                // If event is namespaced, then each handler is only invoked if it is\n                // specially universal or its namespaces are a superset of the event's.\n                if (event.rnamespace == null ||\n                    (handleObj.namespace && event.rnamespace.test(handleObj.namespace))) {\n                    event.handleObj = handleObj;\n                    event.data = handleObj.data;\n                    const hookHandle = EventHook.get(handleObj.originType).handle;\n                    const result = hookHandle\n                        ? hookHandle(matched.elem, event, ...args)\n                        : handleObj.handler.call(matched.elem, event, ...args);\n                    if (result !== undefined) {\n                        event.result = result;\n                        if (result === false) {\n                            event.preventDefault();\n                            event.stopPropagation();\n                        }\n                    }\n                }\n            }\n        }\n        // Call the postDispatch hook for the mapped type\n        if (hook.postDispatch) {\n            hook.postDispatch(elem, event);\n        }\n        return event.result;\n    }\n    Core.dispatch = dispatch;\n    function trigger(event, eventArgs, elem, onlyHandlers) {\n        let eventObj = event;\n        let type = typeof event === 'string' ? event : event.type;\n        let namespaces = typeof event === 'string' || eventObj.namespace == null\n            ? []\n            : eventObj.namespace.split('.');\n        const node = elem;\n        // Don't do events on text and comment nodes\n        if (node.nodeType === 3 || node.nodeType === 8) {\n            return;\n        }\n        if (type.indexOf('.') > -1) {\n            // Namespaced trigger; create a regexp to match event type in handle()\n            namespaces = type.split('.');\n            type = namespaces.shift();\n            namespaces.sort();\n        }\n        const ontype = type.indexOf(':') < 0 && `on${type}`;\n        // Caller can pass in a EventObject, Object, or just an event type string\n        eventObj =\n            event instanceof EventObject\n                ? event\n                : new EventObject(type, typeof event === 'object' ? event : null);\n        eventObj.namespace = namespaces.join('.');\n        eventObj.rnamespace = eventObj.namespace\n            ? new RegExp(`(^|\\\\.)${namespaces.join('\\\\.(?:.*\\\\.|)')}(\\\\.|$)`)\n            : null;\n        // Clean up the event in case it is being reused\n        eventObj.result = undefined;\n        if (!eventObj.target) {\n            eventObj.target = node;\n        }\n        const args = [eventObj];\n        if (Array.isArray(eventArgs)) {\n            args.push(...eventArgs);\n        }\n        else {\n            args.push(eventArgs);\n        }\n        const hook = EventHook.get(type);\n        if (!onlyHandlers &&\n            hook.trigger &&\n            hook.trigger(node, eventObj, eventArgs) === false) {\n            return;\n        }\n        let bubbleType;\n        // Determine event propagation path in advance, per W3C events spec.\n        // Bubble up to document, then to window; watch for a global ownerDocument\n        const eventPath = [node];\n        if (!onlyHandlers && !hook.noBubble && !Util.isWindow(node)) {\n            bubbleType = hook.delegateType || type;\n            let last = node;\n            let curr = node.parentNode;\n            while (curr != null) {\n                eventPath.push(curr);\n                last = curr;\n                curr = curr.parentNode;\n            }\n            // Only add window if we got to document\n            const doc = node.ownerDocument || document;\n            if (last === doc) {\n                const win = last.defaultView || last.parentWindow || window;\n                eventPath.push(win);\n            }\n        }\n        let lastElement = node;\n        // Fire handlers on the event path\n        for (let i = 0, l = eventPath.length; i < l && !eventObj.isPropagationStopped(); i += 1) {\n            const currElement = eventPath[i];\n            lastElement = currElement;\n            eventObj.type = i > 1 ? bubbleType : hook.bindType || type;\n            // Custom handler\n            const store = Store.get(currElement);\n            if (store) {\n                if (store.events[eventObj.type] && store.handler) {\n                    store.handler.call(currElement, ...args);\n                }\n            }\n            // Native handler\n            const handle = (ontype && currElement[ontype]) || null;\n            if (handle && Util.isValidTarget(currElement)) {\n                eventObj.result = handle.call(currElement, ...args);\n                if (eventObj.result === false) {\n                    eventObj.preventDefault();\n                }\n            }\n        }\n        eventObj.type = type;\n        // If nobody prevented the default action, do it now\n        if (!onlyHandlers && !eventObj.isDefaultPrevented()) {\n            const preventDefault = hook.preventDefault;\n            if ((preventDefault == null ||\n                preventDefault(eventPath.pop(), eventObj, eventArgs) === false) &&\n                Util.isValidTarget(node)) {\n                // Call a native DOM method on the target with the same name as the\n                // event. Don't do default actions on window.\n                if (ontype &&\n                    typeof node[type] === 'function' &&\n                    !Util.isWindow(node)) {\n                    // Don't re-trigger an onFOO event when we call its FOO() method\n                    const tmp = node[ontype];\n                    if (tmp) {\n                        node[ontype] = null;\n                    }\n                    // Prevent re-triggering of the same event, since we already bubbled it above\n                    triggered = type;\n                    if (eventObj.isPropagationStopped()) {\n                        lastElement.addEventListener(type, Util.stopPropagationCallback);\n                    }\n                    node[type]();\n                    if (eventObj.isPropagationStopped()) {\n                        lastElement.removeEventListener(type, Util.stopPropagationCallback);\n                    }\n                    triggered = undefined;\n                    if (tmp) {\n                        node[ontype] = tmp;\n                    }\n                }\n            }\n        }\n        return eventObj.result;\n    }\n    Core.trigger = trigger;\n})(Core || (Core = {}));\n//# sourceMappingURL=core.js.map","/* eslint-disable no-param-reassign */\nimport { Core } from './core';\nimport { Util } from './util';\nexport var Event;\n(function (Event) {\n    function on(elem, events, selector, data, handler) {\n        Private.on(elem, events, selector, data, handler);\n        return elem;\n    }\n    Event.on = on;\n    function once(elem, events, selector, data, handler) {\n        Private.on(elem, events, selector, data, handler, true);\n        return elem;\n    }\n    Event.once = once;\n    function off(elem, events, selector, handler) {\n        Private.off(elem, events, selector, handler);\n        return elem;\n    }\n    Event.off = off;\n    function trigger(elem, event, args, \n    /**\n     * When onlyHandlers is `true`\n     * - Will not call `.event()` on the element it is triggered on. This means\n     *   `.trigger('submit', [], true)` on a form will not call `.submit()` on\n     *   the form.\n     * - Events will not bubble up the DOM hierarchy; if they are not handled\n     *   by the target element directly, they do nothing.\n     */\n    onlyHandlers) {\n        Core.trigger(event, args, elem, onlyHandlers);\n        return elem;\n    }\n    Event.trigger = trigger;\n})(Event || (Event = {}));\nvar Private;\n(function (Private) {\n    function on(elem, types, selector, data, fn, once) {\n        // Types can be a map of types/handlers\n        if (typeof types === 'object') {\n            // ( types-Object, selector, data )\n            if (typeof selector !== 'string') {\n                // ( types-Object, data )\n                data = data || selector;\n                selector = undefined;\n            }\n            Object.keys(types).forEach((type) => on(elem, type, selector, data, types[type], once));\n            return;\n        }\n        if (data == null && fn == null) {\n            // ( types, fn )\n            fn = selector;\n            data = selector = undefined;\n        }\n        else if (fn == null) {\n            if (typeof selector === 'string') {\n                // ( types, selector, fn )\n                fn = data;\n                data = undefined;\n            }\n            else {\n                // ( types, data, fn )\n                fn = data;\n                data = selector;\n                selector = undefined;\n            }\n        }\n        if (fn === false) {\n            fn = Util.returnFalse;\n        }\n        else if (!fn) {\n            return;\n        }\n        if (once) {\n            const originHandler = fn;\n            fn = function (event, ...args) {\n                // Can use an empty set, since event contains the info\n                Private.off(elem, event);\n                return originHandler.call(this, event, ...args);\n            };\n            // Use same guid so caller can remove using origFn\n            Util.setHandlerId(fn, Util.ensureHandlerId(originHandler));\n        }\n        Core.on(elem, types, fn, data, selector);\n    }\n    Private.on = on;\n    function off(elem, events, selector, fn) {\n        const evt = events;\n        if (evt && evt.preventDefault != null && evt.handleObj != null) {\n            const obj = evt.handleObj;\n            off(evt.delegateTarget, obj.namespace ? `${obj.originType}.${obj.namespace}` : obj.originType, obj.selector, obj.handler);\n            return;\n        }\n        if (typeof events === 'object') {\n            // ( types-object [, selector] )\n            const types = events;\n            Object.keys(types).forEach((type) => off(elem, type, selector, types[type]));\n            return;\n        }\n        if (selector === false || typeof selector === 'function') {\n            // ( types [, fn] )\n            fn = selector;\n            selector = undefined;\n        }\n        if (fn === false) {\n            fn = Util.returnFalse;\n        }\n        Core.off(elem, events, fn, selector);\n    }\n    Private.off = off;\n})(Private || (Private = {}));\n//# sourceMappingURL=main.js.map","import { Platform } from '../platform';\nexport class MouseWheelHandle {\n    constructor(target, onWheelCallback, onWheelGuard) {\n        this.animationFrameId = 0;\n        this.deltaX = 0;\n        this.deltaY = 0;\n        this.eventName = Platform.isEventSupported('wheel')\n            ? 'wheel'\n            : 'mousewheel';\n        this.target = target;\n        this.onWheelCallback = onWheelCallback;\n        this.onWheelGuard = onWheelGuard;\n        this.onWheel = this.onWheel.bind(this);\n        this.didWheel = this.didWheel.bind(this);\n    }\n    enable() {\n        this.target.addEventListener(this.eventName, this.onWheel, {\n            passive: false,\n        });\n    }\n    disable() {\n        this.target.removeEventListener(this.eventName, this.onWheel);\n    }\n    onWheel(e) {\n        if (this.onWheelGuard != null && !this.onWheelGuard(e)) {\n            return;\n        }\n        this.deltaX += e.deltaX;\n        this.deltaY += e.deltaY;\n        e.preventDefault();\n        let changed;\n        if (this.deltaX !== 0 || this.deltaY !== 0) {\n            e.stopPropagation();\n            changed = true;\n        }\n        if (changed === true && this.animationFrameId === 0) {\n            this.animationFrameId = requestAnimationFrame(() => {\n                this.didWheel(e);\n            });\n        }\n    }\n    didWheel(e) {\n        this.animationFrameId = 0;\n        this.onWheelCallback(e, this.deltaX, this.deltaY);\n        this.deltaX = 0;\n        this.deltaY = 0;\n    }\n}\n//# sourceMappingURL=mousewheel.js.map","import { computeStyle, computeStyleInt } from './css';\nimport { isElement } from './elem';\nexport function offset(elem) {\n    const rect = elem.getBoundingClientRect();\n    const win = elem.ownerDocument.defaultView;\n    return {\n        top: rect.top + win.pageYOffset,\n        left: rect.left + win.pageXOffset,\n    };\n}\nexport function width(elem) {\n    const rect = elem.getBoundingClientRect();\n    return rect.width;\n}\nexport function height(elem) {\n    const rect = elem.getBoundingClientRect();\n    return rect.height;\n}\nexport function position(elem) {\n    const isFixed = computeStyle(elem, 'position') === 'fixed';\n    let offsetValue;\n    if (isFixed) {\n        const rect = elem.getBoundingClientRect();\n        offsetValue = { left: rect.left, top: rect.top };\n    }\n    else {\n        offsetValue = offset(elem);\n    }\n    if (!isFixed) {\n        const doc = elem.ownerDocument;\n        let offsetParent = elem.offsetParent || doc.documentElement;\n        while ((offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            computeStyle(offsetParent, 'position') === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent !== elem && isElement(offsetParent)) {\n            const parentOffset = offset(offsetParent);\n            offsetValue.top -=\n                parentOffset.top + computeStyleInt(offsetParent, 'borderTopWidth');\n            offsetValue.left -=\n                parentOffset.left + computeStyleInt(offsetParent, 'borderLeftWidth');\n        }\n    }\n    return {\n        top: offsetValue.top - computeStyleInt(elem, 'marginTop'),\n        left: offsetValue.left - computeStyleInt(elem, 'marginLeft'),\n    };\n}\n//# sourceMappingURL=position.js.map","export function debounce(fn, delay = 60) {\n    let timer = null;\n    return (...args) => {\n        if (timer) {\n            clearTimeout(timer);\n        }\n        timer = window.setTimeout(() => {\n            fn.apply(this, args);\n        }, delay);\n    };\n}\n//# sourceMappingURL=util.js.map","import { debounce } from './util';\nexport function createSensor(element) {\n    let sensor = null;\n    let listeners = [];\n    const create = () => {\n        if (getComputedStyle(element).position === 'static') {\n            const style = element.style;\n            style.position = 'relative';\n        }\n        const obj = document.createElement('object');\n        obj.onload = () => {\n            obj.contentDocument.defaultView.addEventListener('resize', trigger);\n            trigger();\n        };\n        obj.style.display = 'block';\n        obj.style.position = 'absolute';\n        obj.style.top = '0';\n        obj.style.left = '0';\n        obj.style.height = '100%';\n        obj.style.width = '100%';\n        obj.style.overflow = 'hidden';\n        obj.style.pointerEvents = 'none';\n        obj.style.zIndex = '-1';\n        obj.style.opacity = '0';\n        obj.setAttribute('tabindex', '-1');\n        obj.type = 'text/html';\n        element.appendChild(obj);\n        // for ie, should set data attribute delay, or will be white screen\n        obj.data = 'about:blank';\n        return obj;\n    };\n    const trigger = debounce(() => {\n        listeners.forEach((listener) => listener(element));\n    });\n    const bind = (listener) => {\n        if (!sensor) {\n            sensor = create();\n        }\n        if (listeners.indexOf(listener) === -1) {\n            listeners.push(listener);\n        }\n    };\n    const destroy = () => {\n        if (sensor && sensor.parentNode) {\n            if (sensor.contentDocument) {\n                sensor.contentDocument.defaultView.removeEventListener('resize', trigger);\n            }\n            sensor.parentNode.removeChild(sensor);\n            sensor = null;\n            listeners = [];\n        }\n    };\n    const unbind = (listener) => {\n        const idx = listeners.indexOf(listener);\n        if (idx !== -1) {\n            listeners.splice(idx, 1);\n        }\n        // no listener, and sensor is exist then destroy the sensor\n        if (listeners.length === 0 && sensor) {\n            destroy();\n        }\n    };\n    return {\n        element,\n        bind,\n        destroy,\n        unbind,\n    };\n}\n//# sourceMappingURL=object.js.map","import { debounce } from './util';\nexport function createSensor(element) {\n    let sensor = null;\n    let listeners = [];\n    const trigger = debounce(() => {\n        listeners.forEach((listener) => {\n            listener(element);\n        });\n    });\n    const create = () => {\n        const s = new ResizeObserver(trigger);\n        s.observe(element);\n        trigger();\n        return s;\n    };\n    const bind = (listener) => {\n        if (!sensor) {\n            sensor = create();\n        }\n        if (listeners.indexOf(listener) === -1) {\n            listeners.push(listener);\n        }\n    };\n    const destroy = () => {\n        if (sensor) {\n            sensor.disconnect();\n            listeners = [];\n            sensor = null;\n        }\n    };\n    const unbind = (listener) => {\n        const idx = listeners.indexOf(listener);\n        if (idx !== -1) {\n            listeners.splice(idx, 1);\n        }\n        // no listener, and sensor is exist then destroy the sensor\n        if (listeners.length === 0 && sensor) {\n            destroy();\n        }\n    };\n    return {\n        element,\n        bind,\n        destroy,\n        unbind,\n    };\n}\n//# sourceMappingURL=observer.js.map","import { createSensor as createObjectSensor } from './object';\nimport { createSensor as createResizeObserverSensor } from './observer';\nexport const createSensor = typeof ResizeObserver !== 'undefined'\n    ? createResizeObserverSensor\n    : createObjectSensor;\n//# sourceMappingURL=index.js.map","import { createSensor } from './sensors';\nexport var SizeSensor;\n(function (SizeSensor) {\n    const cache = new WeakMap();\n    function get(element) {\n        let sensor = cache.get(element);\n        if (sensor) {\n            return sensor;\n        }\n        sensor = createSensor(element);\n        cache.set(element, sensor);\n        return sensor;\n    }\n    function remove(sensor) {\n        sensor.destroy();\n        cache.delete(sensor.element);\n    }\n    SizeSensor.bind = (element, cb) => {\n        const sensor = get(element);\n        sensor.bind(cb);\n        return () => sensor.unbind(cb);\n    };\n    SizeSensor.clear = (element) => {\n        const sensor = get(element);\n        remove(sensor);\n    };\n})(SizeSensor || (SizeSensor = {}));\n//# sourceMappingURL=index.js.map","import { PriorityQueue } from './priorityqueue';\nexport var Dijkstra;\n(function (Dijkstra) {\n    function run(adjacencyList, source, weight = (u, v) => 1) {\n        const dist = {};\n        const previous = {};\n        const scanned = {};\n        const queue = new PriorityQueue();\n        dist[source] = 0;\n        Object.keys(adjacencyList).forEach((v) => {\n            if (v !== source) {\n                dist[v] = Infinity;\n            }\n            queue.insert(dist[v], v, v);\n        });\n        while (!queue.isEmpty()) {\n            const u = queue.remove();\n            scanned[u] = true;\n            const neighbours = adjacencyList[u] || [];\n            for (let i = 0; i < neighbours.length; i += 1) {\n                const v = neighbours[i];\n                if (!scanned[v]) {\n                    const alt = dist[u] + weight(u, v);\n                    if (alt < dist[v]) {\n                        dist[v] = alt;\n                        previous[v] = u;\n                        queue.updatePriority(v, alt);\n                    }\n                }\n            }\n        }\n        return previous;\n    }\n    Dijkstra.run = run;\n})(Dijkstra || (Dijkstra = {}));\n//# sourceMappingURL=dijkstra.js.map","// eslint-disable-next-line\nexport var ModifierKey;\n(function (ModifierKey) {\n    function parse(modifiers) {\n        const or = [];\n        const and = [];\n        if (Array.isArray(modifiers)) {\n            or.push(...modifiers);\n        }\n        else {\n            modifiers.split('|').forEach((item) => {\n                if (item.indexOf('&') === -1) {\n                    or.push(item);\n                }\n                else {\n                    and.push(...item.split('&'));\n                }\n            });\n        }\n        return { or, and };\n    }\n    ModifierKey.parse = parse;\n    function equals(modifiers1, modifiers2) {\n        if (modifiers1 != null && modifiers2 != null) {\n            const m1 = parse(modifiers1);\n            const m2 = parse(modifiers2);\n            const or1 = m1.or.sort();\n            const or2 = m2.or.sort();\n            const and1 = m1.and.sort();\n            const and2 = m2.and.sort();\n            const equal = (a1, a2) => {\n                return (a1.length === a2.length &&\n                    (a1.length === 0 || a1.every((a, i) => a === a2[i])));\n            };\n            return equal(or1, or2) && equal(and1, and2);\n        }\n        if (modifiers1 == null && modifiers2 == null) {\n            return true;\n        }\n        return false;\n    }\n    ModifierKey.equals = equals;\n    function isMatch(e, modifiers, strict) {\n        if (modifiers == null ||\n            (Array.isArray(modifiers) && modifiers.length === 0)) {\n            return strict\n                ? e.altKey !== true &&\n                    e.ctrlKey !== true &&\n                    e.metaKey !== true &&\n                    e.shiftKey !== true\n                : true;\n        }\n        const { or, and } = parse(modifiers);\n        const match = (key) => {\n            const name = `${key.toLowerCase()}Key`;\n            return e[name] === true;\n        };\n        return or.some((key) => match(key)) && and.every((key) => match(key));\n    }\n    ModifierKey.isMatch = isMatch;\n})(ModifierKey || (ModifierKey = {}));\n//# sourceMappingURL=index.js.map","export var Timing;\n(function (Timing) {\n    Timing.linear = (t) => t;\n    Timing.quad = (t) => t * t;\n    Timing.cubic = (t) => t * t * t;\n    Timing.inout = (t) => {\n        if (t <= 0) {\n            return 0;\n        }\n        if (t >= 1) {\n            return 1;\n        }\n        const t2 = t * t;\n        const t3 = t2 * t;\n        return 4 * (t < 0.5 ? t3 : 3 * (t - t2) + t3 - 0.75);\n    };\n    Timing.exponential = (t) => {\n        return Math.pow(2, 10 * (t - 1)); // eslint-disable-line\n    };\n    Timing.bounce = ((t) => {\n        // eslint-disable-next-line\n        for (let a = 0, b = 1; 1; a += b, b /= 2) {\n            if (t >= (7 - 4 * a) / 11) {\n                const q = (11 - 6 * a - 11 * t) / 4;\n                return -q * q + b * b;\n            }\n        }\n    });\n})(Timing || (Timing = {}));\n(function (Timing) {\n    Timing.decorators = {\n        reverse(f) {\n            return (t) => 1 - f(1 - t);\n        },\n        reflect(f) {\n            return (t) => 0.5 * (t < 0.5 ? f(2 * t) : 2 - f(2 - 2 * t));\n        },\n        clamp(f, n = 0, x = 1) {\n            return (t) => {\n                const r = f(t);\n                return r < n ? n : r > x ? x : r;\n            };\n        },\n        back(s = 1.70158) {\n            return (t) => t * t * ((s + 1) * t - s);\n        },\n        elastic(x = 1.5) {\n            return (t) => Math.pow(2, 10 * (t - 1)) * Math.cos(((20 * Math.PI * x) / 3) * t); // eslint-disable-line\n        },\n    };\n})(Timing || (Timing = {}));\n(function (Timing) {\n    // Slight acceleration from zero to full speed\n    function easeInSine(t) {\n        return -1 * Math.cos(t * (Math.PI / 2)) + 1;\n    }\n    Timing.easeInSine = easeInSine;\n    // Slight deceleration at the end\n    function easeOutSine(t) {\n        return Math.sin(t * (Math.PI / 2));\n    }\n    Timing.easeOutSine = easeOutSine;\n    // Slight acceleration at beginning and slight deceleration at end\n    function easeInOutSine(t) {\n        return -0.5 * (Math.cos(Math.PI * t) - 1);\n    }\n    Timing.easeInOutSine = easeInOutSine;\n    // Accelerating from zero velocity\n    function easeInQuad(t) {\n        return t * t;\n    }\n    Timing.easeInQuad = easeInQuad;\n    // Decelerating to zero velocity\n    function easeOutQuad(t) {\n        return t * (2 - t);\n    }\n    Timing.easeOutQuad = easeOutQuad;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuad(t) {\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    }\n    Timing.easeInOutQuad = easeInOutQuad;\n    // Accelerating from zero velocity\n    function easeInCubic(t) {\n        return t * t * t;\n    }\n    Timing.easeInCubic = easeInCubic;\n    // Decelerating to zero velocity\n    function easeOutCubic(t) {\n        const t1 = t - 1;\n        return t1 * t1 * t1 + 1;\n    }\n    Timing.easeOutCubic = easeOutCubic;\n    // Acceleration until halfway, then deceleration\n    function easeInOutCubic(t) {\n        return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n    }\n    Timing.easeInOutCubic = easeInOutCubic;\n    // Accelerating from zero velocity\n    function easeInQuart(t) {\n        return t * t * t * t;\n    }\n    Timing.easeInQuart = easeInQuart;\n    // Decelerating to zero velocity\n    function easeOutQuart(t) {\n        const t1 = t - 1;\n        return 1 - t1 * t1 * t1 * t1;\n    }\n    Timing.easeOutQuart = easeOutQuart;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuart(t) {\n        const t1 = t - 1;\n        return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeInOutQuart = easeInOutQuart;\n    // Accelerating from zero velocity\n    function easeInQuint(t) {\n        return t * t * t * t * t;\n    }\n    Timing.easeInQuint = easeInQuint;\n    // Decelerating to zero velocity\n    function easeOutQuint(t) {\n        const t1 = t - 1;\n        return 1 + t1 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeOutQuint = easeOutQuint;\n    // Acceleration until halfway, then deceleration\n    function easeInOutQuint(t) {\n        const t1 = t - 1;\n        return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * t1 * t1 * t1 * t1 * t1;\n    }\n    Timing.easeInOutQuint = easeInOutQuint;\n    // Accelerate exponentially until finish\n    function easeInExpo(t) {\n        if (t === 0) {\n            return 0;\n        }\n        return Math.pow(2, 10 * (t - 1)); // eslint-disable-line\n    }\n    Timing.easeInExpo = easeInExpo;\n    // Initial exponential acceleration slowing to stop\n    function easeOutExpo(t) {\n        if (t === 1) {\n            return 1;\n        }\n        return -Math.pow(2, -10 * t) + 1; // eslint-disable-line\n    }\n    Timing.easeOutExpo = easeOutExpo;\n    // Exponential acceleration and deceleration\n    function easeInOutExpo(t) {\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 1;\n        if (scaledTime < 1) {\n            return 0.5 * Math.pow(2, 10 * scaledTime1); // eslint-disable-line\n        }\n        return 0.5 * (-Math.pow(2, -10 * scaledTime1) + 2); // eslint-disable-line\n    }\n    Timing.easeInOutExpo = easeInOutExpo;\n    // Increasing velocity until stop\n    function easeInCirc(t) {\n        const scaledTime = t / 1;\n        return -1 * (Math.sqrt(1 - scaledTime * t) - 1);\n    }\n    Timing.easeInCirc = easeInCirc;\n    // Start fast, decreasing velocity until stop\n    function easeOutCirc(t) {\n        const t1 = t - 1;\n        return Math.sqrt(1 - t1 * t1);\n    }\n    Timing.easeOutCirc = easeOutCirc;\n    // Fast increase in velocity, fast decrease in velocity\n    function easeInOutCirc(t) {\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 2;\n        if (scaledTime < 1) {\n            return -0.5 * (Math.sqrt(1 - scaledTime * scaledTime) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - scaledTime1 * scaledTime1) + 1);\n    }\n    Timing.easeInOutCirc = easeInOutCirc;\n    // Slow movement backwards then fast snap to finish\n    function easeInBack(t, magnitude = 1.70158) {\n        return t * t * ((magnitude + 1) * t - magnitude);\n    }\n    Timing.easeInBack = easeInBack;\n    // Fast snap to backwards point then slow resolve to finish\n    function easeOutBack(t, magnitude = 1.70158) {\n        const scaledTime = t / 1 - 1;\n        return (scaledTime * scaledTime * ((magnitude + 1) * scaledTime + magnitude) + 1);\n    }\n    Timing.easeOutBack = easeOutBack;\n    // Slow movement backwards, fast snap to past finish, slow resolve to finish\n    function easeInOutBack(t, magnitude = 1.70158) {\n        const scaledTime = t * 2;\n        const scaledTime2 = scaledTime - 2;\n        const s = magnitude * 1.525;\n        if (scaledTime < 1) {\n            return 0.5 * scaledTime * scaledTime * ((s + 1) * scaledTime - s);\n        }\n        return 0.5 * (scaledTime2 * scaledTime2 * ((s + 1) * scaledTime2 + s) + 2);\n    }\n    Timing.easeInOutBack = easeInOutBack;\n    // Bounces slowly then quickly to finish\n    function easeInElastic(t, magnitude = 0.7) {\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t / 1;\n        const scaledTime1 = scaledTime - 1;\n        const p = 1 - magnitude;\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        return -(Math.pow(2, 10 * scaledTime1) * // eslint-disable-line\n            Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p));\n    }\n    Timing.easeInElastic = easeInElastic;\n    // Fast acceleration, bounces to zero\n    function easeOutElastic(t, magnitude = 0.7) {\n        const p = 1 - magnitude;\n        const scaledTime = t * 2;\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        return (Math.pow(2, -10 * scaledTime) * // eslint-disable-line\n            Math.sin(((scaledTime - s) * (2 * Math.PI)) / p) +\n            1);\n    }\n    Timing.easeOutElastic = easeOutElastic;\n    // Slow start and end, two bounces sandwich a fast motion\n    function easeInOutElastic(t, magnitude = 0.65) {\n        const p = 1 - magnitude;\n        if (t === 0 || t === 1) {\n            return t;\n        }\n        const scaledTime = t * 2;\n        const scaledTime1 = scaledTime - 1;\n        const s = (p / (2 * Math.PI)) * Math.asin(1);\n        if (scaledTime < 1) {\n            return (-0.5 *\n                (Math.pow(2, 10 * scaledTime1) * // eslint-disable-line\n                    Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p)));\n        }\n        return (Math.pow(2, -10 * scaledTime1) * // eslint-disable-line\n            Math.sin(((scaledTime1 - s) * (2 * Math.PI)) / p) *\n            0.5 +\n            1);\n    }\n    Timing.easeInOutElastic = easeInOutElastic;\n    // Bounce to completion\n    function easeOutBounce(t) {\n        const scaledTime = t / 1;\n        if (scaledTime < 1 / 2.75) {\n            return 7.5625 * scaledTime * scaledTime;\n        }\n        if (scaledTime < 2 / 2.75) {\n            const scaledTime2 = scaledTime - 1.5 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.75;\n        }\n        if (scaledTime < 2.5 / 2.75) {\n            const scaledTime2 = scaledTime - 2.25 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.9375;\n        }\n        {\n            const scaledTime2 = scaledTime - 2.625 / 2.75;\n            return 7.5625 * scaledTime2 * scaledTime2 + 0.984375;\n        }\n    }\n    Timing.easeOutBounce = easeOutBounce;\n    // Bounce increasing in velocity until completion\n    function easeInBounce(t) {\n        return 1 - easeOutBounce(1 - t);\n    }\n    Timing.easeInBounce = easeInBounce;\n    // Bounce in and bounce out\n    function easeInOutBounce(t) {\n        if (t < 0.5) {\n            return easeInBounce(t * 2) * 0.5;\n        }\n        return easeOutBounce(t * 2 - 1) * 0.5 + 0.5;\n    }\n    Timing.easeInOutBounce = easeInOutBounce;\n})(Timing || (Timing = {}));\n//# sourceMappingURL=timing.js.map","export var Interp;\n(function (Interp) {\n    Interp.number = (a, b) => {\n        const d = b - a;\n        return (t) => {\n            return a + d * t;\n        };\n    };\n    Interp.object = (a, b) => {\n        const keys = Object.keys(a);\n        return (t) => {\n            const ret = {};\n            for (let i = keys.length - 1; i !== -1; i -= 1) {\n                const key = keys[i];\n                ret[key] = a[key] + (b[key] - a[key]) * t;\n            }\n            return ret;\n        };\n    };\n    Interp.unit = (a, b) => {\n        const reg = /(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/;\n        const ma = reg.exec(a);\n        const mb = reg.exec(b);\n        const pb = mb ? mb[1] : '';\n        const aa = ma ? +ma[1] : 0;\n        const bb = mb ? +mb[1] : 0;\n        const index = pb.indexOf('.');\n        const precision = index > 0 ? pb[1].length - index - 1 : 0;\n        const d = bb - aa;\n        const u = ma ? ma[2] : '';\n        return (t) => {\n            return (aa + d * t).toFixed(precision) + u;\n        };\n    };\n    Interp.color = (a, b) => {\n        const ca = parseInt(a.slice(1), 16);\n        const cb = parseInt(b.slice(1), 16);\n        const ra = ca & 0x0000ff;\n        const rd = (cb & 0x0000ff) - ra;\n        const ga = ca & 0x00ff00;\n        const gd = (cb & 0x00ff00) - ga;\n        const ba = ca & 0xff0000;\n        const bd = (cb & 0xff0000) - ba;\n        return (t) => {\n            const r = (ra + rd * t) & 0x000000ff;\n            const g = (ga + gd * t) & 0x0000ff00;\n            const b = (ba + bd * t) & 0x00ff0000;\n            return `#${((1 << 24) | r | g | b).toString(16).slice(1)}`;\n        };\n    };\n})(Interp || (Interp = {}));\n//# sourceMappingURL=interp.js.map","/**\n * An implementation of the Priority Queue abstract data type.\n *\n * @see: http://en.wikipedia.org/wiki/Priority_queue\n *\n * It is like a normal stack or queue, but where each item has assigned a\n * priority (a number). Items with higher priority are served before items\n * with lower priority. This implementation uses binary heap as an internal\n * representation of the queue. The time complexity of all the methods is as\n * follows:\n *\n * - create: `O(n)`\n * - insert: `O(log n)`\n * - remove: `O(log n)`\n * - peek: `O(1)`\n * - isEmpty: `O(1)`\n * - peekPriority: `O(1)`\n */\nexport class PriorityQueue {\n    constructor(options = {}) {\n        this.comparator = options.comparator || PriorityQueue.defaultComparator;\n        this.index = {};\n        this.data = options.data || [];\n        this.heapify();\n    }\n    /**\n     * Returns `true` if the priority queue is empty, `false` otherwise.\n     */\n    isEmpty() {\n        return this.data.length === 0;\n    }\n    /**\n     * Inserts a value with priority to the queue. Optionally pass a unique\n     * id of this item. Passing unique IDs for each item you insert allows\n     * you to use the `updatePriority()` operation.\n     * @param priority\n     * @param value\n     * @param id\n     */\n    insert(priority, value, id) {\n        const item = { priority, value };\n        const index = this.data.length;\n        if (id) {\n            item.id = id;\n            this.index[id] = index;\n        }\n        this.data.push(item);\n        this.bubbleUp(index);\n        return this;\n    }\n    /**\n     * Returns the value of an item with the highest priority.\n     */\n    peek() {\n        return this.data[0] ? this.data[0].value : null;\n    }\n    /**\n     * Returns the highest priority in the queue.\n     */\n    peekPriority() {\n        return this.data[0] ? this.data[0].priority : null;\n    }\n    updatePriority(id, priority) {\n        const index = this.index[id];\n        if (typeof index === 'undefined') {\n            throw new Error(`Node with id '${id}' was not found in the heap.`);\n        }\n        const data = this.data;\n        const oldPriority = data[index].priority;\n        const comp = this.comparator(priority, oldPriority);\n        if (comp < 0) {\n            data[index].priority = priority;\n            this.bubbleUp(index);\n        }\n        else if (comp > 0) {\n            data[index].priority = priority;\n            this.bubbleDown(index);\n        }\n    }\n    /**\n     * Removes the item with the highest priority from the queue\n     *\n     * @returns The value of the removed item.\n     */\n    remove() {\n        const data = this.data;\n        const peek = data[0];\n        const last = data.pop();\n        if (peek.id) {\n            delete this.index[peek.id];\n        }\n        if (data.length > 0) {\n            data[0] = last;\n            if (last.id) {\n                this.index[last.id] = 0;\n            }\n            this.bubbleDown(0);\n        }\n        return peek ? peek.value : null;\n    }\n    heapify() {\n        for (let i = 0; i < this.data.length; i += 1) {\n            this.bubbleUp(i);\n        }\n    }\n    bubbleUp(index) {\n        const data = this.data;\n        let tmp;\n        let parent;\n        let current = index;\n        while (current > 0) {\n            parent = (current - 1) >>> 1;\n            if (this.comparator(data[current].priority, data[parent].priority) < 0) {\n                tmp = data[parent];\n                data[parent] = data[current];\n                let id = data[current].id;\n                if (id != null) {\n                    this.index[id] = parent;\n                }\n                data[current] = tmp;\n                id = data[current].id;\n                if (id != null) {\n                    this.index[id] = current;\n                }\n                current = parent;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    bubbleDown(index) {\n        const data = this.data;\n        const last = data.length - 1;\n        let current = index;\n        // eslint-disable-next-line\n        while (true) {\n            const left = (current << 1) + 1;\n            const right = left + 1;\n            let minIndex = current;\n            if (left <= last &&\n                this.comparator(data[left].priority, data[minIndex].priority) < 0) {\n                minIndex = left;\n            }\n            if (right <= last &&\n                this.comparator(data[right].priority, data[minIndex].priority) < 0) {\n                minIndex = right;\n            }\n            if (minIndex !== current) {\n                const tmp = data[minIndex];\n                data[minIndex] = data[current];\n                let id = data[current].id;\n                if (id != null) {\n                    this.index[id] = minIndex;\n                }\n                data[current] = tmp;\n                id = data[current].id;\n                if (id != null) {\n                    this.index[id] = current;\n                }\n                current = minIndex;\n            }\n            else {\n                break;\n            }\n        }\n    }\n}\n(function (PriorityQueue) {\n    PriorityQueue.defaultComparator = (a, b) => a - b;\n})(PriorityQueue || (PriorityQueue = {}));\n//# sourceMappingURL=priorityqueue.js.map","/* eslint-disable no-constructor-return */\nimport { NumberExt } from '../number';\nexport class Color {\n    constructor(color, g, b, a) {\n        if (color == null) {\n            return this.set(255, 255, 255, 1);\n        }\n        if (typeof color === 'number') {\n            return this.set(color, g, b, a);\n        }\n        if (typeof color === 'string') {\n            return Color.fromString(color) || this;\n        }\n        if (Array.isArray(color)) {\n            return this.set(color);\n        }\n        this.set(color.r, color.g, color.b, color.a == null ? 1 : color.a);\n    }\n    blend(start, end, weight) {\n        this.set(start.r + (end.r - start.r) * weight, start.g + (end.g - start.g) * weight, start.b + (end.b - start.b) * weight, start.a + (end.a - start.a) * weight);\n    }\n    lighten(amount) {\n        const rgba = Color.lighten(this.toArray(), amount);\n        this.r = rgba[0];\n        this.g = rgba[1];\n        this.b = rgba[2];\n        this.a = rgba[3];\n    }\n    darken(amount) {\n        this.lighten(-amount);\n    }\n    set(arg0, arg1, arg2, arg3) {\n        const r = Array.isArray(arg0) ? arg0[0] : arg0;\n        const g = Array.isArray(arg0) ? arg0[1] : arg1;\n        const b = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        this.r = Math.round(NumberExt.clamp(r, 0, 255));\n        this.g = Math.round(NumberExt.clamp(g, 0, 255));\n        this.b = Math.round(NumberExt.clamp(b, 0, 255));\n        this.a = a == null ? 1 : NumberExt.clamp(a, 0, 1);\n        return this;\n    }\n    toHex() {\n        const hex = ['r', 'g', 'b'].map((key) => {\n            const str = this[key].toString(16);\n            return str.length < 2 ? `0${str}` : str;\n        });\n        return `#${hex.join('')}`;\n    }\n    toRGBA() {\n        return this.toArray();\n    }\n    toHSLA() {\n        return Color.rgba2hsla(this.r, this.g, this.b, this.a);\n    }\n    toCSS(ignoreAlpha) {\n        const rgb = `${this.r},${this.g},${this.b},`;\n        return ignoreAlpha ? `rgb(${rgb})` : `rgba(${rgb},${this.a})`;\n    }\n    toGrey() {\n        return Color.makeGrey(Math.round((this.r + this.g + this.b) / 3), this.a);\n    }\n    toArray() {\n        return [this.r, this.g, this.b, this.a];\n    }\n    toString() {\n        return this.toCSS();\n    }\n}\n(function (Color) {\n    function fromArray(arr) {\n        return new Color(arr);\n    }\n    Color.fromArray = fromArray;\n    function fromHex(color) {\n        return new Color([...hex2rgb(color), 1]);\n    }\n    Color.fromHex = fromHex;\n    function fromRGBA(color) {\n        const matches = color.toLowerCase().match(/^rgba?\\(([\\s.,0-9]+)\\)/);\n        if (matches) {\n            const arr = matches[1].split(/\\s*,\\s*/).map((v) => parseInt(v, 10));\n            return new Color(arr);\n        }\n        return null;\n    }\n    Color.fromRGBA = fromRGBA;\n    function hue2rgb(m1, m2, h) {\n        if (h < 0) {\n            ++h; // eslint-disable-line\n        }\n        if (h > 1) {\n            --h; // eslint-disable-line\n        }\n        const h6 = 6 * h;\n        if (h6 < 1) {\n            return m1 + (m2 - m1) * h6;\n        }\n        if (2 * h < 1) {\n            return m2;\n        }\n        if (3 * h < 2) {\n            return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n        }\n        return m1;\n    }\n    function fromHSLA(color) {\n        const matches = color.toLowerCase().match(/^hsla?\\(([\\s.,0-9]+)\\)/);\n        if (matches) {\n            const arr = matches[2].split(/\\s*,\\s*/);\n            const h = (((parseFloat(arr[0]) % 360) + 360) % 360) / 360;\n            const s = parseFloat(arr[1]) / 100;\n            const l = parseFloat(arr[2]) / 100;\n            const a = arr[3] == null ? 1 : parseInt(arr[3], 10);\n            return new Color(hsla2rgba(h, s, l, a));\n        }\n        return null;\n    }\n    Color.fromHSLA = fromHSLA;\n    function fromString(color) {\n        if (color.startsWith('#')) {\n            return fromHex(color);\n        }\n        if (color.startsWith('rgb')) {\n            return fromRGBA(color);\n        }\n        const preset = Color.named[color];\n        if (preset) {\n            return fromHex(preset);\n        }\n        return fromHSLA(color);\n    }\n    Color.fromString = fromString;\n    function makeGrey(g, a) {\n        return Color.fromArray([g, g, g, a]);\n    }\n    Color.makeGrey = makeGrey;\n    function rgba2hsla(arg0, arg1, arg2, arg3) {\n        const r = Array.isArray(arg0) ? arg0[0] : arg0;\n        const g = Array.isArray(arg0) ? arg0[1] : arg1;\n        const b = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        const max = Math.max(r, g, b);\n        const min = Math.min(r, g, b);\n        const l = (max + min) / 2;\n        let h = 0;\n        let s = 0;\n        if (min !== max) {\n            const d = max - min;\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n                default:\n                    break;\n            }\n            h /= 6;\n        }\n        return [h, s, l, a == null ? 1 : a];\n    }\n    Color.rgba2hsla = rgba2hsla;\n    function hsla2rgba(arg0, arg1, arg2, arg3) {\n        const h = Array.isArray(arg0) ? arg0[0] : arg0;\n        const s = Array.isArray(arg0) ? arg0[1] : arg1;\n        const l = Array.isArray(arg0) ? arg0[2] : arg2;\n        const a = Array.isArray(arg0) ? arg0[3] : arg3;\n        const m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n        const m1 = 2 * l - m2;\n        return [\n            hue2rgb(m1, m2, h + 1 / 3) * 256,\n            hue2rgb(m1, m2, h) * 256,\n            hue2rgb(m1, m2, h - 1 / 3) * 256,\n            a == null ? 1 : a,\n        ];\n    }\n    Color.hsla2rgba = hsla2rgba;\n    function random(ignoreAlpha) {\n        return new Color(Math.round(Math.random() * 256), Math.round(Math.random() * 256), Math.round(Math.random() * 256), ignoreAlpha ? undefined : parseFloat(Math.random().toFixed(2)));\n    }\n    Color.random = random;\n    function randomHex() {\n        const letters = '0123456789ABCDEF';\n        let color = '#';\n        for (let i = 0; i < 6; i += 1) {\n            color += letters[Math.floor(Math.random() * 16)];\n        }\n        return color;\n    }\n    Color.randomHex = randomHex;\n    function randomRGBA(ignoreAlpha) {\n        return random(ignoreAlpha).toString();\n    }\n    Color.randomRGBA = randomRGBA;\n    function invert(color, bw) {\n        if (typeof color === 'string') {\n            const pound = color[0] === '#';\n            const [r, g, b] = hex2rgb(color);\n            if (bw) {\n                // http://stackoverflow.com/a/3943023/112731\n                return r * 0.299 + g * 0.587 + b * 0.114 > 186 ? '#000000' : '#ffffff';\n            }\n            return `${pound ? '#' : ''}${rgb2hex(255 - r, 255 - g, 255 - b)}`;\n        }\n        const r = color[0];\n        const g = color[1];\n        const b = color[2];\n        const a = color[3];\n        if (bw) {\n            return r * 0.299 + g * 0.587 + b * 0.114 > 186\n                ? [0, 0, 0, a]\n                : [255, 255, 255, a];\n        }\n        return [255 - r, 255 - g, 255 - b, a];\n    }\n    Color.invert = invert;\n    function hex2rgb(hex) {\n        const color = hex.indexOf('#') === 0 ? hex : `#${hex}`;\n        let val = Number(`0x${color.substr(1)}`);\n        if (!(color.length === 4 || color.length === 7) || Number.isNaN(val)) {\n            throw new Error('Invalid hex color.');\n        }\n        const bits = color.length === 4 ? 4 : 8;\n        const mask = (1 << bits) - 1;\n        const bgr = ['b', 'g', 'r'].map(() => {\n            const c = val & mask;\n            val >>= bits;\n            return bits === 4 ? 17 * c : c;\n        });\n        return [bgr[2], bgr[1], bgr[0]];\n    }\n    function rgb2hex(r, g, b) {\n        const pad = (hex) => (hex.length < 2 ? `0${hex}` : hex);\n        return `${pad(r.toString(16))}${pad(g.toString(16))}${pad(b.toString(16))}`;\n    }\n    function lighten(color, amt) {\n        return lum(color, amt);\n    }\n    Color.lighten = lighten;\n    function darken(color, amt) {\n        return lum(color, -amt);\n    }\n    Color.darken = darken;\n    function lum(color, amt) {\n        if (typeof color === 'string') {\n            const pound = color[0] === '#';\n            const num = parseInt(pound ? color.substr(1) : color, 16);\n            const r = NumberExt.clamp((num >> 16) + amt, 0, 255);\n            const g = NumberExt.clamp(((num >> 8) & 0x00ff) + amt, 0, 255);\n            const b = NumberExt.clamp((num & 0x0000ff) + amt, 0, 255);\n            return `${pound ? '#' : ''}${(b | (g << 8) | (r << 16)).toString(16)}`;\n        }\n        const hex = rgb2hex(color[0], color[1], color[2]);\n        const arr = hex2rgb(lum(hex, amt));\n        return [arr[0], arr[1], arr[2], color[3]];\n    }\n})(Color || (Color = {}));\n(function (Color) {\n    Color.named = {\n        aliceblue: '#f0f8ff',\n        antiquewhite: '#faebd7',\n        aqua: '#00ffff',\n        aquamarine: '#7fffd4',\n        azure: '#f0ffff',\n        beige: '#f5f5dc',\n        bisque: '#ffe4c4',\n        black: '#000000',\n        blanchedalmond: '#ffebcd',\n        blue: '#0000ff',\n        blueviolet: '#8a2be2',\n        brown: '#a52a2a',\n        burlywood: '#deb887',\n        burntsienna: '#ea7e5d',\n        cadetblue: '#5f9ea0',\n        chartreuse: '#7fff00',\n        chocolate: '#d2691e',\n        coral: '#ff7f50',\n        cornflowerblue: '#6495ed',\n        cornsilk: '#fff8dc',\n        crimson: '#dc143c',\n        cyan: '#00ffff',\n        darkblue: '#00008b',\n        darkcyan: '#008b8b',\n        darkgoldenrod: '#b8860b',\n        darkgray: '#a9a9a9',\n        darkgreen: '#006400',\n        darkgrey: '#a9a9a9',\n        darkkhaki: '#bdb76b',\n        darkmagenta: '#8b008b',\n        darkolivegreen: '#556b2f',\n        darkorange: '#ff8c00',\n        darkorchid: '#9932cc',\n        darkred: '#8b0000',\n        darksalmon: '#e9967a',\n        darkseagreen: '#8fbc8f',\n        darkslateblue: '#483d8b',\n        darkslategray: '#2f4f4f',\n        darkslategrey: '#2f4f4f',\n        darkturquoise: '#00ced1',\n        darkviolet: '#9400d3',\n        deeppink: '#ff1493',\n        deepskyblue: '#00bfff',\n        dimgray: '#696969',\n        dimgrey: '#696969',\n        dodgerblue: '#1e90ff',\n        firebrick: '#b22222',\n        floralwhite: '#fffaf0',\n        forestgreen: '#228b22',\n        fuchsia: '#ff00ff',\n        gainsboro: '#dcdcdc',\n        ghostwhite: '#f8f8ff',\n        gold: '#ffd700',\n        goldenrod: '#daa520',\n        gray: '#808080',\n        green: '#008000',\n        greenyellow: '#adff2f',\n        grey: '#808080',\n        honeydew: '#f0fff0',\n        hotpink: '#ff69b4',\n        indianred: '#cd5c5c',\n        indigo: '#4b0082',\n        ivory: '#fffff0',\n        khaki: '#f0e68c',\n        lavender: '#e6e6fa',\n        lavenderblush: '#fff0f5',\n        lawngreen: '#7cfc00',\n        lemonchiffon: '#fffacd',\n        lightblue: '#add8e6',\n        lightcoral: '#f08080',\n        lightcyan: '#e0ffff',\n        lightgoldenrodyellow: '#fafad2',\n        lightgray: '#d3d3d3',\n        lightgreen: '#90ee90',\n        lightgrey: '#d3d3d3',\n        lightpink: '#ffb6c1',\n        lightsalmon: '#ffa07a',\n        lightseagreen: '#20b2aa',\n        lightskyblue: '#87cefa',\n        lightslategray: '#778899',\n        lightslategrey: '#778899',\n        lightsteelblue: '#b0c4de',\n        lightyellow: '#ffffe0',\n        lime: '#00ff00',\n        limegreen: '#32cd32',\n        linen: '#faf0e6',\n        magenta: '#ff00ff',\n        maroon: '#800000',\n        mediumaquamarine: '#66cdaa',\n        mediumblue: '#0000cd',\n        mediumorchid: '#ba55d3',\n        mediumpurple: '#9370db',\n        mediumseagreen: '#3cb371',\n        mediumslateblue: '#7b68ee',\n        mediumspringgreen: '#00fa9a',\n        mediumturquoise: '#48d1cc',\n        mediumvioletred: '#c71585',\n        midnightblue: '#191970',\n        mintcream: '#f5fffa',\n        mistyrose: '#ffe4e1',\n        moccasin: '#ffe4b5',\n        navajowhite: '#ffdead',\n        navy: '#000080',\n        oldlace: '#fdf5e6',\n        olive: '#808000',\n        olivedrab: '#6b8e23',\n        orange: '#ffa500',\n        orangered: '#ff4500',\n        orchid: '#da70d6',\n        palegoldenrod: '#eee8aa',\n        palegreen: '#98fb98',\n        paleturquoise: '#afeeee',\n        palevioletred: '#db7093',\n        papayawhip: '#ffefd5',\n        peachpuff: '#ffdab9',\n        peru: '#cd853f',\n        pink: '#ffc0cb',\n        plum: '#dda0dd',\n        powderblue: '#b0e0e6',\n        purple: '#800080',\n        rebeccapurple: '#663399',\n        red: '#ff0000',\n        rosybrown: '#bc8f8f',\n        royalblue: '#4169e1',\n        saddlebrown: '#8b4513',\n        salmon: '#fa8072',\n        sandybrown: '#f4a460',\n        seagreen: '#2e8b57',\n        seashell: '#fff5ee',\n        sienna: '#a0522d',\n        silver: '#c0c0c0',\n        skyblue: '#87ceeb',\n        slateblue: '#6a5acd',\n        slategray: '#708090',\n        slategrey: '#708090',\n        snow: '#fffafa',\n        springgreen: '#00ff7f',\n        steelblue: '#4682b4',\n        tan: '#d2b48c',\n        teal: '#008080',\n        thistle: '#d8bfd8',\n        tomato: '#ff6347',\n        turquoise: '#40e0d0',\n        violet: '#ee82ee',\n        wheat: '#f5deb3',\n        white: '#ffffff',\n        whitesmoke: '#f5f5f5',\n        yellow: '#ffff00',\n        yellowgreen: '#9acd32',\n    };\n})(Color || (Color = {}));\n//# sourceMappingURL=index.js.map","export class Dictionary {\n    constructor() {\n        this.clear();\n    }\n    clear() {\n        this.map = new WeakMap();\n        this.arr = [];\n    }\n    has(key) {\n        return this.map.has(key);\n    }\n    get(key) {\n        return this.map.get(key);\n    }\n    set(key, value) {\n        this.map.set(key, value);\n        this.arr.push(key);\n    }\n    delete(key) {\n        const index = this.arr.indexOf(key);\n        if (index >= 0) {\n            this.arr.splice(index, 1);\n        }\n        const ret = this.map.get(key);\n        this.map.delete(key);\n        return ret;\n    }\n    each(iterator) {\n        this.arr.forEach((key) => {\n            const value = this.map.get(key);\n            iterator(value, key);\n        });\n    }\n    dispose() {\n        this.clear();\n    }\n}\n//# sourceMappingURL=dictionary.js.map","import { Platform } from '../platform';\nconst cssModules = [];\nexport function ensure(name, content) {\n    const cssModule = cssModules.find((m) => m.name === name);\n    if (cssModule) {\n        cssModule.loadTimes += 1;\n        if (cssModule.loadTimes > 1) {\n            return;\n        }\n    }\n    if (!Platform.isApplyingHMR()) {\n        const styleElement = document.createElement('style');\n        styleElement.setAttribute('type', 'text/css');\n        styleElement.textContent = content;\n        const head = document.querySelector('head');\n        if (head) {\n            head.insertBefore(styleElement, head.firstChild);\n        }\n        cssModules.push({\n            name,\n            loadTimes: 1,\n            styleElement,\n        });\n    }\n}\nexport function clean(name) {\n    const index = cssModules.findIndex((m) => m.name === name);\n    if (index > -1) {\n        const cssModule = cssModules[index];\n        cssModule.loadTimes -= 1;\n        if (cssModule.loadTimes > 0) {\n            return;\n        }\n        let styleElement = cssModule.styleElement;\n        if (styleElement && styleElement.parentNode) {\n            styleElement.parentNode.removeChild(styleElement);\n        }\n        styleElement = null;\n        cssModules.splice(index, 1);\n    }\n}\n//# sourceMappingURL=loader.js.map","export var Angle;\n(function (Angle) {\n    /**\n     * Converts radian angle to degree angle.\n     * @param rad The radians to convert.\n     */\n    function toDeg(rad) {\n        return ((180 * rad) / Math.PI) % 360;\n    }\n    Angle.toDeg = toDeg;\n    /**\n     * Converts degree angle to radian angle.\n     * @param deg The degree angle to convert.\n     * @param over360\n     */\n    Angle.toRad = function (deg, over360 = false) {\n        const d = over360 ? deg : deg % 360;\n        return (d * Math.PI) / 180;\n    };\n    /**\n     * Returns the angle in degrees and clamps its value between `0` and `360`.\n     */\n    function normalize(angle) {\n        return (angle % 360) + (angle < 0 ? 360 : 0);\n    }\n    Angle.normalize = normalize;\n})(Angle || (Angle = {}));\n//# sourceMappingURL=angle.js.map","export var GeometryUtil;\n(function (GeometryUtil) {\n    function round(num, precision = 0) {\n        return Number.isInteger(num) ? num : +num.toFixed(precision);\n    }\n    GeometryUtil.round = round;\n    function random(min, max) {\n        let mmin;\n        let mmax;\n        if (max == null) {\n            mmax = min == null ? 1 : min;\n            mmin = 0;\n        }\n        else {\n            mmax = max;\n            mmin = min == null ? 0 : min;\n        }\n        if (mmax < mmin) {\n            const temp = mmin;\n            mmin = mmax;\n            mmax = temp;\n        }\n        return Math.floor(Math.random() * (mmax - mmin + 1) + mmin);\n    }\n    GeometryUtil.random = random;\n    function clamp(value, min, max) {\n        if (Number.isNaN(value)) {\n            return NaN;\n        }\n        if (Number.isNaN(min) || Number.isNaN(max)) {\n            return 0;\n        }\n        return min < max\n            ? value < min\n                ? min\n                : value > max\n                    ? max\n                    : value\n            : value < max\n                ? max\n                : value > min\n                    ? min\n                    : value;\n    }\n    GeometryUtil.clamp = clamp;\n    function snapToGrid(value, gridSize) {\n        return gridSize * Math.round(value / gridSize);\n    }\n    GeometryUtil.snapToGrid = snapToGrid;\n    function containsPoint(rect, point) {\n        return (point != null &&\n            rect != null &&\n            point.x >= rect.x &&\n            point.x <= rect.x + rect.width &&\n            point.y >= rect.y &&\n            point.y <= rect.y + rect.height);\n    }\n    GeometryUtil.containsPoint = containsPoint;\n    function squaredLength(p1, p2) {\n        const dx = p1.x - p2.x;\n        const dy = p1.y - p2.y;\n        return dx * dx + dy * dy;\n    }\n    GeometryUtil.squaredLength = squaredLength;\n})(GeometryUtil || (GeometryUtil = {}));\n//# sourceMappingURL=util.js.map","export class Geometry {\n    valueOf() {\n        return this.toJSON();\n    }\n    toString() {\n        return JSON.stringify(this.toJSON());\n    }\n}\n//# sourceMappingURL=geometry.js.map","import { GeometryUtil } from './util';\nimport { Angle } from './angle';\nimport { Geometry } from './geometry';\nexport class Point extends Geometry {\n    constructor(x, y) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n    }\n    /**\n     * Rounds the point to the given precision.\n     */\n    round(precision = 0) {\n        this.x = GeometryUtil.round(this.x, precision);\n        this.y = GeometryUtil.round(this.y, precision);\n        return this;\n    }\n    add(x, y) {\n        const p = Point.create(x, y);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    update(x, y) {\n        const p = Point.create(x, y);\n        this.x = p.x;\n        this.y = p.y;\n        return this;\n    }\n    translate(dx, dy) {\n        const t = Point.create(dx, dy);\n        this.x += t.x;\n        this.y += t.y;\n        return this;\n    }\n    /**\n     * Rotate the point by `degree` around `center`.\n     */\n    rotate(degree, center) {\n        const p = Point.rotate(this, degree, center);\n        this.x = p.x;\n        this.y = p.y;\n        return this;\n    }\n    /**\n     * Scale point by `sx` and `sy` around the given `origin`. If origin is\n     * not specified, the point is scaled around `0, 0`.\n     */\n    scale(sx, sy, origin = new Point()) {\n        const ref = Point.create(origin);\n        this.x = ref.x + sx * (this.x - ref.x);\n        this.y = ref.y + sy * (this.y - ref.y);\n        return this;\n    }\n    /**\n     * Chooses the point closest to this point from among `points`. If `points`\n     * is an empty array, `null` is returned.\n     */\n    closest(points) {\n        if (points.length === 1) {\n            return Point.create(points[0]);\n        }\n        let ret = null;\n        let min = Infinity;\n        points.forEach((p) => {\n            const dist = this.squaredDistance(p);\n            if (dist < min) {\n                ret = p;\n                min = dist;\n            }\n        });\n        return ret ? Point.create(ret) : null;\n    }\n    /**\n     * Returns the distance between the point and another point `p`.\n     */\n    distance(p) {\n        return Math.sqrt(this.squaredDistance(p));\n    }\n    /**\n     * Returns the squared distance between the point and another point `p`.\n     *\n     * Useful for distance comparisons in which real distance is not necessary\n     * (saves one `Math.sqrt()` operation).\n     */\n    squaredDistance(p) {\n        const ref = Point.create(p);\n        const dx = this.x - ref.x;\n        const dy = this.y - ref.y;\n        return dx * dx + dy * dy;\n    }\n    manhattanDistance(p) {\n        const ref = Point.create(p);\n        return Math.abs(ref.x - this.x) + Math.abs(ref.y - this.y);\n    }\n    /**\n     * Returns the magnitude of the point vector.\n     *\n     * @see http://en.wikipedia.org/wiki/Magnitude_(mathematics)\n     */\n    magnitude() {\n        return Math.sqrt(this.x * this.x + this.y * this.y) || 0.01;\n    }\n    /**\n     * Returns the angle(in degrees) between vector from this point to `p` and\n     * the x-axis.\n     */\n    theta(p = new Point()) {\n        const ref = Point.create(p);\n        const y = -(ref.y - this.y); // invert the y-axis.\n        const x = ref.x - this.x;\n        let rad = Math.atan2(y, x);\n        // Correction for III. and IV. quadrant.\n        if (rad < 0) {\n            rad = 2 * Math.PI + rad;\n        }\n        return (180 * rad) / Math.PI;\n    }\n    /**\n     * Returns the angle(in degrees) between vector from this point to `p1` and\n     * the vector from this point to `p2`.\n     *\n     * The ordering of points `p1` and `p2` is important.\n     *\n     * The function returns a value between `0` and `180` when the angle (in the\n     * direction from `p1` to `p2`) is clockwise, and a value between `180` and\n     * `360` when the angle is counterclockwise.\n     *\n     * Returns `NaN` if either of the points `p1` and `p2` is equal with this point.\n     */\n    angleBetween(p1, p2) {\n        if (this.equals(p1) || this.equals(p2)) {\n            return NaN;\n        }\n        let angle = this.theta(p2) - this.theta(p1);\n        if (angle < 0) {\n            angle += 360;\n        }\n        return angle;\n    }\n    /**\n     * Returns the angle(in degrees) between the line from `(0,0)` and this point\n     * and the line from `(0,0)` to `p`.\n     *\n     * The function returns a value between `0` and `180` when the angle (in the\n     * direction from this point to `p`) is clockwise, and a value between `180`\n     * and `360` when the angle is counterclockwise. Returns `NaN` if called from\n     * point `(0,0)` or if `p` is `(0,0)`.\n     */\n    vectorAngle(p) {\n        const zero = new Point(0, 0);\n        return zero.angleBetween(this, p);\n    }\n    /**\n     * Converts rectangular to polar coordinates.\n     */\n    toPolar(origin) {\n        this.update(Point.toPolar(this, origin));\n        return this;\n    }\n    /**\n     * Returns the change in angle(in degrees) that is the result of moving the\n     * point from its previous position to its current position.\n     *\n     * More specifically, this function computes the angle between the line from\n     * the ref point to the previous position of this point(i.e. current position\n     * `-dx`, `-dy`) and the line from the `ref` point to the current position of\n     * this point.\n     *\n     * The function returns a positive value between `0` and `180` when the angle\n     * (in the direction from previous position of this point to its current\n     * position) is clockwise, and a negative value between `0` and `-180` when\n     * the angle is counterclockwise.\n     *\n     * The function returns `0` if the previous and current positions of this\n     * point are the same (i.e. both `dx` and `dy` are `0`).\n     */\n    changeInAngle(dx, dy, ref = new Point()) {\n        // Revert the translation and measure the change in angle around x-axis.\n        return this.clone().translate(-dx, -dy).theta(ref) - this.theta(ref);\n    }\n    /**\n     * If the point lies outside the rectangle `rect`, adjust the point so that\n     * it becomes the nearest point on the boundary of `rect`.\n     */\n    adhereToRect(rect) {\n        if (!GeometryUtil.containsPoint(rect, this)) {\n            this.x = Math.min(Math.max(this.x, rect.x), rect.x + rect.width);\n            this.y = Math.min(Math.max(this.y, rect.y), rect.y + rect.height);\n        }\n        return this;\n    }\n    /**\n     * Returns the bearing(cardinal direction) between me and the given point.\n     *\n     * @see https://en.wikipedia.org/wiki/Cardinal_direction\n     */\n    bearing(p) {\n        const ref = Point.create(p);\n        const lat1 = Angle.toRad(this.y);\n        const lat2 = Angle.toRad(ref.y);\n        const lon1 = this.x;\n        const lon2 = ref.x;\n        const dLon = Angle.toRad(lon2 - lon1);\n        const y = Math.sin(dLon) * Math.cos(lat2);\n        const x = Math.cos(lat1) * Math.sin(lat2) -\n            Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLon);\n        const brng = Angle.toDeg(Math.atan2(y, x));\n        const bearings = ['NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];\n        let index = brng - 22.5;\n        if (index < 0) {\n            index += 360;\n        }\n        index = parseInt((index / 45), 10);\n        return bearings[index];\n    }\n    /**\n     * Returns the cross product of the vector from me to `p1` and the vector\n     * from me to `p2`.\n     *\n     * The left-hand rule is used because the coordinate system is left-handed.\n     */\n    cross(p1, p2) {\n        if (p1 != null && p2 != null) {\n            const a = Point.create(p1);\n            const b = Point.create(p2);\n            return (b.x - this.x) * (a.y - this.y) - (b.y - this.y) * (a.x - this.x);\n        }\n        return NaN;\n    }\n    /**\n     * Returns the dot product of this point with given other point.\n     */\n    dot(p) {\n        const ref = Point.create(p);\n        return this.x * ref.x + this.y * ref.y;\n    }\n    diff(dx, dy) {\n        if (typeof dx === 'number') {\n            return new Point(this.x - dx, this.y - dy);\n        }\n        const p = Point.create(dx);\n        return new Point(this.x - p.x, this.y - p.y);\n    }\n    /**\n     * Returns an interpolation between me and point `p` for a parametert in\n     * the closed interval `[0, 1]`.\n     */\n    lerp(p, t) {\n        const ref = Point.create(p);\n        return new Point((1 - t) * this.x + t * ref.x, (1 - t) * this.y + t * ref.y);\n    }\n    /**\n     * Normalize the point vector, scale the line segment between `(0, 0)`\n     * and the point in order for it to have the given length. If length is\n     * not specified, it is considered to be `1`; in that case, a unit vector\n     * is computed.\n     */\n    normalize(length = 1) {\n        const scale = length / this.magnitude();\n        return this.scale(scale, scale);\n    }\n    /**\n     * Moves this point along the line starting from `ref` to this point by a\n     * certain `distance`.\n     */\n    move(ref, distance) {\n        const p = Point.create(ref);\n        const rad = Angle.toRad(p.theta(this));\n        return this.translate(Math.cos(rad) * distance, -Math.sin(rad) * distance);\n    }\n    /**\n     * Returns a point that is the reflection of me with the center of inversion\n     * in `ref` point.\n     */\n    reflection(ref) {\n        return Point.create(ref).move(this, this.distance(ref));\n    }\n    snapToGrid(gx, gy) {\n        this.x = GeometryUtil.snapToGrid(this.x, gx);\n        this.y = GeometryUtil.snapToGrid(this.y, gy == null ? gx : gy);\n        return this;\n    }\n    equals(p) {\n        const ref = Point.create(p);\n        return ref != null && ref.x === this.x && ref.y === this.y;\n    }\n    clone() {\n        return Point.clone(this);\n    }\n    /**\n     * Returns the point as a simple JSON object. For example: `{ x: 0, y: 0 }`.\n     */\n    toJSON() {\n        return Point.toJSON(this);\n    }\n    serialize() {\n        return `${this.x} ${this.y}`;\n    }\n}\n(function (Point) {\n    function isPoint(instance) {\n        return instance != null && instance instanceof Point;\n    }\n    Point.isPoint = isPoint;\n})(Point || (Point = {}));\n(function (Point) {\n    function isPointLike(p) {\n        return (p != null &&\n            typeof p === 'object' &&\n            typeof p.x === 'number' &&\n            typeof p.y === 'number');\n    }\n    Point.isPointLike = isPointLike;\n    function isPointData(p) {\n        return (p != null &&\n            Array.isArray(p) &&\n            p.length === 2 &&\n            typeof p[0] === 'number' &&\n            typeof p[1] === 'number');\n    }\n    Point.isPointData = isPointData;\n})(Point || (Point = {}));\n(function (Point) {\n    function create(x, y) {\n        if (x == null || typeof x === 'number') {\n            return new Point(x, y);\n        }\n        return clone(x);\n    }\n    Point.create = create;\n    function clone(p) {\n        if (Point.isPoint(p)) {\n            return new Point(p.x, p.y);\n        }\n        if (Array.isArray(p)) {\n            return new Point(p[0], p[1]);\n        }\n        return new Point(p.x, p.y);\n    }\n    Point.clone = clone;\n    function toJSON(p) {\n        if (Point.isPoint(p)) {\n            return { x: p.x, y: p.y };\n        }\n        if (Array.isArray(p)) {\n            return { x: p[0], y: p[1] };\n        }\n        return { x: p.x, y: p.y };\n    }\n    Point.toJSON = toJSON;\n    /**\n     * Returns a new Point object from the given polar coordinates.\n     * @see http://en.wikipedia.org/wiki/Polar_coordinate_system\n     */\n    function fromPolar(r, rad, origin = new Point()) {\n        let x = Math.abs(r * Math.cos(rad));\n        let y = Math.abs(r * Math.sin(rad));\n        const org = clone(origin);\n        const deg = Angle.normalize(Angle.toDeg(rad));\n        if (deg < 90) {\n            y = -y;\n        }\n        else if (deg < 180) {\n            x = -x;\n            y = -y;\n        }\n        else if (deg < 270) {\n            x = -x;\n        }\n        return new Point(org.x + x, org.y + y);\n    }\n    Point.fromPolar = fromPolar;\n    /**\n     * Converts rectangular to polar coordinates.\n     */\n    function toPolar(point, origin = new Point()) {\n        const p = clone(point);\n        const o = clone(origin);\n        const dx = p.x - o.x;\n        const dy = p.y - o.y;\n        return new Point(Math.sqrt(dx * dx + dy * dy), // r\n        Angle.toRad(o.theta(p)));\n    }\n    Point.toPolar = toPolar;\n    function equals(p1, p2) {\n        if (p1 === p2) {\n            return true;\n        }\n        if (p1 != null && p2 != null) {\n            return p1.x === p2.x && p1.y === p2.y;\n        }\n        return false;\n    }\n    Point.equals = equals;\n    function equalPoints(p1, p2) {\n        if ((p1 == null && p2 != null) ||\n            (p1 != null && p2 == null) ||\n            (p1 != null && p2 != null && p1.length !== p2.length)) {\n            return false;\n        }\n        if (p1 != null && p2 != null) {\n            for (let i = 0, ii = p1.length; i < ii; i += 1) {\n                if (!equals(p1[i], p2[i])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n    Point.equalPoints = equalPoints;\n    /**\n     * Returns a point with random coordinates that fall within the range\n     * `[x1, x2]` and `[y1, y2]`.\n     */\n    function random(x1, x2, y1, y2) {\n        return new Point(GeometryUtil.random(x1, x2), GeometryUtil.random(y1, y2));\n    }\n    Point.random = random;\n    function rotate(point, angle, center) {\n        const rad = Angle.toRad(Angle.normalize(-angle));\n        const sin = Math.sin(rad);\n        const cos = Math.cos(rad);\n        return rotateEx(point, cos, sin, center);\n    }\n    Point.rotate = rotate;\n    function rotateEx(point, cos, sin, center = new Point()) {\n        const source = clone(point);\n        const origin = clone(center);\n        const dx = source.x - origin.x;\n        const dy = source.y - origin.y;\n        const x1 = dx * cos - dy * sin;\n        const y1 = dy * cos + dx * sin;\n        return new Point(x1 + origin.x, y1 + origin.y);\n    }\n    Point.rotateEx = rotateEx;\n})(Point || (Point = {}));\n//# sourceMappingURL=point.js.map","import { GeometryUtil } from './util';\nimport { Angle } from './angle';\nimport { Line } from './line';\nimport { Point } from './point';\nimport { Geometry } from './geometry';\nexport class Rectangle extends Geometry {\n    get left() {\n        return this.x;\n    }\n    get top() {\n        return this.y;\n    }\n    get right() {\n        return this.x + this.width;\n    }\n    get bottom() {\n        return this.y + this.height;\n    }\n    get origin() {\n        return new Point(this.x, this.y);\n    }\n    get topLeft() {\n        return new Point(this.x, this.y);\n    }\n    get topCenter() {\n        return new Point(this.x + this.width / 2, this.y);\n    }\n    get topRight() {\n        return new Point(this.x + this.width, this.y);\n    }\n    get center() {\n        return new Point(this.x + this.width / 2, this.y + this.height / 2);\n    }\n    get bottomLeft() {\n        return new Point(this.x, this.y + this.height);\n    }\n    get bottomCenter() {\n        return new Point(this.x + this.width / 2, this.y + this.height);\n    }\n    get bottomRight() {\n        return new Point(this.x + this.width, this.y + this.height);\n    }\n    get corner() {\n        return new Point(this.x + this.width, this.y + this.height);\n    }\n    get rightMiddle() {\n        return new Point(this.x + this.width, this.y + this.height / 2);\n    }\n    get leftMiddle() {\n        return new Point(this.x, this.y + this.height / 2);\n    }\n    get topLine() {\n        return new Line(this.topLeft, this.topRight);\n    }\n    get rightLine() {\n        return new Line(this.topRight, this.bottomRight);\n    }\n    get bottomLine() {\n        return new Line(this.bottomLeft, this.bottomRight);\n    }\n    get leftLine() {\n        return new Line(this.topLeft, this.bottomLeft);\n    }\n    constructor(x, y, width, height) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n        this.width = width == null ? 0 : width;\n        this.height = height == null ? 0 : height;\n    }\n    getOrigin() {\n        return this.origin;\n    }\n    getTopLeft() {\n        return this.topLeft;\n    }\n    getTopCenter() {\n        return this.topCenter;\n    }\n    getTopRight() {\n        return this.topRight;\n    }\n    getCenter() {\n        return this.center;\n    }\n    getCenterX() {\n        return this.x + this.width / 2;\n    }\n    getCenterY() {\n        return this.y + this.height / 2;\n    }\n    getBottomLeft() {\n        return this.bottomLeft;\n    }\n    getBottomCenter() {\n        return this.bottomCenter;\n    }\n    getBottomRight() {\n        return this.bottomRight;\n    }\n    getCorner() {\n        return this.corner;\n    }\n    getRightMiddle() {\n        return this.rightMiddle;\n    }\n    getLeftMiddle() {\n        return this.leftMiddle;\n    }\n    getTopLine() {\n        return this.topLine;\n    }\n    getRightLine() {\n        return this.rightLine;\n    }\n    getBottomLine() {\n        return this.bottomLine;\n    }\n    getLeftLine() {\n        return this.leftLine;\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the rectangle.\n     *\n     * If `angle` is specified, the bounding box calculation will take into\n     * account the rotation of the rectangle by angle degrees around its center.\n     */\n    bbox(angle) {\n        if (!angle) {\n            return this.clone();\n        }\n        const rad = Angle.toRad(angle);\n        const st = Math.abs(Math.sin(rad));\n        const ct = Math.abs(Math.cos(rad));\n        const w = this.width * ct + this.height * st;\n        const h = this.width * st + this.height * ct;\n        return new Rectangle(this.x + (this.width - w) / 2, this.y + (this.height - h) / 2, w, h);\n    }\n    round(precision = 0) {\n        this.x = GeometryUtil.round(this.x, precision);\n        this.y = GeometryUtil.round(this.y, precision);\n        this.width = GeometryUtil.round(this.width, precision);\n        this.height = GeometryUtil.round(this.height, precision);\n        return this;\n    }\n    add(x, y, width, height) {\n        const rect = Rectangle.create(x, y, width, height);\n        const minX = Math.min(this.x, rect.x);\n        const minY = Math.min(this.y, rect.y);\n        const maxX = Math.max(this.x + this.width, rect.x + rect.width);\n        const maxY = Math.max(this.y + this.height, rect.y + rect.height);\n        this.x = minX;\n        this.y = minY;\n        this.width = maxX - minX;\n        this.height = maxY - minY;\n        return this;\n    }\n    update(x, y, width, height) {\n        const rect = Rectangle.create(x, y, width, height);\n        this.x = rect.x;\n        this.y = rect.y;\n        this.width = rect.width;\n        this.height = rect.height;\n        return this;\n    }\n    inflate(dx, dy) {\n        const w = dx;\n        const h = dy != null ? dy : dx;\n        this.x -= w;\n        this.y -= h;\n        this.width += 2 * w;\n        this.height += 2 * h;\n        return this;\n    }\n    snapToGrid(gx, gy) {\n        const origin = this.origin.snapToGrid(gx, gy);\n        const corner = this.corner.snapToGrid(gx, gy);\n        this.x = origin.x;\n        this.y = origin.y;\n        this.width = corner.x - origin.x;\n        this.height = corner.y - origin.y;\n        return this;\n    }\n    translate(tx, ty) {\n        const p = Point.create(tx, ty);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    scale(sx, sy, origin = new Point()) {\n        const pos = this.origin.scale(sx, sy, origin);\n        this.x = pos.x;\n        this.y = pos.y;\n        this.width *= sx;\n        this.height *= sy;\n        return this;\n    }\n    rotate(degree, center = this.getCenter()) {\n        if (degree !== 0) {\n            const rad = Angle.toRad(degree);\n            const cos = Math.cos(rad);\n            const sin = Math.sin(rad);\n            let p1 = this.getOrigin();\n            let p2 = this.getTopRight();\n            let p3 = this.getBottomRight();\n            let p4 = this.getBottomLeft();\n            p1 = Point.rotateEx(p1, cos, sin, center);\n            p2 = Point.rotateEx(p2, cos, sin, center);\n            p3 = Point.rotateEx(p3, cos, sin, center);\n            p4 = Point.rotateEx(p4, cos, sin, center);\n            const rect = new Rectangle(p1.x, p1.y, 0, 0);\n            rect.add(p2.x, p2.y, 0, 0);\n            rect.add(p3.x, p3.y, 0, 0);\n            rect.add(p4.x, p4.y, 0, 0);\n            this.update(rect);\n        }\n        return this;\n    }\n    rotate90() {\n        const t = (this.width - this.height) / 2;\n        this.x += t;\n        this.y -= t;\n        const tmp = this.width;\n        this.width = this.height;\n        this.height = tmp;\n        return this;\n    }\n    /**\n     * Translates the rectangle by `rect.x` and `rect.y` and expand it by\n     * `rect.width` and `rect.height`.\n     */\n    moveAndExpand(rect) {\n        const ref = Rectangle.clone(rect);\n        this.x += ref.x || 0;\n        this.y += ref.y || 0;\n        this.width += ref.width || 0;\n        this.height += ref.height || 0;\n        return this;\n    }\n    /**\n     * Returns an object where `sx` and `sy` give the maximum scaling that can be\n     * applied to the rectangle so that it would still fit into `limit`. If\n     * `origin` is specified, the rectangle is scaled around it; otherwise, it is\n     * scaled around its center.\n     */\n    getMaxScaleToFit(limit, origin = this.center) {\n        const rect = Rectangle.clone(limit);\n        const ox = origin.x;\n        const oy = origin.y;\n        // Find the maximal possible scale for all corners, so when the scale\n        // is applied the point is still inside the rectangle.\n        let sx1 = Infinity;\n        let sx2 = Infinity;\n        let sx3 = Infinity;\n        let sx4 = Infinity;\n        let sy1 = Infinity;\n        let sy2 = Infinity;\n        let sy3 = Infinity;\n        let sy4 = Infinity;\n        // Top Left\n        const p1 = rect.topLeft;\n        if (p1.x < ox) {\n            sx1 = (this.x - ox) / (p1.x - ox);\n        }\n        if (p1.y < oy) {\n            sy1 = (this.y - oy) / (p1.y - oy);\n        }\n        // Bottom Right\n        const p2 = rect.bottomRight;\n        if (p2.x > ox) {\n            sx2 = (this.x + this.width - ox) / (p2.x - ox);\n        }\n        if (p2.y > oy) {\n            sy2 = (this.y + this.height - oy) / (p2.y - oy);\n        }\n        // Top Right\n        const p3 = rect.topRight;\n        if (p3.x > ox) {\n            sx3 = (this.x + this.width - ox) / (p3.x - ox);\n        }\n        if (p3.y < oy) {\n            sy3 = (this.y - oy) / (p3.y - oy);\n        }\n        // Bottom Left\n        const p4 = rect.bottomLeft;\n        if (p4.x < ox) {\n            sx4 = (this.x - ox) / (p4.x - ox);\n        }\n        if (p4.y > oy) {\n            sy4 = (this.y + this.height - oy) / (p4.y - oy);\n        }\n        return {\n            sx: Math.min(sx1, sx2, sx3, sx4),\n            sy: Math.min(sy1, sy2, sy3, sy4),\n        };\n    }\n    /**\n     * Returns a number that specifies the maximum scaling that can be applied to\n     * the rectangle along both axes so that it would still fit into `limit`. If\n     * `origin` is specified, the rectangle is scaled around it; otherwise, it is\n     * scaled around its center.\n     */\n    getMaxUniformScaleToFit(limit, origin = this.center) {\n        const scale = this.getMaxScaleToFit(limit, origin);\n        return Math.min(scale.sx, scale.sy);\n    }\n    containsPoint(x, y) {\n        return GeometryUtil.containsPoint(this, Point.create(x, y));\n    }\n    containsRect(x, y, width, height) {\n        const b = Rectangle.create(x, y, width, height);\n        const x1 = this.x;\n        const y1 = this.y;\n        const w1 = this.width;\n        const h1 = this.height;\n        const x2 = b.x;\n        const y2 = b.y;\n        const w2 = b.width;\n        const h2 = b.height;\n        // one of the dimensions is 0\n        if (w1 === 0 || h1 === 0 || w2 === 0 || h2 === 0) {\n            return false;\n        }\n        return x2 >= x1 && y2 >= y1 && x2 + w2 <= x1 + w1 && y2 + h2 <= y1 + h1;\n    }\n    /**\n     * Returns an array of the intersection points of the rectangle and the line.\n     * Return `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const rectLines = [\n            this.topLine,\n            this.rightLine,\n            this.bottomLine,\n            this.leftLine,\n        ];\n        const points = [];\n        const dedupeArr = [];\n        rectLines.forEach((l) => {\n            const p = line.intersectsWithLine(l);\n            if (p !== null && dedupeArr.indexOf(p.toString()) < 0) {\n                points.push(p);\n                dedupeArr.push(p.toString());\n            }\n        });\n        return points.length > 0 ? points : null;\n    }\n    /**\n     * Returns the point on the boundary of the rectangle that is the intersection\n     * of the rectangle with a line starting in the center the rectangle ending in\n     * the point `p`.\n     *\n     * If `angle` is specified, the intersection will take into account the\n     * rotation of the rectangle by `angle` degrees around its center.\n     */\n    intersectsWithLineFromCenterToPoint(p, angle) {\n        const ref = Point.clone(p);\n        const center = this.center;\n        let result = null;\n        if (angle != null && angle !== 0) {\n            ref.rotate(angle, center);\n        }\n        const sides = [this.topLine, this.rightLine, this.bottomLine, this.leftLine];\n        const connector = new Line(center, ref);\n        for (let i = sides.length - 1; i >= 0; i -= 1) {\n            const intersection = sides[i].intersectsWithLine(connector);\n            if (intersection !== null) {\n                result = intersection;\n                break;\n            }\n        }\n        if (result && angle != null && angle !== 0) {\n            result.rotate(-angle, center);\n        }\n        return result;\n    }\n    intersectsWithRect(x, y, width, height) {\n        const ref = Rectangle.create(x, y, width, height);\n        // no intersection\n        if (!this.isIntersectWithRect(ref)) {\n            return null;\n        }\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        const xx = Math.max(myOrigin.x, rOrigin.x);\n        const yy = Math.max(myOrigin.y, rOrigin.y);\n        return new Rectangle(xx, yy, Math.min(myCorner.x, rCorner.x) - xx, Math.min(myCorner.y, rCorner.y) - yy);\n    }\n    isIntersectWithRect(x, y, width, height) {\n        const ref = Rectangle.create(x, y, width, height);\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        if (rCorner.x <= myOrigin.x ||\n            rCorner.y <= myOrigin.y ||\n            rOrigin.x >= myCorner.x ||\n            rOrigin.y >= myCorner.y) {\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Normalize the rectangle, i.e. make it so that it has non-negative\n     * width and height. If width is less than `0`, the function swaps left and\n     * right corners and if height is less than `0`, the top and bottom corners\n     * are swapped.\n     */\n    normalize() {\n        let newx = this.x;\n        let newy = this.y;\n        let newwidth = this.width;\n        let newheight = this.height;\n        if (this.width < 0) {\n            newx = this.x + this.width;\n            newwidth = -this.width;\n        }\n        if (this.height < 0) {\n            newy = this.y + this.height;\n            newheight = -this.height;\n        }\n        this.x = newx;\n        this.y = newy;\n        this.width = newwidth;\n        this.height = newheight;\n        return this;\n    }\n    /**\n     * Returns a rectangle that is a union of this rectangle and rectangle `rect`.\n     */\n    union(rect) {\n        const ref = Rectangle.clone(rect);\n        const myOrigin = this.origin;\n        const myCorner = this.corner;\n        const rOrigin = ref.origin;\n        const rCorner = ref.corner;\n        const originX = Math.min(myOrigin.x, rOrigin.x);\n        const originY = Math.min(myOrigin.y, rOrigin.y);\n        const cornerX = Math.max(myCorner.x, rCorner.x);\n        const cornerY = Math.max(myCorner.y, rCorner.y);\n        return new Rectangle(originX, originY, cornerX - originX, cornerY - originY);\n    }\n    /**\n     * Returns a string (\"top\", \"left\", \"right\" or \"bottom\") denoting the side of\n     * the rectangle which is nearest to the point `p`.\n     */\n    getNearestSideToPoint(p) {\n        const ref = Point.clone(p);\n        const distLeft = ref.x - this.x;\n        const distRight = this.x + this.width - ref.x;\n        const distTop = ref.y - this.y;\n        const distBottom = this.y + this.height - ref.y;\n        let closest = distLeft;\n        let side = 'left';\n        if (distRight < closest) {\n            closest = distRight;\n            side = 'right';\n        }\n        if (distTop < closest) {\n            closest = distTop;\n            side = 'top';\n        }\n        if (distBottom < closest) {\n            side = 'bottom';\n        }\n        return side;\n    }\n    /**\n     * Returns a point on the boundary of the rectangle nearest to the point `p`.\n     */\n    getNearestPointToPoint(p) {\n        const ref = Point.clone(p);\n        if (this.containsPoint(ref)) {\n            const side = this.getNearestSideToPoint(ref);\n            if (side === 'left') {\n                return new Point(this.x, ref.y);\n            }\n            if (side === 'top') {\n                return new Point(ref.x, this.y);\n            }\n            if (side === 'right') {\n                return new Point(this.x + this.width, ref.y);\n            }\n            if (side === 'bottom') {\n                return new Point(ref.x, this.y + this.height);\n            }\n        }\n        return ref.adhereToRect(this);\n    }\n    equals(rect) {\n        return (rect != null &&\n            rect.x === this.x &&\n            rect.y === this.y &&\n            rect.width === this.width &&\n            rect.height === this.height);\n    }\n    clone() {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    }\n    toJSON() {\n        return { x: this.x, y: this.y, width: this.width, height: this.height };\n    }\n    serialize() {\n        return `${this.x} ${this.y} ${this.width} ${this.height}`;\n    }\n}\n(function (Rectangle) {\n    function isRectangle(instance) {\n        return instance != null && instance instanceof Rectangle;\n    }\n    Rectangle.isRectangle = isRectangle;\n})(Rectangle || (Rectangle = {}));\n(function (Rectangle) {\n    function isRectangleLike(o) {\n        return (o != null &&\n            typeof o === 'object' &&\n            typeof o.x === 'number' &&\n            typeof o.y === 'number' &&\n            typeof o.width === 'number' &&\n            typeof o.height === 'number');\n    }\n    Rectangle.isRectangleLike = isRectangleLike;\n})(Rectangle || (Rectangle = {}));\n(function (Rectangle) {\n    function create(x, y, width, height) {\n        if (x == null || typeof x === 'number') {\n            return new Rectangle(x, y, width, height);\n        }\n        return clone(x);\n    }\n    Rectangle.create = create;\n    function clone(rect) {\n        if (Rectangle.isRectangle(rect)) {\n            return rect.clone();\n        }\n        if (Array.isArray(rect)) {\n            return new Rectangle(rect[0], rect[1], rect[2], rect[3]);\n        }\n        return new Rectangle(rect.x, rect.y, rect.width, rect.height);\n    }\n    Rectangle.clone = clone;\n    /**\n     * Returns a new rectangle from the given ellipse.\n     */\n    function fromEllipse(ellipse) {\n        return new Rectangle(ellipse.x - ellipse.a, ellipse.y - ellipse.b, 2 * ellipse.a, 2 * ellipse.b);\n    }\n    Rectangle.fromEllipse = fromEllipse;\n    function fromSize(size) {\n        return new Rectangle(0, 0, size.width, size.height);\n    }\n    Rectangle.fromSize = fromSize;\n    function fromPositionAndSize(pos, size) {\n        return new Rectangle(pos.x, pos.y, size.width, size.height);\n    }\n    Rectangle.fromPositionAndSize = fromPositionAndSize;\n})(Rectangle || (Rectangle = {}));\n//# sourceMappingURL=rectangle.js.map","import { Point } from './point';\nimport { Geometry } from './geometry';\nimport { Rectangle } from './rectangle';\nexport class Line extends Geometry {\n    get center() {\n        return new Point((this.start.x + this.end.x) / 2, (this.start.y + this.end.y) / 2);\n    }\n    constructor(x1, y1, x2, y2) {\n        super();\n        if (typeof x1 === 'number' && typeof y1 === 'number') {\n            this.start = new Point(x1, y1);\n            this.end = new Point(x2, y2);\n        }\n        else {\n            this.start = Point.create(x1);\n            this.end = Point.create(y1);\n        }\n    }\n    getCenter() {\n        return this.center;\n    }\n    /**\n     * Rounds the line to the given `precision`.\n     */\n    round(precision = 0) {\n        this.start.round(precision);\n        this.end.round(precision);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.start.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.start.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    /**\n     * Rotate the line by `angle` around `origin`.\n     */\n    rotate(angle, origin) {\n        this.start.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    /**\n     * Scale the line by `sx` and `sy` about the given `origin`. If origin is not\n     * specified, the line is scaled around `0,0`.\n     */\n    scale(sx, sy, origin) {\n        this.start.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    /**\n     * Returns the length of the line.\n     */\n    length() {\n        return Math.sqrt(this.squaredLength());\n    }\n    /**\n     * Useful for distance comparisons in which real length is not necessary\n     * (saves one `Math.sqrt()` operation).\n     */\n    squaredLength() {\n        const dx = this.start.x - this.end.x;\n        const dy = this.start.y - this.end.y;\n        return dx * dx + dy * dy;\n    }\n    /**\n     * Scale the line so that it has the requested length. The start point of\n     * the line is preserved.\n     */\n    setLength(length) {\n        const total = this.length();\n        if (!total) {\n            return this;\n        }\n        const scale = length / total;\n        return this.scale(scale, scale, this.start);\n    }\n    parallel(distance) {\n        const line = this.clone();\n        if (!line.isDifferentiable()) {\n            return line;\n        }\n        const { start, end } = line;\n        const eRef = start.clone().rotate(270, end);\n        const sRef = end.clone().rotate(90, start);\n        start.move(sRef, distance);\n        end.move(eRef, distance);\n        return line;\n    }\n    /**\n     * Returns the vector of the line with length equal to length of the line.\n     */\n    vector() {\n        return new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n    }\n    /**\n     * Returns the angle of incline of the line.\n     *\n     * The function returns `NaN` if the start and end endpoints of the line\n     * both lie at the same coordinates(it is impossible to determine the angle\n     * of incline of a line that appears to be a point). The\n     * `line.isDifferentiable()` function may be used in advance to determine\n     * whether the angle of incline can be computed for a given line.\n     */\n    angle() {\n        const ref = new Point(this.start.x + 1, this.start.y);\n        return this.start.angleBetween(this.end, ref);\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the line.\n     */\n    bbox() {\n        const left = Math.min(this.start.x, this.end.x);\n        const top = Math.min(this.start.y, this.end.y);\n        const right = Math.max(this.start.x, this.end.x);\n        const bottom = Math.max(this.start.y, this.end.y);\n        return new Rectangle(left, top, right - left, bottom - top);\n    }\n    /**\n     * Returns the bearing (cardinal direction) of the line.\n     *\n     * The return value is one of the following strings:\n     * 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW' and 'N'.\n     *\n     * The function returns 'N' if the two endpoints of the line are coincident.\n     */\n    bearing() {\n        return this.start.bearing(this.end);\n    }\n    /**\n     * Returns the point on the line that lies closest to point `p`.\n     */\n    closestPoint(p) {\n        return this.pointAt(this.closestPointNormalizedLength(p));\n    }\n    /**\n     * Returns the length of the line up to the point that lies closest to point `p`.\n     */\n    closestPointLength(p) {\n        return this.closestPointNormalizedLength(p) * this.length();\n    }\n    /**\n     * Returns a line that is tangent to the line at the point that lies closest\n     * to point `p`.\n     */\n    closestPointTangent(p) {\n        return this.tangentAt(this.closestPointNormalizedLength(p));\n    }\n    /**\n     * Returns the normalized length (distance from the start of the line / total\n     * line length) of the line up to the point that lies closest to point.\n     */\n    closestPointNormalizedLength(p) {\n        const product = this.vector().dot(new Line(this.start, p).vector());\n        const normalized = Math.min(1, Math.max(0, product / this.squaredLength()));\n        // normalized returns `NaN` if this line has zero length\n        if (Number.isNaN(normalized)) {\n            return 0;\n        }\n        return normalized;\n    }\n    /**\n     * Returns a point on the line that lies `rate` (normalized length) away from\n     * the beginning of the line.\n     */\n    pointAt(ratio) {\n        const start = this.start;\n        const end = this.end;\n        if (ratio <= 0) {\n            return start.clone();\n        }\n        if (ratio >= 1) {\n            return end.clone();\n        }\n        return start.lerp(end, ratio);\n    }\n    /**\n     * Returns a point on the line that lies length away from the beginning of\n     * the line.\n     */\n    pointAtLength(length) {\n        const start = this.start;\n        const end = this.end;\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false; // start calculation from end point\n            length = -length; // eslint-disable-line\n        }\n        const total = this.length();\n        if (length >= total) {\n            return fromStart ? end.clone() : start.clone();\n        }\n        const rate = (fromStart ? length : total - length) / total;\n        return this.pointAt(rate);\n    }\n    /**\n     * Divides the line into two lines at the point that lies `rate` (normalized\n     * length) away from the beginning of the line.\n     */\n    divideAt(ratio) {\n        const dividerPoint = this.pointAt(ratio);\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end),\n        ];\n    }\n    /**\n     * Divides the line into two lines at the point that lies length away from\n     * the beginning of the line.\n     */\n    divideAtLength(length) {\n        const dividerPoint = this.pointAtLength(length);\n        return [\n            new Line(this.start, dividerPoint),\n            new Line(dividerPoint, this.end),\n        ];\n    }\n    /**\n     * Returns `true` if the point `p` lies on the line. Return `false` otherwise.\n     */\n    containsPoint(p) {\n        const start = this.start;\n        const end = this.end;\n        // cross product of 0 indicates that this line and\n        // the vector to `p` are collinear.\n        if (start.cross(p, end) !== 0) {\n            return false;\n        }\n        const length = this.length();\n        if (new Line(start, p).length() > length) {\n            return false;\n        }\n        if (new Line(p, end).length() > length) {\n            return false;\n        }\n        return true;\n    }\n    intersect(shape, options) {\n        const ret = shape.intersectsWithLine(this, options);\n        if (ret) {\n            return Array.isArray(ret) ? ret : [ret];\n        }\n        return null;\n    }\n    /**\n     * Returns the intersection point of the line with another line. Returns\n     * `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const pt1Dir = new Point(this.end.x - this.start.x, this.end.y - this.start.y);\n        const pt2Dir = new Point(line.end.x - line.start.x, line.end.y - line.start.y);\n        const det = pt1Dir.x * pt2Dir.y - pt1Dir.y * pt2Dir.x;\n        const deltaPt = new Point(line.start.x - this.start.x, line.start.y - this.start.y);\n        const alpha = deltaPt.x * pt2Dir.y - deltaPt.y * pt2Dir.x;\n        const beta = deltaPt.x * pt1Dir.y - deltaPt.y * pt1Dir.x;\n        if (det === 0 || alpha * det < 0 || beta * det < 0) {\n            return null;\n        }\n        if (det > 0) {\n            if (alpha > det || beta > det) {\n                return null;\n            }\n        }\n        else if (alpha < det || beta < det) {\n            return null;\n        }\n        return new Point(this.start.x + (alpha * pt1Dir.x) / det, this.start.y + (alpha * pt1Dir.y) / det);\n    }\n    /**\n     * Returns `true` if a tangent line can be found for the line.\n     *\n     * Tangents cannot be found if both of the line endpoints are coincident\n     * (the line appears to be a point).\n     */\n    isDifferentiable() {\n        return !this.start.equals(this.end);\n    }\n    /**\n     * Returns the perpendicular distance between the line and point. The\n     * distance is positive if the point lies to the right of the line, negative\n     * if the point lies to the left of the line, and `0` if the point lies on\n     * the line.\n     */\n    pointOffset(p) {\n        const ref = Point.clone(p);\n        const start = this.start;\n        const end = this.end;\n        const determinant = (end.x - start.x) * (ref.y - start.y) -\n            (end.y - start.y) * (ref.x - start.x);\n        return determinant / this.length();\n    }\n    pointSquaredDistance(x, y) {\n        const p = Point.create(x, y);\n        return this.closestPoint(p).squaredDistance(p);\n    }\n    pointDistance(x, y) {\n        const p = Point.create(x, y);\n        return this.closestPoint(p).distance(p);\n    }\n    /**\n     * Returns a line tangent to the line at point that lies `rate` (normalized\n     * length) away from the beginning of the line.\n     */\n    tangentAt(ratio) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const start = this.start;\n        const end = this.end;\n        const tangentStart = this.pointAt(ratio);\n        const tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y);\n        return tangentLine;\n    }\n    /**\n     * Returns a line tangent to the line at point that lies `length` away from\n     * the beginning of the line.\n     */\n    tangentAtLength(length) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const start = this.start;\n        const end = this.end;\n        const tangentStart = this.pointAtLength(length);\n        const tangentLine = new Line(start, end);\n        tangentLine.translate(tangentStart.x - start.x, tangentStart.y - start.y);\n        return tangentLine;\n    }\n    relativeCcw(x, y) {\n        const ref = Point.create(x, y);\n        let dx1 = ref.x - this.start.x;\n        let dy1 = ref.y - this.start.y;\n        const dx2 = this.end.x - this.start.x;\n        const dy2 = this.end.y - this.start.y;\n        let ccw = dx1 * dy2 - dy1 * dx2;\n        if (ccw === 0) {\n            ccw = dx1 * dx2 + dy1 * dy2;\n            if (ccw > 0.0) {\n                dx1 -= dx2;\n                dy1 -= dy2;\n                ccw = dx1 * dx2 + dy1 * dy2;\n                if (ccw < 0.0) {\n                    ccw = 0.0;\n                }\n            }\n        }\n        return ccw < 0.0 ? -1 : ccw > 0.0 ? 1 : 0;\n    }\n    /**\n     * Return `true` if the line equals the other line.\n     */\n    equals(l) {\n        return (l != null &&\n            this.start.x === l.start.x &&\n            this.start.y === l.start.y &&\n            this.end.x === l.end.x &&\n            this.end.y === l.end.y);\n    }\n    /**\n     * Returns another line which is a clone of the line.\n     */\n    clone() {\n        return new Line(this.start, this.end);\n    }\n    toJSON() {\n        return { start: this.start.toJSON(), end: this.end.toJSON() };\n    }\n    serialize() {\n        return [this.start.serialize(), this.end.serialize()].join(' ');\n    }\n}\n(function (Line) {\n    function isLine(instance) {\n        return instance != null && instance instanceof Line;\n    }\n    Line.isLine = isLine;\n})(Line || (Line = {}));\n//# sourceMappingURL=line.js.map","import { Point } from './point';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Ellipse extends Geometry {\n    get center() {\n        return new Point(this.x, this.y);\n    }\n    constructor(x, y, a, b) {\n        super();\n        this.x = x == null ? 0 : x;\n        this.y = y == null ? 0 : y;\n        this.a = a == null ? 0 : a;\n        this.b = b == null ? 0 : b;\n    }\n    /**\n     * Returns a rectangle that is the bounding box of the ellipse.\n     */\n    bbox() {\n        return Rectangle.fromEllipse(this);\n    }\n    /**\n     * Returns a point that is the center of the ellipse.\n     */\n    getCenter() {\n        return this.center;\n    }\n    inflate(dx, dy) {\n        const w = dx;\n        const h = dy != null ? dy : dx;\n        this.a += 2 * w;\n        this.b += 2 * h;\n        return this;\n    }\n    normalizedDistance(x, y) {\n        const ref = Point.create(x, y);\n        const dx = ref.x - this.x;\n        const dy = ref.y - this.y;\n        const a = this.a;\n        const b = this.b;\n        return (dx * dx) / (a * a) + (dy * dy) / (b * b);\n    }\n    containsPoint(x, y) {\n        return this.normalizedDistance(x, y) <= 1;\n    }\n    /**\n     * Returns an array of the intersection points of the ellipse and the line.\n     * Returns `null` if no intersection exists.\n     */\n    intersectsWithLine(line) {\n        const intersections = [];\n        const rx = this.a;\n        const ry = this.b;\n        const a1 = line.start;\n        const a2 = line.end;\n        const dir = line.vector();\n        const diff = a1.diff(new Point(this.x, this.y));\n        const mDir = new Point(dir.x / (rx * rx), dir.y / (ry * ry));\n        const mDiff = new Point(diff.x / (rx * rx), diff.y / (ry * ry));\n        const a = dir.dot(mDir);\n        const b = dir.dot(mDiff);\n        const c = diff.dot(mDiff) - 1.0;\n        const d = b * b - a * c;\n        if (d < 0) {\n            return null;\n        }\n        if (d > 0) {\n            const root = Math.sqrt(d);\n            const ta = (-b - root) / a;\n            const tb = (-b + root) / a;\n            if ((ta < 0 || ta > 1) && (tb < 0 || tb > 1)) {\n                // outside\n                return null;\n            }\n            if (ta >= 0 && ta <= 1) {\n                intersections.push(a1.lerp(a2, ta));\n            }\n            if (tb >= 0 && tb <= 1) {\n                intersections.push(a1.lerp(a2, tb));\n            }\n        }\n        else {\n            const t = -b / a;\n            if (t >= 0 && t <= 1) {\n                intersections.push(a1.lerp(a2, t));\n            }\n            else {\n                // outside\n                return null;\n            }\n        }\n        return intersections;\n    }\n    /**\n     * Returns the point on the boundary of the ellipse that is the\n     * intersection of the ellipse with a line starting in the center\n     * of the ellipse ending in the point `p`.\n     *\n     * If angle is specified, the intersection will take into account\n     * the rotation of the ellipse by angle degrees around its center.\n     */\n    intersectsWithLineFromCenterToPoint(p, angle = 0) {\n        const ref = Point.clone(p);\n        if (angle) {\n            ref.rotate(angle, this.getCenter());\n        }\n        const dx = ref.x - this.x;\n        const dy = ref.y - this.y;\n        let result;\n        if (dx === 0) {\n            result = this.bbox().getNearestPointToPoint(ref);\n            if (angle) {\n                return result.rotate(-angle, this.getCenter());\n            }\n            return result;\n        }\n        const m = dy / dx;\n        const mSquared = m * m;\n        const aSquared = this.a * this.a;\n        const bSquared = this.b * this.b;\n        let x = Math.sqrt(1 / (1 / aSquared + mSquared / bSquared));\n        x = dx < 0 ? -x : x;\n        const y = m * x;\n        result = new Point(this.x + x, this.y + y);\n        if (angle) {\n            return result.rotate(-angle, this.getCenter());\n        }\n        return result;\n    }\n    /**\n     * Returns the angle between the x-axis and the tangent from a point. It is\n     * valid for points lying on the ellipse boundary only.\n     */\n    tangentTheta(p) {\n        const ref = Point.clone(p);\n        const x0 = ref.x;\n        const y0 = ref.y;\n        const a = this.a;\n        const b = this.b;\n        const center = this.bbox().center;\n        const cx = center.x;\n        const cy = center.y;\n        const refPointDelta = 30;\n        const q1 = x0 > center.x + a / 2;\n        const q3 = x0 < center.x - a / 2;\n        let x;\n        let y;\n        if (q1 || q3) {\n            y = x0 > center.x ? y0 - refPointDelta : y0 + refPointDelta;\n            x =\n                (a * a) / (x0 - cx) -\n                    (a * a * (y0 - cy) * (y - cy)) / (b * b * (x0 - cx)) +\n                    cx;\n        }\n        else {\n            x = y0 > center.y ? x0 + refPointDelta : x0 - refPointDelta;\n            y =\n                (b * b) / (y0 - cy) -\n                    (b * b * (x0 - cx) * (x - cx)) / (a * a * (y0 - cy)) +\n                    cy;\n        }\n        return new Point(x, y).theta(ref);\n    }\n    scale(sx, sy) {\n        this.a *= sx;\n        this.b *= sy;\n        return this;\n    }\n    rotate(angle, origin) {\n        const rect = Rectangle.fromEllipse(this);\n        rect.rotate(angle, origin);\n        const ellipse = Ellipse.fromRect(rect);\n        this.a = ellipse.a;\n        this.b = ellipse.b;\n        this.x = ellipse.x;\n        this.y = ellipse.y;\n        return this;\n    }\n    translate(dx, dy) {\n        const p = Point.create(dx, dy);\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    }\n    equals(ellipse) {\n        return (ellipse != null &&\n            ellipse.x === this.x &&\n            ellipse.y === this.y &&\n            ellipse.a === this.a &&\n            ellipse.b === this.b);\n    }\n    clone() {\n        return new Ellipse(this.x, this.y, this.a, this.b);\n    }\n    toJSON() {\n        return { x: this.x, y: this.y, a: this.a, b: this.b };\n    }\n    serialize() {\n        return `${this.x} ${this.y} ${this.a} ${this.b}`;\n    }\n}\n(function (Ellipse) {\n    function isEllipse(instance) {\n        return instance != null && instance instanceof Ellipse;\n    }\n    Ellipse.isEllipse = isEllipse;\n})(Ellipse || (Ellipse = {}));\n(function (Ellipse) {\n    function create(x, y, a, b) {\n        if (x == null || typeof x === 'number') {\n            return new Ellipse(x, y, a, b);\n        }\n        return parse(x);\n    }\n    Ellipse.create = create;\n    function parse(e) {\n        if (Ellipse.isEllipse(e)) {\n            return e.clone();\n        }\n        if (Array.isArray(e)) {\n            return new Ellipse(e[0], e[1], e[2], e[3]);\n        }\n        return new Ellipse(e.x, e.y, e.a, e.b);\n    }\n    Ellipse.parse = parse;\n    function fromRect(rect) {\n        const center = rect.center;\n        return new Ellipse(center.x, center.y, rect.width / 2, rect.height / 2);\n    }\n    Ellipse.fromRect = fromRect;\n})(Ellipse || (Ellipse = {}));\n//# sourceMappingURL=ellipse.js.map","/* eslint-disable default-param-last */\nimport { Point } from '../point';\nconst regexSupportedData = new RegExp(`^[\\\\s\\\\dLMCZz,.]*$`); // eslint-disable-line prefer-regex-literals\nexport function isValid(data) {\n    if (typeof data !== 'string') {\n        return false;\n    }\n    return regexSupportedData.test(data);\n}\n/**\n * Returns the remainder of division of `n` by `m`. You should use this\n * instead of the built-in operation as the built-in operation does not\n * properly handle negative numbers.\n */\nfunction mod(n, m) {\n    return ((n % m) + m) % m;\n}\nfunction draw(points, round, initialMove, close, exclude) {\n    const data = [];\n    const end = points[points.length - 1];\n    const rounded = round != null && round > 0;\n    const arcSize = round || 0;\n    // Adds virtual waypoint in the center between start and end point\n    if (close && rounded) {\n        points = points.slice(); // eslint-disable-line\n        const p0 = points[0];\n        const wp = new Point(end.x + (p0.x - end.x) / 2, end.y + (p0.y - end.y) / 2);\n        points.splice(0, 0, wp);\n    }\n    let pt = points[0];\n    let i = 1;\n    // Draws the line segments\n    if (initialMove) {\n        data.push('M', pt.x, pt.y);\n    }\n    else {\n        data.push('L', pt.x, pt.y);\n    }\n    while (i < (close ? points.length : points.length - 1)) {\n        let tmp = points[mod(i, points.length)];\n        let dx = pt.x - tmp.x;\n        let dy = pt.y - tmp.y;\n        if (rounded &&\n            (dx !== 0 || dy !== 0) &&\n            (exclude == null || exclude.indexOf(i - 1) < 0)) {\n            // Draws a line from the last point to the current\n            // point with a spacing of size off the current point\n            // into direction of the last point\n            let dist = Math.sqrt(dx * dx + dy * dy);\n            const nx1 = (dx * Math.min(arcSize, dist / 2)) / dist;\n            const ny1 = (dy * Math.min(arcSize, dist / 2)) / dist;\n            const x1 = tmp.x + nx1;\n            const y1 = tmp.y + ny1;\n            data.push('L', x1, y1);\n            // Draws a curve from the last point to the current\n            // point with a spacing of size off the current point\n            // into direction of the next point\n            let next = points[mod(i + 1, points.length)];\n            // Uses next non-overlapping point\n            while (i < points.length - 2 &&\n                Math.round(next.x - tmp.x) === 0 &&\n                Math.round(next.y - tmp.y) === 0) {\n                next = points[mod(i + 2, points.length)];\n                i += 1;\n            }\n            dx = next.x - tmp.x;\n            dy = next.y - tmp.y;\n            dist = Math.max(1, Math.sqrt(dx * dx + dy * dy));\n            const nx2 = (dx * Math.min(arcSize, dist / 2)) / dist;\n            const ny2 = (dy * Math.min(arcSize, dist / 2)) / dist;\n            const x2 = tmp.x + nx2;\n            const y2 = tmp.y + ny2;\n            data.push('Q', tmp.x, tmp.y, x2, y2);\n            tmp = new Point(x2, y2);\n        }\n        else {\n            data.push('L', tmp.x, tmp.y);\n        }\n        pt = tmp;\n        i += 1;\n    }\n    if (close) {\n        data.push('Z');\n    }\n    else {\n        data.push('L', end.x, end.y);\n    }\n    return data.map((v) => (typeof v === 'string' ? v : +v.toFixed(3))).join(' ');\n}\nexport function drawPoints(points, options = {}) {\n    const pts = [];\n    if (points && points.length) {\n        points.forEach((p) => {\n            if (Array.isArray(p)) {\n                pts.push({ x: p[0], y: p[1] });\n            }\n            else {\n                pts.push({ x: p.x, y: p.y });\n            }\n        });\n    }\n    return draw(pts, options.round, options.initialMove == null || options.initialMove, options.close, options.exclude);\n}\n/**\n * Converts the given arc to a series of curves.\n */\nexport function arcToCurves(x0, y0, r1, r2, angle = 0, largeArcFlag = 0, sweepFlag = 0, x, y) {\n    if (r1 === 0 || r2 === 0) {\n        return [];\n    }\n    x -= x0; // eslint-disable-line\n    y -= y0; // eslint-disable-line\n    r1 = Math.abs(r1); // eslint-disable-line\n    r2 = Math.abs(r2); // eslint-disable-line\n    const ctx = -x / 2;\n    const cty = -y / 2;\n    const cpsi = Math.cos((angle * Math.PI) / 180);\n    const spsi = Math.sin((angle * Math.PI) / 180);\n    const rxd = cpsi * ctx + spsi * cty;\n    const ryd = -1 * spsi * ctx + cpsi * cty;\n    const rxdd = rxd * rxd;\n    const rydd = ryd * ryd;\n    const r1x = r1 * r1;\n    const r2y = r2 * r2;\n    const lamda = rxdd / r1x + rydd / r2y;\n    let sds;\n    if (lamda > 1) {\n        r1 = Math.sqrt(lamda) * r1; // eslint-disable-line\n        r2 = Math.sqrt(lamda) * r2; // eslint-disable-line\n        sds = 0;\n    }\n    else {\n        let seif = 1;\n        if (largeArcFlag === sweepFlag) {\n            seif = -1;\n        }\n        sds =\n            seif *\n                Math.sqrt((r1x * r2y - r1x * rydd - r2y * rxdd) / (r1x * rydd + r2y * rxdd));\n    }\n    const txd = (sds * r1 * ryd) / r2;\n    const tyd = (-1 * sds * r2 * rxd) / r1;\n    const tx = cpsi * txd - spsi * tyd + x / 2;\n    const ty = spsi * txd + cpsi * tyd + y / 2;\n    let rad = Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1) - Math.atan2(0, 1);\n    let s1 = rad >= 0 ? rad : 2 * Math.PI + rad;\n    rad =\n        Math.atan2((-ryd - tyd) / r2, (-rxd - txd) / r1) -\n            Math.atan2((ryd - tyd) / r2, (rxd - txd) / r1);\n    let dr = rad >= 0 ? rad : 2 * Math.PI + rad;\n    if (sweepFlag === 0 && dr > 0) {\n        dr -= 2 * Math.PI;\n    }\n    else if (sweepFlag !== 0 && dr < 0) {\n        dr += 2 * Math.PI;\n    }\n    const sse = (dr * 2) / Math.PI;\n    const seg = Math.ceil(sse < 0 ? -1 * sse : sse);\n    const segr = dr / seg;\n    const t = ((8 / 3) * Math.sin(segr / 4) * Math.sin(segr / 4)) / Math.sin(segr / 2);\n    const cpsir1 = cpsi * r1;\n    const cpsir2 = cpsi * r2;\n    const spsir1 = spsi * r1;\n    const spsir2 = spsi * r2;\n    let mc = Math.cos(s1);\n    let ms = Math.sin(s1);\n    let x2 = -t * (cpsir1 * ms + spsir2 * mc);\n    let y2 = -t * (spsir1 * ms - cpsir2 * mc);\n    let x3 = 0;\n    let y3 = 0;\n    const result = [];\n    for (let n = 0; n < seg; n += 1) {\n        s1 += segr;\n        mc = Math.cos(s1);\n        ms = Math.sin(s1);\n        x3 = cpsir1 * mc - spsir2 * ms + tx;\n        y3 = spsir1 * mc + cpsir2 * ms + ty;\n        const dx = -t * (cpsir1 * ms + spsir2 * mc);\n        const dy = -t * (spsir1 * ms - cpsir2 * mc);\n        // CurveTo updates x0, y0 so need to restore it\n        const index = n * 6;\n        result[index] = Number(x2 + x0);\n        result[index + 1] = Number(y2 + y0);\n        result[index + 2] = Number(x3 - dx + x0);\n        result[index + 3] = Number(y3 - dy + y0);\n        result[index + 4] = Number(x3 + x0);\n        result[index + 5] = Number(y3 + y0);\n        x2 = x3 + dx;\n        y2 = y3 + dy;\n    }\n    return result.map((num) => +num.toFixed(2));\n}\nexport function drawArc(startX, startY, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0, stopX, stopY) {\n    const data = [];\n    const points = arcToCurves(startX, startY, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, stopX, stopY);\n    if (points != null) {\n        for (let i = 0, ii = points.length; i < ii; i += 6) {\n            data.push('C', points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5]);\n        }\n    }\n    return data.join(' ');\n}\n//# sourceMappingURL=util.js.map","/* eslint-disable no-constructor-return */\nimport { Line } from './line';\nimport { Point } from './point';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Polyline extends Geometry {\n    get start() {\n        return this.points[0] || null;\n    }\n    get end() {\n        return this.points[this.points.length - 1] || null;\n    }\n    constructor(points) {\n        super();\n        if (points != null) {\n            if (typeof points === 'string') {\n                return Polyline.parse(points);\n            }\n            this.points = points.map((p) => Point.create(p));\n        }\n        else {\n            this.points = [];\n        }\n    }\n    scale(sx, sy, origin = new Point()) {\n        this.points.forEach((p) => p.scale(sx, sy, origin));\n        return this;\n    }\n    rotate(angle, origin) {\n        this.points.forEach((p) => p.rotate(angle, origin));\n        return this;\n    }\n    translate(dx, dy) {\n        const t = Point.create(dx, dy);\n        this.points.forEach((p) => p.translate(t.x, t.y));\n        return this;\n    }\n    round(precision = 0) {\n        this.points.forEach((p) => p.round(precision));\n        return this;\n    }\n    bbox() {\n        if (this.points.length === 0) {\n            return new Rectangle();\n        }\n        let x1 = Infinity;\n        let x2 = -Infinity;\n        let y1 = Infinity;\n        let y2 = -Infinity;\n        const points = this.points;\n        for (let i = 0, ii = points.length; i < ii; i += 1) {\n            const point = points[i];\n            const x = point.x;\n            const y = point.y;\n            if (x < x1)\n                x1 = x;\n            if (x > x2)\n                x2 = x;\n            if (y < y1)\n                y1 = y;\n            if (y > y2)\n                y2 = y;\n        }\n        return new Rectangle(x1, y1, x2 - x1, y2 - y1);\n    }\n    closestPoint(p) {\n        const cpLength = this.closestPointLength(p);\n        return this.pointAtLength(cpLength);\n    }\n    closestPointLength(p) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return 0;\n        }\n        let length = 0;\n        let cpLength = 0;\n        let minSqrDistance = Infinity;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const line = new Line(points[i], points[i + 1]);\n            const lineLength = line.length();\n            const cpNormalizedLength = line.closestPointNormalizedLength(p);\n            const cp = line.pointAt(cpNormalizedLength);\n            const sqrDistance = cp.squaredDistance(p);\n            if (sqrDistance < minSqrDistance) {\n                minSqrDistance = sqrDistance;\n                cpLength = length + cpNormalizedLength * lineLength;\n            }\n            length += lineLength;\n        }\n        return cpLength;\n    }\n    closestPointNormalizedLength(p) {\n        const length = this.length();\n        if (length === 0) {\n            return 0;\n        }\n        const cpLength = this.closestPointLength(p);\n        return cpLength / length;\n    }\n    closestPointTangent(p) {\n        const cpLength = this.closestPointLength(p);\n        return this.tangentAtLength(cpLength);\n    }\n    containsPoint(p) {\n        if (this.points.length === 0) {\n            return false;\n        }\n        const ref = Point.clone(p);\n        const x = ref.x;\n        const y = ref.y;\n        const points = this.points;\n        const count = points.length;\n        let startIndex = count - 1;\n        let intersectionCount = 0;\n        for (let endIndex = 0; endIndex < count; endIndex += 1) {\n            const start = points[startIndex];\n            const end = points[endIndex];\n            if (ref.equals(start)) {\n                return true;\n            }\n            const segment = new Line(start, end);\n            if (segment.containsPoint(p)) {\n                return true;\n            }\n            // do we have an intersection?\n            if ((y <= start.y && y > end.y) || (y > start.y && y <= end.y)) {\n                // this conditional branch IS NOT entered when `segment` is collinear/coincident with `ray`\n                // (when `y === start.y === end.y`)\n                // this conditional branch IS entered when `segment` touches `ray` at only one point\n                // (e.g. when `y === start.y !== end.y`)\n                // since this branch is entered again for the following segment, the two touches cancel out\n                const xDifference = start.x - x > end.x - x ? start.x - x : end.x - x;\n                if (xDifference >= 0) {\n                    // segment lies at least partially to the right of `p`\n                    const rayEnd = new Point(x + xDifference, y); // right\n                    const ray = new Line(p, rayEnd);\n                    if (segment.intersectsWithLine(ray)) {\n                        // an intersection was detected to the right of `p`\n                        intersectionCount += 1;\n                    }\n                } // else: `segment` lies completely to the left of `p` (i.e. no intersection to the right)\n            }\n            // move to check the next polyline segment\n            startIndex = endIndex;\n        }\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return intersectionCount % 2 === 1;\n    }\n    intersectsWithLine(line) {\n        const intersections = [];\n        for (let i = 0, n = this.points.length - 1; i < n; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            const int = line.intersectsWithLine(new Line(a, b));\n            if (int) {\n                intersections.push(int);\n            }\n        }\n        return intersections.length > 0 ? intersections : null;\n    }\n    isDifferentiable() {\n        for (let i = 0, ii = this.points.length - 1; i < ii; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            const line = new Line(a, b);\n            if (line.isDifferentiable()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    length() {\n        let len = 0;\n        for (let i = 0, ii = this.points.length - 1; i < ii; i += 1) {\n            const a = this.points[i];\n            const b = this.points[i + 1];\n            len += a.distance(b);\n        }\n        return len;\n    }\n    pointAt(ratio) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return null;\n        }\n        if (count === 1) {\n            return points[0].clone();\n        }\n        if (ratio <= 0) {\n            return points[0].clone();\n        }\n        if (ratio >= 1) {\n            return points[count - 1].clone();\n        }\n        const total = this.length();\n        const length = total * ratio;\n        return this.pointAtLength(length);\n    }\n    pointAtLength(length) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return null;\n        }\n        if (count === 1) {\n            return points[0].clone();\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        let tmp = 0;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const a = points[index];\n            const b = points[index + 1];\n            const l = new Line(a, b);\n            const d = a.distance(b);\n            if (length <= tmp + d) {\n                return l.pointAtLength((fromStart ? 1 : -1) * (length - tmp));\n            }\n            tmp += d;\n        }\n        const lastPoint = fromStart ? points[count - 1] : points[0];\n        return lastPoint.clone();\n    }\n    tangentAt(ratio) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return null;\n        }\n        if (ratio < 0) {\n            ratio = 0; // eslint-disable-line\n        }\n        if (ratio > 1) {\n            ratio = 1; // eslint-disable-line\n        }\n        const total = this.length();\n        const length = total * ratio;\n        return this.tangentAtLength(length);\n    }\n    tangentAtLength(length) {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0 || count === 1) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        let lastValidLine;\n        let tmp = 0;\n        for (let i = 0, ii = count - 1; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const a = points[index];\n            const b = points[index + 1];\n            const l = new Line(a, b);\n            const d = a.distance(b);\n            if (l.isDifferentiable()) {\n                // has a tangent line (line length is not 0)\n                if (length <= tmp + d) {\n                    return l.tangentAtLength((fromStart ? 1 : -1) * (length - tmp));\n                }\n                lastValidLine = l;\n            }\n            tmp += d;\n        }\n        if (lastValidLine) {\n            const ratio = fromStart ? 1 : 0;\n            return lastValidLine.tangentAt(ratio);\n        }\n        return null;\n    }\n    simplify(\n    // TODO: Accept startIndex and endIndex to specify where to start and end simplification\n    options = {}) {\n        const points = this.points;\n        // we need at least 3 points\n        if (points.length < 3) {\n            return this;\n        }\n        const threshold = options.threshold || 0;\n        // start at the beginning of the polyline and go forward\n        let currentIndex = 0;\n        // we need at least one intermediate point (3 points) in every iteration\n        // as soon as that stops being true, we know we reached the end of the polyline\n        while (points[currentIndex + 2]) {\n            const firstIndex = currentIndex;\n            const middleIndex = currentIndex + 1;\n            const lastIndex = currentIndex + 2;\n            const firstPoint = points[firstIndex];\n            const middlePoint = points[middleIndex];\n            const lastPoint = points[lastIndex];\n            const chord = new Line(firstPoint, lastPoint); // = connection between first and last point\n            const closestPoint = chord.closestPoint(middlePoint); // = closest point on chord from middle point\n            const closestPointDistance = closestPoint.distance(middlePoint);\n            if (closestPointDistance <= threshold) {\n                // middle point is close enough to the chord = simplify\n                // 1) remove middle point:\n                points.splice(middleIndex, 1);\n                // 2) in next iteration, investigate the newly-created triplet of points\n                //    - do not change `currentIndex`\n                //    = (first point stays, point after removed point becomes middle point)\n            }\n            else {\n                // middle point is far from the chord\n                // 1) preserve middle point\n                // 2) in next iteration, move `currentIndex` by one step:\n                currentIndex += 1;\n                //    = (point after first point becomes first point)\n            }\n        }\n        // `points` array was modified in-place\n        return this;\n    }\n    toHull() {\n        const points = this.points;\n        const count = points.length;\n        if (count === 0) {\n            return new Polyline();\n        }\n        // Step 1: find the starting point -- point with\n        // the lowest y (if equality, highest x).\n        let startPoint = points[0];\n        for (let i = 1; i < count; i += 1) {\n            if (points[i].y < startPoint.y) {\n                startPoint = points[i];\n            }\n            else if (points[i].y === startPoint.y && points[i].x > startPoint.x) {\n                startPoint = points[i];\n            }\n        }\n        // Step 2: sort the list of points by angle between line\n        // from start point to current point and the x-axis (theta).\n        // Step 2a: create the point records = [point, originalIndex, angle]\n        const sortedRecords = [];\n        for (let i = 0; i < count; i += 1) {\n            let angle = startPoint.theta(points[i]);\n            if (angle === 0) {\n                // Give highest angle to start point.\n                // The start point will end up at end of sorted list.\n                // The start point will end up at beginning of hull points list.\n                angle = 360;\n            }\n            sortedRecords.push([points[i], i, angle]);\n        }\n        // Step 2b: sort the list in place\n        sortedRecords.sort((record1, record2) => {\n            let ret = record1[2] - record2[2];\n            if (ret === 0) {\n                ret = record2[1] - record1[1];\n            }\n            return ret;\n        });\n        // Step 2c: duplicate start record from the top of\n        // the stack to the bottom of the stack.\n        if (sortedRecords.length > 2) {\n            const startPoint = sortedRecords[sortedRecords.length - 1];\n            sortedRecords.unshift(startPoint);\n        }\n        // Step 3\n        // ------\n        // Step 3a: go through sorted points in order and find those with\n        // right turns, and we want to get our results in clockwise order.\n        // Dictionary of points with left turns - cannot be on the hull.\n        const insidePoints = {};\n        // Stack of records with right turns - hull point candidates.\n        const hullRecords = [];\n        const getKey = (record) => `${record[0].toString()}@${record[1]}`;\n        while (sortedRecords.length !== 0) {\n            const currentRecord = sortedRecords.pop();\n            const currentPoint = currentRecord[0];\n            // Check if point has already been discarded.\n            if (insidePoints[getKey(currentRecord)]) {\n                continue;\n            }\n            let correctTurnFound = false;\n            while (!correctTurnFound) {\n                if (hullRecords.length < 2) {\n                    // Not enough points for comparison, just add current point.\n                    hullRecords.push(currentRecord);\n                    correctTurnFound = true;\n                }\n                else {\n                    const lastHullRecord = hullRecords.pop();\n                    const lastHullPoint = lastHullRecord[0];\n                    const secondLastHullRecord = hullRecords.pop();\n                    const secondLastHullPoint = secondLastHullRecord[0];\n                    const crossProduct = secondLastHullPoint.cross(lastHullPoint, currentPoint);\n                    if (crossProduct < 0) {\n                        // Found a right turn.\n                        hullRecords.push(secondLastHullRecord);\n                        hullRecords.push(lastHullRecord);\n                        hullRecords.push(currentRecord);\n                        correctTurnFound = true;\n                    }\n                    else if (crossProduct === 0) {\n                        // the three points are collinear\n                        // three options:\n                        // there may be a 180 or 0 degree angle at lastHullPoint\n                        // or two of the three points are coincident\n                        // we have to take rounding errors into account\n                        const THRESHOLD = 1e-10;\n                        const angleBetween = lastHullPoint.angleBetween(secondLastHullPoint, currentPoint);\n                        if (Math.abs(angleBetween - 180) < THRESHOLD) {\n                            // rouding around 180 to 180\n                            // if the cross product is 0 because the angle is 180 degrees\n                            // discard last hull point (add to insidePoints)\n                            // insidePoints.unshift(lastHullPoint);\n                            insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // do not do anything with current point\n                            // correct turn not found\n                        }\n                        else if (lastHullPoint.equals(currentPoint) ||\n                            secondLastHullPoint.equals(lastHullPoint)) {\n                            // if the cross product is 0 because two points are the same\n                            // discard last hull point (add to insidePoints)\n                            // insidePoints.unshift(lastHullPoint);\n                            insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // do not do anything with current point\n                            // correct turn not found\n                        }\n                        else if (Math.abs(((angleBetween + 1) % 360) - 1) < THRESHOLD) {\n                            // rounding around 0 and 360 to 0\n                            // if the cross product is 0 because the angle is 0 degrees\n                            // remove last hull point from hull BUT do not discard it\n                            // reenter second-to-last hull point (will be last at next iter)\n                            hullRecords.push(secondLastHullRecord);\n                            // put last hull point back into the sorted point records list\n                            sortedRecords.push(lastHullRecord);\n                            // we are switching the order of the 0deg and 180deg points\n                            // correct turn not found\n                        }\n                    }\n                    else {\n                        // found a left turn\n                        // discard last hull point (add to insidePoints)\n                        // insidePoints.unshift(lastHullPoint);\n                        insidePoints[getKey(lastHullRecord)] = lastHullPoint;\n                        // reenter second-to-last hull point (will be last at next iter of loop)\n                        hullRecords.push(secondLastHullRecord);\n                        // do not do anything with current point\n                        // correct turn not found\n                    }\n                }\n            }\n        }\n        // At this point, hullPointRecords contains the output points in clockwise order\n        // the points start with lowest-y,highest-x startPoint, and end at the same point\n        // Step 3b: remove duplicated startPointRecord from the end of the array\n        if (hullRecords.length > 2) {\n            hullRecords.pop();\n        }\n        // Step 4: find the lowest originalIndex record and put it at the beginning of hull\n        let lowestHullIndex; // the lowest originalIndex on the hull\n        let indexOfLowestHullIndexRecord = -1; // the index of the record with lowestHullIndex\n        for (let i = 0, n = hullRecords.length; i < n; i += 1) {\n            const currentHullIndex = hullRecords[i][1];\n            if (lowestHullIndex === undefined || currentHullIndex < lowestHullIndex) {\n                lowestHullIndex = currentHullIndex;\n                indexOfLowestHullIndexRecord = i;\n            }\n        }\n        let hullPointRecordsReordered = [];\n        if (indexOfLowestHullIndexRecord > 0) {\n            const newFirstChunk = hullRecords.slice(indexOfLowestHullIndexRecord);\n            const newSecondChunk = hullRecords.slice(0, indexOfLowestHullIndexRecord);\n            hullPointRecordsReordered = newFirstChunk.concat(newSecondChunk);\n        }\n        else {\n            hullPointRecordsReordered = hullRecords;\n        }\n        const hullPoints = [];\n        for (let i = 0, n = hullPointRecordsReordered.length; i < n; i += 1) {\n            hullPoints.push(hullPointRecordsReordered[i][0]);\n        }\n        return new Polyline(hullPoints);\n    }\n    equals(p) {\n        if (p == null) {\n            return false;\n        }\n        if (p.points.length !== this.points.length) {\n            return false;\n        }\n        return p.points.every((a, i) => a.equals(this.points[i]));\n    }\n    clone() {\n        return new Polyline(this.points.map((p) => p.clone()));\n    }\n    toJSON() {\n        return this.points.map((p) => p.toJSON());\n    }\n    serialize() {\n        return this.points.map((p) => `${p.serialize()}`).join(' ');\n    }\n}\n(function (Polyline) {\n    function isPolyline(instance) {\n        return instance != null && instance instanceof Polyline;\n    }\n    Polyline.isPolyline = isPolyline;\n})(Polyline || (Polyline = {}));\n(function (Polyline) {\n    function parse(svgString) {\n        const str = svgString.trim();\n        if (str === '') {\n            return new Polyline();\n        }\n        const points = [];\n        const coords = str.split(/\\s*,\\s*|\\s+/);\n        for (let i = 0, ii = coords.length; i < ii; i += 2) {\n            points.push({ x: +coords[i], y: +coords[i + 1] });\n        }\n        return new Polyline(points);\n    }\n    Polyline.parse = parse;\n})(Polyline || (Polyline = {}));\n//# sourceMappingURL=polyline.js.map","import { Line } from './line';\nimport { Point } from './point';\nimport { Polyline } from './polyline';\nimport { Rectangle } from './rectangle';\nimport { Geometry } from './geometry';\nexport class Curve extends Geometry {\n    constructor(start, controlPoint1, controlPoint2, end) {\n        super();\n        this.PRECISION = 3;\n        this.start = Point.create(start);\n        this.controlPoint1 = Point.create(controlPoint1);\n        this.controlPoint2 = Point.create(controlPoint2);\n        this.end = Point.create(end);\n    }\n    bbox() {\n        const start = this.start;\n        const controlPoint1 = this.controlPoint1;\n        const controlPoint2 = this.controlPoint2;\n        const end = this.end;\n        const x0 = start.x;\n        const y0 = start.y;\n        const x1 = controlPoint1.x;\n        const y1 = controlPoint1.y;\n        const x2 = controlPoint2.x;\n        const y2 = controlPoint2.y;\n        const x3 = end.x;\n        const y3 = end.y;\n        const points = []; // local extremes\n        const tvalues = []; // t values of local extremes\n        const bounds = [[], []];\n        let a;\n        let b;\n        let c;\n        let t;\n        let t1;\n        let t2;\n        let b2ac;\n        let sqrtb2ac;\n        for (let i = 0; i < 2; i += 1) {\n            if (i === 0) {\n                b = 6 * x0 - 12 * x1 + 6 * x2;\n                a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n                c = 3 * x1 - 3 * x0;\n            }\n            else {\n                b = 6 * y0 - 12 * y1 + 6 * y2;\n                a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n                c = 3 * y1 - 3 * y0;\n            }\n            if (Math.abs(a) < 1e-12) {\n                if (Math.abs(b) < 1e-12) {\n                    continue;\n                }\n                t = -c / b;\n                if (t > 0 && t < 1)\n                    tvalues.push(t);\n                continue;\n            }\n            b2ac = b * b - 4 * c * a;\n            sqrtb2ac = Math.sqrt(b2ac);\n            if (b2ac < 0)\n                continue;\n            t1 = (-b + sqrtb2ac) / (2 * a);\n            if (t1 > 0 && t1 < 1)\n                tvalues.push(t1);\n            t2 = (-b - sqrtb2ac) / (2 * a);\n            if (t2 > 0 && t2 < 1)\n                tvalues.push(t2);\n        }\n        let x;\n        let y;\n        let mt;\n        let j = tvalues.length;\n        const jlen = j;\n        while (j) {\n            j -= 1;\n            t = tvalues[j];\n            mt = 1 - t;\n            x =\n                mt * mt * mt * x0 +\n                    3 * mt * mt * t * x1 +\n                    3 * mt * t * t * x2 +\n                    t * t * t * x3;\n            bounds[0][j] = x;\n            y =\n                mt * mt * mt * y0 +\n                    3 * mt * mt * t * y1 +\n                    3 * mt * t * t * y2 +\n                    t * t * t * y3;\n            bounds[1][j] = y;\n            points[j] = { X: x, Y: y };\n        }\n        tvalues[jlen] = 0;\n        tvalues[jlen + 1] = 1;\n        points[jlen] = { X: x0, Y: y0 };\n        points[jlen + 1] = { X: x3, Y: y3 };\n        bounds[0][jlen] = x0;\n        bounds[1][jlen] = y0;\n        bounds[0][jlen + 1] = x3;\n        bounds[1][jlen + 1] = y3;\n        tvalues.length = jlen + 2;\n        bounds[0].length = jlen + 2;\n        bounds[1].length = jlen + 2;\n        points.length = jlen + 2;\n        const left = Math.min.apply(null, bounds[0]);\n        const top = Math.min.apply(null, bounds[1]);\n        const right = Math.max.apply(null, bounds[0]);\n        const bottom = Math.max.apply(null, bounds[1]);\n        return new Rectangle(left, top, right - left, bottom - top);\n    }\n    closestPoint(p, options = {}) {\n        return this.pointAtT(this.closestPointT(p, options));\n    }\n    closestPointLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        return this.lengthAtT(this.closestPointT(p, opts), opts);\n    }\n    closestPointNormalizedLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const cpLength = this.closestPointLength(p, opts);\n        if (!cpLength) {\n            return 0;\n        }\n        const length = this.length(opts);\n        if (length === 0) {\n            return 0;\n        }\n        return cpLength / length;\n    }\n    closestPointT(p, options = {}) {\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        let investigatedSubdivision = null;\n        let investigatedSubdivisionStartT = 0;\n        let investigatedSubdivisionEndT = 0;\n        let distFromStart = 0;\n        let distFromEnd = 0;\n        let chordLength = 0;\n        let minSumDist = null;\n        const count = subdivisions.length;\n        let piece = count > 0 ? 1 / count : 0;\n        subdivisions.forEach((division, i) => {\n            const startDist = division.start.distance(p);\n            const endDist = division.end.distance(p);\n            const sumDist = startDist + endDist;\n            if (minSumDist == null || sumDist < minSumDist) {\n                investigatedSubdivision = division;\n                investigatedSubdivisionStartT = i * piece;\n                investigatedSubdivisionEndT = (i + 1) * piece;\n                distFromStart = startDist;\n                distFromEnd = endDist;\n                minSumDist = sumDist;\n                chordLength = division.endpointDistance();\n            }\n        });\n        // Recursively divide investigated subdivision, until distance between\n        // baselinePoint and closest path endpoint is within `10^(-precision)`,\n        // then return the closest endpoint of that final subdivision.\n        // eslint-disable-next-line\n        while (true) {\n            // check if we have reached at least one required observed precision\n            // - calculated as: the difference in distances from point to start and end divided by the distance\n            // - note that this function is not monotonic = it doesn't converge stably but has \"teeth\"\n            // - the function decreases while one of the endpoints is fixed but \"jumps\" whenever we switch\n            // - this criterion works well for points lying far away from the curve\n            const startPrecisionRatio = distFromStart\n                ? Math.abs(distFromStart - distFromEnd) / distFromStart\n                : 0;\n            const endPrecisionRatio = distFromEnd != null\n                ? Math.abs(distFromStart - distFromEnd) / distFromEnd\n                : 0;\n            const hasRequiredPrecision = startPrecisionRatio < precisionRatio ||\n                endPrecisionRatio < precisionRatio;\n            // check if we have reached at least one required minimal distance\n            // - calculated as: the subdivision chord length multiplied by precisionRatio\n            // - calculation is relative so it will work for arbitrarily large/small curves and their subdivisions\n            // - this is a backup criterion that works well for points lying \"almost at\" the curve\n            const hasMiniStartDistance = distFromStart\n                ? distFromStart < chordLength * precisionRatio\n                : true;\n            const hasMiniEndDistance = distFromEnd\n                ? distFromEnd < chordLength * precisionRatio\n                : true;\n            const hasMiniDistance = hasMiniStartDistance || hasMiniEndDistance;\n            if (hasRequiredPrecision || hasMiniDistance) {\n                return distFromStart <= distFromEnd\n                    ? investigatedSubdivisionStartT\n                    : investigatedSubdivisionEndT;\n            }\n            // otherwise, set up for next iteration\n            const divided = investigatedSubdivision.divide(0.5);\n            piece /= 2;\n            const startDist1 = divided[0].start.distance(p);\n            const endDist1 = divided[0].end.distance(p);\n            const sumDist1 = startDist1 + endDist1;\n            const startDist2 = divided[1].start.distance(p);\n            const endDist2 = divided[1].end.distance(p);\n            const sumDist2 = startDist2 + endDist2;\n            if (sumDist1 <= sumDist2) {\n                investigatedSubdivision = divided[0];\n                investigatedSubdivisionEndT -= piece;\n                distFromStart = startDist1;\n                distFromEnd = endDist1;\n            }\n            else {\n                investigatedSubdivision = divided[1];\n                investigatedSubdivisionStartT += piece;\n                distFromStart = startDist2;\n                distFromEnd = endDist2;\n            }\n        }\n    }\n    closestPointTangent(p, options = {}) {\n        return this.tangentAtT(this.closestPointT(p, options));\n    }\n    containsPoint(p, options = {}) {\n        const polyline = this.toPolyline(options);\n        return polyline.containsPoint(p);\n    }\n    divideAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return this.divideAtT(0);\n        }\n        if (ratio >= 1) {\n            return this.divideAtT(1);\n        }\n        const t = this.tAt(ratio, options);\n        return this.divideAtT(t);\n    }\n    divideAtLength(length, options = {}) {\n        const t = this.tAtLength(length, options);\n        return this.divideAtT(t);\n    }\n    divide(t) {\n        return this.divideAtT(t);\n    }\n    divideAtT(t) {\n        const start = this.start;\n        const controlPoint1 = this.controlPoint1;\n        const controlPoint2 = this.controlPoint2;\n        const end = this.end;\n        if (t <= 0) {\n            return [\n                new Curve(start, start, start, start),\n                new Curve(start, controlPoint1, controlPoint2, end),\n            ];\n        }\n        if (t >= 1) {\n            return [\n                new Curve(start, controlPoint1, controlPoint2, end),\n                new Curve(end, end, end, end),\n            ];\n        }\n        const dividerPoints = this.getSkeletonPoints(t);\n        const startControl1 = dividerPoints.startControlPoint1;\n        const startControl2 = dividerPoints.startControlPoint2;\n        const divider = dividerPoints.divider;\n        const dividerControl1 = dividerPoints.dividerControlPoint1;\n        const dividerControl2 = dividerPoints.dividerControlPoint2;\n        return [\n            new Curve(start, startControl1, startControl2, divider),\n            new Curve(divider, dividerControl1, dividerControl2, end),\n        ];\n    }\n    endpointDistance() {\n        return this.start.distance(this.end);\n    }\n    getSkeletonPoints(t) {\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        // shortcuts for `t` values that are out of range\n        if (t <= 0) {\n            return {\n                startControlPoint1: start.clone(),\n                startControlPoint2: start.clone(),\n                divider: start.clone(),\n                dividerControlPoint1: control1.clone(),\n                dividerControlPoint2: control2.clone(),\n            };\n        }\n        if (t >= 1) {\n            return {\n                startControlPoint1: control1.clone(),\n                startControlPoint2: control2.clone(),\n                divider: end.clone(),\n                dividerControlPoint1: end.clone(),\n                dividerControlPoint2: end.clone(),\n            };\n        }\n        const midpoint1 = new Line(start, control1).pointAt(t);\n        const midpoint2 = new Line(control1, control2).pointAt(t);\n        const midpoint3 = new Line(control2, end).pointAt(t);\n        const subControl1 = new Line(midpoint1, midpoint2).pointAt(t);\n        const subControl2 = new Line(midpoint2, midpoint3).pointAt(t);\n        const divideLine = new Line(subControl1, subControl2).pointAt(t);\n        return {\n            startControlPoint1: midpoint1,\n            startControlPoint2: subControl1,\n            divider: divideLine,\n            dividerControlPoint1: subControl2,\n            dividerControlPoint2: midpoint3,\n        };\n    }\n    getSubdivisions(options = {}) {\n        const precision = this.getPrecision(options);\n        let subdivisions = [\n            new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end),\n        ];\n        if (precision === 0) {\n            return subdivisions;\n        }\n        let previousLength = this.endpointDistance();\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        // Recursively divide curve at `t = 0.5`, until the difference between\n        // observed length at subsequent iterations is lower than precision.\n        let iteration = 0;\n        // eslint-disable-next-line\n        while (true) {\n            iteration += 1;\n            const divisions = [];\n            subdivisions.forEach((c) => {\n                // dividing at t = 0.5 (not at middle length!)\n                const divided = c.divide(0.5);\n                divisions.push(divided[0], divided[1]);\n            });\n            // measure new length\n            const length = divisions.reduce((memo, c) => memo + c.endpointDistance(), 0);\n            // check if we have reached required observed precision\n            // sine-like curves may have the same observed length in iteration 0 and 1 - skip iteration 1\n            // not a problem for further iterations because cubic curves cannot have more than two local extrema\n            // (i.e. cubic curves cannot intersect the baseline more than once)\n            // therefore two subsequent iterations cannot produce sampling with equal length\n            const ratio = length !== 0 ? (length - previousLength) / length : 0;\n            if (iteration > 1 && ratio < precisionRatio) {\n                return divisions;\n            }\n            subdivisions = divisions;\n            previousLength = length;\n        }\n    }\n    length(options = {}) {\n        const divisions = this.getDivisions(options);\n        return divisions.reduce((memo, c) => {\n            return memo + c.endpointDistance();\n        }, 0);\n    }\n    lengthAtT(t, options = {}) {\n        if (t <= 0) {\n            return 0;\n        }\n        const precision = options.precision === undefined ? this.PRECISION : options.precision;\n        const subCurve = this.divide(t)[0];\n        return subCurve.length({ precision });\n    }\n    pointAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return this.start.clone();\n        }\n        if (ratio >= 1) {\n            return this.end.clone();\n        }\n        const t = this.tAt(ratio, options);\n        return this.pointAtT(t);\n    }\n    pointAtLength(length, options = {}) {\n        const t = this.tAtLength(length, options);\n        return this.pointAtT(t);\n    }\n    pointAtT(t) {\n        if (t <= 0) {\n            return this.start.clone();\n        }\n        if (t >= 1) {\n            return this.end.clone();\n        }\n        return this.getSkeletonPoints(t).divider;\n    }\n    isDifferentiable() {\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        return !(start.equals(control1) &&\n            control1.equals(control2) &&\n            control2.equals(end));\n    }\n    tangentAt(ratio, options = {}) {\n        if (!this.isDifferentiable())\n            return null;\n        if (ratio < 0) {\n            ratio = 0; // eslint-disable-line\n        }\n        else if (ratio > 1) {\n            ratio = 1; // eslint-disable-line\n        }\n        const t = this.tAt(ratio, options);\n        return this.tangentAtT(t);\n    }\n    tangentAtLength(length, options = {}) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        const t = this.tAtLength(length, options);\n        return this.tangentAtT(t);\n    }\n    tangentAtT(t) {\n        if (!this.isDifferentiable()) {\n            return null;\n        }\n        if (t < 0) {\n            t = 0; // eslint-disable-line\n        }\n        if (t > 1) {\n            t = 1; // eslint-disable-line\n        }\n        const skeletonPoints = this.getSkeletonPoints(t);\n        const p1 = skeletonPoints.startControlPoint2;\n        const p2 = skeletonPoints.dividerControlPoint1;\n        const tangentStart = skeletonPoints.divider;\n        const tangentLine = new Line(p1, p2);\n        // move so that tangent line starts at the point requested\n        tangentLine.translate(tangentStart.x - p1.x, tangentStart.y - p1.y);\n        return tangentLine;\n    }\n    getPrecision(options = {}) {\n        return options.precision == null ? this.PRECISION : options.precision;\n    }\n    getDivisions(options = {}) {\n        if (options.subdivisions != null) {\n            return options.subdivisions;\n        }\n        const precision = this.getPrecision(options);\n        return this.getSubdivisions({ precision });\n    }\n    getOptions(options = {}) {\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        return { precision, subdivisions };\n    }\n    tAt(ratio, options = {}) {\n        if (ratio <= 0) {\n            return 0;\n        }\n        if (ratio >= 1) {\n            return 1;\n        }\n        const opts = this.getOptions(options);\n        const total = this.length(opts);\n        const length = total * ratio;\n        return this.tAtLength(length, opts);\n    }\n    tAtLength(length, options = {}) {\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const subdivisions = this.getDivisions(options);\n        const opts = { precision, subdivisions };\n        let investigatedSubdivision = null;\n        let investigatedSubdivisionStartT;\n        let investigatedSubdivisionEndT;\n        let baselinePointDistFromStart = 0;\n        let baselinePointDistFromEnd = 0;\n        let memo = 0;\n        const count = subdivisions.length;\n        let piece = count > 0 ? 1 / count : 0;\n        for (let i = 0; i < count; i += 1) {\n            const index = fromStart ? i : count - 1 - i;\n            const division = subdivisions[i];\n            const dist = division.endpointDistance();\n            if (length <= memo + dist) {\n                investigatedSubdivision = division;\n                investigatedSubdivisionStartT = index * piece;\n                investigatedSubdivisionEndT = (index + 1) * piece;\n                baselinePointDistFromStart = fromStart\n                    ? length - memo\n                    : dist + memo - length;\n                baselinePointDistFromEnd = fromStart\n                    ? dist + memo - length\n                    : length - memo;\n                break;\n            }\n            memo += dist;\n        }\n        if (investigatedSubdivision == null) {\n            return fromStart ? 1 : 0;\n        }\n        // note that precision affects what length is recorded\n        // (imprecise measurements underestimate length by up to 10^(-precision) of the precise length)\n        // e.g. at precision 1, the length may be underestimated by up to 10% and cause this function to return 1\n        const total = this.length(opts);\n        const precisionRatio = Math.pow(10, -precision); // eslint-disable-line\n        // recursively divide investigated subdivision:\n        // until distance between baselinePoint and closest path endpoint is within 10^(-precision)\n        // then return the closest endpoint of that final subdivision\n        // eslint-disable-next-line\n        while (true) {\n            let ratio;\n            ratio = total !== 0 ? baselinePointDistFromStart / total : 0;\n            if (ratio < precisionRatio) {\n                return investigatedSubdivisionStartT;\n            }\n            ratio = total !== 0 ? baselinePointDistFromEnd / total : 0;\n            if (ratio < precisionRatio) {\n                return investigatedSubdivisionEndT;\n            }\n            // otherwise, set up for next iteration\n            let newBaselinePointDistFromStart;\n            let newBaselinePointDistFromEnd;\n            const divided = investigatedSubdivision.divide(0.5);\n            piece /= 2;\n            const baseline1Length = divided[0].endpointDistance();\n            const baseline2Length = divided[1].endpointDistance();\n            if (baselinePointDistFromStart <= baseline1Length) {\n                investigatedSubdivision = divided[0];\n                investigatedSubdivisionEndT -= piece;\n                newBaselinePointDistFromStart = baselinePointDistFromStart;\n                newBaselinePointDistFromEnd =\n                    baseline1Length - newBaselinePointDistFromStart;\n            }\n            else {\n                investigatedSubdivision = divided[1];\n                investigatedSubdivisionStartT += piece;\n                newBaselinePointDistFromStart =\n                    baselinePointDistFromStart - baseline1Length;\n                newBaselinePointDistFromEnd =\n                    baseline2Length - newBaselinePointDistFromStart;\n            }\n            baselinePointDistFromStart = newBaselinePointDistFromStart;\n            baselinePointDistFromEnd = newBaselinePointDistFromEnd;\n        }\n    }\n    toPoints(options = {}) {\n        const subdivisions = this.getDivisions(options);\n        const points = [subdivisions[0].start.clone()];\n        subdivisions.forEach((c) => points.push(c.end.clone()));\n        return points;\n    }\n    toPolyline(options = {}) {\n        return new Polyline(this.toPoints(options));\n    }\n    scale(sx, sy, origin) {\n        this.start.scale(sx, sy, origin);\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.start.rotate(angle, origin);\n        this.controlPoint1.rotate(angle, origin);\n        this.controlPoint2.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.start.translate(tx, ty);\n            this.controlPoint1.translate(tx, ty);\n            this.controlPoint2.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.start.translate(tx);\n            this.controlPoint1.translate(tx);\n            this.controlPoint2.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(c) {\n        return (c != null &&\n            this.start.equals(c.start) &&\n            this.controlPoint1.equals(c.controlPoint1) &&\n            this.controlPoint2.equals(c.controlPoint2) &&\n            this.end.equals(c.end));\n    }\n    clone() {\n        return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    }\n    toJSON() {\n        return {\n            start: this.start.toJSON(),\n            controlPoint1: this.controlPoint1.toJSON(),\n            controlPoint2: this.controlPoint2.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        return [\n            this.start.serialize(),\n            this.controlPoint1.serialize(),\n            this.controlPoint2.serialize(),\n            this.end.serialize(),\n        ].join(' ');\n    }\n}\n(function (Curve) {\n    function isCurve(instance) {\n        return instance != null && instance instanceof Curve;\n    }\n    Curve.isCurve = isCurve;\n})(Curve || (Curve = {}));\n(function (Curve) {\n    function getFirstControlPoints(rhs) {\n        const n = rhs.length;\n        const x = []; // `x` is a solution vector.\n        const tmp = [];\n        let b = 2.0;\n        x[0] = rhs[0] / b;\n        // Decomposition and forward substitution.\n        for (let i = 1; i < n; i += 1) {\n            tmp[i] = 1 / b;\n            b = (i < n - 1 ? 4.0 : 3.5) - tmp[i];\n            x[i] = (rhs[i] - x[i - 1]) / b;\n        }\n        for (let i = 1; i < n; i += 1) {\n            // Backsubstitution.\n            x[n - i - 1] -= tmp[n - i] * x[n - i];\n        }\n        return x;\n    }\n    function getCurveControlPoints(points) {\n        const knots = points.map((p) => Point.clone(p));\n        const firstControlPoints = [];\n        const secondControlPoints = [];\n        const n = knots.length - 1;\n        // Special case: Bezier curve should be a straight line.\n        if (n === 1) {\n            // 3P1 = 2P0 + P3\n            firstControlPoints[0] = new Point((2 * knots[0].x + knots[1].x) / 3, (2 * knots[0].y + knots[1].y) / 3);\n            // P2 = 2P1 – P0\n            secondControlPoints[0] = new Point(2 * firstControlPoints[0].x - knots[0].x, 2 * firstControlPoints[0].y - knots[0].y);\n            return [firstControlPoints, secondControlPoints];\n        }\n        // Calculate first Bezier control points.\n        // Right hand side vector.\n        const rhs = [];\n        // Set right hand side X values.\n        for (let i = 1; i < n - 1; i += 1) {\n            rhs[i] = 4 * knots[i].x + 2 * knots[i + 1].x;\n        }\n        rhs[0] = knots[0].x + 2 * knots[1].x;\n        rhs[n - 1] = (8 * knots[n - 1].x + knots[n].x) / 2.0;\n        // Get first control points X-values.\n        const x = getFirstControlPoints(rhs);\n        // Set right hand side Y values.\n        for (let i = 1; i < n - 1; i += 1) {\n            rhs[i] = 4 * knots[i].y + 2 * knots[i + 1].y;\n        }\n        rhs[0] = knots[0].y + 2 * knots[1].y;\n        rhs[n - 1] = (8 * knots[n - 1].y + knots[n].y) / 2.0;\n        // Get first control points Y-values.\n        const y = getFirstControlPoints(rhs);\n        // Fill output arrays.\n        for (let i = 0; i < n; i += 1) {\n            // First control point.\n            firstControlPoints.push(new Point(x[i], y[i]));\n            // Second control point.\n            if (i < n - 1) {\n                secondControlPoints.push(new Point(2 * knots[i + 1].x - x[i + 1], 2 * knots[i + 1].y - y[i + 1]));\n            }\n            else {\n                secondControlPoints.push(new Point((knots[n].x + x[n - 1]) / 2, (knots[n].y + y[n - 1]) / 2));\n            }\n        }\n        return [firstControlPoints, secondControlPoints];\n    }\n    function throughPoints(points) {\n        if (points == null || (Array.isArray(points) && points.length < 2)) {\n            throw new Error('At least 2 points are required');\n        }\n        const controlPoints = getCurveControlPoints(points);\n        const curves = [];\n        for (let i = 0, ii = controlPoints[0].length; i < ii; i += 1) {\n            const controlPoint1 = new Point(controlPoints[0][i].x, controlPoints[0][i].y);\n            const controlPoint2 = new Point(controlPoints[1][i].x, controlPoints[1][i].y);\n            curves.push(new Curve(points[i], controlPoint1, controlPoint2, points[i + 1]));\n        }\n        return curves;\n    }\n    Curve.throughPoints = throughPoints;\n})(Curve || (Curve = {}));\n//# sourceMappingURL=curve.js.map","import { Geometry } from '../geometry';\nexport class Segment extends Geometry {\n    constructor() {\n        super(...arguments);\n        this.isVisible = true;\n        this.isSegment = true;\n        this.isSubpathStart = false;\n    }\n    get end() {\n        return this.endPoint;\n    }\n    get start() {\n        if (this.previousSegment == null) {\n            throw new Error('Missing previous segment. (This segment cannot be the ' +\n                'first segment of a path, or segment has not yet been ' +\n                'added to a path.)');\n        }\n        return this.previousSegment.end;\n    }\n    closestPointT(p, options) {\n        if (this.closestPointNormalizedLength) {\n            return this.closestPointNormalizedLength(p);\n        }\n        throw new Error('Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.');\n    }\n    // eslint-disable-next-line\n    lengthAtT(t, options) {\n        if (t <= 0) {\n            return 0;\n        }\n        const length = this.length();\n        if (t >= 1) {\n            return length;\n        }\n        return length * t;\n    }\n    divideAtT(t) {\n        if (this.divideAt) {\n            return this.divideAt(t);\n        }\n        throw new Error('Neither `divideAtT` nor `divideAt` method is implemented.');\n    }\n    pointAtT(t) {\n        if (this.pointAt) {\n            return this.pointAt(t);\n        }\n        throw new Error('Neither `pointAtT` nor `pointAt` method is implemented.');\n    }\n    tangentAtT(t) {\n        if (this.tangentAt) {\n            return this.tangentAt(t);\n        }\n        throw new Error('Neither `tangentAtT` nor `tangentAt` method is implemented.');\n    }\n}\n//# sourceMappingURL=segment.js.map","import { Line } from '../line';\nimport { Point } from '../point';\nimport { Segment } from './segment';\nexport class LineTo extends Segment {\n    constructor(x, y) {\n        super();\n        if (Line.isLine(x)) {\n            this.endPoint = x.end.clone().round(2);\n        }\n        else {\n            this.endPoint = Point.create(x, y).round(2);\n        }\n    }\n    get type() {\n        return 'L';\n    }\n    get line() {\n        return new Line(this.start, this.end);\n    }\n    bbox() {\n        return this.line.bbox();\n    }\n    closestPoint(p) {\n        return this.line.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.line.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.line.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.line.closestPointTangent(p);\n    }\n    length() {\n        return this.line.length();\n    }\n    divideAt(ratio) {\n        const divided = this.line.divideAt(ratio);\n        return [new LineTo(divided[0]), new LineTo(divided[1])];\n    }\n    divideAtLength(length) {\n        const divided = this.line.divideAtLength(length);\n        return [new LineTo(divided[0]), new LineTo(divided[1])];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.line.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.line.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.line.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.line.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (this.previousSegment == null) {\n            return false;\n        }\n        return !this.start.equals(this.end);\n    }\n    clone() {\n        return new LineTo(this.end);\n    }\n    scale(sx, sy, origin) {\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(s) {\n        return (this.type === s.type &&\n            this.start.equals(s.start) &&\n            this.end.equals(s.end));\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const end = this.end;\n        return `${this.type} ${end.x} ${end.y}`;\n    }\n}\n(function (LineTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // line provided\n        if (Line.isLine(arg0)) {\n            return new LineTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 1) {\n                return new LineTo(arg0);\n            }\n            // poly-line segment\n            return args.map((arg) => new LineTo(arg));\n        }\n        // coordinates provided\n        if (len === 2) {\n            return new LineTo(+args[0], +args[1]);\n        }\n        // poly-line segment\n        const segments = [];\n        for (let i = 0; i < len; i += 2) {\n            const x = +args[i];\n            const y = +args[i + 1];\n            segments.push(new LineTo(x, y));\n        }\n        return segments;\n    }\n    LineTo.create = create;\n})(LineTo || (LineTo = {}));\n//# sourceMappingURL=lineto.js.map","import { Line } from '../line';\nimport { LineTo } from './lineto';\nimport { Segment } from './segment';\nexport class Close extends Segment {\n    get end() {\n        if (!this.subpathStartSegment) {\n            throw new Error('Missing subpath start segment. (This segment needs a subpath ' +\n                'start segment (e.g. MoveTo), or segment has not yet been added' +\n                ' to a path.)');\n        }\n        return this.subpathStartSegment.end;\n    }\n    get type() {\n        return 'Z';\n    }\n    get line() {\n        return new Line(this.start, this.end);\n    }\n    bbox() {\n        return this.line.bbox();\n    }\n    closestPoint(p) {\n        return this.line.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.line.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.line.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.line.closestPointTangent(p);\n    }\n    length() {\n        return this.line.length();\n    }\n    divideAt(ratio) {\n        const divided = this.line.divideAt(ratio);\n        return [\n            // do not actually cut into the segment, first divided part can stay as Z\n            divided[1].isDifferentiable() ? new LineTo(divided[0]) : this.clone(),\n            new LineTo(divided[1]),\n        ];\n    }\n    divideAtLength(length) {\n        const divided = this.line.divideAtLength(length);\n        return [\n            divided[1].isDifferentiable() ? new LineTo(divided[0]) : this.clone(),\n            new LineTo(divided[1]),\n        ];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.line.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.line.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.line.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.line.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (!this.previousSegment || !this.subpathStartSegment) {\n            return false;\n        }\n        return !this.start.equals(this.end);\n    }\n    scale() {\n        return this;\n    }\n    rotate() {\n        return this;\n    }\n    translate() {\n        return this;\n    }\n    equals(s) {\n        return (this.type === s.type &&\n            this.start.equals(s.start) &&\n            this.end.equals(s.end));\n    }\n    clone() {\n        return new Close();\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        return this.type;\n    }\n}\n(function (Close) {\n    function create() {\n        return new Close();\n    }\n    Close.create = create;\n})(Close || (Close = {}));\n//# sourceMappingURL=close.js.map","import { Line } from '../line';\nimport { Curve } from '../curve';\nimport { Point } from '../point';\nimport { LineTo } from './lineto';\nimport { Segment } from './segment';\nexport class MoveTo extends Segment {\n    constructor(x, y) {\n        super();\n        this.isVisible = false;\n        this.isSubpathStart = true;\n        if (Line.isLine(x) || Curve.isCurve(x)) {\n            this.endPoint = x.end.clone().round(2);\n        }\n        else {\n            this.endPoint = Point.create(x, y).round(2);\n        }\n    }\n    get start() {\n        throw new Error('Illegal access. Moveto segments should not need a start property.');\n    }\n    get type() {\n        return 'M';\n    }\n    bbox() {\n        return null;\n    }\n    closestPoint() {\n        return this.end.clone();\n    }\n    closestPointLength() {\n        return 0;\n    }\n    closestPointNormalizedLength() {\n        return 0;\n    }\n    closestPointT() {\n        return 1;\n    }\n    closestPointTangent() {\n        return null;\n    }\n    length() {\n        return 0;\n    }\n    lengthAtT() {\n        return 0;\n    }\n    divideAt() {\n        return [this.clone(), this.clone()];\n    }\n    divideAtLength() {\n        return [this.clone(), this.clone()];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt() {\n        return this.end.clone();\n    }\n    pointAtLength() {\n        return this.end.clone();\n    }\n    pointAtT() {\n        return this.end.clone();\n    }\n    tangentAt() {\n        return null;\n    }\n    tangentAtLength() {\n        return null;\n    }\n    tangentAtT() {\n        return null;\n    }\n    isDifferentiable() {\n        return false;\n    }\n    scale(sx, sy, origin) {\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    clone() {\n        return new MoveTo(this.end);\n    }\n    equals(s) {\n        return this.type === s.type && this.end.equals(s.end);\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const end = this.end;\n        return `${this.type} ${end.x} ${end.y}`;\n    }\n}\n(function (MoveTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // line provided\n        if (Line.isLine(arg0)) {\n            return new MoveTo(arg0);\n        }\n        // curve provided\n        if (Curve.isCurve(arg0)) {\n            return new MoveTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 1) {\n                return new MoveTo(arg0);\n            }\n            // this is a moveto-with-subsequent-poly-line segment\n            const segments = [];\n            // points come one by one\n            for (let i = 0; i < len; i += 1) {\n                if (i === 0) {\n                    segments.push(new MoveTo(args[i]));\n                }\n                else {\n                    segments.push(new LineTo(args[i]));\n                }\n            }\n            return segments;\n        }\n        // coordinates provided\n        if (len === 2) {\n            return new MoveTo(+args[0], +args[1]);\n        }\n        // this is a moveto-with-subsequent-poly-line segment\n        const segments = [];\n        for (let i = 0; i < len; i += 2) {\n            const x = +args[i];\n            const y = +args[i + 1];\n            if (i === 0) {\n                segments.push(new MoveTo(x, y));\n            }\n            else {\n                segments.push(new LineTo(x, y));\n            }\n        }\n        return segments;\n    }\n    MoveTo.create = create;\n})(MoveTo || (MoveTo = {}));\n//# sourceMappingURL=moveto.js.map","import { Curve } from '../curve';\nimport { Point } from '../point';\nimport { Segment } from './segment';\nexport class CurveTo extends Segment {\n    constructor(arg0, arg1, arg2, arg3, arg4, arg5) {\n        super();\n        if (Curve.isCurve(arg0)) {\n            this.controlPoint1 = arg0.controlPoint1.clone().round(2);\n            this.controlPoint2 = arg0.controlPoint2.clone().round(2);\n            this.endPoint = arg0.end.clone().round(2);\n        }\n        else if (typeof arg0 === 'number') {\n            this.controlPoint1 = new Point(arg0, arg1).round(2);\n            this.controlPoint2 = new Point(arg2, arg3).round(2);\n            this.endPoint = new Point(arg4, arg5).round(2);\n        }\n        else {\n            this.controlPoint1 = Point.create(arg0).round(2);\n            this.controlPoint2 = Point.create(arg1).round(2);\n            this.endPoint = Point.create(arg2).round(2);\n        }\n    }\n    get type() {\n        return 'C';\n    }\n    get curve() {\n        return new Curve(this.start, this.controlPoint1, this.controlPoint2, this.end);\n    }\n    bbox() {\n        return this.curve.bbox();\n    }\n    closestPoint(p) {\n        return this.curve.closestPoint(p);\n    }\n    closestPointLength(p) {\n        return this.curve.closestPointLength(p);\n    }\n    closestPointNormalizedLength(p) {\n        return this.curve.closestPointNormalizedLength(p);\n    }\n    closestPointTangent(p) {\n        return this.curve.closestPointTangent(p);\n    }\n    length() {\n        return this.curve.length();\n    }\n    divideAt(ratio, options = {}) {\n        // TODO: fix options\n        const divided = this.curve.divideAt(ratio, options);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    divideAtLength(length, options = {}) {\n        // TODO: fix options\n        const divided = this.curve.divideAtLength(length, options);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    divideAtT(t) {\n        const divided = this.curve.divideAtT(t);\n        return [new CurveTo(divided[0]), new CurveTo(divided[1])];\n    }\n    getSubdivisions() {\n        return [];\n    }\n    pointAt(ratio) {\n        return this.curve.pointAt(ratio);\n    }\n    pointAtLength(length) {\n        return this.curve.pointAtLength(length);\n    }\n    tangentAt(ratio) {\n        return this.curve.tangentAt(ratio);\n    }\n    tangentAtLength(length) {\n        return this.curve.tangentAtLength(length);\n    }\n    isDifferentiable() {\n        if (!this.previousSegment) {\n            return false;\n        }\n        const start = this.start;\n        const control1 = this.controlPoint1;\n        const control2 = this.controlPoint2;\n        const end = this.end;\n        return !(start.equals(control1) &&\n            control1.equals(control2) &&\n            control2.equals(end));\n    }\n    scale(sx, sy, origin) {\n        this.controlPoint1.scale(sx, sy, origin);\n        this.controlPoint2.scale(sx, sy, origin);\n        this.end.scale(sx, sy, origin);\n        return this;\n    }\n    rotate(angle, origin) {\n        this.controlPoint1.rotate(angle, origin);\n        this.controlPoint2.rotate(angle, origin);\n        this.end.rotate(angle, origin);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.controlPoint1.translate(tx, ty);\n            this.controlPoint2.translate(tx, ty);\n            this.end.translate(tx, ty);\n        }\n        else {\n            this.controlPoint1.translate(tx);\n            this.controlPoint2.translate(tx);\n            this.end.translate(tx);\n        }\n        return this;\n    }\n    equals(s) {\n        return (this.start.equals(s.start) &&\n            this.end.equals(s.end) &&\n            this.controlPoint1.equals(s.controlPoint1) &&\n            this.controlPoint2.equals(s.controlPoint2));\n    }\n    clone() {\n        return new CurveTo(this.controlPoint1, this.controlPoint2, this.end);\n    }\n    toJSON() {\n        return {\n            type: this.type,\n            start: this.start.toJSON(),\n            controlPoint1: this.controlPoint1.toJSON(),\n            controlPoint2: this.controlPoint2.toJSON(),\n            end: this.end.toJSON(),\n        };\n    }\n    serialize() {\n        const c1 = this.controlPoint1;\n        const c2 = this.controlPoint2;\n        const end = this.end;\n        return [this.type, c1.x, c1.y, c2.x, c2.y, end.x, end.y].join(' ');\n    }\n}\n(function (CurveTo) {\n    function create(...args) {\n        const len = args.length;\n        const arg0 = args[0];\n        // curve provided\n        if (Curve.isCurve(arg0)) {\n            return new CurveTo(arg0);\n        }\n        // points provided\n        if (Point.isPointLike(arg0)) {\n            if (len === 3) {\n                return new CurveTo(args[0], args[1], args[2]);\n            }\n            // this is a poly-bezier segment\n            const segments = [];\n            for (let i = 0; i < len; i += 3) {\n                segments.push(new CurveTo(args[i], args[i + 1], args[i + 2]));\n            }\n            return segments;\n        }\n        // coordinates provided\n        if (len === 6) {\n            return new CurveTo(args[0], args[1], args[2], args[3], args[4], args[5]);\n        }\n        // this is a poly-bezier segment\n        const segments = [];\n        for (let i = 0; i < len; i += 6) {\n            segments.push(new CurveTo(args[i], args[i + 1], args[i + 2], args[i + 3], args[i + 4], args[i + 5]));\n        }\n        return segments;\n    }\n    CurveTo.create = create;\n})(CurveTo || (CurveTo = {}));\n//# sourceMappingURL=curveto.js.map","import { GeometryUtil } from '../util';\nfunction rotate(x, y, rad) {\n    return {\n        x: x * Math.cos(rad) - y * Math.sin(rad),\n        y: x * Math.sin(rad) + y * Math.cos(rad),\n    };\n}\nfunction q2c(x1, y1, ax, ay, x2, y2) {\n    const v13 = 1 / 3;\n    const v23 = 2 / 3;\n    return [\n        v13 * x1 + v23 * ax,\n        v13 * y1 + v23 * ay,\n        v13 * x2 + v23 * ax,\n        v13 * y2 + v23 * ay,\n        x2,\n        y2,\n    ];\n}\nfunction a2c(x1, y1, rx, ry, angle, largeArcFlag, sweepFlag, x2, y2, recursive) {\n    // for more information of where this math came from visit:\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n    const v120 = (Math.PI * 120) / 180;\n    const rad = (Math.PI / 180) * (+angle || 0);\n    let res = [];\n    let xy;\n    let f1;\n    let f2;\n    let cx;\n    let cy;\n    if (!recursive) {\n        xy = rotate(x1, y1, -rad);\n        x1 = xy.x; // eslint-disable-line\n        y1 = xy.y; // eslint-disable-line\n        xy = rotate(x2, y2, -rad);\n        x2 = xy.x; // eslint-disable-line\n        y2 = xy.y; // eslint-disable-line\n        const x = (x1 - x2) / 2;\n        const y = (y1 - y2) / 2;\n        let h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n        if (h > 1) {\n            h = Math.sqrt(h);\n            rx = h * rx; // eslint-disable-line\n            ry = h * ry; // eslint-disable-line\n        }\n        const rx2 = rx * rx;\n        const ry2 = ry * ry;\n        const k = (largeArcFlag === sweepFlag ? -1 : 1) *\n            Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n        cx = (k * rx * y) / ry + (x1 + x2) / 2;\n        cy = (k * -ry * x) / rx + (y1 + y2) / 2;\n        f1 = Math.asin((y1 - cy) / ry);\n        f2 = Math.asin((y2 - cy) / ry);\n        f1 = x1 < cx ? Math.PI - f1 : f1;\n        f2 = x2 < cx ? Math.PI - f2 : f2;\n        if (f1 < 0) {\n            f1 = Math.PI * 2 + f1;\n        }\n        if (f2 < 0) {\n            f2 = Math.PI * 2 + f2;\n        }\n        if (sweepFlag && f1 > f2) {\n            f1 -= Math.PI * 2;\n        }\n        if (!sweepFlag && f2 > f1) {\n            f2 -= Math.PI * 2;\n        }\n    }\n    else {\n        f1 = recursive[0];\n        f2 = recursive[1];\n        cx = recursive[2];\n        cy = recursive[3];\n    }\n    let df = f2 - f1;\n    if (Math.abs(df) > v120) {\n        const f2old = f2;\n        const x2old = x2;\n        const y2old = y2;\n        f2 = f1 + v120 * (sweepFlag && f2 > f1 ? 1 : -1);\n        x2 = cx + rx * Math.cos(f2); // eslint-disable-line\n        y2 = cy + ry * Math.sin(f2); // eslint-disable-line\n        res = a2c(x2, y2, rx, ry, angle, 0, sweepFlag, x2old, y2old, [\n            f2,\n            f2old,\n            cx,\n            cy,\n        ]);\n    }\n    df = f2 - f1;\n    const c1 = Math.cos(f1);\n    const s1 = Math.sin(f1);\n    const c2 = Math.cos(f2);\n    const s2 = Math.sin(f2);\n    const t = Math.tan(df / 4);\n    const hx = (4 / 3) * (rx * t);\n    const hy = (4 / 3) * (ry * t);\n    const m1 = [x1, y1];\n    const m2 = [x1 + hx * s1, y1 - hy * c1];\n    const m3 = [x2 + hx * s2, y2 - hy * c2];\n    const m4 = [x2, y2];\n    m2[0] = 2 * m1[0] - m2[0];\n    m2[1] = 2 * m1[1] - m2[1];\n    if (recursive) {\n        return [m2, m3, m4].concat(res);\n    }\n    {\n        res = [m2, m3, m4].concat(res).join().split(',');\n        const newres = [];\n        const ii = res.length;\n        for (let i = 0; i < ii; i += 1) {\n            newres[i] =\n                i % 2\n                    ? rotate(+res[i - 1], +res[i], rad).y\n                    : rotate(+res[i], +res[i + 1], rad).x;\n        }\n        return newres;\n    }\n}\nfunction parse(pathData) {\n    if (!pathData) {\n        return null;\n    }\n    const spaces = '\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\u2028\\u2029';\n    // https://regexper.com/#%28%5Ba-z%5D%29%5B%5Cs%2C%5D*%28%28-%3F%5Cd*%5C.%3F%5C%5Cd*%28%3F%3Ae%5B%5C-%2B%5D%3F%5Cd%2B%29%3F%5B%5Cs%5D*%2C%3F%5B%5Cs%5D*%29%2B%29\n    const segmentReg = new RegExp(`([a-z])[${spaces},]*((-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?[${spaces}]*,?[${spaces}]*)+)`, // eslint-disable-line\n    'ig');\n    // https://regexper.com/#%28-%3F%5Cd*%5C.%3F%5Cd*%28%3F%3Ae%5B%5C-%2B%5D%3F%5Cd%2B%29%3F%29%5B%5Cs%5D*%2C%3F%5B%5Cs%5D*\n    const commandParamReg = new RegExp(\n    // eslint-disable-next-line\n    `(-?\\\\d*\\\\.?\\\\d*(?:e[\\\\-+]?\\\\d+)?)[${spaces}]*,?[${spaces}]*`, 'ig');\n    const paramsCount = {\n        a: 7,\n        c: 6,\n        h: 1,\n        l: 2,\n        m: 2,\n        q: 4,\n        s: 4,\n        t: 2,\n        v: 1,\n        z: 0,\n    };\n    const segmetns = [];\n    pathData.replace(segmentReg, (input, cmd, args) => {\n        const params = [];\n        let command = cmd.toLowerCase();\n        args.replace(commandParamReg, (a, b) => {\n            if (b) {\n                params.push(+b);\n            }\n            return a;\n        });\n        if (command === 'm' && params.length > 2) {\n            segmetns.push([cmd, ...params.splice(0, 2)]);\n            command = 'l';\n            cmd = cmd === 'm' ? 'l' : 'L'; // eslint-disable-line\n        }\n        const count = paramsCount[command];\n        while (params.length >= count) {\n            segmetns.push([cmd, ...params.splice(0, count)]);\n            if (!count) {\n                break;\n            }\n        }\n        return input;\n    });\n    return segmetns;\n}\nfunction abs(pathString) {\n    const pathArray = parse(pathString);\n    // if invalid string, return 'M 0 0'\n    if (!pathArray || !pathArray.length) {\n        return [['M', 0, 0]];\n    }\n    let x = 0;\n    let y = 0;\n    let mx = 0;\n    let my = 0;\n    const segments = [];\n    for (let i = 0, ii = pathArray.length; i < ii; i += 1) {\n        const r = [];\n        segments.push(r);\n        const segment = pathArray[i];\n        const command = segment[0];\n        if (command !== command.toUpperCase()) {\n            r[0] = command.toUpperCase();\n            switch (r[0]) {\n                case 'A':\n                    r[1] = segment[1];\n                    r[2] = segment[2];\n                    r[3] = segment[3];\n                    r[4] = segment[4];\n                    r[5] = segment[5];\n                    r[6] = +segment[6] + x;\n                    r[7] = +segment[7] + y;\n                    break;\n                case 'V':\n                    r[1] = +segment[1] + y;\n                    break;\n                case 'H':\n                    r[1] = +segment[1] + x;\n                    break;\n                case 'M':\n                    mx = +segment[1] + x;\n                    my = +segment[2] + y;\n                    for (let j = 1, jj = segment.length; j < jj; j += 1) {\n                        r[j] = +segment[j] + (j % 2 ? x : y);\n                    }\n                    break;\n                default:\n                    for (let j = 1, jj = segment.length; j < jj; j += 1) {\n                        r[j] = +segment[j] + (j % 2 ? x : y);\n                    }\n                    break;\n            }\n        }\n        else {\n            for (let j = 0, jj = segment.length; j < jj; j += 1) {\n                r[j] = segment[j];\n            }\n        }\n        switch (r[0]) {\n            case 'Z':\n                x = +mx;\n                y = +my;\n                break;\n            case 'H':\n                x = r[1];\n                break;\n            case 'V':\n                y = r[1];\n                break;\n            case 'M':\n                mx = r[r.length - 2];\n                my = r[r.length - 1];\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n                break;\n            default:\n                x = r[r.length - 2];\n                y = r[r.length - 1];\n                break;\n        }\n    }\n    return segments;\n}\nfunction normalize(path) {\n    const pathArray = abs(path);\n    const attrs = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null };\n    function processPath(path, d, pcom) {\n        let nx;\n        let ny;\n        if (!path) {\n            return ['C', d.x, d.y, d.x, d.y, d.x, d.y];\n        }\n        if (!(path[0] in { T: 1, Q: 1 })) {\n            d.qx = null;\n            d.qy = null;\n        }\n        switch (path[0]) {\n            case 'M':\n                d.X = path[1];\n                d.Y = path[2];\n                break;\n            case 'A':\n                if (parseFloat(path[1]) === 0 || parseFloat(path[2]) === 0) {\n                    // https://www.w3.org/TR/SVG/paths.html#ArcOutOfRangeParameters\n                    // \"If either rx or ry is 0, then this arc is treated as a\n                    // straight line segment (a \"lineto\") joining the endpoints.\"\n                    return ['L', path[6], path[7]];\n                }\n                return ['C'].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));\n            case 'S':\n                if (pcom === 'C' || pcom === 'S') {\n                    // In 'S' case we have to take into account, if the previous command is C/S.\n                    nx = d.x * 2 - d.bx; // And reflect the previous\n                    ny = d.y * 2 - d.by; // command's control point relative to the current point.\n                }\n                else {\n                    // or some else or nothing\n                    nx = d.x;\n                    ny = d.y;\n                }\n                return ['C', nx, ny].concat(path.slice(1));\n            case 'T':\n                if (pcom === 'Q' || pcom === 'T') {\n                    // In 'T' case we have to take into account, if the previous command is Q/T.\n                    d.qx = d.x * 2 - d.qx; // And make a reflection similar\n                    d.qy = d.y * 2 - d.qy; // to case 'S'.\n                }\n                else {\n                    // or something else or nothing\n                    d.qx = d.x;\n                    d.qy = d.y;\n                }\n                return ['C'].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));\n            case 'Q':\n                d.qx = path[1];\n                d.qy = path[2];\n                return ['C'].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));\n            case 'H':\n                return ['L'].concat(path[1], d.y);\n            case 'V':\n                return ['L'].concat(d.x, path[1]);\n            case 'L':\n                break;\n            case 'Z':\n                break;\n            default:\n                break;\n        }\n        return path;\n    }\n    function fixArc(pp, i) {\n        if (pp[i].length > 7) {\n            pp[i].shift();\n            const pi = pp[i];\n            while (pi.length) {\n                // if created multiple 'C's, their original seg is saved\n                commands[i] = 'A';\n                i += 1; // eslint-disable-line\n                pp.splice(i, 0, ['C'].concat(pi.splice(0, 6)));\n            }\n            pp.splice(i, 1);\n            ii = pathArray.length;\n        }\n    }\n    const commands = []; // path commands of original path p\n    let prevCommand = ''; // holder for previous path command of original path\n    let ii = pathArray.length;\n    for (let i = 0; i < ii; i += 1) {\n        let command = ''; // temporary holder for original path command\n        if (pathArray[i]) {\n            command = pathArray[i][0]; // save current path command\n        }\n        if (command !== 'C') {\n            // C is not saved yet, because it may be result of conversion\n            commands[i] = command; // Save current path command\n            if (i > 0) {\n                prevCommand = commands[i - 1]; // Get previous path command pcom\n            }\n        }\n        // Previous path command is inputted to processPath\n        pathArray[i] = processPath(pathArray[i], attrs, prevCommand);\n        if (commands[i] !== 'A' && command === 'C') {\n            commands[i] = 'C'; // 'A' is the only command\n        }\n        // which may produce multiple 'C's\n        // so we have to make sure that 'C' is also 'C' in original path\n        fixArc(pathArray, i); // fixArc adds also the right amount of 'A's to pcoms\n        const seg = pathArray[i];\n        const seglen = seg.length;\n        attrs.x = seg[seglen - 2];\n        attrs.y = seg[seglen - 1];\n        attrs.bx = parseFloat(seg[seglen - 4]) || attrs.x;\n        attrs.by = parseFloat(seg[seglen - 3]) || attrs.y;\n    }\n    // make sure normalized path data string starts with an M segment\n    if (!pathArray[0][0] || pathArray[0][0] !== 'M') {\n        pathArray.unshift(['M', 0, 0]);\n    }\n    return pathArray;\n}\n/**\n * Converts provided SVG path data string into a normalized path data string.\n *\n * The normalization uses a restricted subset of path commands; all segments\n * are translated into lineto, curveto, moveto, and closepath segments.\n *\n * Relative path commands are changed into their absolute counterparts,\n * and chaining of coordinates is disallowed.\n *\n * The function will always return a valid path data string; if an input\n * string cannot be normalized, 'M 0 0' is returned.\n */\nexport function normalizePathData(pathData) {\n    return normalize(pathData)\n        .map((segment) => segment.map((item) => typeof item === 'string' ? item : GeometryUtil.round(item, 2)))\n        .join(',')\n        .split(',')\n        .join(' ');\n}\n//# sourceMappingURL=normalize.js.map","import { GeometryUtil } from '../util';\nimport * as PathUtil from './util';\nimport { Line } from '../line';\nimport { Point } from '../point';\nimport { Curve } from '../curve';\nimport { Polyline } from '../polyline';\nimport { Rectangle } from '../rectangle';\nimport { Geometry } from '../geometry';\nimport { Close } from './close';\nimport { LineTo } from './lineto';\nimport { MoveTo } from './moveto';\nimport { CurveTo } from './curveto';\nimport { normalizePathData } from './normalize';\nexport class Path extends Geometry {\n    constructor(args) {\n        super();\n        this.PRECISION = 3;\n        this.segments = [];\n        if (Array.isArray(args)) {\n            if (Line.isLine(args[0]) || Curve.isCurve(args[0])) {\n                let previousObj = null;\n                const arr = args;\n                arr.forEach((o, i) => {\n                    if (i === 0) {\n                        this.appendSegment(Path.createSegment('M', o.start));\n                    }\n                    if (previousObj != null && !previousObj.end.equals(o.start)) {\n                        this.appendSegment(Path.createSegment('M', o.start));\n                    }\n                    if (Line.isLine(o)) {\n                        this.appendSegment(Path.createSegment('L', o.end));\n                    }\n                    else if (Curve.isCurve(o)) {\n                        this.appendSegment(Path.createSegment('C', o.controlPoint1, o.controlPoint2, o.end));\n                    }\n                    previousObj = o;\n                });\n            }\n            else {\n                const arr = args;\n                arr.forEach((s) => {\n                    if (s.isSegment) {\n                        this.appendSegment(s);\n                    }\n                });\n            }\n        }\n        else if (args != null) {\n            if (Line.isLine(args)) {\n                this.appendSegment(Path.createSegment('M', args.start));\n                this.appendSegment(Path.createSegment('L', args.end));\n            }\n            else if (Curve.isCurve(args)) {\n                this.appendSegment(Path.createSegment('M', args.start));\n                this.appendSegment(Path.createSegment('C', args.controlPoint1, args.controlPoint2, args.end));\n            }\n            else if (Polyline.isPolyline(args)) {\n                if (args.points && args.points.length) {\n                    args.points.forEach((point, index) => {\n                        const segment = index === 0\n                            ? Path.createSegment('M', point)\n                            : Path.createSegment('L', point);\n                        this.appendSegment(segment);\n                    });\n                }\n            }\n            else if (args.isSegment) {\n                this.appendSegment(args);\n            }\n        }\n    }\n    get start() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                return segment.start;\n            }\n        }\n        // if no visible segment, return last segment end point\n        return segments[count - 1].end;\n    }\n    get end() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        for (let i = count - 1; i >= 0; i -= 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                return segment.end;\n            }\n        }\n        // if no visible segment, return last segment end point\n        return segments[count - 1].end;\n    }\n    moveTo(...args) {\n        return this.appendSegment(MoveTo.create.call(null, ...args));\n    }\n    lineTo(...args) {\n        return this.appendSegment(LineTo.create.call(null, ...args));\n    }\n    curveTo(...args) {\n        return this.appendSegment(CurveTo.create.call(null, ...args));\n    }\n    arcTo(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX, endY) {\n        const start = this.end || new Point();\n        const points = typeof endX === 'number'\n            ? PathUtil.arcToCurves(start.x, start.y, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX, endY)\n            : PathUtil.arcToCurves(start.x, start.y, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, endX.x, endX.y);\n        if (points != null) {\n            for (let i = 0, ii = points.length; i < ii; i += 6) {\n                this.curveTo(points[i], points[i + 1], points[i + 2], points[i + 3], points[i + 4], points[i + 5]);\n            }\n        }\n        return this;\n    }\n    quadTo(x1, y1, x, y) {\n        const start = this.end || new Point();\n        const data = ['M', start.x, start.y];\n        if (typeof x1 === 'number') {\n            data.push('Q', x1, y1, x, y);\n        }\n        else {\n            const p = y1;\n            data.push(`Q`, x1.x, x1.y, p.x, p.y);\n        }\n        const path = Path.parse(data.join(' '));\n        this.appendSegment(path.segments.slice(1));\n        return this;\n    }\n    close() {\n        return this.appendSegment(Close.create());\n    }\n    drawPoints(points, options = {}) {\n        const raw = PathUtil.drawPoints(points, options);\n        const sub = Path.parse(raw);\n        if (sub && sub.segments) {\n            this.appendSegment(sub.segments);\n        }\n    }\n    bbox() {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        let bbox;\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                const segmentBBox = segment.bbox();\n                if (segmentBBox != null) {\n                    bbox = bbox ? bbox.union(segmentBBox) : segmentBBox;\n                }\n            }\n        }\n        if (bbox != null) {\n            return bbox;\n        }\n        // if the path has only invisible elements, return end point of last segment\n        const lastSegment = segments[count - 1];\n        return new Rectangle(lastSegment.end.x, lastSegment.end.y, 0, 0);\n    }\n    appendSegment(seg) {\n        const count = this.segments.length;\n        let previousSegment = count !== 0 ? this.segments[count - 1] : null;\n        let currentSegment;\n        const nextSegment = null;\n        if (Array.isArray(seg)) {\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.push(currentSegment);\n                previousSegment = currentSegment;\n            }\n        }\n        else if (seg != null && seg.isSegment) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.push(currentSegment);\n        }\n        return this;\n    }\n    insertSegment(index, seg) {\n        const count = this.segments.length;\n        if (index < 0) {\n            index = count + index + 1; // eslint-disable-line\n        }\n        if (index > count || index < 0) {\n            throw new Error('Index out of range.');\n        }\n        let currentSegment;\n        let previousSegment = null;\n        let nextSegment = null;\n        if (count !== 0) {\n            if (index >= 1) {\n                previousSegment = this.segments[index - 1];\n                nextSegment = previousSegment.nextSegment;\n            }\n            else {\n                previousSegment = null;\n                nextSegment = this.segments[0];\n            }\n        }\n        if (!Array.isArray(seg)) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.splice(index, 0, currentSegment);\n        }\n        else {\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.splice(index + i, 0, currentSegment);\n                previousSegment = currentSegment;\n            }\n        }\n        return this;\n    }\n    removeSegment(index) {\n        const idx = this.fixIndex(index);\n        const removedSegment = this.segments.splice(idx, 1)[0];\n        const previousSegment = removedSegment.previousSegment;\n        const nextSegment = removedSegment.nextSegment;\n        // link the previous and next segments together (if present)\n        if (previousSegment) {\n            previousSegment.nextSegment = nextSegment;\n        }\n        if (nextSegment) {\n            nextSegment.previousSegment = previousSegment;\n        }\n        if (removedSegment.isSubpathStart && nextSegment) {\n            this.updateSubpathStartSegment(nextSegment);\n        }\n        return removedSegment;\n    }\n    replaceSegment(index, seg) {\n        const idx = this.fixIndex(index);\n        let currentSegment;\n        const replacedSegment = this.segments[idx];\n        let previousSegment = replacedSegment.previousSegment;\n        const nextSegment = replacedSegment.nextSegment;\n        let updateSubpathStart = replacedSegment.isSubpathStart;\n        if (!Array.isArray(seg)) {\n            currentSegment = this.prepareSegment(seg, previousSegment, nextSegment);\n            this.segments.splice(idx, 1, currentSegment);\n            if (updateSubpathStart && currentSegment.isSubpathStart) {\n                // already updated by `prepareSegment`\n                updateSubpathStart = false;\n            }\n        }\n        else {\n            this.segments.splice(index, 1);\n            for (let i = 0, ii = seg.length; i < ii; i += 1) {\n                const segment = seg[i];\n                currentSegment = this.prepareSegment(segment, previousSegment, nextSegment);\n                this.segments.splice(index + i, 0, currentSegment);\n                previousSegment = currentSegment;\n                if (updateSubpathStart && currentSegment.isSubpathStart) {\n                    updateSubpathStart = false;\n                }\n            }\n        }\n        if (updateSubpathStart && nextSegment) {\n            this.updateSubpathStartSegment(nextSegment);\n        }\n    }\n    getSegment(index) {\n        const idx = this.fixIndex(index);\n        return this.segments[idx];\n    }\n    fixIndex(index) {\n        const length = this.segments.length;\n        if (length === 0) {\n            throw new Error('Path has no segments.');\n        }\n        let i = index;\n        while (i < 0) {\n            i = length + i;\n        }\n        if (i >= length || i < 0) {\n            throw new Error('Index out of range.');\n        }\n        return i;\n    }\n    segmentAt(ratio, options = {}) {\n        const index = this.segmentIndexAt(ratio, options);\n        if (!index) {\n            return null;\n        }\n        return this.getSegment(index);\n    }\n    segmentAtLength(length, options = {}) {\n        const index = this.segmentIndexAtLength(length, options);\n        if (!index)\n            return null;\n        return this.getSegment(index);\n    }\n    segmentIndexAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opt = this.getOptions(options);\n        const len = this.length(opt);\n        const length = len * rate;\n        return this.segmentIndexAtLength(length, opt);\n    }\n    segmentIndexAtLength(length, options = {}) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let memo = 0;\n        let lastVisibleIndex = null;\n        for (let i = 0; i < count; i += 1) {\n            const index = fromStart ? i : count - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const len = segment.length({ precision, subdivisions });\n            if (segment.isVisible) {\n                if (length <= memo + len) {\n                    return index;\n                }\n                lastVisibleIndex = index;\n            }\n            memo += len;\n        }\n        // If length requested is higher than the length of the path, return\n        // last visible segment index. If no visible segment, return null.\n        return lastVisibleIndex;\n    }\n    getSegmentSubdivisions(options = {}) {\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = [];\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segment.getSubdivisions({ precision });\n            segmentSubdivisions.push(subdivisions);\n        }\n        return segmentSubdivisions;\n    }\n    updateSubpathStartSegment(segment) {\n        let previous = segment.previousSegment;\n        let current = segment;\n        while (current && !current.isSubpathStart) {\n            // assign previous segment's subpath start segment to this segment\n            if (previous != null) {\n                current.subpathStartSegment = previous.subpathStartSegment;\n            }\n            else {\n                current.subpathStartSegment = null;\n            }\n            previous = current;\n            current = current.nextSegment;\n        }\n    }\n    prepareSegment(segment, previousSegment, nextSegment) {\n        segment.previousSegment = previousSegment;\n        segment.nextSegment = nextSegment;\n        if (previousSegment != null) {\n            previousSegment.nextSegment = segment;\n        }\n        if (nextSegment != null) {\n            nextSegment.previousSegment = segment;\n        }\n        let updateSubpathStart = segment;\n        if (segment.isSubpathStart) {\n            // move to\n            segment.subpathStartSegment = segment;\n            updateSubpathStart = nextSegment;\n        }\n        // assign previous segment's subpath start (or self if it is a subpath start) to subsequent segments\n        if (updateSubpathStart != null) {\n            this.updateSubpathStartSegment(updateSubpathStart);\n        }\n        return segment;\n    }\n    closestPoint(p, options = {}) {\n        const t = this.closestPointT(p, options);\n        if (!t) {\n            return null;\n        }\n        return this.pointAtT(t);\n    }\n    closestPointLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const t = this.closestPointT(p, opts);\n        if (!t) {\n            return 0;\n        }\n        return this.lengthAtT(t, opts);\n    }\n    closestPointNormalizedLength(p, options = {}) {\n        const opts = this.getOptions(options);\n        const cpLength = this.closestPointLength(p, opts);\n        if (cpLength === 0) {\n            return 0;\n        }\n        const length = this.length(opts);\n        if (length === 0) {\n            return 0;\n        }\n        return cpLength / length;\n    }\n    closestPointT(p, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let closestPointT;\n        let minSquaredDistance = Infinity;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            if (segment.isVisible) {\n                const segmentClosestPointT = segment.closestPointT(p, {\n                    precision,\n                    subdivisions,\n                });\n                const segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                const squaredDistance = GeometryUtil.squaredLength(segmentClosestPoint, p);\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointT = { segmentIndex: i, value: segmentClosestPointT };\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n        if (closestPointT) {\n            return closestPointT;\n        }\n        return { segmentIndex: this.segments.length - 1, value: 1 };\n    }\n    closestPointTangent(p, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let closestPointTangent;\n        let minSquaredDistance = Infinity;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            if (segment.isDifferentiable()) {\n                const segmentClosestPointT = segment.closestPointT(p, {\n                    precision,\n                    subdivisions,\n                });\n                const segmentClosestPoint = segment.pointAtT(segmentClosestPointT);\n                const squaredDistance = GeometryUtil.squaredLength(segmentClosestPoint, p);\n                if (squaredDistance < minSquaredDistance) {\n                    closestPointTangent = segment.tangentAtT(segmentClosestPointT);\n                    minSquaredDistance = squaredDistance;\n                }\n            }\n        }\n        if (closestPointTangent) {\n            return closestPointTangent;\n        }\n        return null;\n    }\n    containsPoint(p, options = {}) {\n        const polylines = this.toPolylines(options);\n        if (!polylines) {\n            return false;\n        }\n        let numIntersections = 0;\n        for (let i = 0, ii = polylines.length; i < ii; i += 1) {\n            const polyline = polylines[i];\n            if (polyline.containsPoint(p)) {\n                numIntersections += 1;\n            }\n        }\n        // returns `true` for odd numbers of intersections (even-odd algorithm)\n        return numIntersections % 2 === 1;\n    }\n    pointAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        if (ratio <= 0) {\n            return this.start.clone();\n        }\n        if (ratio >= 1) {\n            return this.end.clone();\n        }\n        const opts = this.getOptions(options);\n        const pathLength = this.length(opts);\n        const length = pathLength * ratio;\n        return this.pointAtLength(length, opts);\n    }\n    pointAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        if (length === 0) {\n            return this.start.clone();\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let lastVisibleSegment;\n        let memo = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const d = segment.length({\n                precision,\n                subdivisions,\n            });\n            if (segment.isVisible) {\n                if (length <= memo + d) {\n                    return segment.pointAtLength((fromStart ? 1 : -1) * (length - memo), {\n                        precision,\n                        subdivisions,\n                    });\n                }\n                lastVisibleSegment = segment;\n            }\n            memo += d;\n        }\n        // if length requested is higher than the length of the path,\n        // return last visible segment endpoint\n        if (lastVisibleSegment) {\n            return fromStart ? lastVisibleSegment.end : lastVisibleSegment.start;\n        }\n        // if no visible segment, return last segment end point\n        const lastSegment = this.segments[this.segments.length - 1];\n        return lastSegment.end.clone();\n    }\n    pointAtT(t) {\n        const segments = this.segments;\n        const numSegments = segments.length;\n        if (numSegments === 0)\n            return null; // if segments is an empty array\n        const segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0)\n            return segments[0].pointAtT(0);\n        if (segmentIndex >= numSegments) {\n            return segments[numSegments - 1].pointAtT(1);\n        }\n        const tValue = GeometryUtil.clamp(t.value, 0, 1);\n        return segments[segmentIndex].pointAtT(tValue);\n    }\n    divideAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opts = this.getOptions(options);\n        const len = this.length(opts);\n        const length = len * rate;\n        return this.divideAtLength(length, opts);\n    }\n    divideAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let memo = 0;\n        let divided;\n        let dividedSegmentIndex;\n        let lastValidSegment;\n        let lastValidSegmentIndex;\n        let t;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.getSegment(index);\n            const subdivisions = segmentSubdivisions[index];\n            const opts = { precision, subdivisions };\n            const len = segment.length(opts);\n            if (segment.isDifferentiable()) {\n                lastValidSegment = segment;\n                lastValidSegmentIndex = index;\n                if (length <= memo + len) {\n                    dividedSegmentIndex = index;\n                    divided = segment.divideAtLength((fromStart ? 1 : -1) * (length - memo), opts);\n                    break;\n                }\n            }\n            memo += len;\n        }\n        if (!lastValidSegment) {\n            return null;\n        }\n        if (!divided) {\n            dividedSegmentIndex = lastValidSegmentIndex;\n            t = fromStart ? 1 : 0;\n            divided = lastValidSegment.divideAtT(t);\n        }\n        // create a copy of this path and replace the identified segment with its two divided parts:\n        const pathCopy = this.clone();\n        const index = dividedSegmentIndex;\n        pathCopy.replaceSegment(index, divided);\n        const divisionStartIndex = index;\n        let divisionMidIndex = index + 1;\n        let divisionEndIndex = index + 2;\n        // do not insert the part if it looks like a point\n        if (!divided[0].isDifferentiable()) {\n            pathCopy.removeSegment(divisionStartIndex);\n            divisionMidIndex -= 1;\n            divisionEndIndex -= 1;\n        }\n        // insert a Moveto segment to ensure secondPath will be valid:\n        const movetoEnd = pathCopy.getSegment(divisionMidIndex).start;\n        pathCopy.insertSegment(divisionMidIndex, Path.createSegment('M', movetoEnd));\n        divisionEndIndex += 1;\n        // do not insert the part if it looks like a point\n        if (!divided[1].isDifferentiable()) {\n            pathCopy.removeSegment(divisionEndIndex - 1);\n            divisionEndIndex -= 1;\n        }\n        // ensure that Closepath segments in secondPath will be assigned correct subpathStartSegment:\n        const secondPathSegmentIndexConversion = divisionEndIndex - divisionStartIndex - 1;\n        for (let i = divisionEndIndex, ii = pathCopy.segments.length; i < ii; i += 1) {\n            const originalSegment = this.getSegment(i - secondPathSegmentIndexConversion);\n            const segment = pathCopy.getSegment(i);\n            if (segment.type === 'Z' &&\n                !originalSegment.subpathStartSegment.end.equals(segment.subpathStartSegment.end)) {\n                // pathCopy segment's subpathStartSegment is different from original segment's one\n                // convert this Closepath segment to a Lineto and replace it in pathCopy\n                const convertedSegment = Path.createSegment('L', originalSegment.end);\n                pathCopy.replaceSegment(i, convertedSegment);\n            }\n        }\n        // distribute pathCopy segments into two paths and return those:\n        const firstPath = new Path(pathCopy.segments.slice(0, divisionMidIndex));\n        const secondPath = new Path(pathCopy.segments.slice(divisionMidIndex));\n        return [firstPath, secondPath];\n    }\n    intersectsWithLine(line, options = {}) {\n        const polylines = this.toPolylines(options);\n        if (polylines == null) {\n            return null;\n        }\n        let intersections = null;\n        for (let i = 0, ii = polylines.length; i < ii; i += 1) {\n            const polyline = polylines[i];\n            const intersection = line.intersect(polyline);\n            if (intersection) {\n                if (intersections == null) {\n                    intersections = [];\n                }\n                if (Array.isArray(intersection)) {\n                    intersections.push(...intersection);\n                }\n                else {\n                    intersections.push(intersection);\n                }\n            }\n        }\n        return intersections;\n    }\n    isDifferentiable() {\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            if (segment.isDifferentiable()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    isValid() {\n        const segments = this.segments;\n        const isValid = segments.length === 0 || segments[0].type === 'M';\n        return isValid;\n    }\n    length(options = {}) {\n        if (this.segments.length === 0) {\n            return 0;\n        }\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let length = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            length += segment.length({ subdivisions });\n        }\n        return length;\n    }\n    lengthAtT(t, options = {}) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return 0;\n        }\n        let segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) {\n            return 0;\n        }\n        let tValue = GeometryUtil.clamp(t.value, 0, 1);\n        if (segmentIndex >= count) {\n            segmentIndex = count - 1;\n            tValue = 1;\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let length = 0;\n        for (let i = 0; i < segmentIndex; i += 1) {\n            const segment = this.segments[i];\n            const subdivisions = segmentSubdivisions[i];\n            length += segment.length({ precision, subdivisions });\n        }\n        const segment = this.segments[segmentIndex];\n        const subdivisions = segmentSubdivisions[segmentIndex];\n        length += segment.lengthAtT(tValue, { precision, subdivisions });\n        return length;\n    }\n    tangentAt(ratio, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        const rate = GeometryUtil.clamp(ratio, 0, 1);\n        const opts = this.getOptions(options);\n        const len = this.length(opts);\n        const length = len * rate;\n        return this.tangentAtLength(length, opts);\n    }\n    tangentAtLength(length, options = {}) {\n        if (this.segments.length === 0) {\n            return null;\n        }\n        let fromStart = true;\n        if (length < 0) {\n            fromStart = false;\n            length = -length; // eslint-disable-line\n        }\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        let lastValidSegment;\n        let memo = 0;\n        for (let i = 0, ii = this.segments.length; i < ii; i += 1) {\n            const index = fromStart ? i : ii - 1 - i;\n            const segment = this.segments[index];\n            const subdivisions = segmentSubdivisions[index];\n            const len = segment.length({ precision, subdivisions });\n            if (segment.isDifferentiable()) {\n                if (length <= memo + len) {\n                    return segment.tangentAtLength((fromStart ? 1 : -1) * (length - memo), {\n                        precision,\n                        subdivisions,\n                    });\n                }\n                lastValidSegment = segment;\n            }\n            memo += len;\n        }\n        // if length requested is higher than the length of the path, return tangent of endpoint of last valid segment\n        if (lastValidSegment) {\n            const t = fromStart ? 1 : 0;\n            return lastValidSegment.tangentAtT(t);\n        }\n        // if no valid segment, return null\n        return null;\n    }\n    tangentAtT(t) {\n        const count = this.segments.length;\n        if (count === 0) {\n            return null;\n        }\n        const segmentIndex = t.segmentIndex;\n        if (segmentIndex < 0) {\n            return this.segments[0].tangentAtT(0);\n        }\n        if (segmentIndex >= count) {\n            return this.segments[count - 1].tangentAtT(1);\n        }\n        const tValue = GeometryUtil.clamp(t.value, 0, 1);\n        return this.segments[segmentIndex].tangentAtT(tValue);\n    }\n    getPrecision(options = {}) {\n        return options.precision == null ? this.PRECISION : options.precision;\n    }\n    getSubdivisions(options = {}) {\n        if (options.segmentSubdivisions == null) {\n            const precision = this.getPrecision(options);\n            return this.getSegmentSubdivisions({ precision });\n        }\n        return options.segmentSubdivisions;\n    }\n    getOptions(options = {}) {\n        const precision = this.getPrecision(options);\n        const segmentSubdivisions = this.getSubdivisions(options);\n        return { precision, segmentSubdivisions };\n    }\n    toPoints(options = {}) {\n        const segments = this.segments;\n        const count = segments.length;\n        if (count === 0) {\n            return null;\n        }\n        const segmentSubdivisions = this.getSubdivisions(options);\n        const points = [];\n        let partialPoints = [];\n        for (let i = 0; i < count; i += 1) {\n            const segment = segments[i];\n            if (segment.isVisible) {\n                const divisions = segmentSubdivisions[i];\n                if (divisions.length > 0) {\n                    // eslint-disable-next-line no-loop-func\n                    divisions.forEach((c) => partialPoints.push(c.start));\n                }\n                else {\n                    partialPoints.push(segment.start);\n                }\n            }\n            else if (partialPoints.length > 0) {\n                partialPoints.push(segments[i - 1].end);\n                points.push(partialPoints);\n                partialPoints = [];\n            }\n        }\n        if (partialPoints.length > 0) {\n            partialPoints.push(this.end);\n            points.push(partialPoints);\n        }\n        return points;\n    }\n    toPolylines(options = {}) {\n        const points = this.toPoints(options);\n        if (!points) {\n            return null;\n        }\n        return points.map((arr) => new Polyline(arr));\n    }\n    scale(sx, sy, origin) {\n        this.segments.forEach((s) => s.scale(sx, sy, origin));\n        return this;\n    }\n    rotate(angle, origin) {\n        this.segments.forEach((segment) => segment.rotate(angle, origin));\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'number') {\n            this.segments.forEach((s) => s.translate(tx, ty));\n        }\n        else {\n            this.segments.forEach((s) => s.translate(tx));\n        }\n        return this;\n    }\n    clone() {\n        const path = new Path();\n        this.segments.forEach((s) => path.appendSegment(s.clone()));\n        return path;\n    }\n    equals(p) {\n        if (p == null) {\n            return false;\n        }\n        const segments = this.segments;\n        const otherSegments = p.segments;\n        const count = segments.length;\n        if (otherSegments.length !== count) {\n            return false;\n        }\n        for (let i = 0; i < count; i += 1) {\n            const a = segments[i];\n            const b = otherSegments[i];\n            if (a.type !== b.type || !a.equals(b)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    toJSON() {\n        return this.segments.map((s) => s.toJSON());\n    }\n    serialize() {\n        if (!this.isValid()) {\n            throw new Error('Invalid path segments.');\n        }\n        return this.segments.map((s) => s.serialize()).join(' ');\n    }\n    toString() {\n        return this.serialize();\n    }\n}\n(function (Path) {\n    function isPath(instance) {\n        return instance != null && instance instanceof Path;\n    }\n    Path.isPath = isPath;\n})(Path || (Path = {}));\n(function (Path) {\n    function parse(pathData) {\n        if (!pathData) {\n            return new Path();\n        }\n        const path = new Path();\n        const commandRe = /(?:[a-zA-Z] *)(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)? *,? *)|(?:-?\\.\\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\\d|-|\\.)/g;\n        const commands = Path.normalize(pathData).match(commandRe);\n        if (commands != null) {\n            for (let i = 0, ii = commands.length; i < ii; i += 1) {\n                const command = commands[i];\n                const argRe = /(?:[a-zA-Z])|(?:(?:-?\\d+(?:\\.\\d+)?(?:e[-+]?\\d+)?))|(?:(?:-?\\.\\d+))/g;\n                const args = command.match(argRe); // [type, coordinate1, coordinate2...]\n                if (args != null) {\n                    const type = args[0];\n                    const coords = args.slice(1).map((a) => +a);\n                    const segment = createSegment.call(null, type, ...coords);\n                    path.appendSegment(segment);\n                }\n            }\n        }\n        return path;\n    }\n    Path.parse = parse;\n    function createSegment(type, ...args) {\n        if (type === 'M') {\n            return MoveTo.create.call(null, ...args);\n        }\n        if (type === 'L') {\n            return LineTo.create.call(null, ...args);\n        }\n        if (type === 'C') {\n            return CurveTo.create.call(null, ...args);\n        }\n        if (type === 'z' || type === 'Z') {\n            return Close.create();\n        }\n        throw new Error(`Invalid path segment type \"${type}\"`);\n    }\n    Path.createSegment = createSegment;\n})(Path || (Path = {}));\n(function (Path) {\n    Path.normalize = normalizePathData;\n    Path.isValid = PathUtil.isValid;\n    Path.drawArc = PathUtil.drawArc;\n    Path.drawPoints = PathUtil.drawPoints;\n    Path.arcToCurves = PathUtil.arcToCurves;\n})(Path || (Path = {}));\n//# sourceMappingURL=path.js.map","import { StringExt, FunctionExt, Platform } from '@antv/x6-common';\nexport class Registry {\n    constructor(options) {\n        this.options = Object.assign({}, options);\n        this.data = this.options.data || {};\n        this.register = this.register.bind(this);\n        this.unregister = this.unregister.bind(this);\n    }\n    get names() {\n        return Object.keys(this.data);\n    }\n    register(name, options, force = false) {\n        if (typeof name === 'object') {\n            Object.entries(name).forEach(([key, val]) => {\n                this.register(key, val, options);\n            });\n            return;\n        }\n        if (this.exist(name) && !force && !Platform.isApplyingHMR()) {\n            this.onDuplicated(name);\n        }\n        const process = this.options.process;\n        const entity = process\n            ? FunctionExt.call(process, this, name, options)\n            : options;\n        this.data[name] = entity;\n        return entity;\n    }\n    unregister(name) {\n        const entity = name ? this.data[name] : null;\n        delete this.data[name];\n        return entity;\n    }\n    get(name) {\n        return name ? this.data[name] : null;\n    }\n    exist(name) {\n        return name ? this.data[name] != null : false;\n    }\n    onDuplicated(name) {\n        // eslint-disable-next-line no-useless-catch\n        try {\n            // race\n            if (this.options.onConflict) {\n                FunctionExt.call(this.options.onConflict, this, name);\n            }\n            throw new Error(`${StringExt.upperFirst(this.options.type)} with name '${name}' already registered.`);\n        }\n        catch (err) {\n            throw err;\n        }\n    }\n    onNotFound(name, prefix) {\n        throw new Error(this.getSpellingSuggestion(name, prefix));\n    }\n    getSpellingSuggestion(name, prefix) {\n        const suggestion = this.getSpellingSuggestionForName(name);\n        const prefixed = prefix\n            ? `${prefix} ${StringExt.lowerFirst(this.options.type)}`\n            : this.options.type;\n        return (\n        // eslint-disable-next-line\n        `${StringExt.upperFirst(prefixed)} with name '${name}' does not exist.${suggestion ? ` Did you mean '${suggestion}'?` : ''}`);\n    }\n    getSpellingSuggestionForName(name) {\n        return StringExt.getSpellingSuggestion(name, Object.keys(this.data), (candidate) => candidate);\n    }\n}\n(function (Registry) {\n    function create(options) {\n        return new Registry(options);\n    }\n    Registry.create = create;\n})(Registry || (Registry = {}));\n//# sourceMappingURL=registry.js.map","import { Dom } from '@antv/x6-common';\nexport const dot = {\n    color: '#aaaaaa',\n    thickness: 1,\n    markup: 'rect',\n    update(elem, options) {\n        const width = options.thickness * options.sx;\n        const height = options.thickness * options.sy;\n        Dom.attr(elem, {\n            width,\n            height,\n            rx: width,\n            ry: height,\n            fill: options.color,\n        });\n    },\n};\n//# sourceMappingURL=dot.js.map","import { Dom } from '@antv/x6-common';\nexport const fixedDot = {\n    color: '#aaaaaa',\n    thickness: 1,\n    markup: 'rect',\n    update(elem, options) {\n        const size = options.sx <= 1 ? options.thickness * options.sx : options.thickness;\n        Dom.attr(elem, {\n            width: size,\n            height: size,\n            rx: size,\n            ry: size,\n            fill: options.color,\n        });\n    },\n};\n//# sourceMappingURL=fixed-dot.js.map","import { Dom } from '@antv/x6-common';\nexport const mesh = {\n    color: 'rgba(224,224,224,1)',\n    thickness: 1,\n    markup: 'path',\n    update(elem, options) {\n        let d;\n        const width = options.width;\n        const height = options.height;\n        const thickness = options.thickness;\n        if (width - thickness >= 0 && height - thickness >= 0) {\n            d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n        }\n        else {\n            d = 'M 0 0 0 0';\n        }\n        Dom.attr(elem, {\n            d,\n            stroke: options.color,\n            'stroke-width': options.thickness,\n        });\n    },\n};\n//# sourceMappingURL=mesh.js.map","import { Dom } from '@antv/x6-common';\nexport const doubleMesh = [\n    {\n        color: 'rgba(224,224,224,1)',\n        thickness: 1,\n        markup: 'path',\n        update(elem, options) {\n            let d;\n            const width = options.width;\n            const height = options.height;\n            const thickness = options.thickness;\n            if (width - thickness >= 0 && height - thickness >= 0) {\n                d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n            }\n            else {\n                d = 'M 0 0 0 0';\n            }\n            Dom.attr(elem, {\n                d,\n                stroke: options.color,\n                'stroke-width': options.thickness,\n            });\n        },\n    },\n    {\n        color: 'rgba(224,224,224,0.2)',\n        thickness: 3,\n        factor: 4,\n        markup: 'path',\n        update(elem, options) {\n            let d;\n            const factor = options.factor || 1;\n            const width = options.width * factor;\n            const height = options.height * factor;\n            const thickness = options.thickness;\n            if (width - thickness >= 0 && height - thickness >= 0) {\n                d = ['M', width, 0, 'H0 M0 0 V0', height].join(' ');\n            }\n            else {\n                d = 'M 0 0 0 0';\n            }\n            // update wrapper size\n            options.width = width;\n            options.height = height;\n            Dom.attr(elem, {\n                d,\n                stroke: options.color,\n                'stroke-width': options.thickness,\n            });\n        },\n    },\n];\n//# sourceMappingURL=double-mesh.js.map","import { Dom, Vector } from '@antv/x6-common';\nimport { Registry } from '../registry';\nimport * as patterns from './main';\nexport class Grid {\n    constructor() {\n        this.patterns = {};\n        this.root = Vector.create(Dom.createSvgDocument(), {\n            width: '100%',\n            height: '100%',\n        }, [Dom.createSvgElement('defs')]).node;\n    }\n    add(id, elem) {\n        const firstChild = this.root.childNodes[0];\n        if (firstChild) {\n            firstChild.appendChild(elem);\n        }\n        this.patterns[id] = elem;\n        Vector.create('rect', {\n            width: '100%',\n            height: '100%',\n            fill: `url(#${id})`,\n        }).appendTo(this.root);\n    }\n    get(id) {\n        return this.patterns[id];\n    }\n    has(id) {\n        return this.patterns[id] != null;\n    }\n}\n(function (Grid) {\n    Grid.presets = patterns;\n    Grid.registry = Registry.create({\n        type: 'grid',\n    });\n    Grid.registry.register(Grid.presets, true);\n})(Grid || (Grid = {}));\n//# sourceMappingURL=index.js.map","export const flipX = function (img) {\n    // d b\n    // d b\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = width * 2;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    // left image\n    ctx.drawImage(img, 0, 0, width, height);\n    // flipped right image\n    ctx.translate(2 * width, 0);\n    ctx.scale(-1, 1);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-x.js.map","export const flipY = function (img) {\n    // d d\n    // q q\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = width;\n    canvas.height = height * 2;\n    const ctx = canvas.getContext('2d');\n    // top image\n    ctx.drawImage(img, 0, 0, width, height);\n    // flipped bottom image\n    ctx.translate(0, 2 * height);\n    ctx.scale(1, -1);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-y.js.map","export const flipXY = function (img) {\n    // d b\n    // q p\n    const canvas = document.createElement('canvas');\n    const width = img.width;\n    const height = img.height;\n    canvas.width = 2 * width;\n    canvas.height = 2 * height;\n    const ctx = canvas.getContext('2d');\n    // top-left image\n    ctx.drawImage(img, 0, 0, width, height);\n    // xy-flipped bottom-right image\n    ctx.setTransform(-1, 0, 0, -1, canvas.width, canvas.height);\n    ctx.drawImage(img, 0, 0, width, height);\n    // x-flipped top-right image\n    ctx.setTransform(-1, 0, 0, 1, canvas.width, 0);\n    ctx.drawImage(img, 0, 0, width, height);\n    // y-flipped bottom-left image\n    ctx.setTransform(1, 0, 0, -1, 0, canvas.height);\n    ctx.drawImage(img, 0, 0, width, height);\n    return canvas;\n};\n//# sourceMappingURL=flip-xy.js.map","import { Angle } from '@antv/x6-geometry';\nexport const watermark = function (img, options) {\n    const width = img.width;\n    const height = img.height;\n    const canvas = document.createElement('canvas');\n    canvas.width = width * 3;\n    canvas.height = height * 3;\n    const ctx = canvas.getContext('2d');\n    const angle = options.angle != null ? -options.angle : -20;\n    const radians = Angle.toRad(angle);\n    const stepX = canvas.width / 4;\n    const stepY = canvas.height / 4;\n    for (let i = 0; i < 4; i += 1) {\n        for (let j = 0; j < 4; j += 1) {\n            if ((i + j) % 2 > 0) {\n                ctx.setTransform(1, 0, 0, 1, (2 * i - 1) * stepX, (2 * j - 1) * stepY);\n                ctx.rotate(radians);\n                ctx.drawImage(img, -width / 2, -height / 2, width, height);\n            }\n        }\n    }\n    return canvas;\n};\n//# sourceMappingURL=watermark.js.map","/* eslint-disable @typescript-eslint/ban-types */\nimport { Registry } from '../registry';\nimport * as patterns from './main';\nexport var Background;\n(function (Background) {\n    Background.presets = Object.assign({}, patterns);\n    Background.presets['flip-x'] = patterns.flipX;\n    Background.presets['flip-y'] = patterns.flipY;\n    Background.presets['flip-xy'] = patterns.flipXY;\n    Background.registry = Registry.create({\n        type: 'background pattern',\n    });\n    Background.registry.register(Background.presets, true);\n})(Background || (Background = {}));\n//# sourceMappingURL=index.js.map","import { Registry } from '../registry';\nimport * as filters from './main';\nexport var Filter;\n(function (Filter) {\n    Filter.presets = filters;\n    Filter.registry = Registry.create({\n        type: 'filter',\n    });\n    Filter.registry.register(Filter.presets, true);\n})(Filter || (Filter = {}));\n//# sourceMappingURL=index.js.map","export function getString(value, defaultValue) {\n    return value != null ? value : defaultValue;\n}\nexport function getNumber(num, defaultValue) {\n    return num != null && Number.isFinite(num) ? num : defaultValue;\n}\n//# sourceMappingURL=util.js.map","import { getString, getNumber } from './util';\nexport function outline(args = {}) {\n    const color = getString(args.color, 'blue');\n    const width = getNumber(args.width, 1);\n    const margin = getNumber(args.margin, 2);\n    const opacity = getNumber(args.opacity, 1);\n    const innerRadius = margin;\n    const outerRadius = margin + width;\n    return `\n    <filter>\n      <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>\n      <feMorphology in=\"SourceAlpha\" result=\"morphedOuter\" operator=\"dilate\" radius=\"${outerRadius}\" />\n      <feMorphology in=\"SourceAlpha\" result=\"morphedInner\" operator=\"dilate\" radius=\"${innerRadius}\" />\n      <feComposite result=\"morphedOuterColored\" in=\"colored\" in2=\"morphedOuter\" operator=\"in\"/>\n      <feComposite operator=\"xor\" in=\"morphedOuterColored\" in2=\"morphedInner\" result=\"outline\"/>\n      <feMerge>\n        <feMergeNode in=\"outline\"/>\n        <feMergeNode in=\"SourceGraphic\"/>\n      </feMerge>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=outline.js.map","import { getString, getNumber } from './util';\nexport function highlight(args = {}) {\n    const color = getString(args.color, 'red');\n    const blur = getNumber(args.blur, 0);\n    const width = getNumber(args.width, 1);\n    const opacity = getNumber(args.opacity, 1);\n    return `\n      <filter>\n        <feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/>\n        <feMorphology result=\"morphed\" in=\"SourceGraphic\" operator=\"dilate\" radius=\"${width}\"/>\n        <feComposite result=\"composed\" in=\"colored\" in2=\"morphed\" operator=\"in\"/>\n        <feGaussianBlur result=\"blured\" in=\"composed\" stdDeviation=\"${blur}\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"blured\" mode=\"normal\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=highlight.js.map","import { getNumber } from './util';\nexport function blur(args = {}) {\n    const x = getNumber(args.x, 2);\n    const stdDeviation = args.y != null && Number.isFinite(args.y) ? [x, args.y] : x;\n    return `\n    <filter>\n      <feGaussianBlur stdDeviation=\"${stdDeviation}\"/>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=blur.js.map","import { getString, getNumber } from './util';\nexport function dropShadow(args = {}) {\n    const dx = getNumber(args.dx, 0);\n    const dy = getNumber(args.dy, 0);\n    const color = getString(args.color, 'black');\n    const blur = getNumber(args.blur, 4);\n    const opacity = getNumber(args.opacity, 1);\n    return 'SVGFEDropShadowElement' in window\n        ? `<filter>\n         <feDropShadow stdDeviation=\"${blur}\" dx=\"${dx}\" dy=\"${dy}\" flood-color=\"${color}\" flood-opacity=\"${opacity}\" />\n       </filter>`.trim()\n        : `<filter>\n         <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${blur}\" />\n         <feOffset dx=\"${dx}\" dy=\"${dy}\" result=\"offsetblur\" />\n         <feFlood flood-color=\"${color}\" />\n         <feComposite in2=\"offsetblur\" operator=\"in\" />\n         <feComponentTransfer>\n           <feFuncA type=\"linear\" slope=\"${opacity}\" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in=\"SourceGraphic\"/>\n         </feMerge>\n       </filter>`.trim();\n}\n//# sourceMappingURL=drop-shadow.js.map","import { getNumber } from './util';\nexport function grayScale(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const a = 0.2126 + 0.7874 * (1 - amount);\n    const b = 0.7152 - 0.7152 * (1 - amount);\n    const c = 0.0722 - 0.0722 * (1 - amount);\n    const d = 0.2126 - 0.2126 * (1 - amount);\n    const e = 0.7152 + 0.2848 * (1 - amount);\n    const f = 0.0722 - 0.0722 * (1 - amount);\n    const g = 0.2126 - 0.2126 * (1 - amount);\n    const h = 0.0722 + 0.9278 * (1 - amount);\n    return `\n    <filter>\n      <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0\"/>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=gray-scale.js.map","import { getNumber } from './util';\nexport function sepia(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const a = 0.393 + 0.607 * (1 - amount);\n    const b = 0.769 - 0.769 * (1 - amount);\n    const c = 0.189 - 0.189 * (1 - amount);\n    const d = 0.349 - 0.349 * (1 - amount);\n    const e = 0.686 + 0.314 * (1 - amount);\n    const f = 0.168 - 0.168 * (1 - amount);\n    const g = 0.272 - 0.272 * (1 - amount);\n    const h = 0.534 - 0.534 * (1 - amount);\n    const i = 0.131 + 0.869 * (1 - amount);\n    return `\n      <filter>\n        <feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=sepia.js.map","import { getNumber } from './util';\nexport function saturate(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    return `\n      <filter>\n        <feColorMatrix type=\"saturate\" values=\"${1 - amount}\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=saturate.js.map","import { getNumber } from './util';\nexport function hueRotate(args = {}) {\n    const angle = getNumber(args.angle, 0);\n    return `\n      <filter>\n        <feColorMatrix type=\"hueRotate\" values=\"${angle}\"/>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=hue-rotate.js.map","import { getNumber } from './util';\nexport function invert(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const amount2 = 1 - amount;\n    return `\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n          <feFuncG type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n          <feFuncB type=\"table\" tableValues=\"${amount} ${amount2}\"/>\n        </feComponentTransfer>\n      </filter>\n    `.trim();\n}\n//# sourceMappingURL=invert.js.map","import { getNumber } from './util';\nexport function brightness(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    return `\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type=\"linear\" slope=\"${amount}\"/>\n        <feFuncG type=\"linear\" slope=\"${amount}\"/>\n        <feFuncB type=\"linear\" slope=\"${amount}\"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=brightness.js.map","import { getNumber } from './util';\nexport function contrast(args = {}) {\n    const amount = getNumber(args.amount, 1);\n    const amount2 = 0.5 - amount / 2;\n    return `\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n        <feFuncG type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n        <feFuncB type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim();\n}\n//# sourceMappingURL=contrast.js.map","export const raw = {\n    xlinkHref: 'xlink:href',\n    xlinkShow: 'xlink:show',\n    xlinkRole: 'xlink:role',\n    xlinkType: 'xlink:type',\n    xlinkArcrole: 'xlink:arcrole',\n    xlinkTitle: 'xlink:title',\n    xlinkActuate: 'xlink:actuate',\n    xmlSpace: 'xml:space',\n    xmlBase: 'xml:base',\n    xmlLang: 'xml:lang',\n    preserveAspectRatio: 'preserveAspectRatio',\n    requiredExtension: 'requiredExtension',\n    requiredFeatures: 'requiredFeatures',\n    systemLanguage: 'systemLanguage',\n    externalResourcesRequired: 'externalResourceRequired',\n};\n//# sourceMappingURL=raw.js.map","import { Point, Path, Polyline } from '@antv/x6-geometry';\nimport { NumberExt, FunctionExt, Dom } from '@antv/x6-common';\nexport const ref = {\n// We do not set `ref` attribute directly on an element.\n// The attribute itself does not qualify for relative positioning.\n};\n// if `refX` is in [0, 1] then `refX` is a fraction of bounding box width\n// if `refX` is < 0 then `refX`'s absolute values is the right coordinate of the bounding box\n// otherwise, `refX` is the left coordinate of the bounding box\nexport const refX = {\n    position: positionWrapper('x', 'width', 'origin'),\n};\nexport const refY = {\n    position: positionWrapper('y', 'height', 'origin'),\n};\n// `ref-dx` and `ref-dy` define the offset of the subelement relative to the right and/or bottom\n// coordinate of the reference element.\nexport const refDx = {\n    position: positionWrapper('x', 'width', 'corner'),\n};\nexport const refDy = {\n    position: positionWrapper('y', 'height', 'corner'),\n};\n// 'ref-width'/'ref-height' defines the width/height of the subelement relatively to\n// the reference element size\n// val in 0..1         ref-width = 0.75 sets the width to 75% of the ref. el. width\n// val < 0 || val > 1  ref-height = -20 sets the height to the ref. el. height shorter by 20\nexport const refWidth = {\n    set: setWrapper('width', 'width'),\n};\nexport const refHeight = {\n    set: setWrapper('height', 'height'),\n};\nexport const refRx = {\n    set: setWrapper('rx', 'width'),\n};\nexport const refRy = {\n    set: setWrapper('ry', 'height'),\n};\nexport const refRInscribed = {\n    set: ((attrName) => {\n        const widthFn = setWrapper(attrName, 'width');\n        const heightFn = setWrapper(attrName, 'height');\n        return function (value, options) {\n            const refBBox = options.refBBox;\n            const fn = refBBox.height > refBBox.width ? widthFn : heightFn;\n            return FunctionExt.call(fn, this, value, options);\n        };\n    })('r'),\n};\nexport const refRCircumscribed = {\n    set(val, { refBBox }) {\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        const diagonalLength = Math.sqrt(refBBox.height * refBBox.height + refBBox.width * refBBox.width);\n        let rValue;\n        if (Number.isFinite(value)) {\n            if (percentage || (value >= 0 && value <= 1)) {\n                rValue = value * diagonalLength;\n            }\n            else {\n                rValue = Math.max(value + diagonalLength, 0);\n            }\n        }\n        return { r: rValue };\n    },\n};\nexport const refCx = {\n    set: setWrapper('cx', 'width'),\n};\nexport const refCy = {\n    set: setWrapper('cy', 'height'),\n};\nexport const refDResetOffset = {\n    set: dWrapper({ resetOffset: true }),\n};\nexport const refDKeepOffset = {\n    set: dWrapper({ resetOffset: false }),\n};\nexport const refPointsResetOffset = {\n    set: pointsWrapper({ resetOffset: true }),\n};\nexport const refPointsKeepOffset = {\n    set: pointsWrapper({ resetOffset: false }),\n};\n// aliases\n// -------\nexport const refR = refRInscribed;\nexport const refD = refDResetOffset;\nexport const refPoints = refPointsResetOffset;\n// Allows to combine both absolute and relative positioning\n// refX: 50%, refX2: 20\nexport const refX2 = refX;\nexport const refY2 = refY;\nexport const refWidth2 = refWidth;\nexport const refHeight2 = refHeight;\n// utils\n// -----\nfunction positionWrapper(axis, dimension, origin) {\n    return (val, { refBBox }) => {\n        if (val == null) {\n            return null;\n        }\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        let delta;\n        if (Number.isFinite(value)) {\n            const refOrigin = refBBox[origin];\n            if (percentage || (value > 0 && value < 1)) {\n                delta = refOrigin[axis] + refBBox[dimension] * value;\n            }\n            else {\n                delta = refOrigin[axis] + value;\n            }\n        }\n        const point = new Point();\n        point[axis] = delta || 0;\n        return point;\n    };\n}\nfunction setWrapper(attrName, dimension) {\n    return function (val, { refBBox }) {\n        let value = parseFloat(val);\n        const percentage = NumberExt.isPercentage(val);\n        if (percentage) {\n            value /= 100;\n        }\n        const attrs = {};\n        if (Number.isFinite(value)) {\n            const attrValue = percentage || (value >= 0 && value <= 1)\n                ? value * refBBox[dimension]\n                : Math.max(value + refBBox[dimension], 0);\n            attrs[attrName] = attrValue;\n        }\n        return attrs;\n    };\n}\nfunction shapeWrapper(shapeConstructor, options) {\n    const cacheName = 'x6-shape';\n    const resetOffset = options && options.resetOffset;\n    return function (value, { elem, refBBox }) {\n        let cache = Dom.data(elem, cacheName);\n        if (!cache || cache.value !== value) {\n            // only recalculate if value has changed\n            const cachedShape = shapeConstructor(value);\n            cache = {\n                value,\n                shape: cachedShape,\n                shapeBBox: cachedShape.bbox(),\n            };\n            Dom.data(elem, cacheName, cache);\n        }\n        const shape = cache.shape.clone();\n        const shapeBBox = cache.shapeBBox.clone();\n        const shapeOrigin = shapeBBox.getOrigin();\n        const refOrigin = refBBox.getOrigin();\n        shapeBBox.x = refOrigin.x;\n        shapeBBox.y = refOrigin.y;\n        const fitScale = refBBox.getMaxScaleToFit(shapeBBox, refOrigin);\n        // `maxRectScaleToFit` can give Infinity if width or height is 0\n        const sx = shapeBBox.width === 0 || refBBox.width === 0 ? 1 : fitScale.sx;\n        const sy = shapeBBox.height === 0 || refBBox.height === 0 ? 1 : fitScale.sy;\n        shape.scale(sx, sy, shapeOrigin);\n        if (resetOffset) {\n            shape.translate(-shapeOrigin.x, -shapeOrigin.y);\n        }\n        return shape;\n    };\n}\n// `d` attribute for SVGPaths\nfunction dWrapper(options) {\n    function pathConstructor(value) {\n        return Path.parse(value);\n    }\n    const shape = shapeWrapper(pathConstructor, options);\n    return (value, args) => {\n        const path = shape(value, args);\n        return {\n            d: path.serialize(),\n        };\n    };\n}\n// `points` attribute for SVGPolylines and SVGPolygons\nfunction pointsWrapper(options) {\n    const shape = shapeWrapper((points) => new Polyline(points), options);\n    return (value, args) => {\n        const polyline = shape(value, args);\n        return {\n            points: polyline.serialize(),\n        };\n    };\n}\n//# sourceMappingURL=ref.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const fill = {\n    qualify: ObjectExt.isPlainObject,\n    set(fill, { view }) {\n        return `url(#${view.graph.defineGradient(fill)})`;\n    },\n};\n//# sourceMappingURL=fill.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const stroke = {\n    qualify: ObjectExt.isPlainObject,\n    set(stroke, { view }) {\n        const cell = view.cell;\n        const options = Object.assign({}, stroke);\n        if (cell.isEdge() && options.type === 'linearGradient') {\n            const edgeView = view;\n            const source = edgeView.sourcePoint;\n            const target = edgeView.targetPoint;\n            options.id = `gradient-${options.type}-${cell.id}`;\n            options.attrs = Object.assign(Object.assign({}, options.attrs), { x1: source.x, y1: source.y, x2: target.x, y2: target.y, gradientUnits: 'userSpaceOnUse' });\n            view.graph.defs.remove(options.id);\n        }\n        return `url(#${view.graph.defineGradient(options)})`;\n    },\n};\n//# sourceMappingURL=stroke.js.map","import { ObjectExt, NumberExt, Dom, FunctionExt, } from '@antv/x6-common';\nexport const text = {\n    qualify(text, { attrs }) {\n        return attrs.textWrap == null || !ObjectExt.isPlainObject(attrs.textWrap);\n    },\n    set(text, { view, elem, attrs }) {\n        const cacheName = 'x6-text';\n        const cache = Dom.data(elem, cacheName);\n        const json = (str) => {\n            try {\n                return JSON.parse(str);\n            }\n            catch (error) {\n                return str;\n            }\n        };\n        const options = {\n            x: attrs.x,\n            eol: attrs.eol,\n            annotations: json(attrs.annotations),\n            textPath: json(attrs['text-path'] || attrs.textPath),\n            textVerticalAnchor: (attrs['text-vertical-anchor'] ||\n                attrs.textVerticalAnchor),\n            displayEmpty: (attrs['display-empty'] || attrs.displayEmpty) === 'true',\n            lineHeight: (attrs['line-height'] || attrs.lineHeight),\n        };\n        const fontSize = (attrs['font-size'] || attrs.fontSize);\n        const textHash = JSON.stringify([text, options]);\n        if (fontSize) {\n            elem.setAttribute('font-size', fontSize);\n        }\n        // Updates the text only if there was a change in the string\n        // or any of its attributes.\n        if (cache == null || cache !== textHash) {\n            // Text Along Path Selector\n            const textPath = options.textPath;\n            if (textPath != null && typeof textPath === 'object') {\n                const selector = textPath.selector;\n                if (typeof selector === 'string') {\n                    const pathNode = view.find(selector)[0];\n                    if (pathNode instanceof SVGPathElement) {\n                        Dom.ensureId(pathNode);\n                        options.textPath = Object.assign({ 'xlink:href': `#${pathNode.id}` }, textPath);\n                    }\n                }\n            }\n            Dom.text(elem, `${text}`, options);\n            Dom.data(elem, cacheName, textHash);\n        }\n    },\n};\nexport const textWrap = {\n    qualify: ObjectExt.isPlainObject,\n    set(val, { view, elem, attrs, refBBox }) {\n        const info = val;\n        // option `width`\n        const width = info.width || 0;\n        if (NumberExt.isPercentage(width)) {\n            refBBox.width *= parseFloat(width) / 100;\n        }\n        else if (width <= 0) {\n            refBBox.width += width;\n        }\n        else {\n            refBBox.width = width;\n        }\n        // option `height`\n        const height = info.height || 0;\n        if (NumberExt.isPercentage(height)) {\n            refBBox.height *= parseFloat(height) / 100;\n        }\n        else if (height <= 0) {\n            refBBox.height += height;\n        }\n        else {\n            refBBox.height = height;\n        }\n        // option `text`\n        let wrappedText;\n        let txt = info.text;\n        if (txt == null) {\n            txt = attrs.text;\n        }\n        if (txt != null) {\n            wrappedText = Dom.breakText(`${txt}`, refBBox, {\n                'font-weight': attrs['font-weight'] || attrs.fontWeight,\n                'font-size': attrs['font-size'] || attrs.fontSize,\n                'font-family': attrs['font-family'] || attrs.fontFamily,\n                lineHeight: attrs.lineHeight,\n            }, {\n                // svgDocument: view.graph.view.svg,\n                ellipsis: info.ellipsis,\n                // hyphen: info.hyphen as string,\n                // breakWord: info.breakWord as boolean,\n            });\n        }\n        else {\n            wrappedText = '';\n        }\n        FunctionExt.call(text.set, this, wrappedText, {\n            view,\n            elem,\n            attrs,\n            refBBox,\n            cell: view.cell,\n        });\n    },\n};\nconst isTextInUse = (val, { attrs }) => {\n    return attrs.text !== undefined;\n};\nexport const lineHeight = {\n    qualify: isTextInUse,\n};\nexport const textVerticalAnchor = {\n    qualify: isTextInUse,\n};\nexport const textPath = {\n    qualify: isTextInUse,\n};\nexport const annotations = {\n    qualify: isTextInUse,\n};\nexport const eol = {\n    qualify: isTextInUse,\n};\nexport const displayEmpty = {\n    qualify: isTextInUse,\n};\n//# sourceMappingURL=text.js.map","import { Dom } from '@antv/x6-common';\nexport const title = {\n    qualify(title, { elem }) {\n        // HTMLElement title is specified via an attribute (i.e. not an element)\n        return elem instanceof SVGElement;\n    },\n    set(val, { elem }) {\n        const cacheName = 'x6-title';\n        const title = `${val}`;\n        const cache = Dom.data(elem, cacheName);\n        if (cache == null || cache !== title) {\n            Dom.data(elem, cacheName, title);\n            // Generally SVGTitleElement should be the first child\n            // element of its parent.\n            const firstChild = elem.firstChild;\n            if (firstChild && firstChild.tagName.toUpperCase() === 'TITLE') {\n                // Update an existing title\n                const titleElem = firstChild;\n                titleElem.textContent = title;\n            }\n            else {\n                // Create a new title\n                const titleNode = document.createElementNS(elem.namespaceURI, 'title');\n                titleNode.textContent = title;\n                elem.insertBefore(titleNode, firstChild);\n            }\n        }\n    },\n};\n//# sourceMappingURL=title.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n// `x-align` when set to `middle` causes centering of the subelement around its new x coordinate.\n// `x-align` when set to `right` uses the x coordinate as referenced to the right of the bbox.\nexport const xAlign = {\n    offset: offsetWrapper('x', 'width', 'right'),\n};\n// `y-align` when set to `middle` causes centering of the subelement around its new y coordinate.\n// `y-align` when set to `bottom` uses the y coordinate as referenced to the bottom of the bbox.\nexport const yAlign = {\n    offset: offsetWrapper('y', 'height', 'bottom'),\n};\nexport const resetOffset = {\n    offset(val, { refBBox }) {\n        return val ? { x: -refBBox.x, y: -refBBox.y } : { x: 0, y: 0 };\n    },\n};\nfunction offsetWrapper(axis, dimension, corner) {\n    return (value, { refBBox }) => {\n        const point = new Point();\n        let delta;\n        if (value === 'middle') {\n            delta = refBBox[dimension] / 2;\n        }\n        else if (value === corner) {\n            delta = refBBox[dimension];\n        }\n        else if (typeof value === 'number' && Number.isFinite(value)) {\n            delta = value > -1 && value < 1 ? -refBBox[dimension] * value : -value;\n        }\n        else if (NumberExt.isPercentage(value)) {\n            delta = (refBBox[dimension] * parseFloat(value)) / 100;\n        }\n        else {\n            delta = 0;\n        }\n        point[axis] = -(refBBox[axis] + delta);\n        return point;\n    };\n}\n//# sourceMappingURL=align.js.map","import { ObjectExt, Dom } from '@antv/x6-common';\nexport const style = {\n    qualify: ObjectExt.isPlainObject,\n    set(styles, { elem }) {\n        Dom.css(elem, styles);\n    },\n};\n//# sourceMappingURL=style.js.map","export const html = {\n    set(html, { elem }) {\n        elem.innerHTML = `${html}`;\n    },\n};\n//# sourceMappingURL=html.js.map","import { ObjectExt } from '@antv/x6-common';\nexport const filter = {\n    qualify: ObjectExt.isPlainObject,\n    set(filter, { view }) {\n        return `url(#${view.graph.defineFilter(filter)})`;\n    },\n};\n//# sourceMappingURL=filter.js.map","export const port = {\n    set(port) {\n        if (port != null && typeof port === 'object' && port.id) {\n            return port.id;\n        }\n        return port;\n    },\n};\n//# sourceMappingURL=port.js.map","import { Path } from '@antv/x6-geometry';\nexport function normalize(d, offset1, offset2) {\n    let offsetX;\n    let offsetY;\n    if (typeof offset1 === 'object') {\n        offsetX = offset1.x;\n        offsetY = offset1.y;\n    }\n    else {\n        offsetX = offset1;\n        offsetY = offset2;\n    }\n    const path = Path.parse(d);\n    const bbox = path.bbox();\n    if (bbox) {\n        let ty = -bbox.height / 2 - bbox.y;\n        let tx = -bbox.width / 2 - bbox.x;\n        if (typeof offsetX === 'number') {\n            tx -= offsetX;\n        }\n        if (typeof offsetY === 'number') {\n            ty -= offsetY;\n        }\n        path.translate(tx, ty);\n    }\n    return path.serialize();\n}\n//# sourceMappingURL=util.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { NumberExt } from '@antv/x6-common';\nimport { normalize } from './util';\nexport const block = (_a) => {\n    var { size, width, height, offset, open } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\", \"open\"]);\n    return createClassicMarker({ size, width, height, offset }, open === true, true, undefined, attrs);\n};\nexport const classic = (_a) => {\n    var { size, width, height, offset, factor } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\", \"factor\"]);\n    return createClassicMarker({ size, width, height, offset }, false, false, factor, attrs);\n};\nfunction createClassicMarker(options, open, full, factor = 3 / 4, attrs = {}) {\n    const size = options.size || 10;\n    const width = options.width || size;\n    const height = options.height || size;\n    const path = new Path();\n    const localAttrs = {};\n    if (open) {\n        path\n            .moveTo(width, 0)\n            .lineTo(0, height / 2)\n            .lineTo(width, height);\n        localAttrs.fill = 'none';\n    }\n    else {\n        path.moveTo(0, height / 2);\n        path.lineTo(width, 0);\n        if (!full) {\n            const f = NumberExt.clamp(factor, 0, 1);\n            path.lineTo(width * f, height / 2);\n        }\n        path.lineTo(width, height);\n        path.close();\n    }\n    return Object.assign(Object.assign(Object.assign({}, localAttrs), attrs), { tagName: 'path', d: normalize(path.serialize(), {\n            x: options.offset != null ? options.offset : -width / 2,\n        }) });\n}\n//# sourceMappingURL=classic.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const diamond = (_a) => {\n    var { size, width, height, offset } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\"]);\n    const s = size || 10;\n    const w = width || s;\n    const h = height || s;\n    const path = new Path();\n    path\n        .moveTo(0, h / 2)\n        .lineTo(w / 2, 0)\n        .lineTo(w, h / 2)\n        .lineTo(w / 2, h)\n        .close();\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(path.serialize(), offset == null ? -w / 2 : offset) });\n};\n//# sourceMappingURL=diamond.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { normalize } from './util';\nexport const path = (_a) => {\n    var { d, offsetX, offsetY } = _a, attrs = __rest(_a, [\"d\", \"offsetX\", \"offsetY\"]);\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(d, offsetX, offsetY) });\n};\n//# sourceMappingURL=path.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const cross = (_a) => {\n    var { size, width, height, offset } = _a, attrs = __rest(_a, [\"size\", \"width\", \"height\", \"offset\"]);\n    const s = size || 10;\n    const w = width || s;\n    const h = height || s;\n    const path = new Path();\n    path.moveTo(0, 0).lineTo(w, h).moveTo(0, h).lineTo(w, 0);\n    return Object.assign(Object.assign({}, attrs), { tagName: 'path', fill: 'none', d: normalize(path.serialize(), offset || -w / 2) });\n};\n//# sourceMappingURL=cross.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const async = (_a) => {\n    var { width, height, offset, open, flip } = _a, attrs = __rest(_a, [\"width\", \"height\", \"offset\", \"open\", \"flip\"]);\n    let h = height || 6;\n    const w = width || 10;\n    const opened = open === true;\n    const fliped = flip === true;\n    const result = Object.assign(Object.assign({}, attrs), { tagName: 'path' });\n    if (fliped) {\n        h = -h;\n    }\n    const path = new Path();\n    path.moveTo(0, h).lineTo(w, 0);\n    if (!opened) {\n        path.lineTo(w, h);\n        path.close();\n    }\n    else {\n        result.fill = 'none';\n    }\n    result.d = normalize(path.serialize(), {\n        x: offset || -w / 2,\n        y: h / 2,\n    });\n    return result;\n};\n//# sourceMappingURL=async.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Path } from '@antv/x6-geometry';\nimport { normalize } from './util';\nexport const circle = (_a) => {\n    var { r } = _a, attrs = __rest(_a, [\"r\"]);\n    const radius = r || 5;\n    return Object.assign(Object.assign({ cx: radius }, attrs), { tagName: 'circle', r: radius });\n};\nexport const circlePlus = (_a) => {\n    var { r } = _a, attrs = __rest(_a, [\"r\"]);\n    const radius = r || 5;\n    const path = new Path();\n    path.moveTo(radius, 0).lineTo(radius, radius * 2);\n    path.moveTo(0, radius).lineTo(radius * 2, radius);\n    return {\n        children: [\n            Object.assign(Object.assign({}, circle({ r: radius })), { fill: 'none' }),\n            Object.assign(Object.assign({}, attrs), { tagName: 'path', d: normalize(path.serialize(), -radius) }),\n        ],\n    };\n};\n//# sourceMappingURL=circle.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nexport const ellipse = (_a) => {\n    var { rx, ry } = _a, attrs = __rest(_a, [\"rx\", \"ry\"]);\n    const radiusX = rx || 5;\n    const radiusy = ry || 5;\n    return Object.assign(Object.assign({ cx: radiusX }, attrs), { tagName: 'ellipse', rx: radiusX, ry: radiusy });\n};\n//# sourceMappingURL=ellipse.js.map","import { Registry } from '../registry';\nimport * as markers from './main';\nimport { normalize as normalizeMarker } from './util';\nexport var Marker;\n(function (Marker) {\n    Marker.presets = markers;\n    Marker.registry = Registry.create({\n        type: 'marker',\n    });\n    Marker.registry.register(Marker.presets, true);\n})(Marker || (Marker = {}));\n(function (Marker) {\n    Marker.normalize = normalizeMarker;\n})(Marker || (Marker = {}));\n//# sourceMappingURL=index.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Marker } from '../marker';\nfunction qualify(value) {\n    return typeof value === 'string' || ObjectExt.isPlainObject(value);\n}\nexport const sourceMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-start', marker, view, attrs);\n    },\n};\nexport const targetMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-end', marker, view, attrs, {\n            transform: 'rotate(180)',\n        });\n    },\n};\nexport const vertexMarker = {\n    qualify,\n    set(marker, { view, attrs }) {\n        return createMarker('marker-mid', marker, view, attrs);\n    },\n};\nfunction createMarker(type, marker, view, attrs, manual = {}) {\n    const def = typeof marker === 'string' ? { name: marker } : marker;\n    const { name, args } = def, others = __rest(def, [\"name\", \"args\"]);\n    let preset = others;\n    if (name && typeof name === 'string') {\n        const fn = Marker.registry.get(name);\n        if (fn) {\n            preset = fn(Object.assign(Object.assign({}, others), args));\n        }\n        else {\n            return Marker.registry.onNotFound(name);\n        }\n    }\n    const options = Object.assign(Object.assign(Object.assign({}, normalizeAttr(attrs, type)), manual), preset);\n    return {\n        [type]: `url(#${view.graph.defineMarker(options)})`,\n    };\n}\nfunction normalizeAttr(attr, type) {\n    const result = {};\n    // The context 'fill' is disregared here. The usual case is to use the\n    // marker with a connection(for which 'fill' attribute is set to 'none').\n    const stroke = attr.stroke;\n    if (typeof stroke === 'string') {\n        result.stroke = stroke;\n        result.fill = stroke;\n    }\n    // Again the context 'fill-opacity' is ignored.\n    let strokeOpacity = attr.strokeOpacity;\n    if (strokeOpacity == null) {\n        strokeOpacity = attr['stroke-opacity'];\n    }\n    if (strokeOpacity == null) {\n        strokeOpacity = attr.opacity;\n    }\n    if (strokeOpacity != null) {\n        result['stroke-opacity'] = strokeOpacity;\n        result['fill-opacity'] = strokeOpacity;\n    }\n    if (type !== 'marker-mid') {\n        const strokeWidth = parseFloat((attr.strokeWidth || attr['stroke-width']));\n        if (Number.isFinite(strokeWidth) && strokeWidth > 1) {\n            const offset = Math.ceil(strokeWidth / 2);\n            result.refX = type === 'marker-start' ? offset : -offset;\n        }\n    }\n    return result;\n}\n//# sourceMappingURL=marker.js.map","const isEdgeView = (val, { view }) => {\n    return view.cell.isEdge();\n};\nexport const connection = {\n    qualify: isEdgeView,\n    set(val, args) {\n        var _a, _b, _c, _d;\n        const view = args.view;\n        const reverse = (val.reverse || false);\n        const stubs = (val.stubs || 0);\n        let d;\n        if (Number.isFinite(stubs) && stubs !== 0) {\n            if (!reverse) {\n                let offset;\n                if (stubs < 0) {\n                    const len = view.getConnectionLength() || 0;\n                    offset = (len + stubs) / 2;\n                }\n                else {\n                    offset = stubs;\n                }\n                const path = view.getConnection();\n                if (path) {\n                    const sourceParts = path.divideAtLength(offset);\n                    const targetParts = path.divideAtLength(-offset);\n                    if (sourceParts && targetParts) {\n                        d = `${sourceParts[0].serialize()} ${targetParts[1].serialize()}`;\n                    }\n                }\n            }\n            else {\n                let offset;\n                let length;\n                const len = view.getConnectionLength() || 0;\n                if (stubs < 0) {\n                    offset = (len + stubs) / 2;\n                    length = -stubs;\n                }\n                else {\n                    offset = stubs;\n                    length = len - stubs * 2;\n                }\n                const path = view.getConnection();\n                d = (_d = (_c = (_b = (_a = path === null || path === void 0 ? void 0 : path.divideAtLength(offset)) === null || _a === void 0 ? void 0 : _a[1]) === null || _b === void 0 ? void 0 : _b.divideAtLength(length)) === null || _c === void 0 ? void 0 : _c[0]) === null || _d === void 0 ? void 0 : _d.serialize();\n            }\n        }\n        return { d: d || view.getConnectionPathData() };\n    },\n};\nexport const atConnectionLengthKeepGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtLength', { rotate: true }),\n};\nexport const atConnectionLengthIgnoreGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtLength', { rotate: false }),\n};\nexport const atConnectionRatioKeepGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtRatio', { rotate: true }),\n};\nexport const atConnectionRatioIgnoreGradient = {\n    qualify: isEdgeView,\n    set: atConnectionWrapper('getTangentAtRatio', { rotate: false }),\n};\n// aliases\n// -------\nexport const atConnectionLength = atConnectionLengthKeepGradient;\nexport const atConnectionRatio = atConnectionRatioKeepGradient;\n// utils\n// -----\nfunction atConnectionWrapper(method, options) {\n    const zeroVector = { x: 1, y: 0 };\n    return (value, args) => {\n        let p;\n        let angle;\n        const view = args.view;\n        const tangent = view[method](Number(value));\n        if (tangent) {\n            angle = options.rotate ? tangent.vector().vectorAngle(zeroVector) : 0;\n            p = tangent.start;\n        }\n        else {\n            p = view.path.start;\n            angle = 0;\n        }\n        if (angle === 0) {\n            return { transform: `translate(${p.x},${p.y}')` };\n        }\n        return {\n            transform: `translate(${p.x},${p.y}') rotate(${angle})`,\n        };\n    };\n}\n//# sourceMappingURL=connection.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Registry } from '../registry';\nimport { raw } from './raw';\nimport * as attrs from './main';\nexport var Attr;\n(function (Attr) {\n    function isValidDefinition(def, val, options) {\n        if (def != null) {\n            if (typeof def === 'string') {\n                return true;\n            }\n            if (typeof def.qualify !== 'function' ||\n                FunctionExt.call(def.qualify, this, val, options)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    Attr.isValidDefinition = isValidDefinition;\n})(Attr || (Attr = {}));\n(function (Attr) {\n    Attr.presets = Object.assign(Object.assign({}, raw), attrs);\n    Attr.registry = Registry.create({\n        type: 'attribute definition',\n    });\n    Attr.registry.register(Attr.presets, true);\n})(Attr || (Attr = {}));\n//# sourceMappingURL=index.js.map","export const Config = {\n    prefixCls: 'x6',\n    autoInsertCSS: true,\n    useCSSSelector: true,\n    prefix(suffix) {\n        return `${Config.prefixCls}-${suffix}`;\n    },\n};\n//# sourceMappingURL=index.js.map","import { Dom } from '@antv/x6-common';\nimport { Config } from '../../config';\nconst defaultClassName = Config.prefix('highlighted');\nexport const className = {\n    highlight(cellView, magnet, options) {\n        const cls = (options && options.className) || defaultClassName;\n        Dom.addClass(magnet, cls);\n    },\n    unhighlight(cellView, magnet, options) {\n        const cls = (options && options.className) || defaultClassName;\n        Dom.removeClass(magnet, cls);\n    },\n};\n//# sourceMappingURL=class.js.map","import { Dom } from '@antv/x6-common';\nimport { Config } from '../../config';\nconst className = Config.prefix('highlight-opacity');\nexport const opacity = {\n    highlight(cellView, magnet) {\n        Dom.addClass(magnet, className);\n    },\n    unhighlight(cellView, magnetEl) {\n        Dom.removeClass(magnetEl, className);\n    },\n};\n//# sourceMappingURL=opacity.js.map","import { Point, Line, Rectangle, Polyline, Ellipse, Path, } from '@antv/x6-geometry';\nimport { Dom } from '@antv/x6-common';\nimport { normalize } from '../registry/marker/util';\nexport var Util;\n(function (Util) {\n    const svgDocument = Dom.createSvgElement('svg');\n    Util.normalizeMarker = normalize;\n    /**\n     * Transforms point by an SVG transformation represented by `matrix`.\n     */\n    function transformPoint(point, matrix) {\n        const ret = Dom.createSVGPoint(point.x, point.y).matrixTransform(matrix);\n        return new Point(ret.x, ret.y);\n    }\n    Util.transformPoint = transformPoint;\n    /**\n     * Transforms line by an SVG transformation represented by `matrix`.\n     */\n    function transformLine(line, matrix) {\n        return new Line(transformPoint(line.start, matrix), transformPoint(line.end, matrix));\n    }\n    Util.transformLine = transformLine;\n    /**\n     * Transforms polyline by an SVG transformation represented by `matrix`.\n     */\n    function transformPolyline(polyline, matrix) {\n        let points = polyline instanceof Polyline ? polyline.points : polyline;\n        if (!Array.isArray(points)) {\n            points = [];\n        }\n        return new Polyline(points.map((p) => transformPoint(p, matrix)));\n    }\n    Util.transformPolyline = transformPolyline;\n    function transformRectangle(rect, matrix) {\n        const p = svgDocument.createSVGPoint();\n        p.x = rect.x;\n        p.y = rect.y;\n        const corner1 = p.matrixTransform(matrix);\n        p.x = rect.x + rect.width;\n        p.y = rect.y;\n        const corner2 = p.matrixTransform(matrix);\n        p.x = rect.x + rect.width;\n        p.y = rect.y + rect.height;\n        const corner3 = p.matrixTransform(matrix);\n        p.x = rect.x;\n        p.y = rect.y + rect.height;\n        const corner4 = p.matrixTransform(matrix);\n        const minX = Math.min(corner1.x, corner2.x, corner3.x, corner4.x);\n        const maxX = Math.max(corner1.x, corner2.x, corner3.x, corner4.x);\n        const minY = Math.min(corner1.y, corner2.y, corner3.y, corner4.y);\n        const maxY = Math.max(corner1.y, corner2.y, corner3.y, corner4.y);\n        return new Rectangle(minX, minY, maxX - minX, maxY - minY);\n    }\n    Util.transformRectangle = transformRectangle;\n    /**\n     * Returns the bounding box of the element after transformations are\n     * applied. If `withoutTransformations` is `true`, transformations of\n     * the element will not be considered when computing the bounding box.\n     * If `target` is specified, bounding box will be computed relatively\n     * to the `target` element.\n     */\n    function bbox(elem, withoutTransformations, target) {\n        let box;\n        const ownerSVGElement = elem.ownerSVGElement;\n        // If the element is not in the live DOM, it does not have a bounding\n        // box defined and so fall back to 'zero' dimension element.\n        if (!ownerSVGElement) {\n            return new Rectangle(0, 0, 0, 0);\n        }\n        try {\n            box = elem.getBBox();\n        }\n        catch (e) {\n            // Fallback for IE.\n            box = {\n                x: elem.clientLeft,\n                y: elem.clientTop,\n                width: elem.clientWidth,\n                height: elem.clientHeight,\n            };\n        }\n        if (withoutTransformations) {\n            return Rectangle.create(box);\n        }\n        const matrix = Dom.getTransformToElement(elem, target || ownerSVGElement);\n        return transformRectangle(box, matrix);\n    }\n    Util.bbox = bbox;\n    /**\n     * Returns the bounding box of the element after transformations are\n     * applied. Unlike `bbox()`, this function fixes a browser implementation\n     * bug to return the correct bounding box if this elemenent is a group of\n     * svg elements (if `options.recursive` is specified).\n     */\n    function getBBox(elem, options = {}) {\n        let outputBBox;\n        const ownerSVGElement = elem.ownerSVGElement;\n        // If the element is not in the live DOM, it does not have a bounding box\n        // defined and so fall back to 'zero' dimension element.\n        // If the element is not an SVGGraphicsElement, we could not measure the\n        // bounding box either\n        if (!ownerSVGElement || !Dom.isSVGGraphicsElement(elem)) {\n            if (Dom.isHTMLElement(elem)) {\n                // If the element is a HTMLElement, return the position relative to the body\n                const { left, top, width, height } = getBoundingOffsetRect(elem);\n                return new Rectangle(left, top, width, height);\n            }\n            return new Rectangle(0, 0, 0, 0);\n        }\n        let target = options.target;\n        const recursive = options.recursive;\n        if (!recursive) {\n            try {\n                outputBBox = elem.getBBox();\n            }\n            catch (e) {\n                outputBBox = {\n                    x: elem.clientLeft,\n                    y: elem.clientTop,\n                    width: elem.clientWidth,\n                    height: elem.clientHeight,\n                };\n            }\n            if (!target) {\n                return Rectangle.create(outputBBox);\n            }\n            // transform like target\n            const matrix = Dom.getTransformToElement(elem, target);\n            return transformRectangle(outputBBox, matrix);\n        }\n        // recursive\n        {\n            const children = elem.childNodes;\n            const n = children.length;\n            if (n === 0) {\n                return getBBox(elem, {\n                    target,\n                });\n            }\n            if (!target) {\n                target = elem; // eslint-disable-line\n            }\n            for (let i = 0; i < n; i += 1) {\n                const child = children[i];\n                let childBBox;\n                if (child.childNodes.length === 0) {\n                    childBBox = getBBox(child, {\n                        target,\n                    });\n                }\n                else {\n                    // if child is a group element, enter it with a recursive call\n                    childBBox = getBBox(child, {\n                        target,\n                        recursive: true,\n                    });\n                }\n                if (!outputBBox) {\n                    outputBBox = childBBox;\n                }\n                else {\n                    outputBBox = outputBBox.union(childBBox);\n                }\n            }\n            return outputBBox;\n        }\n    }\n    Util.getBBox = getBBox;\n    function getBoundingOffsetRect(elem) {\n        let left = 0;\n        let top = 0;\n        let width = 0;\n        let height = 0;\n        if (elem) {\n            let current = elem;\n            while (current) {\n                left += current.offsetLeft;\n                top += current.offsetTop;\n                current = current.offsetParent;\n                if (current) {\n                    left += parseInt(Dom.getComputedStyle(current, 'borderLeft'), 10);\n                    top += parseInt(Dom.getComputedStyle(current, 'borderTop'), 10);\n                }\n            }\n            width = elem.offsetWidth;\n            height = elem.offsetHeight;\n        }\n        return {\n            left,\n            top,\n            width,\n            height,\n        };\n    }\n    Util.getBoundingOffsetRect = getBoundingOffsetRect;\n    /**\n     * Convert the SVGElement to an equivalent geometric shape. The element's\n     * transformations are not taken into account.\n     *\n     * SVGRectElement      => Rectangle\n     *\n     * SVGLineElement      => Line\n     *\n     * SVGCircleElement    => Ellipse\n     *\n     * SVGEllipseElement   => Ellipse\n     *\n     * SVGPolygonElement   => Polyline\n     *\n     * SVGPolylineElement  => Polyline\n     *\n     * SVGPathElement      => Path\n     *\n     * others              => Rectangle\n     */\n    function toGeometryShape(elem) {\n        const attr = (name) => {\n            const s = elem.getAttribute(name);\n            const v = s ? parseFloat(s) : 0;\n            return Number.isNaN(v) ? 0 : v;\n        };\n        switch (elem instanceof SVGElement && elem.nodeName.toLowerCase()) {\n            case 'rect':\n                return new Rectangle(attr('x'), attr('y'), attr('width'), attr('height'));\n            case 'circle':\n                return new Ellipse(attr('cx'), attr('cy'), attr('r'), attr('r'));\n            case 'ellipse':\n                return new Ellipse(attr('cx'), attr('cy'), attr('rx'), attr('ry'));\n            case 'polyline': {\n                const points = Dom.getPointsFromSvgElement(elem);\n                return new Polyline(points);\n            }\n            case 'polygon': {\n                const points = Dom.getPointsFromSvgElement(elem);\n                if (points.length > 1) {\n                    points.push(points[0]);\n                }\n                return new Polyline(points);\n            }\n            case 'path': {\n                let d = elem.getAttribute('d');\n                if (!Path.isValid(d)) {\n                    d = Path.normalize(d);\n                }\n                return Path.parse(d);\n            }\n            case 'line': {\n                return new Line(attr('x1'), attr('y1'), attr('x2'), attr('y2'));\n            }\n            default:\n                break;\n        }\n        // Anything else is a rectangle\n        return getBBox(elem);\n    }\n    Util.toGeometryShape = toGeometryShape;\n    function translateAndAutoOrient(elem, position, reference, target) {\n        const pos = Point.create(position);\n        const ref = Point.create(reference);\n        if (!target) {\n            const svg = elem instanceof SVGSVGElement ? elem : elem.ownerSVGElement;\n            target = svg; // eslint-disable-line\n        }\n        // Clean-up previously set transformations except the scale.\n        // If we didn't clean up the previous transformations then they'd\n        // add up with the old ones. Scale is an exception as it doesn't\n        // add up, consider: `this.scale(2).scale(2).scale(2)`. The result\n        // is that the element is scaled by the factor 2, not 8.\n        const s = Dom.scale(elem);\n        elem.setAttribute('transform', '');\n        const bbox = getBBox(elem, {\n            target,\n        }).scale(s.sx, s.sy);\n        // 1. Translate to origin.\n        const translateToOrigin = Dom.createSVGTransform();\n        translateToOrigin.setTranslate(-bbox.x - bbox.width / 2, -bbox.y - bbox.height / 2);\n        // 2. Rotate around origin.\n        const rotateAroundOrigin = Dom.createSVGTransform();\n        const angle = pos.angleBetween(ref, pos.clone().translate(1, 0));\n        if (angle)\n            rotateAroundOrigin.setRotate(angle, 0, 0);\n        // 3. Translate to the `position` + the offset (half my width)\n        //    towards the `reference` point.\n        const translateFromOrigin = Dom.createSVGTransform();\n        const finalPosition = pos.clone().move(ref, bbox.width / 2);\n        translateFromOrigin.setTranslate(2 * pos.x - finalPosition.x, 2 * pos.y - finalPosition.y);\n        // 4. Get the current transformation matrix of this node\n        const ctm = Dom.getTransformToElement(elem, target);\n        // 5. Apply transformations and the scale\n        const transform = Dom.createSVGTransform();\n        transform.setMatrix(translateFromOrigin.matrix.multiply(rotateAroundOrigin.matrix.multiply(translateToOrigin.matrix.multiply(ctm.scale(s.sx, s.sy)))));\n        elem.setAttribute('transform', Dom.matrixToTransformString(transform.matrix));\n    }\n    Util.translateAndAutoOrient = translateAndAutoOrient;\n    function findShapeNode(magnet) {\n        if (magnet == null) {\n            return null;\n        }\n        let node = magnet;\n        do {\n            let tagName = node.tagName;\n            if (typeof tagName !== 'string')\n                return null;\n            tagName = tagName.toUpperCase();\n            if (Dom.hasClass(node, 'x6-port')) {\n                node = node.nextElementSibling;\n            }\n            else if (tagName === 'G') {\n                node = node.firstElementChild;\n            }\n            else if (tagName === 'TITLE') {\n                node = node.nextElementSibling;\n            }\n            else\n                break;\n        } while (node);\n        return node;\n    }\n    Util.findShapeNode = findShapeNode;\n    // BBox is calculated by the attribute and shape of the node.\n    // Because of the reduction in DOM API calls, there is a significant performance improvement.\n    function getBBoxV2(elem) {\n        const node = findShapeNode(elem);\n        if (!Dom.isSVGGraphicsElement(node)) {\n            if (Dom.isHTMLElement(elem)) {\n                const { left, top, width, height } = getBoundingOffsetRect(elem);\n                return new Rectangle(left, top, width, height);\n            }\n            return new Rectangle(0, 0, 0, 0);\n        }\n        const shape = toGeometryShape(node);\n        return shape.bbox() || Rectangle.create();\n    }\n    Util.getBBoxV2 = getBBoxV2;\n})(Util || (Util = {}));\n//# sourceMappingURL=index.js.map","import { ObjectExt, Dom, Vector } from '@antv/x6-common';\nimport { Config } from '../../config';\nimport { Util } from '../../util';\nconst defaultOptions = {\n    padding: 3,\n    rx: 0,\n    ry: 0,\n    attrs: {\n        'stroke-width': 3,\n        stroke: '#FEB663',\n    },\n};\nexport const stroke = {\n    highlight(cellView, magnet, options) {\n        const id = Private.getHighlighterId(magnet, options);\n        if (Private.hasCache(id)) {\n            return;\n        }\n        // eslint-disable-next-line\n        options = ObjectExt.defaultsDeep({}, options, defaultOptions);\n        const magnetVel = Vector.create(magnet);\n        let pathData;\n        let magnetBBox;\n        try {\n            pathData = magnetVel.toPathData();\n        }\n        catch (error) {\n            // Failed to get path data from magnet element.\n            // Draw a rectangle around the entire cell view instead.\n            magnetBBox = Util.bbox(magnetVel.node, true);\n            pathData = Dom.rectToPathData(Object.assign(Object.assign({}, options), magnetBBox));\n        }\n        const path = Dom.createSvgElement('path');\n        Dom.attr(path, Object.assign({ d: pathData, 'pointer-events': 'none', 'vector-effect': 'non-scaling-stroke', fill: 'none' }, (options.attrs ? Dom.kebablizeAttrs(options.attrs) : null)));\n        // const highlightVel = v.create('path').attr()\n        if (cellView.isEdgeElement(magnet)) {\n            Dom.attr(path, 'd', cellView.getConnectionPathData());\n        }\n        else {\n            let highlightMatrix = magnetVel.getTransformToElement(cellView.container);\n            // Add padding to the highlight element.\n            const padding = options.padding;\n            if (padding) {\n                if (magnetBBox == null) {\n                    magnetBBox = Util.bbox(magnetVel.node, true);\n                }\n                const cx = magnetBBox.x + magnetBBox.width / 2;\n                const cy = magnetBBox.y + magnetBBox.height / 2;\n                magnetBBox = Util.transformRectangle(magnetBBox, highlightMatrix);\n                const width = Math.max(magnetBBox.width, 1);\n                const height = Math.max(magnetBBox.height, 1);\n                const sx = (width + padding) / width;\n                const sy = (height + padding) / height;\n                const paddingMatrix = Dom.createSVGMatrix({\n                    a: sx,\n                    b: 0,\n                    c: 0,\n                    d: sy,\n                    e: cx - sx * cx,\n                    f: cy - sy * cy,\n                });\n                highlightMatrix = highlightMatrix.multiply(paddingMatrix);\n            }\n            Dom.transform(path, highlightMatrix);\n        }\n        Dom.addClass(path, Config.prefix('highlight-stroke'));\n        const cell = cellView.cell;\n        const removeHandler = () => Private.removeHighlighter(id);\n        cell.on('removed', removeHandler);\n        if (cell.model) {\n            cell.model.on('reseted', removeHandler);\n        }\n        cellView.container.appendChild(path);\n        Private.setCache(id, path);\n    },\n    unhighlight(cellView, magnet, opt) {\n        Private.removeHighlighter(Private.getHighlighterId(magnet, opt));\n    },\n};\nvar Private;\n(function (Private) {\n    function getHighlighterId(magnet, options) {\n        Dom.ensureId(magnet);\n        return magnet.id + JSON.stringify(options);\n    }\n    Private.getHighlighterId = getHighlighterId;\n    const cache = {};\n    function setCache(id, elem) {\n        cache[id] = elem;\n    }\n    Private.setCache = setCache;\n    function hasCache(id) {\n        return cache[id] != null;\n    }\n    Private.hasCache = hasCache;\n    function removeHighlighter(id) {\n        const elem = cache[id];\n        if (elem) {\n            Dom.remove(elem);\n            delete cache[id];\n        }\n    }\n    Private.removeHighlighter = removeHighlighter;\n})(Private || (Private = {}));\n//# sourceMappingURL=stroke.js.map","import { Registry } from '../registry';\nimport * as highlighters from './main';\nexport var Highlighter;\n(function (Highlighter) {\n    function check(name, highlighter) {\n        if (typeof highlighter.highlight !== 'function') {\n            throw new Error(`Highlighter '${name}' is missing required \\`highlight()\\` method`);\n        }\n        if (typeof highlighter.unhighlight !== 'function') {\n            throw new Error(`Highlighter '${name}' is missing required \\`unhighlight()\\` method`);\n        }\n    }\n    Highlighter.check = check;\n})(Highlighter || (Highlighter = {}));\n(function (Highlighter) {\n    Highlighter.presets = highlighters;\n    Highlighter.registry = Registry.create({\n        type: 'highlighter',\n    });\n    Highlighter.registry.register(Highlighter.presets, true);\n})(Highlighter || (Highlighter = {}));\n//# sourceMappingURL=index.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nexport function normalizePoint(bbox, args = {}) {\n    return new Point(NumberExt.normalizePercentage(args.x, bbox.width), NumberExt.normalizePercentage(args.y, bbox.height));\n}\nexport function toResult(point, angle, rawArgs) {\n    return Object.assign({ angle, position: point.toJSON() }, rawArgs);\n}\n//# sourceMappingURL=util.js.map","import { normalizePoint, toResult } from './util';\nexport const absolute = (portsPositionArgs, elemBBox) => {\n    return portsPositionArgs.map(({ x, y, angle }) => toResult(normalizePoint(elemBBox, { x, y }), angle || 0));\n};\n//# sourceMappingURL=absolute.js.map","import { Ellipse } from '@antv/x6-geometry';\nimport { toResult } from './util';\nexport const ellipse = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const startAngle = groupPositionArgs.start || 0;\n    const stepAngle = groupPositionArgs.step || 20;\n    return ellipseLayout(portsPositionArgs, elemBBox, startAngle, (index, count) => (index + 0.5 - count / 2) * stepAngle);\n};\nexport const ellipseSpread = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const startAngle = groupPositionArgs.start || 0;\n    const stepAngle = groupPositionArgs.step || 360 / portsPositionArgs.length;\n    return ellipseLayout(portsPositionArgs, elemBBox, startAngle, (index) => {\n        return index * stepAngle;\n    });\n};\nfunction ellipseLayout(portsPositionArgs, elemBBox, startAngle, stepFn) {\n    const center = elemBBox.getCenter();\n    const start = elemBBox.getTopCenter();\n    const ratio = elemBBox.width / elemBBox.height;\n    const ellipse = Ellipse.fromRect(elemBBox);\n    const count = portsPositionArgs.length;\n    return portsPositionArgs.map((item, index) => {\n        const angle = startAngle + stepFn(index, count);\n        const p = start.clone().rotate(-angle, center).scale(ratio, 1, center);\n        const theta = item.compensateRotate ? -ellipse.tangentTheta(p) : 0;\n        if (item.dx || item.dy) {\n            p.translate(item.dx || 0, item.dy || 0);\n        }\n        if (item.dr) {\n            p.move(center, item.dr);\n        }\n        return toResult(p.round(), theta, item);\n    });\n}\n//# sourceMappingURL=ellipse.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Line } from '@antv/x6-geometry';\nimport { normalizePoint, toResult } from './util';\nexport const line = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    const start = normalizePoint(elemBBox, groupPositionArgs.start || elemBBox.getOrigin());\n    const end = normalizePoint(elemBBox, groupPositionArgs.end || elemBBox.getCorner());\n    return lineLayout(portsPositionArgs, start, end, groupPositionArgs);\n};\nexport const left = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopLeft(), elemBBox.getBottomLeft(), groupPositionArgs);\n};\nexport const right = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopRight(), elemBBox.getBottomRight(), groupPositionArgs);\n};\nexport const top = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getTopLeft(), elemBBox.getTopRight(), groupPositionArgs);\n};\nexport const bottom = (portsPositionArgs, elemBBox, groupPositionArgs) => {\n    return lineLayout(portsPositionArgs, elemBBox.getBottomLeft(), elemBBox.getBottomRight(), groupPositionArgs);\n};\nfunction lineLayout(portsPositionArgs, p1, p2, groupPositionArgs) {\n    const line = new Line(p1, p2);\n    const length = portsPositionArgs.length;\n    return portsPositionArgs.map((_a, index) => {\n        var { strict } = _a, offset = __rest(_a, [\"strict\"]);\n        const ratio = strict || groupPositionArgs.strict\n            ? (index + 1) / (length + 1)\n            : (index + 0.5) / length;\n        const p = line.pointAt(ratio);\n        if (offset.dx || offset.dy) {\n            p.translate(offset.dx || 0, offset.dy || 0);\n        }\n        return toResult(p.round(), 0, offset);\n    });\n}\n//# sourceMappingURL=line.js.map","import { Registry } from '../registry';\nimport * as layouts from './main';\nexport var PortLayout;\n(function (PortLayout) {\n    PortLayout.presets = layouts;\n    PortLayout.registry = Registry.create({\n        type: 'port layout',\n    });\n    PortLayout.registry.register(PortLayout.presets, true);\n})(PortLayout || (PortLayout = {}));\n//# sourceMappingURL=index.js.map","import { ObjectExt } from '@antv/x6-common';\nconst defaults = {\n    position: { x: 0, y: 0 },\n    angle: 0,\n    attrs: {\n        '.': {\n            y: '0',\n            'text-anchor': 'start',\n        },\n    },\n};\nexport function toResult(preset, args) {\n    const { x, y, angle, attrs } = args || {};\n    return ObjectExt.defaultsDeep({}, { angle, attrs, position: { x, y } }, preset, defaults);\n}\n//# sourceMappingURL=util.js.map","import { toResult } from './util';\nexport const manual = (portPosition, elemBBox, args) => toResult({ position: elemBBox.getTopLeft() }, args);\nexport const left = (portPosition, elemBBox, args) => toResult({\n    position: { x: -15, y: 0 },\n    attrs: { '.': { y: '.3em', 'text-anchor': 'end' } },\n}, args);\nexport const right = (portPosition, elemBBox, args) => toResult({\n    position: { x: 15, y: 0 },\n    attrs: { '.': { y: '.3em', 'text-anchor': 'start' } },\n}, args);\nexport const top = (portPosition, elemBBox, args) => toResult({\n    position: { x: 0, y: -15 },\n    attrs: { '.': { 'text-anchor': 'middle' } },\n}, args);\nexport const bottom = (portPosition, elemBBox, args) => toResult({\n    position: { x: 0, y: 15 },\n    attrs: { '.': { y: '.6em', 'text-anchor': 'middle' } },\n}, args);\n//# sourceMappingURL=side.js.map","import { toResult } from './util';\nexport const outside = (portPosition, elemBBox, args) => outsideLayout(portPosition, elemBBox, false, args);\nexport const outsideOriented = (portPosition, elemBBox, args) => outsideLayout(portPosition, elemBBox, true, args);\nexport const inside = (portPosition, elemBBox, args) => insideLayout(portPosition, elemBBox, false, args);\nexport const insideOriented = (portPosition, elemBBox, args) => insideLayout(portPosition, elemBBox, true, args);\nfunction outsideLayout(portPosition, elemBBox, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 15;\n    const angle = elemBBox.getCenter().theta(portPosition);\n    const bboxAngles = getBBoxAngles(elemBBox);\n    let y;\n    let tx;\n    let ty;\n    let textAnchor;\n    let orientAngle = 0;\n    if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    }\n    else if (angle < bboxAngles[0]) {\n        y = '0';\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    else if (angle < bboxAngles[3]) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    }\n    else {\n        y = '.6em';\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    return toResult({\n        position: {\n            x: Math.round(tx),\n            y: Math.round(ty),\n        },\n        angle: orientAngle,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\nfunction insideLayout(portPosition, elemBBox, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 15;\n    const angle = elemBBox.getCenter().theta(portPosition);\n    const bboxAngles = getBBoxAngles(elemBBox);\n    let y;\n    let tx;\n    let ty;\n    let textAnchor;\n    let orientAngle = 0;\n    if (angle < bboxAngles[1] || angle > bboxAngles[2]) {\n        y = '.3em';\n        tx = -offset;\n        ty = 0;\n        textAnchor = 'end';\n    }\n    else if (angle < bboxAngles[0]) {\n        y = '.6em';\n        tx = 0;\n        ty = offset;\n        if (autoOrient) {\n            orientAngle = 90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    else if (angle < bboxAngles[3]) {\n        y = '.3em';\n        tx = offset;\n        ty = 0;\n        textAnchor = 'start';\n    }\n    else {\n        y = '0em';\n        tx = 0;\n        ty = -offset;\n        if (autoOrient) {\n            orientAngle = -90;\n            textAnchor = 'start';\n        }\n        else {\n            textAnchor = 'middle';\n        }\n    }\n    return toResult({\n        position: {\n            x: Math.round(tx),\n            y: Math.round(ty),\n        },\n        angle: orientAngle,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\nfunction getBBoxAngles(elemBBox) {\n    const center = elemBBox.getCenter();\n    const tl = center.theta(elemBBox.getTopLeft());\n    const bl = center.theta(elemBBox.getBottomLeft());\n    const br = center.theta(elemBBox.getBottomRight());\n    const tr = center.theta(elemBBox.getTopRight());\n    return [tl, tr, br, bl];\n}\n//# sourceMappingURL=inout.js.map","import { Point } from '@antv/x6-geometry';\nimport { toResult } from './util';\nexport const radial = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), false, args);\nexport const radialOriented = (portPosition, elemBBox, args) => radialLayout(portPosition.diff(elemBBox.getCenter()), true, args);\nfunction radialLayout(portCenterOffset, autoOrient, args) {\n    const offset = args.offset != null ? args.offset : 20;\n    const origin = new Point(0, 0);\n    const angle = -portCenterOffset.theta(origin);\n    const pos = portCenterOffset\n        .clone()\n        .move(origin, offset)\n        .diff(portCenterOffset)\n        .round();\n    let y = '.3em';\n    let textAnchor;\n    let orientAngle = angle;\n    if ((angle + 90) % 180 === 0) {\n        textAnchor = autoOrient ? 'end' : 'middle';\n        if (!autoOrient && angle === -270) {\n            y = '0em';\n        }\n    }\n    else if (angle > -270 && angle < -90) {\n        textAnchor = 'start';\n        orientAngle = angle - 180;\n    }\n    else {\n        textAnchor = 'end';\n    }\n    return toResult({\n        position: pos.round().toJSON(),\n        angle: autoOrient ? orientAngle : 0,\n        attrs: {\n            '.': {\n                y,\n                'text-anchor': textAnchor,\n            },\n        },\n    }, args);\n}\n//# sourceMappingURL=radial.js.map","import { Registry } from '../registry';\nimport * as layouts from './main';\nexport var PortLabelLayout;\n(function (PortLabelLayout) {\n    PortLabelLayout.presets = layouts;\n    PortLabelLayout.registry = Registry.create({\n        type: 'port label layout',\n    });\n    PortLabelLayout.registry.register(PortLabelLayout.presets, true);\n})(PortLabelLayout || (PortLabelLayout = {}));\n//# sourceMappingURL=index.js.map","import { Dom, Basecoat } from '@antv/x6-common';\nimport { Config } from '../config';\nexport class View extends Basecoat {\n    get priority() {\n        return 2;\n    }\n    constructor() {\n        super();\n        this.cid = Private.uniqueId();\n        View.views[this.cid] = this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    confirmUpdate(flag, options) {\n        return 0;\n    }\n    empty(elem = this.container) {\n        Dom.empty(elem);\n        return this;\n    }\n    unmount(elem = this.container) {\n        Dom.remove(elem);\n        return this;\n    }\n    remove(elem = this.container) {\n        if (elem === this.container) {\n            this.removeEventListeners(document);\n            this.onRemove();\n            delete View.views[this.cid];\n        }\n        this.unmount(elem);\n        return this;\n    }\n    onRemove() { }\n    setClass(className, elem = this.container) {\n        elem.classList.value = Array.isArray(className)\n            ? className.join(' ')\n            : className;\n    }\n    addClass(className, elem = this.container) {\n        Dom.addClass(elem, Array.isArray(className) ? className.join(' ') : className);\n        return this;\n    }\n    removeClass(className, elem = this.container) {\n        Dom.removeClass(elem, Array.isArray(className) ? className.join(' ') : className);\n        return this;\n    }\n    setStyle(style, elem = this.container) {\n        Dom.css(elem, style);\n        return this;\n    }\n    setAttrs(attrs, elem = this.container) {\n        if (attrs != null && elem != null) {\n            Dom.attr(elem, attrs);\n        }\n        return this;\n    }\n    /**\n     * Returns the value of the specified attribute of `node`.\n     *\n     * If the node does not set a value for attribute, start recursing up\n     * the DOM tree from node to lookup for attribute at the ancestors of\n     * node. If the recursion reaches CellView's root node and attribute\n     * is not found even there, return `null`.\n     */\n    findAttr(attrName, elem = this.container) {\n        let current = elem;\n        while (current && current.nodeType === 1) {\n            const value = current.getAttribute(attrName);\n            if (value != null) {\n                return value;\n            }\n            if (current === this.container) {\n                return null;\n            }\n            current = current.parentNode;\n        }\n        return null;\n    }\n    find(selector, rootElem = this.container, selectors = this.selectors) {\n        return View.find(selector, rootElem, selectors).elems;\n    }\n    findOne(selector, rootElem = this.container, selectors = this.selectors) {\n        const nodes = this.find(selector, rootElem, selectors);\n        return nodes.length > 0 ? nodes[0] : null;\n    }\n    findByAttr(attrName, elem = this.container) {\n        let node = elem;\n        while (node && node.getAttribute) {\n            const val = node.getAttribute(attrName);\n            if ((val != null || node === this.container) && val !== 'false') {\n                return node;\n            }\n            node = node.parentNode;\n        }\n        // If the overall cell has set `magnet === false`, then returns\n        // `null` to announce there is no magnet found for this cell.\n        // This is especially useful to set on cells that have 'ports'.\n        // In this case, only the ports have set `magnet === true` and the\n        // overall element has `magnet === false`.\n        return null;\n    }\n    getSelector(elem, prevSelector) {\n        let selector;\n        if (elem === this.container) {\n            if (typeof prevSelector === 'string') {\n                selector = `> ${prevSelector}`;\n            }\n            return selector;\n        }\n        if (elem) {\n            const nth = Dom.index(elem) + 1;\n            selector = `${elem.tagName.toLowerCase()}:nth-child(${nth})`;\n            if (prevSelector) {\n                selector += ` > ${prevSelector}`;\n            }\n            selector = this.getSelector(elem.parentNode, selector);\n        }\n        return selector;\n    }\n    prefixClassName(className) {\n        return Config.prefix(className);\n    }\n    delegateEvents(events, append) {\n        if (events == null) {\n            return this;\n        }\n        if (!append) {\n            this.undelegateEvents();\n        }\n        const splitter = /^(\\S+)\\s*(.*)$/;\n        Object.keys(events).forEach((key) => {\n            const match = key.match(splitter);\n            if (match == null) {\n                return;\n            }\n            const method = this.getEventHandler(events[key]);\n            if (typeof method === 'function') {\n                this.delegateEvent(match[1], match[2], method);\n            }\n        });\n        return this;\n    }\n    undelegateEvents() {\n        Dom.Event.off(this.container, this.getEventNamespace());\n        return this;\n    }\n    delegateDocumentEvents(events, data) {\n        this.addEventListeners(document, events, data);\n        return this;\n    }\n    undelegateDocumentEvents() {\n        this.removeEventListeners(document);\n        return this;\n    }\n    delegateEvent(eventName, selector, listener) {\n        Dom.Event.on(this.container, eventName + this.getEventNamespace(), selector, listener);\n        return this;\n    }\n    undelegateEvent(eventName, selector, listener) {\n        const name = eventName + this.getEventNamespace();\n        if (selector == null) {\n            Dom.Event.off(this.container, name);\n        }\n        else if (typeof selector === 'string') {\n            Dom.Event.off(this.container, name, selector, listener);\n        }\n        else {\n            Dom.Event.off(this.container, name, selector);\n        }\n        return this;\n    }\n    addEventListeners(elem, events, data) {\n        if (events == null) {\n            return this;\n        }\n        const ns = this.getEventNamespace();\n        Object.keys(events).forEach((eventName) => {\n            const method = this.getEventHandler(events[eventName]);\n            if (typeof method === 'function') {\n                Dom.Event.on(elem, eventName + ns, data, method);\n            }\n        });\n        return this;\n    }\n    removeEventListeners(elem) {\n        if (elem != null) {\n            Dom.Event.off(elem, this.getEventNamespace());\n        }\n        return this;\n    }\n    getEventNamespace() {\n        return `.${Config.prefixCls}-event-${this.cid}`;\n    }\n    // eslint-disable-next-line\n    getEventHandler(handler) {\n        // eslint-disable-next-line\n        let method;\n        if (typeof handler === 'string') {\n            const fn = this[handler];\n            if (typeof fn === 'function') {\n                method = (...args) => fn.call(this, ...args);\n            }\n        }\n        else {\n            method = (...args) => handler.call(this, ...args);\n        }\n        return method;\n    }\n    getEventTarget(e, options = {}) {\n        // Touchmove/Touchend event's target is not reflecting the element\n        // under the coordinates as mousemove does.\n        // It holds the element when a touchstart triggered.\n        const { target, type, clientX = 0, clientY = 0 } = e;\n        if (options.fromPoint || type === 'touchmove' || type === 'touchend') {\n            return document.elementFromPoint(clientX, clientY);\n        }\n        return target;\n    }\n    stopPropagation(e) {\n        this.setEventData(e, { propagationStopped: true });\n        return this;\n    }\n    isPropagationStopped(e) {\n        return this.getEventData(e).propagationStopped === true;\n    }\n    getEventData(e) {\n        return this.eventData(e);\n    }\n    setEventData(e, data) {\n        return this.eventData(e, data);\n    }\n    eventData(e, data) {\n        if (e == null) {\n            throw new TypeError('Event object required');\n        }\n        let currentData = e.data;\n        const key = `__${this.cid}__`;\n        // get\n        if (data == null) {\n            if (currentData == null) {\n                return {};\n            }\n            return currentData[key] || {};\n        }\n        // set\n        if (currentData == null) {\n            currentData = e.data = {};\n        }\n        if (currentData[key] == null) {\n            currentData[key] = Object.assign({}, data);\n        }\n        else {\n            currentData[key] = Object.assign(Object.assign({}, currentData[key]), data);\n        }\n        return currentData[key];\n    }\n    normalizeEvent(evt) {\n        return View.normalizeEvent(evt);\n    }\n}\n(function (View) {\n    function createElement(tagName, isSvgElement) {\n        return isSvgElement\n            ? Dom.createSvgElement(tagName || 'g')\n            : Dom.createElementNS(tagName || 'div');\n    }\n    View.createElement = createElement;\n    function find(selector, rootElem, selectors) {\n        if (!selector || selector === '.') {\n            return { elems: [rootElem] };\n        }\n        if (selectors) {\n            const nodes = selectors[selector];\n            if (nodes) {\n                return { elems: Array.isArray(nodes) ? nodes : [nodes] };\n            }\n        }\n        if (Config.useCSSSelector) {\n            const validSelector = selector.includes('>')\n                ? `:scope ${selector}`\n                : selector;\n            return {\n                isCSSSelector: true,\n                // $(rootElem).find(selector).toArray() as Element[]\n                elems: Array.prototype.slice.call(rootElem.querySelectorAll(validSelector)),\n            };\n        }\n        return { elems: [] };\n    }\n    View.find = find;\n    function normalizeEvent(evt) {\n        let normalizedEvent = evt;\n        const originalEvent = evt.originalEvent;\n        const touchEvt = originalEvent &&\n            originalEvent.changedTouches &&\n            originalEvent.changedTouches[0];\n        if (touchEvt) {\n            // eslint-disable-next-line no-restricted-syntax\n            for (const key in evt) {\n                if (touchEvt[key] === undefined) {\n                    touchEvt[key] = evt[key];\n                }\n            }\n            normalizedEvent = touchEvt;\n        }\n        return normalizedEvent;\n    }\n    View.normalizeEvent = normalizeEvent;\n})(View || (View = {}));\n(function (View) {\n    View.views = {};\n    function getView(cid) {\n        return View.views[cid] || null;\n    }\n    View.getView = getView;\n})(View || (View = {}));\nvar Private;\n(function (Private) {\n    let counter = 0;\n    function uniqueId() {\n        const id = `v${counter}`;\n        counter += 1;\n        return id;\n    }\n    Private.uniqueId = uniqueId;\n})(Private || (Private = {}));\n//# sourceMappingURL=view.js.map","import { ObjectExt, Dom, Vector } from '@antv/x6-common';\n// eslint-disable-next-line\nexport var Markup;\n(function (Markup) {\n    function isJSONMarkup(markup) {\n        return markup != null && !isStringMarkup(markup);\n    }\n    Markup.isJSONMarkup = isJSONMarkup;\n    function isStringMarkup(markup) {\n        return markup != null && typeof markup === 'string';\n    }\n    Markup.isStringMarkup = isStringMarkup;\n    function clone(markup) {\n        return markup == null || isStringMarkup(markup)\n            ? markup\n            : ObjectExt.cloneDeep(markup);\n    }\n    Markup.clone = clone;\n    /**\n     * Removes blank space in markup to prevent create empty text node.\n     */\n    function sanitize(markup) {\n        return `${markup}`\n            .trim()\n            .replace(/[\\r|\\n]/g, ' ')\n            .replace(/>\\s+</g, '><');\n    }\n    Markup.sanitize = sanitize;\n    function parseJSONMarkup(markup, options = { ns: Dom.ns.svg }) {\n        const fragment = document.createDocumentFragment();\n        const groups = {};\n        const selectors = {};\n        const queue = [\n            {\n                markup: Array.isArray(markup) ? markup : [markup],\n                parent: fragment,\n                ns: options.ns,\n            },\n        ];\n        while (queue.length > 0) {\n            const item = queue.pop();\n            let ns = item.ns || Dom.ns.svg;\n            const defines = item.markup;\n            const parentNode = item.parent;\n            defines.forEach((define) => {\n                // tagName\n                const tagName = define.tagName;\n                if (!tagName) {\n                    throw new TypeError('Invalid tagName');\n                }\n                // ns\n                if (define.ns) {\n                    ns = define.ns;\n                }\n                const node = ns\n                    ? Dom.createElementNS(tagName, ns)\n                    : Dom.createElement(tagName);\n                // attrs\n                const attrs = define.attrs;\n                if (attrs) {\n                    Dom.attr(node, Dom.kebablizeAttrs(attrs));\n                }\n                // style\n                const style = define.style;\n                if (style) {\n                    Dom.css(node, style);\n                }\n                // classname\n                const className = define.className;\n                if (className != null) {\n                    node.setAttribute('class', Array.isArray(className) ? className.join(' ') : className);\n                }\n                // textContent\n                if (define.textContent) {\n                    node.textContent = define.textContent;\n                }\n                // selector\n                const selector = define.selector;\n                if (selector != null) {\n                    if (selectors[selector]) {\n                        throw new TypeError('Selector must be unique');\n                    }\n                    selectors[selector] = node;\n                }\n                // group\n                if (define.groupSelector) {\n                    let nodeGroups = define.groupSelector;\n                    if (!Array.isArray(nodeGroups)) {\n                        nodeGroups = [nodeGroups];\n                    }\n                    nodeGroups.forEach((name) => {\n                        if (!groups[name]) {\n                            groups[name] = [];\n                        }\n                        groups[name].push(node);\n                    });\n                }\n                parentNode.appendChild(node);\n                // children\n                const children = define.children;\n                if (Array.isArray(children)) {\n                    queue.push({ ns, markup: children, parent: node });\n                }\n            });\n        }\n        Object.keys(groups).forEach((groupName) => {\n            if (selectors[groupName]) {\n                throw new Error('Ambiguous group selector');\n            }\n            selectors[groupName] = groups[groupName];\n        });\n        return { fragment, selectors, groups };\n    }\n    Markup.parseJSONMarkup = parseJSONMarkup;\n    function createContainer(firstChild) {\n        return firstChild instanceof SVGElement\n            ? Dom.createSvgElement('g')\n            : Dom.createElement('div');\n    }\n    function renderMarkup(markup) {\n        if (isStringMarkup(markup)) {\n            const nodes = Vector.createVectors(markup);\n            const count = nodes.length;\n            if (count === 1) {\n                return {\n                    elem: nodes[0].node,\n                };\n            }\n            if (count > 1) {\n                const elem = createContainer(nodes[0].node);\n                nodes.forEach((node) => {\n                    elem.appendChild(node.node);\n                });\n                return { elem };\n            }\n            return {};\n        }\n        const result = parseJSONMarkup(markup);\n        const fragment = result.fragment;\n        let elem = null;\n        if (fragment.childNodes.length > 1) {\n            elem = createContainer(fragment.firstChild);\n            elem.appendChild(fragment);\n        }\n        else {\n            elem = fragment.firstChild;\n        }\n        return { elem, selectors: result.selectors };\n    }\n    Markup.renderMarkup = renderMarkup;\n    function parseLabelStringMarkup(markup) {\n        const children = Vector.createVectors(markup);\n        const fragment = document.createDocumentFragment();\n        for (let i = 0, n = children.length; i < n; i += 1) {\n            const currentChild = children[i].node;\n            fragment.appendChild(currentChild);\n        }\n        return { fragment, selectors: {} };\n    }\n    Markup.parseLabelStringMarkup = parseLabelStringMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getSelector(elem, stop, prev) {\n        if (elem != null) {\n            let selector;\n            const tagName = elem.tagName.toLowerCase();\n            if (elem === stop) {\n                if (typeof prev === 'string') {\n                    selector = `> ${tagName} > ${prev}`;\n                }\n                else {\n                    selector = `> ${tagName}`;\n                }\n                return selector;\n            }\n            const parent = elem.parentNode;\n            if (parent && parent.childNodes.length > 1) {\n                const nth = Dom.index(elem) + 1;\n                selector = `${tagName}:nth-child(${nth})`;\n            }\n            else {\n                selector = tagName;\n            }\n            if (prev) {\n                selector += ` > ${prev}`;\n            }\n            return getSelector(elem.parentNode, stop, selector);\n        }\n        return prev;\n    }\n    Markup.getSelector = getSelector;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getPortContainerMarkup() {\n        return 'g';\n    }\n    Markup.getPortContainerMarkup = getPortContainerMarkup;\n    function getPortMarkup() {\n        return {\n            tagName: 'circle',\n            selector: 'circle',\n            attrs: {\n                r: 10,\n                fill: '#FFFFFF',\n                stroke: '#000000',\n            },\n        };\n    }\n    Markup.getPortMarkup = getPortMarkup;\n    function getPortLabelMarkup() {\n        return {\n            tagName: 'text',\n            selector: 'text',\n            attrs: {\n                fill: '#000000',\n            },\n        };\n    }\n    Markup.getPortLabelMarkup = getPortLabelMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getEdgeMarkup() {\n        return [\n            {\n                tagName: 'path',\n                selector: 'wrap',\n                groupSelector: 'lines',\n                attrs: {\n                    fill: 'none',\n                    cursor: 'pointer',\n                    stroke: 'transparent',\n                    strokeLinecap: 'round',\n                },\n            },\n            {\n                tagName: 'path',\n                selector: 'line',\n                groupSelector: 'lines',\n                attrs: {\n                    fill: 'none',\n                    pointerEvents: 'none',\n                },\n            },\n        ];\n    }\n    Markup.getEdgeMarkup = getEdgeMarkup;\n})(Markup || (Markup = {}));\n// eslint-disable-next-line\n(function (Markup) {\n    function getForeignObjectMarkup(bare = false) {\n        return {\n            tagName: 'foreignObject',\n            selector: 'fo',\n            children: [\n                {\n                    ns: Dom.ns.xhtml,\n                    tagName: 'body',\n                    selector: 'foBody',\n                    attrs: {\n                        xmlns: Dom.ns.xhtml,\n                    },\n                    style: {\n                        width: '100%',\n                        height: '100%',\n                        background: 'transparent',\n                    },\n                    children: bare\n                        ? []\n                        : [\n                            {\n                                tagName: 'div',\n                                selector: 'foContent',\n                                style: {\n                                    width: '100%',\n                                    height: '100%',\n                                },\n                            },\n                        ],\n                },\n            ],\n        };\n    }\n    Markup.getForeignObjectMarkup = getForeignObjectMarkup;\n})(Markup || (Markup = {}));\n//# sourceMappingURL=markup.js.map","import { Dictionary, Dom } from '@antv/x6-common';\nimport { Util } from '../util';\nexport class Cache {\n    constructor(view) {\n        this.view = view;\n        this.clean();\n    }\n    clean() {\n        if (this.elemCache) {\n            this.elemCache.dispose();\n        }\n        this.elemCache = new Dictionary();\n        this.pathCache = {};\n    }\n    get(elem) {\n        const cache = this.elemCache;\n        if (!cache.has(elem)) {\n            this.elemCache.set(elem, {});\n        }\n        return this.elemCache.get(elem);\n    }\n    getData(elem) {\n        const meta = this.get(elem);\n        if (!meta.data) {\n            meta.data = {};\n        }\n        return meta.data;\n    }\n    getMatrix(elem) {\n        const meta = this.get(elem);\n        if (meta.matrix == null) {\n            const target = this.view.container;\n            meta.matrix = Dom.getTransformToParentElement(elem, target);\n        }\n        return Dom.createSVGMatrix(meta.matrix);\n    }\n    getShape(elem) {\n        const meta = this.get(elem);\n        if (meta.shape == null) {\n            meta.shape = Util.toGeometryShape(elem);\n        }\n        return meta.shape.clone();\n    }\n    getBoundingRect(elem) {\n        const meta = this.get(elem);\n        if (meta.boundingRect == null) {\n            meta.boundingRect = Util.getBBoxV2(elem);\n        }\n        return meta.boundingRect.clone();\n    }\n}\n//# sourceMappingURL=cache.js.map","import { ObjectExt, ArrayExt, Dom, FunctionExt, Dictionary, StringExt, } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { Attr } from '../registry/attr';\nimport { View } from './view';\nimport { Util } from '../util';\nexport class AttrManager {\n    constructor(view) {\n        this.view = view;\n    }\n    get cell() {\n        return this.view.cell;\n    }\n    getDefinition(attrName) {\n        return this.cell.getAttrDefinition(attrName);\n    }\n    processAttrs(elem, raw) {\n        let normal;\n        let set;\n        let offset;\n        let position;\n        const specials = [];\n        // divide the attributes between normal and special\n        Object.keys(raw).forEach((name) => {\n            const val = raw[name];\n            const definition = this.getDefinition(name);\n            const isValid = FunctionExt.call(Attr.isValidDefinition, this.view, definition, val, {\n                elem,\n                attrs: raw,\n                cell: this.cell,\n                view: this.view,\n            });\n            if (definition && isValid) {\n                if (typeof definition === 'string') {\n                    if (normal == null) {\n                        normal = {};\n                    }\n                    normal[definition] = val;\n                }\n                else if (val !== null) {\n                    specials.push({ name, definition });\n                }\n            }\n            else {\n                if (normal == null) {\n                    normal = {};\n                }\n                const normalName = Dom.CASE_SENSITIVE_ATTR.includes(name)\n                    ? name\n                    : StringExt.kebabCase(name);\n                normal[normalName] = val;\n            }\n        });\n        specials.forEach(({ name, definition }) => {\n            const val = raw[name];\n            const setDefine = definition;\n            if (typeof setDefine.set === 'function') {\n                if (set == null) {\n                    set = {};\n                }\n                set[name] = val;\n            }\n            const offsetDefine = definition;\n            if (typeof offsetDefine.offset === 'function') {\n                if (offset == null) {\n                    offset = {};\n                }\n                offset[name] = val;\n            }\n            const positionDefine = definition;\n            if (typeof positionDefine.position === 'function') {\n                if (position == null) {\n                    position = {};\n                }\n                position[name] = val;\n            }\n        });\n        return {\n            raw,\n            normal,\n            set,\n            offset,\n            position,\n        };\n    }\n    mergeProcessedAttrs(allProcessedAttrs, roProcessedAttrs) {\n        allProcessedAttrs.set = Object.assign(Object.assign({}, allProcessedAttrs.set), roProcessedAttrs.set);\n        allProcessedAttrs.position = Object.assign(Object.assign({}, allProcessedAttrs.position), roProcessedAttrs.position);\n        allProcessedAttrs.offset = Object.assign(Object.assign({}, allProcessedAttrs.offset), roProcessedAttrs.offset);\n        // Handle also the special transform property.\n        const transform = allProcessedAttrs.normal && allProcessedAttrs.normal.transform;\n        if (transform != null && roProcessedAttrs.normal) {\n            roProcessedAttrs.normal.transform = transform;\n        }\n        allProcessedAttrs.normal = roProcessedAttrs.normal;\n    }\n    findAttrs(cellAttrs, rootNode, selectorCache, selectors) {\n        const merge = [];\n        const result = new Dictionary();\n        Object.keys(cellAttrs).forEach((selector) => {\n            const attrs = cellAttrs[selector];\n            if (!ObjectExt.isPlainObject(attrs)) {\n                return;\n            }\n            const { isCSSSelector, elems } = View.find(selector, rootNode, selectors);\n            selectorCache[selector] = elems;\n            for (let i = 0, l = elems.length; i < l; i += 1) {\n                const elem = elems[i];\n                const unique = selectors && selectors[selector] === elem;\n                const prev = result.get(elem);\n                if (prev) {\n                    if (!prev.array) {\n                        merge.push(elem);\n                        prev.array = true;\n                        prev.attrs = [prev.attrs];\n                        prev.priority = [prev.priority];\n                    }\n                    const attributes = prev.attrs;\n                    const selectedLength = prev.priority;\n                    if (unique) {\n                        // node referenced by `selector`\n                        attributes.unshift(attrs);\n                        selectedLength.unshift(-1);\n                    }\n                    else {\n                        // node referenced by `groupSelector` or CSSSelector\n                        const sortIndex = ArrayExt.sortedIndex(selectedLength, isCSSSelector ? -1 : l);\n                        attributes.splice(sortIndex, 0, attrs);\n                        selectedLength.splice(sortIndex, 0, l);\n                    }\n                }\n                else {\n                    result.set(elem, {\n                        elem,\n                        attrs,\n                        priority: unique ? -1 : l,\n                        array: false,\n                    });\n                }\n            }\n        });\n        merge.forEach((node) => {\n            const item = result.get(node);\n            const arr = item.attrs;\n            item.attrs = arr.reduceRight((memo, attrs) => ObjectExt.merge(memo, attrs), {});\n        });\n        return result;\n    }\n    updateRelativeAttrs(elem, processedAttrs, refBBox) {\n        const rawAttrs = processedAttrs.raw || {};\n        let nodeAttrs = processedAttrs.normal || {};\n        const setAttrs = processedAttrs.set;\n        const positionAttrs = processedAttrs.position;\n        const offsetAttrs = processedAttrs.offset;\n        const getOptions = () => ({\n            elem,\n            cell: this.cell,\n            view: this.view,\n            attrs: rawAttrs,\n            refBBox: refBBox.clone(),\n        });\n        if (setAttrs != null) {\n            Object.keys(setAttrs).forEach((name) => {\n                const val = setAttrs[name];\n                const def = this.getDefinition(name);\n                if (def != null) {\n                    const ret = FunctionExt.call(def.set, this.view, val, getOptions());\n                    if (typeof ret === 'object') {\n                        nodeAttrs = Object.assign(Object.assign({}, nodeAttrs), ret);\n                    }\n                    else if (ret != null) {\n                        nodeAttrs[name] = ret;\n                    }\n                }\n            });\n        }\n        if (elem instanceof HTMLElement) {\n            // TODO: setting the `transform` attribute on HTMLElements\n            // via `node.style.transform = 'matrix(...)';` would introduce\n            // a breaking change (e.g. basic.TextBlock).\n            this.view.setAttrs(nodeAttrs, elem);\n            return;\n        }\n        // The final translation of the subelement.\n        const nodeTransform = nodeAttrs.transform;\n        const transform = nodeTransform ? `${nodeTransform}` : null;\n        const nodeMatrix = Dom.transformStringToMatrix(transform);\n        const nodePosition = new Point(nodeMatrix.e, nodeMatrix.f);\n        if (nodeTransform) {\n            delete nodeAttrs.transform;\n            nodeMatrix.e = 0;\n            nodeMatrix.f = 0;\n        }\n        let positioned = false;\n        if (positionAttrs != null) {\n            Object.keys(positionAttrs).forEach((name) => {\n                const val = positionAttrs[name];\n                const def = this.getDefinition(name);\n                if (def != null) {\n                    const ts = FunctionExt.call(def.position, this.view, val, getOptions());\n                    if (ts != null) {\n                        positioned = true;\n                        nodePosition.translate(Point.create(ts));\n                    }\n                }\n            });\n        }\n        // The node bounding box could depend on the `size`\n        // set from the previous loop.\n        this.view.setAttrs(nodeAttrs, elem);\n        let offseted = false;\n        if (offsetAttrs != null) {\n            // Check if the node is visible\n            const nodeBoundingRect = this.view.getBoundingRectOfElement(elem);\n            if (nodeBoundingRect.width > 0 && nodeBoundingRect.height > 0) {\n                const nodeBBox = Util.transformRectangle(nodeBoundingRect, nodeMatrix);\n                Object.keys(offsetAttrs).forEach((name) => {\n                    const val = offsetAttrs[name];\n                    const def = this.getDefinition(name);\n                    if (def != null) {\n                        const ts = FunctionExt.call(def.offset, this.view, val, {\n                            elem,\n                            cell: this.cell,\n                            view: this.view,\n                            attrs: rawAttrs,\n                            refBBox: nodeBBox,\n                        });\n                        if (ts != null) {\n                            offseted = true;\n                            nodePosition.translate(Point.create(ts));\n                        }\n                    }\n                });\n            }\n        }\n        if (nodeTransform != null || positioned || offseted) {\n            nodePosition.round(1);\n            nodeMatrix.e = nodePosition.x;\n            nodeMatrix.f = nodePosition.y;\n            elem.setAttribute('transform', Dom.matrixToTransformString(nodeMatrix));\n        }\n    }\n    update(rootNode, attrs, options) {\n        const selectorCache = {};\n        const nodesAttrs = this.findAttrs(options.attrs || attrs, rootNode, selectorCache, options.selectors);\n        // `nodesAttrs` are different from all attributes, when\n        // rendering only attributes sent to this method.\n        const nodesAllAttrs = options.attrs\n            ? this.findAttrs(attrs, rootNode, selectorCache, options.selectors)\n            : nodesAttrs;\n        const specialItems = [];\n        nodesAttrs.each((data) => {\n            const node = data.elem;\n            const nodeAttrs = data.attrs;\n            const processed = this.processAttrs(node, nodeAttrs);\n            if (processed.set == null &&\n                processed.position == null &&\n                processed.offset == null) {\n                this.view.setAttrs(processed.normal, node);\n            }\n            else {\n                const data = nodesAllAttrs.get(node);\n                const nodeAllAttrs = data ? data.attrs : null;\n                const refSelector = nodeAllAttrs && nodeAttrs.ref == null\n                    ? nodeAllAttrs.ref\n                    : nodeAttrs.ref;\n                let refNode;\n                if (refSelector) {\n                    refNode = (selectorCache[refSelector] ||\n                        this.view.find(refSelector, rootNode, options.selectors))[0];\n                    if (!refNode) {\n                        throw new Error(`\"${refSelector}\" reference does not exist.`);\n                    }\n                }\n                else {\n                    refNode = null;\n                }\n                const item = {\n                    node,\n                    refNode,\n                    attributes: nodeAllAttrs,\n                    processedAttributes: processed,\n                };\n                // If an element in the list is positioned relative to this one, then\n                // we want to insert this one before it in the list.\n                const index = specialItems.findIndex((item) => item.refNode === node);\n                if (index > -1) {\n                    specialItems.splice(index, 0, item);\n                }\n                else {\n                    specialItems.push(item);\n                }\n            }\n        });\n        const bboxCache = new Dictionary();\n        let rotatableMatrix;\n        specialItems.forEach((item) => {\n            const node = item.node;\n            const refNode = item.refNode;\n            let unrotatedRefBBox;\n            const isRefNodeRotatable = refNode != null &&\n                options.rotatableNode != null &&\n                Dom.contains(options.rotatableNode, refNode);\n            // Find the reference element bounding box. If no reference was\n            // provided, we use the optional bounding box.\n            if (refNode) {\n                unrotatedRefBBox = bboxCache.get(refNode);\n            }\n            if (!unrotatedRefBBox) {\n                const target = (isRefNodeRotatable ? options.rotatableNode : rootNode);\n                unrotatedRefBBox = refNode\n                    ? Util.getBBox(refNode, { target })\n                    : options.rootBBox;\n                if (refNode) {\n                    bboxCache.set(refNode, unrotatedRefBBox);\n                }\n            }\n            let processedAttrs;\n            if (options.attrs && item.attributes) {\n                // If there was a special attribute affecting the position amongst\n                // passed-in attributes we have to merge it with the rest of the\n                // element's attributes as they are necessary to update the position\n                // relatively (i.e `ref-x` && 'ref-dx').\n                processedAttrs = this.processAttrs(node, item.attributes);\n                this.mergeProcessedAttrs(processedAttrs, item.processedAttributes);\n            }\n            else {\n                processedAttrs = item.processedAttributes;\n            }\n            let refBBox = unrotatedRefBBox;\n            if (isRefNodeRotatable &&\n                options.rotatableNode != null &&\n                !options.rotatableNode.contains(node)) {\n                // If the referenced node is inside the rotatable group while the\n                // updated node is outside, we need to take the rotatable node\n                // transformation into account.\n                if (!rotatableMatrix) {\n                    rotatableMatrix = Dom.transformStringToMatrix(Dom.attr(options.rotatableNode, 'transform'));\n                }\n                refBBox = Util.transformRectangle(unrotatedRefBBox, rotatableMatrix);\n            }\n            this.updateRelativeAttrs(node, processedAttrs, refBBox);\n        });\n    }\n}\n//# sourceMappingURL=attr.js.map","/* eslint-disable no-bitwise */\nexport class FlagManager {\n    get cell() {\n        return this.view.cell;\n    }\n    constructor(view, actions, bootstrap = []) {\n        this.view = view;\n        const flags = {};\n        const attrs = {};\n        let shift = 0;\n        Object.keys(actions).forEach((attr) => {\n            let labels = actions[attr];\n            if (!Array.isArray(labels)) {\n                labels = [labels];\n            }\n            labels.forEach((label) => {\n                let flag = flags[label];\n                if (!flag) {\n                    shift += 1;\n                    flag = flags[label] = 1 << shift;\n                }\n                attrs[attr] |= flag;\n            });\n        });\n        let labels = bootstrap;\n        if (!Array.isArray(labels)) {\n            labels = [labels];\n        }\n        labels.forEach((label) => {\n            if (!flags[label]) {\n                shift += 1;\n                flags[label] = 1 << shift;\n            }\n        });\n        // 26 - 30 are reserved for paper flags\n        // 31+ overflows maximal number\n        if (shift > 25) {\n            throw new Error('Maximum number of flags exceeded.');\n        }\n        this.flags = flags;\n        this.attrs = attrs;\n        this.bootstrap = bootstrap;\n    }\n    getFlag(label) {\n        const flags = this.flags;\n        if (flags == null) {\n            return 0;\n        }\n        if (Array.isArray(label)) {\n            return label.reduce((memo, key) => memo | flags[key], 0);\n        }\n        return flags[label] | 0;\n    }\n    hasAction(flag, label) {\n        return flag & this.getFlag(label);\n    }\n    removeAction(flag, label) {\n        return flag ^ (flag & this.getFlag(label));\n    }\n    getBootstrapFlag() {\n        return this.getFlag(this.bootstrap);\n    }\n    getChangedFlag() {\n        let flag = 0;\n        if (!this.attrs) {\n            return flag;\n        }\n        Object.keys(this.attrs).forEach((attr) => {\n            if (this.cell.hasChanged(attr)) {\n                flag |= this.attrs[attr];\n            }\n        });\n        return flag;\n    }\n}\n//# sourceMappingURL=flag.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Rectangle } from '@antv/x6-geometry';\nimport { ArrayExt, ObjectExt, Dom, FunctionExt, } from '@antv/x6-common';\nimport { Registry } from '../registry/registry';\nimport { View } from './view';\nimport { Cache } from './cache';\nimport { Markup } from './markup';\nimport { ToolsView } from './tool';\nimport { AttrManager } from './attr';\nimport { FlagManager } from './flag';\nimport { Util } from '../util';\nexport class CellView extends View {\n    static getDefaults() {\n        return this.defaults;\n    }\n    static config(options) {\n        this.defaults = this.getOptions(options);\n    }\n    static getOptions(options) {\n        const mergeActions = (arr1, arr2) => {\n            if (arr2 != null) {\n                return ArrayExt.uniq([\n                    ...(Array.isArray(arr1) ? arr1 : [arr1]),\n                    ...(Array.isArray(arr2) ? arr2 : [arr2]),\n                ]);\n            }\n            return Array.isArray(arr1) ? [...arr1] : [arr1];\n        };\n        const ret = ObjectExt.cloneDeep(this.getDefaults());\n        const { bootstrap, actions, events, documentEvents } = options, others = __rest(options, [\"bootstrap\", \"actions\", \"events\", \"documentEvents\"]);\n        if (bootstrap) {\n            ret.bootstrap = mergeActions(ret.bootstrap, bootstrap);\n        }\n        if (actions) {\n            Object.entries(actions).forEach(([key, val]) => {\n                const raw = ret.actions[key];\n                if (val && raw) {\n                    ret.actions[key] = mergeActions(raw, val);\n                }\n                else if (val) {\n                    ret.actions[key] = mergeActions(val);\n                }\n            });\n        }\n        if (events) {\n            ret.events = Object.assign(Object.assign({}, ret.events), events);\n        }\n        if (options.documentEvents) {\n            ret.documentEvents = Object.assign(Object.assign({}, ret.documentEvents), documentEvents);\n        }\n        return ObjectExt.merge(ret, others);\n    }\n    get [Symbol.toStringTag]() {\n        return CellView.toStringTag;\n    }\n    constructor(cell, options = {}) {\n        super();\n        this.cell = cell;\n        this.options = this.ensureOptions(options);\n        this.graph = this.options.graph;\n        this.attr = new AttrManager(this);\n        this.flag = new FlagManager(this, this.options.actions, this.options.bootstrap);\n        this.cache = new Cache(this);\n        this.setContainer(this.ensureContainer());\n        this.setup();\n        this.init();\n    }\n    init() { }\n    onRemove() {\n        this.removeTools();\n    }\n    get priority() {\n        return this.options.priority;\n    }\n    get rootSelector() {\n        return this.options.rootSelector;\n    }\n    getConstructor() {\n        return this.constructor;\n    }\n    ensureOptions(options) {\n        return this.getConstructor().getOptions(options);\n    }\n    getContainerTagName() {\n        return this.options.isSvgElement ? 'g' : 'div';\n    }\n    getContainerStyle() { }\n    getContainerAttrs() {\n        return {\n            'data-cell-id': this.cell.id,\n            'data-shape': this.cell.shape,\n        };\n    }\n    getContainerClassName() {\n        return this.prefixClassName('cell');\n    }\n    ensureContainer() {\n        return View.createElement(this.getContainerTagName(), this.options.isSvgElement);\n    }\n    setContainer(container) {\n        if (this.container !== container) {\n            this.undelegateEvents();\n            this.container = container;\n            if (this.options.events != null) {\n                this.delegateEvents(this.options.events);\n            }\n            const attrs = this.getContainerAttrs();\n            if (attrs != null) {\n                this.setAttrs(attrs, container);\n            }\n            const style = this.getContainerStyle();\n            if (style != null) {\n                this.setStyle(style, container);\n            }\n            const className = this.getContainerClassName();\n            if (className != null) {\n                this.addClass(className, container);\n            }\n        }\n        return this;\n    }\n    isNodeView() {\n        return false;\n    }\n    isEdgeView() {\n        return false;\n    }\n    render() {\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    confirmUpdate(flag, options = {}) {\n        return 0;\n    }\n    getBootstrapFlag() {\n        return this.flag.getBootstrapFlag();\n    }\n    getFlag(actions) {\n        return this.flag.getFlag(actions);\n    }\n    hasAction(flag, actions) {\n        return this.flag.hasAction(flag, actions);\n    }\n    removeAction(flag, actions) {\n        return this.flag.removeAction(flag, actions);\n    }\n    handleAction(flag, action, handle, additionalRemovedActions) {\n        if (this.hasAction(flag, action)) {\n            handle();\n            const removedFlags = [action];\n            if (additionalRemovedActions) {\n                if (typeof additionalRemovedActions === 'string') {\n                    removedFlags.push(additionalRemovedActions);\n                }\n                else {\n                    removedFlags.push(...additionalRemovedActions);\n                }\n            }\n            return this.removeAction(flag, removedFlags);\n        }\n        return flag;\n    }\n    setup() {\n        this.cell.on('changed', ({ options }) => this.onAttrsChange(options));\n    }\n    onAttrsChange(options) {\n        let flag = this.flag.getChangedFlag();\n        if (options.updated || !flag) {\n            return;\n        }\n        if (options.dirty && this.hasAction(flag, 'update')) {\n            flag |= this.getFlag('render'); // eslint-disable-line no-bitwise\n        }\n        // tool changes should be sync render\n        if (options.toolId) {\n            options.async = false;\n        }\n        if (this.graph != null) {\n            this.graph.renderer.requestViewUpdate(this, flag, options);\n        }\n    }\n    parseJSONMarkup(markup, rootElem) {\n        const result = Markup.parseJSONMarkup(markup);\n        const selectors = result.selectors;\n        const rootSelector = this.rootSelector;\n        if (rootElem && rootSelector) {\n            if (selectors[rootSelector]) {\n                throw new Error('Invalid root selector');\n            }\n            selectors[rootSelector] = rootElem;\n        }\n        return result;\n    }\n    can(feature) {\n        let interacting = this.graph.options.interacting;\n        if (typeof interacting === 'function') {\n            interacting = FunctionExt.call(interacting, this.graph, this);\n        }\n        if (typeof interacting === 'object') {\n            let val = interacting[feature];\n            if (typeof val === 'function') {\n                val = FunctionExt.call(val, this.graph, this);\n            }\n            return val !== false;\n        }\n        if (typeof interacting === 'boolean') {\n            return interacting;\n        }\n        return false;\n    }\n    cleanCache() {\n        this.cache.clean();\n        return this;\n    }\n    getCache(elem) {\n        return this.cache.get(elem);\n    }\n    getDataOfElement(elem) {\n        return this.cache.getData(elem);\n    }\n    getMatrixOfElement(elem) {\n        return this.cache.getMatrix(elem);\n    }\n    getShapeOfElement(elem) {\n        return this.cache.getShape(elem);\n    }\n    getBoundingRectOfElement(elem) {\n        return this.cache.getBoundingRect(elem);\n    }\n    getBBoxOfElement(elem) {\n        const rect = this.getBoundingRectOfElement(elem);\n        const matrix = this.getMatrixOfElement(elem);\n        const rm = this.getRootRotatedMatrix();\n        const tm = this.getRootTranslatedMatrix();\n        return Util.transformRectangle(rect, tm.multiply(rm).multiply(matrix));\n    }\n    getUnrotatedBBoxOfElement(elem) {\n        const rect = this.getBoundingRectOfElement(elem);\n        const matrix = this.getMatrixOfElement(elem);\n        const tm = this.getRootTranslatedMatrix();\n        return Util.transformRectangle(rect, tm.multiply(matrix));\n    }\n    getBBox(options = {}) {\n        let bbox;\n        if (options.useCellGeometry) {\n            const cell = this.cell;\n            const angle = cell.isNode() ? cell.getAngle() : 0;\n            bbox = cell.getBBox().bbox(angle);\n        }\n        else {\n            bbox = this.getBBoxOfElement(this.container);\n        }\n        return this.graph.coord.localToGraphRect(bbox);\n    }\n    getRootTranslatedMatrix() {\n        const cell = this.cell;\n        const pos = cell.isNode() ? cell.getPosition() : { x: 0, y: 0 };\n        return Dom.createSVGMatrix().translate(pos.x, pos.y);\n    }\n    getRootRotatedMatrix() {\n        let matrix = Dom.createSVGMatrix();\n        const cell = this.cell;\n        const angle = cell.isNode() ? cell.getAngle() : 0;\n        if (angle) {\n            const bbox = cell.getBBox();\n            const cx = bbox.width / 2;\n            const cy = bbox.height / 2;\n            matrix = matrix.translate(cx, cy).rotate(angle).translate(-cx, -cy);\n        }\n        return matrix;\n    }\n    findMagnet(elem = this.container) {\n        return this.findByAttr('magnet', elem);\n    }\n    updateAttrs(rootNode, attrs, options = {}) {\n        if (options.rootBBox == null) {\n            options.rootBBox = new Rectangle();\n        }\n        if (options.selectors == null) {\n            options.selectors = this.selectors;\n        }\n        this.attr.update(rootNode, attrs, options);\n    }\n    isEdgeElement(magnet) {\n        return this.cell.isEdge() && (magnet == null || magnet === this.container);\n    }\n    // #region highlight\n    prepareHighlight(elem, options = {}) {\n        const magnet = elem || this.container;\n        options.partial = magnet === this.container;\n        return magnet;\n    }\n    highlight(elem, options = {}) {\n        const magnet = this.prepareHighlight(elem, options);\n        this.notify('cell:highlight', {\n            magnet,\n            options,\n            view: this,\n            cell: this.cell,\n        });\n        if (this.isEdgeView()) {\n            this.notify('edge:highlight', {\n                magnet,\n                options,\n                view: this,\n                edge: this.cell,\n                cell: this.cell,\n            });\n        }\n        else if (this.isNodeView()) {\n            this.notify('node:highlight', {\n                magnet,\n                options,\n                view: this,\n                node: this.cell,\n                cell: this.cell,\n            });\n        }\n        return this;\n    }\n    unhighlight(elem, options = {}) {\n        const magnet = this.prepareHighlight(elem, options);\n        this.notify('cell:unhighlight', {\n            magnet,\n            options,\n            view: this,\n            cell: this.cell,\n        });\n        if (this.isNodeView()) {\n            this.notify('node:unhighlight', {\n                magnet,\n                options,\n                view: this,\n                node: this.cell,\n                cell: this.cell,\n            });\n        }\n        else if (this.isEdgeView()) {\n            this.notify('edge:unhighlight', {\n                magnet,\n                options,\n                view: this,\n                edge: this.cell,\n                cell: this.cell,\n            });\n        }\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    notifyUnhighlight(magnet, options) { }\n    // #endregion\n    getEdgeTerminal(magnet, x, y, edge, type) {\n        const cell = this.cell;\n        const portId = this.findAttr('port', magnet);\n        const selector = magnet.getAttribute('data-selector');\n        const terminal = { cell: cell.id };\n        if (selector != null) {\n            terminal.magnet = selector;\n        }\n        if (portId != null) {\n            terminal.port = portId;\n            if (cell.isNode()) {\n                if (!cell.hasPort(portId) && selector == null) {\n                    // port created via the `port` attribute (not API)\n                    terminal.selector = this.getSelector(magnet);\n                }\n            }\n        }\n        else if (selector == null && this.container !== magnet) {\n            terminal.selector = this.getSelector(magnet);\n        }\n        return terminal;\n    }\n    getMagnetFromEdgeTerminal(terminal) {\n        const cell = this.cell;\n        const root = this.container;\n        const portId = terminal.port;\n        let selector = terminal.magnet;\n        let magnet;\n        if (portId != null && cell.isNode() && cell.hasPort(portId)) {\n            magnet = this.findPortElem(portId, selector) || root;\n        }\n        else {\n            if (!selector) {\n                selector = terminal.selector;\n            }\n            if (!selector && portId != null) {\n                selector = `[port=\"${portId}\"]`;\n            }\n            magnet = this.findOne(selector, root, this.selectors);\n        }\n        return magnet;\n    }\n    hasTools(name) {\n        const tools = this.tools;\n        if (tools == null) {\n            return false;\n        }\n        if (name == null) {\n            return true;\n        }\n        return tools.name === name;\n    }\n    addTools(config) {\n        if (!this.can('toolsAddable')) {\n            return this;\n        }\n        this.removeTools();\n        if (config) {\n            const tools = ToolsView.isToolsView(config)\n                ? config\n                : new ToolsView(config);\n            this.tools = tools;\n            tools.config({ view: this });\n            tools.mount();\n        }\n        return this;\n    }\n    updateTools(options = {}) {\n        if (this.tools) {\n            this.tools.update(options);\n        }\n        return this;\n    }\n    removeTools() {\n        if (this.tools) {\n            this.tools.remove();\n            this.tools = null;\n        }\n        return this;\n    }\n    hideTools() {\n        if (this.tools) {\n            this.tools.hide();\n        }\n        return this;\n    }\n    showTools() {\n        if (this.tools) {\n            this.tools.show();\n        }\n        return this;\n    }\n    renderTools() {\n        const tools = this.cell.getTools();\n        this.addTools(tools);\n        return this;\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        this.graph.trigger(name, args);\n        return this;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line @typescript-eslint/no-this-alias\n        const cell = view.cell;\n        if (x == null || y == null) {\n            return { e, view, cell };\n        }\n        return { e, x, y, view, cell };\n    }\n    onClick(e, x, y) {\n        this.notify('cell:click', this.getEventArgs(e, x, y));\n    }\n    onDblClick(e, x, y) {\n        this.notify('cell:dblclick', this.getEventArgs(e, x, y));\n    }\n    onContextMenu(e, x, y) {\n        this.notify('cell:contextmenu', this.getEventArgs(e, x, y));\n    }\n    onMouseDown(e, x, y) {\n        if (this.cell.model) {\n            this.cachedModelForMouseEvent = this.cell.model;\n            this.cachedModelForMouseEvent.startBatch('mouse');\n        }\n        this.notify('cell:mousedown', this.getEventArgs(e, x, y));\n    }\n    onMouseUp(e, x, y) {\n        this.notify('cell:mouseup', this.getEventArgs(e, x, y));\n        if (this.cachedModelForMouseEvent) {\n            this.cachedModelForMouseEvent.stopBatch('mouse', { cell: this.cell });\n            this.cachedModelForMouseEvent = null;\n        }\n    }\n    onMouseMove(e, x, y) {\n        this.notify('cell:mousemove', this.getEventArgs(e, x, y));\n    }\n    onMouseOver(e) {\n        this.notify('cell:mouseover', this.getEventArgs(e));\n    }\n    onMouseOut(e) {\n        this.notify('cell:mouseout', this.getEventArgs(e));\n    }\n    onMouseEnter(e) {\n        this.notify('cell:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        this.notify('cell:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        this.notify('cell:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onCustomEvent(e, name, x, y) {\n        this.notify('cell:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n        this.notify(name, Object.assign({}, this.getEventArgs(e, x, y)));\n    }\n    onMagnetMouseDown(e, magnet, x, y) { }\n    onMagnetDblClick(e, magnet, x, y) { }\n    onMagnetContextMenu(e, magnet, x, y) { }\n    onLabelMouseDown(e, x, y) { }\n    checkMouseleave(e) {\n        const target = this.getEventTarget(e, { fromPoint: true });\n        const view = this.graph.findViewByElem(target);\n        if (view === this) {\n            return;\n        }\n        // Leaving the current view\n        this.onMouseLeave(e);\n        if (!view) {\n            return;\n        }\n        // Entering another view\n        view.onMouseEnter(e);\n    }\n}\nCellView.defaults = {\n    isSvgElement: true,\n    rootSelector: 'root',\n    priority: 0,\n    bootstrap: [],\n    actions: {},\n};\n(function (CellView) {\n    CellView.Flag = FlagManager;\n    CellView.Attr = AttrManager;\n})(CellView || (CellView = {}));\n(function (CellView) {\n    CellView.toStringTag = `X6.${CellView.name}`;\n    function isCellView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof CellView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === CellView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function') {\n            return true;\n        }\n        return false;\n    }\n    CellView.isCellView = isCellView;\n})(CellView || (CellView = {}));\n// decorators\n// ----\n(function (CellView) {\n    function priority(value) {\n        return function (ctor) {\n            ctor.config({ priority: value });\n        };\n    }\n    CellView.priority = priority;\n    function bootstrap(actions) {\n        return function (ctor) {\n            ctor.config({ bootstrap: actions });\n        };\n    }\n    CellView.bootstrap = bootstrap;\n})(CellView || (CellView = {}));\n(function (CellView) {\n    CellView.registry = Registry.create({\n        type: 'view',\n    });\n})(CellView || (CellView = {}));\n//# sourceMappingURL=cell.js.map","import { Dom, ObjectExt, StringExt } from '@antv/x6-common';\nimport { NodeTool, EdgeTool } from '../registry/tool';\nimport { View } from './view';\nimport { CellView } from './cell';\nimport { Markup } from './markup';\nexport class ToolsView extends View {\n    get name() {\n        return this.options.name;\n    }\n    get graph() {\n        return this.cellView.graph;\n    }\n    get cell() {\n        return this.cellView.cell;\n    }\n    get [Symbol.toStringTag]() {\n        return ToolsView.toStringTag;\n    }\n    constructor(options = {}) {\n        super();\n        this.svgContainer = this.createContainer(true, options);\n        this.htmlContainer = this.createContainer(false, options);\n        this.config(options);\n    }\n    createContainer(svg, options) {\n        const container = svg\n            ? View.createElement('g', true)\n            : View.createElement('div', false);\n        Dom.addClass(container, this.prefixClassName('cell-tools'));\n        if (options.className) {\n            Dom.addClass(container, options.className);\n        }\n        return container;\n    }\n    config(options) {\n        this.options = Object.assign(Object.assign({}, this.options), options);\n        if (!CellView.isCellView(options.view) || options.view === this.cellView) {\n            return this;\n        }\n        this.cellView = options.view;\n        if (this.cell.isEdge()) {\n            Dom.addClass(this.svgContainer, this.prefixClassName('edge-tools'));\n            Dom.addClass(this.htmlContainer, this.prefixClassName('edge-tools'));\n        }\n        else if (this.cell.isNode()) {\n            Dom.addClass(this.svgContainer, this.prefixClassName('node-tools'));\n            Dom.addClass(this.htmlContainer, this.prefixClassName('node-tools'));\n        }\n        this.svgContainer.setAttribute('data-cell-id', this.cell.id);\n        this.htmlContainer.setAttribute('data-cell-id', this.cell.id);\n        if (this.name) {\n            this.svgContainer.setAttribute('data-tools-name', this.name);\n            this.htmlContainer.setAttribute('data-tools-name', this.name);\n        }\n        const tools = this.options.items;\n        if (!Array.isArray(tools)) {\n            return this;\n        }\n        this.tools = [];\n        const normalizedTools = [];\n        tools.forEach((meta) => {\n            if (ToolsView.ToolItem.isToolItem(meta)) {\n                if (meta.name === 'vertices') {\n                    normalizedTools.unshift(meta);\n                }\n                else {\n                    normalizedTools.push(meta);\n                }\n            }\n            else {\n                const name = typeof meta === 'object' ? meta.name : meta;\n                if (name === 'vertices') {\n                    normalizedTools.unshift(meta);\n                }\n                else {\n                    normalizedTools.push(meta);\n                }\n            }\n        });\n        for (let i = 0; i < normalizedTools.length; i += 1) {\n            const meta = normalizedTools[i];\n            let tool;\n            if (ToolsView.ToolItem.isToolItem(meta)) {\n                tool = meta;\n            }\n            else {\n                const name = typeof meta === 'object' ? meta.name : meta;\n                const args = typeof meta === 'object' ? meta.args || {} : {};\n                if (name) {\n                    if (this.cell.isNode()) {\n                        const ctor = NodeTool.registry.get(name);\n                        if (ctor) {\n                            tool = new ctor(args); // eslint-disable-line\n                        }\n                        else {\n                            return NodeTool.registry.onNotFound(name);\n                        }\n                    }\n                    else if (this.cell.isEdge()) {\n                        const ctor = EdgeTool.registry.get(name);\n                        if (ctor) {\n                            tool = new ctor(args); // eslint-disable-line\n                        }\n                        else {\n                            return EdgeTool.registry.onNotFound(name);\n                        }\n                    }\n                }\n            }\n            if (tool) {\n                tool.config(this.cellView, this);\n                tool.render();\n                const container = tool.options.isSVGElement !== false\n                    ? this.svgContainer\n                    : this.htmlContainer;\n                container.appendChild(tool.container);\n                this.tools.push(tool);\n            }\n        }\n        return this;\n    }\n    update(options = {}) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (options.toolId !== tool.cid && tool.isVisible()) {\n                    tool.update();\n                }\n            });\n        }\n        return this;\n    }\n    focus(focusedTool) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (focusedTool === tool) {\n                    tool.show();\n                }\n                else {\n                    tool.hide();\n                }\n            });\n        }\n        return this;\n    }\n    blur(blurredTool) {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => {\n                if (tool !== blurredTool && !tool.isVisible()) {\n                    tool.show();\n                    tool.update();\n                }\n            });\n        }\n        return this;\n    }\n    hide() {\n        return this.focus(null);\n    }\n    show() {\n        return this.blur(null);\n    }\n    remove() {\n        const tools = this.tools;\n        if (tools) {\n            tools.forEach((tool) => tool.remove());\n            this.tools = null;\n        }\n        Dom.remove(this.svgContainer);\n        Dom.remove(this.htmlContainer);\n        return super.remove();\n    }\n    mount() {\n        const tools = this.tools;\n        const cellView = this.cellView;\n        if (cellView && tools) {\n            const hasSVG = tools.some((tool) => tool.options.isSVGElement !== false);\n            const hasHTML = tools.some((tool) => tool.options.isSVGElement === false);\n            if (hasSVG) {\n                const parent = this.options.local\n                    ? cellView.container\n                    : cellView.graph.view.decorator;\n                parent.appendChild(this.svgContainer);\n            }\n            if (hasHTML) {\n                this.graph.container.appendChild(this.htmlContainer);\n            }\n        }\n        return this;\n    }\n}\n(function (ToolsView) {\n    ToolsView.toStringTag = `X6.${ToolsView.name}`;\n    function isToolsView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof ToolsView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === ToolsView.toStringTag) &&\n            view.graph != null &&\n            view.cell != null &&\n            typeof view.config === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.focus === 'function' &&\n            typeof view.blur === 'function' &&\n            typeof view.show === 'function' &&\n            typeof view.hide === 'function') {\n            return true;\n        }\n        return false;\n    }\n    ToolsView.isToolsView = isToolsView;\n})(ToolsView || (ToolsView = {}));\n(function (ToolsView) {\n    class ToolItem extends View {\n        static getDefaults() {\n            return this.defaults;\n        }\n        static config(options) {\n            this.defaults = this.getOptions(options);\n        }\n        static getOptions(options) {\n            return ObjectExt.merge(ObjectExt.cloneDeep(this.getDefaults()), options);\n        }\n        get graph() {\n            return this.cellView.graph;\n        }\n        get cell() {\n            return this.cellView.cell;\n        }\n        get name() {\n            return this.options.name;\n        }\n        get [Symbol.toStringTag]() {\n            return ToolItem.toStringTag;\n        }\n        constructor(options = {}) {\n            super();\n            this.visible = true;\n            this.options = this.getOptions(options);\n            this.container = View.createElement(this.options.tagName || 'g', this.options.isSVGElement !== false);\n            Dom.addClass(this.container, this.prefixClassName('cell-tool'));\n            if (typeof this.options.className === 'string') {\n                Dom.addClass(this.container, this.options.className);\n            }\n            this.init();\n        }\n        init() { }\n        getOptions(options) {\n            const ctor = this.constructor;\n            return ctor.getOptions(options);\n        }\n        delegateEvents() {\n            if (this.options.events) {\n                super.delegateEvents(this.options.events);\n            }\n            return this;\n        }\n        config(view, toolsView) {\n            this.cellView = view;\n            this.parent = toolsView;\n            this.stamp(this.container);\n            if (this.cell.isEdge()) {\n                Dom.addClass(this.container, this.prefixClassName('edge-tool'));\n            }\n            else if (this.cell.isNode()) {\n                Dom.addClass(this.container, this.prefixClassName('node-tool'));\n            }\n            if (this.name) {\n                this.container.setAttribute('data-tool-name', this.name);\n            }\n            this.delegateEvents();\n            return this;\n        }\n        render() {\n            this.empty();\n            const markup = this.options.markup;\n            if (markup) {\n                const meta = Markup.parseJSONMarkup(markup);\n                this.container.appendChild(meta.fragment);\n                this.childNodes = meta.selectors;\n            }\n            this.onRender();\n            return this;\n        }\n        onRender() { }\n        update() {\n            return this;\n        }\n        stamp(elem) {\n            if (elem) {\n                elem.setAttribute('data-cell-id', this.cellView.cell.id);\n            }\n        }\n        show() {\n            this.container.style.display = '';\n            this.visible = true;\n            return this;\n        }\n        hide() {\n            this.container.style.display = 'none';\n            this.visible = false;\n            return this;\n        }\n        isVisible() {\n            return this.visible;\n        }\n        focus() {\n            const opacity = this.options.focusOpacity;\n            if (opacity != null && Number.isFinite(opacity)) {\n                this.container.style.opacity = `${opacity}`;\n            }\n            this.parent.focus(this);\n            return this;\n        }\n        blur() {\n            this.container.style.opacity = '';\n            this.parent.blur(this);\n            return this;\n        }\n        guard(evt) {\n            if (this.graph == null || this.cellView == null) {\n                return true;\n            }\n            return this.graph.view.guard(evt, this.cellView);\n        }\n    }\n    // #region static\n    ToolItem.defaults = {\n        isSVGElement: true,\n        tagName: 'g',\n    };\n    ToolsView.ToolItem = ToolItem;\n    (function (ToolItem) {\n        let counter = 0;\n        function getClassName(name) {\n            if (name) {\n                return StringExt.pascalCase(name);\n            }\n            counter += 1;\n            return `CustomTool${counter}`;\n        }\n        function define(options) {\n            const tool = ObjectExt.createClass(getClassName(options.name), this);\n            tool.config(options);\n            return tool;\n        }\n        ToolItem.define = define;\n    })(ToolItem = ToolsView.ToolItem || (ToolsView.ToolItem = {}));\n    (function (ToolItem) {\n        ToolItem.toStringTag = `X6.${ToolItem.name}`;\n        function isToolItem(instance) {\n            if (instance == null) {\n                return false;\n            }\n            if (instance instanceof ToolItem) {\n                return true;\n            }\n            const tag = instance[Symbol.toStringTag];\n            const view = instance;\n            if ((tag == null || tag === ToolItem.toStringTag) &&\n                view.graph != null &&\n                view.cell != null &&\n                typeof view.config === 'function' &&\n                typeof view.update === 'function' &&\n                typeof view.focus === 'function' &&\n                typeof view.blur === 'function' &&\n                typeof view.show === 'function' &&\n                typeof view.hide === 'function' &&\n                typeof view.isVisible === 'function') {\n                return true;\n            }\n            return false;\n        }\n        ToolItem.isToolItem = isToolItem;\n    })(ToolItem = ToolsView.ToolItem || (ToolsView.ToolItem = {}));\n})(ToolsView || (ToolsView = {}));\n//# sourceMappingURL=tool.js.map","export const noop = (terminal) => terminal;\n//# sourceMappingURL=noop.js.map","import { Point } from '@antv/x6-geometry';\nfunction toPercentage(value, max) {\n    if (max === 0) {\n        return '0%';\n    }\n    return `${Math.round((value / max) * 100)}%`;\n}\nfunction pin(relative) {\n    const strategy = (terminal, view, magnet, coords) => {\n        return view.isEdgeElement(magnet)\n            ? pinEdgeTerminal(relative, terminal, view, magnet, coords)\n            : pinNodeTerminal(relative, terminal, view, magnet, coords);\n    };\n    return strategy;\n}\nfunction pinNodeTerminal(relative, data, view, magnet, coords) {\n    const node = view.cell;\n    const angle = node.getAngle();\n    const bbox = view.getUnrotatedBBoxOfElement(magnet);\n    const center = node.getBBox().getCenter();\n    const pos = Point.create(coords).rotate(angle, center);\n    let dx = pos.x - bbox.x;\n    let dy = pos.y - bbox.y;\n    if (relative) {\n        dx = toPercentage(dx, bbox.width);\n        dy = toPercentage(dy, bbox.height);\n    }\n    data.anchor = {\n        name: 'topLeft',\n        args: {\n            dx,\n            dy,\n            rotate: true,\n        },\n    };\n    return data;\n}\nfunction pinEdgeTerminal(relative, end, view, magnet, coords) {\n    const connection = view.getConnection();\n    if (!connection) {\n        return end;\n    }\n    const length = connection.closestPointLength(coords);\n    if (relative) {\n        const totalLength = connection.length();\n        end.anchor = {\n            name: 'ratio',\n            args: {\n                ratio: length / totalLength,\n            },\n        };\n    }\n    else {\n        end.anchor = {\n            name: 'length',\n            args: {\n                length,\n            },\n        };\n    }\n    return end;\n}\nexport const pinRelative = pin(true);\nexport const pinAbsolute = pin(false);\n//# sourceMappingURL=pin.js.map","import { Registry } from '../registry';\nimport * as strategies from './main';\nexport var ConnectionStrategy;\n(function (ConnectionStrategy) {\n    ConnectionStrategy.presets = strategies;\n    ConnectionStrategy.registry = Registry.create({\n        type: 'connection strategy',\n    });\n    ConnectionStrategy.registry.register(ConnectionStrategy.presets, true);\n})(ConnectionStrategy || (ConnectionStrategy = {}));\n//# sourceMappingURL=index.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { ConnectionStrategy } from '../connection-strategy';\nexport function getAnchor(pos, terminalView, terminalMagnet, type) {\n    const end = FunctionExt.call(ConnectionStrategy.presets.pinRelative, this.graph, {}, terminalView, terminalMagnet, pos, this.cell, type, {});\n    return end.anchor;\n}\nexport function getViewBBox(view, quick) {\n    if (quick) {\n        return view.cell.getBBox();\n    }\n    return view.cell.isEdge()\n        ? view.getConnection().bbox()\n        : view.getUnrotatedBBoxOfElement(view.container);\n}\n//# sourceMappingURL=util.js.map","import { Point } from '@antv/x6-geometry';\nimport { Dom, NumberExt, FunctionExt } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Button extends ToolsView.ToolItem {\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('cell-tool-button'));\n        this.update();\n    }\n    update() {\n        this.updatePosition();\n        return this;\n    }\n    updatePosition() {\n        const view = this.cellView;\n        const matrix = view.cell.isEdge()\n            ? this.getEdgeMatrix()\n            : this.getNodeMatrix();\n        Dom.transform(this.container, matrix, { absolute: true });\n    }\n    getNodeMatrix() {\n        const view = this.cellView;\n        const options = this.options;\n        let { x = 0, y = 0 } = options;\n        const { offset, useCellGeometry, rotate } = options;\n        let bbox = Util.getViewBBox(view, useCellGeometry);\n        const angle = view.cell.getAngle();\n        if (!rotate) {\n            bbox = bbox.bbox(angle);\n        }\n        let offsetX = 0;\n        let offsetY = 0;\n        if (typeof offset === 'number') {\n            offsetX = offset;\n            offsetY = offset;\n        }\n        else if (typeof offset === 'object') {\n            offsetX = offset.x;\n            offsetY = offset.y;\n        }\n        x = NumberExt.normalizePercentage(x, bbox.width);\n        y = NumberExt.normalizePercentage(y, bbox.height);\n        let matrix = Dom.createSVGMatrix().translate(bbox.x + bbox.width / 2, bbox.y + bbox.height / 2);\n        if (rotate) {\n            matrix = matrix.rotate(angle);\n        }\n        matrix = matrix.translate(x + offsetX - bbox.width / 2, y + offsetY - bbox.height / 2);\n        return matrix;\n    }\n    getEdgeMatrix() {\n        const view = this.cellView;\n        const options = this.options;\n        const { offset = 0, distance = 0, rotate } = options;\n        let tangent;\n        let position;\n        let angle;\n        const d = NumberExt.normalizePercentage(distance, 1);\n        if (d >= 0 && d <= 1) {\n            tangent = view.getTangentAtRatio(d);\n        }\n        else {\n            tangent = view.getTangentAtLength(d);\n        }\n        if (tangent) {\n            position = tangent.start;\n            angle = tangent.vector().vectorAngle(new Point(1, 0)) || 0;\n        }\n        else {\n            position = view.getConnection().start;\n            angle = 0;\n        }\n        let matrix = Dom.createSVGMatrix()\n            .translate(position.x, position.y)\n            .rotate(angle);\n        if (typeof offset === 'object') {\n            matrix = matrix.translate(offset.x || 0, offset.y || 0);\n        }\n        else {\n            matrix = matrix.translate(0, offset);\n        }\n        if (!rotate) {\n            matrix = matrix.rotate(-angle);\n        }\n        return matrix;\n    }\n    onMouseDown(e) {\n        if (this.guard(e)) {\n            return;\n        }\n        e.stopPropagation();\n        e.preventDefault();\n        const onClick = this.options.onClick;\n        if (typeof onClick === 'function') {\n            FunctionExt.call(onClick, this.cellView, {\n                e,\n                view: this.cellView,\n                cell: this.cellView.cell,\n                btn: this,\n            });\n        }\n    }\n}\n(function (Button) {\n    Button.config({\n        name: 'button',\n        useCellGeometry: true,\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n        },\n    });\n})(Button || (Button = {}));\n(function (Button) {\n    Button.Remove = Button.define({\n        name: 'button-remove',\n        markup: [\n            {\n                tagName: 'circle',\n                selector: 'button',\n                attrs: {\n                    r: 7,\n                    fill: '#FF1D00',\n                    cursor: 'pointer',\n                },\n            },\n            {\n                tagName: 'path',\n                selector: 'icon',\n                attrs: {\n                    d: 'M -3 -3 3 3 M -3 3 3 -3',\n                    fill: 'none',\n                    stroke: '#FFFFFF',\n                    'stroke-width': 2,\n                    'pointer-events': 'none',\n                },\n            },\n        ],\n        distance: 60,\n        offset: 0,\n        useCellGeometry: true,\n        onClick({ view, btn }) {\n            btn.parent.remove();\n            view.cell.remove({ ui: true, toolId: btn.cid });\n        },\n    });\n})(Button || (Button = {}));\n//# sourceMappingURL=button.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { NumberExt, Dom } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Boundary extends ToolsView.ToolItem {\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('cell-tool-boundary'));\n        if (this.options.attrs) {\n            const _a = this.options.attrs, { class: className } = _a, attrs = __rest(_a, [\"class\"]);\n            Dom.attr(this.container, Dom.kebablizeAttrs(attrs));\n            if (className) {\n                Dom.addClass(this.container, className);\n            }\n        }\n        this.update();\n    }\n    update() {\n        const view = this.cellView;\n        const options = this.options;\n        const { useCellGeometry, rotate } = options;\n        const padding = NumberExt.normalizeSides(options.padding);\n        let bbox = Util.getViewBBox(view, useCellGeometry).moveAndExpand({\n            x: -padding.left,\n            y: -padding.top,\n            width: padding.left + padding.right,\n            height: padding.top + padding.bottom,\n        });\n        const cell = view.cell;\n        if (cell.isNode()) {\n            const angle = cell.getAngle();\n            if (angle) {\n                if (rotate) {\n                    const origin = cell.getBBox().getCenter();\n                    Dom.rotate(this.container, angle, origin.x, origin.y, {\n                        absolute: true,\n                    });\n                }\n                else {\n                    bbox = bbox.bbox(angle);\n                }\n            }\n        }\n        Dom.attr(this.container, bbox.toJSON());\n        return this;\n    }\n}\n(function (Boundary) {\n    Boundary.config({\n        name: 'boundary',\n        tagName: 'rect',\n        padding: 10,\n        useCellGeometry: true,\n        attrs: {\n            fill: 'none',\n            stroke: '#333',\n            'stroke-width': 0.5,\n            'stroke-dasharray': '5, 5',\n            'pointer-events': 'none',\n        },\n    });\n})(Boundary || (Boundary = {}));\n//# sourceMappingURL=boundary.js.map","import { Point } from '@antv/x6-geometry';\nimport { Config } from '../../config';\nimport { View } from '../../view/view';\nimport { ToolsView } from '../../view/tool';\nexport class Vertices extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.handles = [];\n    }\n    get vertices() {\n        return this.cellView.cell.getVertices();\n    }\n    onRender() {\n        this.addClass(this.prefixClassName('edge-tool-vertices'));\n        if (this.options.addable) {\n            this.updatePath();\n        }\n        this.resetHandles();\n        this.renderHandles();\n        return this;\n    }\n    update() {\n        const vertices = this.vertices;\n        if (vertices.length === this.handles.length) {\n            this.updateHandles();\n        }\n        else {\n            this.resetHandles();\n            this.renderHandles();\n        }\n        if (this.options.addable) {\n            this.updatePath();\n        }\n        return this;\n    }\n    resetHandles() {\n        const handles = this.handles;\n        this.handles = [];\n        if (handles) {\n            handles.forEach((handle) => {\n                this.stopHandleListening(handle);\n                handle.remove();\n            });\n        }\n    }\n    renderHandles() {\n        const vertices = this.vertices;\n        for (let i = 0, l = vertices.length; i < l; i += 1) {\n            const vertex = vertices[i];\n            const createHandle = this.options.createHandle;\n            const processHandle = this.options.processHandle;\n            const handle = createHandle({\n                index: i,\n                graph: this.graph,\n                guard: (evt) => this.guard(evt),\n                attrs: this.options.attrs || {},\n            });\n            if (processHandle) {\n                processHandle(handle);\n            }\n            handle.updatePosition(vertex.x, vertex.y);\n            this.stamp(handle.container);\n            this.container.appendChild(handle.container);\n            this.handles.push(handle);\n            this.startHandleListening(handle);\n        }\n    }\n    updateHandles() {\n        const vertices = this.vertices;\n        for (let i = 0, l = vertices.length; i < l; i += 1) {\n            const vertex = vertices[i];\n            const handle = this.handles[i];\n            if (handle) {\n                handle.updatePosition(vertex.x, vertex.y);\n            }\n        }\n    }\n    updatePath() {\n        const connection = this.childNodes.connection;\n        if (connection) {\n            connection.setAttribute('d', this.cellView.getConnectionPathData());\n        }\n    }\n    startHandleListening(handle) {\n        const edgeView = this.cellView;\n        if (edgeView.can('vertexMovable')) {\n            handle.on('change', this.onHandleChange, this);\n            handle.on('changing', this.onHandleChanging, this);\n            handle.on('changed', this.onHandleChanged, this);\n        }\n        if (edgeView.can('vertexDeletable')) {\n            handle.on('remove', this.onHandleRemove, this);\n        }\n    }\n    stopHandleListening(handle) {\n        const edgeView = this.cellView;\n        if (edgeView.can('vertexMovable')) {\n            handle.off('change', this.onHandleChange, this);\n            handle.off('changing', this.onHandleChanging, this);\n            handle.off('changed', this.onHandleChanged, this);\n        }\n        if (edgeView.can('vertexDeletable')) {\n            handle.off('remove', this.onHandleRemove, this);\n        }\n    }\n    getNeighborPoints(index) {\n        const edgeView = this.cellView;\n        const vertices = this.vertices;\n        const prev = index > 0 ? vertices[index - 1] : edgeView.sourceAnchor;\n        const next = index < vertices.length - 1 ? vertices[index + 1] : edgeView.targetAnchor;\n        return {\n            prev: Point.create(prev),\n            next: Point.create(next),\n        };\n    }\n    getMouseEventArgs(evt) {\n        const e = this.normalizeEvent(evt);\n        const { x, y } = this.graph.snapToGrid(e.clientX, e.clientY);\n        return { e, x, y };\n    }\n    onHandleChange({ e }) {\n        this.focus();\n        const edgeView = this.cellView;\n        edgeView.cell.startBatch('move-vertex', { ui: true, toolId: this.cid });\n        if (!this.options.stopPropagation) {\n            const { e: evt, x, y } = this.getMouseEventArgs(e);\n            edgeView.notifyMouseDown(evt, x, y);\n        }\n    }\n    onHandleChanging({ handle, e, }) {\n        const edgeView = this.cellView;\n        const index = handle.options.index;\n        const { e: evt, x, y } = this.getMouseEventArgs(e);\n        const vertex = { x, y };\n        this.snapVertex(vertex, index);\n        edgeView.cell.setVertexAt(index, vertex, { ui: true, toolId: this.cid });\n        handle.updatePosition(vertex.x, vertex.y);\n        if (!this.options.stopPropagation) {\n            edgeView.notifyMouseMove(evt, x, y);\n        }\n    }\n    stopBatch(vertexAdded) {\n        this.cell.stopBatch('move-vertex', { ui: true, toolId: this.cid });\n        if (vertexAdded) {\n            this.cell.stopBatch('add-vertex', { ui: true, toolId: this.cid });\n        }\n    }\n    onHandleChanged({ e }) {\n        const options = this.options;\n        const edgeView = this.cellView;\n        if (options.addable) {\n            this.updatePath();\n        }\n        if (!options.removeRedundancies) {\n            this.stopBatch(this.eventData(e).vertexAdded);\n            return;\n        }\n        const verticesRemoved = edgeView.removeRedundantLinearVertices({\n            ui: true,\n            toolId: this.cid,\n        });\n        if (verticesRemoved) {\n            this.render();\n        }\n        this.blur();\n        this.stopBatch(this.eventData(e).vertexAdded);\n        const { e: evt, x, y } = this.getMouseEventArgs(e);\n        if (!this.options.stopPropagation) {\n            edgeView.notifyMouseUp(evt, x, y);\n        }\n        edgeView.checkMouseleave(evt);\n        options.onChanged && options.onChanged({ edge: edgeView.cell, edgeView });\n    }\n    snapVertex(vertex, index) {\n        const snapRadius = this.options.snapRadius || 0;\n        if (snapRadius > 0) {\n            const neighbors = this.getNeighborPoints(index);\n            const prev = neighbors.prev;\n            const next = neighbors.next;\n            if (Math.abs(vertex.x - prev.x) < snapRadius) {\n                vertex.x = prev.x;\n            }\n            else if (Math.abs(vertex.x - next.x) < snapRadius) {\n                vertex.x = next.x;\n            }\n            if (Math.abs(vertex.y - prev.y) < snapRadius) {\n                vertex.y = neighbors.prev.y;\n            }\n            else if (Math.abs(vertex.y - next.y) < snapRadius) {\n                vertex.y = next.y;\n            }\n        }\n    }\n    onHandleRemove({ handle, e }) {\n        if (this.options.removable) {\n            const index = handle.options.index;\n            const edgeView = this.cellView;\n            edgeView.cell.removeVertexAt(index, { ui: true });\n            if (this.options.addable) {\n                this.updatePath();\n            }\n            edgeView.checkMouseleave(this.normalizeEvent(e));\n        }\n    }\n    onPathMouseDown(evt) {\n        const edgeView = this.cellView;\n        if (this.guard(evt) ||\n            !this.options.addable ||\n            !edgeView.can('vertexAddable')) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        const e = this.normalizeEvent(evt);\n        const vertex = this.graph.snapToGrid(e.clientX, e.clientY).toJSON();\n        edgeView.cell.startBatch('add-vertex', { ui: true, toolId: this.cid });\n        const index = edgeView.getVertexIndex(vertex.x, vertex.y);\n        this.snapVertex(vertex, index);\n        edgeView.cell.insertVertex(vertex, index, {\n            ui: true,\n            toolId: this.cid,\n        });\n        this.render();\n        const handle = this.handles[index];\n        this.eventData(e, { vertexAdded: true });\n        handle.onMouseDown(e);\n    }\n    onRemove() {\n        this.resetHandles();\n    }\n}\n(function (Vertices) {\n    class Handle extends View {\n        get graph() {\n            return this.options.graph;\n        }\n        constructor(options) {\n            super();\n            this.options = options;\n            this.render();\n            this.delegateEvents({\n                mousedown: 'onMouseDown',\n                touchstart: 'onMouseDown',\n                dblclick: 'onDoubleClick',\n            });\n        }\n        render() {\n            this.container = View.createElement('circle', true);\n            const attrs = this.options.attrs;\n            if (typeof attrs === 'function') {\n                const defaults = Vertices.getDefaults();\n                this.setAttrs(Object.assign(Object.assign({}, defaults.attrs), attrs(this)));\n            }\n            else {\n                this.setAttrs(attrs);\n            }\n            this.addClass(this.prefixClassName('edge-tool-vertex'));\n        }\n        updatePosition(x, y) {\n            this.setAttrs({ cx: x, cy: y });\n        }\n        onMouseDown(evt) {\n            if (this.options.guard(evt)) {\n                return;\n            }\n            evt.stopPropagation();\n            evt.preventDefault();\n            this.graph.view.undelegateEvents();\n            this.delegateDocumentEvents({\n                mousemove: 'onMouseMove',\n                touchmove: 'onMouseMove',\n                mouseup: 'onMouseUp',\n                touchend: 'onMouseUp',\n                touchcancel: 'onMouseUp',\n            }, evt.data);\n            this.emit('change', { e: evt, handle: this });\n        }\n        onMouseMove(evt) {\n            this.emit('changing', { e: evt, handle: this });\n        }\n        onMouseUp(evt) {\n            this.emit('changed', { e: evt, handle: this });\n            this.undelegateDocumentEvents();\n            this.graph.view.delegateEvents();\n        }\n        onDoubleClick(evt) {\n            this.emit('remove', { e: evt, handle: this });\n        }\n    }\n    Vertices.Handle = Handle;\n})(Vertices || (Vertices = {}));\n(function (Vertices) {\n    const pathClassName = Config.prefix('edge-tool-vertex-path');\n    Vertices.config({\n        name: 'vertices',\n        snapRadius: 20,\n        addable: true,\n        removable: true,\n        removeRedundancies: true,\n        stopPropagation: true,\n        attrs: {\n            r: 6,\n            fill: '#333',\n            stroke: '#fff',\n            cursor: 'move',\n            'stroke-width': 2,\n        },\n        createHandle: (options) => new Vertices.Handle(options),\n        markup: [\n            {\n                tagName: 'path',\n                selector: 'connection',\n                className: pathClassName,\n                attrs: {\n                    fill: 'none',\n                    stroke: 'transparent',\n                    'stroke-width': 10,\n                    cursor: 'pointer',\n                },\n            },\n        ],\n        events: {\n            [`mousedown .${pathClassName}`]: 'onPathMouseDown',\n            [`touchstart .${pathClassName}`]: 'onPathMouseDown',\n        },\n    });\n})(Vertices || (Vertices = {}));\n//# sourceMappingURL=vertices.js.map","import { Dom, ObjectExt, FunctionExt } from '@antv/x6-common';\nimport { Point, Line } from '@antv/x6-geometry';\nimport { View } from '../../view/view';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nexport class Segments extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.handles = [];\n    }\n    get vertices() {\n        return this.cellView.cell.getVertices();\n    }\n    update() {\n        this.render();\n        return this;\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName('edge-tool-segments'));\n        this.resetHandles();\n        const edgeView = this.cellView;\n        const vertices = [...this.vertices];\n        vertices.unshift(edgeView.sourcePoint);\n        vertices.push(edgeView.targetPoint);\n        for (let i = 0, l = vertices.length; i < l - 1; i += 1) {\n            const vertex = vertices[i];\n            const nextVertex = vertices[i + 1];\n            const handle = this.renderHandle(vertex, nextVertex, i);\n            this.stamp(handle.container);\n            this.handles.push(handle);\n        }\n        return this;\n    }\n    renderHandle(vertex, nextVertex, index) {\n        const handle = this.options.createHandle({\n            index,\n            graph: this.graph,\n            guard: (evt) => this.guard(evt),\n            attrs: this.options.attrs || {},\n        });\n        if (this.options.processHandle) {\n            this.options.processHandle(handle);\n        }\n        this.updateHandle(handle, vertex, nextVertex);\n        this.container.appendChild(handle.container);\n        this.startHandleListening(handle);\n        return handle;\n    }\n    startHandleListening(handle) {\n        handle.on('change', this.onHandleChange, this);\n        handle.on('changing', this.onHandleChanging, this);\n        handle.on('changed', this.onHandleChanged, this);\n    }\n    stopHandleListening(handle) {\n        handle.off('change', this.onHandleChange, this);\n        handle.off('changing', this.onHandleChanging, this);\n        handle.off('changed', this.onHandleChanged, this);\n    }\n    resetHandles() {\n        const handles = this.handles;\n        this.handles = [];\n        if (handles) {\n            handles.forEach((handle) => {\n                this.stopHandleListening(handle);\n                handle.remove();\n            });\n        }\n    }\n    shiftHandleIndexes(delta) {\n        const handles = this.handles;\n        for (let i = 0, n = handles.length; i < n; i += 1) {\n            handles[i].options.index += delta;\n        }\n    }\n    resetAnchor(type, anchor) {\n        const edge = this.cellView.cell;\n        const options = {\n            ui: true,\n            toolId: this.cid,\n        };\n        if (anchor) {\n            edge.prop([type, 'anchor'], anchor, options);\n        }\n        else {\n            edge.removeProp([type, 'anchor'], options);\n        }\n    }\n    snapHandle(handle, position, data) {\n        const axis = handle.options.axis;\n        const index = handle.options.index;\n        const edgeView = this.cellView;\n        const edge = edgeView.cell;\n        const vertices = edge.getVertices();\n        const prev = vertices[index - 2] || data.sourceAnchor;\n        const next = vertices[index + 1] || data.targetAnchor;\n        const snapRadius = this.options.snapRadius;\n        if (Math.abs(position[axis] - prev[axis]) < snapRadius) {\n            position[axis] = prev[axis];\n        }\n        else if (Math.abs(position[axis] - next[axis]) < snapRadius) {\n            position[axis] = next[axis];\n        }\n        return position;\n    }\n    onHandleChanging({ handle, e, }) {\n        const graph = this.graph;\n        const options = this.options;\n        const edgeView = this.cellView;\n        const anchorFn = options.anchor;\n        const axis = handle.options.axis;\n        const index = handle.options.index - 1;\n        const data = this.getEventData(e);\n        const evt = this.normalizeEvent(e);\n        const coords = graph.snapToGrid(evt.clientX, evt.clientY);\n        const position = this.snapHandle(handle, coords.clone(), data);\n        const vertices = ObjectExt.cloneDeep(this.vertices);\n        let vertex = vertices[index];\n        let nextVertex = vertices[index + 1];\n        // First Segment\n        const sourceView = edgeView.sourceView;\n        const sourceBBox = edgeView.sourceBBox;\n        let changeSourceAnchor = false;\n        let deleteSourceAnchor = false;\n        if (!vertex) {\n            vertex = edgeView.sourceAnchor.toJSON();\n            vertex[axis] = position[axis];\n            if (sourceBBox.containsPoint(vertex)) {\n                changeSourceAnchor = true;\n            }\n            else {\n                vertices.unshift(vertex);\n                this.shiftHandleIndexes(1);\n                deleteSourceAnchor = true;\n            }\n        }\n        else if (index === 0) {\n            if (sourceBBox.containsPoint(vertex)) {\n                vertices.shift();\n                this.shiftHandleIndexes(-1);\n                changeSourceAnchor = true;\n            }\n            else {\n                vertex[axis] = position[axis];\n                deleteSourceAnchor = true;\n            }\n        }\n        else {\n            vertex[axis] = position[axis];\n        }\n        if (typeof anchorFn === 'function' && sourceView) {\n            if (changeSourceAnchor) {\n                const sourceAnchorPosition = data.sourceAnchor.clone();\n                sourceAnchorPosition[axis] = position[axis];\n                const sourceAnchor = FunctionExt.call(anchorFn, edgeView, sourceAnchorPosition, sourceView, edgeView.sourceMagnet || sourceView.container, 'source', edgeView, this);\n                this.resetAnchor('source', sourceAnchor);\n            }\n            if (deleteSourceAnchor) {\n                this.resetAnchor('source', data.sourceAnchorDef);\n            }\n        }\n        // Last segment\n        const targetView = edgeView.targetView;\n        const targetBBox = edgeView.targetBBox;\n        let changeTargetAnchor = false;\n        let deleteTargetAnchor = false;\n        if (!nextVertex) {\n            nextVertex = edgeView.targetAnchor.toJSON();\n            nextVertex[axis] = position[axis];\n            if (targetBBox.containsPoint(nextVertex)) {\n                changeTargetAnchor = true;\n            }\n            else {\n                vertices.push(nextVertex);\n                deleteTargetAnchor = true;\n            }\n        }\n        else if (index === vertices.length - 2) {\n            if (targetBBox.containsPoint(nextVertex)) {\n                vertices.pop();\n                changeTargetAnchor = true;\n            }\n            else {\n                nextVertex[axis] = position[axis];\n                deleteTargetAnchor = true;\n            }\n        }\n        else {\n            nextVertex[axis] = position[axis];\n        }\n        if (typeof anchorFn === 'function' && targetView) {\n            if (changeTargetAnchor) {\n                const targetAnchorPosition = data.targetAnchor.clone();\n                targetAnchorPosition[axis] = position[axis];\n                const targetAnchor = FunctionExt.call(anchorFn, edgeView, targetAnchorPosition, targetView, edgeView.targetMagnet || targetView.container, 'target', edgeView, this);\n                this.resetAnchor('target', targetAnchor);\n            }\n            if (deleteTargetAnchor) {\n                this.resetAnchor('target', data.targetAnchorDef);\n            }\n        }\n        if (!Point.equalPoints(vertices, this.vertices)) {\n            this.cellView.cell.setVertices(vertices, { ui: true, toolId: this.cid });\n        }\n        this.updateHandle(handle, vertex, nextVertex, 0);\n        if (!options.stopPropagation) {\n            edgeView.notifyMouseMove(evt, coords.x, coords.y);\n        }\n    }\n    onHandleChange({ handle, e }) {\n        const options = this.options;\n        const handles = this.handles;\n        const edgeView = this.cellView;\n        const index = handle.options.index;\n        if (!Array.isArray(handles)) {\n            return;\n        }\n        for (let i = 0, n = handles.length; i < n; i += 1) {\n            if (i !== index) {\n                handles[i].hide();\n            }\n        }\n        this.focus();\n        this.setEventData(e, {\n            sourceAnchor: edgeView.sourceAnchor.clone(),\n            targetAnchor: edgeView.targetAnchor.clone(),\n            sourceAnchorDef: ObjectExt.cloneDeep(this.cell.prop(['source', 'anchor'])),\n            targetAnchorDef: ObjectExt.cloneDeep(this.cell.prop(['target', 'anchor'])),\n        });\n        this.cell.startBatch('move-segment', { ui: true, toolId: this.cid });\n        if (!options.stopPropagation) {\n            const normalizedEvent = this.normalizeEvent(e);\n            const coords = this.graph.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n            edgeView.notifyMouseDown(normalizedEvent, coords.x, coords.y);\n        }\n    }\n    onHandleChanged({ e }) {\n        const options = this.options;\n        const edgeView = this.cellView;\n        if (options.removeRedundancies) {\n            edgeView.removeRedundantLinearVertices({ ui: true, toolId: this.cid });\n        }\n        const normalizedEvent = this.normalizeEvent(e);\n        const coords = this.graph.snapToGrid(normalizedEvent.clientX, normalizedEvent.clientY);\n        this.render();\n        this.blur();\n        this.cell.stopBatch('move-segment', { ui: true, toolId: this.cid });\n        if (!options.stopPropagation) {\n            edgeView.notifyMouseUp(normalizedEvent, coords.x, coords.y);\n        }\n        edgeView.checkMouseleave(normalizedEvent);\n        options.onChanged && options.onChanged({ edge: edgeView.cell, edgeView });\n    }\n    updateHandle(handle, vertex, nextVertex, offset = 0) {\n        const precision = this.options.precision || 0;\n        const vertical = Math.abs(vertex.x - nextVertex.x) < precision;\n        const horizontal = Math.abs(vertex.y - nextVertex.y) < precision;\n        if (vertical || horizontal) {\n            const segmentLine = new Line(vertex, nextVertex);\n            const length = segmentLine.length();\n            if (length < this.options.threshold) {\n                handle.hide();\n            }\n            else {\n                const position = segmentLine.getCenter();\n                const axis = vertical ? 'x' : 'y';\n                position[axis] += offset || 0;\n                const angle = segmentLine.vector().vectorAngle(new Point(1, 0));\n                handle.updatePosition(position.x, position.y, angle, this.cellView);\n                handle.show();\n                handle.options.axis = axis;\n            }\n        }\n        else {\n            handle.hide();\n        }\n    }\n    onRemove() {\n        this.resetHandles();\n    }\n}\n(function (Segments) {\n    class Handle extends View {\n        constructor(options) {\n            super();\n            this.options = options;\n            this.render();\n            this.delegateEvents({\n                mousedown: 'onMouseDown',\n                touchstart: 'onMouseDown',\n            });\n        }\n        render() {\n            this.container = View.createElement('rect', true);\n            const attrs = this.options.attrs;\n            if (typeof attrs === 'function') {\n                const defaults = Segments.getDefaults();\n                this.setAttrs(Object.assign(Object.assign({}, defaults.attrs), attrs(this)));\n            }\n            else {\n                this.setAttrs(attrs);\n            }\n            this.addClass(this.prefixClassName('edge-tool-segment'));\n        }\n        updatePosition(x, y, angle, view) {\n            const p = view.getClosestPoint(new Point(x, y)) || new Point(x, y);\n            let matrix = Dom.createSVGMatrix().translate(p.x, p.y);\n            if (!p.equals({ x, y })) {\n                const line = new Line(x, y, p.x, p.y);\n                let deg = line.vector().vectorAngle(new Point(1, 0));\n                if (deg !== 0) {\n                    deg += 90;\n                }\n                matrix = matrix.rotate(deg);\n            }\n            else {\n                matrix = matrix.rotate(angle);\n            }\n            this.setAttrs({\n                transform: Dom.matrixToTransformString(matrix),\n                cursor: angle % 180 === 0 ? 'row-resize' : 'col-resize',\n            });\n        }\n        onMouseDown(evt) {\n            if (this.options.guard(evt)) {\n                return;\n            }\n            this.trigger('change', { e: evt, handle: this });\n            evt.stopPropagation();\n            evt.preventDefault();\n            this.options.graph.view.undelegateEvents();\n            this.delegateDocumentEvents({\n                mousemove: 'onMouseMove',\n                touchmove: 'onMouseMove',\n                mouseup: 'onMouseUp',\n                touchend: 'onMouseUp',\n                touchcancel: 'onMouseUp',\n            }, evt.data);\n        }\n        onMouseMove(evt) {\n            this.emit('changing', { e: evt, handle: this });\n        }\n        onMouseUp(evt) {\n            this.emit('changed', { e: evt, handle: this });\n            this.undelegateDocumentEvents();\n            this.options.graph.view.delegateEvents();\n        }\n        show() {\n            this.container.style.display = '';\n        }\n        hide() {\n            this.container.style.display = 'none';\n        }\n    }\n    Segments.Handle = Handle;\n})(Segments || (Segments = {}));\n(function (Segments) {\n    Segments.config({\n        name: 'segments',\n        precision: 0.5,\n        threshold: 40,\n        snapRadius: 10,\n        stopPropagation: true,\n        removeRedundancies: true,\n        attrs: {\n            width: 20,\n            height: 8,\n            x: -10,\n            y: -4,\n            rx: 4,\n            ry: 4,\n            fill: '#333',\n            stroke: '#fff',\n            'stroke-width': 2,\n        },\n        createHandle: (options) => new Segments.Handle(options),\n        anchor: Util.getAnchor,\n    });\n})(Segments || (Segments = {}));\n//# sourceMappingURL=segments.js.map","import { Dom, FunctionExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { ToolsView } from '../../view/tool';\nimport * as Util from './util';\nclass Anchor extends ToolsView.ToolItem {\n    get type() {\n        return this.options.type;\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName(`edge-tool-${this.type}-anchor`));\n        this.toggleArea(false);\n        this.update();\n    }\n    update() {\n        const type = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(type);\n        if (terminalView) {\n            this.updateAnchor();\n            this.updateArea();\n            this.container.style.display = '';\n        }\n        else {\n            this.container.style.display = 'none';\n        }\n        return this;\n    }\n    updateAnchor() {\n        const childNodes = this.childNodes;\n        if (!childNodes) {\n            return;\n        }\n        const anchorNode = childNodes.anchor;\n        if (!anchorNode) {\n            return;\n        }\n        const type = this.type;\n        const edgeView = this.cellView;\n        const options = this.options;\n        const position = edgeView.getTerminalAnchor(type);\n        const customAnchor = edgeView.cell.prop([type, 'anchor']);\n        anchorNode.setAttribute('transform', `translate(${position.x}, ${position.y})`);\n        const anchorAttrs = customAnchor\n            ? options.customAnchorAttrs\n            : options.defaultAnchorAttrs;\n        if (anchorAttrs) {\n            Object.keys(anchorAttrs).forEach((attrName) => {\n                anchorNode.setAttribute(attrName, anchorAttrs[attrName]);\n            });\n        }\n    }\n    updateArea() {\n        const childNodes = this.childNodes;\n        if (!childNodes) {\n            return;\n        }\n        const areaNode = childNodes.area;\n        if (!areaNode) {\n            return;\n        }\n        const type = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(type);\n        if (terminalView) {\n            const terminalCell = terminalView.cell;\n            const magnet = edgeView.getTerminalMagnet(type);\n            let padding = this.options.areaPadding || 0;\n            if (!Number.isFinite(padding)) {\n                padding = 0;\n            }\n            let bbox;\n            let angle;\n            let center;\n            if (terminalView.isEdgeElement(magnet)) {\n                bbox = terminalView.getBBox();\n                angle = 0;\n                center = bbox.getCenter();\n            }\n            else {\n                bbox = terminalView.getUnrotatedBBoxOfElement(magnet);\n                angle = terminalCell.getAngle();\n                center = bbox.getCenter();\n                if (angle) {\n                    center.rotate(-angle, terminalCell.getBBox().getCenter());\n                }\n            }\n            bbox.inflate(padding);\n            Dom.attr(areaNode, {\n                x: -bbox.width / 2,\n                y: -bbox.height / 2,\n                width: bbox.width,\n                height: bbox.height,\n                transform: `translate(${center.x}, ${center.y}) rotate(${angle})`,\n            });\n        }\n    }\n    toggleArea(visible) {\n        if (this.childNodes) {\n            const elem = this.childNodes.area;\n            if (elem) {\n                elem.style.display = visible ? '' : 'none';\n            }\n        }\n    }\n    onMouseDown(evt) {\n        if (this.guard(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        this.graph.view.undelegateEvents();\n        if (this.options.documentEvents) {\n            this.delegateDocumentEvents(this.options.documentEvents);\n        }\n        this.focus();\n        this.toggleArea(this.options.restrictArea);\n        this.cell.startBatch('move-anchor', {\n            ui: true,\n            toolId: this.cid,\n        });\n    }\n    resetAnchor(anchor) {\n        const type = this.type;\n        const cell = this.cell;\n        if (anchor) {\n            cell.prop([type, 'anchor'], anchor, {\n                rewrite: true,\n                ui: true,\n                toolId: this.cid,\n            });\n        }\n        else {\n            cell.removeProp([type, 'anchor'], {\n                ui: true,\n                toolId: this.cid,\n            });\n        }\n    }\n    onMouseMove(evt) {\n        const terminalType = this.type;\n        const edgeView = this.cellView;\n        const terminalView = edgeView.getTerminalView(terminalType);\n        if (terminalView == null) {\n            return;\n        }\n        const e = this.normalizeEvent(evt);\n        const terminalCell = terminalView.cell;\n        const terminalMagnet = edgeView.getTerminalMagnet(terminalType);\n        let coords = this.graph.coord.clientToLocalPoint(e.clientX, e.clientY);\n        const snapFn = this.options.snap;\n        if (typeof snapFn === 'function') {\n            const tmp = FunctionExt.call(snapFn, edgeView, coords, terminalView, terminalMagnet, terminalType, edgeView, this);\n            coords = Point.create(tmp);\n        }\n        if (this.options.restrictArea) {\n            if (terminalView.isEdgeElement(terminalMagnet)) {\n                const pointAtConnection = terminalView.getClosestPoint(coords);\n                if (pointAtConnection) {\n                    coords = pointAtConnection;\n                }\n            }\n            else {\n                const bbox = terminalView.getUnrotatedBBoxOfElement(terminalMagnet);\n                const angle = terminalCell.getAngle();\n                const origin = terminalCell.getBBox().getCenter();\n                const rotatedCoords = coords.clone().rotate(angle, origin);\n                if (!bbox.containsPoint(rotatedCoords)) {\n                    coords = bbox\n                        .getNearestPointToPoint(rotatedCoords)\n                        .rotate(-angle, origin);\n                }\n            }\n        }\n        let anchor;\n        const anchorFn = this.options.anchor;\n        if (typeof anchorFn === 'function') {\n            anchor = FunctionExt.call(anchorFn, edgeView, coords, terminalView, terminalMagnet, terminalType, edgeView, this);\n        }\n        this.resetAnchor(anchor);\n        this.update();\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    onMouseUp(evt) {\n        this.graph.view.delegateEvents();\n        this.undelegateDocumentEvents();\n        this.blur();\n        this.toggleArea(false);\n        const edgeView = this.cellView;\n        if (this.options.removeRedundancies) {\n            edgeView.removeRedundantLinearVertices({ ui: true, toolId: this.cid });\n        }\n        this.cell.stopBatch('move-anchor', { ui: true, toolId: this.cid });\n    }\n    onDblClick() {\n        const anchor = this.options.resetAnchor;\n        if (anchor) {\n            this.resetAnchor(anchor === true ? undefined : anchor);\n        }\n        this.update();\n    }\n}\n(function (Anchor) {\n    Anchor.config({\n        tagName: 'g',\n        markup: [\n            {\n                tagName: 'circle',\n                selector: 'anchor',\n                attrs: {\n                    cursor: 'pointer',\n                },\n            },\n            {\n                tagName: 'rect',\n                selector: 'area',\n                attrs: {\n                    'pointer-events': 'none',\n                    fill: 'none',\n                    stroke: '#33334F',\n                    'stroke-dasharray': '2,4',\n                    rx: 5,\n                    ry: 5,\n                },\n            },\n        ],\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n            dblclick: 'onDblClick',\n        },\n        documentEvents: {\n            mousemove: 'onMouseMove',\n            touchmove: 'onMouseMove',\n            mouseup: 'onMouseUp',\n            touchend: 'onMouseUp',\n            touchcancel: 'onMouseUp',\n        },\n        customAnchorAttrs: {\n            'stroke-width': 4,\n            stroke: '#33334F',\n            fill: '#FFFFFF',\n            r: 5,\n        },\n        defaultAnchorAttrs: {\n            'stroke-width': 2,\n            stroke: '#FFFFFF',\n            fill: '#33334F',\n            r: 6,\n        },\n        areaPadding: 6,\n        snapRadius: 10,\n        resetAnchor: true,\n        restrictArea: true,\n        removeRedundancies: true,\n        anchor: Util.getAnchor,\n        snap(pos, terminalView, terminalMagnet, terminalType, edgeView, toolView) {\n            const snapRadius = toolView.options.snapRadius || 0;\n            const isSource = terminalType === 'source';\n            const refIndex = isSource ? 0 : -1;\n            const ref = this.cell.getVertexAt(refIndex) ||\n                this.getTerminalAnchor(isSource ? 'target' : 'source');\n            if (ref) {\n                if (Math.abs(ref.x - pos.x) < snapRadius)\n                    pos.x = ref.x;\n                if (Math.abs(ref.y - pos.y) < snapRadius)\n                    pos.y = ref.y;\n            }\n            return pos;\n        },\n    });\n})(Anchor || (Anchor = {}));\nexport const SourceAnchor = Anchor.define({\n    name: 'source-anchor',\n    type: 'source',\n});\nexport const TargetAnchor = Anchor.define({\n    name: 'target-anchor',\n    type: 'target',\n});\n//# sourceMappingURL=anchor.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { ToolsView } from '../../view/tool';\nclass Arrowhead extends ToolsView.ToolItem {\n    get type() {\n        return this.options.type;\n    }\n    get ratio() {\n        return this.options.ratio;\n    }\n    init() {\n        if (this.options.attrs) {\n            const _a = this.options.attrs, { class: className } = _a, attrs = __rest(_a, [\"class\"]);\n            this.setAttrs(attrs, this.container);\n            if (className) {\n                Dom.addClass(this.container, className);\n            }\n        }\n    }\n    onRender() {\n        Dom.addClass(this.container, this.prefixClassName(`edge-tool-${this.type}-arrowhead`));\n        this.update();\n    }\n    update() {\n        const ratio = this.ratio;\n        const edgeView = this.cellView;\n        const tangent = edgeView.getTangentAtRatio(ratio);\n        const position = tangent ? tangent.start : edgeView.getPointAtRatio(ratio);\n        const angle = (tangent && tangent.vector().vectorAngle(new Point(1, 0))) || 0;\n        if (!position) {\n            return this;\n        }\n        const matrix = Dom.createSVGMatrix()\n            .translate(position.x, position.y)\n            .rotate(angle);\n        Dom.transform(this.container, matrix, { absolute: true });\n        return this;\n    }\n    onMouseDown(evt) {\n        if (this.guard(evt)) {\n            return;\n        }\n        evt.stopPropagation();\n        evt.preventDefault();\n        const edgeView = this.cellView;\n        if (edgeView.can('arrowheadMovable')) {\n            edgeView.cell.startBatch('move-arrowhead', {\n                ui: true,\n                toolId: this.cid,\n            });\n            const coords = this.graph.snapToGrid(evt.clientX, evt.clientY);\n            const data = edgeView.prepareArrowheadDragging(this.type, {\n                x: coords.x,\n                y: coords.y,\n                options: Object.assign(Object.assign({}, this.options), { toolId: this.cid }),\n            });\n            this.cellView.setEventData(evt, data);\n            this.delegateDocumentEvents(this.options.documentEvents, evt.data);\n            edgeView.graph.view.undelegateEvents();\n            this.container.style.pointerEvents = 'none';\n        }\n        this.focus();\n    }\n    onMouseMove(evt) {\n        const e = this.normalizeEvent(evt);\n        const coords = this.graph.snapToGrid(e.clientX, e.clientY);\n        this.cellView.onMouseMove(e, coords.x, coords.y);\n        this.update();\n    }\n    onMouseUp(evt) {\n        this.undelegateDocumentEvents();\n        const e = this.normalizeEvent(evt);\n        const edgeView = this.cellView;\n        const coords = this.graph.snapToGrid(e.clientX, e.clientY);\n        edgeView.onMouseUp(e, coords.x, coords.y);\n        this.graph.view.delegateEvents();\n        this.blur();\n        this.container.style.pointerEvents = '';\n        edgeView.cell.stopBatch('move-arrowhead', {\n            ui: true,\n            toolId: this.cid,\n        });\n    }\n}\n(function (Arrowhead) {\n    Arrowhead.config({\n        tagName: 'path',\n        isSVGElement: true,\n        events: {\n            mousedown: 'onMouseDown',\n            touchstart: 'onMouseDown',\n        },\n        documentEvents: {\n            mousemove: 'onMouseMove',\n            touchmove: 'onMouseMove',\n            mouseup: 'onMouseUp',\n            touchend: 'onMouseUp',\n            touchcancel: 'onMouseUp',\n        },\n    });\n})(Arrowhead || (Arrowhead = {}));\nexport const SourceArrowhead = Arrowhead.define({\n    name: 'source-arrowhead',\n    type: 'source',\n    ratio: 0,\n    attrs: {\n        d: 'M 10 -8 -10 0 10 8 Z',\n        fill: '#333',\n        stroke: '#fff',\n        'stroke-width': 2,\n        cursor: 'move',\n    },\n});\nexport const TargetArrowhead = Arrowhead.define({\n    name: 'target-arrowhead',\n    type: 'target',\n    ratio: 1,\n    attrs: {\n        d: 'M -10 -8 10 0 -10 8 Z',\n        fill: '#333',\n        stroke: '#fff',\n        'stroke-width': 2,\n        cursor: 'move',\n    },\n});\n//# sourceMappingURL=arrowhead.js.map","import { Point } from '@antv/x6-geometry';\nimport { Dom, FunctionExt, NumberExt, ObjectExt } from '@antv/x6-common';\nimport { ToolsView } from '../../view/tool';\nimport { Util } from '../../util';\nexport class CellEditor extends ToolsView.ToolItem {\n    constructor() {\n        super(...arguments);\n        this.labelIndex = -1;\n        this.distance = 0.5;\n        this.dblClick = this.onCellDblClick.bind(this);\n    }\n    onRender() {\n        const cellView = this.cellView;\n        if (cellView) {\n            cellView.on('cell:dblclick', this.dblClick);\n        }\n    }\n    createElement() {\n        const classNames = [\n            this.prefixClassName(`${this.cell.isEdge() ? 'edge' : 'node'}-tool-editor`),\n            this.prefixClassName('cell-tool-editor'),\n        ];\n        this.editor = ToolsView.createElement('div', false);\n        this.addClass(classNames, this.editor);\n        this.editor.contentEditable = 'true';\n        this.container.appendChild(this.editor);\n    }\n    removeElement() {\n        this.undelegateDocumentEvents();\n        if (this.editor) {\n            this.container.removeChild(this.editor);\n            this.editor = null;\n        }\n    }\n    updateEditor() {\n        const { cell, editor } = this;\n        if (!editor) {\n            return;\n        }\n        const { style } = editor;\n        if (cell.isNode()) {\n            this.updateNodeEditorTransform();\n        }\n        else if (cell.isEdge()) {\n            this.updateEdgeEditorTransform();\n        }\n        // set font style\n        const { attrs } = this.options;\n        style.fontSize = `${attrs.fontSize}px`;\n        style.fontFamily = attrs.fontFamily;\n        style.color = attrs.color;\n        style.backgroundColor = attrs.backgroundColor;\n        // set init value\n        const text = this.getCellText() || '';\n        editor.innerText = text;\n        this.setCellText(''); // clear display value when edit status because char ghosting.\n        return this;\n    }\n    updateNodeEditorTransform() {\n        const { graph, cell, editor } = this;\n        if (!editor) {\n            return;\n        }\n        let pos = Point.create();\n        let minWidth = 20;\n        let translate = '';\n        let { x, y } = this.options;\n        if (typeof x !== 'undefined' && typeof y !== 'undefined') {\n            const bbox = cell.getBBox();\n            x = NumberExt.normalizePercentage(x, bbox.width);\n            y = NumberExt.normalizePercentage(y, bbox.height);\n            pos = bbox.topLeft.translate(x, y);\n            minWidth = bbox.width - x * 2;\n        }\n        else {\n            const bbox = cell.getBBox();\n            pos = bbox.center;\n            minWidth = bbox.width - 4;\n            translate = 'translate(-50%, -50%)';\n        }\n        const scale = graph.scale();\n        const { style } = editor;\n        pos = graph.localToGraph(pos);\n        style.left = `${pos.x}px`;\n        style.top = `${pos.y}px`;\n        style.transform = `scale(${scale.sx}, ${scale.sy}) ${translate}`;\n        style.minWidth = `${minWidth}px`;\n    }\n    updateEdgeEditorTransform() {\n        if (!this.event) {\n            return;\n        }\n        const { graph, editor } = this;\n        if (!editor) {\n            return;\n        }\n        let pos = Point.create();\n        let minWidth = 20;\n        const { style } = editor;\n        const target = this.event.target;\n        const parent = target.parentElement;\n        const isEdgeLabel = parent && Dom.hasClass(parent, this.prefixClassName('edge-label'));\n        if (isEdgeLabel) {\n            const index = parent.getAttribute('data-index') || '0';\n            this.labelIndex = parseInt(index, 10);\n            const matrix = parent.getAttribute('transform');\n            const { translation } = Dom.parseTransformString(matrix);\n            pos = new Point(translation.tx, translation.ty);\n            minWidth = Util.getBBox(target).width;\n        }\n        else {\n            if (!this.options.labelAddable) {\n                return this;\n            }\n            pos = graph.clientToLocal(Point.create(this.event.clientX, this.event.clientY));\n            const view = this.cellView;\n            const d = view.path.closestPointLength(pos);\n            this.distance = d;\n            this.labelIndex = -1;\n        }\n        pos = graph.localToGraph(pos);\n        const scale = graph.scale();\n        style.left = `${pos.x}px`;\n        style.top = `${pos.y}px`;\n        style.minWidth = `${minWidth}px`;\n        style.transform = `scale(${scale.sx}, ${scale.sy}) translate(-50%, -50%)`;\n    }\n    onDocumentMouseDown(e) {\n        if (this.editor && e.target !== this.editor) {\n            const value = this.editor.innerText.replace(/\\n$/, '') || '';\n            // set value, when value is null, we will remove label in edge\n            this.setCellText(value !== '' ? value : null);\n            // remove tool\n            this.removeElement();\n        }\n    }\n    onCellDblClick({ e }) {\n        e.stopPropagation();\n        this.removeElement();\n        this.event = e;\n        this.createElement();\n        this.updateEditor();\n        this.autoFocus();\n        this.delegateDocumentEvents(this.options.documentEvents);\n    }\n    onMouseDown(e) {\n        e.stopPropagation();\n    }\n    autoFocus() {\n        setTimeout(() => {\n            if (this.editor) {\n                this.editor.focus();\n                this.selectText();\n            }\n        });\n    }\n    selectText() {\n        if (window.getSelection && this.editor) {\n            const range = document.createRange();\n            const selection = window.getSelection();\n            range.selectNodeContents(this.editor);\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n    }\n    getCellText() {\n        const { getText } = this.options;\n        if (typeof getText === 'function') {\n            return FunctionExt.call(getText, this.cellView, {\n                cell: this.cell,\n                index: this.labelIndex,\n            });\n        }\n        if (typeof getText === 'string') {\n            if (this.cell.isNode()) {\n                return this.cell.attr(getText);\n            }\n            if (this.cell.isEdge()) {\n                if (this.labelIndex !== -1) {\n                    return this.cell.prop(`labels/${this.labelIndex}/attrs/${getText}`);\n                }\n            }\n        }\n    }\n    setCellText(value) {\n        const setText = this.options.setText;\n        if (typeof setText === 'function') {\n            FunctionExt.call(setText, this.cellView, {\n                cell: this.cell,\n                value,\n                index: this.labelIndex,\n                distance: this.distance,\n            });\n            return;\n        }\n        if (typeof setText === 'string') {\n            if (this.cell.isNode()) {\n                if (value !== null) {\n                    this.cell.attr(setText, value);\n                }\n                return;\n            }\n            if (this.cell.isEdge()) {\n                const edge = this.cell;\n                if (this.labelIndex === -1) {\n                    if (value) {\n                        const newLabel = {\n                            position: {\n                                distance: this.distance,\n                            },\n                            attrs: {},\n                        };\n                        ObjectExt.setByPath(newLabel, `attrs/${setText}`, value);\n                        edge.appendLabel(newLabel);\n                    }\n                }\n                else {\n                    if (value !== null) {\n                        edge.prop(`labels/${this.labelIndex}/attrs/${setText}`, value);\n                    }\n                    else if (typeof this.labelIndex === 'number') {\n                        edge.removeLabelAt(this.labelIndex);\n                    }\n                }\n            }\n        }\n    }\n    onRemove() {\n        const cellView = this.cellView;\n        if (cellView) {\n            cellView.off('cell:dblclick', this.dblClick);\n        }\n        this.removeElement();\n    }\n}\n(function (CellEditor) {\n    CellEditor.config({\n        tagName: 'div',\n        isSVGElement: false,\n        events: {\n            mousedown: 'onMouseDown',\n        },\n        documentEvents: {\n            mousedown: 'onDocumentMouseDown',\n        },\n    });\n})(CellEditor || (CellEditor = {}));\n(function (CellEditor) {\n    CellEditor.NodeEditor = CellEditor.define({\n        attrs: {\n            fontSize: 14,\n            fontFamily: 'Arial, helvetica, sans-serif',\n            color: '#000',\n            backgroundColor: '#fff',\n        },\n        getText: 'text/text',\n        setText: 'text/text',\n    });\n    CellEditor.EdgeEditor = CellEditor.define({\n        attrs: {\n            fontSize: 14,\n            fontFamily: 'Arial, helvetica, sans-serif',\n            color: '#000',\n            backgroundColor: '#fff',\n        },\n        labelAddable: true,\n        getText: 'label/text',\n        setText: 'label/text',\n    });\n})(CellEditor || (CellEditor = {}));\n//# sourceMappingURL=editor.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Registry } from '../registry';\nimport { ToolsView } from '../../view/tool';\nimport { Button } from './button';\nimport { Boundary } from './boundary';\nimport { Vertices } from './vertices';\nimport { Segments } from './segments';\nimport { SourceAnchor, TargetAnchor } from './anchor';\nimport { SourceArrowhead, TargetArrowhead } from './arrowhead';\nimport { CellEditor } from './editor';\nexport var NodeTool;\n(function (NodeTool) {\n    NodeTool.presets = {\n        boundary: Boundary,\n        button: Button,\n        'button-remove': Button.Remove,\n        'node-editor': CellEditor.NodeEditor,\n    };\n    NodeTool.registry = Registry.create({\n        type: 'node tool',\n        process(name, options) {\n            if (typeof options === 'function') {\n                return options;\n            }\n            let parent = ToolsView.ToolItem;\n            const { inherit } = options, others = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                const base = this.get(inherit);\n                if (base == null) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            if (others.name == null) {\n                others.name = name;\n            }\n            return parent.define.call(parent, others);\n        },\n    });\n    NodeTool.registry.register(NodeTool.presets, true);\n})(NodeTool || (NodeTool = {}));\nexport var EdgeTool;\n(function (EdgeTool) {\n    EdgeTool.presets = {\n        boundary: Boundary,\n        vertices: Vertices,\n        segments: Segments,\n        button: Button,\n        'button-remove': Button.Remove,\n        'source-anchor': SourceAnchor,\n        'target-anchor': TargetAnchor,\n        'source-arrowhead': SourceArrowhead,\n        'target-arrowhead': TargetArrowhead,\n        'edge-editor': CellEditor.EdgeEditor,\n    };\n    EdgeTool.registry = Registry.create({\n        type: 'edge tool',\n        process(name, options) {\n            if (typeof options === 'function') {\n                return options;\n            }\n            let parent = ToolsView.ToolItem;\n            const { inherit } = options, others = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                const base = this.get(inherit);\n                if (base == null) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            if (others.name == null) {\n                others.name = name;\n            }\n            return parent.define.call(parent, others);\n        },\n    });\n    EdgeTool.registry.register(EdgeTool.presets, true);\n})(EdgeTool || (EdgeTool = {}));\n//# sourceMappingURL=index.js.map","import { NumberExt } from '@antv/x6-common';\nexport const center = createBBoxAnchor('center');\nexport const top = createBBoxAnchor('topCenter');\nexport const bottom = createBBoxAnchor('bottomCenter');\nexport const left = createBBoxAnchor('leftMiddle');\nexport const right = createBBoxAnchor('rightMiddle');\nexport const topLeft = createBBoxAnchor('topLeft');\nexport const topRight = createBBoxAnchor('topRight');\nexport const bottomLeft = createBBoxAnchor('bottomLeft');\nexport const bottomRight = createBBoxAnchor('bottomRight');\nfunction createBBoxAnchor(method) {\n    return function (view, magnet, ref, options = {}) {\n        const bbox = options.rotate\n            ? view.getUnrotatedBBoxOfElement(magnet)\n            : view.getBBoxOfElement(magnet);\n        const result = bbox[method];\n        result.x += NumberExt.normalizePercentage(options.dx, bbox.width);\n        result.y += NumberExt.normalizePercentage(options.dy, bbox.height);\n        const cell = view.cell;\n        return options.rotate\n            ? result.rotate(-cell.getAngle(), cell.getBBox().getCenter())\n            : result;\n    };\n}\n//# sourceMappingURL=bbox.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n// eslint-disable-next-line\nexport function resolve(fn) {\n    return function (view, magnet, ref, options) {\n        if (ref instanceof Element) {\n            const refView = this.graph.findViewByElem(ref);\n            let refPoint;\n            if (refView) {\n                if (refView.isEdgeElement(ref)) {\n                    const distance = options.fixedAt != null ? options.fixedAt : '50%';\n                    refPoint = getPointAtEdge(refView, distance);\n                }\n                else {\n                    refPoint = refView.getBBoxOfElement(ref).getCenter();\n                }\n            }\n            else {\n                refPoint = new Point();\n            }\n            return fn.call(this, view, magnet, refPoint, options);\n        }\n        return fn.apply(this, arguments); // eslint-disable-line\n    };\n}\nexport function getPointAtEdge(edgeView, value) {\n    const isPercentage = NumberExt.isPercentage(value);\n    const num = typeof value === 'string' ? parseFloat(value) : value;\n    if (isPercentage) {\n        return edgeView.getPointAtRatio(num / 100);\n    }\n    return edgeView.getPointAtLength(num);\n}\n//# sourceMappingURL=util.js.map","import { Angle } from '@antv/x6-geometry';\nimport { resolve } from './util';\nconst orthogonal = function (view, magnet, refPoint, options) {\n    const angle = view.cell.getAngle();\n    const bbox = view.getBBoxOfElement(magnet);\n    const result = bbox.getCenter();\n    const topLeft = bbox.getTopLeft();\n    const bottomRight = bbox.getBottomRight();\n    let padding = options.padding;\n    if (!Number.isFinite(padding)) {\n        padding = 0;\n    }\n    if (topLeft.y + padding <= refPoint.y &&\n        refPoint.y <= bottomRight.y - padding) {\n        const dy = refPoint.y - result.y;\n        result.x +=\n            angle === 0 || angle === 180\n                ? 0\n                : (dy * 1) / Math.tan(Angle.toRad(angle));\n        result.y += dy;\n    }\n    else if (topLeft.x + padding <= refPoint.x &&\n        refPoint.x <= bottomRight.x - padding) {\n        const dx = refPoint.x - result.x;\n        result.y +=\n            angle === 90 || angle === 270 ? 0 : dx * Math.tan(Angle.toRad(angle));\n        result.x += dx;\n    }\n    return result;\n};\n/**\n * Tries to place the anchor of the edge inside the view bbox so that the\n * edge is made orthogonal. The anchor is placed along two line segments\n * inside the view bbox (between the centers of the top and bottom side and\n * between the centers of the left and right sides). If it is not possible\n * to place the anchor so that the edge would be orthogonal, the anchor is\n * placed at the center of the view bbox instead.\n */\nexport const orth = resolve(orthogonal);\n//# sourceMappingURL=orth.js.map","/**\n * Places the anchor of the edge at center of the node bbox.\n */\nexport const nodeCenter = function (view, magnet, ref, options, endType) {\n    const result = view.cell.getConnectionPoint(this.cell, endType);\n    if (options.dx || options.dy) {\n        result.translate(options.dx || 0, options.dy || 0);\n    }\n    return result;\n};\n//# sourceMappingURL=node-center.js.map","import { resolve } from './util';\nconst middleSide = function (view, magnet, refPoint, options) {\n    let bbox;\n    let angle = 0;\n    let center;\n    const node = view.cell;\n    if (options.rotate) {\n        bbox = view.getUnrotatedBBoxOfElement(magnet);\n        center = node.getBBox().getCenter();\n        angle = node.getAngle();\n    }\n    else {\n        bbox = view.getBBoxOfElement(magnet);\n    }\n    const padding = options.padding;\n    if (padding != null && Number.isFinite(padding)) {\n        bbox.inflate(padding);\n    }\n    if (options.rotate) {\n        refPoint.rotate(angle, center);\n    }\n    const side = bbox.getNearestSideToPoint(refPoint);\n    let result;\n    switch (side) {\n        case 'left':\n            result = bbox.getLeftMiddle();\n            break;\n        case 'right':\n            result = bbox.getRightMiddle();\n            break;\n        case 'top':\n            result = bbox.getTopCenter();\n            break;\n        case 'bottom':\n            result = bbox.getBottomCenter();\n            break;\n        default:\n            break;\n    }\n    const direction = options.direction;\n    if (direction === 'H') {\n        if (side === 'top' || side === 'bottom') {\n            if (refPoint.x <= bbox.x + bbox.width) {\n                result = bbox.getLeftMiddle();\n            }\n            else {\n                result = bbox.getRightMiddle();\n            }\n        }\n    }\n    else if (direction === 'V') {\n        if (refPoint.y <= bbox.y + bbox.height) {\n            result = bbox.getTopCenter();\n        }\n        else {\n            result = bbox.getBottomCenter();\n        }\n    }\n    return options.rotate ? result.rotate(-angle, center) : result;\n};\n/**\n * Places the anchor of the edge in the middle of the side of view bbox\n * closest to the other endpoint.\n */\nexport const midSide = resolve(middleSide);\n//# sourceMappingURL=middle-side.js.map","import { Registry } from '../registry';\nimport * as anchors from './main';\nexport var NodeAnchor;\n(function (NodeAnchor) {\n    NodeAnchor.presets = anchors;\n    NodeAnchor.registry = Registry.create({\n        type: 'node endpoint',\n    });\n    NodeAnchor.registry.register(NodeAnchor.presets, true);\n})(NodeAnchor || (NodeAnchor = {}));\n//# sourceMappingURL=index.js.map","export const ratio = function (view, magnet, ref, options) {\n    let ratio = options.ratio != null ? options.ratio : 0.5;\n    if (ratio > 1) {\n        ratio /= 100;\n    }\n    return view.getPointAtRatio(ratio);\n};\n//# sourceMappingURL=ratio.js.map","export const length = function (view, magnet, ref, options) {\n    const length = options.length != null ? options.length : 20;\n    return view.getPointAtLength(length);\n};\n//# sourceMappingURL=length.js.map","import { Point } from '@antv/x6-geometry';\nimport { resolve } from '../node-anchor/util';\nexport const getClosestPoint = function (view, magnet, refPoint, options) {\n    const closestPoint = view.getClosestPoint(refPoint);\n    return closestPoint != null ? closestPoint : new Point();\n};\nexport const closest = resolve(getClosestPoint);\n//# sourceMappingURL=closest.js.map","import { Line } from '@antv/x6-geometry';\nimport { FunctionExt } from '@antv/x6-common';\nimport { resolve, getPointAtEdge } from '../node-anchor/util';\nimport { getClosestPoint } from './closest';\nconst orthogonal = function (view, magnet, refPoint, options) {\n    const OFFSET = 1e6;\n    const path = view.getConnection();\n    const segmentSubdivisions = view.getConnectionSubdivisions();\n    const vLine = new Line(refPoint.clone().translate(0, OFFSET), refPoint.clone().translate(0, -OFFSET));\n    const hLine = new Line(refPoint.clone().translate(OFFSET, 0), refPoint.clone().translate(-OFFSET, 0));\n    const vIntersections = vLine.intersect(path, {\n        segmentSubdivisions,\n    });\n    const hIntersections = hLine.intersect(path, {\n        segmentSubdivisions,\n    });\n    const intersections = [];\n    if (vIntersections) {\n        intersections.push(...vIntersections);\n    }\n    if (hIntersections) {\n        intersections.push(...hIntersections);\n    }\n    if (intersections.length > 0) {\n        return refPoint.closest(intersections);\n    }\n    if (options.fallbackAt != null) {\n        return getPointAtEdge(view, options.fallbackAt);\n    }\n    return FunctionExt.call(getClosestPoint, this, view, magnet, refPoint, options);\n};\nexport const orth = resolve(orthogonal);\n//# sourceMappingURL=orth.js.map","import { Registry } from '../registry';\nimport * as anchors from './main';\nexport var EdgeAnchor;\n(function (EdgeAnchor) {\n    EdgeAnchor.presets = anchors;\n    EdgeAnchor.registry = Registry.create({\n        type: 'edge endpoint',\n    });\n    EdgeAnchor.registry.register(EdgeAnchor.presets, true);\n})(EdgeAnchor || (EdgeAnchor = {}));\n//# sourceMappingURL=index.js.map","import { Line } from '@antv/x6-geometry';\nexport function offset(p1, p2, offset) {\n    let tx;\n    if (typeof offset === 'object') {\n        if (Number.isFinite(offset.y)) {\n            const line = new Line(p2, p1);\n            const { start, end } = line.parallel(offset.y);\n            p2 = start; // eslint-disable-line\n            p1 = end; // eslint-disable-line\n        }\n        tx = offset.x;\n    }\n    else {\n        tx = offset;\n    }\n    if (tx == null || !Number.isFinite(tx)) {\n        return p1;\n    }\n    const length = p1.distance(p2);\n    if (tx === 0 && length > 0) {\n        return p1;\n    }\n    return p1.move(p2, -Math.min(tx, length - 1));\n}\nexport function getStrokeWidth(magnet) {\n    const stroke = magnet.getAttribute('stroke-width');\n    if (stroke === null) {\n        return 0;\n    }\n    return parseFloat(stroke) || 0;\n}\nexport function findShapeNode(magnet) {\n    if (magnet == null) {\n        return null;\n    }\n    let node = magnet;\n    do {\n        let tagName = node.tagName;\n        if (typeof tagName !== 'string')\n            return null;\n        tagName = tagName.toUpperCase();\n        if (tagName === 'G') {\n            node = node.firstElementChild;\n        }\n        else if (tagName === 'TITLE') {\n            node = node.nextElementSibling;\n        }\n        else\n            break;\n    } while (node);\n    return node;\n}\n//# sourceMappingURL=util.js.map","import { offset, getStrokeWidth } from './util';\n/**\n * Places the connection point at the intersection between the edge\n * path end segment and the target node bbox.\n */\nexport const bbox = function (line, view, magnet, options) {\n    const bbox = view.getBBoxOfElement(magnet);\n    if (options.stroked) {\n        bbox.inflate(getStrokeWidth(magnet) / 2);\n    }\n    const intersections = line.intersect(bbox);\n    const p = intersections && intersections.length\n        ? line.start.closest(intersections)\n        : line.end;\n    return offset(p, line.start, options.offset);\n};\n//# sourceMappingURL=bbox.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { bbox } from './bbox';\nimport { offset, getStrokeWidth } from './util';\n/**\n * Places the connection point at the intersection between the\n * link path end segment and the element's unrotated bbox.\n */\nexport const rect = function (line, view, magnet, options, type) {\n    const cell = view.cell;\n    const angle = cell.isNode() ? cell.getAngle() : 0;\n    if (angle === 0) {\n        return FunctionExt.call(bbox, this, line, view, magnet, options, type);\n    }\n    const bboxRaw = view.getUnrotatedBBoxOfElement(magnet);\n    if (options.stroked) {\n        bboxRaw.inflate(getStrokeWidth(magnet) / 2);\n    }\n    const center = bboxRaw.getCenter();\n    const lineRaw = line.clone().rotate(angle, center);\n    const intersections = lineRaw.setLength(1e6).intersect(bboxRaw);\n    const p = intersections && intersections.length\n        ? lineRaw.start.closest(intersections).rotate(-angle, center)\n        : line.end;\n    return offset(p, line.start, options.offset);\n};\n//# sourceMappingURL=rect.js.map","import { ObjectExt, Dom } from '@antv/x6-common';\nimport { Path, Rectangle, Ellipse } from '@antv/x6-geometry';\nimport { offset, getStrokeWidth, findShapeNode } from './util';\nimport { Util } from '../../util';\n/**\n * Places the connection point at the intersection between the\n * edge path end segment and the actual shape of the target magnet.\n */\nexport const boundary = function (line, view, magnet, options) {\n    let node;\n    let intersection;\n    const anchor = line.end;\n    const selector = options.selector;\n    if (typeof selector === 'string') {\n        node = view.findOne(selector);\n    }\n    else if (Array.isArray(selector)) {\n        node = ObjectExt.getByPath(magnet, selector);\n    }\n    else {\n        node = findShapeNode(magnet);\n    }\n    if (!Dom.isSVGGraphicsElement(node)) {\n        if (node === magnet || !Dom.isSVGGraphicsElement(magnet)) {\n            return anchor;\n        }\n        node = magnet;\n    }\n    const localShape = view.getShapeOfElement(node);\n    const magnetMatrix = view.getMatrixOfElement(node);\n    const translateMatrix = view.getRootTranslatedMatrix();\n    const rotateMatrix = view.getRootRotatedMatrix();\n    const targetMatrix = translateMatrix\n        .multiply(rotateMatrix)\n        .multiply(magnetMatrix);\n    const localMatrix = targetMatrix.inverse();\n    const localLine = Util.transformLine(line, localMatrix);\n    const localRef = localLine.start.clone();\n    const data = view.getDataOfElement(node);\n    if (options.insideout === false) {\n        if (data.shapeBBox == null) {\n            data.shapeBBox = localShape.bbox();\n        }\n        const localBBox = data.shapeBBox;\n        if (localBBox != null && localBBox.containsPoint(localRef)) {\n            return anchor;\n        }\n    }\n    if (options.extrapolate === true) {\n        localLine.setLength(1e6);\n    }\n    // Caching segment subdivisions for paths\n    let pathOptions;\n    if (Path.isPath(localShape)) {\n        const precision = options.precision || 2;\n        if (data.segmentSubdivisions == null) {\n            data.segmentSubdivisions = localShape.getSegmentSubdivisions({\n                precision,\n            });\n        }\n        pathOptions = {\n            precision,\n            segmentSubdivisions: data.segmentSubdivisions,\n        };\n        intersection = localLine.intersect(localShape, pathOptions);\n    }\n    else {\n        intersection = localLine.intersect(localShape);\n    }\n    if (intersection) {\n        if (Array.isArray(intersection)) {\n            intersection = localRef.closest(intersection);\n        }\n    }\n    else if (options.sticky === true) {\n        // No intersection, find the closest point instead\n        if (Rectangle.isRectangle(localShape)) {\n            intersection = localShape.getNearestPointToPoint(localRef);\n        }\n        else if (Ellipse.isEllipse(localShape)) {\n            intersection = localShape.intersectsWithLineFromCenterToPoint(localRef);\n        }\n        else {\n            intersection = localShape.closestPoint(localRef, pathOptions);\n        }\n    }\n    const cp = intersection\n        ? Util.transformPoint(intersection, targetMatrix)\n        : anchor;\n    let cpOffset = options.offset || 0;\n    if (options.stroked !== false) {\n        if (typeof cpOffset === 'object') {\n            cpOffset = Object.assign({}, cpOffset);\n            if (cpOffset.x == null) {\n                cpOffset.x = 0;\n            }\n            cpOffset.x += getStrokeWidth(node) / 2;\n        }\n        else {\n            cpOffset += getStrokeWidth(node) / 2;\n        }\n    }\n    return offset(cp, line.start, cpOffset);\n};\n//# sourceMappingURL=boundary.js.map","import { offset } from './util';\nfunction alignLine(line, type, offset = 0) {\n    const { start, end } = line;\n    let a;\n    let b;\n    let direction;\n    let coordinate;\n    switch (type) {\n        case 'left':\n            coordinate = 'x';\n            a = end;\n            b = start;\n            direction = -1;\n            break;\n        case 'right':\n            coordinate = 'x';\n            a = start;\n            b = end;\n            direction = 1;\n            break;\n        case 'top':\n            coordinate = 'y';\n            a = end;\n            b = start;\n            direction = -1;\n            break;\n        case 'bottom':\n            coordinate = 'y';\n            a = start;\n            b = end;\n            direction = 1;\n            break;\n        default:\n            return;\n    }\n    if (start[coordinate] < end[coordinate]) {\n        a[coordinate] = b[coordinate];\n    }\n    else {\n        b[coordinate] = a[coordinate];\n    }\n    if (Number.isFinite(offset)) {\n        a[coordinate] += direction * offset;\n        b[coordinate] += direction * offset;\n    }\n}\n/**\n * Places the connection point at the edge's endpoint.\n */\nexport const anchor = function (line, view, magnet, options) {\n    const { alignOffset, align } = options;\n    if (align) {\n        alignLine(line, align, alignOffset);\n    }\n    return offset(line.end, line.start, options.offset);\n};\n//# sourceMappingURL=anchor.js.map","import { Registry } from '../registry';\nimport * as connectionPoints from './main';\nexport var ConnectionPoint;\n(function (ConnectionPoint) {\n    ConnectionPoint.presets = connectionPoints;\n    ConnectionPoint.registry = Registry.create({\n        type: 'connection point',\n    });\n    ConnectionPoint.registry.register(ConnectionPoint.presets, true);\n})(ConnectionPoint || (ConnectionPoint = {}));\n//# sourceMappingURL=index.js.map","export const normal = function (vertices) {\n    return [...vertices];\n};\n//# sourceMappingURL=normal.js.map","import { NumberExt } from '@antv/x6-common';\n/**\n * Routes the edge always to/from a certain side\n */\nexport const oneSide = function (vertices, options, edgeView) {\n    const side = options.side || 'bottom';\n    const padding = NumberExt.normalizeSides(options.padding || 40);\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    const sourcePoint = sourceBBox.getCenter();\n    const targetPoint = targetBBox.getCenter();\n    let coord;\n    let dim;\n    let factor;\n    switch (side) {\n        case 'top':\n            factor = -1;\n            coord = 'y';\n            dim = 'height';\n            break;\n        case 'left':\n            factor = -1;\n            coord = 'x';\n            dim = 'width';\n            break;\n        case 'right':\n            factor = 1;\n            coord = 'x';\n            dim = 'width';\n            break;\n        case 'bottom':\n        default:\n            factor = 1;\n            coord = 'y';\n            dim = 'height';\n            break;\n    }\n    // Move the points from the center of the element to outside of it.\n    sourcePoint[coord] += factor * (sourceBBox[dim] / 2 + padding[side]);\n    targetPoint[coord] += factor * (targetBBox[dim] / 2 + padding[side]);\n    // Make edge orthogonal (at least the first and last vertex).\n    if (factor * (sourcePoint[coord] - targetPoint[coord]) > 0) {\n        targetPoint[coord] = sourcePoint[coord];\n    }\n    else {\n        sourcePoint[coord] = targetPoint[coord];\n    }\n    return [sourcePoint.toJSON(), ...vertices, targetPoint.toJSON()];\n};\n//# sourceMappingURL=oneside.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nexport function getPointBBox(p) {\n    return new Rectangle(p.x, p.y, 0, 0);\n}\nexport function getPaddingBox(options = {}) {\n    const sides = NumberExt.normalizeSides(options.padding || 20);\n    return {\n        x: -sides.left,\n        y: -sides.top,\n        width: sides.left + sides.right,\n        height: sides.top + sides.bottom,\n    };\n}\nexport function getSourceBBox(view, options = {}) {\n    return view.sourceBBox.clone().moveAndExpand(getPaddingBox(options));\n}\nexport function getTargetBBox(view, options = {}) {\n    return view.targetBBox.clone().moveAndExpand(getPaddingBox(options));\n}\nexport function getSourceAnchor(view, options = {}) {\n    if (view.sourceAnchor) {\n        return view.sourceAnchor;\n    }\n    const bbox = getSourceBBox(view, options);\n    return bbox.getCenter();\n}\nexport function getTargetAnchor(view, options = {}) {\n    if (view.targetAnchor) {\n        return view.targetAnchor;\n    }\n    const bbox = getTargetBBox(view, options);\n    return bbox.getCenter();\n}\n//# sourceMappingURL=util.js.map","import { ArrayExt } from '@antv/x6-common';\nimport { Point, Line, Angle } from '@antv/x6-geometry';\nimport * as Util from './util';\n/**\n * Returns a route with orthogonal line segments.\n */\nexport const orth = function (vertices, options, edgeView) {\n    let sourceBBox = Util.getSourceBBox(edgeView, options);\n    let targetBBox = Util.getTargetBBox(edgeView, options);\n    const sourceAnchor = Util.getSourceAnchor(edgeView, options);\n    const targetAnchor = Util.getTargetAnchor(edgeView, options);\n    // If anchor lies outside of bbox, the bbox expands to include it\n    sourceBBox = sourceBBox.union(Util.getPointBBox(sourceAnchor));\n    targetBBox = targetBBox.union(Util.getPointBBox(targetAnchor));\n    const points = vertices.map((p) => Point.create(p));\n    points.unshift(sourceAnchor);\n    points.push(targetAnchor);\n    // bearing of previous route segment\n    let bearing = null;\n    const result = [];\n    for (let i = 0, len = points.length - 1; i < len; i += 1) {\n        let route = null;\n        const from = points[i];\n        const to = points[i + 1];\n        const isOrthogonal = Private.getBearing(from, to) != null;\n        if (i === 0) {\n            // source\n            if (i + 1 === len) {\n                // source -> target\n                // Expand one of the nodes by 1px to detect situations when the two\n                // nodes are positioned next to each other with no gap in between.\n                if (sourceBBox.intersectsWithRect(targetBBox.clone().inflate(1))) {\n                    route = Private.insideNode(from, to, sourceBBox, targetBBox);\n                }\n                else if (!isOrthogonal) {\n                    route = Private.nodeToNode(from, to, sourceBBox, targetBBox);\n                }\n            }\n            else {\n                // source -> vertex\n                if (sourceBBox.containsPoint(to)) {\n                    route = Private.insideNode(from, to, sourceBBox, Util.getPointBBox(to).moveAndExpand(Util.getPaddingBox(options)));\n                }\n                else if (!isOrthogonal) {\n                    route = Private.nodeToVertex(from, to, sourceBBox);\n                }\n            }\n        }\n        else if (i + 1 === len) {\n            // vertex -> target\n            // prevent overlaps with previous line segment\n            const isOrthogonalLoop = isOrthogonal && Private.getBearing(to, from) === bearing;\n            if (targetBBox.containsPoint(from) || isOrthogonalLoop) {\n                route = Private.insideNode(from, to, Util.getPointBBox(from).moveAndExpand(Util.getPaddingBox(options)), targetBBox, bearing);\n            }\n            else if (!isOrthogonal) {\n                route = Private.vertexToNode(from, to, targetBBox, bearing);\n            }\n        }\n        else if (!isOrthogonal) {\n            // vertex -> vertex\n            route = Private.vertexToVertex(from, to, bearing);\n        }\n        // set bearing for next iteration\n        if (route) {\n            result.push(...route.points);\n            bearing = route.direction;\n        }\n        else {\n            // orthogonal route and not looped\n            bearing = Private.getBearing(from, to);\n        }\n        // push `to` point to identified orthogonal vertices array\n        if (i + 1 < len) {\n            result.push(to);\n        }\n    }\n    return result;\n};\nvar Private;\n(function (Private) {\n    /**\n     * Bearing to opposite bearing map\n     */\n    const opposites = {\n        N: 'S',\n        S: 'N',\n        E: 'W',\n        W: 'E',\n    };\n    /**\n     * Bearing to radians map\n     */\n    const radians = {\n        N: (-Math.PI / 2) * 3,\n        S: -Math.PI / 2,\n        E: 0,\n        W: Math.PI,\n    };\n    /**\n     * Returns a point `p` where lines p,p1 and p,p2 are perpendicular\n     * and p is not contained in the given box\n     */\n    function freeJoin(p1, p2, bbox) {\n        let p = new Point(p1.x, p2.y);\n        if (bbox.containsPoint(p)) {\n            p = new Point(p2.x, p1.y);\n        }\n        // kept for reference\n        // if (bbox.containsPoint(p)) {\n        //   return null\n        // }\n        return p;\n    }\n    /**\n     * Returns either width or height of a bbox based on the given bearing.\n     */\n    function getBBoxSize(bbox, bearing) {\n        return bbox[bearing === 'W' || bearing === 'E' ? 'width' : 'height'];\n    }\n    Private.getBBoxSize = getBBoxSize;\n    function getBearing(from, to) {\n        if (from.x === to.x) {\n            return from.y > to.y ? 'N' : 'S';\n        }\n        if (from.y === to.y) {\n            return from.x > to.x ? 'W' : 'E';\n        }\n        return null;\n    }\n    Private.getBearing = getBearing;\n    function vertexToVertex(from, to, bearing) {\n        const p1 = new Point(from.x, to.y);\n        const p2 = new Point(to.x, from.y);\n        const d1 = getBearing(from, p1);\n        const d2 = getBearing(from, p2);\n        const opposite = bearing ? opposites[bearing] : null;\n        const p = d1 === bearing || (d1 !== opposite && (d2 === opposite || d2 !== bearing))\n            ? p1\n            : p2;\n        return { points: [p], direction: getBearing(p, to) };\n    }\n    Private.vertexToVertex = vertexToVertex;\n    function nodeToVertex(from, to, fromBBox) {\n        const p = freeJoin(from, to, fromBBox);\n        return { points: [p], direction: getBearing(p, to) };\n    }\n    Private.nodeToVertex = nodeToVertex;\n    function vertexToNode(from, to, toBBox, bearing) {\n        const points = [new Point(from.x, to.y), new Point(to.x, from.y)];\n        const freePoints = points.filter((p) => !toBBox.containsPoint(p));\n        const freeBearingPoints = freePoints.filter((p) => getBearing(p, from) !== bearing);\n        let p;\n        if (freeBearingPoints.length > 0) {\n            // Try to pick a point which bears the same direction as the previous segment.\n            p = freeBearingPoints.filter((p) => getBearing(from, p) === bearing).pop();\n            p = p || freeBearingPoints[0];\n            return {\n                points: [p],\n                direction: getBearing(p, to),\n            };\n        }\n        {\n            // Here we found only points which are either contained in the element or they would create\n            // a link segment going in opposite direction from the previous one.\n            // We take the point inside element and move it outside the element in the direction the\n            // route is going. Now we can join this point with the current end (using freeJoin).\n            p = ArrayExt.difference(points, freePoints)[0];\n            const p2 = Point.create(to).move(p, -getBBoxSize(toBBox, bearing) / 2);\n            const p1 = freeJoin(p2, from, toBBox);\n            return {\n                points: [p1, p2],\n                direction: getBearing(p2, to),\n            };\n        }\n    }\n    Private.vertexToNode = vertexToNode;\n    function nodeToNode(from, to, fromBBox, toBBox) {\n        let route = nodeToVertex(to, from, toBBox);\n        const p1 = route.points[0];\n        if (fromBBox.containsPoint(p1)) {\n            route = nodeToVertex(from, to, fromBBox);\n            const p2 = route.points[0];\n            if (toBBox.containsPoint(p2)) {\n                const fromBorder = Point.create(from).move(p2, -getBBoxSize(fromBBox, getBearing(from, p2)) / 2);\n                const toBorder = Point.create(to).move(p1, -getBBoxSize(toBBox, getBearing(to, p1)) / 2);\n                const mid = new Line(fromBorder, toBorder).getCenter();\n                const startRoute = nodeToVertex(from, mid, fromBBox);\n                const endRoute = vertexToVertex(mid, to, startRoute.direction);\n                route.points = [startRoute.points[0], endRoute.points[0]];\n                route.direction = endRoute.direction;\n            }\n        }\n        return route;\n    }\n    Private.nodeToNode = nodeToNode;\n    // Finds route for situations where one node is inside the other.\n    // Typically the route is directed outside the outer node first and\n    // then back towards the inner node.\n    function insideNode(from, to, fromBBox, toBBox, bearing) {\n        const boundary = fromBBox.union(toBBox).inflate(1);\n        // start from the point which is closer to the boundary\n        const center = boundary.getCenter();\n        const reversed = center.distance(to) > center.distance(from);\n        const start = reversed ? to : from;\n        const end = reversed ? from : to;\n        let p1;\n        let p2;\n        let p3;\n        if (bearing) {\n            // Points on circle with radius equals 'W + H` are always outside the rectangle\n            // with width W and height H if the center of that circle is the center of that rectangle.\n            p1 = Point.fromPolar(boundary.width + boundary.height, radians[bearing], start);\n            p1 = boundary.getNearestPointToPoint(p1).move(p1, -1);\n        }\n        else {\n            p1 = boundary.getNearestPointToPoint(start).move(start, 1);\n        }\n        p2 = freeJoin(p1, end, boundary);\n        let points;\n        if (p1.round().equals(p2.round())) {\n            p2 = Point.fromPolar(boundary.width + boundary.height, Angle.toRad(p1.theta(start)) + Math.PI / 2, end);\n            p2 = boundary.getNearestPointToPoint(p2).move(end, 1).round();\n            p3 = freeJoin(p1, p2, boundary);\n            points = reversed ? [p2, p3, p1] : [p1, p3, p2];\n        }\n        else {\n            points = reversed ? [p2, p1] : [p1, p2];\n        }\n        const direction = reversed ? getBearing(p1, to) : getBearing(p2, to);\n        return {\n            points,\n            direction,\n        };\n    }\n    Private.insideNode = insideNode;\n})(Private || (Private = {}));\n//# sourceMappingURL=orth.js.map","import { NumberExt } from '@antv/x6-common';\nimport { Point, Angle } from '@antv/x6-geometry';\nimport { orth } from '../orth';\nexport const defaults = {\n    step: 10,\n    maxLoopCount: 2000,\n    precision: 1,\n    maxDirectionChange: 90,\n    perpendicular: true,\n    excludeTerminals: [],\n    excludeNodes: [],\n    excludeShapes: [],\n    startDirections: ['top', 'right', 'bottom', 'left'],\n    endDirections: ['top', 'right', 'bottom', 'left'],\n    directionMap: {\n        top: { x: 0, y: -1 },\n        right: { x: 1, y: 0 },\n        bottom: { x: 0, y: 1 },\n        left: { x: -1, y: 0 },\n    },\n    cost() {\n        const step = resolve(this.step, this);\n        return step;\n    },\n    directions() {\n        const step = resolve(this.step, this);\n        const cost = resolve(this.cost, this);\n        return [\n            { cost, offsetX: step, offsetY: 0 },\n            { cost, offsetX: -step, offsetY: 0 },\n            { cost, offsetX: 0, offsetY: step },\n            { cost, offsetX: 0, offsetY: -step },\n        ];\n    },\n    penalties() {\n        const step = resolve(this.step, this);\n        return {\n            0: 0,\n            45: step / 2,\n            90: step / 2,\n        };\n    },\n    paddingBox() {\n        const step = resolve(this.step, this);\n        return {\n            x: -step,\n            y: -step,\n            width: 2 * step,\n            height: 2 * step,\n        };\n    },\n    fallbackRouter: orth,\n    draggingRouter: null,\n    snapToGrid: true,\n};\nexport function resolve(input, options) {\n    if (typeof input === 'function') {\n        return input.call(options);\n    }\n    return input;\n}\nexport function resolveOptions(options) {\n    const result = Object.keys(options).reduce((memo, key) => {\n        const ret = memo;\n        if (key === 'fallbackRouter' ||\n            key === 'draggingRouter' ||\n            key === 'fallbackRoute') {\n            ret[key] = options[key];\n        }\n        else {\n            ret[key] = resolve(options[key], options);\n        }\n        return memo;\n    }, {});\n    if (result.padding) {\n        const sides = NumberExt.normalizeSides(result.padding);\n        result.paddingBox = {\n            x: -sides.left,\n            y: -sides.top,\n            width: sides.left + sides.right,\n            height: sides.top + sides.bottom,\n        };\n    }\n    result.directions.forEach((direction) => {\n        const point1 = new Point(0, 0);\n        const point2 = new Point(direction.offsetX, direction.offsetY);\n        direction.angle = Angle.normalize(point1.theta(point2));\n    });\n    return result;\n}\n//# sourceMappingURL=options.js.map","import { ArrayExt } from '@antv/x6-common';\nconst OPEN = 1;\nconst CLOSE = 2;\nexport class SortedSet {\n    constructor() {\n        this.items = [];\n        this.hash = {};\n        this.values = {};\n    }\n    add(item, value) {\n        if (this.hash[item]) {\n            // item removal\n            this.items.splice(this.items.indexOf(item), 1);\n        }\n        else {\n            this.hash[item] = OPEN;\n        }\n        this.values[item] = value;\n        const index = ArrayExt.sortedIndexBy(this.items, item, (key) => this.values[key]);\n        this.items.splice(index, 0, item);\n    }\n    pop() {\n        const item = this.items.shift();\n        if (item) {\n            this.hash[item] = CLOSE;\n        }\n        return item;\n    }\n    isOpen(item) {\n        return this.hash[item] === OPEN;\n    }\n    isClose(item) {\n        return this.hash[item] === CLOSE;\n    }\n    isEmpty() {\n        return this.items.length === 0;\n    }\n}\n//# sourceMappingURL=sorted-set.js.map","import { ArrayExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\n/**\n * Helper structure to identify whether a point lies inside an obstacle.\n */\nexport class ObstacleMap {\n    constructor(options) {\n        this.options = options;\n        this.mapGridSize = 100;\n        this.map = {};\n    }\n    /**\n     * Builds a map of all nodes for quicker obstacle queries i.e. is a point\n     * contained in any obstacle?\n     *\n     * A simplified grid search.\n     */\n    build(model, edge) {\n        const options = this.options;\n        // source or target node could be excluded from set of obstacles\n        const excludedTerminals = options.excludeTerminals.reduce((memo, type) => {\n            const terminal = edge[type];\n            if (terminal) {\n                const cell = model.getCell(terminal.cell);\n                if (cell) {\n                    memo.push(cell);\n                }\n            }\n            return memo;\n        }, []);\n        let excludedAncestors = [];\n        const source = model.getCell(edge.getSourceCellId());\n        if (source) {\n            excludedAncestors = ArrayExt.union(excludedAncestors, source.getAncestors().map((cell) => cell.id));\n        }\n        const target = model.getCell(edge.getTargetCellId());\n        if (target) {\n            excludedAncestors = ArrayExt.union(excludedAncestors, target.getAncestors().map((cell) => cell.id));\n        }\n        // The graph is divided into smaller cells, where each holds information\n        // about which node belong to it. When we query whether a point lies\n        // inside an obstacle we don't need to go through all obstacles, we check\n        // only those in a particular cell.\n        const mapGridSize = this.mapGridSize;\n        model.getNodes().reduce((map, node) => {\n            const excludedTerminal = excludedTerminals.some((cell) => cell.id === node.id);\n            const excludedShape = node.shape\n                ? options.excludeShapes.includes(node.shape)\n                : false;\n            const excludedNode = options.excludeNodes.some((item) => {\n                if (typeof item === 'string') {\n                    return node.id === item;\n                }\n                return item === node;\n            });\n            const excludedAncestor = excludedAncestors.includes(node.id);\n            const excluded = excludedShape || excludedTerminal || excludedNode || excludedAncestor;\n            if (!excluded) {\n                const bbox = node.getBBox().moveAndExpand(options.paddingBox);\n                const origin = bbox.getOrigin().snapToGrid(mapGridSize);\n                const corner = bbox.getCorner().snapToGrid(mapGridSize);\n                for (let x = origin.x; x <= corner.x; x += mapGridSize) {\n                    for (let y = origin.y; y <= corner.y; y += mapGridSize) {\n                        const key = new Point(x, y).toString();\n                        if (map[key] == null) {\n                            map[key] = [];\n                        }\n                        map[key].push(bbox);\n                    }\n                }\n            }\n            return map;\n        }, this.map);\n        return this;\n    }\n    isAccessible(point) {\n        const key = point.clone().snapToGrid(this.mapGridSize).toString();\n        const rects = this.map[key];\n        return rects ? rects.every((rect) => !rect.containsPoint(point)) : true;\n    }\n}\n//# sourceMappingURL=obstacle-map.js.map","import { Point, Line, Angle, GeometryUtil } from '@antv/x6-geometry';\nexport function getSourceBBox(view, options) {\n    const bbox = view.sourceBBox.clone();\n    if (options && options.paddingBox) {\n        return bbox.moveAndExpand(options.paddingBox);\n    }\n    return bbox;\n}\nexport function getTargetBBox(view, options) {\n    const bbox = view.targetBBox.clone();\n    if (options && options.paddingBox) {\n        return bbox.moveAndExpand(options.paddingBox);\n    }\n    return bbox;\n}\nexport function getSourceEndpoint(view, options) {\n    if (view.sourceAnchor) {\n        return view.sourceAnchor;\n    }\n    const sourceBBox = getSourceBBox(view, options);\n    return sourceBBox.getCenter();\n}\nexport function getTargetEndpoint(view, options) {\n    if (view.targetAnchor) {\n        return view.targetAnchor;\n    }\n    const targetBBox = getTargetBBox(view, options);\n    return targetBBox.getCenter();\n}\n// returns a direction index from start point to end point\n// corrects for grid deformation between start and end\nexport function getDirectionAngle(start, end, directionCount, grid, options) {\n    const quadrant = 360 / directionCount;\n    const angleTheta = start.theta(fixAngleEnd(start, end, grid, options));\n    const normalizedAngle = Angle.normalize(angleTheta + quadrant / 2);\n    return quadrant * Math.floor(normalizedAngle / quadrant);\n}\nfunction fixAngleEnd(start, end, grid, options) {\n    const step = options.step;\n    const diffX = end.x - start.x;\n    const diffY = end.y - start.y;\n    const gridStepsX = diffX / grid.x;\n    const gridStepsY = diffY / grid.y;\n    const distanceX = gridStepsX * step;\n    const distanceY = gridStepsY * step;\n    return new Point(start.x + distanceX, start.y + distanceY);\n}\n/**\n * Returns the change in direction between two direction angles.\n */\nexport function getDirectionChange(angle1, angle2) {\n    const change = Math.abs(angle1 - angle2);\n    return change > 180 ? 360 - change : change;\n}\n// fix direction offsets according to current grid\nexport function getGridOffsets(grid, options) {\n    const step = options.step;\n    options.directions.forEach((direction) => {\n        direction.gridOffsetX = (direction.offsetX / step) * grid.x;\n        direction.gridOffsetY = (direction.offsetY / step) * grid.y;\n    });\n    return options.directions;\n}\n// get grid size in x and y dimensions, adapted to source and target positions\nexport function getGrid(step, source, target) {\n    return {\n        source: source.clone(),\n        x: getGridDimension(target.x - source.x, step),\n        y: getGridDimension(target.y - source.y, step),\n    };\n}\nfunction getGridDimension(diff, step) {\n    // return step if diff = 0\n    if (!diff) {\n        return step;\n    }\n    const abs = Math.abs(diff);\n    const count = Math.round(abs / step);\n    // return `abs` if less than one step apart\n    if (!count) {\n        return abs;\n    }\n    // otherwise, return corrected step\n    const roundedDiff = count * step;\n    const remainder = abs - roundedDiff;\n    const correction = remainder / count;\n    return step + correction;\n}\nfunction snapGrid(point, grid) {\n    const source = grid.source;\n    const x = GeometryUtil.snapToGrid(point.x - source.x, grid.x) + source.x;\n    const y = GeometryUtil.snapToGrid(point.y - source.y, grid.y) + source.y;\n    return new Point(x, y);\n}\nexport function round(point, precision) {\n    return point.round(precision);\n}\nexport function align(point, grid, precision) {\n    return round(snapGrid(point.clone(), grid), precision);\n}\nexport function getKey(point) {\n    return point.toString();\n}\nexport function normalizePoint(point) {\n    return new Point(point.x === 0 ? 0 : Math.abs(point.x) / point.x, point.y === 0 ? 0 : Math.abs(point.y) / point.y);\n}\nexport function getCost(from, anchors) {\n    let min = Infinity;\n    for (let i = 0, len = anchors.length; i < len; i += 1) {\n        const dist = from.manhattanDistance(anchors[i]);\n        if (dist < min) {\n            min = dist;\n        }\n    }\n    return min;\n}\n// Find points around the bbox taking given directions into account\n// lines are drawn from anchor in given directions, intersections recorded\n// if anchor is outside bbox, only those directions that intersect get a rect point\n// the anchor itself is returned as rect point (representing some directions)\n// (since those directions are unobstructed by the bbox)\nexport function getRectPoints(anchor, bbox, directionList, grid, options) {\n    const precision = options.precision;\n    const directionMap = options.directionMap;\n    const centerVector = anchor.diff(bbox.getCenter());\n    const rectPoints = Object.keys(directionMap).reduce((res, key) => {\n        if (directionList.includes(key)) {\n            const direction = directionMap[key];\n            // Create a line that is guaranteed to intersect the bbox if bbox\n            // is in the direction even if anchor lies outside of bbox.\n            const ending = new Point(anchor.x + direction.x * (Math.abs(centerVector.x) + bbox.width), anchor.y + direction.y * (Math.abs(centerVector.y) + bbox.height));\n            const intersectionLine = new Line(anchor, ending);\n            // Get the farther intersection, in case there are two\n            // (that happens if anchor lies next to bbox)\n            const intersections = intersectionLine.intersect(bbox) || [];\n            let farthestIntersectionDistance;\n            let farthestIntersection = null;\n            for (let i = 0; i < intersections.length; i += 1) {\n                const intersection = intersections[i];\n                const distance = anchor.squaredDistance(intersection);\n                if (farthestIntersectionDistance == null ||\n                    distance > farthestIntersectionDistance) {\n                    farthestIntersectionDistance = distance;\n                    farthestIntersection = intersection;\n                }\n            }\n            // If an intersection was found in this direction, it is our rectPoint\n            if (farthestIntersection) {\n                let target = align(farthestIntersection, grid, precision);\n                // If the rectPoint lies inside the bbox, offset it by one more step\n                if (bbox.containsPoint(target)) {\n                    target = align(target.translate(direction.x * grid.x, direction.y * grid.y), grid, precision);\n                }\n                res.push(target);\n            }\n        }\n        return res;\n    }, []);\n    // if anchor lies outside of bbox, add it to the array of points\n    if (!bbox.containsPoint(anchor)) {\n        rectPoints.push(align(anchor, grid, precision));\n    }\n    return rectPoints;\n}\n// reconstructs a route by concatenating points with their parents\nexport function reconstructRoute(parents, points, tailPoint, from, to) {\n    const route = [];\n    let prevDiff = normalizePoint(to.diff(tailPoint));\n    // tailPoint is assumed to be aligned already\n    let currentKey = getKey(tailPoint);\n    let parent = parents[currentKey];\n    let point;\n    while (parent) {\n        // point is assumed to be aligned already\n        point = points[currentKey];\n        const diff = normalizePoint(point.diff(parent));\n        if (!diff.equals(prevDiff)) {\n            route.unshift(point);\n            prevDiff = diff;\n        }\n        // parent is assumed to be aligned already\n        currentKey = getKey(parent);\n        parent = parents[currentKey];\n    }\n    // leadPoint is assumed to be aligned already\n    const leadPoint = points[currentKey];\n    const fromDiff = normalizePoint(leadPoint.diff(from));\n    if (!fromDiff.equals(prevDiff)) {\n        route.unshift(leadPoint);\n    }\n    return route;\n}\n//# sourceMappingURL=util.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { SortedSet } from './sorted-set';\nimport { ObstacleMap } from './obstacle-map';\nimport * as util from './util';\nimport { resolveOptions, } from './options';\n/**\n * Finds the route between two points (`from`, `to`).\n */\nfunction findRoute(edgeView, from, to, map, options) {\n    const precision = options.precision;\n    let sourceEndpoint;\n    let targetEndpoint;\n    if (Rectangle.isRectangle(from)) {\n        sourceEndpoint = util.round(util.getSourceEndpoint(edgeView, options).clone(), precision);\n    }\n    else {\n        sourceEndpoint = util.round(from.clone(), precision);\n    }\n    if (Rectangle.isRectangle(to)) {\n        targetEndpoint = util.round(util.getTargetEndpoint(edgeView, options).clone(), precision);\n    }\n    else {\n        targetEndpoint = util.round(to.clone(), precision);\n    }\n    // Get grid for this route.\n    const grid = util.getGrid(options.step, sourceEndpoint, targetEndpoint);\n    // Get pathfinding points.\n    // -----------------------\n    const startPoint = sourceEndpoint;\n    const endPoint = targetEndpoint;\n    let startPoints;\n    let endPoints;\n    if (Rectangle.isRectangle(from)) {\n        startPoints = util.getRectPoints(startPoint, from, options.startDirections, grid, options);\n    }\n    else {\n        startPoints = [startPoint];\n    }\n    if (Rectangle.isRectangle(to)) {\n        endPoints = util.getRectPoints(targetEndpoint, to, options.endDirections, grid, options);\n    }\n    else {\n        endPoints = [endPoint];\n    }\n    // take into account only accessible rect points (those not under obstacles)\n    startPoints = startPoints.filter((p) => map.isAccessible(p));\n    endPoints = endPoints.filter((p) => map.isAccessible(p));\n    // There is an accessible route point on both sides.\n    if (startPoints.length > 0 && endPoints.length > 0) {\n        const openSet = new SortedSet();\n        // Keeps the actual points for given nodes of the open set.\n        const points = {};\n        // Keeps the point that is immediate predecessor of given element.\n        const parents = {};\n        // Cost from start to a point along best known path.\n        const costs = {};\n        for (let i = 0, n = startPoints.length; i < n; i += 1) {\n            // startPoint is assumed to be aligned already\n            const startPoint = startPoints[i];\n            const key = util.getKey(startPoint);\n            openSet.add(key, util.getCost(startPoint, endPoints));\n            points[key] = startPoint;\n            costs[key] = 0;\n        }\n        const previousRouteDirectionAngle = options.previousDirectionAngle;\n        // undefined for first route\n        const isPathBeginning = previousRouteDirectionAngle === undefined;\n        // directions\n        let direction;\n        let directionChange;\n        const directions = util.getGridOffsets(grid, options);\n        const numDirections = directions.length;\n        const endPointsKeys = endPoints.reduce((res, endPoint) => {\n            const key = util.getKey(endPoint);\n            res.push(key);\n            return res;\n        }, []);\n        // main route finding loop\n        const sameStartEndPoints = Point.equalPoints(startPoints, endPoints);\n        let loopsRemaining = options.maxLoopCount;\n        while (!openSet.isEmpty() && loopsRemaining > 0) {\n            // Get the closest item and mark it CLOSED\n            const currentKey = openSet.pop();\n            const currentPoint = points[currentKey];\n            const currentParent = parents[currentKey];\n            const currentCost = costs[currentKey];\n            const isStartPoint = currentPoint.equals(startPoint);\n            const isRouteBeginning = currentParent == null;\n            let previousDirectionAngle;\n            if (!isRouteBeginning) {\n                previousDirectionAngle = util.getDirectionAngle(currentParent, currentPoint, numDirections, grid, options);\n            }\n            else if (!isPathBeginning) {\n                // a vertex on the route\n                previousDirectionAngle = previousRouteDirectionAngle;\n            }\n            else if (!isStartPoint) {\n                // beginning of route on the path\n                previousDirectionAngle = util.getDirectionAngle(startPoint, currentPoint, numDirections, grid, options);\n            }\n            else {\n                previousDirectionAngle = null;\n            }\n            // Check if we reached any endpoint\n            const skipEndCheck = isRouteBeginning && sameStartEndPoints;\n            if (!skipEndCheck && endPointsKeys.indexOf(currentKey) >= 0) {\n                options.previousDirectionAngle = previousDirectionAngle;\n                return util.reconstructRoute(parents, points, currentPoint, startPoint, endPoint);\n            }\n            // Go over all possible directions and find neighbors\n            for (let i = 0; i < numDirections; i += 1) {\n                direction = directions[i];\n                const directionAngle = direction.angle;\n                directionChange = util.getDirectionChange(previousDirectionAngle, directionAngle);\n                // Don't use the point changed rapidly.\n                if (!(isPathBeginning && isStartPoint) &&\n                    directionChange > options.maxDirectionChange) {\n                    continue;\n                }\n                const neighborPoint = util.align(currentPoint\n                    .clone()\n                    .translate(direction.gridOffsetX || 0, direction.gridOffsetY || 0), grid, precision);\n                const neighborKey = util.getKey(neighborPoint);\n                // Closed points were already evaluated.\n                if (openSet.isClose(neighborKey) || !map.isAccessible(neighborPoint)) {\n                    continue;\n                }\n                // Neighbor is an end point.\n                if (endPointsKeys.indexOf(neighborKey) >= 0) {\n                    const isEndPoint = neighborPoint.equals(endPoint);\n                    if (!isEndPoint) {\n                        const endDirectionAngle = util.getDirectionAngle(neighborPoint, endPoint, numDirections, grid, options);\n                        const endDirectionChange = util.getDirectionChange(directionAngle, endDirectionAngle);\n                        if (endDirectionChange > options.maxDirectionChange) {\n                            continue;\n                        }\n                    }\n                }\n                // The current direction is ok.\n                // ----------------------------\n                const neighborCost = direction.cost;\n                const neighborPenalty = isStartPoint\n                    ? 0\n                    : options.penalties[directionChange];\n                const costFromStart = currentCost + neighborCost + neighborPenalty;\n                // Neighbor point has not been processed yet or the cost of\n                // the path from start is lower than previously calculated.\n                if (!openSet.isOpen(neighborKey) ||\n                    costFromStart < costs[neighborKey]) {\n                    points[neighborKey] = neighborPoint;\n                    parents[neighborKey] = currentPoint;\n                    costs[neighborKey] = costFromStart;\n                    openSet.add(neighborKey, costFromStart + util.getCost(neighborPoint, endPoints));\n                }\n            }\n            loopsRemaining -= 1;\n        }\n    }\n    if (options.fallbackRoute) {\n        return FunctionExt.call(options.fallbackRoute, this, startPoint, endPoint, options);\n    }\n    return null;\n}\nfunction snap(vertices, gridSize = 10) {\n    if (vertices.length <= 1) {\n        return vertices;\n    }\n    for (let i = 0, len = vertices.length; i < len - 1; i += 1) {\n        const first = vertices[i];\n        const second = vertices[i + 1];\n        if (first.x === second.x) {\n            const x = gridSize * Math.round(first.x / gridSize);\n            if (first.x !== x) {\n                first.x = x;\n                second.x = x;\n            }\n        }\n        else if (first.y === second.y) {\n            const y = gridSize * Math.round(first.y / gridSize);\n            if (first.y !== y) {\n                first.y = y;\n                second.y = y;\n            }\n        }\n    }\n    return vertices;\n}\nexport const router = function (vertices, optionsRaw, edgeView) {\n    const options = resolveOptions(optionsRaw);\n    const sourceBBox = util.getSourceBBox(edgeView, options);\n    const targetBBox = util.getTargetBBox(edgeView, options);\n    const sourceEndpoint = util.getSourceEndpoint(edgeView, options);\n    // pathfinding\n    const map = new ObstacleMap(options).build(edgeView.graph.model, edgeView.cell);\n    const oldVertices = vertices.map((p) => Point.create(p));\n    const newVertices = [];\n    // The origin of first route's grid, does not need snapping\n    let tailPoint = sourceEndpoint;\n    let from;\n    let to;\n    for (let i = 0, len = oldVertices.length; i <= len; i += 1) {\n        let partialRoute = null;\n        from = to || sourceBBox;\n        to = oldVertices[i];\n        // This is the last iteration\n        if (to == null) {\n            to = targetBBox;\n            // If the target is a point, we should use dragging route\n            // instead of main routing method if it has been provided.\n            const edge = edgeView.cell;\n            const isEndingAtPoint = edge.getSourceCellId() == null || edge.getTargetCellId() == null;\n            if (isEndingAtPoint && typeof options.draggingRouter === 'function') {\n                const dragFrom = from === sourceBBox ? sourceEndpoint : from;\n                const dragTo = to.getOrigin();\n                partialRoute = FunctionExt.call(options.draggingRouter, edgeView, dragFrom, dragTo, options);\n            }\n        }\n        // Find the partial route\n        if (partialRoute == null) {\n            partialRoute = findRoute(edgeView, from, to, map, options);\n        }\n        // Cannot found the partial route.\n        if (partialRoute === null) {\n            // eslint-next-line\n            console.warn(`Unable to execute manhattan algorithm, use orth instead`);\n            return FunctionExt.call(options.fallbackRouter, this, vertices, options, edgeView);\n        }\n        // Remove the first point if the previous partial route has\n        // the same point as last.\n        const leadPoint = partialRoute[0];\n        if (leadPoint && leadPoint.equals(tailPoint)) {\n            partialRoute.shift();\n        }\n        // Save tailPoint for next iteration\n        tailPoint = partialRoute[partialRoute.length - 1] || tailPoint;\n        newVertices.push(...partialRoute);\n    }\n    if (options.snapToGrid) {\n        return snap(newVertices, edgeView.graph.grid.getGridSize());\n    }\n    return newVertices;\n};\n//# sourceMappingURL=router.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { router } from './router';\nimport { defaults } from './options';\nexport const manhattan = function (vertices, options, edgeView) {\n    return FunctionExt.call(router, this, vertices, Object.assign(Object.assign({}, defaults), options), edgeView);\n};\n//# sourceMappingURL=index.js.map","import { FunctionExt } from '@antv/x6-common';\nimport { Point, Line, Angle } from '@antv/x6-geometry';\nimport { resolve } from './manhattan/options';\nimport { manhattan } from './manhattan/index';\nconst defaults = {\n    maxDirectionChange: 45,\n    // an array of directions to find next points on the route\n    // different from start/end directions\n    directions() {\n        const step = resolve(this.step, this);\n        const cost = resolve(this.cost, this);\n        const diagonalCost = Math.ceil(Math.sqrt((step * step) << 1)); // eslint-disable-line no-bitwise\n        return [\n            { cost, offsetX: step, offsetY: 0 },\n            { cost: diagonalCost, offsetX: step, offsetY: step },\n            { cost, offsetX: 0, offsetY: step },\n            { cost: diagonalCost, offsetX: -step, offsetY: step },\n            { cost, offsetX: -step, offsetY: 0 },\n            { cost: diagonalCost, offsetX: -step, offsetY: -step },\n            { cost, offsetX: 0, offsetY: -step },\n            { cost: diagonalCost, offsetX: step, offsetY: -step },\n        ];\n    },\n    // a simple route used in situations when main routing method fails\n    // (exceed max number of loop iterations, inaccessible)\n    fallbackRoute(from, to, options) {\n        // Find a route which breaks by 45 degrees ignoring all obstacles.\n        const theta = from.theta(to);\n        const route = [];\n        let a = { x: to.x, y: from.y };\n        let b = { x: from.x, y: to.y };\n        if (theta % 180 > 90) {\n            const t = a;\n            a = b;\n            b = t;\n        }\n        const p1 = theta % 90 < 45 ? a : b;\n        const l1 = new Line(from, p1);\n        const alpha = 90 * Math.ceil(theta / 90);\n        const p2 = Point.fromPolar(l1.squaredLength(), Angle.toRad(alpha + 135), p1);\n        const l2 = new Line(to, p2);\n        const intersectionPoint = l1.intersectsWithLine(l2);\n        const point = intersectionPoint || to;\n        const directionFrom = intersectionPoint ? point : from;\n        const quadrant = 360 / options.directions.length;\n        const angleTheta = directionFrom.theta(to);\n        const normalizedAngle = Angle.normalize(angleTheta + quadrant / 2);\n        const directionAngle = quadrant * Math.floor(normalizedAngle / quadrant);\n        options.previousDirectionAngle = directionAngle;\n        if (point)\n            route.push(point.round());\n        route.push(to);\n        return route;\n    },\n};\nexport const metro = function (vertices, options, linkView) {\n    return FunctionExt.call(manhattan, this, vertices, Object.assign(Object.assign({}, defaults), options), linkView);\n};\n//# sourceMappingURL=metro.js.map","export const er = function (vertices, options, edgeView) {\n    const offsetRaw = options.offset || 32;\n    const min = options.min == null ? 16 : options.min;\n    let offset = 0;\n    let direction = options.direction;\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    const sourcePoint = sourceBBox.getCenter();\n    const targetPoint = targetBBox.getCenter();\n    if (typeof offsetRaw === 'number') {\n        offset = offsetRaw;\n    }\n    if (direction == null) {\n        let dx = targetBBox.left - sourceBBox.right;\n        let dy = targetBBox.top - sourceBBox.bottom;\n        if (dx >= 0 && dy >= 0) {\n            direction = dx >= dy ? 'L' : 'T';\n        }\n        else if (dx <= 0 && dy >= 0) {\n            dx = sourceBBox.left - targetBBox.right;\n            if (dx >= 0) {\n                direction = dx >= dy ? 'R' : 'T';\n            }\n            else {\n                direction = 'T';\n            }\n        }\n        else if (dx >= 0 && dy <= 0) {\n            dy = sourceBBox.top - targetBBox.bottom;\n            if (dy >= 0) {\n                direction = dx >= dy ? 'L' : 'B';\n            }\n            else {\n                direction = 'L';\n            }\n        }\n        else {\n            dx = sourceBBox.left - targetBBox.right;\n            dy = sourceBBox.top - targetBBox.bottom;\n            if (dx >= 0 && dy >= 0) {\n                direction = dx >= dy ? 'R' : 'B';\n            }\n            else if (dx <= 0 && dy >= 0) {\n                direction = 'B';\n            }\n            else if (dx >= 0 && dy <= 0) {\n                direction = 'R';\n            }\n            else {\n                direction = Math.abs(dx) > Math.abs(dy) ? 'R' : 'B';\n            }\n        }\n    }\n    if (direction === 'H') {\n        direction = targetPoint.x - sourcePoint.x >= 0 ? 'L' : 'R';\n    }\n    else if (direction === 'V') {\n        direction = targetPoint.y - sourcePoint.y >= 0 ? 'T' : 'B';\n    }\n    if (offsetRaw === 'center') {\n        if (direction === 'L') {\n            offset = (targetBBox.left - sourceBBox.right) / 2;\n        }\n        else if (direction === 'R') {\n            offset = (sourceBBox.left - targetBBox.right) / 2;\n        }\n        else if (direction === 'T') {\n            offset = (targetBBox.top - sourceBBox.bottom) / 2;\n        }\n        else if (direction === 'B') {\n            offset = (sourceBBox.top - targetBBox.bottom) / 2;\n        }\n    }\n    let coord;\n    let dim;\n    let factor;\n    const horizontal = direction === 'L' || direction === 'R';\n    if (horizontal) {\n        if (targetPoint.y === sourcePoint.y) {\n            return [...vertices];\n        }\n        factor = direction === 'L' ? 1 : -1;\n        coord = 'x';\n        dim = 'width';\n    }\n    else {\n        if (targetPoint.x === sourcePoint.x) {\n            return [...vertices];\n        }\n        factor = direction === 'T' ? 1 : -1;\n        coord = 'y';\n        dim = 'height';\n    }\n    const source = sourcePoint.clone();\n    const target = targetPoint.clone();\n    source[coord] += factor * (sourceBBox[dim] / 2 + offset);\n    target[coord] -= factor * (targetBBox[dim] / 2 + offset);\n    if (horizontal) {\n        const sourceX = source.x;\n        const targetX = target.x;\n        const sourceDelta = sourceBBox.width / 2 + min;\n        const targetDelta = targetBBox.width / 2 + min;\n        if (targetPoint.x > sourcePoint.x) {\n            if (targetX <= sourceX) {\n                source.x = Math.max(targetX, sourcePoint.x + sourceDelta);\n                target.x = Math.min(sourceX, targetPoint.x - targetDelta);\n            }\n        }\n        else if (targetX >= sourceX) {\n            source.x = Math.min(targetX, sourcePoint.x - sourceDelta);\n            target.x = Math.max(sourceX, targetPoint.x + targetDelta);\n        }\n    }\n    else {\n        const sourceY = source.y;\n        const targetY = target.y;\n        const sourceDelta = sourceBBox.height / 2 + min;\n        const targetDelta = targetBBox.height / 2 + min;\n        if (targetPoint.y > sourcePoint.y) {\n            if (targetY <= sourceY) {\n                source.y = Math.max(targetY, sourcePoint.y + sourceDelta);\n                target.y = Math.min(sourceY, targetPoint.y - targetDelta);\n            }\n        }\n        else if (targetY >= sourceY) {\n            source.y = Math.min(targetY, sourcePoint.y - sourceDelta);\n            target.y = Math.max(sourceY, targetPoint.y + targetDelta);\n        }\n    }\n    return [source.toJSON(), ...vertices, target.toJSON()];\n};\n//# sourceMappingURL=er.js.map","import { Angle, Point, Line } from '@antv/x6-geometry';\nfunction rollup(points, merge) {\n    if (merge != null && merge !== false) {\n        const amount = typeof merge === 'boolean' ? 0 : merge;\n        if (amount > 0) {\n            const center1 = Point.create(points[1]).move(points[2], amount);\n            const center2 = Point.create(points[1]).move(points[0], amount);\n            return [center1.toJSON(), ...points, center2.toJSON()];\n        }\n        {\n            const center = points[1];\n            return [Object.assign({}, center), ...points, Object.assign({}, center)];\n        }\n    }\n    return points;\n}\nexport const loop = function (vertices, options, edgeView) {\n    const width = options.width || 50;\n    const height = options.height || 80;\n    const halfHeight = height / 2;\n    const angle = options.angle || 'auto';\n    const sourceAnchor = edgeView.sourceAnchor;\n    const targetAnchor = edgeView.targetAnchor;\n    const sourceBBox = edgeView.sourceBBox;\n    const targetBBox = edgeView.targetBBox;\n    if (sourceAnchor.equals(targetAnchor)) {\n        const getVertices = (angle) => {\n            const rad = Angle.toRad(angle);\n            const sin = Math.sin(rad);\n            const cos = Math.cos(rad);\n            const center = new Point(sourceAnchor.x + cos * width, sourceAnchor.y + sin * width);\n            const ref = new Point(center.x - cos * halfHeight, center.y - sin * halfHeight);\n            const p1 = ref.clone().rotate(-90, center);\n            const p2 = ref.clone().rotate(90, center);\n            return [p1.toJSON(), center.toJSON(), p2.toJSON()];\n        };\n        const validate = (end) => {\n            const start = sourceAnchor.clone().move(end, -1);\n            const line = new Line(start, end);\n            return (!sourceBBox.containsPoint(end) && !sourceBBox.intersectsWithLine(line));\n        };\n        const angles = [0, 90, 180, 270, 45, 135, 225, 315];\n        if (typeof angle === 'number') {\n            return rollup(getVertices(angle), options.merge);\n        }\n        const center = sourceBBox.getCenter();\n        if (center.equals(sourceAnchor)) {\n            return rollup(getVertices(0), options.merge);\n        }\n        const deg = center.angleBetween(sourceAnchor, center.clone().translate(1, 0));\n        let ret = getVertices(deg);\n        if (validate(ret[1])) {\n            return rollup(ret, options.merge);\n        }\n        // return the best vertices\n        for (let i = 1, l = angles.length; i < l; i += 1) {\n            ret = getVertices(deg + angles[i]);\n            if (validate(ret[1])) {\n                return rollup(ret, options.merge);\n            }\n        }\n        return rollup(ret, options.merge);\n    }\n    {\n        const line = new Line(sourceAnchor, targetAnchor);\n        let parallel = line.parallel(-width);\n        let center = parallel.getCenter();\n        let p1 = parallel.start.clone().move(parallel.end, halfHeight);\n        let p2 = parallel.end.clone().move(parallel.start, halfHeight);\n        const ref = line.parallel(-1);\n        const line1 = new Line(ref.start, center);\n        const line2 = new Line(ref.end, center);\n        if (sourceBBox.containsPoint(center) ||\n            targetBBox.containsPoint(center) ||\n            sourceBBox.intersectsWithLine(line1) ||\n            sourceBBox.intersectsWithLine(line2) ||\n            targetBBox.intersectsWithLine(line1) ||\n            targetBBox.intersectsWithLine(line2)) {\n            parallel = line.parallel(width);\n            center = parallel.getCenter();\n            p1 = parallel.start.clone().move(parallel.end, halfHeight);\n            p2 = parallel.end.clone().move(parallel.start, halfHeight);\n        }\n        if (options.merge) {\n            const line = new Line(sourceAnchor, targetAnchor);\n            const normal = new Line(center, line.center).setLength(Number.MAX_SAFE_INTEGER);\n            const intersects1 = sourceBBox.intersectsWithLine(normal);\n            const intersects2 = targetBBox.intersectsWithLine(normal);\n            const intersects = intersects1\n                ? Array.isArray(intersects1)\n                    ? intersects1\n                    : [intersects1]\n                : [];\n            if (intersects2) {\n                if (Array.isArray(intersects2)) {\n                    intersects.push(...intersects2);\n                }\n                else {\n                    intersects.push(intersects2);\n                }\n            }\n            const anchor = line.center.closest(intersects);\n            if (anchor) {\n                edgeView.sourceAnchor = anchor.clone();\n                edgeView.targetAnchor = anchor.clone();\n            }\n            else {\n                edgeView.sourceAnchor = line.center.clone();\n                edgeView.targetAnchor = line.center.clone();\n            }\n        }\n        return rollup([p1.toJSON(), center.toJSON(), p2.toJSON()], options.merge);\n    }\n};\n//# sourceMappingURL=loop.js.map","import { Registry } from '../registry';\nimport * as routers from './main';\nexport var Router;\n(function (Router) {\n    Router.presets = routers;\n    Router.registry = Registry.create({\n        type: 'router',\n    });\n    Router.registry.register(Router.presets, true);\n})(Router || (Router = {}));\n//# sourceMappingURL=index.js.map","import { Polyline, Path } from '@antv/x6-geometry';\nexport const normal = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const points = [sourcePoint, ...routePoints, targetPoint];\n    const polyline = new Polyline(points);\n    const path = new Path(polyline);\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=normal.js.map","import { Path, Point } from '@antv/x6-geometry';\nexport const loop = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const fix = routePoints.length === 3 ? 0 : 1;\n    const p1 = Point.create(routePoints[0 + fix]);\n    const p2 = Point.create(routePoints[2 + fix]);\n    const center = Point.create(routePoints[1 + fix]);\n    if (!Point.equals(sourcePoint, targetPoint)) {\n        const middle = new Point((sourcePoint.x + targetPoint.x) / 2, (sourcePoint.y + targetPoint.y) / 2);\n        const angle = middle.angleBetween(Point.create(sourcePoint).rotate(90, middle), center);\n        if (angle > 1) {\n            p1.rotate(180 - angle, middle);\n            p2.rotate(180 - angle, middle);\n            center.rotate(180 - angle, middle);\n        }\n    }\n    const pathData = `\n     M ${sourcePoint.x} ${sourcePoint.y}\n     Q ${p1.x} ${p1.y} ${center.x} ${center.y}\n     Q ${p2.x} ${p2.y} ${targetPoint.x} ${targetPoint.y}\n  `;\n    return options.raw ? Path.parse(pathData) : pathData;\n};\n//# sourceMappingURL=loop.js.map","import { Point, Path } from '@antv/x6-geometry';\nexport const rounded = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    const path = new Path();\n    path.appendSegment(Path.createSegment('M', sourcePoint));\n    const f13 = 1 / 3;\n    const f23 = 2 / 3;\n    const radius = options.radius || 10;\n    let prevDistance;\n    let nextDistance;\n    for (let i = 0, ii = routePoints.length; i < ii; i += 1) {\n        const curr = Point.create(routePoints[i]);\n        const prev = routePoints[i - 1] || sourcePoint;\n        const next = routePoints[i + 1] || targetPoint;\n        prevDistance = nextDistance || curr.distance(prev) / 2;\n        nextDistance = curr.distance(next) / 2;\n        const startMove = -Math.min(radius, prevDistance);\n        const endMove = -Math.min(radius, nextDistance);\n        const roundedStart = curr.clone().move(prev, startMove).round();\n        const roundedEnd = curr.clone().move(next, endMove).round();\n        const control1 = new Point(f13 * roundedStart.x + f23 * curr.x, f23 * curr.y + f13 * roundedStart.y);\n        const control2 = new Point(f13 * roundedEnd.x + f23 * curr.x, f23 * curr.y + f13 * roundedEnd.y);\n        path.appendSegment(Path.createSegment('L', roundedStart));\n        path.appendSegment(Path.createSegment('C', control1, control2, roundedEnd));\n    }\n    path.appendSegment(Path.createSegment('L', targetPoint));\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=rounded.js.map","import { Curve, Path } from '@antv/x6-geometry';\nexport const smooth = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    let path;\n    let direction = options.direction;\n    if (routePoints && routePoints.length !== 0) {\n        const points = [sourcePoint, ...routePoints, targetPoint];\n        const curves = Curve.throughPoints(points);\n        path = new Path(curves);\n    }\n    else {\n        // If we have no route, use a default cubic bezier curve, cubic bezier\n        // requires two control points, the control points have `x` midway\n        // between source and target. This produces an S-like curve.\n        path = new Path();\n        path.appendSegment(Path.createSegment('M', sourcePoint));\n        if (!direction) {\n            direction =\n                Math.abs(sourcePoint.x - targetPoint.x) >=\n                    Math.abs(sourcePoint.y - targetPoint.y)\n                    ? 'H'\n                    : 'V';\n        }\n        if (direction === 'H') {\n            const controlPointX = (sourcePoint.x + targetPoint.x) / 2;\n            path.appendSegment(Path.createSegment('C', controlPointX, sourcePoint.y, controlPointX, targetPoint.y, targetPoint.x, targetPoint.y));\n        }\n        else {\n            const controlPointY = (sourcePoint.y + targetPoint.y) / 2;\n            path.appendSegment(Path.createSegment('C', sourcePoint.x, controlPointY, targetPoint.x, controlPointY, targetPoint.x, targetPoint.y));\n        }\n    }\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=smooth.js.map","/* eslint-disable no-underscore-dangle */\nimport { Point, Line, Path } from '@antv/x6-geometry';\n// takes care of math. error for case when jump is too close to end of line\nconst CLOSE_PROXIMITY_PADDING = 1;\nconst F13 = 1 / 3;\nconst F23 = 2 / 3;\nfunction setupUpdating(view) {\n    let updateList = view.graph._jumpOverUpdateList;\n    // first time setup for this paper\n    if (updateList == null) {\n        updateList = view.graph._jumpOverUpdateList = [];\n        view.graph.on('cell:mouseup', () => {\n            const list = view.graph._jumpOverUpdateList;\n            // add timeout to wait for the target node to be connected\n            // fix https://github.com/antvis/X6/issues/3387\n            setTimeout(() => {\n                for (let i = 0; i < list.length; i += 1) {\n                    list[i].update();\n                }\n            });\n        });\n        view.graph.on('model:reseted', () => {\n            updateList = view.graph._jumpOverUpdateList = [];\n        });\n    }\n    // add this link to a list so it can be updated when some other link is updated\n    if (updateList.indexOf(view) < 0) {\n        updateList.push(view);\n        // watch for change of connector type or removal of link itself\n        // to remove the link from a list of jump over connectors\n        const clean = () => updateList.splice(updateList.indexOf(view), 1);\n        view.cell.once('change:connector', clean);\n        view.cell.once('removed', clean);\n    }\n}\nfunction createLines(sourcePoint, targetPoint, route = []) {\n    const points = [sourcePoint, ...route, targetPoint];\n    const lines = [];\n    points.forEach((point, idx) => {\n        const next = points[idx + 1];\n        if (next != null) {\n            lines.push(new Line(point, next));\n        }\n    });\n    return lines;\n}\nfunction findLineIntersections(line, crossCheckLines) {\n    const intersections = [];\n    crossCheckLines.forEach((crossCheckLine) => {\n        const intersection = line.intersectsWithLine(crossCheckLine);\n        if (intersection) {\n            intersections.push(intersection);\n        }\n    });\n    return intersections;\n}\nfunction getDistence(p1, p2) {\n    return new Line(p1, p2).squaredLength();\n}\n/**\n * Split input line into multiple based on intersection points.\n */\nfunction createJumps(line, intersections, jumpSize) {\n    return intersections.reduce((memo, point, idx) => {\n        // skipping points that were merged with the previous line\n        // to make bigger arc over multiple lines that are close to each other\n        if (skippedPoints.includes(point)) {\n            return memo;\n        }\n        // always grab the last line from buffer and modify it\n        const lastLine = memo.pop() || line;\n        // calculate start and end of jump by moving by a given size of jump\n        const jumpStart = Point.create(point).move(lastLine.start, -jumpSize);\n        let jumpEnd = Point.create(point).move(lastLine.start, +jumpSize);\n        // now try to look at the next intersection point\n        const nextPoint = intersections[idx + 1];\n        if (nextPoint != null) {\n            const distance = jumpEnd.distance(nextPoint);\n            if (distance <= jumpSize) {\n                // next point is close enough, move the jump end by this\n                // difference and mark the next point to be skipped\n                jumpEnd = nextPoint.move(lastLine.start, distance);\n                skippedPoints.push(nextPoint);\n            }\n        }\n        else {\n            // this block is inside of `else` as an optimization so the distance is\n            // not calculated when we know there are no other intersection points\n            const endDistance = jumpStart.distance(lastLine.end);\n            // if the end is too close to possible jump, draw remaining line instead of a jump\n            if (endDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n                memo.push(lastLine);\n                return memo;\n            }\n        }\n        const startDistance = jumpEnd.distance(lastLine.start);\n        if (startDistance < jumpSize * 2 + CLOSE_PROXIMITY_PADDING) {\n            // if the start of line is too close to jump, draw that line instead of a jump\n            memo.push(lastLine);\n            return memo;\n        }\n        // finally create a jump line\n        const jumpLine = new Line(jumpStart, jumpEnd);\n        // it's just simple line but with a `isJump` property\n        jumppedLines.push(jumpLine);\n        memo.push(new Line(lastLine.start, jumpStart), jumpLine, new Line(jumpEnd, lastLine.end));\n        return memo;\n    }, []);\n}\nfunction buildPath(lines, jumpSize, jumpType, radius) {\n    const path = new Path();\n    let segment;\n    // first move to the start of a first line\n    segment = Path.createSegment('M', lines[0].start);\n    path.appendSegment(segment);\n    lines.forEach((line, index) => {\n        if (jumppedLines.includes(line)) {\n            let angle;\n            let diff;\n            let control1;\n            let control2;\n            if (jumpType === 'arc') {\n                // approximates semicircle with 2 curves\n                angle = -90;\n                // determine rotation of arc based on difference between points\n                diff = line.start.diff(line.end);\n                // make sure the arc always points up (or right)\n                const xAxisRotate = diff.x < 0 || (diff.x === 0 && diff.y < 0);\n                if (xAxisRotate) {\n                    angle += 180;\n                }\n                const center = line.getCenter();\n                const centerLine = new Line(center, line.end).rotate(angle, center);\n                let halfLine;\n                // first half\n                halfLine = new Line(line.start, center);\n                control1 = halfLine.pointAt(2 / 3).rotate(angle, line.start);\n                control2 = centerLine.pointAt(1 / 3).rotate(-angle, centerLine.end);\n                segment = Path.createSegment('C', control1, control2, centerLine.end);\n                path.appendSegment(segment);\n                // second half\n                halfLine = new Line(center, line.end);\n                control1 = centerLine.pointAt(1 / 3).rotate(angle, centerLine.end);\n                control2 = halfLine.pointAt(1 / 3).rotate(-angle, line.end);\n                segment = Path.createSegment('C', control1, control2, line.end);\n                path.appendSegment(segment);\n            }\n            else if (jumpType === 'gap') {\n                segment = Path.createSegment('M', line.end);\n                path.appendSegment(segment);\n            }\n            else if (jumpType === 'cubic') {\n                // approximates semicircle with 1 curve\n                angle = line.start.theta(line.end);\n                const xOffset = jumpSize * 0.6;\n                let yOffset = jumpSize * 1.35;\n                // determine rotation of arc based on difference between points\n                diff = line.start.diff(line.end);\n                // make sure the arc always points up (or right)\n                const xAxisRotate = diff.x < 0 || (diff.x === 0 && diff.y < 0);\n                if (xAxisRotate) {\n                    yOffset *= -1;\n                }\n                control1 = new Point(line.start.x + xOffset, line.start.y + yOffset).rotate(angle, line.start);\n                control2 = new Point(line.end.x - xOffset, line.end.y + yOffset).rotate(angle, line.end);\n                segment = Path.createSegment('C', control1, control2, line.end);\n                path.appendSegment(segment);\n            }\n        }\n        else {\n            const nextLine = lines[index + 1];\n            if (radius === 0 || !nextLine || jumppedLines.includes(nextLine)) {\n                segment = Path.createSegment('L', line.end);\n                path.appendSegment(segment);\n            }\n            else {\n                buildRoundedSegment(radius, path, line.end, line.start, nextLine.end);\n            }\n        }\n    });\n    return path;\n}\nfunction buildRoundedSegment(offset, path, curr, prev, next) {\n    const prevDistance = curr.distance(prev) / 2;\n    const nextDistance = curr.distance(next) / 2;\n    const startMove = -Math.min(offset, prevDistance);\n    const endMove = -Math.min(offset, nextDistance);\n    const roundedStart = curr.clone().move(prev, startMove).round();\n    const roundedEnd = curr.clone().move(next, endMove).round();\n    const control1 = new Point(F13 * roundedStart.x + F23 * curr.x, F23 * curr.y + F13 * roundedStart.y);\n    const control2 = new Point(F13 * roundedEnd.x + F23 * curr.x, F23 * curr.y + F13 * roundedEnd.y);\n    let segment;\n    segment = Path.createSegment('L', roundedStart);\n    path.appendSegment(segment);\n    segment = Path.createSegment('C', control1, control2, roundedEnd);\n    path.appendSegment(segment);\n}\nlet jumppedLines;\nlet skippedPoints;\nexport const jumpover = function (sourcePoint, targetPoint, routePoints, options = {}) {\n    jumppedLines = [];\n    skippedPoints = [];\n    setupUpdating(this);\n    const jumpSize = options.size || 5;\n    const jumpType = options.type || 'arc';\n    const radius = options.radius || 0;\n    // list of connector types not to jump over.\n    const ignoreConnectors = options.ignoreConnectors || ['smooth'];\n    const graph = this.graph;\n    const model = graph.model;\n    const allLinks = model.getEdges();\n    // there is just one link, draw it directly\n    if (allLinks.length === 1) {\n        return buildPath(createLines(sourcePoint, targetPoint, routePoints), jumpSize, jumpType, radius);\n    }\n    const edge = this.cell;\n    const thisIndex = allLinks.indexOf(edge);\n    const defaultConnector = graph.options.connecting.connector || {};\n    // not all links are meant to be jumped over.\n    const edges = allLinks.filter((link, idx) => {\n        const connector = link.getConnector() || defaultConnector;\n        // avoid jumping over links with connector type listed in `ignored connectors`.\n        if (ignoreConnectors.includes(connector.name)) {\n            return false;\n        }\n        // filter out links that are above this one and  have the same connector type\n        // otherwise there would double hoops for each intersection\n        if (idx > thisIndex) {\n            return connector.name !== 'jumpover';\n        }\n        return true;\n    });\n    // find views for all links\n    const linkViews = edges.map((edge) => {\n        return graph.findViewByCell(edge);\n    });\n    // create lines for this link\n    const thisLines = createLines(sourcePoint, targetPoint, routePoints);\n    // create lines for all other links\n    const linkLines = linkViews.map((linkView) => {\n        if (linkView == null) {\n            return [];\n        }\n        if (linkView === this) {\n            return thisLines;\n        }\n        return createLines(linkView.sourcePoint, linkView.targetPoint, linkView.routePoints);\n    });\n    // transform lines for this link by splitting with jump lines at\n    // points of intersection with other links\n    const jumpingLines = [];\n    thisLines.forEach((line) => {\n        // iterate all links and grab the intersections with this line\n        // these are then sorted by distance so the line can be split more easily\n        const intersections = edges\n            .reduce((memo, link, i) => {\n            // don't intersection with itself\n            if (link !== edge) {\n                const lineIntersections = findLineIntersections(line, linkLines[i]);\n                memo.push(...lineIntersections);\n            }\n            return memo;\n        }, [])\n            .sort((a, b) => getDistence(line.start, a) - getDistence(line.start, b));\n        if (intersections.length > 0) {\n            // split the line based on found intersection points\n            jumpingLines.push(...createJumps(line, intersections, jumpSize));\n        }\n        else {\n            // without any intersection the line goes uninterrupted\n            jumpingLines.push(line);\n        }\n    });\n    const path = buildPath(jumpingLines, jumpSize, jumpType, radius);\n    jumppedLines = [];\n    skippedPoints = [];\n    return options.raw ? path : path.serialize();\n};\n//# sourceMappingURL=jumpover.js.map","import { Registry } from '../registry';\nimport * as connectors from './main';\nexport var Connector;\n(function (Connector) {\n    Connector.presets = connectors;\n    Connector.registry = Registry.create({\n        type: 'connector',\n    });\n    Connector.registry.register(Connector.presets, true);\n})(Connector || (Connector = {}));\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ObjectExt, Basecoat } from '@antv/x6-common';\nexport class Store extends Basecoat {\n    constructor(data = {}) {\n        super();\n        this.pending = false;\n        this.changing = false;\n        this.data = {};\n        this.mutate(ObjectExt.cloneDeep(data));\n        this.changed = {};\n    }\n    mutate(data, options = {}) {\n        const unset = options.unset === true;\n        const silent = options.silent === true;\n        const changes = [];\n        const changing = this.changing;\n        this.changing = true;\n        if (!changing) {\n            this.previous = ObjectExt.cloneDeep(this.data);\n            this.changed = {};\n        }\n        const current = this.data;\n        const previous = this.previous;\n        const changed = this.changed;\n        Object.keys(data).forEach((k) => {\n            const key = k;\n            const newValue = data[key];\n            if (!ObjectExt.isEqual(current[key], newValue)) {\n                changes.push(key);\n            }\n            if (!ObjectExt.isEqual(previous[key], newValue)) {\n                changed[key] = newValue;\n            }\n            else {\n                delete changed[key];\n            }\n            if (unset) {\n                delete current[key];\n            }\n            else {\n                current[key] = newValue;\n            }\n        });\n        if (!silent && changes.length > 0) {\n            this.pending = true;\n            this.pendingOptions = options;\n            changes.forEach((key) => {\n                this.emit('change:*', {\n                    key,\n                    options,\n                    store: this,\n                    current: current[key],\n                    previous: previous[key],\n                });\n            });\n        }\n        if (changing) {\n            return this;\n        }\n        if (!silent) {\n            // Changes can be recursively nested within `\"change\"` events.\n            while (this.pending) {\n                this.pending = false;\n                this.emit('changed', {\n                    current,\n                    previous,\n                    store: this,\n                    options: this.pendingOptions,\n                });\n            }\n        }\n        this.pending = false;\n        this.changing = false;\n        this.pendingOptions = null;\n        return this;\n    }\n    get(key, defaultValue) {\n        if (key == null) {\n            return this.data;\n        }\n        const ret = this.data[key];\n        return ret == null ? defaultValue : ret;\n    }\n    getPrevious(key) {\n        if (this.previous) {\n            const ret = this.previous[key];\n            return ret == null ? undefined : ret;\n        }\n        return undefined;\n    }\n    set(key, value, options) {\n        if (key != null) {\n            if (typeof key === 'object') {\n                this.mutate(key, value);\n            }\n            else {\n                this.mutate({ [key]: value }, options);\n            }\n        }\n        return this;\n    }\n    remove(key, options) {\n        const empty = undefined;\n        const subset = {};\n        let opts;\n        if (typeof key === 'string') {\n            subset[key] = empty;\n            opts = options;\n        }\n        else if (Array.isArray(key)) {\n            key.forEach((k) => (subset[k] = empty));\n            opts = options;\n        }\n        else {\n            // eslint-disable-next-line\n            for (const key in this.data) {\n                subset[key] = empty;\n            }\n            opts = key;\n        }\n        this.mutate(subset, Object.assign(Object.assign({}, opts), { unset: true }));\n        return this;\n    }\n    getByPath(path) {\n        return ObjectExt.getByPath(this.data, path, '/');\n    }\n    setByPath(path, value, options = {}) {\n        const delim = '/';\n        const pathArray = Array.isArray(path) ? [...path] : path.split(delim);\n        const pathString = Array.isArray(path) ? path.join(delim) : path;\n        const property = pathArray[0];\n        const pathArrayLength = pathArray.length;\n        options.propertyPath = pathString;\n        options.propertyValue = value;\n        options.propertyPathArray = pathArray;\n        if (pathArrayLength === 1) {\n            this.set(property, value, options);\n        }\n        else {\n            const update = {};\n            let diver = update;\n            let nextKey = property;\n            // Initialize the nested object. Subobjects are either arrays or objects.\n            // An empty array is created if the sub-key is an integer. Otherwise, an\n            // empty object is created.\n            for (let i = 1; i < pathArrayLength; i += 1) {\n                const key = pathArray[i];\n                const isArrayIndex = Number.isFinite(Number(key));\n                diver = diver[nextKey] = isArrayIndex ? [] : {};\n                nextKey = key;\n            }\n            // Fills update with the `value` on `path`.\n            ObjectExt.setByPath(update, pathArray, value, delim);\n            const data = ObjectExt.cloneDeep(this.data);\n            // If rewrite mode enabled, we replace value referenced by path with the\n            // new one (we don't merge).\n            if (options.rewrite) {\n                ObjectExt.unsetByPath(data, path, delim);\n            }\n            const merged = ObjectExt.merge(data, update);\n            this.set(property, merged[property], options);\n        }\n        return this;\n    }\n    removeByPath(path, options) {\n        const keys = Array.isArray(path) ? path : path.split('/');\n        const key = keys[0];\n        if (keys.length === 1) {\n            this.remove(key, options);\n        }\n        else {\n            const paths = keys.slice(1);\n            const prop = ObjectExt.cloneDeep(this.get(key));\n            if (prop) {\n                ObjectExt.unsetByPath(prop, paths);\n            }\n            this.set(key, prop, options);\n        }\n        return this;\n    }\n    hasChanged(key) {\n        if (key == null) {\n            return Object.keys(this.changed).length > 0;\n        }\n        return key in this.changed;\n    }\n    /**\n     * Returns an object containing all the data that have changed,\n     * or `null` if there are no changes. Useful for determining what\n     * parts of a view need to be updated.\n     */\n    getChanges(diff) {\n        if (diff == null) {\n            return this.hasChanged() ? ObjectExt.cloneDeep(this.changed) : null;\n        }\n        const old = this.changing ? this.previous : this.data;\n        const changed = {};\n        let hasChanged;\n        // eslint-disable-next-line\n        for (const key in diff) {\n            const val = diff[key];\n            if (!ObjectExt.isEqual(old[key], val)) {\n                changed[key] = val;\n                hasChanged = true;\n            }\n        }\n        return hasChanged ? ObjectExt.cloneDeep(changed) : null;\n    }\n    /**\n     * Returns a copy of the store's `data` object.\n     */\n    toJSON() {\n        return ObjectExt.cloneDeep(this.data);\n    }\n    clone() {\n        const constructor = this.constructor;\n        return new constructor(this.data);\n    }\n    dispose() {\n        this.off();\n        this.data = {};\n        this.previous = {};\n        this.changed = {};\n        this.pending = false;\n        this.changing = false;\n        this.pendingOptions = null;\n        this.trigger('disposed', { store: this });\n    }\n}\n__decorate([\n    Basecoat.dispose()\n], Store.prototype, \"dispose\", null);\n//# sourceMappingURL=store.js.map","import { ObjectExt, Timing, Interp } from '@antv/x6-common';\nexport class Animation {\n    constructor(cell) {\n        this.cell = cell;\n        this.ids = {};\n        this.cache = {};\n    }\n    get() {\n        return Object.keys(this.ids);\n    }\n    start(path, targetValue, options = {}, delim = '/') {\n        const startValue = this.cell.getPropByPath(path);\n        const localOptions = ObjectExt.defaults(options, Animation.defaultOptions);\n        const timing = this.getTiming(localOptions.timing);\n        const interpolate = this.getInterp(localOptions.interp, startValue, targetValue);\n        let startTime = 0;\n        const key = Array.isArray(path) ? path.join(delim) : path;\n        const paths = Array.isArray(path) ? path : path.split(delim);\n        const iterate = () => {\n            const now = new Date().getTime();\n            if (startTime === 0) {\n                startTime = now;\n            }\n            const elaspe = now - startTime;\n            let progress = elaspe / localOptions.duration;\n            if (progress < 1) {\n                this.ids[key] = requestAnimationFrame(iterate);\n            }\n            else {\n                progress = 1;\n            }\n            const currentValue = interpolate(timing(progress));\n            this.cell.setPropByPath(paths, currentValue);\n            if (options.progress) {\n                options.progress(Object.assign({ progress, currentValue }, this.getArgs(key)));\n            }\n            if (progress === 1) {\n                this.cell.notify('transition:complete', this.getArgs(key));\n                options.complete && options.complete(this.getArgs(key));\n                this.cell.notify('transition:finish', this.getArgs(key));\n                options.finish && options.finish(this.getArgs(key));\n                this.clean(key);\n            }\n        };\n        setTimeout(() => {\n            this.stop(path, undefined, delim);\n            this.cache[key] = { startValue, targetValue, options: localOptions };\n            this.ids[key] = requestAnimationFrame(iterate);\n            this.cell.notify('transition:start', this.getArgs(key));\n            options.start && options.start(this.getArgs(key));\n        }, options.delay);\n        return this.stop.bind(this, path, delim, options);\n    }\n    stop(path, options = {}, delim = '/') {\n        const paths = Array.isArray(path) ? path : path.split(delim);\n        Object.keys(this.ids)\n            .filter((key) => ObjectExt.isEqual(paths, key.split(delim).slice(0, paths.length)))\n            .forEach((key) => {\n            cancelAnimationFrame(this.ids[key]);\n            const data = this.cache[key];\n            const commonArgs = this.getArgs(key);\n            const localOptions = Object.assign(Object.assign({}, data.options), options);\n            const jumpedToEnd = localOptions.jumpedToEnd;\n            if (jumpedToEnd && data.targetValue != null) {\n                this.cell.setPropByPath(key, data.targetValue);\n                this.cell.notify('transition:end', Object.assign({}, commonArgs));\n                this.cell.notify('transition:complete', Object.assign({}, commonArgs));\n                localOptions.complete && localOptions.complete(Object.assign({}, commonArgs));\n            }\n            const stopArgs = Object.assign({ jumpedToEnd }, commonArgs);\n            this.cell.notify('transition:stop', Object.assign({}, stopArgs));\n            localOptions.stop && localOptions.stop(Object.assign({}, stopArgs));\n            this.cell.notify('transition:finish', Object.assign({}, commonArgs));\n            localOptions.finish && localOptions.finish(Object.assign({}, commonArgs));\n            this.clean(key);\n        });\n        return this;\n    }\n    clean(key) {\n        delete this.ids[key];\n        delete this.cache[key];\n    }\n    getTiming(timing) {\n        return typeof timing === 'string' ? Timing[timing] : timing;\n    }\n    getInterp(interp, startValue, targetValue) {\n        if (interp) {\n            return interp(startValue, targetValue);\n        }\n        if (typeof targetValue === 'number') {\n            return Interp.number(startValue, targetValue);\n        }\n        if (typeof targetValue === 'string') {\n            if (targetValue[0] === '#') {\n                return Interp.color(startValue, targetValue);\n            }\n            return Interp.unit(startValue, targetValue);\n        }\n        return Interp.object(startValue, targetValue);\n    }\n    getArgs(key) {\n        const data = this.cache[key];\n        return {\n            path: key,\n            startValue: data.startValue,\n            targetValue: data.targetValue,\n            cell: this.cell,\n        };\n    }\n}\n(function (Animation) {\n    Animation.defaultOptions = {\n        delay: 10,\n        duration: 100,\n        timing: 'linear',\n    };\n})(Animation || (Animation = {}));\n//# sourceMappingURL=animation.js.map","/* eslint-disable no-underscore-dangle */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ArrayExt, StringExt, ObjectExt, FunctionExt, Basecoat, } from '@antv/x6-common';\nimport { Rectangle, Point } from '@antv/x6-geometry';\nimport { Attr } from '../registry';\nimport { Store } from './store';\nimport { Animation } from './animation';\nexport class Cell extends Basecoat {\n    static config(presets) {\n        const { markup, propHooks, attrHooks } = presets, others = __rest(presets, [\"markup\", \"propHooks\", \"attrHooks\"]);\n        if (markup != null) {\n            this.markup = markup;\n        }\n        if (propHooks) {\n            this.propHooks = this.propHooks.slice();\n            if (Array.isArray(propHooks)) {\n                this.propHooks.push(...propHooks);\n            }\n            else if (typeof propHooks === 'function') {\n                this.propHooks.push(propHooks);\n            }\n            else {\n                Object.values(propHooks).forEach((hook) => {\n                    if (typeof hook === 'function') {\n                        this.propHooks.push(hook);\n                    }\n                });\n            }\n        }\n        if (attrHooks) {\n            this.attrHooks = Object.assign(Object.assign({}, this.attrHooks), attrHooks);\n        }\n        this.defaults = ObjectExt.merge({}, this.defaults, others);\n    }\n    static getMarkup() {\n        return this.markup;\n    }\n    static getDefaults(raw) {\n        return (raw ? this.defaults : ObjectExt.cloneDeep(this.defaults));\n    }\n    static getAttrHooks() {\n        return this.attrHooks;\n    }\n    static applyPropHooks(cell, metadata) {\n        return this.propHooks.reduce((memo, hook) => {\n            return hook ? FunctionExt.call(hook, cell, memo) : memo;\n        }, metadata);\n    }\n    // #endregion\n    get [Symbol.toStringTag]() {\n        return Cell.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super();\n        const ctor = this.constructor;\n        const defaults = ctor.getDefaults(true);\n        const props = ObjectExt.merge({}, this.preprocess(defaults), this.preprocess(metadata));\n        this.id = props.id || StringExt.uuid();\n        this.store = new Store(props);\n        this.animation = new Animation(this);\n        this.setup();\n        this.init();\n        this.postprocess(metadata);\n    }\n    init() { }\n    // #region model\n    get model() {\n        return this._model;\n    }\n    set model(model) {\n        if (this._model !== model) {\n            this._model = model;\n        }\n    }\n    // #endregion\n    preprocess(metadata, ignoreIdCheck) {\n        const id = metadata.id;\n        const ctor = this.constructor;\n        const props = ctor.applyPropHooks(this, metadata);\n        if (id == null && ignoreIdCheck !== true) {\n            props.id = StringExt.uuid();\n        }\n        return props;\n    }\n    postprocess(metadata) { } // eslint-disable-line\n    setup() {\n        this.store.on('change:*', (metadata) => {\n            const { key, current, previous, options } = metadata;\n            this.notify('change:*', {\n                key,\n                options,\n                current,\n                previous,\n                cell: this,\n            });\n            this.notify(`change:${key}`, {\n                options,\n                current,\n                previous,\n                cell: this,\n            });\n            const type = key;\n            if (type === 'source' || type === 'target') {\n                this.notify(`change:terminal`, {\n                    type,\n                    current,\n                    previous,\n                    options,\n                    cell: this,\n                });\n            }\n        });\n        this.store.on('changed', ({ options }) => this.notify('changed', { options, cell: this }));\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        const model = this.model;\n        if (model) {\n            model.notify(`cell:${name}`, args);\n            if (this.isNode()) {\n                model.notify(`node:${name}`, Object.assign(Object.assign({}, args), { node: this }));\n            }\n            else if (this.isEdge()) {\n                model.notify(`edge:${name}`, Object.assign(Object.assign({}, args), { edge: this }));\n            }\n        }\n        return this;\n    }\n    isNode() {\n        return false;\n    }\n    isEdge() {\n        return false;\n    }\n    isSameStore(cell) {\n        return this.store === cell.store;\n    }\n    get view() {\n        return this.store.get('view');\n    }\n    get shape() {\n        return this.store.get('shape', '');\n    }\n    getProp(key, defaultValue) {\n        if (key == null) {\n            return this.store.get();\n        }\n        return this.store.get(key, defaultValue);\n    }\n    setProp(key, value, options) {\n        if (typeof key === 'string') {\n            this.store.set(key, value, options);\n        }\n        else {\n            const props = this.preprocess(key, true);\n            this.store.set(ObjectExt.merge({}, this.getProp(), props), value);\n            this.postprocess(key);\n        }\n        return this;\n    }\n    removeProp(key, options) {\n        if (typeof key === 'string' || Array.isArray(key)) {\n            this.store.removeByPath(key, options);\n        }\n        else {\n            this.store.remove(options);\n        }\n        return this;\n    }\n    hasChanged(key) {\n        return key == null ? this.store.hasChanged() : this.store.hasChanged(key);\n    }\n    getPropByPath(path) {\n        return this.store.getByPath(path);\n    }\n    setPropByPath(path, value, options = {}) {\n        if (this.model) {\n            // update inner reference\n            if (path === 'children') {\n                this._children = value\n                    ? value\n                        .map((id) => this.model.getCell(id))\n                        .filter((child) => child != null)\n                    : null;\n            }\n            else if (path === 'parent') {\n                this._parent = value ? this.model.getCell(value) : null;\n            }\n        }\n        this.store.setByPath(path, value, options);\n        return this;\n    }\n    removePropByPath(path, options = {}) {\n        const paths = Array.isArray(path) ? path : path.split('/');\n        // Once a property is removed from the `attrs` the CellView will\n        // recognize a `dirty` flag and re-render itself in order to remove\n        // the attribute from SVGElement.\n        if (paths[0] === 'attrs') {\n            options.dirty = true;\n        }\n        this.store.removeByPath(paths, options);\n        return this;\n    }\n    prop(key, value, options) {\n        if (key == null) {\n            return this.getProp();\n        }\n        if (typeof key === 'string' || Array.isArray(key)) {\n            if (arguments.length === 1) {\n                return this.getPropByPath(key);\n            }\n            if (value == null) {\n                return this.removePropByPath(key, options || {});\n            }\n            return this.setPropByPath(key, value, options || {});\n        }\n        return this.setProp(key, value || {});\n    }\n    previous(name) {\n        return this.store.getPrevious(name);\n    }\n    // #endregion\n    // #region zIndex\n    get zIndex() {\n        return this.getZIndex();\n    }\n    set zIndex(z) {\n        if (z == null) {\n            this.removeZIndex();\n        }\n        else {\n            this.setZIndex(z);\n        }\n    }\n    getZIndex() {\n        return this.store.get('zIndex');\n    }\n    setZIndex(z, options = {}) {\n        this.store.set('zIndex', z, options);\n        return this;\n    }\n    removeZIndex(options = {}) {\n        this.store.remove('zIndex', options);\n        return this;\n    }\n    toFront(options = {}) {\n        const model = this.model;\n        if (model) {\n            let z = model.getMaxZIndex();\n            let cells;\n            if (options.deep) {\n                cells = this.getDescendants({ deep: true, breadthFirst: true });\n                cells.unshift(this);\n            }\n            else {\n                cells = [this];\n            }\n            z = z - cells.length + 1;\n            const count = model.total();\n            let changed = model.indexOf(this) !== count - cells.length;\n            if (!changed) {\n                changed = cells.some((cell, index) => cell.getZIndex() !== z + index);\n            }\n            if (changed) {\n                this.batchUpdate('to-front', () => {\n                    z += cells.length;\n                    cells.forEach((cell, index) => {\n                        cell.setZIndex(z + index, options);\n                    });\n                });\n            }\n        }\n        return this;\n    }\n    toBack(options = {}) {\n        const model = this.model;\n        if (model) {\n            let z = model.getMinZIndex();\n            let cells;\n            if (options.deep) {\n                cells = this.getDescendants({ deep: true, breadthFirst: true });\n                cells.unshift(this);\n            }\n            else {\n                cells = [this];\n            }\n            let changed = model.indexOf(this) !== 0;\n            if (!changed) {\n                changed = cells.some((cell, index) => cell.getZIndex() !== z + index);\n            }\n            if (changed) {\n                this.batchUpdate('to-back', () => {\n                    z -= cells.length;\n                    cells.forEach((cell, index) => {\n                        cell.setZIndex(z + index, options);\n                    });\n                });\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region markup\n    get markup() {\n        return this.getMarkup();\n    }\n    set markup(value) {\n        if (value == null) {\n            this.removeMarkup();\n        }\n        else {\n            this.setMarkup(value);\n        }\n    }\n    getMarkup() {\n        let markup = this.store.get('markup');\n        if (markup == null) {\n            const ctor = this.constructor;\n            markup = ctor.getMarkup();\n        }\n        return markup;\n    }\n    setMarkup(markup, options = {}) {\n        this.store.set('markup', markup, options);\n        return this;\n    }\n    removeMarkup(options = {}) {\n        this.store.remove('markup', options);\n        return this;\n    }\n    // #endregion\n    // #region attrs\n    get attrs() {\n        return this.getAttrs();\n    }\n    set attrs(value) {\n        if (value == null) {\n            this.removeAttrs();\n        }\n        else {\n            this.setAttrs(value);\n        }\n    }\n    getAttrs() {\n        const result = this.store.get('attrs');\n        return result ? Object.assign({}, result) : {};\n    }\n    setAttrs(attrs, options = {}) {\n        if (attrs == null) {\n            this.removeAttrs(options);\n        }\n        else {\n            const set = (attrs) => this.store.set('attrs', attrs, options);\n            if (options.overwrite === true) {\n                set(attrs);\n            }\n            else {\n                const prev = this.getAttrs();\n                if (options.deep === false) {\n                    set(Object.assign(Object.assign({}, prev), attrs));\n                }\n                else {\n                    set(ObjectExt.merge({}, prev, attrs));\n                }\n            }\n        }\n        return this;\n    }\n    replaceAttrs(attrs, options = {}) {\n        return this.setAttrs(attrs, Object.assign(Object.assign({}, options), { overwrite: true }));\n    }\n    updateAttrs(attrs, options = {}) {\n        return this.setAttrs(attrs, Object.assign(Object.assign({}, options), { deep: false }));\n    }\n    removeAttrs(options = {}) {\n        this.store.remove('attrs', options);\n        return this;\n    }\n    getAttrDefinition(attrName) {\n        if (!attrName) {\n            return null;\n        }\n        const ctor = this.constructor;\n        const hooks = ctor.getAttrHooks() || {};\n        let definition = hooks[attrName] || Attr.registry.get(attrName);\n        if (!definition) {\n            const name = StringExt.camelCase(attrName);\n            definition = hooks[name] || Attr.registry.get(name);\n        }\n        return definition || null;\n    }\n    getAttrByPath(path) {\n        if (path == null || path === '') {\n            return this.getAttrs();\n        }\n        return this.getPropByPath(this.prefixAttrPath(path));\n    }\n    setAttrByPath(path, value, options = {}) {\n        this.setPropByPath(this.prefixAttrPath(path), value, options);\n        return this;\n    }\n    removeAttrByPath(path, options = {}) {\n        this.removePropByPath(this.prefixAttrPath(path), options);\n        return this;\n    }\n    prefixAttrPath(path) {\n        return Array.isArray(path) ? ['attrs'].concat(path) : `attrs/${path}`;\n    }\n    attr(path, value, options) {\n        if (path == null) {\n            return this.getAttrByPath();\n        }\n        if (typeof path === 'string' || Array.isArray(path)) {\n            if (arguments.length === 1) {\n                return this.getAttrByPath(path);\n            }\n            if (value == null) {\n                return this.removeAttrByPath(path, options || {});\n            }\n            return this.setAttrByPath(path, value, options || {});\n        }\n        return this.setAttrs(path, (value || {}));\n    }\n    // #endregion\n    // #region visible\n    get visible() {\n        return this.isVisible();\n    }\n    set visible(value) {\n        this.setVisible(value);\n    }\n    setVisible(visible, options = {}) {\n        this.store.set('visible', visible, options);\n        return this;\n    }\n    isVisible() {\n        return this.store.get('visible') !== false;\n    }\n    show(options = {}) {\n        if (!this.isVisible()) {\n            this.setVisible(true, options);\n        }\n        return this;\n    }\n    hide(options = {}) {\n        if (this.isVisible()) {\n            this.setVisible(false, options);\n        }\n        return this;\n    }\n    toggleVisible(isVisible, options = {}) {\n        const visible = typeof isVisible === 'boolean' ? isVisible : !this.isVisible();\n        const localOptions = typeof isVisible === 'boolean' ? options : isVisible;\n        if (visible) {\n            this.show(localOptions);\n        }\n        else {\n            this.hide(localOptions);\n        }\n        return this;\n    }\n    // #endregion\n    // #region data\n    get data() {\n        return this.getData();\n    }\n    set data(val) {\n        this.setData(val);\n    }\n    getData() {\n        return this.store.get('data');\n    }\n    setData(data, options = {}) {\n        if (data == null) {\n            this.removeData(options);\n        }\n        else {\n            const set = (data) => this.store.set('data', data, options);\n            if (options.overwrite === true) {\n                set(data);\n            }\n            else {\n                const prev = this.getData();\n                if (options.deep === false) {\n                    set(typeof data === 'object' ? Object.assign(Object.assign({}, prev), data) : data);\n                }\n                else {\n                    set(ObjectExt.merge({}, prev, data));\n                }\n            }\n        }\n        return this;\n    }\n    replaceData(data, options = {}) {\n        return this.setData(data, Object.assign(Object.assign({}, options), { overwrite: true }));\n    }\n    updateData(data, options = {}) {\n        return this.setData(data, Object.assign(Object.assign({}, options), { deep: false }));\n    }\n    removeData(options = {}) {\n        this.store.remove('data', options);\n        return this;\n    }\n    // #endregion\n    // #region parent children\n    get parent() {\n        return this.getParent();\n    }\n    get children() {\n        return this.getChildren();\n    }\n    getParentId() {\n        return this.store.get('parent');\n    }\n    getParent() {\n        const parentId = this.getParentId();\n        if (parentId && this.model) {\n            const parent = this.model.getCell(parentId);\n            this._parent = parent;\n            return parent;\n        }\n        return null;\n    }\n    getChildren() {\n        const childrenIds = this.store.get('children');\n        if (childrenIds && childrenIds.length && this.model) {\n            const children = childrenIds\n                .map((id) => { var _a; return (_a = this.model) === null || _a === void 0 ? void 0 : _a.getCell(id); })\n                .filter((cell) => cell != null);\n            this._children = children;\n            return [...children];\n        }\n        return null;\n    }\n    hasParent() {\n        return this.parent != null;\n    }\n    isParentOf(child) {\n        return child != null && child.getParent() === this;\n    }\n    isChildOf(parent) {\n        return parent != null && this.getParent() === parent;\n    }\n    eachChild(iterator, context) {\n        if (this.children) {\n            this.children.forEach(iterator, context);\n        }\n        return this;\n    }\n    filterChild(filter, context) {\n        return this.children ? this.children.filter(filter, context) : [];\n    }\n    getChildCount() {\n        return this.children == null ? 0 : this.children.length;\n    }\n    getChildIndex(child) {\n        return this.children == null ? -1 : this.children.indexOf(child);\n    }\n    getChildAt(index) {\n        return this.children != null && index >= 0 ? this.children[index] : null;\n    }\n    getAncestors(options = {}) {\n        const ancestors = [];\n        let parent = this.getParent();\n        while (parent) {\n            ancestors.push(parent);\n            parent = options.deep !== false ? parent.getParent() : null;\n        }\n        return ancestors;\n    }\n    getDescendants(options = {}) {\n        if (options.deep !== false) {\n            // breadth first\n            if (options.breadthFirst) {\n                const cells = [];\n                const queue = this.getChildren() || [];\n                while (queue.length > 0) {\n                    const parent = queue.shift();\n                    const children = parent.getChildren();\n                    cells.push(parent);\n                    if (children) {\n                        queue.push(...children);\n                    }\n                }\n                return cells;\n            }\n            // depth first\n            {\n                const cells = this.getChildren() || [];\n                cells.forEach((cell) => {\n                    cells.push(...cell.getDescendants(options));\n                });\n                return cells;\n            }\n        }\n        return this.getChildren() || [];\n    }\n    isDescendantOf(ancestor, options = {}) {\n        if (ancestor == null) {\n            return false;\n        }\n        if (options.deep !== false) {\n            let current = this.getParent();\n            while (current) {\n                if (current === ancestor) {\n                    return true;\n                }\n                current = current.getParent();\n            }\n            return false;\n        }\n        return this.isChildOf(ancestor);\n    }\n    isAncestorOf(descendant, options = {}) {\n        if (descendant == null) {\n            return false;\n        }\n        return descendant.isDescendantOf(this, options);\n    }\n    contains(cell) {\n        return this.isAncestorOf(cell);\n    }\n    getCommonAncestor(...cells) {\n        return Cell.getCommonAncestor(this, ...cells);\n    }\n    setParent(parent, options = {}) {\n        this._parent = parent;\n        if (parent) {\n            this.store.set('parent', parent.id, options);\n        }\n        else {\n            this.store.remove('parent', options);\n        }\n        return this;\n    }\n    setChildren(children, options = {}) {\n        this._children = children;\n        if (children != null) {\n            this.store.set('children', children.map((child) => child.id), options);\n        }\n        else {\n            this.store.remove('children', options);\n        }\n        return this;\n    }\n    unembed(child, options = {}) {\n        const children = this.children;\n        if (children != null && child != null) {\n            const index = this.getChildIndex(child);\n            if (index !== -1) {\n                children.splice(index, 1);\n                child.setParent(null, options);\n                this.setChildren(children, options);\n            }\n        }\n        return this;\n    }\n    embed(child, options = {}) {\n        child.addTo(this, options);\n        return this;\n    }\n    addTo(target, options = {}) {\n        if (Cell.isCell(target)) {\n            target.addChild(this, options);\n        }\n        else {\n            target.addCell(this, options);\n        }\n        return this;\n    }\n    insertTo(parent, index, options = {}) {\n        parent.insertChild(this, index, options);\n        return this;\n    }\n    addChild(child, options = {}) {\n        return this.insertChild(child, undefined, options);\n    }\n    insertChild(child, index, options = {}) {\n        if (child != null && child !== this) {\n            const oldParent = child.getParent();\n            const changed = this !== oldParent;\n            let pos = index;\n            if (pos == null) {\n                pos = this.getChildCount();\n                if (!changed) {\n                    pos -= 1;\n                }\n            }\n            // remove from old parent\n            if (oldParent) {\n                const children = oldParent.getChildren();\n                if (children) {\n                    const index = children.indexOf(child);\n                    if (index >= 0) {\n                        child.setParent(null, options);\n                        children.splice(index, 1);\n                        oldParent.setChildren(children, options);\n                    }\n                }\n            }\n            let children = this.children;\n            if (children == null) {\n                children = [];\n                children.push(child);\n            }\n            else {\n                children.splice(pos, 0, child);\n            }\n            child.setParent(this, options);\n            this.setChildren(children, options);\n            if (changed && this.model) {\n                const incomings = this.model.getIncomingEdges(this);\n                const outgoings = this.model.getOutgoingEdges(this);\n                if (incomings) {\n                    incomings.forEach((edge) => edge.updateParent(options));\n                }\n                if (outgoings) {\n                    outgoings.forEach((edge) => edge.updateParent(options));\n                }\n            }\n            if (this.model) {\n                this.model.addCell(child, options);\n            }\n        }\n        return this;\n    }\n    removeFromParent(options = {}) {\n        const parent = this.getParent();\n        if (parent != null) {\n            const index = parent.getChildIndex(this);\n            parent.removeChildAt(index, options);\n        }\n        return this;\n    }\n    removeChild(child, options = {}) {\n        const index = this.getChildIndex(child);\n        return this.removeChildAt(index, options);\n    }\n    removeChildAt(index, options = {}) {\n        const child = this.getChildAt(index);\n        const children = this.children;\n        if (children != null && child != null) {\n            this.unembed(child, options);\n            child.remove(options);\n        }\n        return child;\n    }\n    remove(options = {}) {\n        this.batchUpdate('remove', () => {\n            const parent = this.getParent();\n            if (parent) {\n                parent.removeChild(this, options);\n            }\n            if (options.deep !== false) {\n                this.eachChild((child) => child.remove(options));\n            }\n            if (this.model) {\n                this.model.removeCell(this, options);\n            }\n        });\n        return this;\n    }\n    transition(path, target, options = {}, delim = '/') {\n        return this.animation.start(path, target, options, delim);\n    }\n    stopTransition(path, options, delim = '/') {\n        this.animation.stop(path, options, delim);\n        return this;\n    }\n    getTransitions() {\n        return this.animation.get();\n    }\n    // #endregion\n    // #region transform\n    // eslint-disable-next-line\n    translate(tx, ty, options) {\n        return this;\n    }\n    scale(sx, // eslint-disable-line\n    sy, // eslint-disable-line\n    origin, // eslint-disable-line\n    options) {\n        return this;\n    }\n    addTools(items, obj, options) {\n        const toolItems = Array.isArray(items) ? items : [items];\n        const name = typeof obj === 'string' ? obj : null;\n        const config = typeof obj === 'object' ? obj : typeof options === 'object' ? options : {};\n        if (config.reset) {\n            return this.setTools({ name, items: toolItems, local: config.local }, config);\n        }\n        let tools = ObjectExt.cloneDeep(this.getTools());\n        if (tools == null || name == null || tools.name === name) {\n            if (tools == null) {\n                tools = {};\n            }\n            if (!tools.items) {\n                tools.items = [];\n            }\n            tools.name = name;\n            tools.items = [...tools.items, ...toolItems];\n            return this.setTools(Object.assign({}, tools), config);\n        }\n    }\n    setTools(tools, options = {}) {\n        if (tools == null) {\n            this.removeTools();\n        }\n        else {\n            this.store.set('tools', Cell.normalizeTools(tools), options);\n        }\n        return this;\n    }\n    getTools() {\n        return this.store.get('tools');\n    }\n    removeTools(options = {}) {\n        this.store.remove('tools', options);\n        return this;\n    }\n    hasTools(name) {\n        const tools = this.getTools();\n        if (tools == null) {\n            return false;\n        }\n        if (name == null) {\n            return true;\n        }\n        return tools.name === name;\n    }\n    hasTool(name) {\n        const tools = this.getTools();\n        if (tools == null) {\n            return false;\n        }\n        return tools.items.some((item) => typeof item === 'string' ? item === name : item.name === name);\n    }\n    removeTool(nameOrIndex, options = {}) {\n        const tools = ObjectExt.cloneDeep(this.getTools());\n        if (tools) {\n            let updated = false;\n            const items = tools.items.slice();\n            const remove = (index) => {\n                items.splice(index, 1);\n                updated = true;\n            };\n            if (typeof nameOrIndex === 'number') {\n                remove(nameOrIndex);\n            }\n            else {\n                for (let i = items.length - 1; i >= 0; i -= 1) {\n                    const item = items[i];\n                    const exist = typeof item === 'string'\n                        ? item === nameOrIndex\n                        : item.name === nameOrIndex;\n                    if (exist) {\n                        remove(i);\n                    }\n                }\n            }\n            if (updated) {\n                tools.items = items;\n                this.setTools(tools, options);\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region common\n    // eslint-disable-next-line\n    getBBox(options) {\n        return new Rectangle();\n    }\n    // eslint-disable-next-line\n    getConnectionPoint(edge, type) {\n        return new Point();\n    }\n    toJSON(options = {}) {\n        const props = Object.assign({}, this.store.get());\n        const toString = Object.prototype.toString;\n        const cellType = this.isNode() ? 'node' : this.isEdge() ? 'edge' : 'cell';\n        if (!props.shape) {\n            const ctor = this.constructor;\n            throw new Error(`Unable to serialize ${cellType} missing \"shape\" prop, check the ${cellType} \"${ctor.name || toString.call(ctor)}\"`);\n        }\n        const ctor = this.constructor;\n        const diff = options.diff === true;\n        const attrs = props.attrs || {};\n        const presets = ctor.getDefaults(true);\n        // When `options.diff` is `true`, we should process the custom options,\n        // such as `width`, `height` etc. to ensure the comparing work correctly.\n        const defaults = diff ? this.preprocess(presets, true) : presets;\n        const defaultAttrs = defaults.attrs || {};\n        const finalAttrs = {};\n        Object.entries(props).forEach(([key, val]) => {\n            if (val != null &&\n                !Array.isArray(val) &&\n                typeof val === 'object' &&\n                !ObjectExt.isPlainObject(val)) {\n                throw new Error(`Can only serialize ${cellType} with plain-object props, but got a \"${toString.call(val)}\" type of key \"${key}\" on ${cellType} \"${this.id}\"`);\n            }\n            if (key !== 'attrs' && key !== 'shape' && diff) {\n                const preset = defaults[key];\n                if (ObjectExt.isEqual(val, preset)) {\n                    delete props[key];\n                }\n            }\n        });\n        Object.keys(attrs).forEach((key) => {\n            const attr = attrs[key];\n            const defaultAttr = defaultAttrs[key];\n            Object.keys(attr).forEach((name) => {\n                const value = attr[name];\n                const defaultValue = defaultAttr ? defaultAttr[name] : null;\n                if (value != null &&\n                    typeof value === 'object' &&\n                    !Array.isArray(value)) {\n                    Object.keys(value).forEach((subName) => {\n                        const subValue = value[subName];\n                        if (defaultAttr == null ||\n                            defaultValue == null ||\n                            !ObjectExt.isObject(defaultValue) ||\n                            !ObjectExt.isEqual(defaultValue[subName], subValue)) {\n                            if (finalAttrs[key] == null) {\n                                finalAttrs[key] = {};\n                            }\n                            if (finalAttrs[key][name] == null) {\n                                finalAttrs[key][name] = {};\n                            }\n                            const tmp = finalAttrs[key][name];\n                            tmp[subName] = subValue;\n                        }\n                    });\n                }\n                else if (defaultAttr == null ||\n                    !ObjectExt.isEqual(defaultValue, value)) {\n                    // `value` is not an object, default attribute with `key` does not\n                    // exist or it is different than the attribute value set on the cell.\n                    if (finalAttrs[key] == null) {\n                        finalAttrs[key] = {};\n                    }\n                    finalAttrs[key][name] = value;\n                }\n            });\n        });\n        const finalProps = Object.assign(Object.assign({}, props), { attrs: ObjectExt.isEmpty(finalAttrs) ? undefined : finalAttrs });\n        if (finalProps.attrs == null) {\n            delete finalProps.attrs;\n        }\n        const ret = finalProps;\n        if (ret.angle === 0) {\n            delete ret.angle;\n        }\n        return ObjectExt.cloneDeep(ret);\n    }\n    clone(options = {}) {\n        if (!options.deep) {\n            const data = Object.assign({}, this.store.get());\n            if (!options.keepId) {\n                delete data.id;\n            }\n            delete data.parent;\n            delete data.children;\n            const ctor = this.constructor;\n            return new ctor(data); // eslint-disable-line new-cap\n        }\n        // Deep cloning. Clone the cell itself and all its children.\n        const map = Cell.deepClone(this);\n        return map[this.id];\n    }\n    findView(graph) {\n        return graph.findViewByCell(this);\n    }\n    // #endregion\n    // #region batch\n    startBatch(name, data = {}, model = this.model) {\n        this.notify('batch:start', { name, data, cell: this });\n        if (model) {\n            model.startBatch(name, Object.assign(Object.assign({}, data), { cell: this }));\n        }\n        return this;\n    }\n    stopBatch(name, data = {}, model = this.model) {\n        if (model) {\n            model.stopBatch(name, Object.assign(Object.assign({}, data), { cell: this }));\n        }\n        this.notify('batch:stop', { name, data, cell: this });\n        return this;\n    }\n    batchUpdate(name, execute, data) {\n        // The model is null after cell was removed(remove batch).\n        // So we should temp save model to trigger pairing batch event.\n        const model = this.model;\n        this.startBatch(name, data, model);\n        const result = execute();\n        this.stopBatch(name, data, model);\n        return result;\n    }\n    // #endregion\n    // #region IDisposable\n    dispose() {\n        this.removeFromParent();\n        this.store.dispose();\n    }\n}\nCell.defaults = {};\nCell.attrHooks = {};\nCell.propHooks = [];\n__decorate([\n    Basecoat.dispose()\n], Cell.prototype, \"dispose\", null);\n(function (Cell) {\n    function normalizeTools(raw) {\n        if (typeof raw === 'string') {\n            return { items: [raw] };\n        }\n        if (Array.isArray(raw)) {\n            return { items: raw };\n        }\n        if (raw.items) {\n            return raw;\n        }\n        return {\n            items: [raw],\n        };\n    }\n    Cell.normalizeTools = normalizeTools;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    Cell.toStringTag = `X6.${Cell.name}`;\n    function isCell(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Cell) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const cell = instance;\n        if ((tag == null || tag === Cell.toStringTag) &&\n            typeof cell.isNode === 'function' &&\n            typeof cell.isEdge === 'function' &&\n            typeof cell.prop === 'function' &&\n            typeof cell.attr === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Cell.isCell = isCell;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    function getCommonAncestor(...cells) {\n        const ancestors = cells\n            .filter((cell) => cell != null)\n            .map((cell) => cell.getAncestors())\n            .sort((a, b) => {\n            return a.length - b.length;\n        });\n        const first = ancestors.shift();\n        return (first.find((cell) => ancestors.every((item) => item.includes(cell))) ||\n            null);\n    }\n    Cell.getCommonAncestor = getCommonAncestor;\n    function getCellsBBox(cells, options = {}) {\n        let bbox = null;\n        for (let i = 0, ii = cells.length; i < ii; i += 1) {\n            const cell = cells[i];\n            let rect = cell.getBBox(options);\n            if (rect) {\n                if (cell.isNode()) {\n                    const angle = cell.getAngle();\n                    if (angle != null && angle !== 0) {\n                        rect = rect.bbox(angle);\n                    }\n                }\n                bbox = bbox == null ? rect : bbox.union(rect);\n            }\n        }\n        return bbox;\n    }\n    Cell.getCellsBBox = getCellsBBox;\n    function deepClone(cell) {\n        const cells = [cell, ...cell.getDescendants({ deep: true })];\n        return Cell.cloneCells(cells);\n    }\n    Cell.deepClone = deepClone;\n    function cloneCells(cells) {\n        const inputs = ArrayExt.uniq(cells);\n        const cloneMap = inputs.reduce((map, cell) => {\n            map[cell.id] = cell.clone();\n            return map;\n        }, {});\n        inputs.forEach((cell) => {\n            const clone = cloneMap[cell.id];\n            if (clone.isEdge()) {\n                const sourceId = clone.getSourceCellId();\n                const targetId = clone.getTargetCellId();\n                if (sourceId && cloneMap[sourceId]) {\n                    // Source is a node and the node is among the clones.\n                    // Then update the source of the cloned edge.\n                    clone.setSource(Object.assign(Object.assign({}, clone.getSource()), { cell: cloneMap[sourceId].id }));\n                }\n                if (targetId && cloneMap[targetId]) {\n                    // Target is a node and the node is among the clones.\n                    // Then update the target of the cloned edge.\n                    clone.setTarget(Object.assign(Object.assign({}, clone.getTarget()), { cell: cloneMap[targetId].id }));\n                }\n            }\n            // Find the parent of the original cell\n            const parent = cell.getParent();\n            if (parent && cloneMap[parent.id]) {\n                clone.setParent(cloneMap[parent.id]);\n            }\n            // Find the children of the original cell\n            const children = cell.getChildren();\n            if (children && children.length) {\n                const embeds = children.reduce((memo, child) => {\n                    // Embedded cells that are not being cloned can not be carried\n                    // over with other embedded cells.\n                    if (cloneMap[child.id]) {\n                        memo.push(cloneMap[child.id]);\n                    }\n                    return memo;\n                }, []);\n                if (embeds.length > 0) {\n                    clone.setChildren(embeds);\n                }\n            }\n        });\n        return cloneMap;\n    }\n    Cell.cloneCells = cloneCells;\n})(Cell || (Cell = {}));\n(function (Cell) {\n    Cell.config({\n        propHooks(_a) {\n            var { tools } = _a, metadata = __rest(_a, [\"tools\"]);\n            if (tools) {\n                metadata.tools = Cell.normalizeTools(tools);\n            }\n            return metadata;\n        },\n    });\n})(Cell || (Cell = {}));\n//# sourceMappingURL=cell.js.map","export var ShareRegistry;\n(function (ShareRegistry) {\n    let edgeRegistry;\n    let nodeRegistry;\n    function exist(name, isNode) {\n        return isNode\n            ? edgeRegistry != null && edgeRegistry.exist(name)\n            : nodeRegistry != null && nodeRegistry.exist(name);\n    }\n    ShareRegistry.exist = exist;\n    function setEdgeRegistry(registry) {\n        edgeRegistry = registry;\n    }\n    ShareRegistry.setEdgeRegistry = setEdgeRegistry;\n    function setNodeRegistry(registry) {\n        nodeRegistry = registry;\n    }\n    ShareRegistry.setNodeRegistry = setNodeRegistry;\n})(ShareRegistry || (ShareRegistry = {}));\n//# sourceMappingURL=registry.js.map","import { ObjectExt } from '@antv/x6-common';\nimport { Point } from '@antv/x6-geometry';\nimport { PortLayout, PortLabelLayout } from '../registry';\nexport class PortManager {\n    constructor(data) {\n        this.ports = [];\n        this.groups = {};\n        this.init(ObjectExt.cloneDeep(data));\n    }\n    getPorts() {\n        return this.ports;\n    }\n    getGroup(groupName) {\n        return groupName != null ? this.groups[groupName] : null;\n    }\n    getPortsByGroup(groupName) {\n        return this.ports.filter((p) => p.group === groupName || (p.group == null && groupName == null));\n    }\n    getPortsLayoutByGroup(groupName, elemBBox) {\n        const ports = this.getPortsByGroup(groupName);\n        const group = groupName ? this.getGroup(groupName) : null;\n        const groupPosition = group ? group.position : null;\n        const groupPositionName = groupPosition ? groupPosition.name : null;\n        let layoutFn;\n        if (groupPositionName != null) {\n            const fn = PortLayout.registry.get(groupPositionName);\n            if (fn == null) {\n                return PortLayout.registry.onNotFound(groupPositionName);\n            }\n            layoutFn = fn;\n        }\n        else {\n            layoutFn = PortLayout.presets.left;\n        }\n        const portsArgs = ports.map((port) => (port && port.position && port.position.args) || {});\n        const groupArgs = (groupPosition && groupPosition.args) || {};\n        const layouts = layoutFn(portsArgs, elemBBox, groupArgs);\n        return layouts.map((portLayout, index) => {\n            const port = ports[index];\n            return {\n                portLayout,\n                portId: port.id,\n                portSize: port.size,\n                portAttrs: port.attrs,\n                labelSize: port.label.size,\n                labelLayout: this.getPortLabelLayout(port, Point.create(portLayout.position), elemBBox),\n            };\n        });\n    }\n    init(data) {\n        const { groups, items } = data;\n        if (groups != null) {\n            Object.keys(groups).forEach((key) => {\n                this.groups[key] = this.parseGroup(groups[key]);\n            });\n        }\n        if (Array.isArray(items)) {\n            items.forEach((item) => {\n                this.ports.push(this.parsePort(item));\n            });\n        }\n    }\n    parseGroup(group) {\n        return Object.assign(Object.assign({}, group), { label: this.getLabel(group, true), position: this.getPortPosition(group.position, true) });\n    }\n    parsePort(port) {\n        const result = Object.assign({}, port);\n        const group = this.getGroup(port.group) || {};\n        result.markup = result.markup || group.markup;\n        result.attrs = ObjectExt.merge({}, group.attrs, result.attrs);\n        result.position = this.createPosition(group, result);\n        result.label = ObjectExt.merge({}, group.label, this.getLabel(result));\n        result.zIndex = this.getZIndex(group, result);\n        result.size = Object.assign(Object.assign({}, group.size), result.size);\n        return result;\n    }\n    getZIndex(group, port) {\n        if (typeof port.zIndex === 'number') {\n            return port.zIndex;\n        }\n        if (typeof group.zIndex === 'number' || group.zIndex === 'auto') {\n            return group.zIndex;\n        }\n        return 'auto';\n    }\n    createPosition(group, port) {\n        return ObjectExt.merge({\n            name: 'left',\n            args: {},\n        }, group.position, { args: port.args });\n    }\n    getPortPosition(position, setDefault = false) {\n        if (position == null) {\n            if (setDefault) {\n                return { name: 'left', args: {} };\n            }\n        }\n        else {\n            if (typeof position === 'string') {\n                return {\n                    name: position,\n                    args: {},\n                };\n            }\n            if (Array.isArray(position)) {\n                return {\n                    name: 'absolute',\n                    args: { x: position[0], y: position[1] },\n                };\n            }\n            if (typeof position === 'object') {\n                return position;\n            }\n        }\n        return { args: {} };\n    }\n    getPortLabelPosition(position, setDefault = false) {\n        if (position == null) {\n            if (setDefault) {\n                return { name: 'left', args: {} };\n            }\n        }\n        else {\n            if (typeof position === 'string') {\n                return {\n                    name: position,\n                    args: {},\n                };\n            }\n            if (typeof position === 'object') {\n                return position;\n            }\n        }\n        return { args: {} };\n    }\n    getLabel(item, setDefaults = false) {\n        const label = item.label || {};\n        label.position = this.getPortLabelPosition(label.position, setDefaults);\n        return label;\n    }\n    getPortLabelLayout(port, portPosition, elemBBox) {\n        const name = port.label.position.name || 'left';\n        const args = port.label.position.args || {};\n        const layoutFn = PortLabelLayout.registry.get(name) || PortLabelLayout.presets.left;\n        if (layoutFn) {\n            return layoutFn(portPosition, elemBBox, args);\n        }\n        return null;\n    }\n}\n//# sourceMappingURL=port.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Point, Rectangle, Angle } from '@antv/x6-geometry';\nimport { StringExt, ObjectExt, NumberExt, Interp, } from '@antv/x6-common';\nimport { Registry } from '../registry/registry';\nimport { Markup } from '../view/markup';\nimport { Cell } from './cell';\nimport { ShareRegistry } from './registry';\nimport { PortManager } from './port';\nexport class Node extends Cell {\n    get [Symbol.toStringTag]() {\n        return Node.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super(metadata);\n        this.initPorts();\n    }\n    preprocess(metadata, ignoreIdCheck) {\n        const { x, y, width, height } = metadata, others = __rest(metadata, [\"x\", \"y\", \"width\", \"height\"]);\n        if (x != null || y != null) {\n            const position = others.position;\n            others.position = Object.assign(Object.assign({}, position), { x: x != null ? x : position ? position.x : 0, y: y != null ? y : position ? position.y : 0 });\n        }\n        if (width != null || height != null) {\n            const size = others.size;\n            others.size = Object.assign(Object.assign({}, size), { width: width != null ? width : size ? size.width : 0, height: height != null ? height : size ? size.height : 0 });\n        }\n        return super.preprocess(others, ignoreIdCheck);\n    }\n    isNode() {\n        return true;\n    }\n    size(width, height, options) {\n        if (width === undefined) {\n            return this.getSize();\n        }\n        if (typeof width === 'number') {\n            return this.setSize(width, height, options);\n        }\n        return this.setSize(width, height);\n    }\n    getSize() {\n        const size = this.store.get('size');\n        return size ? Object.assign({}, size) : { width: 1, height: 1 };\n    }\n    setSize(width, height, options) {\n        if (typeof width === 'object') {\n            this.resize(width.width, width.height, height);\n        }\n        else {\n            this.resize(width, height, options);\n        }\n        return this;\n    }\n    resize(width, height, options = {}) {\n        this.startBatch('resize', options);\n        const direction = options.direction;\n        if (direction) {\n            const currentSize = this.getSize();\n            switch (direction) {\n                case 'left':\n                case 'right':\n                    // Don't change height when resizing horizontally.\n                    height = currentSize.height; // eslint-disable-line\n                    break;\n                case 'top':\n                case 'bottom':\n                    // Don't change width when resizing vertically.\n                    width = currentSize.width; // eslint-disable-line\n                    break;\n                default:\n                    break;\n            }\n            const map = {\n                right: 0,\n                'top-right': 0,\n                top: 1,\n                'top-left': 1,\n                left: 2,\n                'bottom-left': 2,\n                bottom: 3,\n                'bottom-right': 3,\n            };\n            let quadrant = map[direction];\n            const angle = Angle.normalize(this.getAngle() || 0);\n            if (options.absolute) {\n                // We are taking the node's rotation into account\n                quadrant += Math.floor((angle + 45) / 90);\n                quadrant %= 4;\n            }\n            // This is a rectangle in size of the un-rotated node.\n            const bbox = this.getBBox();\n            // Pick the corner point on the node, which meant to stay on its\n            // place before and after the rotation.\n            let fixedPoint;\n            if (quadrant === 0) {\n                fixedPoint = bbox.getBottomLeft();\n            }\n            else if (quadrant === 1) {\n                fixedPoint = bbox.getCorner();\n            }\n            else if (quadrant === 2) {\n                fixedPoint = bbox.getTopRight();\n            }\n            else {\n                fixedPoint = bbox.getOrigin();\n            }\n            // Find an image of the previous indent point. This is the position,\n            // where is the point actually located on the screen.\n            const imageFixedPoint = fixedPoint\n                .clone()\n                .rotate(-angle, bbox.getCenter());\n            // Every point on the element rotates around a circle with the centre of\n            // rotation in the middle of the element while the whole element is being\n            // rotated. That means that the distance from a point in the corner of\n            // the element (supposed its always rect) to the center of the element\n            // doesn't change during the rotation and therefore it equals to a\n            // distance on un-rotated element.\n            // We can find the distance as DISTANCE = (ELEMENTWIDTH/2)^2 + (ELEMENTHEIGHT/2)^2)^0.5.\n            const radius = Math.sqrt(width * width + height * height) / 2;\n            // Now we are looking for an angle between x-axis and the line starting\n            // at image of fixed point and ending at the center of the element.\n            // We call this angle `alpha`.\n            // The image of a fixed point is located in n-th quadrant. For each\n            // quadrant passed going anti-clockwise we have to add 90 degrees.\n            // Note that the first quadrant has index 0.\n            //\n            // 3 | 2\n            // --c-- Quadrant positions around the element's center `c`\n            // 0 | 1\n            //\n            let alpha = (quadrant * Math.PI) / 2;\n            // Add an angle between the beginning of the current quadrant (line\n            // parallel with x-axis or y-axis going through the center of the\n            // element) and line crossing the indent of the fixed point and the\n            // center of the element. This is the angle we need but on the\n            // un-rotated element.\n            alpha += Math.atan(quadrant % 2 === 0 ? height / width : width / height);\n            // Lastly we have to deduct the original angle the element was rotated\n            // by and that's it.\n            alpha -= Angle.toRad(angle);\n            // With this angle and distance we can easily calculate the centre of\n            // the un-rotated element.\n            // Note that fromPolar constructor accepts an angle in radians.\n            const center = Point.fromPolar(radius, alpha, imageFixedPoint);\n            // The top left corner on the un-rotated element has to be half a width\n            // on the left and half a height to the top from the center. This will\n            // be the origin of rectangle we were looking for.\n            const origin = center.clone().translate(width / -2, height / -2);\n            this.store.set('size', { width, height }, options);\n            this.setPosition(origin.x, origin.y, options);\n        }\n        else {\n            this.store.set('size', { width, height }, options);\n        }\n        this.stopBatch('resize', options);\n        return this;\n    }\n    scale(sx, sy, origin, options = {}) {\n        const scaledBBox = this.getBBox().scale(sx, sy, origin == null ? undefined : origin);\n        this.startBatch('scale', options);\n        this.setPosition(scaledBBox.x, scaledBBox.y, options);\n        this.resize(scaledBBox.width, scaledBBox.height, options);\n        this.stopBatch('scale');\n        return this;\n    }\n    position(arg0, arg1, arg2) {\n        if (typeof arg0 === 'number') {\n            return this.setPosition(arg0, arg1, arg2);\n        }\n        return this.getPosition(arg0);\n    }\n    getPosition(options = {}) {\n        if (options.relative) {\n            const parent = this.getParent();\n            if (parent != null && parent.isNode()) {\n                const currentPosition = this.getPosition();\n                const parentPosition = parent.getPosition();\n                return {\n                    x: currentPosition.x - parentPosition.x,\n                    y: currentPosition.y - parentPosition.y,\n                };\n            }\n        }\n        const pos = this.store.get('position');\n        return pos ? Object.assign({}, pos) : { x: 0, y: 0 };\n    }\n    setPosition(arg0, arg1, arg2 = {}) {\n        let x;\n        let y;\n        let options;\n        if (typeof arg0 === 'object') {\n            x = arg0.x;\n            y = arg0.y;\n            options = arg1 || {};\n        }\n        else {\n            x = arg0;\n            y = arg1;\n            options = arg2 || {};\n        }\n        if (options.relative) {\n            const parent = this.getParent();\n            if (parent != null && parent.isNode()) {\n                const parentPosition = parent.getPosition();\n                x += parentPosition.x;\n                y += parentPosition.y;\n            }\n        }\n        if (options.deep) {\n            const currentPosition = this.getPosition();\n            this.translate(x - currentPosition.x, y - currentPosition.y, options);\n        }\n        else {\n            this.store.set('position', { x, y }, options);\n        }\n        return this;\n    }\n    translate(tx = 0, ty = 0, options = {}) {\n        if (tx === 0 && ty === 0) {\n            return this;\n        }\n        // Pass the initiator of the translation.\n        options.translateBy = options.translateBy || this.id;\n        const position = this.getPosition();\n        if (options.restrict != null && options.translateBy === this.id) {\n            // We are restricting the translation for the element itself only. We get\n            // the bounding box of the element including all its embeds.\n            // All embeds have to be translated the exact same way as the element.\n            const bbox = this.getBBox({ deep: true });\n            const ra = options.restrict;\n            // - - - - - - - - - - - - -> ra.x + ra.width\n            // - - - -> position.x      |\n            // -> bbox.x\n            //                ▓▓▓▓▓▓▓   |\n            //         ░░░░░░░▓▓▓▓▓▓▓\n            //         ░░░░░░░░░        |\n            //   ▓▓▓▓▓▓▓▓░░░░░░░\n            //   ▓▓▓▓▓▓▓▓               |\n            //   <-dx->                     | restricted area right border\n            //         <-width->        |   ░ translated element\n            //   <- - bbox.width - ->       ▓ embedded element\n            const dx = position.x - bbox.x;\n            const dy = position.y - bbox.y;\n            // Find the maximal/minimal coordinates that the element can be translated\n            // while complies the restrictions.\n            const x = Math.max(ra.x + dx, Math.min(ra.x + ra.width + dx - bbox.width, position.x + tx));\n            const y = Math.max(ra.y + dy, Math.min(ra.y + ra.height + dy - bbox.height, position.y + ty));\n            // recalculate the translation taking the restrictions into account.\n            tx = x - position.x; // eslint-disable-line\n            ty = y - position.y; // eslint-disable-line\n        }\n        const translatedPosition = {\n            x: position.x + tx,\n            y: position.y + ty,\n        };\n        // To find out by how much an element was translated in event\n        // 'change:position' handlers.\n        options.tx = tx;\n        options.ty = ty;\n        if (options.transition) {\n            if (typeof options.transition !== 'object') {\n                options.transition = {};\n            }\n            this.transition('position', translatedPosition, Object.assign(Object.assign({}, options.transition), { interp: Interp.object }));\n            this.eachChild((child) => {\n                var _a;\n                const excluded = (_a = options.exclude) === null || _a === void 0 ? void 0 : _a.includes(child);\n                if (!excluded) {\n                    child.translate(tx, ty, options);\n                }\n            });\n        }\n        else {\n            this.startBatch('translate', options);\n            this.store.set('position', translatedPosition, options);\n            this.eachChild((child) => {\n                var _a;\n                const excluded = (_a = options.exclude) === null || _a === void 0 ? void 0 : _a.includes(child);\n                if (!excluded) {\n                    child.translate(tx, ty, options);\n                }\n            });\n            this.stopBatch('translate', options);\n        }\n        return this;\n    }\n    angle(val, options) {\n        if (val == null) {\n            return this.getAngle();\n        }\n        return this.rotate(val, options);\n    }\n    getAngle() {\n        return this.store.get('angle', 0);\n    }\n    rotate(angle, options = {}) {\n        const currentAngle = this.getAngle();\n        if (options.center) {\n            const size = this.getSize();\n            const position = this.getPosition();\n            const center = this.getBBox().getCenter();\n            center.rotate(currentAngle - angle, options.center);\n            const dx = center.x - size.width / 2 - position.x;\n            const dy = center.y - size.height / 2 - position.y;\n            this.startBatch('rotate', { angle, options });\n            this.setPosition(position.x + dx, position.y + dy, options);\n            this.rotate(angle, Object.assign(Object.assign({}, options), { center: null }));\n            this.stopBatch('rotate');\n        }\n        else {\n            this.store.set('angle', options.absolute ? angle : (currentAngle + angle) % 360, options);\n        }\n        return this;\n    }\n    // #endregion\n    // #region common\n    getBBox(options = {}) {\n        if (options.deep) {\n            const cells = this.getDescendants({ deep: true, breadthFirst: true });\n            cells.push(this);\n            return Cell.getCellsBBox(cells);\n        }\n        return Rectangle.fromPositionAndSize(this.getPosition(), this.getSize());\n    }\n    getConnectionPoint(edge, type) {\n        const bbox = this.getBBox();\n        const center = bbox.getCenter();\n        const terminal = edge.getTerminal(type);\n        if (terminal == null) {\n            return center;\n        }\n        const portId = terminal.port;\n        if (!portId || !this.hasPort(portId)) {\n            return center;\n        }\n        const port = this.getPort(portId);\n        if (!port || !port.group) {\n            return center;\n        }\n        const layouts = this.getPortsPosition(port.group);\n        const position = layouts[portId].position;\n        const portCenter = Point.create(position).translate(bbox.getOrigin());\n        const angle = this.getAngle();\n        if (angle) {\n            portCenter.rotate(-angle, center);\n        }\n        return portCenter;\n    }\n    /**\n     * Sets cell's size and position based on the children bbox and given padding.\n     */\n    fit(options = {}) {\n        const children = this.getChildren() || [];\n        const embeds = children.filter((cell) => cell.isNode());\n        if (embeds.length === 0) {\n            return this;\n        }\n        this.startBatch('fit-embeds', options);\n        if (options.deep) {\n            embeds.forEach((cell) => cell.fit(options));\n        }\n        let { x, y, width, height } = Cell.getCellsBBox(embeds);\n        const padding = NumberExt.normalizeSides(options.padding);\n        x -= padding.left;\n        y -= padding.top;\n        width += padding.left + padding.right;\n        height += padding.bottom + padding.top;\n        this.store.set({\n            position: { x, y },\n            size: { width, height },\n        }, options);\n        this.stopBatch('fit-embeds');\n        return this;\n    }\n    // #endregion\n    // #region ports\n    get portContainerMarkup() {\n        return this.getPortContainerMarkup();\n    }\n    set portContainerMarkup(markup) {\n        this.setPortContainerMarkup(markup);\n    }\n    getDefaultPortContainerMarkup() {\n        return (this.store.get('defaultPortContainerMarkup') ||\n            Markup.getPortContainerMarkup());\n    }\n    getPortContainerMarkup() {\n        return (this.store.get('portContainerMarkup') ||\n            this.getDefaultPortContainerMarkup());\n    }\n    setPortContainerMarkup(markup, options = {}) {\n        this.store.set('portContainerMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get portMarkup() {\n        return this.getPortMarkup();\n    }\n    set portMarkup(markup) {\n        this.setPortMarkup(markup);\n    }\n    getDefaultPortMarkup() {\n        return this.store.get('defaultPortMarkup') || Markup.getPortMarkup();\n    }\n    getPortMarkup() {\n        return this.store.get('portMarkup') || this.getDefaultPortMarkup();\n    }\n    setPortMarkup(markup, options = {}) {\n        this.store.set('portMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get portLabelMarkup() {\n        return this.getPortLabelMarkup();\n    }\n    set portLabelMarkup(markup) {\n        this.setPortLabelMarkup(markup);\n    }\n    getDefaultPortLabelMarkup() {\n        return (this.store.get('defaultPortLabelMarkup') || Markup.getPortLabelMarkup());\n    }\n    getPortLabelMarkup() {\n        return this.store.get('portLabelMarkup') || this.getDefaultPortLabelMarkup();\n    }\n    setPortLabelMarkup(markup, options = {}) {\n        this.store.set('portLabelMarkup', Markup.clone(markup), options);\n        return this;\n    }\n    get ports() {\n        const res = this.store.get('ports', { items: [] });\n        if (res.items == null) {\n            res.items = [];\n        }\n        return res;\n    }\n    getPorts() {\n        return ObjectExt.cloneDeep(this.ports.items);\n    }\n    getPortsByGroup(groupName) {\n        return this.getPorts().filter((port) => port.group === groupName);\n    }\n    getPort(portId) {\n        return ObjectExt.cloneDeep(this.ports.items.find((port) => port.id && port.id === portId));\n    }\n    getPortAt(index) {\n        return this.ports.items[index] || null;\n    }\n    hasPorts() {\n        return this.ports.items.length > 0;\n    }\n    hasPort(portId) {\n        return this.getPortIndex(portId) !== -1;\n    }\n    getPortIndex(port) {\n        const portId = typeof port === 'string' ? port : port.id;\n        return portId != null\n            ? this.ports.items.findIndex((item) => item.id === portId)\n            : -1;\n    }\n    getPortsPosition(groupName) {\n        const size = this.getSize();\n        const layouts = this.port.getPortsLayoutByGroup(groupName, new Rectangle(0, 0, size.width, size.height));\n        return layouts.reduce((memo, item) => {\n            const layout = item.portLayout;\n            memo[item.portId] = {\n                position: Object.assign({}, layout.position),\n                angle: layout.angle || 0,\n            };\n            return memo;\n        }, {});\n    }\n    getPortProp(portId, path) {\n        return this.getPropByPath(this.prefixPortPath(portId, path));\n    }\n    setPortProp(portId, arg1, arg2, arg3) {\n        if (typeof arg1 === 'string' || Array.isArray(arg1)) {\n            const path = this.prefixPortPath(portId, arg1);\n            const value = arg2;\n            return this.setPropByPath(path, value, arg3);\n        }\n        const path = this.prefixPortPath(portId);\n        const value = arg1;\n        return this.setPropByPath(path, value, arg2);\n    }\n    removePortProp(portId, path, options) {\n        if (typeof path === 'string' || Array.isArray(path)) {\n            return this.removePropByPath(this.prefixPortPath(portId, path), options);\n        }\n        return this.removePropByPath(this.prefixPortPath(portId), path);\n    }\n    portProp(portId, path, value, options) {\n        if (path == null) {\n            return this.getPortProp(portId);\n        }\n        if (typeof path === 'string' || Array.isArray(path)) {\n            if (arguments.length === 2) {\n                return this.getPortProp(portId, path);\n            }\n            if (value == null) {\n                return this.removePortProp(portId, path, options);\n            }\n            return this.setPortProp(portId, path, value, options);\n        }\n        return this.setPortProp(portId, path, value);\n    }\n    prefixPortPath(portId, path) {\n        const index = this.getPortIndex(portId);\n        if (index === -1) {\n            throw new Error(`Unable to find port with id: \"${portId}\"`);\n        }\n        if (path == null || path === '') {\n            return ['ports', 'items', `${index}`];\n        }\n        if (Array.isArray(path)) {\n            return ['ports', 'items', `${index}`, ...path];\n        }\n        return `ports/items/${index}/${path}`;\n    }\n    addPort(port, options) {\n        const ports = [...this.ports.items];\n        ports.push(port);\n        this.setPropByPath('ports/items', ports, options);\n        return this;\n    }\n    addPorts(ports, options) {\n        this.setPropByPath('ports/items', [...this.ports.items, ...ports], options);\n        return this;\n    }\n    insertPort(index, port, options) {\n        const ports = [...this.ports.items];\n        ports.splice(index, 0, port);\n        this.setPropByPath('ports/items', ports, options);\n        return this;\n    }\n    removePort(port, options = {}) {\n        return this.removePortAt(this.getPortIndex(port), options);\n    }\n    removePortAt(index, options = {}) {\n        if (index >= 0) {\n            const ports = [...this.ports.items];\n            ports.splice(index, 1);\n            options.rewrite = true;\n            this.setPropByPath('ports/items', ports, options);\n        }\n        return this;\n    }\n    removePorts(portsForRemoval, opt) {\n        let options;\n        if (Array.isArray(portsForRemoval)) {\n            options = opt || {};\n            if (portsForRemoval.length) {\n                options.rewrite = true;\n                const currentPorts = [...this.ports.items];\n                const remainingPorts = currentPorts.filter((cp) => !portsForRemoval.some((p) => {\n                    const id = typeof p === 'string' ? p : p.id;\n                    return cp.id === id;\n                }));\n                this.setPropByPath('ports/items', remainingPorts, options);\n            }\n        }\n        else {\n            options = portsForRemoval || {};\n            options.rewrite = true;\n            this.setPropByPath('ports/items', [], options);\n        }\n        return this;\n    }\n    getParsedPorts() {\n        return this.port.getPorts();\n    }\n    getParsedGroups() {\n        return this.port.groups;\n    }\n    getPortsLayoutByGroup(groupName, bbox) {\n        return this.port.getPortsLayoutByGroup(groupName, bbox);\n    }\n    initPorts() {\n        this.updatePortData();\n        this.on('change:ports', () => {\n            this.processRemovedPort();\n            this.updatePortData();\n        });\n    }\n    processRemovedPort() {\n        const current = this.ports;\n        const currentItemsMap = {};\n        current.items.forEach((item) => {\n            if (item.id) {\n                currentItemsMap[item.id] = true;\n            }\n        });\n        const removed = {};\n        const previous = this.store.getPrevious('ports') || {\n            items: [],\n        };\n        previous.items.forEach((item) => {\n            if (item.id && !currentItemsMap[item.id]) {\n                removed[item.id] = true;\n            }\n        });\n        const model = this.model;\n        if (model && !ObjectExt.isEmpty(removed)) {\n            const incomings = model.getConnectedEdges(this, { incoming: true });\n            incomings.forEach((edge) => {\n                const portId = edge.getTargetPortId();\n                if (portId && removed[portId]) {\n                    edge.remove();\n                }\n            });\n            const outgoings = model.getConnectedEdges(this, { outgoing: true });\n            outgoings.forEach((edge) => {\n                const portId = edge.getSourcePortId();\n                if (portId && removed[portId]) {\n                    edge.remove();\n                }\n            });\n        }\n    }\n    validatePorts() {\n        const ids = {};\n        const errors = [];\n        this.ports.items.forEach((p) => {\n            if (typeof p !== 'object') {\n                errors.push(`Invalid port ${p}.`);\n            }\n            if (p.id == null) {\n                p.id = this.generatePortId();\n            }\n            if (ids[p.id]) {\n                errors.push('Duplicitied port id.');\n            }\n            ids[p.id] = true;\n        });\n        return errors;\n    }\n    generatePortId() {\n        return StringExt.uuid();\n    }\n    updatePortData() {\n        const err = this.validatePorts();\n        if (err.length > 0) {\n            this.store.set('ports', this.store.getPrevious('ports'));\n            throw new Error(err.join(' '));\n        }\n        const prev = this.port ? this.port.getPorts() : null;\n        this.port = new PortManager(this.ports);\n        const curr = this.port.getPorts();\n        const added = prev\n            ? curr.filter((item) => {\n                if (!prev.find((prevPort) => prevPort.id === item.id)) {\n                    return item;\n                }\n                return null;\n            })\n            : [...curr];\n        const removed = prev\n            ? prev.filter((item) => {\n                if (!curr.find((curPort) => curPort.id === item.id)) {\n                    return item;\n                }\n                return null;\n            })\n            : [];\n        if (added.length > 0) {\n            this.notify('ports:added', { added, cell: this, node: this });\n        }\n        if (removed.length > 0) {\n            this.notify('ports:removed', { removed, cell: this, node: this });\n        }\n    }\n}\nNode.defaults = {\n    angle: 0,\n    position: { x: 0, y: 0 },\n    size: { width: 1, height: 1 },\n};\n(function (Node) {\n    Node.toStringTag = `X6.${Node.name}`;\n    function isNode(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Node) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const node = instance;\n        if ((tag == null || tag === Node.toStringTag) &&\n            typeof node.isNode === 'function' &&\n            typeof node.isEdge === 'function' &&\n            typeof node.prop === 'function' &&\n            typeof node.attr === 'function' &&\n            typeof node.size === 'function' &&\n            typeof node.position === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Node.isNode = isNode;\n})(Node || (Node = {}));\n(function (Node) {\n    Node.config({\n        propHooks(_a) {\n            var { ports } = _a, metadata = __rest(_a, [\"ports\"]);\n            if (ports) {\n                metadata.ports = Array.isArray(ports) ? { items: ports } : ports;\n            }\n            return metadata;\n        },\n    });\n})(Node || (Node = {}));\n(function (Node) {\n    Node.registry = Registry.create({\n        type: 'node',\n        process(shape, options) {\n            if (ShareRegistry.exist(shape, true)) {\n                throw new Error(`Node with name '${shape}' was registered by anthor Edge`);\n            }\n            if (typeof options === 'function') {\n                options.config({ shape });\n                return options;\n            }\n            let parent = Node;\n            const { inherit } = options, config = __rest(options, [\"inherit\"]);\n            if (inherit) {\n                if (typeof inherit === 'string') {\n                    const base = this.get(inherit);\n                    if (base == null) {\n                        this.onNotFound(inherit, 'inherited');\n                    }\n                    else {\n                        parent = base;\n                    }\n                }\n                else {\n                    parent = inherit;\n                }\n            }\n            if (config.constructorName == null) {\n                config.constructorName = shape;\n            }\n            const ctor = parent.define.call(parent, config);\n            ctor.config({ shape });\n            return ctor;\n        },\n    });\n    ShareRegistry.setNodeRegistry(Node.registry);\n})(Node || (Node = {}));\n(function (Node) {\n    let counter = 0;\n    function getClassName(name) {\n        if (name) {\n            return StringExt.pascalCase(name);\n        }\n        counter += 1;\n        return `CustomNode${counter}`;\n    }\n    function define(config) {\n        const { constructorName, overwrite } = config, others = __rest(config, [\"constructorName\", \"overwrite\"]);\n        const ctor = ObjectExt.createClass(getClassName(constructorName || others.shape), this);\n        ctor.config(others);\n        if (others.shape) {\n            Node.registry.register(others.shape, ctor, overwrite);\n        }\n        return ctor;\n    }\n    Node.define = define;\n    function create(options) {\n        const shape = options.shape || 'rect';\n        const Ctor = Node.registry.get(shape);\n        if (Ctor) {\n            return new Ctor(options);\n        }\n        return Node.registry.onNotFound(shape);\n    }\n    Node.create = create;\n})(Node || (Node = {}));\n//# sourceMappingURL=node.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt, StringExt } from '@antv/x6-common';\nimport { Point, Polyline } from '@antv/x6-geometry';\nimport { Registry } from '../registry/registry';\nimport { Markup } from '../view/markup';\nimport { ShareRegistry } from './registry';\nimport { Cell } from './cell';\nexport class Edge extends Cell {\n    get [Symbol.toStringTag]() {\n        return Edge.toStringTag;\n    }\n    constructor(metadata = {}) {\n        super(metadata);\n    }\n    preprocess(metadata, ignoreIdCheck) {\n        const { source, sourceCell, sourcePort, sourcePoint, target, targetCell, targetPort, targetPoint } = metadata, others = __rest(metadata, [\"source\", \"sourceCell\", \"sourcePort\", \"sourcePoint\", \"target\", \"targetCell\", \"targetPort\", \"targetPoint\"]);\n        const data = others;\n        const isValidId = (val) => typeof val === 'string' || typeof val === 'number';\n        if (source != null) {\n            if (Cell.isCell(source)) {\n                data.source = { cell: source.id };\n            }\n            else if (isValidId(source)) {\n                data.source = { cell: source };\n            }\n            else if (Point.isPoint(source)) {\n                data.source = source.toJSON();\n            }\n            else if (Array.isArray(source)) {\n                data.source = { x: source[0], y: source[1] };\n            }\n            else {\n                const cell = source.cell;\n                if (Cell.isCell(cell)) {\n                    data.source = Object.assign(Object.assign({}, source), { cell: cell.id });\n                }\n                else {\n                    data.source = source;\n                }\n            }\n        }\n        if (sourceCell != null || sourcePort != null) {\n            let terminal = data.source;\n            if (sourceCell != null) {\n                const id = isValidId(sourceCell) ? sourceCell : sourceCell.id;\n                if (terminal) {\n                    terminal.cell = id;\n                }\n                else {\n                    terminal = data.source = { cell: id };\n                }\n            }\n            if (sourcePort != null && terminal) {\n                terminal.port = sourcePort;\n            }\n        }\n        else if (sourcePoint != null) {\n            data.source = Point.create(sourcePoint).toJSON();\n        }\n        if (target != null) {\n            if (Cell.isCell(target)) {\n                data.target = { cell: target.id };\n            }\n            else if (isValidId(target)) {\n                data.target = { cell: target };\n            }\n            else if (Point.isPoint(target)) {\n                data.target = target.toJSON();\n            }\n            else if (Array.isArray(target)) {\n                data.target = { x: target[0], y: target[1] };\n            }\n            else {\n                const cell = target.cell;\n                if (Cell.isCell(cell)) {\n                    data.target = Object.assign(Object.assign({}, target), { cell: cell.id });\n                }\n                else {\n                    data.target = target;\n                }\n            }\n        }\n        if (targetCell != null || targetPort != null) {\n            let terminal = data.target;\n            if (targetCell != null) {\n                const id = isValidId(targetCell) ? targetCell : targetCell.id;\n                if (terminal) {\n                    terminal.cell = id;\n                }\n                else {\n                    terminal = data.target = { cell: id };\n                }\n            }\n            if (targetPort != null && terminal) {\n                terminal.port = targetPort;\n            }\n        }\n        else if (targetPoint != null) {\n            data.target = Point.create(targetPoint).toJSON();\n        }\n        return super.preprocess(data, ignoreIdCheck);\n    }\n    setup() {\n        super.setup();\n        this.on('change:labels', (args) => this.onLabelsChanged(args));\n        this.on('change:vertices', (args) => this.onVertexsChanged(args));\n    }\n    isEdge() {\n        return true;\n    }\n    // #region terminal\n    disconnect(options = {}) {\n        this.store.set({\n            source: { x: 0, y: 0 },\n            target: { x: 0, y: 0 },\n        }, options);\n        return this;\n    }\n    get source() {\n        return this.getSource();\n    }\n    set source(data) {\n        this.setSource(data);\n    }\n    getSource() {\n        return this.getTerminal('source');\n    }\n    getSourceCellId() {\n        return this.source.cell;\n    }\n    getSourcePortId() {\n        return this.source.port;\n    }\n    setSource(source, args, options = {}) {\n        return this.setTerminal('source', source, args, options);\n    }\n    get target() {\n        return this.getTarget();\n    }\n    set target(data) {\n        this.setTarget(data);\n    }\n    getTarget() {\n        return this.getTerminal('target');\n    }\n    getTargetCellId() {\n        return this.target.cell;\n    }\n    getTargetPortId() {\n        return this.target.port;\n    }\n    setTarget(target, args, options = {}) {\n        return this.setTerminal('target', target, args, options);\n    }\n    getTerminal(type) {\n        return Object.assign({}, this.store.get(type));\n    }\n    setTerminal(type, terminal, args, options = {}) {\n        // `terminal` is a cell\n        if (Cell.isCell(terminal)) {\n            this.store.set(type, ObjectExt.merge({}, args, { cell: terminal.id }), options);\n            return this;\n        }\n        // `terminal` is a point-like object\n        const p = terminal;\n        if (Point.isPoint(terminal) || (p.x != null && p.y != null)) {\n            this.store.set(type, ObjectExt.merge({}, args, { x: p.x, y: p.y }), options);\n            return this;\n        }\n        // `terminal` is an object\n        this.store.set(type, ObjectExt.cloneDeep(terminal), options);\n        return this;\n    }\n    getSourcePoint() {\n        return this.getTerminalPoint('source');\n    }\n    getTargetPoint() {\n        return this.getTerminalPoint('target');\n    }\n    getTerminalPoint(type) {\n        const terminal = this[type];\n        if (Point.isPointLike(terminal)) {\n            return Point.create(terminal);\n        }\n        const cell = this.getTerminalCell(type);\n        if (cell) {\n            return cell.getConnectionPoint(this, type);\n        }\n        return new Point();\n    }\n    getSourceCell() {\n        return this.getTerminalCell('source');\n    }\n    getTargetCell() {\n        return this.getTerminalCell('target');\n    }\n    getTerminalCell(type) {\n        if (this.model) {\n            const cellId = type === 'source' ? this.getSourceCellId() : this.getTargetCellId();\n            if (cellId) {\n                return this.model.getCell(cellId);\n            }\n        }\n        return null;\n    }\n    getSourceNode() {\n        return this.getTerminalNode('source');\n    }\n    getTargetNode() {\n        return this.getTerminalNode('target');\n    }\n    getTerminalNode(type) {\n        let cell = this; // eslint-disable-line\n        const visited = {};\n        while (cell && cell.isEdge()) {\n            if (visited[cell.id]) {\n                return null;\n            }\n            visited[cell.id] = true;\n            cell = cell.getTerminalCell(type);\n        }\n        return cell && cell.isNode() ? cell : null;\n    }\n    // #endregion\n    // #region router\n    get router() {\n        return this.getRouter();\n    }\n    set router(data) {\n        if (data == null) {\n            this.removeRouter();\n        }\n        else {\n            this.setRouter(data);\n        }\n    }\n    getRouter() {\n        return this.store.get('router');\n    }\n    setRouter(name, args, options) {\n        if (typeof name === 'object') {\n            this.store.set('router', name, args);\n        }\n        else {\n            this.store.set('router', { name, args }, options);\n        }\n        return this;\n    }\n    removeRouter(options = {}) {\n        this.store.remove('router', options);\n        return this;\n    }\n    // #endregion\n    // #region connector\n    get connector() {\n        return this.getConnector();\n    }\n    set connector(data) {\n        if (data == null) {\n            this.removeConnector();\n        }\n        else {\n            this.setConnector(data);\n        }\n    }\n    getConnector() {\n        return this.store.get('connector');\n    }\n    setConnector(name, args, options) {\n        if (typeof name === 'object') {\n            this.store.set('connector', name, args);\n        }\n        else {\n            this.store.set('connector', { name, args }, options);\n        }\n        return this;\n    }\n    removeConnector(options = {}) {\n        return this.store.remove('connector', options);\n    }\n    // #endregion\n    // #region labels\n    getDefaultLabel() {\n        const ctor = this.constructor;\n        const defaults = this.store.get('defaultLabel') || ctor.defaultLabel || {};\n        return ObjectExt.cloneDeep(defaults);\n    }\n    get labels() {\n        return this.getLabels();\n    }\n    set labels(labels) {\n        this.setLabels(labels);\n    }\n    getLabels() {\n        return [...this.store.get('labels', [])].map((item) => this.parseLabel(item));\n    }\n    setLabels(labels, options = {}) {\n        this.store.set('labels', Array.isArray(labels) ? labels : [labels], options);\n        return this;\n    }\n    insertLabel(label, index, options = {}) {\n        const labels = this.getLabels();\n        const len = labels.length;\n        let idx = index != null && Number.isFinite(index) ? index : len;\n        if (idx < 0) {\n            idx = len + idx + 1;\n        }\n        labels.splice(idx, 0, this.parseLabel(label));\n        return this.setLabels(labels, options);\n    }\n    appendLabel(label, options = {}) {\n        return this.insertLabel(label, -1, options);\n    }\n    getLabelAt(index) {\n        const labels = this.getLabels();\n        if (index != null && Number.isFinite(index)) {\n            return this.parseLabel(labels[index]);\n        }\n        return null;\n    }\n    setLabelAt(index, label, options = {}) {\n        if (index != null && Number.isFinite(index)) {\n            const labels = this.getLabels();\n            labels[index] = this.parseLabel(label);\n            this.setLabels(labels, options);\n        }\n        return this;\n    }\n    removeLabelAt(index, options = {}) {\n        const labels = this.getLabels();\n        const idx = index != null && Number.isFinite(index) ? index : -1;\n        const removed = labels.splice(idx, 1);\n        this.setLabels(labels, options);\n        return removed.length ? removed[0] : null;\n    }\n    parseLabel(label) {\n        if (typeof label === 'string') {\n            const ctor = this.constructor;\n            return ctor.parseStringLabel(label);\n        }\n        return label;\n    }\n    onLabelsChanged({ previous, current, }) {\n        const added = previous && current\n            ? current.filter((label1) => {\n                if (!previous.find((label2) => label1 === label2 || ObjectExt.isEqual(label1, label2))) {\n                    return label1;\n                }\n                return null;\n            })\n            : current\n                ? [...current]\n                : [];\n        const removed = previous && current\n            ? previous.filter((label1) => {\n                if (!current.find((label2) => label1 === label2 || ObjectExt.isEqual(label1, label2))) {\n                    return label1;\n                }\n                return null;\n            })\n            : previous\n                ? [...previous]\n                : [];\n        if (added.length > 0) {\n            this.notify('labels:added', { added, cell: this, edge: this });\n        }\n        if (removed.length > 0) {\n            this.notify('labels:removed', { removed, cell: this, edge: this });\n        }\n    }\n    // #endregion\n    // #region vertices\n    get vertices() {\n        return this.getVertices();\n    }\n    set vertices(vertices) {\n        this.setVertices(vertices);\n    }\n    getVertices() {\n        return [...this.store.get('vertices', [])];\n    }\n    setVertices(vertices, options = {}) {\n        const points = Array.isArray(vertices) ? vertices : [vertices];\n        this.store.set('vertices', points.map((p) => Point.toJSON(p)), options);\n        return this;\n    }\n    insertVertex(vertice, index, options = {}) {\n        const vertices = this.getVertices();\n        const len = vertices.length;\n        let idx = index != null && Number.isFinite(index) ? index : len;\n        if (idx < 0) {\n            idx = len + idx + 1;\n        }\n        vertices.splice(idx, 0, Point.toJSON(vertice));\n        return this.setVertices(vertices, options);\n    }\n    appendVertex(vertex, options = {}) {\n        return this.insertVertex(vertex, -1, options);\n    }\n    getVertexAt(index) {\n        if (index != null && Number.isFinite(index)) {\n            const vertices = this.getVertices();\n            return vertices[index];\n        }\n        return null;\n    }\n    setVertexAt(index, vertice, options = {}) {\n        if (index != null && Number.isFinite(index)) {\n            const vertices = this.getVertices();\n            vertices[index] = vertice;\n            this.setVertices(vertices, options);\n        }\n        return this;\n    }\n    removeVertexAt(index, options = {}) {\n        const vertices = this.getVertices();\n        const idx = index != null && Number.isFinite(index) ? index : -1;\n        vertices.splice(idx, 1);\n        return this.setVertices(vertices, options);\n    }\n    onVertexsChanged({ previous, current, }) {\n        const added = previous && current\n            ? current.filter((p1) => {\n                if (!previous.find((p2) => Point.equals(p1, p2))) {\n                    return p1;\n                }\n                return null;\n            })\n            : current\n                ? [...current]\n                : [];\n        const removed = previous && current\n            ? previous.filter((p1) => {\n                if (!current.find((p2) => Point.equals(p1, p2))) {\n                    return p1;\n                }\n                return null;\n            })\n            : previous\n                ? [...previous]\n                : [];\n        if (added.length > 0) {\n            this.notify('vertexs:added', { added, cell: this, edge: this });\n        }\n        if (removed.length > 0) {\n            this.notify('vertexs:removed', { removed, cell: this, edge: this });\n        }\n    }\n    // #endregion\n    // #region markup\n    getDefaultMarkup() {\n        return this.store.get('defaultMarkup') || Markup.getEdgeMarkup();\n    }\n    getMarkup() {\n        return super.getMarkup() || this.getDefaultMarkup();\n    }\n    // #endregion\n    // #region transform\n    /**\n     * Translate the edge vertices (and source and target if they are points)\n     * by `tx` pixels in the x-axis and `ty` pixels in the y-axis.\n     */\n    translate(tx, ty, options = {}) {\n        options.translateBy = options.translateBy || this.id;\n        options.tx = tx;\n        options.ty = ty;\n        return this.applyToPoints((p) => ({\n            x: (p.x || 0) + tx,\n            y: (p.y || 0) + ty,\n        }), options);\n    }\n    /**\n     * Scales the edge's points (vertices) relative to the given origin.\n     */\n    scale(sx, sy, origin, options = {}) {\n        return this.applyToPoints((p) => {\n            return Point.create(p).scale(sx, sy, origin).toJSON();\n        }, options);\n    }\n    applyToPoints(worker, options = {}) {\n        const attrs = {};\n        const source = this.getSource();\n        const target = this.getTarget();\n        if (Point.isPointLike(source)) {\n            attrs.source = worker(source);\n        }\n        if (Point.isPointLike(target)) {\n            attrs.target = worker(target);\n        }\n        const vertices = this.getVertices();\n        if (vertices.length > 0) {\n            attrs.vertices = vertices.map(worker);\n        }\n        this.store.set(attrs, options);\n        return this;\n    }\n    // #endregion\n    // #region common\n    getBBox() {\n        return this.getPolyline().bbox();\n    }\n    getConnectionPoint() {\n        return this.getPolyline().pointAt(0.5);\n    }\n    getPolyline() {\n        const points = [\n            this.getSourcePoint(),\n            ...this.getVertices().map((vertice) => Point.create(vertice)),\n            this.getTargetPoint(),\n        ];\n        return new Polyline(points);\n    }\n    updateParent(options) {\n        let newParent = null;\n        const source = this.getSourceCell();\n        const target = this.getTargetCell();\n        const prevParent = this.getParent();\n        if (source && target) {\n            if (source === target || source.isDescendantOf(target)) {\n                newParent = target;\n            }\n            else if (target.isDescendantOf(source)) {\n                newParent = source;\n            }\n            else {\n                newParent = Cell.getCommonAncestor(source, target);\n            }\n        }\n        // Unembeds the edge if source and target has no common\n        // ancestor or common ancestor changed\n        if (prevParent && (!newParent || newParent.id !== prevParent.id)) {\n            prevParent.unembed(this, options);\n        }\n        // Embeds the edge if source and target are not same\n        if (newParent && (!prevParent || prevParent.id !== newParent.id)) {\n            newParent.embed(this, options);\n        }\n        return newParent;\n    }\n    hasLoop(options = {}) {\n        const source = this.getSource();\n        const target = this.getTarget();\n        const sourceId = source.cell;\n        const targetId = target.cell;\n        if (!sourceId || !targetId) {\n            return false;\n        }\n        let loop = sourceId === targetId;\n        // Note that there in the deep mode a edge can have a loop,\n        // even if it connects only a parent and its embed.\n        // A loop \"target equals source\" is valid in both shallow and deep mode.\n        // eslint-disable-next-line\n        if (!loop && options.deep && this._model) {\n            const sourceCell = this.getSourceCell();\n            const targetCell = this.getTargetCell();\n            if (sourceCell && targetCell) {\n                loop =\n                    sourceCell.isAncestorOf(targetCell, options) ||\n                        targetCell.isAncestorOf(sourceCell, options);\n            }\n        }\n        return loop;\n    }\n    getFragmentAncestor() {\n        const cells = [this, this.getSourceNode(), this.getTargetNode()].filter((item) => item != null);\n        return this.getCommonAncestor(...cells);\n    }\n    isFragmentDescendantOf(cell) {\n        const ancestor = this.getFragmentAncestor();\n        return (!!ancestor && (ancestor.id === cell.id || ancestor.isDescendantOf(cell)));\n    }\n}\nEdge.defaults = {};\n(function (Edge) {\n    function equalTerminals(a, b) {\n        const a1 = a;\n        const b1 = b;\n        if (a1.cell === b1.cell) {\n            return a1.port === b1.port || (a1.port == null && b1.port == null);\n        }\n        return false;\n    }\n    Edge.equalTerminals = equalTerminals;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.defaultLabel = {\n        markup: [\n            {\n                tagName: 'rect',\n                selector: 'body',\n            },\n            {\n                tagName: 'text',\n                selector: 'label',\n            },\n        ],\n        attrs: {\n            text: {\n                fill: '#000',\n                fontSize: 14,\n                textAnchor: 'middle',\n                textVerticalAnchor: 'middle',\n                pointerEvents: 'none',\n            },\n            rect: {\n                ref: 'label',\n                fill: '#fff',\n                rx: 3,\n                ry: 3,\n                refWidth: 1,\n                refHeight: 1,\n                refX: 0,\n                refY: 0,\n            },\n        },\n        position: {\n            distance: 0.5,\n        },\n    };\n    function parseStringLabel(text) {\n        return {\n            attrs: { label: { text } },\n        };\n    }\n    Edge.parseStringLabel = parseStringLabel;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.toStringTag = `X6.${Edge.name}`;\n    function isEdge(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Edge) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const edge = instance;\n        if ((tag == null || tag === Edge.toStringTag) &&\n            typeof edge.isNode === 'function' &&\n            typeof edge.isEdge === 'function' &&\n            typeof edge.prop === 'function' &&\n            typeof edge.attr === 'function' &&\n            typeof edge.disconnect === 'function' &&\n            typeof edge.getSource === 'function' &&\n            typeof edge.getTarget === 'function') {\n            return true;\n        }\n        return false;\n    }\n    Edge.isEdge = isEdge;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    Edge.registry = Registry.create({\n        type: 'edge',\n        process(shape, options) {\n            if (ShareRegistry.exist(shape, false)) {\n                throw new Error(`Edge with name '${shape}' was registered by anthor Node`);\n            }\n            if (typeof options === 'function') {\n                options.config({ shape });\n                return options;\n            }\n            let parent = Edge;\n            // default inherit from 'dege'\n            const { inherit = 'edge' } = options, others = __rest(options, [\"inherit\"]);\n            if (typeof inherit === 'string') {\n                const base = this.get(inherit || 'edge');\n                if (base == null && inherit) {\n                    this.onNotFound(inherit, 'inherited');\n                }\n                else {\n                    parent = base;\n                }\n            }\n            else {\n                parent = inherit;\n            }\n            if (others.constructorName == null) {\n                others.constructorName = shape;\n            }\n            const ctor = parent.define.call(parent, others);\n            ctor.config({ shape });\n            return ctor;\n        },\n    });\n    ShareRegistry.setEdgeRegistry(Edge.registry);\n})(Edge || (Edge = {}));\n(function (Edge) {\n    let counter = 0;\n    function getClassName(name) {\n        if (name) {\n            return StringExt.pascalCase(name);\n        }\n        counter += 1;\n        return `CustomEdge${counter}`;\n    }\n    function define(config) {\n        const { constructorName, overwrite } = config, others = __rest(config, [\"constructorName\", \"overwrite\"]);\n        const ctor = ObjectExt.createClass(getClassName(constructorName || others.shape), this);\n        ctor.config(others);\n        if (others.shape) {\n            Edge.registry.register(others.shape, ctor, overwrite);\n        }\n        return ctor;\n    }\n    Edge.define = define;\n    function create(options) {\n        const shape = options.shape || 'edge';\n        const Ctor = Edge.registry.get(shape);\n        if (Ctor) {\n            return new Ctor(options);\n        }\n        return Edge.registry.onNotFound(shape);\n    }\n    Edge.create = create;\n})(Edge || (Edge = {}));\n(function (Edge) {\n    const shape = 'basic.edge';\n    Edge.config({\n        shape,\n        propHooks(metadata) {\n            const { label, vertices } = metadata, others = __rest(metadata, [\"label\", \"vertices\"]);\n            if (label) {\n                if (others.labels == null) {\n                    others.labels = [];\n                }\n                const formated = typeof label === 'string' ? Edge.parseStringLabel(label) : label;\n                others.labels.push(formated);\n            }\n            if (vertices) {\n                if (Array.isArray(vertices)) {\n                    others.vertices = vertices.map((item) => Point.create(item).toJSON());\n                }\n            }\n            return others;\n        },\n    });\n    Edge.registry.register(shape, Edge);\n})(Edge || (Edge = {}));\n//# sourceMappingURL=edge.js.map","import { ArrayExt, Basecoat } from '@antv/x6-common';\nexport class Collection extends Basecoat {\n    constructor(cells, options = {}) {\n        super();\n        this.length = 0;\n        this.comparator = options.comparator || 'zIndex';\n        this.clean();\n        if (cells) {\n            this.reset(cells, { silent: true });\n        }\n    }\n    toJSON() {\n        return this.cells.map((cell) => cell.toJSON());\n    }\n    add(cells, index, options) {\n        let localIndex;\n        let localOptions;\n        if (typeof index === 'number') {\n            localIndex = index;\n            localOptions = Object.assign({ merge: false }, options);\n        }\n        else {\n            localIndex = this.length;\n            localOptions = Object.assign({ merge: false }, index);\n        }\n        if (localIndex > this.length) {\n            localIndex = this.length;\n        }\n        if (localIndex < 0) {\n            localIndex += this.length + 1;\n        }\n        const entities = Array.isArray(cells) ? cells : [cells];\n        const sortable = this.comparator &&\n            typeof index !== 'number' &&\n            localOptions.sort !== false;\n        const sortAttr = this.comparator || null;\n        let sort = false;\n        const added = [];\n        const merged = [];\n        entities.forEach((cell) => {\n            const existing = this.get(cell);\n            if (existing) {\n                if (localOptions.merge && !cell.isSameStore(existing)) {\n                    existing.setProp(cell.getProp(), options); // merge\n                    merged.push(existing);\n                    if (sortable && !sort) {\n                        if (sortAttr == null || typeof sortAttr === 'function') {\n                            sort = existing.hasChanged();\n                        }\n                        else if (typeof sortAttr === 'string') {\n                            sort = existing.hasChanged(sortAttr);\n                        }\n                        else {\n                            sort = sortAttr.some((key) => existing.hasChanged(key));\n                        }\n                    }\n                }\n            }\n            else {\n                added.push(cell);\n                this.reference(cell);\n            }\n        });\n        if (added.length) {\n            if (sortable) {\n                sort = true;\n            }\n            this.cells.splice(localIndex, 0, ...added);\n            this.length = this.cells.length;\n        }\n        if (sort) {\n            this.sort({ silent: true });\n        }\n        if (!localOptions.silent) {\n            added.forEach((cell, i) => {\n                const args = {\n                    cell,\n                    index: localIndex + i,\n                    options: localOptions,\n                };\n                this.trigger('added', args);\n                if (!localOptions.dryrun) {\n                    cell.notify('added', Object.assign({}, args));\n                }\n            });\n            if (sort) {\n                this.trigger('sorted');\n            }\n            if (added.length || merged.length) {\n                this.trigger('updated', {\n                    added,\n                    merged,\n                    removed: [],\n                    options: localOptions,\n                });\n            }\n        }\n        return this;\n    }\n    remove(cells, options = {}) {\n        const arr = Array.isArray(cells) ? cells : [cells];\n        const removed = this.removeCells(arr, options);\n        if (!options.silent && removed.length > 0) {\n            this.trigger('updated', {\n                options,\n                removed,\n                added: [],\n                merged: [],\n            });\n        }\n        return Array.isArray(cells) ? removed : removed[0];\n    }\n    removeCells(cells, options) {\n        const removed = [];\n        for (let i = 0; i < cells.length; i += 1) {\n            const cell = this.get(cells[i]);\n            if (cell == null) {\n                continue;\n            }\n            const index = this.cells.indexOf(cell);\n            this.cells.splice(index, 1);\n            this.length -= 1;\n            delete this.map[cell.id];\n            removed.push(cell);\n            this.unreference(cell);\n            if (!options.dryrun) {\n                cell.remove();\n            }\n            if (!options.silent) {\n                this.trigger('removed', { cell, index, options });\n                if (!options.dryrun) {\n                    cell.notify('removed', { cell, index, options });\n                }\n            }\n        }\n        return removed;\n    }\n    reset(cells, options = {}) {\n        const previous = this.cells.slice();\n        previous.forEach((cell) => this.unreference(cell));\n        this.clean();\n        this.add(cells, Object.assign({ silent: true }, options));\n        if (!options.silent) {\n            const current = this.cells.slice();\n            this.trigger('reseted', {\n                options,\n                previous,\n                current,\n            });\n            const added = [];\n            const removed = [];\n            current.forEach((a) => {\n                const exist = previous.some((b) => b.id === a.id);\n                if (!exist) {\n                    added.push(a);\n                }\n            });\n            previous.forEach((a) => {\n                const exist = current.some((b) => b.id === a.id);\n                if (!exist) {\n                    removed.push(a);\n                }\n            });\n            this.trigger('updated', { options, added, removed, merged: [] });\n        }\n        return this;\n    }\n    push(cell, options) {\n        return this.add(cell, this.length, options);\n    }\n    pop(options) {\n        const cell = this.at(this.length - 1);\n        return this.remove(cell, options);\n    }\n    unshift(cell, options) {\n        return this.add(cell, 0, options);\n    }\n    shift(options) {\n        const cell = this.at(0);\n        return this.remove(cell, options);\n    }\n    get(cell) {\n        if (cell == null) {\n            return null;\n        }\n        const id = typeof cell === 'string' || typeof cell === 'number' ? cell : cell.id;\n        return this.map[id] || null;\n    }\n    has(cell) {\n        return this.get(cell) != null;\n    }\n    at(index) {\n        if (index < 0) {\n            index += this.length; // eslint-disable-line\n        }\n        return this.cells[index] || null;\n    }\n    first() {\n        return this.at(0);\n    }\n    last() {\n        return this.at(-1);\n    }\n    indexOf(cell) {\n        return this.cells.indexOf(cell);\n    }\n    toArray() {\n        return this.cells.slice();\n    }\n    sort(options = {}) {\n        if (this.comparator != null) {\n            this.cells = ArrayExt.sortBy(this.cells, this.comparator);\n            if (!options.silent) {\n                this.trigger('sorted');\n            }\n        }\n        return this;\n    }\n    clone() {\n        const constructor = this.constructor;\n        return new constructor(this.cells.slice(), {\n            comparator: this.comparator,\n        });\n    }\n    reference(cell) {\n        this.map[cell.id] = cell;\n        cell.on('*', this.notifyCellEvent, this);\n    }\n    unreference(cell) {\n        cell.off('*', this.notifyCellEvent, this);\n        delete this.map[cell.id];\n    }\n    notifyCellEvent(name, args) {\n        const cell = args.cell;\n        this.trigger(`cell:${name}`, args);\n        if (cell) {\n            if (cell.isNode()) {\n                this.trigger(`node:${name}`, Object.assign(Object.assign({}, args), { node: cell }));\n            }\n            else if (cell.isEdge()) {\n                this.trigger(`edge:${name}`, Object.assign(Object.assign({}, args), { edge: cell }));\n            }\n        }\n    }\n    clean() {\n        this.length = 0;\n        this.cells = [];\n        this.map = {};\n    }\n}\n//# sourceMappingURL=collection.js.map","import { FunctionExt, Dijkstra, Basecoat } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Cell } from './cell';\nimport { Edge } from './edge';\nimport { Node } from './node';\nimport { Collection } from './collection';\nexport class Model extends Basecoat {\n    get [Symbol.toStringTag]() {\n        return Model.toStringTag;\n    }\n    constructor(cells = []) {\n        super();\n        this.batches = {};\n        this.addings = new WeakMap();\n        this.nodes = {};\n        this.edges = {};\n        this.outgoings = {};\n        this.incomings = {};\n        this.collection = new Collection(cells);\n        this.setup();\n    }\n    notify(name, args) {\n        this.trigger(name, args);\n        const graph = this.graph;\n        if (graph) {\n            if (name === 'sorted' || name === 'reseted' || name === 'updated') {\n                graph.trigger(`model:${name}`, args);\n            }\n            else {\n                graph.trigger(name, args);\n            }\n        }\n        return this;\n    }\n    setup() {\n        const collection = this.collection;\n        collection.on('sorted', () => this.notify('sorted', null));\n        collection.on('updated', (args) => this.notify('updated', args));\n        collection.on('cell:change:zIndex', () => this.sortOnChangeZ());\n        collection.on('added', ({ cell }) => {\n            this.onCellAdded(cell);\n        });\n        collection.on('removed', (args) => {\n            const cell = args.cell;\n            this.onCellRemoved(cell, args.options);\n            // Should trigger remove-event manually after cell was removed.\n            this.notify('cell:removed', args);\n            if (cell.isNode()) {\n                this.notify('node:removed', Object.assign(Object.assign({}, args), { node: cell }));\n            }\n            else if (cell.isEdge()) {\n                this.notify('edge:removed', Object.assign(Object.assign({}, args), { edge: cell }));\n            }\n        });\n        collection.on('reseted', (args) => {\n            this.onReset(args.current);\n            this.notify('reseted', args);\n        });\n        collection.on('edge:change:source', ({ edge }) => this.onEdgeTerminalChanged(edge, 'source'));\n        collection.on('edge:change:target', ({ edge }) => {\n            this.onEdgeTerminalChanged(edge, 'target');\n        });\n    }\n    sortOnChangeZ() {\n        this.collection.sort();\n    }\n    onCellAdded(cell) {\n        const cellId = cell.id;\n        if (cell.isEdge()) {\n            // Auto update edge's parent\n            cell.updateParent();\n            this.edges[cellId] = true;\n            this.onEdgeTerminalChanged(cell, 'source');\n            this.onEdgeTerminalChanged(cell, 'target');\n        }\n        else {\n            this.nodes[cellId] = true;\n        }\n    }\n    onCellRemoved(cell, options) {\n        const cellId = cell.id;\n        if (cell.isEdge()) {\n            delete this.edges[cellId];\n            const source = cell.getSource();\n            const target = cell.getTarget();\n            if (source && source.cell) {\n                const cache = this.outgoings[source.cell];\n                const index = cache ? cache.indexOf(cellId) : -1;\n                if (index >= 0) {\n                    cache.splice(index, 1);\n                    if (cache.length === 0) {\n                        delete this.outgoings[source.cell];\n                    }\n                }\n            }\n            if (target && target.cell) {\n                const cache = this.incomings[target.cell];\n                const index = cache ? cache.indexOf(cellId) : -1;\n                if (index >= 0) {\n                    cache.splice(index, 1);\n                    if (cache.length === 0) {\n                        delete this.incomings[target.cell];\n                    }\n                }\n            }\n        }\n        else {\n            delete this.nodes[cellId];\n        }\n        if (!options.clear) {\n            if (options.disconnectEdges) {\n                this.disconnectConnectedEdges(cell, options);\n            }\n            else {\n                this.removeConnectedEdges(cell, options);\n            }\n        }\n        if (cell.model === this) {\n            cell.model = null;\n        }\n    }\n    onReset(cells) {\n        this.nodes = {};\n        this.edges = {};\n        this.outgoings = {};\n        this.incomings = {};\n        cells.forEach((cell) => this.onCellAdded(cell));\n    }\n    onEdgeTerminalChanged(edge, type) {\n        const ref = type === 'source' ? this.outgoings : this.incomings;\n        const prev = edge.previous(type);\n        if (prev && prev.cell) {\n            const cellId = Cell.isCell(prev.cell) ? prev.cell.id : prev.cell;\n            const cache = ref[cellId];\n            const index = cache ? cache.indexOf(edge.id) : -1;\n            if (index >= 0) {\n                cache.splice(index, 1);\n                if (cache.length === 0) {\n                    delete ref[cellId];\n                }\n            }\n        }\n        const terminal = edge.getTerminal(type);\n        if (terminal && terminal.cell) {\n            const terminalId = Cell.isCell(terminal.cell)\n                ? terminal.cell.id\n                : terminal.cell;\n            const cache = ref[terminalId] || [];\n            const index = cache.indexOf(edge.id);\n            if (index === -1) {\n                cache.push(edge.id);\n            }\n            ref[terminalId] = cache;\n        }\n    }\n    prepareCell(cell, options) {\n        if (!cell.model && (!options || !options.dryrun)) {\n            cell.model = this;\n        }\n        if (cell.zIndex == null) {\n            cell.setZIndex(this.getMaxZIndex() + 1, { silent: true });\n        }\n        return cell;\n    }\n    resetCells(cells, options = {}) {\n        // Do not update model at this time. Because if we just update the graph\n        // with the same json-data, the edge will reference to the old nodes.\n        cells.map((cell) => this.prepareCell(cell, Object.assign(Object.assign({}, options), { dryrun: true })));\n        this.collection.reset(cells, options);\n        // Update model and trigger edge update it's references\n        cells.map((cell) => this.prepareCell(cell, { options }));\n        return this;\n    }\n    clear(options = {}) {\n        const raw = this.getCells();\n        if (raw.length === 0) {\n            return this;\n        }\n        const localOptions = Object.assign(Object.assign({}, options), { clear: true });\n        this.batchUpdate('clear', () => {\n            // The nodes come after the edges.\n            const cells = raw.sort((a, b) => {\n                const v1 = a.isEdge() ? 1 : 2;\n                const v2 = b.isEdge() ? 1 : 2;\n                return v1 - v2;\n            });\n            while (cells.length > 0) {\n                // Note that all the edges are removed first, so it's safe to\n                // remove the nodes without removing the connected edges first.\n                const cell = cells.shift();\n                if (cell) {\n                    cell.remove(localOptions);\n                }\n            }\n        }, localOptions);\n        return this;\n    }\n    addNode(metadata, options = {}) {\n        const node = Node.isNode(metadata) ? metadata : this.createNode(metadata);\n        this.addCell(node, options);\n        return node;\n    }\n    updateNode(metadata, options = {}) {\n        const node = this.createNode(metadata);\n        const prop = node.getProp();\n        node.dispose();\n        return this.updateCell(prop, options);\n    }\n    createNode(metadata) {\n        return Node.create(metadata);\n    }\n    addEdge(metadata, options = {}) {\n        const edge = Edge.isEdge(metadata) ? metadata : this.createEdge(metadata);\n        this.addCell(edge, options);\n        return edge;\n    }\n    createEdge(metadata) {\n        return Edge.create(metadata);\n    }\n    updateEdge(metadata, options = {}) {\n        const edge = this.createEdge(metadata);\n        const prop = edge.getProp();\n        edge.dispose();\n        return this.updateCell(prop, options);\n    }\n    addCell(cell, options = {}) {\n        if (Array.isArray(cell)) {\n            return this.addCells(cell, options);\n        }\n        if (!this.collection.has(cell) && !this.addings.has(cell)) {\n            this.addings.set(cell, true);\n            this.collection.add(this.prepareCell(cell, options), options);\n            cell.eachChild((child) => this.addCell(child, options));\n            this.addings.delete(cell);\n        }\n        return this;\n    }\n    addCells(cells, options = {}) {\n        const count = cells.length;\n        if (count === 0) {\n            return this;\n        }\n        const localOptions = Object.assign(Object.assign({}, options), { position: count - 1, maxPosition: count - 1 });\n        this.startBatch('add', Object.assign(Object.assign({}, localOptions), { cells }));\n        cells.forEach((cell) => {\n            this.addCell(cell, localOptions);\n            localOptions.position -= 1;\n        });\n        this.stopBatch('add', Object.assign(Object.assign({}, localOptions), { cells }));\n        return this;\n    }\n    updateCell(prop, options = {}) {\n        const existing = prop.id && this.getCell(prop.id);\n        if (existing) {\n            return this.batchUpdate('update', () => {\n                Object.entries(prop).forEach(([key, val]) => existing.setProp(key, val, options));\n                return true;\n            }, prop);\n        }\n        return false;\n    }\n    removeCell(obj, options = {}) {\n        const cell = typeof obj === 'string' ? this.getCell(obj) : obj;\n        if (cell && this.has(cell)) {\n            return this.collection.remove(cell, options);\n        }\n        return null;\n    }\n    updateCellId(cell, newId) {\n        this.startBatch('update', { id: newId });\n        cell.prop('id', newId);\n        const newCell = cell.clone({ keepId: true });\n        this.addCell(newCell);\n        // update connected edge terminal\n        const edges = this.getConnectedEdges(cell);\n        edges.forEach((edge) => {\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (sourceCell === cell) {\n                edge.setSource(Object.assign(Object.assign({}, edge.getSource()), { cell: newId }));\n            }\n            if (targetCell === cell) {\n                edge.setTarget(Object.assign(Object.assign({}, edge.getTarget()), { cell: newId }));\n            }\n        });\n        this.removeCell(cell);\n        this.stopBatch('update', { id: newId });\n        return newCell;\n    }\n    removeCells(cells, options = {}) {\n        if (cells.length) {\n            return this.batchUpdate('remove', () => {\n                return cells.map((cell) => this.removeCell(cell, options));\n            });\n        }\n        return [];\n    }\n    removeConnectedEdges(cell, options = {}) {\n        const edges = this.getConnectedEdges(cell);\n        edges.forEach((edge) => {\n            edge.remove(options);\n        });\n        return edges;\n    }\n    disconnectConnectedEdges(cell, options = {}) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        this.getConnectedEdges(cell).forEach((edge) => {\n            const sourceCellId = edge.getSourceCellId();\n            const targetCellId = edge.getTargetCellId();\n            if (sourceCellId === cellId) {\n                edge.setSource({ x: 0, y: 0 }, options);\n            }\n            if (targetCellId === cellId) {\n                edge.setTarget({ x: 0, y: 0 }, options);\n            }\n        });\n    }\n    has(obj) {\n        return this.collection.has(obj);\n    }\n    total() {\n        return this.collection.length;\n    }\n    indexOf(cell) {\n        return this.collection.indexOf(cell);\n    }\n    /**\n     * Returns a cell from the graph by its id.\n     */\n    getCell(id) {\n        return this.collection.get(id);\n    }\n    /**\n     * Returns all the nodes and edges in the graph.\n     */\n    getCells() {\n        return this.collection.toArray();\n    }\n    /**\n     * Returns the first cell (node or edge) in the graph. The first cell is\n     * defined as the cell with the lowest `zIndex`.\n     */\n    getFirstCell() {\n        return this.collection.first();\n    }\n    /**\n     * Returns the last cell (node or edge) in the graph. The last cell is\n     * defined as the cell with the highest `zIndex`.\n     */\n    getLastCell() {\n        return this.collection.last();\n    }\n    /**\n     * Returns the lowest `zIndex` value in the graph.\n     */\n    getMinZIndex() {\n        const first = this.collection.first();\n        return first ? first.getZIndex() || 0 : 0;\n    }\n    /**\n     * Returns the highest `zIndex` value in the graph.\n     */\n    getMaxZIndex() {\n        const last = this.collection.last();\n        return last ? last.getZIndex() || 0 : 0;\n    }\n    getCellsFromCache(cache) {\n        return cache\n            ? Object.keys(cache)\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell != null)\n            : [];\n    }\n    /**\n     * Returns all the nodes in the graph.\n     */\n    getNodes() {\n        return this.getCellsFromCache(this.nodes);\n    }\n    /**\n     * Returns all the edges in the graph.\n     */\n    getEdges() {\n        return this.getCellsFromCache(this.edges);\n    }\n    /**\n     * Returns all outgoing edges for the node.\n     */\n    getOutgoingEdges(cell) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        const cellIds = this.outgoings[cellId];\n        return cellIds\n            ? cellIds\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell && cell.isEdge())\n            : null;\n    }\n    /**\n     * Returns all incoming edges for the node.\n     */\n    getIncomingEdges(cell) {\n        const cellId = typeof cell === 'string' ? cell : cell.id;\n        const cellIds = this.incomings[cellId];\n        return cellIds\n            ? cellIds\n                .map((id) => this.getCell(id))\n                .filter((cell) => cell && cell.isEdge())\n            : null;\n    }\n    /**\n     * Returns edges connected with cell.\n     */\n    getConnectedEdges(cell, options = {}) {\n        const result = [];\n        const node = typeof cell === 'string' ? this.getCell(cell) : cell;\n        if (node == null) {\n            return result;\n        }\n        const cache = {};\n        const indirect = options.indirect;\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        const collect = (cell, isOutgoing) => {\n            const edges = isOutgoing\n                ? this.getOutgoingEdges(cell)\n                : this.getIncomingEdges(cell);\n            if (edges != null) {\n                edges.forEach((edge) => {\n                    if (cache[edge.id]) {\n                        return;\n                    }\n                    result.push(edge);\n                    cache[edge.id] = true;\n                    if (indirect) {\n                        if (incoming) {\n                            collect(edge, false);\n                        }\n                        if (outgoing) {\n                            collect(edge, true);\n                        }\n                    }\n                });\n            }\n            if (indirect && cell.isEdge()) {\n                const terminal = isOutgoing\n                    ? cell.getTargetCell()\n                    : cell.getSourceCell();\n                if (terminal && terminal.isEdge()) {\n                    if (!cache[terminal.id]) {\n                        result.push(terminal);\n                        collect(terminal, isOutgoing);\n                    }\n                }\n            }\n        };\n        if (outgoing) {\n            collect(node, true);\n        }\n        if (incoming) {\n            collect(node, false);\n        }\n        if (options.deep) {\n            const descendants = node.getDescendants({ deep: true });\n            const embedsCache = {};\n            descendants.forEach((cell) => {\n                if (cell.isNode()) {\n                    embedsCache[cell.id] = true;\n                }\n            });\n            const collectSub = (cell, isOutgoing) => {\n                const edges = isOutgoing\n                    ? this.getOutgoingEdges(cell.id)\n                    : this.getIncomingEdges(cell.id);\n                if (edges != null) {\n                    edges.forEach((edge) => {\n                        if (!cache[edge.id]) {\n                            const sourceCell = edge.getSourceCell();\n                            const targetCell = edge.getTargetCell();\n                            if (!options.enclosed &&\n                                sourceCell &&\n                                embedsCache[sourceCell.id] &&\n                                targetCell &&\n                                embedsCache[targetCell.id]) {\n                                return;\n                            }\n                            result.push(edge);\n                            cache[edge.id] = true;\n                        }\n                    });\n                }\n            };\n            descendants.forEach((cell) => {\n                if (cell.isEdge()) {\n                    return;\n                }\n                if (outgoing) {\n                    collectSub(cell, true);\n                }\n                if (incoming) {\n                    collectSub(cell, false);\n                }\n            });\n        }\n        return result;\n    }\n    isBoundary(cell, isOrigin) {\n        const node = typeof cell === 'string' ? this.getCell(cell) : cell;\n        const arr = isOrigin\n            ? this.getIncomingEdges(node)\n            : this.getOutgoingEdges(node);\n        return arr == null || arr.length === 0;\n    }\n    getBoundaryNodes(isOrigin) {\n        const result = [];\n        Object.keys(this.nodes).forEach((nodeId) => {\n            if (this.isBoundary(nodeId, isOrigin)) {\n                const node = this.getCell(nodeId);\n                if (node) {\n                    result.push(node);\n                }\n            }\n        });\n        return result;\n    }\n    /**\n     * Returns an array of all the roots of the graph.\n     */\n    getRoots() {\n        return this.getBoundaryNodes(true);\n    }\n    /**\n     * Returns an array of all the leafs of the graph.\n     */\n    getLeafs() {\n        return this.getBoundaryNodes(false);\n    }\n    /**\n     * Returns `true` if the node is a root node, i.e. there is no edges\n     * coming to the node.\n     */\n    isRoot(cell) {\n        return this.isBoundary(cell, true);\n    }\n    /**\n     * Returns `true` if the node is a leaf node, i.e. there is no edges\n     * going out from the node.\n     */\n    isLeaf(cell) {\n        return this.isBoundary(cell, false);\n    }\n    /**\n     * Returns all the neighbors of node in the graph. Neighbors are all\n     * the nodes connected to node via either incoming or outgoing edge.\n     */\n    getNeighbors(cell, options = {}) {\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        const edges = this.getConnectedEdges(cell, options);\n        const map = edges.reduce((memo, edge) => {\n            const hasLoop = edge.hasLoop(options);\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (incoming &&\n                sourceCell &&\n                sourceCell.isNode() &&\n                !memo[sourceCell.id]) {\n                if (hasLoop ||\n                    (sourceCell !== cell &&\n                        (!options.deep || !sourceCell.isDescendantOf(cell)))) {\n                    memo[sourceCell.id] = sourceCell;\n                }\n            }\n            if (outgoing &&\n                targetCell &&\n                targetCell.isNode() &&\n                !memo[targetCell.id]) {\n                if (hasLoop ||\n                    (targetCell !== cell &&\n                        (!options.deep || !targetCell.isDescendantOf(cell)))) {\n                    memo[targetCell.id] = targetCell;\n                }\n            }\n            return memo;\n        }, {});\n        if (cell.isEdge()) {\n            if (incoming) {\n                const sourceCell = cell.getSourceCell();\n                if (sourceCell && sourceCell.isNode() && !map[sourceCell.id]) {\n                    map[sourceCell.id] = sourceCell;\n                }\n            }\n            if (outgoing) {\n                const targetCell = cell.getTargetCell();\n                if (targetCell && targetCell.isNode() && !map[targetCell.id]) {\n                    map[targetCell.id] = targetCell;\n                }\n            }\n        }\n        return Object.keys(map).map((id) => map[id]);\n    }\n    /**\n     * Returns `true` if `cell2` is a neighbor of `cell1`.\n     */\n    isNeighbor(cell1, cell2, options = {}) {\n        let incoming = options.incoming;\n        let outgoing = options.outgoing;\n        if (incoming == null && outgoing == null) {\n            incoming = outgoing = true;\n        }\n        return this.getConnectedEdges(cell1, options).some((edge) => {\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (incoming && sourceCell && sourceCell.id === cell2.id) {\n                return true;\n            }\n            if (outgoing && targetCell && targetCell.id === cell2.id) {\n                return true;\n            }\n            return false;\n        });\n    }\n    getSuccessors(cell, options = {}) {\n        const successors = [];\n        this.search(cell, (curr, distance) => {\n            if (curr !== cell && this.matchDistance(distance, options.distance)) {\n                successors.push(curr);\n            }\n        }, Object.assign(Object.assign({}, options), { outgoing: true }));\n        return successors;\n    }\n    /**\n     * Returns `true` if `cell2` is a successor of `cell1`.\n     */\n    isSuccessor(cell1, cell2, options = {}) {\n        let result = false;\n        this.search(cell1, (curr, distance) => {\n            if (curr === cell2 &&\n                curr !== cell1 &&\n                this.matchDistance(distance, options.distance)) {\n                result = true;\n                return false;\n            }\n        }, Object.assign(Object.assign({}, options), { outgoing: true }));\n        return result;\n    }\n    getPredecessors(cell, options = {}) {\n        const predecessors = [];\n        this.search(cell, (curr, distance) => {\n            if (curr !== cell && this.matchDistance(distance, options.distance)) {\n                predecessors.push(curr);\n            }\n        }, Object.assign(Object.assign({}, options), { incoming: true }));\n        return predecessors;\n    }\n    /**\n     * Returns `true` if `cell2` is a predecessor of `cell1`.\n     */\n    isPredecessor(cell1, cell2, options = {}) {\n        let result = false;\n        this.search(cell1, (curr, distance) => {\n            if (curr === cell2 &&\n                curr !== cell1 &&\n                this.matchDistance(distance, options.distance)) {\n                result = true;\n                return false;\n            }\n        }, Object.assign(Object.assign({}, options), { incoming: true }));\n        return result;\n    }\n    matchDistance(distance, preset) {\n        if (preset == null) {\n            return true;\n        }\n        if (typeof preset === 'function') {\n            return preset(distance);\n        }\n        if (Array.isArray(preset) && preset.includes(distance)) {\n            return true;\n        }\n        return distance === preset;\n    }\n    /**\n     * Returns the common ancestor of the passed cells.\n     */\n    getCommonAncestor(...cells) {\n        const arr = [];\n        cells.forEach((item) => {\n            if (item) {\n                if (Array.isArray(item)) {\n                    arr.push(...item);\n                }\n                else {\n                    arr.push(item);\n                }\n            }\n        });\n        return Cell.getCommonAncestor(...arr);\n    }\n    /**\n     * Returns an array of cells that result from finding nodes/edges that\n     * are connected to any of the cells in the cells array. This function\n     * loops over cells and if the current cell is a edge, it collects its\n     * source/target nodes; if it is an node, it collects its incoming and\n     * outgoing edges if both the edge terminal (source/target) are in the\n     * cells array.\n     */\n    getSubGraph(cells, options = {}) {\n        const subgraph = [];\n        const cache = {};\n        const nodes = [];\n        const edges = [];\n        const collect = (cell) => {\n            if (!cache[cell.id]) {\n                subgraph.push(cell);\n                cache[cell.id] = cell;\n                if (cell.isEdge()) {\n                    edges.push(cell);\n                }\n                if (cell.isNode()) {\n                    nodes.push(cell);\n                }\n            }\n        };\n        cells.forEach((cell) => {\n            collect(cell);\n            if (options.deep) {\n                const descendants = cell.getDescendants({ deep: true });\n                descendants.forEach((descendant) => collect(descendant));\n            }\n        });\n        edges.forEach((edge) => {\n            // For edges, include their source & target\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (sourceCell && !cache[sourceCell.id]) {\n                subgraph.push(sourceCell);\n                cache[sourceCell.id] = sourceCell;\n                if (sourceCell.isNode()) {\n                    nodes.push(sourceCell);\n                }\n            }\n            if (targetCell && !cache[targetCell.id]) {\n                subgraph.push(targetCell);\n                cache[targetCell.id] = targetCell;\n                if (targetCell.isNode()) {\n                    nodes.push(targetCell);\n                }\n            }\n        });\n        nodes.forEach((node) => {\n            // For nodes, include their connected edges if their source/target\n            // is in the subgraph.\n            const edges = this.getConnectedEdges(node, options);\n            edges.forEach((edge) => {\n                const sourceCell = edge.getSourceCell();\n                const targetCell = edge.getTargetCell();\n                if (!cache[edge.id] &&\n                    sourceCell &&\n                    cache[sourceCell.id] &&\n                    targetCell &&\n                    cache[targetCell.id]) {\n                    subgraph.push(edge);\n                    cache[edge.id] = edge;\n                }\n            });\n        });\n        return subgraph;\n    }\n    /**\n     * Clones the whole subgraph (including all the connected links whose\n     * source/target is in the subgraph). If `options.deep` is `true`, also\n     * take into account all the embedded cells of all the subgraph cells.\n     *\n     * Returns a map of the form: { [original cell ID]: [clone] }.\n     */\n    cloneSubGraph(cells, options = {}) {\n        const subgraph = this.getSubGraph(cells, options);\n        return this.cloneCells(subgraph);\n    }\n    cloneCells(cells) {\n        return Cell.cloneCells(cells);\n    }\n    getNodesFromPoint(x, y) {\n        const p = typeof x === 'number' ? { x, y: y || 0 } : x;\n        return this.getNodes().filter((node) => {\n            return node.getBBox().containsPoint(p);\n        });\n    }\n    getNodesInArea(x, y, w, h, options) {\n        const rect = typeof x === 'number'\n            ? new Rectangle(x, y, w, h)\n            : Rectangle.create(x);\n        const opts = typeof x === 'number' ? options : y;\n        const strict = opts && opts.strict;\n        return this.getNodes().filter((node) => {\n            const bbox = node.getBBox();\n            return strict ? rect.containsRect(bbox) : rect.isIntersectWithRect(bbox);\n        });\n    }\n    getEdgesInArea(x, y, w, h, options) {\n        const rect = typeof x === 'number'\n            ? new Rectangle(x, y, w, h)\n            : Rectangle.create(x);\n        const opts = typeof x === 'number' ? options : y;\n        const strict = opts && opts.strict;\n        return this.getEdges().filter((edge) => {\n            const bbox = edge.getBBox();\n            if (bbox.width === 0) {\n                bbox.inflate(1, 0);\n            }\n            else if (bbox.height === 0) {\n                bbox.inflate(0, 1);\n            }\n            return strict ? rect.containsRect(bbox) : rect.isIntersectWithRect(bbox);\n        });\n    }\n    getNodesUnderNode(node, options = {}) {\n        const bbox = node.getBBox();\n        const nodes = options.by == null || options.by === 'bbox'\n            ? this.getNodesInArea(bbox)\n            : this.getNodesFromPoint(bbox[options.by]);\n        return nodes.filter((curr) => node.id !== curr.id && !curr.isDescendantOf(node));\n    }\n    /**\n     * Returns the bounding box that surrounds all cells in the graph.\n     */\n    getAllCellsBBox() {\n        return this.getCellsBBox(this.getCells());\n    }\n    /**\n     * Returns the bounding box that surrounds all the given cells.\n     */\n    getCellsBBox(cells, options = {}) {\n        return Cell.getCellsBBox(cells, options);\n    }\n    // #region search\n    search(cell, iterator, options = {}) {\n        if (options.breadthFirst) {\n            this.breadthFirstSearch(cell, iterator, options);\n        }\n        else {\n            this.depthFirstSearch(cell, iterator, options);\n        }\n    }\n    breadthFirstSearch(cell, iterator, options = {}) {\n        const queue = [];\n        const visited = {};\n        const distance = {};\n        queue.push(cell);\n        distance[cell.id] = 0;\n        while (queue.length > 0) {\n            const next = queue.shift();\n            if (next == null || visited[next.id]) {\n                continue;\n            }\n            visited[next.id] = true;\n            if (FunctionExt.call(iterator, this, next, distance[next.id]) === false) {\n                continue;\n            }\n            const neighbors = this.getNeighbors(next, options);\n            neighbors.forEach((neighbor) => {\n                distance[neighbor.id] = distance[next.id] + 1;\n                queue.push(neighbor);\n            });\n        }\n    }\n    depthFirstSearch(cell, iterator, options = {}) {\n        const queue = [];\n        const visited = {};\n        const distance = {};\n        queue.push(cell);\n        distance[cell.id] = 0;\n        while (queue.length > 0) {\n            const next = queue.pop();\n            if (next == null || visited[next.id]) {\n                continue;\n            }\n            visited[next.id] = true;\n            if (FunctionExt.call(iterator, this, next, distance[next.id]) === false) {\n                continue;\n            }\n            const neighbors = this.getNeighbors(next, options);\n            const lastIndex = queue.length;\n            neighbors.forEach((neighbor) => {\n                distance[neighbor.id] = distance[next.id] + 1;\n                queue.splice(lastIndex, 0, neighbor);\n            });\n        }\n    }\n    // #endregion\n    // #region shortest path\n    /** *\n     * Returns an array of IDs of nodes on the shortest\n     * path between source and target.\n     */\n    getShortestPath(source, target, options = {}) {\n        const adjacencyList = {};\n        this.getEdges().forEach((edge) => {\n            const sourceId = edge.getSourceCellId();\n            const targetId = edge.getTargetCellId();\n            if (sourceId && targetId) {\n                if (!adjacencyList[sourceId]) {\n                    adjacencyList[sourceId] = [];\n                }\n                if (!adjacencyList[targetId]) {\n                    adjacencyList[targetId] = [];\n                }\n                adjacencyList[sourceId].push(targetId);\n                if (!options.directed) {\n                    adjacencyList[targetId].push(sourceId);\n                }\n            }\n        });\n        const sourceId = typeof source === 'string' ? source : source.id;\n        const previous = Dijkstra.run(adjacencyList, sourceId, options.weight);\n        const path = [];\n        let targetId = typeof target === 'string' ? target : target.id;\n        if (previous[targetId]) {\n            path.push(targetId);\n        }\n        while ((targetId = previous[targetId])) {\n            path.unshift(targetId);\n        }\n        return path;\n    }\n    // #endregion\n    // #region transform\n    /**\n     * Translate all cells in the graph by `tx` and `ty` pixels.\n     */\n    translate(tx, ty, options) {\n        this.getCells()\n            .filter((cell) => !cell.hasParent())\n            .forEach((cell) => cell.translate(tx, ty, options));\n        return this;\n    }\n    resize(width, height, options) {\n        return this.resizeCells(width, height, this.getCells(), options);\n    }\n    resizeCells(width, height, cells, options = {}) {\n        const bbox = this.getCellsBBox(cells);\n        if (bbox) {\n            const sx = Math.max(width / bbox.width, 0);\n            const sy = Math.max(height / bbox.height, 0);\n            const origin = bbox.getOrigin();\n            cells.forEach((cell) => cell.scale(sx, sy, origin, options));\n        }\n        return this;\n    }\n    // #endregion\n    // #region serialize/deserialize\n    toJSON(options = {}) {\n        return Model.toJSON(this.getCells(), options);\n    }\n    parseJSON(data) {\n        return Model.fromJSON(data);\n    }\n    fromJSON(data, options = {}) {\n        const cells = this.parseJSON(data);\n        this.resetCells(cells, options);\n        return this;\n    }\n    // #endregion\n    // #region batch\n    startBatch(name, data = {}) {\n        this.batches[name] = (this.batches[name] || 0) + 1;\n        this.notify('batch:start', { name, data });\n        return this;\n    }\n    stopBatch(name, data = {}) {\n        this.batches[name] = (this.batches[name] || 0) - 1;\n        this.notify('batch:stop', { name, data });\n        return this;\n    }\n    batchUpdate(name, execute, data = {}) {\n        this.startBatch(name, data);\n        const result = execute();\n        this.stopBatch(name, data);\n        return result;\n    }\n    hasActiveBatch(name = Object.keys(this.batches)) {\n        const names = Array.isArray(name) ? name : [name];\n        return names.some((batch) => this.batches[batch] > 0);\n    }\n}\n(function (Model) {\n    Model.toStringTag = `X6.${Model.name}`;\n    function isModel(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Model) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const model = instance;\n        if ((tag == null || tag === Model.toStringTag) &&\n            typeof model.addNode === 'function' &&\n            typeof model.addEdge === 'function' &&\n            model.collection != null) {\n            return true;\n        }\n        return false;\n    }\n    Model.isModel = isModel;\n})(Model || (Model = {}));\n(function (Model) {\n    function toJSON(cells, options = {}) {\n        return {\n            cells: cells.map((cell) => cell.toJSON(options)),\n        };\n    }\n    Model.toJSON = toJSON;\n    function fromJSON(data) {\n        const cells = [];\n        if (Array.isArray(data)) {\n            cells.push(...data);\n        }\n        else {\n            if (data.cells) {\n                cells.push(...data.cells);\n            }\n            if (data.nodes) {\n                data.nodes.forEach((node) => {\n                    if (node.shape == null) {\n                        node.shape = 'rect';\n                    }\n                    cells.push(node);\n                });\n            }\n            if (data.edges) {\n                data.edges.forEach((edge) => {\n                    if (edge.shape == null) {\n                        edge.shape = 'edge';\n                    }\n                    cells.push(edge);\n                });\n            }\n        }\n        return cells.map((cell) => {\n            const type = cell.shape;\n            if (type) {\n                if (Node.registry.exist(type)) {\n                    return Node.create(cell);\n                }\n                if (Edge.registry.exist(type)) {\n                    return Edge.create(cell);\n                }\n            }\n            throw new Error('The `shape` should be specified when creating a node/edge instance');\n        });\n    }\n    Model.fromJSON = fromJSON;\n})(Model || (Model = {}));\n//# sourceMappingURL=model.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Node } from '../model';\nexport class Base extends Node {\n    get label() {\n        return this.getLabel();\n    }\n    set label(val) {\n        this.setLabel(val);\n    }\n    getLabel() {\n        return this.getAttrByPath('text/text');\n    }\n    setLabel(label, options) {\n        if (label == null) {\n            this.removeLabel();\n        }\n        else {\n            this.setAttrByPath('text/text', label, options);\n        }\n        return this;\n    }\n    removeLabel() {\n        this.removeAttrByPath('text/text');\n        return this;\n    }\n}\n(function (Base) {\n    Base.bodyAttr = {\n        fill: '#ffffff',\n        stroke: '#333333',\n        strokeWidth: 2,\n    };\n    Base.labelAttr = {\n        fontSize: 14,\n        fill: '#000000',\n        refX: 0.5,\n        refY: 0.5,\n        textAnchor: 'middle',\n        textVerticalAnchor: 'middle',\n        fontFamily: 'Arial, helvetica, sans-serif',\n    };\n    Base.config({\n        attrs: { text: Object.assign({}, Base.labelAttr) },\n        propHooks(metadata) {\n            const { label } = metadata, others = __rest(metadata, [\"label\"]);\n            if (label) {\n                ObjectExt.setByPath(others, 'attrs/text/text', label);\n            }\n            return others;\n        },\n        visible: true,\n    });\n})(Base || (Base = {}));\n//# sourceMappingURL=base.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport function getMarkup(tagName, selector = 'body') {\n    return [\n        {\n            tagName,\n            selector,\n        },\n        {\n            tagName: 'text',\n            selector: 'label',\n        },\n    ];\n}\nexport function getImageUrlHook(attrName = 'xlink:href') {\n    const hook = (metadata) => {\n        const { imageUrl, imageWidth, imageHeight } = metadata, others = __rest(metadata, [\"imageUrl\", \"imageWidth\", \"imageHeight\"]);\n        if (imageUrl != null || imageWidth != null || imageHeight != null) {\n            const apply = () => {\n                if (others.attrs) {\n                    const image = others.attrs.image;\n                    if (imageUrl != null) {\n                        image[attrName] = imageUrl;\n                    }\n                    if (imageWidth != null) {\n                        image.width = imageWidth;\n                    }\n                    if (imageHeight != null) {\n                        image.height = imageHeight;\n                    }\n                    others.attrs.image = image;\n                }\n            };\n            if (others.attrs) {\n                if (others.attrs.image == null) {\n                    others.attrs.image = {};\n                }\n                apply();\n            }\n            else {\n                others.attrs = {\n                    image: {},\n                };\n                apply();\n            }\n        }\n        return others;\n    };\n    return hook;\n}\nexport function createShape(shape, config, options = {}) {\n    const defaults = {\n        constructorName: shape,\n        markup: getMarkup(shape, options.selector),\n        attrs: {\n            [shape]: Object.assign({}, Base.bodyAttr),\n        },\n    };\n    const base = options.parent || Base;\n    return base.define(ObjectExt.merge(defaults, config, { shape }));\n}\n//# sourceMappingURL=util.js.map","import { createShape } from './util';\nexport const Rect = createShape('rect', {\n    attrs: {\n        body: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n    },\n});\n//# sourceMappingURL=rect.js.map","import { Edge as EdgeBase } from '../model/edge';\nexport const Edge = EdgeBase.define({\n    shape: 'edge',\n    markup: [\n        {\n            tagName: 'path',\n            selector: 'wrap',\n            groupSelector: 'lines',\n            attrs: {\n                fill: 'none',\n                cursor: 'pointer',\n                stroke: 'transparent',\n                strokeLinecap: 'round',\n            },\n        },\n        {\n            tagName: 'path',\n            selector: 'line',\n            groupSelector: 'lines',\n            attrs: {\n                fill: 'none',\n                pointerEvents: 'none',\n            },\n        },\n    ],\n    attrs: {\n        lines: {\n            connection: true,\n            strokeLinejoin: 'round',\n        },\n        wrap: {\n            strokeWidth: 10,\n        },\n        line: {\n            stroke: '#333',\n            strokeWidth: 2,\n            targetMarker: 'classic',\n        },\n    },\n});\n//# sourceMappingURL=edge.js.map","import { createShape } from './util';\nexport const Ellipse = createShape('ellipse', {\n    attrs: {\n        body: {\n            refCx: '50%',\n            refCy: '50%',\n            refRx: '50%',\n            refRy: '50%',\n        },\n    },\n});\n//# sourceMappingURL=ellipse.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Point } from '@antv/x6-geometry';\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport class Poly extends Base {\n    get points() {\n        return this.getPoints();\n    }\n    set points(pts) {\n        this.setPoints(pts);\n    }\n    getPoints() {\n        return this.getAttrByPath('body/refPoints');\n    }\n    setPoints(points, options) {\n        if (points == null) {\n            this.removePoints();\n        }\n        else {\n            this.setAttrByPath('body/refPoints', Poly.pointsToString(points), options);\n        }\n        return this;\n    }\n    removePoints() {\n        this.removeAttrByPath('body/refPoints');\n        return this;\n    }\n}\n(function (Poly) {\n    function pointsToString(points) {\n        return typeof points === 'string'\n            ? points\n            : points\n                .map((p) => {\n                if (Array.isArray(p)) {\n                    return p.join(',');\n                }\n                if (Point.isPointLike(p)) {\n                    return `${p.x}, ${p.y}`;\n                }\n                return '';\n            })\n                .join(' ');\n    }\n    Poly.pointsToString = pointsToString;\n    Poly.config({\n        propHooks(metadata) {\n            const { points } = metadata, others = __rest(metadata, [\"points\"]);\n            if (points) {\n                const data = pointsToString(points);\n                if (data) {\n                    ObjectExt.setByPath(others, 'attrs/body/refPoints', data);\n                }\n            }\n            return others;\n        },\n    });\n})(Poly || (Poly = {}));\n//# sourceMappingURL=poly.js.map","import { Poly } from './poly';\nimport { createShape } from './util';\nexport const Polygon = createShape('polygon', {}, { parent: Poly });\n//# sourceMappingURL=polygon.js.map","import { Poly } from './poly';\nimport { createShape } from './util';\nexport const Polyline = createShape('polyline', {}, { parent: Poly });\n//# sourceMappingURL=polyline.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport const Path = Base.define({\n    shape: 'path',\n    markup: [\n        {\n            tagName: 'rect',\n            selector: 'bg',\n        },\n        {\n            tagName: 'path',\n            selector: 'body',\n        },\n        {\n            tagName: 'text',\n            selector: 'label',\n        },\n    ],\n    attrs: {\n        bg: {\n            refWidth: '100%',\n            refHeight: '100%',\n            fill: 'none',\n            stroke: 'none',\n            pointerEvents: 'all',\n        },\n        body: {\n            fill: 'none',\n            stroke: '#000',\n            strokeWidth: 2,\n        },\n    },\n    propHooks(metadata) {\n        const { path } = metadata, others = __rest(metadata, [\"path\"]);\n        if (path) {\n            ObjectExt.setByPath(others, 'attrs/body/refD', path);\n        }\n        return others;\n    },\n});\n//# sourceMappingURL=path.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Platform, Dom, FunctionExt, ObjectExt } from '@antv/x6-common';\nimport { Attr } from '../registry';\nimport { Base } from './base';\nexport const TextBlock = Base.define({\n    shape: 'text-block',\n    markup: [\n        {\n            tagName: 'rect',\n            selector: 'body',\n        },\n        Platform.SUPPORT_FOREIGNOBJECT\n            ? {\n                tagName: 'foreignObject',\n                selector: 'foreignObject',\n                children: [\n                    {\n                        tagName: 'div',\n                        ns: Dom.ns.xhtml,\n                        selector: 'label',\n                        style: {\n                            width: '100%',\n                            height: '100%',\n                            position: 'static',\n                            backgroundColor: 'transparent',\n                            textAlign: 'center',\n                            margin: 0,\n                            padding: '0px 5px',\n                            boxSizing: 'border-box',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                        },\n                    },\n                ],\n            }\n            : {\n                tagName: 'text',\n                selector: 'label',\n                attrs: {\n                    textAnchor: 'middle',\n                },\n            },\n    ],\n    attrs: {\n        body: Object.assign(Object.assign({}, Base.bodyAttr), { refWidth: '100%', refHeight: '100%' }),\n        foreignObject: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n        label: {\n            style: {\n                fontSize: 14,\n            },\n        },\n    },\n    propHooks(metadata) {\n        const { text } = metadata, others = __rest(metadata, [\"text\"]);\n        if (text) {\n            ObjectExt.setByPath(others, 'attrs/label/text', text);\n        }\n        return others;\n    },\n    attrHooks: {\n        text: {\n            set(text, { cell, view, refBBox, elem, attrs }) {\n                if (elem instanceof HTMLElement) {\n                    elem.textContent = text;\n                }\n                else {\n                    // No foreign object\n                    const style = attrs.style || {};\n                    const wrapValue = { text, width: -5, height: '100%' };\n                    const wrapAttrs = Object.assign({ textVerticalAnchor: 'middle' }, style);\n                    const textWrap = Attr.presets.textWrap;\n                    FunctionExt.call(textWrap.set, this, wrapValue, {\n                        cell,\n                        view,\n                        elem,\n                        refBBox,\n                        attrs: wrapAttrs,\n                    });\n                    return { fill: style.color || null };\n                }\n            },\n            position(text, { refBBox, elem }) {\n                if (elem instanceof SVGElement) {\n                    return refBBox.getCenter();\n                }\n            },\n        },\n    },\n});\n//# sourceMappingURL=text-block.js.map","import { getImageUrlHook, createShape } from './util';\nexport const Image = createShape('image', {\n    attrs: {\n        image: {\n            refWidth: '100%',\n            refHeight: '100%',\n        },\n    },\n    propHooks: getImageUrlHook(),\n}, {\n    selector: 'image',\n});\n//# sourceMappingURL=image.js.map","import { createShape } from './util';\nexport const Circle = createShape('circle', {\n    attrs: {\n        body: {\n            refCx: '50%',\n            refCy: '50%',\n            refR: '50%',\n        },\n    },\n});\n//# sourceMappingURL=circle.js.map","import { ArrayExt, FunctionExt, Dom } from '@antv/x6-common';\nimport { Rectangle, Point, GeometryUtil } from '@antv/x6-geometry';\nimport { Config } from '../config';\nimport { Cell } from '../model/cell';\nimport { CellView } from './cell';\nimport { Markup } from './markup';\nexport class NodeView extends CellView {\n    constructor() {\n        super(...arguments);\n        this.portsCache = {};\n        // #endregion\n    }\n    get [Symbol.toStringTag]() {\n        return NodeView.toStringTag;\n    }\n    getContainerClassName() {\n        const classList = [\n            super.getContainerClassName(),\n            this.prefixClassName('node'),\n        ];\n        if (!this.can('nodeMovable')) {\n            classList.push(this.prefixClassName('node-immovable'));\n        }\n        return classList.join(' ');\n    }\n    updateClassName(e) {\n        const target = e.target;\n        if (target.hasAttribute('magnet')) {\n            // port\n            const className = this.prefixClassName('port-unconnectable');\n            if (this.can('magnetConnectable')) {\n                Dom.removeClass(target, className);\n            }\n            else {\n                Dom.addClass(target, className);\n            }\n        }\n        else {\n            // node\n            const className = this.prefixClassName('node-immovable');\n            if (this.can('nodeMovable')) {\n                this.removeClass(className);\n            }\n            else {\n                this.addClass(className);\n            }\n        }\n    }\n    isNodeView() {\n        return true;\n    }\n    confirmUpdate(flag, options = {}) {\n        let ret = flag;\n        if (this.hasAction(ret, 'ports')) {\n            this.removePorts();\n            this.cleanPortsCache();\n        }\n        if (this.hasAction(ret, 'render')) {\n            this.render();\n            ret = this.removeAction(ret, [\n                'render',\n                'update',\n                'resize',\n                'translate',\n                'rotate',\n                'ports',\n                'tools',\n            ]);\n        }\n        else {\n            ret = this.handleAction(ret, 'resize', () => this.resize(), 'update');\n            ret = this.handleAction(ret, 'update', () => this.update(), \n            // `update()` will render ports when useCSSSelectors are enabled\n            Config.useCSSSelector ? 'ports' : null);\n            ret = this.handleAction(ret, 'translate', () => this.translate());\n            ret = this.handleAction(ret, 'rotate', () => this.rotate());\n            ret = this.handleAction(ret, 'ports', () => this.renderPorts());\n            ret = this.handleAction(ret, 'tools', () => {\n                if (this.getFlag('tools') === flag) {\n                    this.renderTools();\n                }\n                else {\n                    this.updateTools(options);\n                }\n            });\n        }\n        return ret;\n    }\n    update(partialAttrs) {\n        this.cleanCache();\n        // When CSS selector strings are used, make sure no rule matches port nodes.\n        if (Config.useCSSSelector) {\n            this.removePorts();\n        }\n        const node = this.cell;\n        const size = node.getSize();\n        const attrs = node.getAttrs();\n        this.updateAttrs(this.container, attrs, {\n            attrs: partialAttrs === attrs ? null : partialAttrs,\n            rootBBox: new Rectangle(0, 0, size.width, size.height),\n            selectors: this.selectors,\n        });\n        if (Config.useCSSSelector) {\n            this.renderPorts();\n        }\n    }\n    renderMarkup() {\n        const markup = this.cell.markup;\n        if (markup) {\n            if (typeof markup === 'string') {\n                throw new TypeError('Not support string markup.');\n            }\n            return this.renderJSONMarkup(markup);\n        }\n        throw new TypeError('Invalid node markup.');\n    }\n    renderJSONMarkup(markup) {\n        const ret = this.parseJSONMarkup(markup, this.container);\n        this.selectors = ret.selectors;\n        this.container.appendChild(ret.fragment);\n    }\n    render() {\n        this.empty();\n        this.renderMarkup();\n        this.resize();\n        this.updateTransform();\n        if (!Config.useCSSSelector) {\n            this.renderPorts();\n        }\n        this.renderTools();\n        return this;\n    }\n    resize() {\n        if (this.cell.getAngle()) {\n            this.rotate();\n        }\n        this.update();\n    }\n    translate() {\n        this.updateTransform();\n    }\n    rotate() {\n        this.updateTransform();\n    }\n    getTranslationString() {\n        const position = this.cell.getPosition();\n        return `translate(${position.x},${position.y})`;\n    }\n    getRotationString() {\n        const angle = this.cell.getAngle();\n        if (angle) {\n            const size = this.cell.getSize();\n            return `rotate(${angle},${size.width / 2},${size.height / 2})`;\n        }\n    }\n    updateTransform() {\n        let transform = this.getTranslationString();\n        const rot = this.getRotationString();\n        if (rot) {\n            transform += ` ${rot}`;\n        }\n        this.container.setAttribute('transform', transform);\n    }\n    // #region ports\n    findPortElem(portId, selector) {\n        const cache = portId ? this.portsCache[portId] : null;\n        if (!cache) {\n            return null;\n        }\n        const portRoot = cache.portContentElement;\n        const portSelectors = cache.portContentSelectors || {};\n        return this.findOne(selector, portRoot, portSelectors);\n    }\n    cleanPortsCache() {\n        this.portsCache = {};\n    }\n    removePorts() {\n        Object.values(this.portsCache).forEach((cached) => {\n            Dom.remove(cached.portElement);\n        });\n    }\n    renderPorts() {\n        const container = this.container;\n        // References to rendered elements without z-index\n        const references = [];\n        container.childNodes.forEach((child) => {\n            references.push(child);\n        });\n        const parsedPorts = this.cell.getParsedPorts();\n        const portsGropsByZ = ArrayExt.groupBy(parsedPorts, 'zIndex');\n        const autoZIndexKey = 'auto';\n        // render non-z first\n        if (portsGropsByZ[autoZIndexKey]) {\n            portsGropsByZ[autoZIndexKey].forEach((port) => {\n                const portElement = this.getPortElement(port);\n                container.append(portElement);\n                references.push(portElement);\n            });\n        }\n        Object.keys(portsGropsByZ).forEach((key) => {\n            if (key !== autoZIndexKey) {\n                const zIndex = parseInt(key, 10);\n                this.appendPorts(portsGropsByZ[key], zIndex, references);\n            }\n        });\n        this.updatePorts();\n    }\n    appendPorts(ports, zIndex, refs) {\n        const elems = ports.map((p) => this.getPortElement(p));\n        if (refs[zIndex] || zIndex < 0) {\n            Dom.before(refs[Math.max(zIndex, 0)], elems);\n        }\n        else {\n            Dom.append(this.container, elems);\n        }\n    }\n    getPortElement(port) {\n        const cached = this.portsCache[port.id];\n        if (cached) {\n            return cached.portElement;\n        }\n        return this.createPortElement(port);\n    }\n    createPortElement(port) {\n        let renderResult = Markup.renderMarkup(this.cell.getPortContainerMarkup());\n        const portElement = renderResult.elem;\n        if (portElement == null) {\n            throw new Error('Invalid port container markup.');\n        }\n        renderResult = Markup.renderMarkup(this.getPortMarkup(port));\n        const portContentElement = renderResult.elem;\n        const portContentSelectors = renderResult.selectors;\n        if (portContentElement == null) {\n            throw new Error('Invalid port markup.');\n        }\n        this.setAttrs({\n            port: port.id,\n            'port-group': port.group,\n        }, portContentElement);\n        let portClass = 'x6-port';\n        if (port.group) {\n            portClass += ` x6-port-${port.group}`;\n        }\n        Dom.addClass(portElement, portClass);\n        Dom.addClass(portElement, 'x6-port');\n        Dom.addClass(portContentElement, 'x6-port-body');\n        portElement.appendChild(portContentElement);\n        let portSelectors = portContentSelectors;\n        let portLabelElement;\n        let portLabelSelectors;\n        const existLabel = this.existPortLabel(port);\n        if (existLabel) {\n            renderResult = Markup.renderMarkup(this.getPortLabelMarkup(port.label));\n            portLabelElement = renderResult.elem;\n            portLabelSelectors = renderResult.selectors;\n            if (portLabelElement == null) {\n                throw new Error('Invalid port label markup.');\n            }\n            if (portContentSelectors && portLabelSelectors) {\n                // eslint-disable-next-line\n                for (const key in portLabelSelectors) {\n                    if (portContentSelectors[key] && key !== this.rootSelector) {\n                        throw new Error('Selectors within port must be unique.');\n                    }\n                }\n                portSelectors = Object.assign(Object.assign({}, portContentSelectors), portLabelSelectors);\n            }\n            Dom.addClass(portLabelElement, 'x6-port-label');\n            portElement.appendChild(portLabelElement);\n        }\n        this.portsCache[port.id] = {\n            portElement,\n            portSelectors,\n            portLabelElement,\n            portLabelSelectors,\n            portContentElement,\n            portContentSelectors,\n        };\n        if (this.graph.options.onPortRendered) {\n            this.graph.options.onPortRendered({\n                port,\n                node: this.cell,\n                container: portElement,\n                selectors: portSelectors,\n                labelContainer: portLabelElement,\n                labelSelectors: portLabelSelectors,\n                contentContainer: portContentElement,\n                contentSelectors: portContentSelectors,\n            });\n        }\n        return portElement;\n    }\n    updatePorts() {\n        const groups = this.cell.getParsedGroups();\n        const groupList = Object.keys(groups);\n        if (groupList.length === 0) {\n            this.updatePortGroup();\n        }\n        else {\n            groupList.forEach((groupName) => this.updatePortGroup(groupName));\n        }\n    }\n    updatePortGroup(groupName) {\n        const bbox = Rectangle.fromSize(this.cell.getSize());\n        const metrics = this.cell.getPortsLayoutByGroup(groupName, bbox);\n        for (let i = 0, n = metrics.length; i < n; i += 1) {\n            const metric = metrics[i];\n            const portId = metric.portId;\n            const cached = this.portsCache[portId] || {};\n            const portLayout = metric.portLayout;\n            this.applyPortTransform(cached.portElement, portLayout);\n            if (metric.portAttrs != null) {\n                const options = {\n                    selectors: cached.portSelectors || {},\n                };\n                if (metric.portSize) {\n                    options.rootBBox = Rectangle.fromSize(metric.portSize);\n                }\n                this.updateAttrs(cached.portElement, metric.portAttrs, options);\n            }\n            const labelLayout = metric.labelLayout;\n            if (labelLayout && cached.portLabelElement) {\n                this.applyPortTransform(cached.portLabelElement, labelLayout, -(portLayout.angle || 0));\n                if (labelLayout.attrs) {\n                    const options = {\n                        selectors: cached.portLabelSelectors || {},\n                    };\n                    if (metric.labelSize) {\n                        options.rootBBox = Rectangle.fromSize(metric.labelSize);\n                    }\n                    this.updateAttrs(cached.portLabelElement, labelLayout.attrs, options);\n                }\n            }\n        }\n    }\n    applyPortTransform(element, layout, initialAngle = 0) {\n        const angle = layout.angle;\n        const position = layout.position;\n        const matrix = Dom.createSVGMatrix()\n            .rotate(initialAngle)\n            .translate(position.x || 0, position.y || 0)\n            .rotate(angle || 0);\n        Dom.transform(element, matrix, { absolute: true });\n    }\n    getPortMarkup(port) {\n        return port.markup || this.cell.portMarkup;\n    }\n    getPortLabelMarkup(label) {\n        return label.markup || this.cell.portLabelMarkup;\n    }\n    existPortLabel(port) {\n        return port.attrs && port.attrs.text;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line\n        const node = view.cell;\n        const cell = node;\n        if (x == null || y == null) {\n            return { e, view, node, cell };\n        }\n        return { e, x, y, view, node, cell };\n    }\n    getPortEventArgs(e, port, pos) {\n        const view = this; // eslint-disable-line\n        const node = view.cell;\n        const cell = node;\n        if (pos) {\n            return {\n                e,\n                x: pos.x,\n                y: pos.y,\n                view,\n                node,\n                cell,\n                port,\n            };\n        }\n        return { e, view, node, cell, port };\n    }\n    notifyMouseDown(e, x, y) {\n        super.onMouseDown(e, x, y);\n        this.notify('node:mousedown', this.getEventArgs(e, x, y));\n    }\n    notifyMouseMove(e, x, y) {\n        super.onMouseMove(e, x, y);\n        this.notify('node:mousemove', this.getEventArgs(e, x, y));\n    }\n    notifyMouseUp(e, x, y) {\n        super.onMouseUp(e, x, y);\n        this.notify('node:mouseup', this.getEventArgs(e, x, y));\n    }\n    notifyPortEvent(name, e, pos) {\n        const port = this.findAttr('port', e.target);\n        if (port) {\n            const originType = e.type;\n            if (name === 'node:port:mouseenter') {\n                e.type = 'mouseenter';\n            }\n            else if (name === 'node:port:mouseleave') {\n                e.type = 'mouseleave';\n            }\n            this.notify(name, this.getPortEventArgs(e, port, pos));\n            e.type = originType;\n        }\n    }\n    onClick(e, x, y) {\n        super.onClick(e, x, y);\n        this.notify('node:click', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:click', e, { x, y });\n    }\n    onDblClick(e, x, y) {\n        super.onDblClick(e, x, y);\n        this.notify('node:dblclick', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:dblclick', e, { x, y });\n    }\n    onContextMenu(e, x, y) {\n        super.onContextMenu(e, x, y);\n        this.notify('node:contextmenu', this.getEventArgs(e, x, y));\n        this.notifyPortEvent('node:port:contextmenu', e, { x, y });\n    }\n    onMouseDown(e, x, y) {\n        if (this.isPropagationStopped(e)) {\n            return;\n        }\n        this.notifyMouseDown(e, x, y);\n        this.notifyPortEvent('node:port:mousedown', e, { x, y });\n        this.startNodeDragging(e, x, y);\n    }\n    onMouseMove(e, x, y) {\n        const data = this.getEventData(e);\n        const action = data.action;\n        if (action === 'magnet') {\n            this.dragMagnet(e, x, y);\n        }\n        else {\n            if (action === 'move') {\n                const meta = data;\n                const view = meta.targetView || this;\n                view.dragNode(e, x, y);\n                view.notify('node:moving', {\n                    e,\n                    x,\n                    y,\n                    view,\n                    cell: view.cell,\n                    node: view.cell,\n                });\n            }\n            this.notifyMouseMove(e, x, y);\n            this.notifyPortEvent('node:port:mousemove', e, { x, y });\n        }\n        this.setEventData(e, data);\n    }\n    onMouseUp(e, x, y) {\n        const data = this.getEventData(e);\n        const action = data.action;\n        if (action === 'magnet') {\n            this.stopMagnetDragging(e, x, y);\n        }\n        else {\n            this.notifyMouseUp(e, x, y);\n            this.notifyPortEvent('node:port:mouseup', e, { x, y });\n            if (action === 'move') {\n                const meta = data;\n                const view = meta.targetView || this;\n                view.stopNodeDragging(e, x, y);\n            }\n        }\n        const magnet = data.targetMagnet;\n        if (magnet) {\n            this.onMagnetClick(e, magnet, x, y);\n        }\n        this.checkMouseleave(e);\n    }\n    onMouseOver(e) {\n        super.onMouseOver(e);\n        this.notify('node:mouseover', this.getEventArgs(e));\n        // mock mouseenter event,so we can get correct trigger time when move mouse from node to port\n        // wo also need to change e.type for use get correct event args\n        this.notifyPortEvent('node:port:mouseenter', e);\n        this.notifyPortEvent('node:port:mouseover', e);\n    }\n    onMouseOut(e) {\n        super.onMouseOut(e);\n        this.notify('node:mouseout', this.getEventArgs(e));\n        // mock mouseleave event,so we can get correct trigger time when move mouse from port to node\n        // wo also need to change e.type for use get correct event args\n        this.notifyPortEvent('node:port:mouseleave', e);\n        this.notifyPortEvent('node:port:mouseout', e);\n    }\n    onMouseEnter(e) {\n        this.updateClassName(e);\n        super.onMouseEnter(e);\n        this.notify('node:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        super.onMouseLeave(e);\n        this.notify('node:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        super.onMouseWheel(e, x, y, delta);\n        this.notify('node:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetClick(e, magnet, x, y) {\n        const graph = this.graph;\n        const count = graph.view.getMouseMovedCount(e);\n        if (count > graph.options.clickThreshold) {\n            return;\n        }\n        this.notify('node:magnet:click', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetDblClick(e, magnet, x, y) {\n        this.notify('node:magnet:dblclick', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetContextMenu(e, magnet, x, y) {\n        this.notify('node:magnet:contextmenu', Object.assign({ magnet }, this.getEventArgs(e, x, y)));\n    }\n    onMagnetMouseDown(e, magnet, x, y) {\n        this.startMagnetDragging(e, x, y);\n    }\n    onCustomEvent(e, name, x, y) {\n        this.notify('node:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n        super.onCustomEvent(e, name, x, y);\n    }\n    prepareEmbedding(e) {\n        const graph = this.graph;\n        const data = this.getEventData(e);\n        const node = data.cell || this.cell;\n        const view = graph.findViewByCell(node);\n        const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n        this.notify('node:embed', {\n            e,\n            node,\n            view,\n            cell: node,\n            x: localPoint.x,\n            y: localPoint.y,\n            currentParent: node.getParent(),\n        });\n    }\n    processEmbedding(e, data) {\n        const cell = data.cell || this.cell;\n        const graph = data.graph || this.graph;\n        const options = graph.options.embedding;\n        const findParent = options.findParent;\n        let candidates = typeof findParent === 'function'\n            ? FunctionExt.call(findParent, graph, {\n                view: this,\n                node: this.cell,\n            }).filter((c) => {\n                return (Cell.isCell(c) &&\n                    this.cell.id !== c.id &&\n                    !c.isDescendantOf(this.cell));\n            })\n            : graph.model.getNodesUnderNode(cell, {\n                by: findParent,\n            });\n        // Picks the node with the highest `z` index\n        if (options.frontOnly) {\n            if (candidates.length > 0) {\n                const zIndexMap = ArrayExt.groupBy(candidates, 'zIndex');\n                const maxZIndex = ArrayExt.max(Object.keys(zIndexMap).map((z) => parseInt(z, 10)));\n                if (maxZIndex) {\n                    candidates = zIndexMap[maxZIndex];\n                }\n            }\n        }\n        // Filter the nodes which is invisiable\n        candidates = candidates.filter((candidate) => candidate.visible);\n        let newCandidateView = null;\n        const prevCandidateView = data.candidateEmbedView;\n        const validateEmbeding = options.validate;\n        for (let i = candidates.length - 1; i >= 0; i -= 1) {\n            const candidate = candidates[i];\n            if (prevCandidateView && prevCandidateView.cell.id === candidate.id) {\n                // candidate remains the same\n                newCandidateView = prevCandidateView;\n                break;\n            }\n            else {\n                const view = candidate.findView(graph);\n                if (FunctionExt.call(validateEmbeding, graph, {\n                    child: this.cell,\n                    parent: view.cell,\n                    childView: this,\n                    parentView: view,\n                })) {\n                    // flip to the new candidate\n                    newCandidateView = view;\n                    break;\n                }\n            }\n        }\n        this.clearEmbedding(data);\n        if (newCandidateView) {\n            newCandidateView.highlight(null, { type: 'embedding' });\n        }\n        data.candidateEmbedView = newCandidateView;\n        const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n        this.notify('node:embedding', {\n            e,\n            cell,\n            node: cell,\n            view: graph.findViewByCell(cell),\n            x: localPoint.x,\n            y: localPoint.y,\n            currentParent: cell.getParent(),\n            candidateParent: newCandidateView ? newCandidateView.cell : null,\n        });\n    }\n    clearEmbedding(data) {\n        const candidateView = data.candidateEmbedView;\n        if (candidateView) {\n            candidateView.unhighlight(null, { type: 'embedding' });\n            data.candidateEmbedView = null;\n        }\n    }\n    finalizeEmbedding(e, data) {\n        this.graph.startBatch('embedding');\n        const cell = data.cell || this.cell;\n        const graph = data.graph || this.graph;\n        const view = graph.findViewByCell(cell);\n        const parent = cell.getParent();\n        const candidateView = data.candidateEmbedView;\n        if (candidateView) {\n            // Candidate view is chosen to become the parent of the node.\n            candidateView.unhighlight(null, { type: 'embedding' });\n            data.candidateEmbedView = null;\n            if (parent == null || parent.id !== candidateView.cell.id) {\n                candidateView.cell.insertChild(cell, undefined, { ui: true });\n            }\n        }\n        else if (parent) {\n            parent.unembed(cell, { ui: true });\n        }\n        graph.model.getConnectedEdges(cell, { deep: true }).forEach((edge) => {\n            edge.updateParent({ ui: true });\n        });\n        if (view && candidateView) {\n            const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n            view.notify('node:embedded', {\n                e,\n                cell,\n                x: localPoint.x,\n                y: localPoint.y,\n                node: cell,\n                view: graph.findViewByCell(cell),\n                previousParent: parent,\n                currentParent: cell.getParent(),\n            });\n        }\n        this.graph.stopBatch('embedding');\n    }\n    getDelegatedView() {\n        let cell = this.cell;\n        let view = this; // eslint-disable-line\n        while (view) {\n            if (cell.isEdge()) {\n                break;\n            }\n            if (!cell.hasParent() || view.can('stopDelegateOnDragging')) {\n                return view;\n            }\n            cell = cell.getParent();\n            view = this.graph.findViewByCell(cell);\n        }\n        return null;\n    }\n    validateMagnet(cellView, magnet, e) {\n        if (magnet.getAttribute('magnet') !== 'passive') {\n            const validate = this.graph.options.connecting.validateMagnet;\n            if (validate) {\n                return FunctionExt.call(validate, this.graph, {\n                    e,\n                    magnet,\n                    view: cellView,\n                    cell: cellView.cell,\n                });\n            }\n            return true;\n        }\n        return false;\n    }\n    startMagnetDragging(e, x, y) {\n        if (!this.can('magnetConnectable')) {\n            return;\n        }\n        e.stopPropagation();\n        const magnet = e.currentTarget;\n        const graph = this.graph;\n        this.setEventData(e, {\n            targetMagnet: magnet,\n        });\n        if (this.validateMagnet(this, magnet, e)) {\n            if (graph.options.magnetThreshold <= 0) {\n                this.startConnectting(e, magnet, x, y);\n            }\n            this.setEventData(e, {\n                action: 'magnet',\n            });\n            this.stopPropagation(e);\n        }\n        else {\n            this.onMouseDown(e, x, y);\n        }\n        graph.view.delegateDragEvents(e, this);\n    }\n    startConnectting(e, magnet, x, y) {\n        this.graph.model.startBatch('add-edge');\n        const edgeView = this.createEdgeFromMagnet(magnet, x, y);\n        edgeView.setEventData(e, edgeView.prepareArrowheadDragging('target', {\n            x,\n            y,\n            isNewEdge: true,\n            fallbackAction: 'remove',\n        }));\n        this.setEventData(e, { edgeView });\n        edgeView.notifyMouseDown(e, x, y);\n    }\n    getDefaultEdge(sourceView, sourceMagnet) {\n        let edge;\n        const create = this.graph.options.connecting.createEdge;\n        if (create) {\n            edge = FunctionExt.call(create, this.graph, {\n                sourceMagnet,\n                sourceView,\n                sourceCell: sourceView.cell,\n            });\n        }\n        return edge;\n    }\n    createEdgeFromMagnet(magnet, x, y) {\n        const graph = this.graph;\n        const model = graph.model;\n        const edge = this.getDefaultEdge(this, magnet);\n        edge.setSource(Object.assign(Object.assign({}, edge.getSource()), this.getEdgeTerminal(magnet, x, y, edge, 'source')));\n        edge.setTarget(Object.assign(Object.assign({}, edge.getTarget()), { x, y }));\n        edge.addTo(model, { async: false, ui: true });\n        return edge.findView(graph);\n    }\n    dragMagnet(e, x, y) {\n        const data = this.getEventData(e);\n        const edgeView = data.edgeView;\n        if (edgeView) {\n            edgeView.onMouseMove(e, x, y);\n            this.autoScrollGraph(e.clientX, e.clientY);\n        }\n        else {\n            const graph = this.graph;\n            const magnetThreshold = graph.options.magnetThreshold;\n            const currentTarget = this.getEventTarget(e);\n            const targetMagnet = data.targetMagnet;\n            // magnetThreshold when the pointer leaves the magnet\n            if (magnetThreshold === 'onleave') {\n                if (targetMagnet === currentTarget ||\n                    targetMagnet.contains(currentTarget)) {\n                    return;\n                }\n                // eslint-disable-next-line no-lonely-if\n            }\n            else {\n                // magnetThreshold defined as a number of movements\n                if (graph.view.getMouseMovedCount(e) <= magnetThreshold) {\n                    return;\n                }\n            }\n            this.startConnectting(e, targetMagnet, x, y);\n        }\n    }\n    stopMagnetDragging(e, x, y) {\n        const data = this.eventData(e);\n        const edgeView = data.edgeView;\n        if (edgeView) {\n            edgeView.onMouseUp(e, x, y);\n            this.graph.model.stopBatch('add-edge');\n        }\n    }\n    notifyUnhandledMouseDown(e, x, y) {\n        this.notify('node:unhandled:mousedown', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            node: this.cell,\n        });\n    }\n    notifyNodeMove(name, e, x, y, cell) {\n        let cells = [cell];\n        const selection = this.graph.getPlugin('selection');\n        if (selection && selection.isSelectionMovable()) {\n            const selectedCells = selection.getSelectedCells();\n            if (selectedCells.includes(cell)) {\n                cells = selectedCells.filter((c) => c.isNode());\n            }\n        }\n        cells.forEach((c) => {\n            this.notify(name, {\n                e,\n                x,\n                y,\n                cell: c,\n                node: c,\n                view: c.findView(this.graph),\n            });\n        });\n    }\n    getRestrictArea(view) {\n        const restrict = this.graph.options.translating.restrict;\n        const area = typeof restrict === 'function'\n            ? FunctionExt.call(restrict, this.graph, view)\n            : restrict;\n        if (typeof area === 'number') {\n            return this.graph.transform.getGraphArea().inflate(area);\n        }\n        if (area === true) {\n            return this.graph.transform.getGraphArea();\n        }\n        return area || null;\n    }\n    startNodeDragging(e, x, y) {\n        const targetView = this.getDelegatedView();\n        if (targetView == null || !targetView.can('nodeMovable')) {\n            return this.notifyUnhandledMouseDown(e, x, y);\n        }\n        this.setEventData(e, {\n            targetView,\n            action: 'move',\n        });\n        const position = Point.create(targetView.cell.getPosition());\n        targetView.setEventData(e, {\n            moving: false,\n            offset: position.diff(x, y),\n            restrict: this.getRestrictArea(targetView),\n        });\n    }\n    dragNode(e, x, y) {\n        const node = this.cell;\n        const graph = this.graph;\n        const gridSize = graph.getGridSize();\n        const data = this.getEventData(e);\n        const offset = data.offset;\n        const restrict = data.restrict;\n        if (!data.moving) {\n            data.moving = true;\n            this.addClass('node-moving');\n            this.notifyNodeMove('node:move', e, x, y, this.cell);\n        }\n        this.autoScrollGraph(e.clientX, e.clientY);\n        const posX = GeometryUtil.snapToGrid(x + offset.x, gridSize);\n        const posY = GeometryUtil.snapToGrid(y + offset.y, gridSize);\n        node.setPosition(posX, posY, {\n            restrict,\n            deep: true,\n            ui: true,\n        });\n        if (graph.options.embedding.enabled) {\n            if (!data.embedding) {\n                this.prepareEmbedding(e);\n                data.embedding = true;\n            }\n            this.processEmbedding(e, data);\n        }\n    }\n    stopNodeDragging(e, x, y) {\n        const data = this.getEventData(e);\n        if (data.embedding) {\n            this.finalizeEmbedding(e, data);\n        }\n        if (data.moving) {\n            this.removeClass('node-moving');\n            this.notifyNodeMove('node:moved', e, x, y, this.cell);\n        }\n        data.moving = false;\n        data.embedding = false;\n    }\n    // eslint-disable-next-line\n    autoScrollGraph(x, y) {\n        const scroller = this.graph.getPlugin('scroller');\n        if (scroller) {\n            scroller.autoScroll(x, y);\n        }\n    }\n}\n(function (NodeView) {\n    NodeView.toStringTag = `X6.${NodeView.name}`;\n    function isNodeView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof NodeView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === NodeView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.findPortElem === 'function' &&\n            typeof view.resize === 'function' &&\n            typeof view.rotate === 'function' &&\n            typeof view.translate === 'function') {\n            return true;\n        }\n        return false;\n    }\n    NodeView.isNodeView = isNodeView;\n})(NodeView || (NodeView = {}));\nNodeView.config({\n    isSvgElement: true,\n    priority: 0,\n    bootstrap: ['render'],\n    actions: {\n        view: ['render'],\n        markup: ['render'],\n        attrs: ['update'],\n        size: ['resize', 'ports', 'tools'],\n        angle: ['rotate', 'tools'],\n        position: ['translate', 'tools'],\n        ports: ['ports'],\n        tools: ['tools'],\n    },\n});\nNodeView.registry.register('node', NodeView, true);\n//# sourceMappingURL=node.js.map","import { Rectangle, Polyline, Point, Angle, Path, Line, } from '@antv/x6-geometry';\nimport { ObjectExt, NumberExt, FunctionExt, Dom, Vector, } from '@antv/x6-common';\nimport { Router, Connector, NodeAnchor, EdgeAnchor, ConnectionPoint, } from '../registry';\nimport { Edge } from '../model/edge';\nimport { CellView } from './cell';\nimport { NodeView } from './node';\nexport class EdgeView extends CellView {\n    constructor() {\n        super(...arguments);\n        this.POINT_ROUNDING = 2;\n        // #endregion\n    }\n    get [Symbol.toStringTag]() {\n        return EdgeView.toStringTag;\n    }\n    getContainerClassName() {\n        return [super.getContainerClassName(), this.prefixClassName('edge')].join(' ');\n    }\n    get sourceBBox() {\n        const sourceView = this.sourceView;\n        if (!sourceView) {\n            const sourceDef = this.cell.getSource();\n            return new Rectangle(sourceDef.x, sourceDef.y);\n        }\n        const sourceMagnet = this.sourceMagnet;\n        if (sourceView.isEdgeElement(sourceMagnet)) {\n            return new Rectangle(this.sourceAnchor.x, this.sourceAnchor.y);\n        }\n        return sourceView.getBBoxOfElement(sourceMagnet || sourceView.container);\n    }\n    get targetBBox() {\n        const targetView = this.targetView;\n        if (!targetView) {\n            const targetDef = this.cell.getTarget();\n            return new Rectangle(targetDef.x, targetDef.y);\n        }\n        const targetMagnet = this.targetMagnet;\n        if (targetView.isEdgeElement(targetMagnet)) {\n            return new Rectangle(this.targetAnchor.x, this.targetAnchor.y);\n        }\n        return targetView.getBBoxOfElement(targetMagnet || targetView.container);\n    }\n    isEdgeView() {\n        return true;\n    }\n    confirmUpdate(flag, options = {}) {\n        let ref = flag;\n        if (this.hasAction(ref, 'source')) {\n            if (!this.updateTerminalProperties('source')) {\n                return ref;\n            }\n            ref = this.removeAction(ref, 'source');\n        }\n        if (this.hasAction(ref, 'target')) {\n            if (!this.updateTerminalProperties('target')) {\n                return ref;\n            }\n            ref = this.removeAction(ref, 'target');\n        }\n        if (this.hasAction(ref, 'render')) {\n            this.render();\n            ref = this.removeAction(ref, ['render', 'update', 'labels', 'tools']);\n            return ref;\n        }\n        ref = this.handleAction(ref, 'update', () => this.update(options));\n        ref = this.handleAction(ref, 'labels', () => this.onLabelsChange(options));\n        ref = this.handleAction(ref, 'tools', () => this.renderTools());\n        return ref;\n    }\n    // #region render\n    render() {\n        this.empty();\n        this.renderMarkup();\n        this.labelContainer = null;\n        this.renderLabels();\n        this.update();\n        this.renderTools();\n        return this;\n    }\n    renderMarkup() {\n        const markup = this.cell.markup;\n        if (markup) {\n            if (typeof markup === 'string') {\n                throw new TypeError('Not support string markup.');\n            }\n            return this.renderJSONMarkup(markup);\n        }\n        throw new TypeError('Invalid edge markup.');\n    }\n    renderJSONMarkup(markup) {\n        const ret = this.parseJSONMarkup(markup, this.container);\n        this.selectors = ret.selectors;\n        this.container.append(ret.fragment);\n    }\n    customizeLabels() {\n        if (this.labelContainer) {\n            const edge = this.cell;\n            const labels = edge.labels;\n            for (let i = 0, n = labels.length; i < n; i += 1) {\n                const label = labels[i];\n                const container = this.labelCache[i];\n                const selectors = this.labelSelectors[i];\n                const onEdgeLabelRendered = this.graph.options.onEdgeLabelRendered;\n                if (onEdgeLabelRendered) {\n                    onEdgeLabelRendered({\n                        edge,\n                        label,\n                        container,\n                        selectors,\n                    });\n                }\n            }\n        }\n    }\n    renderLabels() {\n        const edge = this.cell;\n        const labels = edge.getLabels();\n        const count = labels.length;\n        let container = this.labelContainer;\n        this.labelCache = {};\n        this.labelSelectors = {};\n        if (count <= 0) {\n            if (container && container.parentNode) {\n                container.parentNode.removeChild(container);\n            }\n            return this;\n        }\n        if (container) {\n            this.empty(container);\n        }\n        else {\n            container = Dom.createSvgElement('g');\n            this.addClass(this.prefixClassName('edge-labels'), container);\n            this.labelContainer = container;\n        }\n        for (let i = 0, ii = labels.length; i < ii; i += 1) {\n            const label = labels[i];\n            const normalized = this.normalizeLabelMarkup(this.parseLabelMarkup(label.markup));\n            let labelNode;\n            let selectors;\n            if (normalized) {\n                labelNode = normalized.node;\n                selectors = normalized.selectors;\n            }\n            else {\n                const defaultLabel = edge.getDefaultLabel();\n                const normalized = this.normalizeLabelMarkup(this.parseLabelMarkup(defaultLabel.markup));\n                labelNode = normalized.node;\n                selectors = normalized.selectors;\n            }\n            labelNode.setAttribute('data-index', `${i}`);\n            container.appendChild(labelNode);\n            const rootSelector = this.rootSelector;\n            if (selectors[rootSelector]) {\n                throw new Error('Ambiguous label root selector.');\n            }\n            selectors[rootSelector] = labelNode;\n            this.labelCache[i] = labelNode;\n            this.labelSelectors[i] = selectors;\n        }\n        if (container.parentNode == null) {\n            this.container.appendChild(container);\n        }\n        this.updateLabels();\n        this.customizeLabels();\n        return this;\n    }\n    onLabelsChange(options = {}) {\n        if (this.shouldRerenderLabels(options)) {\n            this.renderLabels();\n        }\n        else {\n            this.updateLabels();\n        }\n        this.updateLabelPositions();\n    }\n    shouldRerenderLabels(options = {}) {\n        const previousLabels = this.cell.previous('labels');\n        if (previousLabels == null) {\n            return true;\n        }\n        // Here is an optimization for cases when we know, that change does\n        // not require re-rendering of all labels.\n        if ('propertyPathArray' in options && 'propertyValue' in options) {\n            // The label is setting by `prop()` method\n            const pathArray = options.propertyPathArray || [];\n            const pathLength = pathArray.length;\n            if (pathLength > 1) {\n                // We are changing a single label here e.g. 'labels/0/position'\n                const index = pathArray[1];\n                if (previousLabels[index]) {\n                    if (pathLength === 2) {\n                        // We are changing the entire label. Need to check if the\n                        // markup is also being changed.\n                        return (typeof options.propertyValue === 'object' &&\n                            ObjectExt.has(options.propertyValue, 'markup'));\n                    }\n                    // We are changing a label property but not the markup\n                    if (pathArray[2] !== 'markup') {\n                        return false;\n                    }\n                }\n            }\n        }\n        return true;\n    }\n    parseLabelMarkup(markup) {\n        if (markup) {\n            if (typeof markup === 'string') {\n                return this.parseLabelStringMarkup(markup);\n            }\n            return this.parseJSONMarkup(markup);\n        }\n        return null;\n    }\n    parseLabelStringMarkup(labelMarkup) {\n        const children = Vector.createVectors(labelMarkup);\n        const fragment = document.createDocumentFragment();\n        for (let i = 0, n = children.length; i < n; i += 1) {\n            const currentChild = children[i].node;\n            fragment.appendChild(currentChild);\n        }\n        return { fragment, selectors: {} };\n    }\n    normalizeLabelMarkup(markup) {\n        if (markup == null) {\n            return;\n        }\n        const fragment = markup.fragment;\n        if (!(fragment instanceof DocumentFragment) || !fragment.hasChildNodes()) {\n            throw new Error('Invalid label markup.');\n        }\n        let vel;\n        const childNodes = fragment.childNodes;\n        if (childNodes.length > 1 || childNodes[0].nodeName.toUpperCase() !== 'G') {\n            vel = Vector.create('g').append(fragment);\n        }\n        else {\n            vel = Vector.create(childNodes[0]);\n        }\n        vel.addClass(this.prefixClassName('edge-label'));\n        return {\n            node: vel.node,\n            selectors: markup.selectors,\n        };\n    }\n    updateLabels() {\n        if (this.labelContainer) {\n            const edge = this.cell;\n            const labels = edge.labels;\n            const canLabelMove = this.can('edgeLabelMovable');\n            const defaultLabel = edge.getDefaultLabel();\n            for (let i = 0, n = labels.length; i < n; i += 1) {\n                const elem = this.labelCache[i];\n                const selectors = this.labelSelectors[i];\n                elem.setAttribute('cursor', canLabelMove ? 'move' : 'default');\n                const label = labels[i];\n                const attrs = ObjectExt.merge({}, defaultLabel.attrs, label.attrs);\n                this.updateAttrs(elem, attrs, {\n                    selectors,\n                    rootBBox: label.size ? Rectangle.fromSize(label.size) : undefined,\n                });\n            }\n        }\n    }\n    renderTools() {\n        const tools = this.cell.getTools();\n        this.addTools(tools);\n        return this;\n    }\n    // #endregion\n    // #region updating\n    update(options = {}) {\n        this.cleanCache();\n        this.updateConnection(options);\n        const attrs = this.cell.getAttrs();\n        if (attrs != null) {\n            this.updateAttrs(this.container, attrs, {\n                selectors: this.selectors,\n            });\n        }\n        this.updateLabelPositions();\n        this.updateTools(options);\n        return this;\n    }\n    removeRedundantLinearVertices(options = {}) {\n        const edge = this.cell;\n        const vertices = edge.getVertices();\n        const routePoints = [this.sourceAnchor, ...vertices, this.targetAnchor];\n        const rawCount = routePoints.length;\n        // Puts the route points into a polyline and try to simplify.\n        const polyline = new Polyline(routePoints);\n        polyline.simplify({ threshold: 0.01 });\n        const simplifiedPoints = polyline.points.map((point) => point.toJSON());\n        const simplifiedCount = simplifiedPoints.length;\n        // If simplification did not remove any redundant vertices.\n        if (rawCount === simplifiedCount) {\n            return 0;\n        }\n        // Sets simplified polyline points as edge vertices.\n        // Removes first and last polyline points again (source/target anchors).\n        edge.setVertices(simplifiedPoints.slice(1, simplifiedCount - 1), options);\n        return rawCount - simplifiedCount;\n    }\n    getTerminalView(type) {\n        switch (type) {\n            case 'source':\n                return this.sourceView || null;\n            case 'target':\n                return this.targetView || null;\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalAnchor(type) {\n        switch (type) {\n            case 'source':\n                return Point.create(this.sourceAnchor);\n            case 'target':\n                return Point.create(this.targetAnchor);\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalConnectionPoint(type) {\n        switch (type) {\n            case 'source':\n                return Point.create(this.sourcePoint);\n            case 'target':\n                return Point.create(this.targetPoint);\n            default:\n                throw new Error(`Unknown terminal type '${type}'`);\n        }\n    }\n    getTerminalMagnet(type, options = {}) {\n        switch (type) {\n            case 'source': {\n                if (options.raw) {\n                    return this.sourceMagnet;\n                }\n                const sourceView = this.sourceView;\n                if (!sourceView) {\n                    return null;\n                }\n                return this.sourceMagnet || sourceView.container;\n            }\n            case 'target': {\n                if (options.raw) {\n                    return this.targetMagnet;\n                }\n                const targetView = this.targetView;\n                if (!targetView) {\n                    return null;\n                }\n                return this.targetMagnet || targetView.container;\n            }\n            default: {\n                throw new Error(`Unknown terminal type '${type}'`);\n            }\n        }\n    }\n    updateConnection(options = {}) {\n        const edge = this.cell;\n        // The edge is being translated by an ancestor that will shift\n        // source, target and vertices by an equal distance.\n        // todo isFragmentDescendantOf is invalid\n        if (options.translateBy &&\n            edge.isFragmentDescendantOf(options.translateBy)) {\n            const tx = options.tx || 0;\n            const ty = options.ty || 0;\n            this.routePoints = new Polyline(this.routePoints).translate(tx, ty).points;\n            this.translateConnectionPoints(tx, ty);\n            this.path.translate(tx, ty);\n        }\n        else {\n            const vertices = edge.getVertices();\n            // 1. Find anchor points\n            const anchors = this.findAnchors(vertices);\n            this.sourceAnchor = anchors.source;\n            this.targetAnchor = anchors.target;\n            // 2. Find route points\n            this.routePoints = this.findRoutePoints(vertices);\n            // 3. Find connection points\n            const connectionPoints = this.findConnectionPoints(this.routePoints, this.sourceAnchor, this.targetAnchor);\n            this.sourcePoint = connectionPoints.source;\n            this.targetPoint = connectionPoints.target;\n            // 4. Find Marker Connection Point\n            const markerPoints = this.findMarkerPoints(this.routePoints, this.sourcePoint, this.targetPoint);\n            // 5. Make path\n            this.path = this.findPath(this.routePoints, markerPoints.source || this.sourcePoint, markerPoints.target || this.targetPoint);\n        }\n        this.cleanCache();\n    }\n    findAnchors(vertices) {\n        const edge = this.cell;\n        const source = edge.source;\n        const target = edge.target;\n        const firstVertex = vertices[0];\n        const lastVertex = vertices[vertices.length - 1];\n        if (target.priority && !source.priority) {\n            // Reversed order\n            return this.findAnchorsOrdered('target', lastVertex, 'source', firstVertex);\n        }\n        // Usual order\n        return this.findAnchorsOrdered('source', firstVertex, 'target', lastVertex);\n    }\n    findAnchorsOrdered(firstType, firstPoint, secondType, secondPoint) {\n        let firstAnchor;\n        let secondAnchor;\n        const edge = this.cell;\n        const firstTerminal = edge[firstType];\n        const secondTerminal = edge[secondType];\n        const firstView = this.getTerminalView(firstType);\n        const secondView = this.getTerminalView(secondType);\n        const firstMagnet = this.getTerminalMagnet(firstType);\n        const secondMagnet = this.getTerminalMagnet(secondType);\n        if (firstView) {\n            let firstRef;\n            if (firstPoint) {\n                firstRef = Point.create(firstPoint);\n            }\n            else if (secondView) {\n                firstRef = secondMagnet;\n            }\n            else {\n                firstRef = Point.create(secondTerminal);\n            }\n            firstAnchor = this.getAnchor(firstTerminal.anchor, firstView, firstMagnet, firstRef, firstType);\n        }\n        else {\n            firstAnchor = Point.create(firstTerminal);\n        }\n        if (secondView) {\n            const secondRef = Point.create(secondPoint || firstAnchor);\n            secondAnchor = this.getAnchor(secondTerminal.anchor, secondView, secondMagnet, secondRef, secondType);\n        }\n        else {\n            secondAnchor = Point.isPointLike(secondTerminal)\n                ? Point.create(secondTerminal)\n                : new Point();\n        }\n        return {\n            [firstType]: firstAnchor,\n            [secondType]: secondAnchor,\n        };\n    }\n    getAnchor(def, cellView, magnet, ref, terminalType) {\n        const isEdge = cellView.isEdgeElement(magnet);\n        const connecting = this.graph.options.connecting;\n        let config = typeof def === 'string' ? { name: def } : def;\n        if (!config) {\n            const defaults = isEdge\n                ? (terminalType === 'source'\n                    ? connecting.sourceEdgeAnchor\n                    : connecting.targetEdgeAnchor) || connecting.edgeAnchor\n                : (terminalType === 'source'\n                    ? connecting.sourceAnchor\n                    : connecting.targetAnchor) || connecting.anchor;\n            config = typeof defaults === 'string' ? { name: defaults } : defaults;\n        }\n        if (!config) {\n            throw new Error(`Anchor should be specified.`);\n        }\n        let anchor;\n        const name = config.name;\n        if (isEdge) {\n            const fn = EdgeAnchor.registry.get(name);\n            if (typeof fn !== 'function') {\n                return EdgeAnchor.registry.onNotFound(name);\n            }\n            anchor = FunctionExt.call(fn, this, cellView, magnet, ref, config.args || {}, terminalType);\n        }\n        else {\n            const fn = NodeAnchor.registry.get(name);\n            if (typeof fn !== 'function') {\n                return NodeAnchor.registry.onNotFound(name);\n            }\n            anchor = FunctionExt.call(fn, this, cellView, magnet, ref, config.args || {}, terminalType);\n        }\n        return anchor ? anchor.round(this.POINT_ROUNDING) : new Point();\n    }\n    findRoutePoints(vertices = []) {\n        const defaultRouter = this.graph.options.connecting.router || Router.presets.normal;\n        const router = this.cell.getRouter() || defaultRouter;\n        let routePoints;\n        if (typeof router === 'function') {\n            routePoints = FunctionExt.call(router, this, vertices, {}, this);\n        }\n        else {\n            const name = typeof router === 'string' ? router : router.name;\n            const args = typeof router === 'string' ? {} : router.args || {};\n            const fn = name ? Router.registry.get(name) : Router.presets.normal;\n            if (typeof fn !== 'function') {\n                return Router.registry.onNotFound(name);\n            }\n            routePoints = FunctionExt.call(fn, this, vertices, args, this);\n        }\n        return routePoints == null\n            ? vertices.map((p) => Point.create(p))\n            : routePoints.map((p) => Point.create(p));\n    }\n    findConnectionPoints(routePoints, sourceAnchor, targetAnchor) {\n        const edge = this.cell;\n        const connecting = this.graph.options.connecting;\n        const sourceTerminal = edge.getSource();\n        const targetTerminal = edge.getTarget();\n        const sourceView = this.sourceView;\n        const targetView = this.targetView;\n        const firstRoutePoint = routePoints[0];\n        const lastRoutePoint = routePoints[routePoints.length - 1];\n        // source\n        let sourcePoint;\n        if (sourceView && !sourceView.isEdgeElement(this.sourceMagnet)) {\n            const sourceMagnet = this.sourceMagnet || sourceView.container;\n            const sourcePointRef = firstRoutePoint || targetAnchor;\n            const sourceLine = new Line(sourcePointRef, sourceAnchor);\n            const connectionPointDef = sourceTerminal.connectionPoint ||\n                connecting.sourceConnectionPoint ||\n                connecting.connectionPoint;\n            sourcePoint = this.getConnectionPoint(connectionPointDef, sourceView, sourceMagnet, sourceLine, 'source');\n        }\n        else {\n            sourcePoint = sourceAnchor;\n        }\n        // target\n        let targetPoint;\n        if (targetView && !targetView.isEdgeElement(this.targetMagnet)) {\n            const targetMagnet = this.targetMagnet || targetView.container;\n            const targetConnectionPointDef = targetTerminal.connectionPoint ||\n                connecting.targetConnectionPoint ||\n                connecting.connectionPoint;\n            const targetPointRef = lastRoutePoint || sourceAnchor;\n            const targetLine = new Line(targetPointRef, targetAnchor);\n            targetPoint = this.getConnectionPoint(targetConnectionPointDef, targetView, targetMagnet, targetLine, 'target');\n        }\n        else {\n            targetPoint = targetAnchor;\n        }\n        return {\n            source: sourcePoint,\n            target: targetPoint,\n        };\n    }\n    getConnectionPoint(def, view, magnet, line, endType) {\n        const anchor = line.end;\n        if (def == null) {\n            return anchor;\n        }\n        const name = typeof def === 'string' ? def : def.name;\n        const args = typeof def === 'string' ? {} : def.args;\n        const fn = ConnectionPoint.registry.get(name);\n        if (typeof fn !== 'function') {\n            return ConnectionPoint.registry.onNotFound(name);\n        }\n        const connectionPoint = FunctionExt.call(fn, this, line, view, magnet, args || {}, endType);\n        return connectionPoint ? connectionPoint.round(this.POINT_ROUNDING) : anchor;\n    }\n    findMarkerPoints(routePoints, sourcePoint, targetPoint) {\n        const getLineWidth = (type) => {\n            const attrs = this.cell.getAttrs();\n            const keys = Object.keys(attrs);\n            for (let i = 0, l = keys.length; i < l; i += 1) {\n                const attr = attrs[keys[i]];\n                if (attr[`${type}Marker`] || attr[`${type}-marker`]) {\n                    const strokeWidth = attr.strokeWidth || attr['stroke-width'];\n                    if (strokeWidth) {\n                        return parseFloat(strokeWidth);\n                    }\n                    break;\n                }\n            }\n            return null;\n        };\n        const firstRoutePoint = routePoints[0];\n        const lastRoutePoint = routePoints[routePoints.length - 1];\n        let sourceMarkerPoint;\n        let targetMarkerPoint;\n        const sourceStrokeWidth = getLineWidth('source');\n        if (sourceStrokeWidth) {\n            sourceMarkerPoint = sourcePoint\n                .clone()\n                .move(firstRoutePoint || targetPoint, -sourceStrokeWidth);\n        }\n        const targetStrokeWidth = getLineWidth('target');\n        if (targetStrokeWidth) {\n            targetMarkerPoint = targetPoint\n                .clone()\n                .move(lastRoutePoint || sourcePoint, -targetStrokeWidth);\n        }\n        this.sourceMarkerPoint = sourceMarkerPoint || sourcePoint.clone();\n        this.targetMarkerPoint = targetMarkerPoint || targetPoint.clone();\n        return {\n            source: sourceMarkerPoint,\n            target: targetMarkerPoint,\n        };\n    }\n    findPath(routePoints, sourcePoint, targetPoint) {\n        const def = this.cell.getConnector() || this.graph.options.connecting.connector;\n        let name;\n        let args;\n        let fn;\n        if (typeof def === 'string') {\n            name = def;\n        }\n        else {\n            name = def.name;\n            args = def.args;\n        }\n        if (name) {\n            const method = Connector.registry.get(name);\n            if (typeof method !== 'function') {\n                return Connector.registry.onNotFound(name);\n            }\n            fn = method;\n        }\n        else {\n            fn = Connector.presets.normal;\n        }\n        const path = FunctionExt.call(fn, this, sourcePoint, targetPoint, routePoints, Object.assign(Object.assign({}, args), { raw: true }), this);\n        return typeof path === 'string' ? Path.parse(path) : path;\n    }\n    translateConnectionPoints(tx, ty) {\n        this.sourcePoint.translate(tx, ty);\n        this.targetPoint.translate(tx, ty);\n        this.sourceAnchor.translate(tx, ty);\n        this.targetAnchor.translate(tx, ty);\n        this.sourceMarkerPoint.translate(tx, ty);\n        this.targetMarkerPoint.translate(tx, ty);\n    }\n    updateLabelPositions() {\n        if (this.labelContainer == null) {\n            return this;\n        }\n        const path = this.path;\n        if (!path) {\n            return this;\n        }\n        const edge = this.cell;\n        const labels = edge.getLabels();\n        if (labels.length === 0) {\n            return this;\n        }\n        const defaultLabel = edge.getDefaultLabel();\n        const defaultPosition = this.normalizeLabelPosition(defaultLabel.position);\n        for (let i = 0, ii = labels.length; i < ii; i += 1) {\n            const label = labels[i];\n            const labelNode = this.labelCache[i];\n            if (!labelNode) {\n                continue;\n            }\n            const labelPosition = this.normalizeLabelPosition(label.position);\n            const pos = ObjectExt.merge({}, defaultPosition, labelPosition);\n            const matrix = this.getLabelTransformationMatrix(pos);\n            labelNode.setAttribute('transform', Dom.matrixToTransformString(matrix));\n        }\n        return this;\n    }\n    updateTerminalProperties(type) {\n        const edge = this.cell;\n        const graph = this.graph;\n        const terminal = edge[type];\n        const nodeId = terminal && terminal.cell;\n        const viewKey = `${type}View`;\n        // terminal is a point\n        if (!nodeId) {\n            this[viewKey] = null;\n            this.updateTerminalMagnet(type);\n            return true;\n        }\n        const terminalCell = graph.getCellById(nodeId);\n        if (!terminalCell) {\n            throw new Error(`Edge's ${type} node with id \"${nodeId}\" not exists`);\n        }\n        const endView = terminalCell.findView(graph);\n        if (!endView) {\n            return false;\n        }\n        this[viewKey] = endView;\n        this.updateTerminalMagnet(type);\n        return true;\n    }\n    updateTerminalMagnet(type) {\n        const propName = `${type}Magnet`;\n        const terminalView = this.getTerminalView(type);\n        if (terminalView) {\n            let magnet = terminalView.getMagnetFromEdgeTerminal(this.cell[type]);\n            if (magnet === terminalView.container) {\n                magnet = null;\n            }\n            this[propName] = magnet;\n        }\n        else {\n            this[propName] = null;\n        }\n    }\n    getLabelPositionAngle(idx) {\n        const label = this.cell.getLabelAt(idx);\n        if (label && label.position && typeof label.position === 'object') {\n            return label.position.angle || 0;\n        }\n        return 0;\n    }\n    getLabelPositionArgs(idx) {\n        const label = this.cell.getLabelAt(idx);\n        if (label && label.position && typeof label.position === 'object') {\n            return label.position.options;\n        }\n    }\n    getDefaultLabelPositionArgs() {\n        const defaultLabel = this.cell.getDefaultLabel();\n        if (defaultLabel &&\n            defaultLabel.position &&\n            typeof defaultLabel.position === 'object') {\n            return defaultLabel.position.options;\n        }\n    }\n    mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs) {\n        if (labelPositionArgs === null) {\n            return null;\n        }\n        if (labelPositionArgs === undefined) {\n            if (defaultLabelPositionArgs === null) {\n                return null;\n            }\n            return defaultLabelPositionArgs;\n        }\n        return ObjectExt.merge({}, defaultLabelPositionArgs, labelPositionArgs);\n    }\n    // #endregion\n    getConnection() {\n        return this.path != null ? this.path.clone() : null;\n    }\n    getConnectionPathData() {\n        if (this.path == null) {\n            return '';\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'data')) {\n            cache.data = this.path.serialize();\n        }\n        return cache.data || '';\n    }\n    getConnectionSubdivisions() {\n        if (this.path == null) {\n            return null;\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'segmentSubdivisions')) {\n            cache.segmentSubdivisions = this.path.getSegmentSubdivisions();\n        }\n        return cache.segmentSubdivisions;\n    }\n    getConnectionLength() {\n        if (this.path == null) {\n            return 0;\n        }\n        const cache = this.cache.pathCache;\n        if (!ObjectExt.has(cache, 'length')) {\n            cache.length = this.path.length({\n                segmentSubdivisions: this.getConnectionSubdivisions(),\n            });\n        }\n        return cache.length;\n    }\n    getPointAtLength(length) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.pointAtLength(length, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getPointAtRatio(ratio) {\n        if (this.path == null) {\n            return null;\n        }\n        if (NumberExt.isPercentage(ratio)) {\n            // eslint-disable-next-line\n            ratio = parseFloat(ratio) / 100;\n        }\n        return this.path.pointAt(ratio, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getTangentAtLength(length) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.tangentAtLength(length, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getTangentAtRatio(ratio) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.tangentAt(ratio, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPoint(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPoint(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPointLength(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPointLength(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getClosestPointRatio(point) {\n        if (this.path == null) {\n            return null;\n        }\n        return this.path.closestPointNormalizedLength(point, {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        });\n    }\n    getLabelPosition(x, y, p3, p4) {\n        const pos = { distance: 0 };\n        // normalize data from the two possible signatures\n        let angle = 0;\n        let options;\n        if (typeof p3 === 'number') {\n            angle = p3;\n            options = p4;\n        }\n        else {\n            options = p3;\n        }\n        if (options != null) {\n            pos.options = options;\n        }\n        // identify distance/offset settings\n        const isOffsetAbsolute = options && options.absoluteOffset;\n        const isDistanceRelative = !(options && options.absoluteDistance);\n        const isDistanceAbsoluteReverse = options && options.absoluteDistance && options.reverseDistance;\n        // find closest point t\n        const path = this.path;\n        const pathOptions = {\n            segmentSubdivisions: this.getConnectionSubdivisions(),\n        };\n        const labelPoint = new Point(x, y);\n        const t = path.closestPointT(labelPoint, pathOptions);\n        // distance\n        const totalLength = this.getConnectionLength() || 0;\n        let labelDistance = path.lengthAtT(t, pathOptions);\n        if (isDistanceRelative) {\n            labelDistance = totalLength > 0 ? labelDistance / totalLength : 0;\n        }\n        if (isDistanceAbsoluteReverse) {\n            // fix for end point (-0 => 1)\n            labelDistance = -1 * (totalLength - labelDistance) || 1;\n        }\n        pos.distance = labelDistance;\n        // offset\n        // use absolute offset if:\n        // - options.absoluteOffset is true,\n        // - options.absoluteOffset is not true but there is no tangent\n        let tangent;\n        if (!isOffsetAbsolute)\n            tangent = path.tangentAtT(t);\n        let labelOffset;\n        if (tangent) {\n            labelOffset = tangent.pointOffset(labelPoint);\n        }\n        else {\n            const closestPoint = path.pointAtT(t);\n            const labelOffsetDiff = labelPoint.diff(closestPoint);\n            labelOffset = { x: labelOffsetDiff.x, y: labelOffsetDiff.y };\n        }\n        pos.offset = labelOffset;\n        pos.angle = angle;\n        return pos;\n    }\n    normalizeLabelPosition(pos) {\n        if (typeof pos === 'number') {\n            return { distance: pos };\n        }\n        return pos;\n    }\n    getLabelTransformationMatrix(labelPosition) {\n        const pos = this.normalizeLabelPosition(labelPosition);\n        const options = pos.options || {};\n        const labelAngle = pos.angle || 0;\n        const labelDistance = pos.distance;\n        const isDistanceRelative = labelDistance > 0 && labelDistance <= 1;\n        let labelOffset = 0;\n        const offsetCoord = { x: 0, y: 0 };\n        const offset = pos.offset;\n        if (offset) {\n            if (typeof offset === 'number') {\n                labelOffset = offset;\n            }\n            else {\n                if (offset.x != null) {\n                    offsetCoord.x = offset.x;\n                }\n                if (offset.y != null) {\n                    offsetCoord.y = offset.y;\n                }\n            }\n        }\n        const isOffsetAbsolute = offsetCoord.x !== 0 || offsetCoord.y !== 0 || labelOffset === 0;\n        const isKeepGradient = options.keepGradient;\n        const isEnsureLegibility = options.ensureLegibility;\n        const path = this.path;\n        const pathOpt = { segmentSubdivisions: this.getConnectionSubdivisions() };\n        const distance = isDistanceRelative\n            ? labelDistance * this.getConnectionLength()\n            : labelDistance;\n        const tangent = path.tangentAtLength(distance, pathOpt);\n        let translation;\n        let angle = labelAngle;\n        if (tangent) {\n            if (isOffsetAbsolute) {\n                translation = tangent.start;\n                translation.translate(offsetCoord);\n            }\n            else {\n                const normal = tangent.clone();\n                normal.rotate(-90, tangent.start);\n                normal.setLength(labelOffset);\n                translation = normal.end;\n            }\n            if (isKeepGradient) {\n                angle = tangent.angle() + labelAngle;\n                if (isEnsureLegibility) {\n                    angle = Angle.normalize(((angle + 90) % 180) - 90);\n                }\n            }\n        }\n        else {\n            // fallback - the connection has zero length\n            translation = path.start;\n            if (isOffsetAbsolute) {\n                translation.translate(offsetCoord);\n            }\n        }\n        return Dom.createSVGMatrix()\n            .translate(translation.x, translation.y)\n            .rotate(angle);\n    }\n    getVertexIndex(x, y) {\n        const edge = this.cell;\n        const vertices = edge.getVertices();\n        const vertexLength = this.getClosestPointLength(new Point(x, y));\n        let index = 0;\n        if (vertexLength != null) {\n            for (const ii = vertices.length; index < ii; index += 1) {\n                const currentVertex = vertices[index];\n                const currentLength = this.getClosestPointLength(currentVertex);\n                if (currentLength != null && vertexLength < currentLength) {\n                    break;\n                }\n            }\n        }\n        return index;\n    }\n    getEventArgs(e, x, y) {\n        const view = this; // eslint-disable-line\n        const edge = view.cell;\n        const cell = edge;\n        if (x == null || y == null) {\n            return { e, view, edge, cell };\n        }\n        return { e, x, y, view, edge, cell };\n    }\n    notifyUnhandledMouseDown(e, x, y) {\n        this.notify('edge:unhandled:mousedown', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            edge: this.cell,\n        });\n    }\n    notifyMouseDown(e, x, y) {\n        super.onMouseDown(e, x, y);\n        this.notify('edge:mousedown', this.getEventArgs(e, x, y));\n    }\n    notifyMouseMove(e, x, y) {\n        super.onMouseMove(e, x, y);\n        this.notify('edge:mousemove', this.getEventArgs(e, x, y));\n    }\n    notifyMouseUp(e, x, y) {\n        super.onMouseUp(e, x, y);\n        this.notify('edge:mouseup', this.getEventArgs(e, x, y));\n    }\n    onClick(e, x, y) {\n        super.onClick(e, x, y);\n        this.notify('edge:click', this.getEventArgs(e, x, y));\n    }\n    onDblClick(e, x, y) {\n        super.onDblClick(e, x, y);\n        this.notify('edge:dblclick', this.getEventArgs(e, x, y));\n    }\n    onContextMenu(e, x, y) {\n        super.onContextMenu(e, x, y);\n        this.notify('edge:contextmenu', this.getEventArgs(e, x, y));\n    }\n    onMouseDown(e, x, y) {\n        this.notifyMouseDown(e, x, y);\n        this.startEdgeDragging(e, x, y);\n    }\n    onMouseMove(e, x, y) {\n        const data = this.getEventData(e);\n        switch (data.action) {\n            case 'drag-label': {\n                this.dragLabel(e, x, y);\n                break;\n            }\n            case 'drag-arrowhead': {\n                this.dragArrowhead(e, x, y);\n                break;\n            }\n            case 'drag-edge': {\n                this.dragEdge(e, x, y);\n                break;\n            }\n            default:\n                break;\n        }\n        this.notifyMouseMove(e, x, y);\n        return data;\n    }\n    onMouseUp(e, x, y) {\n        const data = this.getEventData(e);\n        switch (data.action) {\n            case 'drag-label': {\n                this.stopLabelDragging(e, x, y);\n                break;\n            }\n            case 'drag-arrowhead': {\n                this.stopArrowheadDragging(e, x, y);\n                break;\n            }\n            case 'drag-edge': {\n                this.stopEdgeDragging(e, x, y);\n                break;\n            }\n            default:\n                break;\n        }\n        this.notifyMouseUp(e, x, y);\n        this.checkMouseleave(e);\n        return data;\n    }\n    onMouseOver(e) {\n        super.onMouseOver(e);\n        this.notify('edge:mouseover', this.getEventArgs(e));\n    }\n    onMouseOut(e) {\n        super.onMouseOut(e);\n        this.notify('edge:mouseout', this.getEventArgs(e));\n    }\n    onMouseEnter(e) {\n        super.onMouseEnter(e);\n        this.notify('edge:mouseenter', this.getEventArgs(e));\n    }\n    onMouseLeave(e) {\n        super.onMouseLeave(e);\n        this.notify('edge:mouseleave', this.getEventArgs(e));\n    }\n    onMouseWheel(e, x, y, delta) {\n        super.onMouseWheel(e, x, y, delta);\n        this.notify('edge:mousewheel', Object.assign({ delta }, this.getEventArgs(e, x, y)));\n    }\n    onCustomEvent(e, name, x, y) {\n        // For default edge tool\n        const tool = Dom.findParentByClass(e.target, 'edge-tool', this.container);\n        if (tool) {\n            e.stopPropagation(); // no further action to be executed\n            if (this.can('useEdgeTools')) {\n                if (name === 'edge:remove') {\n                    this.cell.remove({ ui: true });\n                    return;\n                }\n                this.notify('edge:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n            }\n            this.notifyMouseDown(e, x, y);\n        }\n        else {\n            this.notify('edge:customevent', Object.assign({ name }, this.getEventArgs(e, x, y)));\n            super.onCustomEvent(e, name, x, y);\n        }\n    }\n    onLabelMouseDown(e, x, y) {\n        this.notifyMouseDown(e, x, y);\n        this.startLabelDragging(e, x, y);\n        const stopPropagation = this.getEventData(e).stopPropagation;\n        if (stopPropagation) {\n            e.stopPropagation();\n        }\n    }\n    // #region drag edge\n    startEdgeDragging(e, x, y) {\n        if (!this.can('edgeMovable')) {\n            this.notifyUnhandledMouseDown(e, x, y);\n            return;\n        }\n        this.setEventData(e, {\n            x,\n            y,\n            moving: false,\n            action: 'drag-edge',\n        });\n    }\n    dragEdge(e, x, y) {\n        const data = this.getEventData(e);\n        if (!data.moving) {\n            data.moving = true;\n            this.addClass('edge-moving');\n            this.notify('edge:move', {\n                e,\n                x,\n                y,\n                view: this,\n                cell: this.cell,\n                edge: this.cell,\n            });\n        }\n        this.cell.translate(x - data.x, y - data.y, { ui: true });\n        this.setEventData(e, { x, y });\n        this.notify('edge:moving', {\n            e,\n            x,\n            y,\n            view: this,\n            cell: this.cell,\n            edge: this.cell,\n        });\n    }\n    stopEdgeDragging(e, x, y) {\n        const data = this.getEventData(e);\n        if (data.moving) {\n            this.removeClass('edge-moving');\n            this.notify('edge:moved', {\n                e,\n                x,\n                y,\n                view: this,\n                cell: this.cell,\n                edge: this.cell,\n            });\n        }\n        data.moving = false;\n    }\n    // #endregion\n    // #region drag arrowhead\n    prepareArrowheadDragging(type, options) {\n        const magnet = this.getTerminalMagnet(type);\n        const data = {\n            action: 'drag-arrowhead',\n            x: options.x,\n            y: options.y,\n            isNewEdge: options.isNewEdge === true,\n            terminalType: type,\n            initialMagnet: magnet,\n            initialTerminal: ObjectExt.clone(this.cell[type]),\n            fallbackAction: options.fallbackAction || 'revert',\n            getValidateConnectionArgs: this.createValidateConnectionArgs(type),\n            options: options.options,\n        };\n        this.beforeArrowheadDragging(data);\n        return data;\n    }\n    createValidateConnectionArgs(type) {\n        const args = [];\n        args[4] = type;\n        args[5] = this;\n        let opposite;\n        let i = 0;\n        let j = 0;\n        if (type === 'source') {\n            i = 2;\n            opposite = 'target';\n        }\n        else {\n            j = 2;\n            opposite = 'source';\n        }\n        const terminal = this.cell[opposite];\n        const cellId = terminal.cell;\n        if (cellId) {\n            let magnet;\n            const view = (args[i] = this.graph.findViewByCell(cellId));\n            if (view) {\n                magnet = view.getMagnetFromEdgeTerminal(terminal);\n                if (magnet === view.container) {\n                    magnet = undefined;\n                }\n            }\n            args[i + 1] = magnet;\n        }\n        return (cellView, magnet) => {\n            args[j] = cellView;\n            args[j + 1] = cellView.container === magnet ? undefined : magnet;\n            return args;\n        };\n    }\n    beforeArrowheadDragging(data) {\n        data.zIndex = this.cell.zIndex;\n        this.cell.toFront();\n        const style = this.container.style;\n        data.pointerEvents = style.pointerEvents;\n        style.pointerEvents = 'none';\n        if (this.graph.options.connecting.highlight) {\n            this.highlightAvailableMagnets(data);\n        }\n    }\n    afterArrowheadDragging(data) {\n        if (data.zIndex != null) {\n            this.cell.setZIndex(data.zIndex, { ui: true });\n            data.zIndex = null;\n        }\n        const container = this.container;\n        container.style.pointerEvents = data.pointerEvents || '';\n        if (this.graph.options.connecting.highlight) {\n            this.unhighlightAvailableMagnets(data);\n        }\n    }\n    validateConnection(sourceView, sourceMagnet, targetView, targetMagnet, terminalType, edgeView, candidateTerminal) {\n        const options = this.graph.options.connecting;\n        const allowLoop = options.allowLoop;\n        const allowNode = options.allowNode;\n        const allowEdge = options.allowEdge;\n        const allowPort = options.allowPort;\n        const allowMulti = options.allowMulti;\n        const validate = options.validateConnection;\n        const edge = edgeView ? edgeView.cell : null;\n        const terminalView = terminalType === 'target' ? targetView : sourceView;\n        const terminalMagnet = terminalType === 'target' ? targetMagnet : sourceMagnet;\n        let valid = true;\n        const doValidate = (validate) => {\n            const sourcePort = terminalType === 'source'\n                ? candidateTerminal\n                    ? candidateTerminal.port\n                    : null\n                : edge\n                    ? edge.getSourcePortId()\n                    : null;\n            const targetPort = terminalType === 'target'\n                ? candidateTerminal\n                    ? candidateTerminal.port\n                    : null\n                : edge\n                    ? edge.getTargetPortId()\n                    : null;\n            return FunctionExt.call(validate, this.graph, {\n                edge,\n                edgeView,\n                sourceView,\n                targetView,\n                sourcePort,\n                targetPort,\n                sourceMagnet,\n                targetMagnet,\n                sourceCell: sourceView ? sourceView.cell : null,\n                targetCell: targetView ? targetView.cell : null,\n                type: terminalType,\n            });\n        };\n        if (allowLoop != null) {\n            if (typeof allowLoop === 'boolean') {\n                if (!allowLoop && sourceView === targetView) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowLoop);\n            }\n        }\n        if (valid && allowPort != null) {\n            if (typeof allowPort === 'boolean') {\n                if (!allowPort && terminalMagnet) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowPort);\n            }\n        }\n        if (valid && allowEdge != null) {\n            if (typeof allowEdge === 'boolean') {\n                if (!allowEdge && EdgeView.isEdgeView(terminalView)) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowEdge);\n            }\n        }\n        // When judging nodes, the influence of the ports should be excluded,\n        // because the ports and nodes have the same terminalView\n        if (valid && allowNode != null && terminalMagnet == null) {\n            if (typeof allowNode === 'boolean') {\n                if (!allowNode && NodeView.isNodeView(terminalView)) {\n                    valid = false;\n                }\n            }\n            else {\n                valid = doValidate(allowNode);\n            }\n        }\n        if (valid && allowMulti != null && edgeView) {\n            const edge = edgeView.cell;\n            const source = terminalType === 'source'\n                ? candidateTerminal\n                : edge.getSource();\n            const target = terminalType === 'target'\n                ? candidateTerminal\n                : edge.getTarget();\n            const terminalCell = candidateTerminal\n                ? this.graph.getCellById(candidateTerminal.cell)\n                : null;\n            if (source && target && source.cell && target.cell && terminalCell) {\n                if (typeof allowMulti === 'function') {\n                    valid = doValidate(allowMulti);\n                }\n                else {\n                    const connectedEdges = this.graph.model.getConnectedEdges(terminalCell, {\n                        outgoing: terminalType === 'source',\n                        incoming: terminalType === 'target',\n                    });\n                    if (connectedEdges.length) {\n                        if (allowMulti === 'withPort') {\n                            const exist = connectedEdges.some((link) => {\n                                const s = link.getSource();\n                                const t = link.getTarget();\n                                return (s &&\n                                    t &&\n                                    s.cell === source.cell &&\n                                    t.cell === target.cell &&\n                                    s.port != null &&\n                                    s.port === source.port &&\n                                    t.port != null &&\n                                    t.port === target.port);\n                            });\n                            if (exist) {\n                                valid = false;\n                            }\n                        }\n                        else if (!allowMulti) {\n                            const exist = connectedEdges.some((link) => {\n                                const s = link.getSource();\n                                const t = link.getTarget();\n                                return (s && t && s.cell === source.cell && t.cell === target.cell);\n                            });\n                            if (exist) {\n                                valid = false;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (valid && validate != null) {\n            valid = doValidate(validate);\n        }\n        return valid;\n    }\n    allowConnectToBlank(edge) {\n        const graph = this.graph;\n        const options = graph.options.connecting;\n        const allowBlank = options.allowBlank;\n        if (typeof allowBlank !== 'function') {\n            return !!allowBlank;\n        }\n        const edgeView = graph.findViewByCell(edge);\n        const sourceCell = edge.getSourceCell();\n        const targetCell = edge.getTargetCell();\n        const sourceView = graph.findViewByCell(sourceCell);\n        const targetView = graph.findViewByCell(targetCell);\n        return FunctionExt.call(allowBlank, graph, {\n            edge,\n            edgeView,\n            sourceCell,\n            targetCell,\n            sourceView,\n            targetView,\n            sourcePort: edge.getSourcePortId(),\n            targetPort: edge.getTargetPortId(),\n            sourceMagnet: edgeView.sourceMagnet,\n            targetMagnet: edgeView.targetMagnet,\n        });\n    }\n    validateEdge(edge, type, initialTerminal) {\n        const graph = this.graph;\n        if (!this.allowConnectToBlank(edge)) {\n            const sourceId = edge.getSourceCellId();\n            const targetId = edge.getTargetCellId();\n            if (!(sourceId && targetId)) {\n                return false;\n            }\n        }\n        const validate = graph.options.connecting.validateEdge;\n        if (validate) {\n            return FunctionExt.call(validate, graph, {\n                edge,\n                type,\n                previous: initialTerminal,\n            });\n        }\n        return true;\n    }\n    arrowheadDragging(target, x, y, data) {\n        data.x = x;\n        data.y = y;\n        // Checking views right under the pointer\n        if (data.currentTarget !== target) {\n            // Unhighlight the previous view under pointer if there was one.\n            if (data.currentMagnet && data.currentView) {\n                data.currentView.unhighlight(data.currentMagnet, {\n                    type: 'magnetAdsorbed',\n                });\n            }\n            data.currentView = this.graph.findViewByElem(target);\n            if (data.currentView) {\n                // If we found a view that is under the pointer, we need to find\n                // the closest magnet based on the real target element of the event.\n                data.currentMagnet = data.currentView.findMagnet(target);\n                if (data.currentMagnet &&\n                    this.validateConnection(...data.getValidateConnectionArgs(data.currentView, data.currentMagnet), data.currentView.getEdgeTerminal(data.currentMagnet, x, y, this.cell, data.terminalType))) {\n                    data.currentView.highlight(data.currentMagnet, {\n                        type: 'magnetAdsorbed',\n                    });\n                }\n                else {\n                    // This type of connection is not valid. Disregard this magnet.\n                    data.currentMagnet = null;\n                }\n            }\n            else {\n                // Make sure we'll unset previous magnet.\n                data.currentMagnet = null;\n            }\n        }\n        data.currentTarget = target;\n        this.cell.prop(data.terminalType, { x, y }, Object.assign(Object.assign({}, data.options), { ui: true }));\n    }\n    arrowheadDragged(data, x, y) {\n        const view = data.currentView;\n        const magnet = data.currentMagnet;\n        if (!magnet || !view) {\n            return;\n        }\n        view.unhighlight(magnet, { type: 'magnetAdsorbed' });\n        const type = data.terminalType;\n        const terminal = view.getEdgeTerminal(magnet, x, y, this.cell, type);\n        this.cell.setTerminal(type, terminal, { ui: true });\n    }\n    snapArrowhead(x, y, data) {\n        const graph = this.graph;\n        const { snap, allowEdge } = graph.options.connecting;\n        const radius = (typeof snap === 'object' && snap.radius) || 50;\n        const views = graph.renderer.findViewsInArea({\n            x: x - radius,\n            y: y - radius,\n            width: 2 * radius,\n            height: 2 * radius,\n        }, { nodeOnly: true });\n        if (allowEdge) {\n            const edgeViews = graph.renderer\n                .findEdgeViewsFromPoint({ x, y }, radius)\n                .filter((view) => {\n                return view !== this;\n            });\n            views.push(...edgeViews);\n        }\n        const prevView = data.closestView || null;\n        const prevMagnet = data.closestMagnet || null;\n        data.closestView = null;\n        data.closestMagnet = null;\n        let distance;\n        let minDistance = Number.MAX_SAFE_INTEGER;\n        const pos = new Point(x, y);\n        views.forEach((view) => {\n            if (view.container.getAttribute('magnet') !== 'false') {\n                if (view.isNodeView()) {\n                    distance = view.cell.getBBox().getCenter().distance(pos);\n                }\n                else if (view.isEdgeView()) {\n                    const point = view.getClosestPoint(pos);\n                    if (point) {\n                        distance = point.distance(pos);\n                    }\n                    else {\n                        distance = Number.MAX_SAFE_INTEGER;\n                    }\n                }\n                if (distance < radius && distance < minDistance) {\n                    if (prevMagnet === view.container ||\n                        this.validateConnection(...data.getValidateConnectionArgs(view, null), view.getEdgeTerminal(view.container, x, y, this.cell, data.terminalType))) {\n                        minDistance = distance;\n                        data.closestView = view;\n                        data.closestMagnet = view.container;\n                    }\n                }\n            }\n            view.container.querySelectorAll('[magnet]').forEach((magnet) => {\n                if (magnet.getAttribute('magnet') !== 'false') {\n                    const bbox = view.getBBoxOfElement(magnet);\n                    distance = pos.distance(bbox.getCenter());\n                    if (distance < radius && distance < minDistance) {\n                        if (prevMagnet === magnet ||\n                            this.validateConnection(...data.getValidateConnectionArgs(view, magnet), view.getEdgeTerminal(magnet, x, y, this.cell, data.terminalType))) {\n                            minDistance = distance;\n                            data.closestView = view;\n                            data.closestMagnet = magnet;\n                        }\n                    }\n                }\n            });\n        });\n        let terminal;\n        const type = data.terminalType;\n        const closestView = data.closestView;\n        const closestMagnet = data.closestMagnet;\n        const changed = prevMagnet !== closestMagnet;\n        if (prevView && changed) {\n            prevView.unhighlight(prevMagnet, {\n                type: 'magnetAdsorbed',\n            });\n        }\n        if (closestView) {\n            if (!changed) {\n                return;\n            }\n            closestView.highlight(closestMagnet, {\n                type: 'magnetAdsorbed',\n            });\n            terminal = closestView.getEdgeTerminal(closestMagnet, x, y, this.cell, type);\n        }\n        else {\n            terminal = { x, y };\n        }\n        this.cell.setTerminal(type, terminal, {}, Object.assign(Object.assign({}, data.options), { ui: true }));\n    }\n    snapArrowheadEnd(data) {\n        // Finish off link snapping.\n        // Everything except view unhighlighting was already done on pointermove.\n        const closestView = data.closestView;\n        const closestMagnet = data.closestMagnet;\n        if (closestView && closestMagnet) {\n            closestView.unhighlight(closestMagnet, {\n                type: 'magnetAdsorbed',\n            });\n            data.currentMagnet = closestView.findMagnet(closestMagnet);\n        }\n        data.closestView = null;\n        data.closestMagnet = null;\n    }\n    finishEmbedding(data) {\n        // Resets parent of the edge if embedding is enabled\n        if (this.graph.options.embedding.enabled && this.cell.updateParent()) {\n            // Make sure we don't reverse to the original 'z' index\n            data.zIndex = null;\n        }\n    }\n    fallbackConnection(data) {\n        switch (data.fallbackAction) {\n            case 'remove':\n                this.cell.remove({ ui: true });\n                break;\n            case 'revert':\n            default:\n                this.cell.prop(data.terminalType, data.initialTerminal, {\n                    ui: true,\n                });\n                break;\n        }\n    }\n    notifyConnectionEvent(data, e) {\n        const terminalType = data.terminalType;\n        const initialTerminal = data.initialTerminal;\n        const currentTerminal = this.cell[terminalType];\n        const changed = currentTerminal && !Edge.equalTerminals(initialTerminal, currentTerminal);\n        if (changed) {\n            const graph = this.graph;\n            const previous = initialTerminal;\n            const previousCell = previous.cell\n                ? graph.getCellById(previous.cell)\n                : null;\n            const previousPort = previous.port;\n            const previousView = previousCell\n                ? graph.findViewByCell(previousCell)\n                : null;\n            const previousPoint = previousCell || data.isNewEdge\n                ? null\n                : Point.create(initialTerminal).toJSON();\n            const current = currentTerminal;\n            const currentCell = current.cell ? graph.getCellById(current.cell) : null;\n            const currentPort = current.port;\n            const currentView = currentCell ? graph.findViewByCell(currentCell) : null;\n            const currentPoint = currentCell\n                ? null\n                : Point.create(currentTerminal).toJSON();\n            this.notify('edge:connected', {\n                e,\n                previousCell,\n                previousPort,\n                previousView,\n                previousPoint,\n                currentCell,\n                currentView,\n                currentPort,\n                currentPoint,\n                previousMagnet: data.initialMagnet,\n                currentMagnet: data.currentMagnet,\n                edge: this.cell,\n                view: this,\n                type: terminalType,\n                isNew: data.isNewEdge,\n            });\n        }\n    }\n    highlightAvailableMagnets(data) {\n        const graph = this.graph;\n        const cells = graph.model.getCells();\n        data.marked = {};\n        for (let i = 0, ii = cells.length; i < ii; i += 1) {\n            const view = graph.findViewByCell(cells[i]);\n            // Prevent highlighting new edge\n            // Close https://github.com/antvis/X6/issues/2853\n            if (!view || view.cell.id === this.cell.id) {\n                continue;\n            }\n            const magnets = Array.prototype.slice.call(view.container.querySelectorAll('[magnet]'));\n            if (view.container.getAttribute('magnet') !== 'false') {\n                magnets.push(view.container);\n            }\n            const availableMagnets = magnets.filter((magnet) => this.validateConnection(...data.getValidateConnectionArgs(view, magnet), view.getEdgeTerminal(magnet, data.x, data.y, this.cell, data.terminalType)));\n            if (availableMagnets.length > 0) {\n                // highlight all available magnets\n                for (let j = 0, jj = availableMagnets.length; j < jj; j += 1) {\n                    view.highlight(availableMagnets[j], { type: 'magnetAvailable' });\n                }\n                // highlight the entire view\n                view.highlight(null, { type: 'nodeAvailable' });\n                data.marked[view.cell.id] = availableMagnets;\n            }\n        }\n    }\n    unhighlightAvailableMagnets(data) {\n        const marked = data.marked || {};\n        Object.keys(marked).forEach((id) => {\n            const view = this.graph.findViewByCell(id);\n            if (view) {\n                const magnets = marked[id];\n                magnets.forEach((magnet) => {\n                    view.unhighlight(magnet, { type: 'magnetAvailable' });\n                });\n                view.unhighlight(null, { type: 'nodeAvailable' });\n            }\n        });\n        data.marked = null;\n    }\n    startArrowheadDragging(e, x, y) {\n        if (!this.can('arrowheadMovable')) {\n            this.notifyUnhandledMouseDown(e, x, y);\n            return;\n        }\n        const elem = e.target;\n        const type = elem.getAttribute('data-terminal');\n        const data = this.prepareArrowheadDragging(type, { x, y });\n        this.setEventData(e, data);\n    }\n    dragArrowhead(e, x, y) {\n        const data = this.getEventData(e);\n        if (this.graph.options.connecting.snap) {\n            this.snapArrowhead(x, y, data);\n        }\n        else {\n            this.arrowheadDragging(this.getEventTarget(e), x, y, data);\n        }\n    }\n    stopArrowheadDragging(e, x, y) {\n        const graph = this.graph;\n        const data = this.getEventData(e);\n        if (graph.options.connecting.snap) {\n            this.snapArrowheadEnd(data);\n        }\n        else {\n            this.arrowheadDragged(data, x, y);\n        }\n        const valid = this.validateEdge(this.cell, data.terminalType, data.initialTerminal);\n        if (valid) {\n            this.finishEmbedding(data);\n            this.notifyConnectionEvent(data, e);\n        }\n        else {\n            // If the changed edge is not allowed, revert to its previous state.\n            this.fallbackConnection(data);\n        }\n        this.afterArrowheadDragging(data);\n    }\n    // #endregion\n    // #region drag lable\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    startLabelDragging(e, x, y) {\n        if (this.can('edgeLabelMovable')) {\n            const target = e.currentTarget;\n            const index = parseInt(target.getAttribute('data-index'), 10);\n            const positionAngle = this.getLabelPositionAngle(index);\n            const labelPositionArgs = this.getLabelPositionArgs(index);\n            const defaultLabelPositionArgs = this.getDefaultLabelPositionArgs();\n            const positionArgs = this.mergeLabelPositionArgs(labelPositionArgs, defaultLabelPositionArgs);\n            this.setEventData(e, {\n                index,\n                positionAngle,\n                positionArgs,\n                stopPropagation: true,\n                action: 'drag-label',\n            });\n        }\n        else {\n            // If labels can't be dragged no default action is triggered.\n            this.setEventData(e, { stopPropagation: true });\n        }\n        this.graph.view.delegateDragEvents(e, this);\n    }\n    dragLabel(e, x, y) {\n        const data = this.getEventData(e);\n        const originLabel = this.cell.getLabelAt(data.index);\n        const label = ObjectExt.merge({}, originLabel, {\n            position: this.getLabelPosition(x, y, data.positionAngle, data.positionArgs),\n        });\n        this.cell.setLabelAt(data.index, label);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    stopLabelDragging(e, x, y) { }\n}\n(function (EdgeView) {\n    EdgeView.toStringTag = `X6.${EdgeView.name}`;\n    function isEdgeView(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof EdgeView) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        const view = instance;\n        if ((tag == null || tag === EdgeView.toStringTag) &&\n            typeof view.isNodeView === 'function' &&\n            typeof view.isEdgeView === 'function' &&\n            typeof view.confirmUpdate === 'function' &&\n            typeof view.update === 'function' &&\n            typeof view.getConnection === 'function') {\n            return true;\n        }\n        return false;\n    }\n    EdgeView.isEdgeView = isEdgeView;\n})(EdgeView || (EdgeView = {}));\nEdgeView.config({\n    isSvgElement: true,\n    priority: 1,\n    bootstrap: ['render', 'source', 'target'],\n    actions: {\n        view: ['render'],\n        markup: ['render'],\n        attrs: ['update'],\n        source: ['source', 'update'],\n        target: ['target', 'update'],\n        router: ['update'],\n        connector: ['update'],\n        labels: ['labels'],\n        defaultLabel: ['labels'],\n        tools: ['tools'],\n        vertices: ['vertices', 'update'],\n    },\n});\nEdgeView.registry.register('edge', EdgeView, true);\n//# sourceMappingURL=edge.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, FunctionExt } from '@antv/x6-common';\nimport { Cell } from '../model';\nimport { Config } from '../config';\nimport { View, Markup } from '../view';\nexport class GraphView extends View {\n    get options() {\n        return this.graph.options;\n    }\n    constructor(graph) {\n        super();\n        this.graph = graph;\n        const { selectors, fragment } = Markup.parseJSONMarkup(GraphView.markup);\n        this.background = selectors.background;\n        this.grid = selectors.grid;\n        this.svg = selectors.svg;\n        this.defs = selectors.defs;\n        this.viewport = selectors.viewport;\n        this.primer = selectors.primer;\n        this.stage = selectors.stage;\n        this.decorator = selectors.decorator;\n        this.overlay = selectors.overlay;\n        this.container = this.options.container;\n        this.restore = GraphView.snapshoot(this.container);\n        Dom.addClass(this.container, this.prefixClassName('graph'));\n        Dom.append(this.container, fragment);\n        this.delegateEvents();\n    }\n    delegateEvents() {\n        const ctor = this.constructor;\n        super.delegateEvents(ctor.events);\n        return this;\n    }\n    /**\n     * Guard the specified event. If the event is not interesting, it\n     * returns `true`, otherwise returns `false`.\n     */\n    guard(e, view) {\n        // handled as `contextmenu` type\n        if (e.type === 'mousedown' && e.button === 2) {\n            return true;\n        }\n        if (this.options.guard && this.options.guard(e, view)) {\n            return true;\n        }\n        if (e.data && e.data.guarded !== undefined) {\n            return e.data.guarded;\n        }\n        if (view && view.cell && Cell.isCell(view.cell)) {\n            return false;\n        }\n        if (this.svg === e.target ||\n            this.container === e.target ||\n            this.svg.contains(e.target)) {\n            return false;\n        }\n        return true;\n    }\n    findView(elem) {\n        return this.graph.findViewByElem(elem);\n    }\n    onDblClick(evt) {\n        if (this.options.preventDefaultDblClick) {\n            evt.preventDefault();\n        }\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onDblClick(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:dblclick', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    onClick(evt) {\n        if (this.getMouseMovedCount(evt) <= this.options.clickThreshold) {\n            const e = this.normalizeEvent(evt);\n            const view = this.findView(e.target);\n            if (this.guard(e, view)) {\n                return;\n            }\n            const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n            if (view) {\n                view.onClick(e, localPoint.x, localPoint.y);\n            }\n            else {\n                this.graph.trigger('blank:click', {\n                    e,\n                    x: localPoint.x,\n                    y: localPoint.y,\n                });\n            }\n        }\n    }\n    isPreventDefaultContextMenu(view) {\n        let preventDefaultContextMenu = this.options.preventDefaultContextMenu;\n        if (typeof preventDefaultContextMenu === 'function') {\n            preventDefaultContextMenu = FunctionExt.call(preventDefaultContextMenu, this.graph, { view });\n        }\n        return preventDefaultContextMenu;\n    }\n    onContextMenu(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.isPreventDefaultContextMenu(view)) {\n            evt.preventDefault();\n        }\n        if (this.guard(e, view)) {\n            return;\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onContextMenu(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:contextmenu', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    delegateDragEvents(e, view) {\n        if (e.data == null) {\n            e.data = {};\n        }\n        this.setEventData(e, {\n            currentView: view || null,\n            mouseMovedCount: 0,\n            startPosition: {\n                x: e.clientX,\n                y: e.clientY,\n            },\n        });\n        const ctor = this.constructor;\n        this.delegateDocumentEvents(ctor.documentEvents, e.data);\n        this.undelegateEvents();\n    }\n    getMouseMovedCount(e) {\n        const data = this.getEventData(e);\n        return data.mouseMovedCount || 0;\n    }\n    onMouseDown(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (this.options.preventDefaultMouseDown) {\n            evt.preventDefault();\n        }\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        if (view) {\n            view.onMouseDown(e, localPoint.x, localPoint.y);\n        }\n        else {\n            if (this.options.preventDefaultBlankAction &&\n                ['touchstart'].includes(e.type)) {\n                evt.preventDefault();\n            }\n            this.graph.trigger('blank:mousedown', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        this.delegateDragEvents(e, view);\n    }\n    onMouseMove(evt) {\n        const data = this.getEventData(evt);\n        const startPosition = data.startPosition;\n        if (startPosition &&\n            startPosition.x === evt.clientX &&\n            startPosition.y === evt.clientY) {\n            return;\n        }\n        if (data.mouseMovedCount == null) {\n            data.mouseMovedCount = 0;\n        }\n        data.mouseMovedCount += 1;\n        const mouseMovedCount = data.mouseMovedCount;\n        if (mouseMovedCount <= this.options.moveThreshold) {\n            return;\n        }\n        const e = this.normalizeEvent(evt);\n        const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n        const view = data.currentView;\n        if (view) {\n            view.onMouseMove(e, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:mousemove', {\n                e,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        this.setEventData(e, data);\n    }\n    onMouseUp(e) {\n        this.undelegateDocumentEvents();\n        const normalized = this.normalizeEvent(e);\n        const localPoint = this.graph.snapToGrid(normalized.clientX, normalized.clientY);\n        const data = this.getEventData(e);\n        const view = data.currentView;\n        if (view) {\n            view.onMouseUp(normalized, localPoint.x, localPoint.y);\n        }\n        else {\n            this.graph.trigger('blank:mouseup', {\n                e: normalized,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n        if (!e.isPropagationStopped()) {\n            const ev = new Dom.EventObject(e, {\n                type: 'click',\n                data: e.data,\n            });\n            this.onClick(ev);\n        }\n        e.stopImmediatePropagation();\n        this.delegateEvents();\n    }\n    onMouseOver(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (view) {\n            view.onMouseOver(e);\n        }\n        else {\n            // prevent border of paper from triggering this\n            if (this.container === e.target) {\n                return;\n            }\n            this.graph.trigger('blank:mouseover', { e });\n        }\n    }\n    onMouseOut(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        if (view) {\n            view.onMouseOut(e);\n        }\n        else {\n            if (this.container === e.target) {\n                return;\n            }\n            this.graph.trigger('blank:mouseout', { e });\n        }\n    }\n    onMouseEnter(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const relatedView = this.graph.findViewByElem(e.relatedTarget);\n        if (view) {\n            if (relatedView === view) {\n                // mouse moved from tool to view\n                return;\n            }\n            view.onMouseEnter(e);\n        }\n        else {\n            if (relatedView) {\n                return;\n            }\n            this.graph.trigger('graph:mouseenter', { e });\n        }\n    }\n    onMouseLeave(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const relatedView = this.graph.findViewByElem(e.relatedTarget);\n        if (view) {\n            if (relatedView === view) {\n                // mouse moved from view to tool\n                return;\n            }\n            view.onMouseLeave(e);\n        }\n        else {\n            if (relatedView) {\n                return;\n            }\n            this.graph.trigger('graph:mouseleave', { e });\n        }\n    }\n    onMouseWheel(evt) {\n        const e = this.normalizeEvent(evt);\n        const view = this.findView(e.target);\n        if (this.guard(e, view)) {\n            return;\n        }\n        const originalEvent = e.originalEvent;\n        const localPoint = this.graph.snapToGrid(originalEvent.clientX, originalEvent.clientY);\n        const delta = Math.max(-1, Math.min(1, originalEvent.wheelDelta || -originalEvent.detail));\n        if (view) {\n            view.onMouseWheel(e, localPoint.x, localPoint.y, delta);\n        }\n        else {\n            this.graph.trigger('blank:mousewheel', {\n                e,\n                delta,\n                x: localPoint.x,\n                y: localPoint.y,\n            });\n        }\n    }\n    onCustomEvent(evt) {\n        const elem = evt.currentTarget;\n        const event = elem.getAttribute('event') || elem.getAttribute('data-event');\n        if (event) {\n            const view = this.findView(elem);\n            if (view) {\n                const e = this.normalizeEvent(evt);\n                if (this.guard(e, view)) {\n                    return;\n                }\n                const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n                view.onCustomEvent(e, event, localPoint.x, localPoint.y);\n            }\n        }\n    }\n    handleMagnetEvent(evt, handler) {\n        const magnetElem = evt.currentTarget;\n        const magnetValue = magnetElem.getAttribute('magnet');\n        if (magnetValue && magnetValue.toLowerCase() !== 'false') {\n            const view = this.findView(magnetElem);\n            if (view) {\n                const e = this.normalizeEvent(evt);\n                if (this.guard(e, view)) {\n                    return;\n                }\n                const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n                FunctionExt.call(handler, this.graph, view, e, magnetElem, localPoint.x, localPoint.y);\n            }\n        }\n    }\n    onMagnetMouseDown(e) {\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetMouseDown(e, magnet, x, y);\n        });\n    }\n    onMagnetDblClick(e) {\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetDblClick(e, magnet, x, y);\n        });\n    }\n    onMagnetContextMenu(e) {\n        const view = this.findView(e.target);\n        if (this.isPreventDefaultContextMenu(view)) {\n            e.preventDefault();\n        }\n        this.handleMagnetEvent(e, (view, e, magnet, x, y) => {\n            view.onMagnetContextMenu(e, magnet, x, y);\n        });\n    }\n    onLabelMouseDown(evt) {\n        const labelNode = evt.currentTarget;\n        const view = this.findView(labelNode);\n        if (view) {\n            const e = this.normalizeEvent(evt);\n            if (this.guard(e, view)) {\n                return;\n            }\n            const localPoint = this.graph.snapToGrid(e.clientX, e.clientY);\n            view.onLabelMouseDown(e, localPoint.x, localPoint.y);\n        }\n    }\n    onImageDragStart() {\n        // This is the only way to prevent image dragging in Firefox that works.\n        // Setting -moz-user-select: none, draggable=\"false\" attribute or\n        // user-drag: none didn't help.\n        return false;\n    }\n    dispose() {\n        this.undelegateEvents();\n        this.undelegateDocumentEvents();\n        this.restore();\n        this.restore = () => { };\n    }\n}\n__decorate([\n    View.dispose()\n], GraphView.prototype, \"dispose\", null);\n(function (GraphView) {\n    const prefixCls = `${Config.prefixCls}-graph`;\n    GraphView.markup = [\n        {\n            ns: Dom.ns.xhtml,\n            tagName: 'div',\n            selector: 'background',\n            className: `${prefixCls}-background`,\n        },\n        {\n            ns: Dom.ns.xhtml,\n            tagName: 'div',\n            selector: 'grid',\n            className: `${prefixCls}-grid`,\n        },\n        {\n            ns: Dom.ns.svg,\n            tagName: 'svg',\n            selector: 'svg',\n            className: `${prefixCls}-svg`,\n            attrs: {\n                width: '100%',\n                height: '100%',\n                'xmlns:xlink': Dom.ns.xlink,\n            },\n            children: [\n                {\n                    tagName: 'defs',\n                    selector: 'defs',\n                },\n                {\n                    tagName: 'g',\n                    selector: 'viewport',\n                    className: `${prefixCls}-svg-viewport`,\n                    children: [\n                        {\n                            tagName: 'g',\n                            selector: 'primer',\n                            className: `${prefixCls}-svg-primer`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'stage',\n                            className: `${prefixCls}-svg-stage`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'decorator',\n                            className: `${prefixCls}-svg-decorator`,\n                        },\n                        {\n                            tagName: 'g',\n                            selector: 'overlay',\n                            className: `${prefixCls}-svg-overlay`,\n                        },\n                    ],\n                },\n            ],\n        },\n    ];\n    function snapshoot(elem) {\n        const cloned = elem.cloneNode();\n        elem.childNodes.forEach((child) => cloned.appendChild(child));\n        return () => {\n            // remove all children\n            Dom.empty(elem);\n            // remove all attributes\n            while (elem.attributes.length > 0) {\n                elem.removeAttribute(elem.attributes[0].name);\n            }\n            // restore attributes\n            for (let i = 0, l = cloned.attributes.length; i < l; i += 1) {\n                const attr = cloned.attributes[i];\n                elem.setAttribute(attr.name, attr.value);\n            }\n            // restore children\n            cloned.childNodes.forEach((child) => elem.appendChild(child));\n        };\n    }\n    GraphView.snapshoot = snapshoot;\n})(GraphView || (GraphView = {}));\n(function (GraphView) {\n    const prefixCls = Config.prefixCls;\n    GraphView.events = {\n        dblclick: 'onDblClick',\n        contextmenu: 'onContextMenu',\n        touchstart: 'onMouseDown',\n        mousedown: 'onMouseDown',\n        mouseover: 'onMouseOver',\n        mouseout: 'onMouseOut',\n        mouseenter: 'onMouseEnter',\n        mouseleave: 'onMouseLeave',\n        mousewheel: 'onMouseWheel',\n        DOMMouseScroll: 'onMouseWheel',\n        [`mouseenter  .${prefixCls}-cell`]: 'onMouseEnter',\n        [`mouseleave  .${prefixCls}-cell`]: 'onMouseLeave',\n        [`mouseenter  .${prefixCls}-cell-tools`]: 'onMouseEnter',\n        [`mouseleave  .${prefixCls}-cell-tools`]: 'onMouseLeave',\n        [`mousedown   .${prefixCls}-cell [event]`]: 'onCustomEvent',\n        [`touchstart  .${prefixCls}-cell [event]`]: 'onCustomEvent',\n        [`mousedown   .${prefixCls}-cell [data-event]`]: 'onCustomEvent',\n        [`touchstart  .${prefixCls}-cell [data-event]`]: 'onCustomEvent',\n        [`dblclick    .${prefixCls}-cell [magnet]`]: 'onMagnetDblClick',\n        [`contextmenu .${prefixCls}-cell [magnet]`]: 'onMagnetContextMenu',\n        [`mousedown   .${prefixCls}-cell [magnet]`]: 'onMagnetMouseDown',\n        [`touchstart  .${prefixCls}-cell [magnet]`]: 'onMagnetMouseDown',\n        [`dblclick    .${prefixCls}-cell [data-magnet]`]: 'onMagnetDblClick',\n        [`contextmenu .${prefixCls}-cell [data-magnet]`]: 'onMagnetContextMenu',\n        [`mousedown   .${prefixCls}-cell [data-magnet]`]: 'onMagnetMouseDown',\n        [`touchstart  .${prefixCls}-cell [data-magnet]`]: 'onMagnetMouseDown',\n        [`dragstart   .${prefixCls}-cell image`]: 'onImageDragStart',\n        [`mousedown   .${prefixCls}-edge .${prefixCls}-edge-label`]: 'onLabelMouseDown',\n        [`touchstart  .${prefixCls}-edge .${prefixCls}-edge-label`]: 'onLabelMouseDown',\n    };\n    GraphView.documentEvents = {\n        mousemove: 'onMouseMove',\n        touchmove: 'onMouseMove',\n        mouseup: 'onMouseUp',\n        touchend: 'onMouseUp',\n        touchcancel: 'onMouseUp',\n    };\n})(GraphView || (GraphView = {}));\n//# sourceMappingURL=view.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-graph {\n  position: relative;\n  overflow: hidden;\n  outline: none;\n  touch-action: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n`;\n//# sourceMappingURL=raw.js.map","import { Disposable } from '@antv/x6-common';\nexport class Base extends Disposable {\n    get options() {\n        return this.graph.options;\n    }\n    get model() {\n        return this.graph.model;\n    }\n    get view() {\n        return this.graph.view;\n    }\n    constructor(graph) {\n        super();\n        this.graph = graph;\n        this.init();\n    }\n    init() { }\n}\n//# sourceMappingURL=base.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { CssLoader } from '@antv/x6-common';\nimport { Config } from '../config';\nimport { content } from '../style/raw';\nimport { Base } from './base';\nexport class CSSManager extends Base {\n    init() {\n        if (Config.autoInsertCSS) {\n            CssLoader.ensure('core', content);\n        }\n    }\n    dispose() {\n        CssLoader.clean('core');\n    }\n}\n__decorate([\n    CSSManager.dispose()\n], CSSManager.prototype, \"dispose\", null);\n//# sourceMappingURL=css.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Config } from '../config';\nimport { Edge as StandardEdge } from '../shape';\nexport var Options;\n(function (Options) {\n    function get(options) {\n        const { grid, panning, mousewheel, embedding } = options, others = __rest(options\n        // size\n        // ----\n        , [\"grid\", \"panning\", \"mousewheel\", \"embedding\"]);\n        // size\n        // ----\n        const container = options.container;\n        if (container != null) {\n            if (others.width == null) {\n                others.width = container.clientWidth;\n            }\n            if (others.height == null) {\n                others.height = container.clientHeight;\n            }\n        }\n        else {\n            throw new Error(`Ensure the container of the graph is specified and valid`);\n        }\n        const result = ObjectExt.merge({}, Options.defaults, others);\n        // grid\n        // ----\n        const defaultGrid = { size: 10, visible: false };\n        if (typeof grid === 'number') {\n            result.grid = { size: grid, visible: false };\n        }\n        else if (typeof grid === 'boolean') {\n            result.grid = Object.assign(Object.assign({}, defaultGrid), { visible: grid });\n        }\n        else {\n            result.grid = Object.assign(Object.assign({}, defaultGrid), grid);\n        }\n        // booleas\n        // -------\n        const booleas = [\n            'panning',\n            'mousewheel',\n            'embedding',\n        ];\n        booleas.forEach((key) => {\n            const val = options[key];\n            if (typeof val === 'boolean') {\n                result[key].enabled = val;\n            }\n            else {\n                result[key] = Object.assign(Object.assign({}, result[key]), val);\n            }\n        });\n        return result;\n    }\n    Options.get = get;\n})(Options || (Options = {}));\n(function (Options) {\n    Options.defaults = {\n        x: 0,\n        y: 0,\n        scaling: {\n            min: 0.01,\n            max: 16,\n        },\n        grid: {\n            size: 10,\n            visible: false,\n        },\n        background: false,\n        panning: {\n            enabled: false,\n            eventTypes: ['leftMouseDown'],\n        },\n        mousewheel: {\n            enabled: false,\n            factor: 1.2,\n            zoomAtMousePosition: true,\n        },\n        highlighting: {\n            default: {\n                name: 'stroke',\n                args: {\n                    padding: 3,\n                },\n            },\n            nodeAvailable: {\n                name: 'className',\n                args: {\n                    className: Config.prefix('available-node'),\n                },\n            },\n            magnetAvailable: {\n                name: 'className',\n                args: {\n                    className: Config.prefix('available-magnet'),\n                },\n            },\n        },\n        connecting: {\n            snap: false,\n            allowLoop: true,\n            allowNode: true,\n            allowEdge: false,\n            allowPort: true,\n            allowBlank: true,\n            allowMulti: true,\n            highlight: false,\n            anchor: 'center',\n            edgeAnchor: 'ratio',\n            connectionPoint: 'boundary',\n            router: 'normal',\n            connector: 'normal',\n            validateConnection({ type, sourceView, targetView }) {\n                const view = type === 'target' ? targetView : sourceView;\n                return view != null;\n            },\n            createEdge() {\n                return new StandardEdge();\n            },\n        },\n        translating: {\n            restrict: false,\n        },\n        embedding: {\n            enabled: false,\n            findParent: 'bbox',\n            frontOnly: true,\n            validate: () => true,\n        },\n        moveThreshold: 0,\n        clickThreshold: 0,\n        magnetThreshold: 0,\n        preventDefaultDblClick: true,\n        preventDefaultMouseDown: false,\n        preventDefaultContextMenu: true,\n        preventDefaultBlankAction: true,\n        interacting: {\n            edgeLabelMovable: false,\n        },\n        async: true,\n        virtual: false,\n        guard: () => false,\n    };\n})(Options || (Options = {}));\n//# sourceMappingURL=options.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom, Vector } from '@antv/x6-common';\nimport * as Registry from '../registry';\nimport { Base } from './base';\nexport class GridManager extends Base {\n    get elem() {\n        return this.view.grid;\n    }\n    get grid() {\n        return this.options.grid;\n    }\n    init() {\n        this.startListening();\n        this.draw(this.grid);\n    }\n    startListening() {\n        this.graph.on('scale', this.update, this);\n        this.graph.on('translate', this.update, this);\n    }\n    stopListening() {\n        this.graph.off('scale', this.update, this);\n        this.graph.off('translate', this.update, this);\n    }\n    setVisible(visible) {\n        if (this.grid.visible !== visible) {\n            this.grid.visible = visible;\n            this.update();\n        }\n    }\n    getGridSize() {\n        return this.grid.size;\n    }\n    setGridSize(size) {\n        this.grid.size = Math.max(size, 1);\n        this.update();\n    }\n    show() {\n        this.setVisible(true);\n        this.update();\n    }\n    hide() {\n        this.setVisible(false);\n        this.update();\n    }\n    clear() {\n        this.elem.style.backgroundImage = '';\n    }\n    draw(options) {\n        this.clear();\n        this.instance = null;\n        Object.assign(this.grid, options);\n        this.patterns = this.resolveGrid(options);\n        this.update();\n    }\n    update(options = {}) {\n        const gridSize = this.grid.size;\n        if (gridSize <= 1 || !this.grid.visible) {\n            return this.clear();\n        }\n        const ctm = this.graph.matrix();\n        const grid = this.getInstance();\n        const items = Array.isArray(options) ? options : [options];\n        this.patterns.forEach((settings, index) => {\n            const id = `pattern_${index}`;\n            const sx = ctm.a || 1;\n            const sy = ctm.d || 1;\n            const { update, markup } = settings, others = __rest(settings, [\"update\", \"markup\"]);\n            const options = Object.assign(Object.assign(Object.assign({}, others), items[index]), { sx,\n                sy, ox: ctm.e || 0, oy: ctm.f || 0, width: gridSize * sx, height: gridSize * sy });\n            if (!grid.has(id)) {\n                grid.add(id, Vector.create('pattern', { id, patternUnits: 'userSpaceOnUse' }, Vector.createVectors(markup)).node);\n            }\n            const patternElem = grid.get(id);\n            if (typeof update === 'function') {\n                update(patternElem.childNodes[0], options);\n            }\n            let x = options.ox % options.width;\n            if (x < 0) {\n                x += options.width;\n            }\n            let y = options.oy % options.height;\n            if (y < 0) {\n                y += options.height;\n            }\n            Dom.attr(patternElem, {\n                x,\n                y,\n                width: options.width,\n                height: options.height,\n            });\n        });\n        const base64 = new XMLSerializer().serializeToString(grid.root);\n        const url = `url(data:image/svg+xml;base64,${btoa(base64)})`;\n        this.elem.style.backgroundImage = url;\n    }\n    getInstance() {\n        if (!this.instance) {\n            this.instance = new Registry.Grid();\n        }\n        return this.instance;\n    }\n    resolveGrid(options) {\n        if (!options) {\n            return [];\n        }\n        const type = options.type;\n        if (type == null) {\n            return [\n                Object.assign(Object.assign({}, Registry.Grid.presets.dot), options.args),\n            ];\n        }\n        const items = Registry.Grid.registry.get(type);\n        if (items) {\n            let args = options.args || [];\n            if (!Array.isArray(args)) {\n                args = [args];\n            }\n            return Array.isArray(items)\n                ? items.map((item, index) => (Object.assign(Object.assign({}, item), args[index])))\n                : [Object.assign(Object.assign({}, items), args[0])];\n        }\n        return Registry.Grid.registry.onNotFound(type);\n    }\n    dispose() {\n        this.stopListening();\n        this.clear();\n    }\n}\n__decorate([\n    Base.dispose()\n], GridManager.prototype, \"dispose\", null);\n//# sourceMappingURL=grid.js.map","import { Dom, NumberExt } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Base } from './base';\nimport { Util } from '../util';\nexport class TransformManager extends Base {\n    get container() {\n        return this.graph.view.container;\n    }\n    get viewport() {\n        return this.graph.view.viewport;\n    }\n    get stage() {\n        return this.graph.view.stage;\n    }\n    init() {\n        this.resize();\n    }\n    /**\n     * Returns the current transformation matrix of the graph.\n     */\n    getMatrix() {\n        const transform = this.viewport.getAttribute('transform');\n        if (transform !== this.viewportTransformString) {\n            // `getCTM`: top-left relative to the SVG element\n            // `getScreenCTM`: top-left relative to the document\n            this.viewportMatrix = this.viewport.getCTM();\n            this.viewportTransformString = transform;\n        }\n        // Clone the cached current transformation matrix.\n        // If no matrix previously stored the identity matrix is returned.\n        return Dom.createSVGMatrix(this.viewportMatrix);\n    }\n    /**\n     * Sets new transformation with the given `matrix`\n     */\n    setMatrix(matrix) {\n        const ctm = Dom.createSVGMatrix(matrix);\n        const transform = Dom.matrixToTransformString(ctm);\n        this.viewport.setAttribute('transform', transform);\n        this.viewportMatrix = ctm;\n        this.viewportTransformString = transform;\n    }\n    resize(width, height) {\n        let w = width === undefined ? this.options.width : width;\n        let h = height === undefined ? this.options.height : height;\n        this.options.width = w;\n        this.options.height = h;\n        if (typeof w === 'number') {\n            w = Math.round(w);\n        }\n        if (typeof h === 'number') {\n            h = Math.round(h);\n        }\n        this.container.style.width = w == null ? '' : `${w}px`;\n        this.container.style.height = h == null ? '' : `${h}px`;\n        const size = this.getComputedSize();\n        this.graph.trigger('resize', Object.assign({}, size));\n        return this;\n    }\n    getComputedSize() {\n        let w = this.options.width;\n        let h = this.options.height;\n        if (!NumberExt.isNumber(w)) {\n            w = this.container.clientWidth;\n        }\n        if (!NumberExt.isNumber(h)) {\n            h = this.container.clientHeight;\n        }\n        return { width: w, height: h };\n    }\n    getScale() {\n        return Dom.matrixToScale(this.getMatrix());\n    }\n    scale(sx, sy = sx, ox = 0, oy = 0) {\n        sx = this.clampScale(sx); // eslint-disable-line\n        sy = this.clampScale(sy); // eslint-disable-line\n        if (ox || oy) {\n            const ts = this.getTranslation();\n            const tx = ts.tx - ox * (sx - 1);\n            const ty = ts.ty - oy * (sy - 1);\n            if (tx !== ts.tx || ty !== ts.ty) {\n                this.translate(tx, ty);\n            }\n        }\n        const matrix = this.getMatrix();\n        matrix.a = sx;\n        matrix.d = sy;\n        this.setMatrix(matrix);\n        this.graph.trigger('scale', { sx, sy, ox, oy });\n        return this;\n    }\n    clampScale(scale) {\n        const range = this.graph.options.scaling;\n        return NumberExt.clamp(scale, range.min || 0.01, range.max || 16);\n    }\n    getZoom() {\n        return this.getScale().sx;\n    }\n    zoom(factor, options) {\n        options = options || {}; // eslint-disable-line\n        let sx = factor;\n        let sy = factor;\n        const scale = this.getScale();\n        const clientSize = this.getComputedSize();\n        let cx = clientSize.width / 2;\n        let cy = clientSize.height / 2;\n        if (!options.absolute) {\n            sx += scale.sx;\n            sy += scale.sy;\n        }\n        if (options.scaleGrid) {\n            sx = Math.round(sx / options.scaleGrid) * options.scaleGrid;\n            sy = Math.round(sy / options.scaleGrid) * options.scaleGrid;\n        }\n        if (options.maxScale) {\n            sx = Math.min(options.maxScale, sx);\n            sy = Math.min(options.maxScale, sy);\n        }\n        if (options.minScale) {\n            sx = Math.max(options.minScale, sx);\n            sy = Math.max(options.minScale, sy);\n        }\n        if (options.center) {\n            cx = options.center.x;\n            cy = options.center.y;\n        }\n        sx = this.clampScale(sx);\n        sy = this.clampScale(sy);\n        if (cx || cy) {\n            const ts = this.getTranslation();\n            const tx = cx - (cx - ts.tx) * (sx / scale.sx);\n            const ty = cy - (cy - ts.ty) * (sy / scale.sy);\n            if (tx !== ts.tx || ty !== ts.ty) {\n                this.translate(tx, ty);\n            }\n        }\n        this.scale(sx, sy);\n        return this;\n    }\n    getRotation() {\n        return Dom.matrixToRotation(this.getMatrix());\n    }\n    rotate(angle, cx, cy) {\n        if (cx == null || cy == null) {\n            const bbox = Util.getBBox(this.stage);\n            cx = bbox.width / 2; // eslint-disable-line\n            cy = bbox.height / 2; // eslint-disable-line\n        }\n        const ctm = this.getMatrix()\n            .translate(cx, cy)\n            .rotate(angle)\n            .translate(-cx, -cy);\n        this.setMatrix(ctm);\n        return this;\n    }\n    getTranslation() {\n        return Dom.matrixToTranslation(this.getMatrix());\n    }\n    translate(tx, ty) {\n        const matrix = this.getMatrix();\n        matrix.e = tx || 0;\n        matrix.f = ty || 0;\n        this.setMatrix(matrix);\n        const ts = this.getTranslation();\n        this.options.x = ts.tx;\n        this.options.y = ts.ty;\n        this.graph.trigger('translate', Object.assign({}, ts));\n        return this;\n    }\n    setOrigin(ox, oy) {\n        return this.translate(ox || 0, oy || 0);\n    }\n    fitToContent(gridWidth, gridHeight, padding, options) {\n        if (typeof gridWidth === 'object') {\n            const opts = gridWidth;\n            gridWidth = opts.gridWidth || 1; // eslint-disable-line\n            gridHeight = opts.gridHeight || 1; // eslint-disable-line\n            padding = opts.padding || 0; // eslint-disable-line\n            options = opts; // eslint-disable-line\n        }\n        else {\n            gridWidth = gridWidth || 1; // eslint-disable-line\n            gridHeight = gridHeight || 1; // eslint-disable-line\n            padding = padding || 0; // eslint-disable-line\n            if (options == null) {\n                options = {}; // eslint-disable-line\n            }\n        }\n        const paddings = NumberExt.normalizeSides(padding);\n        const border = options.border || 0;\n        const contentArea = options.contentArea\n            ? Rectangle.create(options.contentArea)\n            : this.getContentArea(options);\n        if (border > 0) {\n            contentArea.inflate(border);\n        }\n        const scale = this.getScale();\n        const translate = this.getTranslation();\n        const sx = scale.sx;\n        const sy = scale.sy;\n        contentArea.x *= sx;\n        contentArea.y *= sy;\n        contentArea.width *= sx;\n        contentArea.height *= sy;\n        let width = Math.max(Math.ceil((contentArea.width + contentArea.x) / gridWidth), 1) *\n            gridWidth;\n        let height = Math.max(Math.ceil((contentArea.height + contentArea.y) / gridHeight), 1) * gridHeight;\n        let tx = 0;\n        let ty = 0;\n        if ((options.allowNewOrigin === 'negative' && contentArea.x < 0) ||\n            (options.allowNewOrigin === 'positive' && contentArea.x >= 0) ||\n            options.allowNewOrigin === 'any') {\n            tx = Math.ceil(-contentArea.x / gridWidth) * gridWidth;\n            tx += paddings.left;\n            width += tx;\n        }\n        if ((options.allowNewOrigin === 'negative' && contentArea.y < 0) ||\n            (options.allowNewOrigin === 'positive' && contentArea.y >= 0) ||\n            options.allowNewOrigin === 'any') {\n            ty = Math.ceil(-contentArea.y / gridHeight) * gridHeight;\n            ty += paddings.top;\n            height += ty;\n        }\n        width += paddings.right;\n        height += paddings.bottom;\n        // Make sure the resulting width and height are greater than minimum.\n        width = Math.max(width, options.minWidth || 0);\n        height = Math.max(height, options.minHeight || 0);\n        // Make sure the resulting width and height are lesser than maximum.\n        width = Math.min(width, options.maxWidth || Number.MAX_SAFE_INTEGER);\n        height = Math.min(height, options.maxHeight || Number.MAX_SAFE_INTEGER);\n        const size = this.getComputedSize();\n        const sizeChanged = width !== size.width || height !== size.height;\n        const originChanged = tx !== translate.tx || ty !== translate.ty;\n        // Change the dimensions only if there is a size discrepency or an origin change\n        if (originChanged) {\n            this.translate(tx, ty);\n        }\n        if (sizeChanged) {\n            this.resize(width, height);\n        }\n        return new Rectangle(-tx / sx, -ty / sy, width / sx, height / sy);\n    }\n    scaleContentToFit(options = {}) {\n        this.scaleContentToFitImpl(options);\n    }\n    scaleContentToFitImpl(options = {}, translate = true) {\n        let contentBBox;\n        let contentLocalOrigin;\n        if (options.contentArea) {\n            const contentArea = options.contentArea;\n            contentBBox = this.graph.localToGraph(contentArea);\n            contentLocalOrigin = Point.create(contentArea);\n        }\n        else {\n            contentBBox = this.getContentBBox(options);\n            contentLocalOrigin = this.graph.graphToLocal(contentBBox);\n        }\n        if (!contentBBox.width || !contentBBox.height) {\n            return;\n        }\n        const padding = NumberExt.normalizeSides(options.padding);\n        const minScale = options.minScale || 0;\n        const maxScale = options.maxScale || Number.MAX_SAFE_INTEGER;\n        const minScaleX = options.minScaleX || minScale;\n        const maxScaleX = options.maxScaleX || maxScale;\n        const minScaleY = options.minScaleY || minScale;\n        const maxScaleY = options.maxScaleY || maxScale;\n        let fittingBox;\n        if (options.viewportArea) {\n            fittingBox = options.viewportArea;\n        }\n        else {\n            const computedSize = this.getComputedSize();\n            const currentTranslate = this.getTranslation();\n            fittingBox = {\n                x: currentTranslate.tx,\n                y: currentTranslate.ty,\n                width: computedSize.width,\n                height: computedSize.height,\n            };\n        }\n        fittingBox = Rectangle.create(fittingBox).moveAndExpand({\n            x: padding.left,\n            y: padding.top,\n            width: -padding.left - padding.right,\n            height: -padding.top - padding.bottom,\n        });\n        const currentScale = this.getScale();\n        let newSX = (fittingBox.width / contentBBox.width) * currentScale.sx;\n        let newSY = (fittingBox.height / contentBBox.height) * currentScale.sy;\n        if (options.preserveAspectRatio !== false) {\n            newSX = newSY = Math.min(newSX, newSY);\n        }\n        // snap scale to a grid\n        const gridSize = options.scaleGrid;\n        if (gridSize) {\n            newSX = gridSize * Math.floor(newSX / gridSize);\n            newSY = gridSize * Math.floor(newSY / gridSize);\n        }\n        // scale min/max boundaries\n        newSX = NumberExt.clamp(newSX, minScaleX, maxScaleX);\n        newSY = NumberExt.clamp(newSY, minScaleY, maxScaleY);\n        this.scale(newSX, newSY);\n        if (translate) {\n            const origin = this.options;\n            const newOX = fittingBox.x - contentLocalOrigin.x * newSX - origin.x;\n            const newOY = fittingBox.y - contentLocalOrigin.y * newSY - origin.y;\n            this.translate(newOX, newOY);\n        }\n    }\n    getContentArea(options = {}) {\n        // use geometry calc default\n        if (options.useCellGeometry !== false) {\n            return this.model.getAllCellsBBox() || new Rectangle();\n        }\n        return Util.getBBox(this.stage);\n    }\n    getContentBBox(options = {}) {\n        return this.graph.localToGraph(this.getContentArea(options));\n    }\n    getGraphArea() {\n        const rect = Rectangle.fromSize(this.getComputedSize());\n        return this.graph.graphToLocal(rect);\n    }\n    zoomToRect(rect, options = {}) {\n        const area = Rectangle.create(rect);\n        const graph = this.graph;\n        options.contentArea = area;\n        if (options.viewportArea == null) {\n            options.viewportArea = {\n                x: graph.options.x,\n                y: graph.options.y,\n                width: this.options.width,\n                height: this.options.height,\n            };\n        }\n        this.scaleContentToFitImpl(options, false);\n        const center = area.getCenter();\n        this.centerPoint(center.x, center.y);\n        return this;\n    }\n    zoomToFit(options = {}) {\n        return this.zoomToRect(this.getContentArea(options), options);\n    }\n    centerPoint(x, y) {\n        const clientSize = this.getComputedSize();\n        const scale = this.getScale();\n        const ts = this.getTranslation();\n        const cx = clientSize.width / 2;\n        const cy = clientSize.height / 2;\n        x = typeof x === 'number' ? x : cx; // eslint-disable-line\n        y = typeof y === 'number' ? y : cy; // eslint-disable-line\n        x = cx - x * scale.sx; // eslint-disable-line\n        y = cy - y * scale.sy; // eslint-disable-line\n        if (ts.tx !== x || ts.ty !== y) {\n            this.translate(x, y);\n        }\n    }\n    centerContent(options) {\n        const rect = this.graph.getContentArea(options);\n        const center = rect.getCenter();\n        this.centerPoint(center.x, center.y);\n    }\n    centerCell(cell) {\n        return this.positionCell(cell, 'center');\n    }\n    positionPoint(point, x, y) {\n        const clientSize = this.getComputedSize();\n        // eslint-disable-next-line\n        x = NumberExt.normalizePercentage(x, Math.max(0, clientSize.width));\n        if (x < 0) {\n            x = clientSize.width + x; // eslint-disable-line\n        }\n        // eslint-disable-next-line\n        y = NumberExt.normalizePercentage(y, Math.max(0, clientSize.height));\n        if (y < 0) {\n            y = clientSize.height + y; // eslint-disable-line\n        }\n        const ts = this.getTranslation();\n        const scale = this.getScale();\n        const dx = x - point.x * scale.sx;\n        const dy = y - point.y * scale.sy;\n        if (ts.tx !== dx || ts.ty !== dy) {\n            this.translate(dx, dy);\n        }\n    }\n    positionRect(rect, pos) {\n        const bbox = Rectangle.create(rect);\n        switch (pos) {\n            case 'center':\n                return this.positionPoint(bbox.getCenter(), '50%', '50%');\n            case 'top':\n                return this.positionPoint(bbox.getTopCenter(), '50%', 0);\n            case 'top-right':\n                return this.positionPoint(bbox.getTopRight(), '100%', 0);\n            case 'right':\n                return this.positionPoint(bbox.getRightMiddle(), '100%', '50%');\n            case 'bottom-right':\n                return this.positionPoint(bbox.getBottomRight(), '100%', '100%');\n            case 'bottom':\n                return this.positionPoint(bbox.getBottomCenter(), '50%', '100%');\n            case 'bottom-left':\n                return this.positionPoint(bbox.getBottomLeft(), 0, '100%');\n            case 'left':\n                return this.positionPoint(bbox.getLeftMiddle(), 0, '50%');\n            case 'top-left':\n                return this.positionPoint(bbox.getTopLeft(), 0, 0);\n            default:\n                return this;\n        }\n    }\n    positionCell(cell, pos) {\n        const bbox = cell.getBBox();\n        return this.positionRect(bbox, pos);\n    }\n    positionContent(pos, options) {\n        const rect = this.graph.getContentArea(options);\n        return this.positionRect(rect, pos);\n    }\n}\n//# sourceMappingURL=transform.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ObjectExt } from '@antv/x6-common';\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Background } from '../registry';\nimport { Base } from './base';\nexport class BackgroundManager extends Base {\n    get elem() {\n        return this.view.background;\n    }\n    init() {\n        this.startListening();\n        if (this.options.background) {\n            this.draw(this.options.background);\n        }\n    }\n    startListening() {\n        this.graph.on('scale', this.update, this);\n        this.graph.on('translate', this.update, this);\n    }\n    stopListening() {\n        this.graph.off('scale', this.update, this);\n        this.graph.off('translate', this.update, this);\n    }\n    updateBackgroundImage(options = {}) {\n        let backgroundSize = options.size || 'auto auto';\n        let backgroundPosition = options.position || 'center';\n        const scale = this.graph.transform.getScale();\n        const ts = this.graph.translate();\n        // backgroundPosition\n        if (typeof backgroundPosition === 'object') {\n            const x = ts.tx + scale.sx * (backgroundPosition.x || 0);\n            const y = ts.ty + scale.sy * (backgroundPosition.y || 0);\n            backgroundPosition = `${x}px ${y}px`;\n        }\n        // backgroundSize\n        if (typeof backgroundSize === 'object') {\n            backgroundSize = Rectangle.fromSize(backgroundSize).scale(scale.sx, scale.sy);\n            backgroundSize = `${backgroundSize.width}px ${backgroundSize.height}px`;\n        }\n        this.elem.style.backgroundSize = backgroundSize;\n        this.elem.style.backgroundPosition = backgroundPosition;\n    }\n    drawBackgroundImage(img, options = {}) {\n        if (!(img instanceof HTMLImageElement)) {\n            this.elem.style.backgroundImage = '';\n            return;\n        }\n        // draw multiple times to show the last image\n        const cache = this.optionsCache;\n        if (cache && cache.image !== options.image) {\n            return;\n        }\n        let uri;\n        const opacity = options.opacity;\n        const backgroundSize = options.size;\n        let backgroundRepeat = options.repeat || 'no-repeat';\n        const pattern = Background.registry.get(backgroundRepeat);\n        if (typeof pattern === 'function') {\n            const quality = options.quality || 1;\n            img.width *= quality;\n            img.height *= quality;\n            const canvas = pattern(img, options);\n            if (!(canvas instanceof HTMLCanvasElement)) {\n                throw new Error('Background pattern must return an HTML Canvas instance');\n            }\n            uri = canvas.toDataURL('image/png');\n            // `repeat` was changed in pattern function\n            if (options.repeat && backgroundRepeat !== options.repeat) {\n                backgroundRepeat = options.repeat;\n            }\n            else {\n                backgroundRepeat = 'repeat';\n            }\n            if (typeof backgroundSize === 'object') {\n                // recalculate the tile size if an object passed in\n                backgroundSize.width *= canvas.width / img.width;\n                backgroundSize.height *= canvas.height / img.height;\n            }\n            else if (backgroundSize === undefined) {\n                // calcule the tile size if no provided\n                options.size = {\n                    width: canvas.width / quality,\n                    height: canvas.height / quality,\n                };\n            }\n        }\n        else {\n            uri = img.src;\n            if (backgroundSize === undefined) {\n                options.size = {\n                    width: img.width,\n                    height: img.height,\n                };\n            }\n        }\n        if (cache != null &&\n            typeof options.size === 'object' &&\n            options.image === cache.image &&\n            options.repeat === cache.repeat &&\n            options.quality ===\n                cache.quality) {\n            cache.size = ObjectExt.clone(options.size);\n        }\n        const style = this.elem.style;\n        style.backgroundImage = `url(${uri})`;\n        style.backgroundRepeat = backgroundRepeat;\n        style.opacity = opacity == null || opacity >= 1 ? '' : `${opacity}`;\n        this.updateBackgroundImage(options);\n    }\n    updateBackgroundColor(color) {\n        this.elem.style.backgroundColor = color || '';\n    }\n    updateBackgroundOptions(options) {\n        this.graph.options.background = options;\n    }\n    update() {\n        if (this.optionsCache) {\n            this.updateBackgroundImage(this.optionsCache);\n        }\n    }\n    draw(options) {\n        const opts = options || {};\n        this.updateBackgroundOptions(options);\n        this.updateBackgroundColor(opts.color);\n        if (opts.image) {\n            this.optionsCache = ObjectExt.clone(opts);\n            const img = document.createElement('img');\n            img.onload = () => this.drawBackgroundImage(img, options);\n            img.setAttribute('crossorigin', 'anonymous');\n            img.src = opts.image;\n        }\n        else {\n            this.drawBackgroundImage(null);\n            this.optionsCache = null;\n        }\n    }\n    clear() {\n        this.draw();\n    }\n    dispose() {\n        this.clear();\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], BackgroundManager.prototype, \"dispose\", null);\n//# sourceMappingURL=background.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ModifierKey, Dom } from '@antv/x6-common';\nimport { Base } from './base';\nexport class PanningManager extends Base {\n    get widgetOptions() {\n        return this.options.panning;\n    }\n    get pannable() {\n        return this.widgetOptions && this.widgetOptions.enabled === true;\n    }\n    init() {\n        this.startListening();\n        this.updateClassName();\n    }\n    startListening() {\n        const eventTypes = this.widgetOptions.eventTypes;\n        if (!eventTypes) {\n            return;\n        }\n        if (eventTypes.includes('leftMouseDown')) {\n            this.graph.on('blank:mousedown', this.preparePanning, this);\n            this.graph.on('node:unhandled:mousedown', this.preparePanning, this);\n            this.graph.on('edge:unhandled:mousedown', this.preparePanning, this);\n        }\n        if (eventTypes.includes('rightMouseDown')) {\n            this.onRightMouseDown = this.onRightMouseDown.bind(this);\n            Dom.Event.on(this.graph.container, 'mousedown', this.onRightMouseDown);\n        }\n        if (eventTypes.includes('mouseWheel')) {\n            this.mousewheelHandle = new Dom.MouseWheelHandle(this.graph.container, this.onMouseWheel.bind(this), this.allowMouseWheel.bind(this));\n            this.mousewheelHandle.enable();\n        }\n    }\n    stopListening() {\n        const eventTypes = this.widgetOptions.eventTypes;\n        if (!eventTypes) {\n            return;\n        }\n        if (eventTypes.includes('leftMouseDown')) {\n            this.graph.off('blank:mousedown', this.preparePanning, this);\n            this.graph.off('node:unhandled:mousedown', this.preparePanning, this);\n            this.graph.off('edge:unhandled:mousedown', this.preparePanning, this);\n        }\n        if (eventTypes.includes('rightMouseDown')) {\n            Dom.Event.off(this.graph.container, 'mousedown', this.onRightMouseDown);\n        }\n        if (eventTypes.includes('mouseWheel')) {\n            if (this.mousewheelHandle) {\n                this.mousewheelHandle.disable();\n            }\n        }\n    }\n    preparePanning({ e }) {\n        const selection = this.graph.getPlugin('selection');\n        const allowRubberband = selection && selection.allowRubberband(e, true);\n        if (this.allowPanning(e, true) ||\n            (this.allowPanning(e) && !allowRubberband)) {\n            this.startPanning(e);\n        }\n    }\n    allowPanning(e, strict) {\n        return (this.pannable &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers, strict));\n    }\n    startPanning(evt) {\n        const e = this.view.normalizeEvent(evt);\n        this.clientX = e.clientX;\n        this.clientY = e.clientY;\n        this.panning = true;\n        this.updateClassName();\n        Dom.Event.on(document.body, {\n            'mousemove.panning touchmove.panning': this.pan.bind(this),\n            'mouseup.panning touchend.panning': this.stopPanning.bind(this),\n            'mouseleave.panning': this.stopPanning.bind(this),\n        });\n        Dom.Event.on(window, 'mouseup.panning', this.stopPanning.bind(this));\n    }\n    pan(evt) {\n        const e = this.view.normalizeEvent(evt);\n        const dx = e.clientX - this.clientX;\n        const dy = e.clientY - this.clientY;\n        this.clientX = e.clientX;\n        this.clientY = e.clientY;\n        this.graph.translateBy(dx, dy);\n    }\n    // eslint-disable-next-line\n    stopPanning(e) {\n        this.panning = false;\n        this.updateClassName();\n        Dom.Event.off(document.body, '.panning');\n        Dom.Event.off(window, '.panning');\n    }\n    updateClassName() {\n        const container = this.view.container;\n        const panning = this.view.prefixClassName('graph-panning');\n        const pannable = this.view.prefixClassName('graph-pannable');\n        if (this.pannable) {\n            if (this.panning) {\n                Dom.addClass(container, panning);\n                Dom.removeClass(container, pannable);\n            }\n            else {\n                Dom.removeClass(container, panning);\n                Dom.addClass(container, pannable);\n            }\n        }\n        else {\n            Dom.removeClass(container, panning);\n            Dom.removeClass(container, pannable);\n        }\n    }\n    onRightMouseDown(e) {\n        if (e.button === 2 && this.allowPanning(e, true)) {\n            this.startPanning(e);\n        }\n    }\n    allowMouseWheel(e) {\n        return this.pannable && !e.ctrlKey;\n    }\n    onMouseWheel(e, deltaX, deltaY) {\n        if (!e.ctrlKey) {\n            this.graph.translateBy(-deltaX, -deltaY);\n        }\n    }\n    autoPanning(x, y) {\n        const buffer = 10;\n        const graphArea = this.graph.getGraphArea();\n        let dx = 0;\n        let dy = 0;\n        if (x <= graphArea.left + buffer) {\n            dx = -buffer;\n        }\n        if (y <= graphArea.top + buffer) {\n            dy = -buffer;\n        }\n        if (x >= graphArea.right - buffer) {\n            dx = buffer;\n        }\n        if (y >= graphArea.bottom - buffer) {\n            dy = buffer;\n        }\n        if (dx !== 0 || dy !== 0) {\n            this.graph.translateBy(-dx, -dy);\n        }\n    }\n    enablePanning() {\n        if (!this.pannable) {\n            this.widgetOptions.enabled = true;\n            this.updateClassName();\n        }\n    }\n    disablePanning() {\n        if (this.pannable) {\n            this.widgetOptions.enabled = false;\n            this.updateClassName();\n        }\n    }\n    dispose() {\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], PanningManager.prototype, \"dispose\", null);\n//# sourceMappingURL=panning.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { ModifierKey, Dom, NumberExt, Disposable } from '@antv/x6-common';\nimport { Base } from './base';\nexport class MouseWheel extends Base {\n    constructor() {\n        super(...arguments);\n        this.cumulatedFactor = 1;\n    }\n    get widgetOptions() {\n        return this.options.mousewheel;\n    }\n    init() {\n        this.container = this.graph.container;\n        this.target = this.widgetOptions.global ? document : this.container;\n        this.mousewheelHandle = new Dom.MouseWheelHandle(this.target, this.onMouseWheel.bind(this), this.allowMouseWheel.bind(this));\n        if (this.widgetOptions.enabled) {\n            this.enable(true);\n        }\n    }\n    get disabled() {\n        return this.widgetOptions.enabled !== true;\n    }\n    enable(force) {\n        if (this.disabled || force) {\n            this.widgetOptions.enabled = true;\n            this.mousewheelHandle.enable();\n        }\n    }\n    disable() {\n        if (!this.disabled) {\n            this.widgetOptions.enabled = false;\n            this.mousewheelHandle.disable();\n        }\n    }\n    allowMouseWheel(e) {\n        const guard = this.widgetOptions.guard;\n        return ((guard == null || guard.call(e)) &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers));\n    }\n    onMouseWheel(e) {\n        const guard = this.widgetOptions.guard;\n        if ((guard == null || guard.call(e)) &&\n            ModifierKey.isMatch(e, this.widgetOptions.modifiers)) {\n            const factor = this.widgetOptions.factor || 1.2;\n            if (this.currentScale == null) {\n                this.startPos = { x: e.clientX, y: e.clientY };\n                this.currentScale = this.graph.transform.getScale().sx;\n            }\n            const delta = e.deltaY;\n            if (delta < 0) {\n                // zoomin\n                // ------\n                // Switches to 1% zoom steps below 15%\n                if (this.currentScale < 0.15) {\n                    this.cumulatedFactor = (this.currentScale + 0.01) / this.currentScale;\n                }\n                else {\n                    // Uses to 5% zoom steps for better grid rendering in\n                    // webkit and to avoid rounding errors for zoom steps\n                    this.cumulatedFactor =\n                        Math.round(this.currentScale * factor * 20) / 20 / this.currentScale;\n                    if (this.cumulatedFactor === 1) {\n                        this.cumulatedFactor = 1.05;\n                    }\n                }\n            }\n            else {\n                // zoomout\n                // -------\n                // Switches to 1% zoom steps below 15%\n                if (this.currentScale <= 0.15) {\n                    this.cumulatedFactor = (this.currentScale - 0.01) / this.currentScale;\n                }\n                else {\n                    // Uses to 5% zoom steps for better grid rendering in\n                    // webkit and to avoid rounding errors for zoom steps\n                    this.cumulatedFactor =\n                        Math.round(this.currentScale * (1 / factor) * 20) /\n                            20 /\n                            this.currentScale;\n                    if (this.cumulatedFactor === 1) {\n                        this.cumulatedFactor = 0.95;\n                    }\n                }\n            }\n            this.cumulatedFactor = Math.max(0.01, Math.min(this.currentScale * this.cumulatedFactor, 160) /\n                this.currentScale);\n            const currentScale = this.currentScale;\n            let targetScale = this.graph.transform.clampScale(currentScale * this.cumulatedFactor);\n            const minScale = this.widgetOptions.minScale || Number.MIN_SAFE_INTEGER;\n            const maxScale = this.widgetOptions.maxScale || Number.MAX_SAFE_INTEGER;\n            targetScale = NumberExt.clamp(targetScale, minScale, maxScale);\n            if (targetScale !== currentScale) {\n                if (this.widgetOptions.zoomAtMousePosition) {\n                    const hasScroller = !!this.graph.getPlugin('scroller');\n                    const origin = hasScroller\n                        ? this.graph.clientToLocal(this.startPos)\n                        : this.graph.clientToGraph(this.startPos);\n                    this.graph.zoom(targetScale, {\n                        absolute: true,\n                        center: origin.clone(),\n                    });\n                }\n                else {\n                    this.graph.zoom(targetScale, { absolute: true });\n                }\n            }\n            this.currentScale = null;\n            this.cumulatedFactor = 1;\n        }\n    }\n    dispose() {\n        this.disable();\n    }\n}\n__decorate([\n    Disposable.dispose()\n], MouseWheel.prototype, \"dispose\", null);\n//# sourceMappingURL=mousewheel.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { FunctionExt } from '@antv/x6-common';\nimport { Base } from './base';\nexport class VirtualRenderManager extends Base {\n    init() {\n        this.resetRenderArea = FunctionExt.throttle(this.resetRenderArea, 200, {\n            leading: true,\n        });\n        this.resetRenderArea();\n        this.startListening();\n    }\n    startListening() {\n        this.graph.on('translate', this.resetRenderArea, this);\n        this.graph.on('scale', this.resetRenderArea, this);\n        this.graph.on('resize', this.resetRenderArea, this);\n    }\n    stopListening() {\n        this.graph.off('translate', this.resetRenderArea, this);\n        this.graph.off('scale', this.resetRenderArea, this);\n        this.graph.off('resize', this.resetRenderArea, this);\n    }\n    enableVirtualRender() {\n        this.options.virtual = true;\n        this.resetRenderArea();\n    }\n    disableVirtualRender() {\n        this.options.virtual = false;\n        this.graph.renderer.setRenderArea(undefined);\n    }\n    resetRenderArea() {\n        if (this.options.virtual) {\n            const renderArea = this.graph.getGraphArea();\n            this.graph.renderer.setRenderArea(renderArea);\n        }\n    }\n    dispose() {\n        this.stopListening();\n    }\n}\n__decorate([\n    Base.dispose()\n], VirtualRenderManager.prototype, \"dispose\", null);\n//# sourceMappingURL=virtual-render.js.map","export class JobQueue {\n    constructor() {\n        this.isFlushing = false;\n        this.isFlushPending = false;\n        this.scheduleId = 0;\n        this.queue = [];\n        this.frameInterval = 33;\n        this.initialTime = Date.now();\n    }\n    queueJob(job) {\n        if (job.priority & JOB_PRIORITY.PRIOR) {\n            job.cb();\n        }\n        else {\n            const index = this.findInsertionIndex(job);\n            if (index >= 0) {\n                this.queue.splice(index, 0, job);\n            }\n        }\n    }\n    queueFlush() {\n        if (!this.isFlushing && !this.isFlushPending) {\n            this.isFlushPending = true;\n            this.scheduleJob();\n        }\n    }\n    queueFlushSync() {\n        if (!this.isFlushing && !this.isFlushPending) {\n            this.isFlushPending = true;\n            this.flushJobsSync();\n        }\n    }\n    clearJobs() {\n        this.queue.length = 0;\n        this.isFlushing = false;\n        this.isFlushPending = false;\n        this.cancelScheduleJob();\n    }\n    flushJobs() {\n        this.isFlushPending = false;\n        this.isFlushing = true;\n        const startTime = this.getCurrentTime();\n        let job;\n        while ((job = this.queue.shift())) {\n            job.cb();\n            if (this.getCurrentTime() - startTime >= this.frameInterval) {\n                break;\n            }\n        }\n        this.isFlushing = false;\n        if (this.queue.length) {\n            this.queueFlush();\n        }\n    }\n    flushJobsSync() {\n        this.isFlushPending = false;\n        this.isFlushing = true;\n        let job;\n        while ((job = this.queue.shift())) {\n            try {\n                job.cb();\n            }\n            catch (error) {\n                // eslint-disable-next-line\n                console.log(error);\n            }\n        }\n        this.isFlushing = false;\n    }\n    findInsertionIndex(job) {\n        let left = 0;\n        let ins = this.queue.length;\n        let right = ins - 1;\n        const priority = job.priority;\n        while (left <= right) {\n            const mid = ((right - left) >> 1) + left;\n            if (priority <= this.queue[mid].priority) {\n                left = mid + 1;\n            }\n            else {\n                ins = mid;\n                right = mid - 1;\n            }\n        }\n        return ins;\n    }\n    scheduleJob() {\n        if ('requestIdleCallback' in window) {\n            if (this.scheduleId) {\n                this.cancelScheduleJob();\n            }\n            this.scheduleId = window.requestIdleCallback(this.flushJobs.bind(this), {\n                timeout: 100,\n            });\n        }\n        else {\n            if (this.scheduleId) {\n                this.cancelScheduleJob();\n            }\n            this.scheduleId = window.setTimeout(this.flushJobs.bind(this));\n        }\n    }\n    cancelScheduleJob() {\n        if ('cancelIdleCallback' in window) {\n            if (this.scheduleId) {\n                window.cancelIdleCallback(this.scheduleId);\n            }\n            this.scheduleId = 0;\n        }\n        else {\n            if (this.scheduleId) {\n                clearTimeout(this.scheduleId);\n            }\n            this.scheduleId = 0;\n        }\n    }\n    getCurrentTime() {\n        const hasPerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';\n        if (hasPerformanceNow) {\n            return performance.now();\n        }\n        return Date.now() - this.initialTime;\n    }\n}\nexport var JOB_PRIORITY;\n(function (JOB_PRIORITY) {\n    JOB_PRIORITY[JOB_PRIORITY[\"Update\"] = 2] = \"Update\";\n    JOB_PRIORITY[JOB_PRIORITY[\"RenderEdge\"] = 4] = \"RenderEdge\";\n    JOB_PRIORITY[JOB_PRIORITY[\"RenderNode\"] = 8] = \"RenderNode\";\n    JOB_PRIORITY[JOB_PRIORITY[\"PRIOR\"] = 1048576] = \"PRIOR\";\n})(JOB_PRIORITY || (JOB_PRIORITY = {}));\n// function findInsertionIndex(job: Job) {\n//   let start = 0\n//   for (let i = 0, len = queue.length; i < len; i += 1) {\n//     const j = queue[i]\n//     if (j.id === job.id) {\n//       console.log('xx', j.bit, job.bit)\n//     }\n//     if (j.id === job.id && (job.bit ^ (job.bit & j.bit)) === 0) {\n//       return -1\n//     }\n//     if (j.priority <= job.priority) {\n//       start += 1\n//     }\n//   }\n//   return start\n// }\n//# sourceMappingURL=queueJob.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom, Disposable, FunctionExt } from '@antv/x6-common';\nimport { CellView, NodeView, EdgeView } from '../view';\nimport { JobQueue, JOB_PRIORITY } from './queueJob';\nexport class Scheduler extends Disposable {\n    get model() {\n        return this.graph.model;\n    }\n    get container() {\n        return this.graph.view.stage;\n    }\n    constructor(graph) {\n        super();\n        this.views = {};\n        this.willRemoveViews = {};\n        this.queue = new JobQueue();\n        this.graph = graph;\n        this.init();\n    }\n    init() {\n        this.startListening();\n        this.renderViews(this.model.getCells());\n    }\n    startListening() {\n        this.model.on('reseted', this.onModelReseted, this);\n        this.model.on('cell:added', this.onCellAdded, this);\n        this.model.on('cell:removed', this.onCellRemoved, this);\n        this.model.on('cell:change:zIndex', this.onCellZIndexChanged, this);\n        this.model.on('cell:change:visible', this.onCellVisibleChanged, this);\n    }\n    stopListening() {\n        this.model.off('reseted', this.onModelReseted, this);\n        this.model.off('cell:added', this.onCellAdded, this);\n        this.model.off('cell:removed', this.onCellRemoved, this);\n        this.model.off('cell:change:zIndex', this.onCellZIndexChanged, this);\n        this.model.off('cell:change:visible', this.onCellVisibleChanged, this);\n    }\n    onModelReseted({ options }) {\n        this.queue.clearJobs();\n        this.removeZPivots();\n        this.resetViews();\n        this.renderViews(this.model.getCells(), options);\n    }\n    onCellAdded({ cell, options }) {\n        this.renderViews([cell], options);\n    }\n    onCellRemoved({ cell }) {\n        this.removeViews([cell]);\n    }\n    onCellZIndexChanged({ cell, options, }) {\n        const viewItem = this.views[cell.id];\n        if (viewItem) {\n            this.requestViewUpdate(viewItem.view, Scheduler.FLAG_INSERT, options, JOB_PRIORITY.Update, true);\n        }\n    }\n    onCellVisibleChanged({ cell, current, }) {\n        this.toggleVisible(cell, !!current);\n    }\n    requestViewUpdate(view, flag, options = {}, priority = JOB_PRIORITY.Update, flush = true) {\n        const id = view.cell.id;\n        const viewItem = this.views[id];\n        if (!viewItem) {\n            return;\n        }\n        viewItem.flag = flag;\n        viewItem.options = options;\n        const priorAction = view.hasAction(flag, ['translate', 'resize', 'rotate']);\n        if (view.isNodeView() && priorAction) {\n            priority = JOB_PRIORITY.PRIOR; // eslint-disable-line\n            flush = false; // eslint-disable-line\n        }\n        this.queue.queueJob({\n            id,\n            priority,\n            cb: () => {\n                this.renderViewInArea(view, flag, options);\n            },\n        });\n        const effectedEdges = this.getEffectedEdges(view);\n        effectedEdges.forEach((edge) => {\n            this.requestViewUpdate(edge.view, edge.flag, options, priority, false);\n        });\n        if (flush) {\n            this.flush();\n        }\n    }\n    setRenderArea(area) {\n        this.renderArea = area;\n        this.flushWaitingViews();\n    }\n    isViewMounted(view) {\n        if (view == null) {\n            return false;\n        }\n        const viewItem = this.views[view.cell.id];\n        if (!viewItem) {\n            return false;\n        }\n        return viewItem.state === Scheduler.ViewState.MOUNTED;\n    }\n    renderViews(cells, options = {}) {\n        cells.sort((c1, c2) => {\n            if (c1.isNode() && c2.isEdge()) {\n                return -1;\n            }\n            return 0;\n        });\n        cells.forEach((cell) => {\n            const id = cell.id;\n            const views = this.views;\n            let flag = 0;\n            let viewItem = views[id];\n            if (viewItem) {\n                flag = Scheduler.FLAG_INSERT;\n            }\n            else {\n                const cellView = this.createCellView(cell);\n                if (cellView) {\n                    cellView.graph = this.graph;\n                    flag = Scheduler.FLAG_INSERT | cellView.getBootstrapFlag();\n                    viewItem = {\n                        view: cellView,\n                        flag,\n                        options,\n                        state: Scheduler.ViewState.CREATED,\n                    };\n                    this.views[id] = viewItem;\n                }\n            }\n            if (viewItem) {\n                this.requestViewUpdate(viewItem.view, flag, options, this.getRenderPriority(viewItem.view), false);\n            }\n        });\n        this.flush();\n    }\n    renderViewInArea(view, flag, options = {}) {\n        const cell = view.cell;\n        const id = cell.id;\n        const viewItem = this.views[id];\n        if (!viewItem) {\n            return;\n        }\n        let result = 0;\n        if (this.isUpdatable(view)) {\n            result = this.updateView(view, flag, options);\n            viewItem.flag = result;\n        }\n        else {\n            if (viewItem.state === Scheduler.ViewState.MOUNTED) {\n                result = this.updateView(view, flag, options);\n                viewItem.flag = result;\n            }\n            else {\n                viewItem.state = Scheduler.ViewState.WAITING;\n            }\n        }\n        if (result) {\n            if (cell.isEdge() &&\n                (result & view.getFlag(['source', 'target'])) === 0) {\n                this.queue.queueJob({\n                    id,\n                    priority: JOB_PRIORITY.RenderEdge,\n                    cb: () => {\n                        this.updateView(view, flag, options);\n                    },\n                });\n            }\n        }\n    }\n    removeViews(cells) {\n        cells.forEach((cell) => {\n            const id = cell.id;\n            const viewItem = this.views[id];\n            if (viewItem) {\n                this.willRemoveViews[id] = viewItem;\n                delete this.views[id];\n                this.queue.queueJob({\n                    id,\n                    priority: this.getRenderPriority(viewItem.view),\n                    cb: () => {\n                        this.removeView(viewItem.view);\n                    },\n                });\n            }\n        });\n        this.flush();\n    }\n    flush() {\n        this.graph.options.async\n            ? this.queue.queueFlush()\n            : this.queue.queueFlushSync();\n    }\n    flushWaitingViews() {\n        Object.values(this.views).forEach((viewItem) => {\n            if (viewItem && viewItem.state === Scheduler.ViewState.WAITING) {\n                const { view, flag, options } = viewItem;\n                this.requestViewUpdate(view, flag, options, this.getRenderPriority(view), false);\n            }\n        });\n        this.flush();\n    }\n    updateView(view, flag, options = {}) {\n        if (view == null) {\n            return 0;\n        }\n        if (CellView.isCellView(view)) {\n            if (flag & Scheduler.FLAG_REMOVE) {\n                this.removeView(view.cell);\n                return 0;\n            }\n            if (flag & Scheduler.FLAG_INSERT) {\n                this.insertView(view);\n                flag ^= Scheduler.FLAG_INSERT; // eslint-disable-line\n            }\n        }\n        if (!flag) {\n            return 0;\n        }\n        return view.confirmUpdate(flag, options);\n    }\n    insertView(view) {\n        const viewItem = this.views[view.cell.id];\n        if (viewItem) {\n            const zIndex = view.cell.getZIndex();\n            const pivot = this.addZPivot(zIndex);\n            this.container.insertBefore(view.container, pivot);\n            if (!view.cell.isVisible()) {\n                this.toggleVisible(view.cell, false);\n            }\n            viewItem.state = Scheduler.ViewState.MOUNTED;\n            this.graph.trigger('view:mounted', { view });\n        }\n    }\n    resetViews() {\n        this.willRemoveViews = Object.assign(Object.assign({}, this.views), this.willRemoveViews);\n        Object.values(this.willRemoveViews).forEach((viewItem) => {\n            if (viewItem) {\n                this.removeView(viewItem.view);\n            }\n        });\n        this.views = {};\n        this.willRemoveViews = {};\n    }\n    removeView(view) {\n        const cell = view.cell;\n        const viewItem = this.willRemoveViews[cell.id];\n        if (viewItem && view) {\n            viewItem.view.remove();\n            delete this.willRemoveViews[cell.id];\n            this.graph.trigger('view:unmounted', { view });\n        }\n    }\n    toggleVisible(cell, visible) {\n        const edges = this.model.getConnectedEdges(cell);\n        for (let i = 0, len = edges.length; i < len; i += 1) {\n            const edge = edges[i];\n            if (visible) {\n                const source = edge.getSourceCell();\n                const target = edge.getTargetCell();\n                if ((source && !source.isVisible()) ||\n                    (target && !target.isVisible())) {\n                    continue;\n                }\n                this.toggleVisible(edge, true);\n            }\n            else {\n                this.toggleVisible(edge, false);\n            }\n        }\n        const viewItem = this.views[cell.id];\n        if (viewItem) {\n            Dom.css(viewItem.view.container, {\n                display: visible ? 'unset' : 'none',\n            });\n        }\n    }\n    addZPivot(zIndex = 0) {\n        if (this.zPivots == null) {\n            this.zPivots = {};\n        }\n        const pivots = this.zPivots;\n        let pivot = pivots[zIndex];\n        if (pivot) {\n            return pivot;\n        }\n        pivot = pivots[zIndex] = document.createComment(`z-index:${zIndex + 1}`);\n        let neighborZ = -Infinity;\n        // eslint-disable-next-line\n        for (const key in pivots) {\n            const currentZ = +key;\n            if (currentZ < zIndex && currentZ > neighborZ) {\n                neighborZ = currentZ;\n                if (neighborZ === zIndex - 1) {\n                    continue;\n                }\n            }\n        }\n        const layer = this.container;\n        if (neighborZ !== -Infinity) {\n            const neighborPivot = pivots[neighborZ];\n            layer.insertBefore(pivot, neighborPivot.nextSibling);\n        }\n        else {\n            layer.insertBefore(pivot, layer.firstChild);\n        }\n        return pivot;\n    }\n    removeZPivots() {\n        if (this.zPivots) {\n            Object.values(this.zPivots).forEach((elem) => {\n                if (elem && elem.parentNode) {\n                    elem.parentNode.removeChild(elem);\n                }\n            });\n        }\n        this.zPivots = {};\n    }\n    createCellView(cell) {\n        const options = { graph: this.graph };\n        const createViewHook = this.graph.options.createCellView;\n        if (createViewHook) {\n            const ret = FunctionExt.call(createViewHook, this.graph, cell);\n            if (ret) {\n                return new ret(cell, options); // eslint-disable-line new-cap\n            }\n            if (ret === null) {\n                // null means not render\n                return null;\n            }\n        }\n        const view = cell.view;\n        if (view != null && typeof view === 'string') {\n            const def = CellView.registry.get(view);\n            if (def) {\n                return new def(cell, options); // eslint-disable-line new-cap\n            }\n            return CellView.registry.onNotFound(view);\n        }\n        if (cell.isNode()) {\n            return new NodeView(cell, options);\n        }\n        if (cell.isEdge()) {\n            return new EdgeView(cell, options);\n        }\n        return null;\n    }\n    getEffectedEdges(view) {\n        const effectedEdges = [];\n        const cell = view.cell;\n        const edges = this.model.getConnectedEdges(cell);\n        for (let i = 0, n = edges.length; i < n; i += 1) {\n            const edge = edges[i];\n            const viewItem = this.views[edge.id];\n            if (!viewItem) {\n                continue;\n            }\n            const edgeView = viewItem.view;\n            if (!this.isViewMounted(edgeView)) {\n                continue;\n            }\n            const flagLabels = ['update'];\n            if (edge.getTargetCell() === cell) {\n                flagLabels.push('target');\n            }\n            if (edge.getSourceCell() === cell) {\n                flagLabels.push('source');\n            }\n            effectedEdges.push({\n                id: edge.id,\n                view: edgeView,\n                flag: edgeView.getFlag(flagLabels),\n            });\n        }\n        return effectedEdges;\n    }\n    isUpdatable(view) {\n        if (view.isNodeView()) {\n            if (this.renderArea) {\n                return this.renderArea.isIntersectWithRect(view.cell.getBBox());\n            }\n            return true;\n        }\n        if (view.isEdgeView()) {\n            const edge = view.cell;\n            const sourceCell = edge.getSourceCell();\n            const targetCell = edge.getTargetCell();\n            if (this.renderArea && sourceCell && targetCell) {\n                return (this.renderArea.isIntersectWithRect(sourceCell.getBBox()) ||\n                    this.renderArea.isIntersectWithRect(targetCell.getBBox()));\n            }\n        }\n        return true;\n    }\n    getRenderPriority(view) {\n        return view.cell.isNode()\n            ? JOB_PRIORITY.RenderNode\n            : JOB_PRIORITY.RenderEdge;\n    }\n    dispose() {\n        this.stopListening();\n    }\n}\n__decorate([\n    Disposable.dispose()\n], Scheduler.prototype, \"dispose\", null);\n(function (Scheduler) {\n    Scheduler.FLAG_INSERT = 1 << 30;\n    Scheduler.FLAG_REMOVE = 1 << 29;\n    Scheduler.FLAG_RENDER = (1 << 26) - 1;\n})(Scheduler || (Scheduler = {}));\n(function (Scheduler) {\n    let ViewState;\n    (function (ViewState) {\n        ViewState[ViewState[\"CREATED\"] = 0] = \"CREATED\";\n        ViewState[ViewState[\"MOUNTED\"] = 1] = \"MOUNTED\";\n        ViewState[ViewState[\"WAITING\"] = 2] = \"WAITING\";\n    })(ViewState = Scheduler.ViewState || (Scheduler.ViewState = {}));\n})(Scheduler || (Scheduler = {}));\n//# sourceMappingURL=scheduler.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { Rectangle } from '@antv/x6-geometry';\nimport { Base } from '../graph/base';\nimport { Cell } from '../model';\nimport { Scheduler } from './scheduler';\nimport { Util } from '../util';\nexport class Renderer extends Base {\n    constructor() {\n        super(...arguments);\n        this.schedule = new Scheduler(this.graph);\n    }\n    requestViewUpdate(view, flag, options = {}) {\n        this.schedule.requestViewUpdate(view, flag, options);\n    }\n    isViewMounted(view) {\n        return this.schedule.isViewMounted(view);\n    }\n    setRenderArea(area) {\n        this.schedule.setRenderArea(area);\n    }\n    findViewByElem(elem) {\n        if (elem == null) {\n            return null;\n        }\n        const container = this.options.container;\n        const target = typeof elem === 'string'\n            ? container.querySelector(elem)\n            : elem instanceof Element\n                ? elem\n                : elem[0];\n        if (target) {\n            const id = this.graph.view.findAttr('data-cell-id', target);\n            if (id) {\n                const views = this.schedule.views;\n                if (views[id]) {\n                    return views[id].view;\n                }\n            }\n        }\n        return null;\n    }\n    findViewByCell(cell) {\n        if (cell == null) {\n            return null;\n        }\n        const id = Cell.isCell(cell) ? cell.id : cell;\n        const views = this.schedule.views;\n        if (views[id]) {\n            return views[id].view;\n        }\n        return null;\n    }\n    findViewsFromPoint(p) {\n        const ref = { x: p.x, y: p.y };\n        return this.model\n            .getCells()\n            .map((cell) => this.findViewByCell(cell))\n            .filter((view) => {\n            if (view != null) {\n                return Util.getBBox(view.container, {\n                    target: this.view.stage,\n                }).containsPoint(ref);\n            }\n            return false;\n        });\n    }\n    findEdgeViewsFromPoint(p, threshold = 5) {\n        return this.model\n            .getEdges()\n            .map((edge) => this.findViewByCell(edge))\n            .filter((view) => {\n            if (view != null) {\n                const point = view.getClosestPoint(p);\n                if (point) {\n                    return point.distance(p) <= threshold;\n                }\n            }\n            return false;\n        });\n    }\n    findViewsInArea(rect, options = {}) {\n        const area = Rectangle.create(rect);\n        return this.model\n            .getCells()\n            .map((cell) => this.findViewByCell(cell))\n            .filter((view) => {\n            if (view) {\n                if (options.nodeOnly && !view.isNodeView()) {\n                    return false;\n                }\n                const bbox = Util.getBBox(view.container, {\n                    target: this.view.stage,\n                });\n                if (bbox.width === 0) {\n                    bbox.inflate(1, 0);\n                }\n                else if (bbox.height === 0) {\n                    bbox.inflate(0, 1);\n                }\n                return options.strict\n                    ? area.containsRect(bbox)\n                    : area.isIntersectWithRect(bbox);\n            }\n            return false;\n        });\n    }\n    dispose() {\n        this.schedule.dispose();\n    }\n}\n__decorate([\n    Base.dispose()\n], Renderer.prototype, \"dispose\", null);\n//# sourceMappingURL=renderer.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { StringExt, Dom, Vector } from '@antv/x6-common';\nimport { Filter } from '../registry';\nimport { Markup } from '../view';\nimport { Base } from './base';\nexport class DefsManager extends Base {\n    get cid() {\n        return this.graph.view.cid;\n    }\n    get svg() {\n        return this.view.svg;\n    }\n    get defs() {\n        return this.view.defs;\n    }\n    isDefined(id) {\n        return this.svg.getElementById(id) != null;\n    }\n    filter(options) {\n        let filterId = options.id;\n        const name = options.name;\n        if (!filterId) {\n            filterId = `filter-${name}-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(filterId)) {\n            const fn = Filter.registry.get(name);\n            if (fn == null) {\n                return Filter.registry.onNotFound(name);\n            }\n            const markup = fn(options.args || {});\n            // Set the filter area to be 3x the bounding box of the cell\n            // and center the filter around the cell.\n            const attrs = Object.assign(Object.assign({ x: -1, y: -1, width: 3, height: 3, filterUnits: 'objectBoundingBox' }, options.attrs), { id: filterId });\n            Vector.create(Markup.sanitize(markup), attrs).appendTo(this.defs);\n        }\n        return filterId;\n    }\n    gradient(options) {\n        let id = options.id;\n        const type = options.type;\n        if (!id) {\n            id = `gradient-${type}-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(id)) {\n            const stops = options.stops;\n            const arr = stops.map((stop) => {\n                const opacity = stop.opacity != null && Number.isFinite(stop.opacity)\n                    ? stop.opacity\n                    : 1;\n                return `<stop offset=\"${stop.offset}\" stop-color=\"${stop.color}\" stop-opacity=\"${opacity}\"/>`;\n            });\n            const markup = `<${type}>${arr.join('')}</${type}>`;\n            const attrs = Object.assign({ id }, options.attrs);\n            Vector.create(markup, attrs).appendTo(this.defs);\n        }\n        return id;\n    }\n    marker(options) {\n        const { id, refX, refY, markerUnits, markerOrient, tagName, children } = options, attrs = __rest(options, [\"id\", \"refX\", \"refY\", \"markerUnits\", \"markerOrient\", \"tagName\", \"children\"]);\n        let markerId = id;\n        if (!markerId) {\n            markerId = `marker-${this.cid}-${StringExt.hashcode(JSON.stringify(options))}`;\n        }\n        if (!this.isDefined(markerId)) {\n            if (tagName !== 'path') {\n                // remove unnecessary d attribute inherit from standard edge.\n                delete attrs.d;\n            }\n            const pathMarker = Vector.create('marker', {\n                refX,\n                refY,\n                id: markerId,\n                overflow: 'visible',\n                orient: markerOrient != null ? markerOrient : 'auto',\n                markerUnits: markerUnits || 'userSpaceOnUse',\n            }, children\n                ? children.map((_a) => {\n                    var { tagName } = _a, other = __rest(_a, [\"tagName\"]);\n                    return Vector.create(`${tagName}` || 'path', Dom.kebablizeAttrs(Object.assign(Object.assign({}, attrs), other)));\n                })\n                : [Vector.create(tagName || 'path', Dom.kebablizeAttrs(attrs))]);\n            this.defs.appendChild(pathMarker.node);\n        }\n        return markerId;\n    }\n    remove(id) {\n        const elem = this.svg.getElementById(id);\n        if (elem && elem.parentNode) {\n            elem.parentNode.removeChild(elem);\n        }\n    }\n}\n//# sourceMappingURL=defs.js.map","import { Dom } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Base } from './base';\nimport { Util } from '../util';\nexport class CoordManager extends Base {\n    getClientMatrix() {\n        return Dom.createSVGMatrix(this.view.stage.getScreenCTM());\n    }\n    /**\n     * Returns coordinates of the graph viewport, relative to the window.\n     */\n    getClientOffset() {\n        // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n        const rect = this.view.svg.getBoundingClientRect();\n        return new Point(rect.left, rect.top);\n    }\n    /**\n     * Returns coordinates of the graph viewport, relative to the document.\n     */\n    getPageOffset() {\n        // see: https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n        return this.getClientOffset().translate(window.scrollX, window.scrollY);\n    }\n    snapToGrid(x, y) {\n        const p = typeof x === 'number'\n            ? this.clientToLocalPoint(x, y)\n            : this.clientToLocalPoint(x.x, x.y);\n        return p.snapToGrid(this.graph.getGridSize());\n    }\n    localToGraphPoint(x, y) {\n        const localPoint = Point.create(x, y);\n        return Util.transformPoint(localPoint, this.graph.matrix());\n    }\n    localToClientPoint(x, y) {\n        const localPoint = Point.create(x, y);\n        return Util.transformPoint(localPoint, this.getClientMatrix());\n    }\n    localToPagePoint(x, y) {\n        const p = typeof x === 'number'\n            ? this.localToGraphPoint(x, y)\n            : this.localToGraphPoint(x);\n        return p.translate(this.getPageOffset());\n    }\n    localToGraphRect(x, y, width, height) {\n        const localRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(localRect, this.graph.matrix());\n    }\n    localToClientRect(x, y, width, height) {\n        const localRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(localRect, this.getClientMatrix());\n    }\n    localToPageRect(x, y, width, height) {\n        const rect = typeof x === 'number'\n            ? this.localToGraphRect(x, y, width, height)\n            : this.localToGraphRect(x);\n        return rect.translate(this.getPageOffset());\n    }\n    graphToLocalPoint(x, y) {\n        const graphPoint = Point.create(x, y);\n        return Util.transformPoint(graphPoint, this.graph.matrix().inverse());\n    }\n    clientToLocalPoint(x, y) {\n        const clientPoint = Point.create(x, y);\n        return Util.transformPoint(clientPoint, this.getClientMatrix().inverse());\n    }\n    clientToGraphPoint(x, y) {\n        const clientPoint = Point.create(x, y);\n        return Util.transformPoint(clientPoint, this.graph.matrix().multiply(this.getClientMatrix().inverse()));\n    }\n    pageToLocalPoint(x, y) {\n        const pagePoint = Point.create(x, y);\n        const graphPoint = pagePoint.diff(this.getPageOffset());\n        return this.graphToLocalPoint(graphPoint);\n    }\n    graphToLocalRect(x, y, width, height) {\n        const graphRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(graphRect, this.graph.matrix().inverse());\n    }\n    clientToLocalRect(x, y, width, height) {\n        const clientRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(clientRect, this.getClientMatrix().inverse());\n    }\n    clientToGraphRect(x, y, width, height) {\n        const clientRect = Rectangle.create(x, y, width, height);\n        return Util.transformRectangle(clientRect, this.graph.matrix().multiply(this.getClientMatrix().inverse()));\n    }\n    pageToLocalRect(x, y, width, height) {\n        const graphRect = Rectangle.create(x, y, width, height);\n        const pageOffset = this.getPageOffset();\n        graphRect.x -= pageOffset.x;\n        graphRect.y -= pageOffset.y;\n        return this.graphToLocalRect(graphRect);\n    }\n}\n//# sourceMappingURL=coord.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Highlighter } from '../registry';\nimport { Base } from './base';\nexport class HighlightManager extends Base {\n    constructor() {\n        super(...arguments);\n        this.highlights = {};\n    }\n    init() {\n        this.startListening();\n    }\n    startListening() {\n        this.graph.on('cell:highlight', this.onCellHighlight, this);\n        this.graph.on('cell:unhighlight', this.onCellUnhighlight, this);\n    }\n    stopListening() {\n        this.graph.off('cell:highlight', this.onCellHighlight, this);\n        this.graph.off('cell:unhighlight', this.onCellUnhighlight, this);\n    }\n    onCellHighlight({ view: cellView, magnet, options = {}, }) {\n        const resolved = this.resolveHighlighter(options);\n        if (!resolved) {\n            return;\n        }\n        const key = this.getHighlighterId(magnet, resolved);\n        if (!this.highlights[key]) {\n            const highlighter = resolved.highlighter;\n            highlighter.highlight(cellView, magnet, Object.assign({}, resolved.args));\n            this.highlights[key] = {\n                cellView,\n                magnet,\n                highlighter,\n                args: resolved.args,\n            };\n        }\n    }\n    onCellUnhighlight({ magnet, options = {}, }) {\n        const resolved = this.resolveHighlighter(options);\n        if (!resolved) {\n            return;\n        }\n        const id = this.getHighlighterId(magnet, resolved);\n        this.unhighlight(id);\n    }\n    resolveHighlighter(options) {\n        const graphOptions = this.options;\n        let highlighterDef = options.highlighter;\n        if (highlighterDef == null) {\n            // check for built-in types\n            const type = options.type;\n            highlighterDef =\n                (type && graphOptions.highlighting[type]) ||\n                    graphOptions.highlighting.default;\n        }\n        if (highlighterDef == null) {\n            return null;\n        }\n        const def = typeof highlighterDef === 'string'\n            ? {\n                name: highlighterDef,\n            }\n            : highlighterDef;\n        const name = def.name;\n        const highlighter = Highlighter.registry.get(name);\n        if (highlighter == null) {\n            return Highlighter.registry.onNotFound(name);\n        }\n        Highlighter.check(name, highlighter);\n        return {\n            name,\n            highlighter,\n            args: def.args || {},\n        };\n    }\n    getHighlighterId(magnet, options) {\n        Dom.ensureId(magnet);\n        return options.name + magnet.id + JSON.stringify(options.args);\n    }\n    unhighlight(id) {\n        const highlight = this.highlights[id];\n        if (highlight) {\n            highlight.highlighter.unhighlight(highlight.cellView, highlight.magnet, highlight.args);\n            delete this.highlights[id];\n        }\n    }\n    dispose() {\n        Object.keys(this.highlights).forEach((id) => this.unhighlight(id));\n        this.stopListening();\n    }\n}\n__decorate([\n    HighlightManager.dispose()\n], HighlightManager.prototype, \"dispose\", null);\n//# sourceMappingURL=highlight.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { SizeSensor } from '@antv/x6-common';\nimport { Base } from './base';\nexport class SizeManager extends Base {\n    getScroller() {\n        const scroller = this.graph.getPlugin('scroller');\n        if (scroller && scroller.options.enabled) {\n            return scroller;\n        }\n        return null;\n    }\n    getContainer() {\n        const scroller = this.getScroller();\n        if (scroller) {\n            return scroller.container.parentElement;\n        }\n        return this.graph.container.parentElement;\n    }\n    getSensorTarget() {\n        const autoResize = this.options.autoResize;\n        if (autoResize) {\n            if (typeof autoResize === 'boolean') {\n                return this.getContainer();\n            }\n            return autoResize;\n        }\n    }\n    init() {\n        const autoResize = this.options.autoResize;\n        if (autoResize) {\n            const target = this.getSensorTarget();\n            if (target) {\n                SizeSensor.bind(target, () => {\n                    const width = target.offsetWidth;\n                    const height = target.offsetHeight;\n                    this.resize(width, height);\n                });\n            }\n        }\n    }\n    resize(width, height) {\n        const scroller = this.getScroller();\n        if (scroller) {\n            scroller.resize(width, height);\n        }\n        else {\n            this.graph.transform.resize(width, height);\n        }\n    }\n    dispose() {\n        SizeSensor.clear(this.graph.container);\n    }\n}\n__decorate([\n    Base.dispose()\n], SizeManager.prototype, \"dispose\", null);\n//# sourceMappingURL=size.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Basecoat } from '@antv/x6-common';\nimport { Point, Rectangle } from '@antv/x6-geometry';\nimport { Model, Cell, Node, Edge } from '../model';\nimport { CellView } from '../view';\nimport * as Registry from '../registry';\nimport { GraphView } from './view';\nimport { CSSManager as Css } from './css';\nimport { Options as GraphOptions } from './options';\nimport { GridManager as Grid } from './grid';\nimport { TransformManager as Transform } from './transform';\nimport { BackgroundManager as Background } from './background';\nimport { PanningManager as Panning } from './panning';\nimport { MouseWheel as Wheel } from './mousewheel';\nimport { VirtualRenderManager as VirtualRender } from './virtual-render';\nimport { Renderer as ViewRenderer } from '../renderer';\nimport { DefsManager as Defs } from './defs';\nimport { CoordManager as Coord } from './coord';\nimport { HighlightManager as Highlight } from './highlight';\nimport { SizeManager as Size } from './size';\nexport class Graph extends Basecoat {\n    get container() {\n        return this.options.container;\n    }\n    get [Symbol.toStringTag]() {\n        return Graph.toStringTag;\n    }\n    constructor(options) {\n        super();\n        this.installedPlugins = new Set();\n        this.options = GraphOptions.get(options);\n        this.css = new Css(this);\n        this.view = new GraphView(this);\n        this.defs = new Defs(this);\n        this.coord = new Coord(this);\n        this.transform = new Transform(this);\n        this.highlight = new Highlight(this);\n        this.grid = new Grid(this);\n        this.background = new Background(this);\n        if (this.options.model) {\n            this.model = this.options.model;\n        }\n        else {\n            this.model = new Model();\n            this.model.graph = this;\n        }\n        this.renderer = new ViewRenderer(this);\n        this.panning = new Panning(this);\n        this.mousewheel = new Wheel(this);\n        this.virtualRender = new VirtualRender(this);\n        this.size = new Size(this);\n    }\n    // #region model\n    isNode(cell) {\n        return cell.isNode();\n    }\n    isEdge(cell) {\n        return cell.isEdge();\n    }\n    resetCells(cells, options = {}) {\n        this.model.resetCells(cells, options);\n        return this;\n    }\n    clearCells(options = {}) {\n        this.model.clear(options);\n        return this;\n    }\n    toJSON(options = {}) {\n        return this.model.toJSON(options);\n    }\n    parseJSON(data) {\n        return this.model.parseJSON(data);\n    }\n    fromJSON(data, options = {}) {\n        this.model.fromJSON(data, options);\n        return this;\n    }\n    getCellById(id) {\n        return this.model.getCell(id);\n    }\n    addNode(node, options = {}) {\n        return this.model.addNode(node, options);\n    }\n    addNodes(nodes, options = {}) {\n        return this.addCell(nodes.map((node) => (Node.isNode(node) ? node : this.createNode(node))), options);\n    }\n    createNode(metadata) {\n        return this.model.createNode(metadata);\n    }\n    removeNode(node, options = {}) {\n        return this.model.removeCell(node, options);\n    }\n    addEdge(edge, options = {}) {\n        return this.model.addEdge(edge, options);\n    }\n    addEdges(edges, options = {}) {\n        return this.addCell(edges.map((edge) => (Edge.isEdge(edge) ? edge : this.createEdge(edge))), options);\n    }\n    removeEdge(edge, options = {}) {\n        return this.model.removeCell(edge, options);\n    }\n    createEdge(metadata) {\n        return this.model.createEdge(metadata);\n    }\n    addCell(cell, options = {}) {\n        this.model.addCell(cell, options);\n        return this;\n    }\n    removeCell(cell, options = {}) {\n        return this.model.removeCell(cell, options);\n    }\n    removeCells(cells, options = {}) {\n        return this.model.removeCells(cells, options);\n    }\n    removeConnectedEdges(cell, options = {}) {\n        return this.model.removeConnectedEdges(cell, options);\n    }\n    disconnectConnectedEdges(cell, options = {}) {\n        this.model.disconnectConnectedEdges(cell, options);\n        return this;\n    }\n    hasCell(cell) {\n        return this.model.has(cell);\n    }\n    getCells() {\n        return this.model.getCells();\n    }\n    getCellCount() {\n        return this.model.total();\n    }\n    /**\n     * Returns all the nodes in the graph.\n     */\n    getNodes() {\n        return this.model.getNodes();\n    }\n    /**\n     * Returns all the edges in the graph.\n     */\n    getEdges() {\n        return this.model.getEdges();\n    }\n    /**\n     * Returns all outgoing edges for the node.\n     */\n    getOutgoingEdges(cell) {\n        return this.model.getOutgoingEdges(cell);\n    }\n    /**\n     * Returns all incoming edges for the node.\n     */\n    getIncomingEdges(cell) {\n        return this.model.getIncomingEdges(cell);\n    }\n    /**\n     * Returns edges connected with cell.\n     */\n    getConnectedEdges(cell, options = {}) {\n        return this.model.getConnectedEdges(cell, options);\n    }\n    /**\n     * Returns an array of all the roots of the graph.\n     */\n    getRootNodes() {\n        return this.model.getRoots();\n    }\n    /**\n     * Returns an array of all the leafs of the graph.\n     */\n    getLeafNodes() {\n        return this.model.getLeafs();\n    }\n    /**\n     * Returns `true` if the node is a root node, i.e.\n     * there is no  edges coming to the node.\n     */\n    isRootNode(cell) {\n        return this.model.isRoot(cell);\n    }\n    /**\n     * Returns `true` if the node is a leaf node, i.e.\n     * there is no edges going out from the node.\n     */\n    isLeafNode(cell) {\n        return this.model.isLeaf(cell);\n    }\n    /**\n     * Returns all the neighbors of node in the graph. Neighbors are all\n     * the nodes connected to node via either incoming or outgoing edge.\n     */\n    getNeighbors(cell, options = {}) {\n        return this.model.getNeighbors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a neighbor of `cell1`.\n     */\n    isNeighbor(cell1, cell2, options = {}) {\n        return this.model.isNeighbor(cell1, cell2, options);\n    }\n    getSuccessors(cell, options = {}) {\n        return this.model.getSuccessors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a successor of `cell1`.\n     */\n    isSuccessor(cell1, cell2, options = {}) {\n        return this.model.isSuccessor(cell1, cell2, options);\n    }\n    getPredecessors(cell, options = {}) {\n        return this.model.getPredecessors(cell, options);\n    }\n    /**\n     * Returns `true` if `cell2` is a predecessor of `cell1`.\n     */\n    isPredecessor(cell1, cell2, options = {}) {\n        return this.model.isPredecessor(cell1, cell2, options);\n    }\n    getCommonAncestor(...cells) {\n        return this.model.getCommonAncestor(...cells);\n    }\n    /**\n     * Returns an array of cells that result from finding nodes/edges that\n     * are connected to any of the cells in the cells array. This function\n     * loops over cells and if the current cell is a edge, it collects its\n     * source/target nodes; if it is an node, it collects its incoming and\n     * outgoing edges if both the edge terminal (source/target) are in the\n     * cells array.\n     */\n    getSubGraph(cells, options = {}) {\n        return this.model.getSubGraph(cells, options);\n    }\n    /**\n     * Clones the whole subgraph (including all the connected links whose\n     * source/target is in the subgraph). If `options.deep` is `true`, also\n     * take into account all the embedded cells of all the subgraph cells.\n     *\n     * Returns a map of the form: { [original cell ID]: [clone] }.\n     */\n    cloneSubGraph(cells, options = {}) {\n        return this.model.cloneSubGraph(cells, options);\n    }\n    cloneCells(cells) {\n        return this.model.cloneCells(cells);\n    }\n    getNodesFromPoint(x, y) {\n        return this.model.getNodesFromPoint(x, y);\n    }\n    getNodesInArea(x, y, w, h, options) {\n        return this.model.getNodesInArea(x, y, w, h, options);\n    }\n    getNodesUnderNode(node, options = {}) {\n        return this.model.getNodesUnderNode(node, options);\n    }\n    searchCell(cell, iterator, options = {}) {\n        this.model.search(cell, iterator, options);\n        return this;\n    }\n    /** *\n     * Returns an array of IDs of nodes on the shortest\n     * path between source and target.\n     */\n    getShortestPath(source, target, options = {}) {\n        return this.model.getShortestPath(source, target, options);\n    }\n    /**\n     * Returns the bounding box that surrounds all cells in the graph.\n     */\n    getAllCellsBBox() {\n        return this.model.getAllCellsBBox();\n    }\n    /**\n     * Returns the bounding box that surrounds all the given cells.\n     */\n    getCellsBBox(cells, options = {}) {\n        return this.model.getCellsBBox(cells, options);\n    }\n    startBatch(name, data = {}) {\n        this.model.startBatch(name, data);\n    }\n    stopBatch(name, data = {}) {\n        this.model.stopBatch(name, data);\n    }\n    batchUpdate(arg1, arg2, arg3) {\n        const name = typeof arg1 === 'string' ? arg1 : 'update';\n        const execute = typeof arg1 === 'string' ? arg2 : arg1;\n        const data = typeof arg2 === 'function' ? arg3 : arg2;\n        this.startBatch(name, data);\n        const result = execute();\n        this.stopBatch(name, data);\n        return result;\n    }\n    updateCellId(cell, newId) {\n        return this.model.updateCellId(cell, newId);\n    }\n    // #endregion\n    // #region view\n    findView(ref) {\n        if (Cell.isCell(ref)) {\n            return this.findViewByCell(ref);\n        }\n        return this.findViewByElem(ref);\n    }\n    findViews(ref) {\n        if (Rectangle.isRectangleLike(ref)) {\n            return this.findViewsInArea(ref);\n        }\n        if (Point.isPointLike(ref)) {\n            return this.findViewsFromPoint(ref);\n        }\n        return [];\n    }\n    findViewByCell(cell) {\n        return this.renderer.findViewByCell(cell);\n    }\n    findViewByElem(elem) {\n        return this.renderer.findViewByElem(elem);\n    }\n    findViewsFromPoint(x, y) {\n        const p = typeof x === 'number' ? { x, y: y } : x;\n        return this.renderer.findViewsFromPoint(p);\n    }\n    findViewsInArea(x, y, width, height, options) {\n        const rect = typeof x === 'number'\n            ? {\n                x,\n                y: y,\n                width: width,\n                height: height,\n            }\n            : x;\n        const localOptions = typeof x === 'number'\n            ? options\n            : y;\n        return this.renderer.findViewsInArea(rect, localOptions);\n    }\n    matrix(mat) {\n        if (typeof mat === 'undefined') {\n            return this.transform.getMatrix();\n        }\n        this.transform.setMatrix(mat);\n        return this;\n    }\n    resize(width, height) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.resize(width, height);\n        }\n        else {\n            this.transform.resize(width, height);\n        }\n        return this;\n    }\n    scale(sx, sy = sx, cx = 0, cy = 0) {\n        if (typeof sx === 'undefined') {\n            return this.transform.getScale();\n        }\n        this.transform.scale(sx, sy, cx, cy);\n        return this;\n    }\n    zoom(factor, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            if (typeof factor === 'undefined') {\n                return scroller.zoom();\n            }\n            scroller.zoom(factor, options);\n        }\n        else {\n            if (typeof factor === 'undefined') {\n                return this.transform.getZoom();\n            }\n            this.transform.zoom(factor, options);\n        }\n        return this;\n    }\n    zoomTo(factor, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoom(factor, Object.assign(Object.assign({}, options), { absolute: true }));\n        }\n        else {\n            this.transform.zoom(factor, Object.assign(Object.assign({}, options), { absolute: true }));\n        }\n        return this;\n    }\n    zoomToRect(rect, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoomToRect(rect, options);\n        }\n        else {\n            this.transform.zoomToRect(rect, options);\n        }\n        return this;\n    }\n    zoomToFit(options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.zoomToFit(options);\n        }\n        else {\n            this.transform.zoomToFit(options);\n        }\n        return this;\n    }\n    rotate(angle, cx, cy) {\n        if (typeof angle === 'undefined') {\n            return this.transform.getRotation();\n        }\n        this.transform.rotate(angle, cx, cy);\n        return this;\n    }\n    translate(tx, ty) {\n        if (typeof tx === 'undefined') {\n            return this.transform.getTranslation();\n        }\n        this.transform.translate(tx, ty);\n        return this;\n    }\n    translateBy(dx, dy) {\n        const ts = this.translate();\n        const tx = ts.tx + dx;\n        const ty = ts.ty + dy;\n        return this.translate(tx, ty);\n    }\n    getGraphArea() {\n        return this.transform.getGraphArea();\n    }\n    getContentArea(options = {}) {\n        return this.transform.getContentArea(options);\n    }\n    getContentBBox(options = {}) {\n        return this.transform.getContentBBox(options);\n    }\n    fitToContent(gridWidth, gridHeight, padding, options) {\n        return this.transform.fitToContent(gridWidth, gridHeight, padding, options);\n    }\n    scaleContentToFit(options = {}) {\n        this.transform.scaleContentToFit(options);\n        return this;\n    }\n    /**\n     * Position the center of graph to the center of the viewport.\n     */\n    center(options) {\n        return this.centerPoint(options);\n    }\n    centerPoint(x, y, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerPoint(x, y, options);\n        }\n        else {\n            this.transform.centerPoint(x, y);\n        }\n        return this;\n    }\n    centerContent(options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerContent(options);\n        }\n        else {\n            this.transform.centerContent(options);\n        }\n        return this;\n    }\n    centerCell(cell, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.centerCell(cell, options);\n        }\n        else {\n            this.transform.centerCell(cell);\n        }\n        return this;\n    }\n    positionPoint(point, x, y, options = {}) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionPoint(point, x, y, options);\n        }\n        else {\n            this.transform.positionPoint(point, x, y);\n        }\n        return this;\n    }\n    positionRect(rect, direction, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionRect(rect, direction, options);\n        }\n        else {\n            this.transform.positionRect(rect, direction);\n        }\n        return this;\n    }\n    positionCell(cell, direction, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionCell(cell, direction, options);\n        }\n        else {\n            this.transform.positionCell(cell, direction);\n        }\n        return this;\n    }\n    positionContent(pos, options) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.positionContent(pos, options);\n        }\n        else {\n            this.transform.positionContent(pos, options);\n        }\n        return this;\n    }\n    snapToGrid(x, y) {\n        return this.coord.snapToGrid(x, y);\n    }\n    pageToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.pageToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.pageToLocalRect(x, y, width, height);\n        }\n        return this.coord.pageToLocalPoint(x, y);\n    }\n    localToPage(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToPageRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToPageRect(x, y, width, height);\n        }\n        return this.coord.localToPagePoint(x, y);\n    }\n    clientToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.clientToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.clientToLocalRect(x, y, width, height);\n        }\n        return this.coord.clientToLocalPoint(x, y);\n    }\n    localToClient(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToClientRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToClientRect(x, y, width, height);\n        }\n        return this.coord.localToClientPoint(x, y);\n    }\n    localToGraph(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.localToGraphRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.localToGraphRect(x, y, width, height);\n        }\n        return this.coord.localToGraphPoint(x, y);\n    }\n    graphToLocal(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.graphToLocalRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.graphToLocalRect(x, y, width, height);\n        }\n        return this.coord.graphToLocalPoint(x, y);\n    }\n    clientToGraph(x, y, width, height) {\n        if (Rectangle.isRectangleLike(x)) {\n            return this.coord.clientToGraphRect(x);\n        }\n        if (typeof x === 'number' &&\n            typeof y === 'number' &&\n            typeof width === 'number' &&\n            typeof height === 'number') {\n            return this.coord.clientToGraphRect(x, y, width, height);\n        }\n        return this.coord.clientToGraphPoint(x, y);\n    }\n    // #endregion\n    // #region defs\n    defineFilter(options) {\n        return this.defs.filter(options);\n    }\n    defineGradient(options) {\n        return this.defs.gradient(options);\n    }\n    defineMarker(options) {\n        return this.defs.marker(options);\n    }\n    // #endregion\n    // #region grid\n    getGridSize() {\n        return this.grid.getGridSize();\n    }\n    setGridSize(gridSize) {\n        this.grid.setGridSize(gridSize);\n        return this;\n    }\n    showGrid() {\n        this.grid.show();\n        return this;\n    }\n    hideGrid() {\n        this.grid.hide();\n        return this;\n    }\n    clearGrid() {\n        this.grid.clear();\n        return this;\n    }\n    drawGrid(options) {\n        this.grid.draw(options);\n        return this;\n    }\n    // #endregion\n    // #region background\n    updateBackground() {\n        this.background.update();\n        return this;\n    }\n    drawBackground(options, onGraph) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller != null && (this.options.background == null || !onGraph)) {\n            scroller.drawBackground(options, onGraph);\n        }\n        else {\n            this.background.draw(options);\n        }\n        return this;\n    }\n    clearBackground(onGraph) {\n        const scroller = this.getPlugin('scroller');\n        if (scroller != null && (this.options.background == null || !onGraph)) {\n            scroller.clearBackground(onGraph);\n        }\n        else {\n            this.background.clear();\n        }\n        return this;\n    }\n    // #endregion\n    // #region virtual-render\n    enableVirtualRender() {\n        this.virtualRender.enableVirtualRender();\n        return this;\n    }\n    disableVirtualRender() {\n        this.virtualRender.disableVirtualRender();\n        return this;\n    }\n    // #endregion\n    // #region mousewheel\n    isMouseWheelEnabled() {\n        return !this.mousewheel.disabled;\n    }\n    enableMouseWheel() {\n        this.mousewheel.enable();\n        return this;\n    }\n    disableMouseWheel() {\n        this.mousewheel.disable();\n        return this;\n    }\n    toggleMouseWheel(enabled) {\n        if (enabled == null) {\n            if (this.isMouseWheelEnabled()) {\n                this.disableMouseWheel();\n            }\n            else {\n                this.enableMouseWheel();\n            }\n        }\n        else if (enabled) {\n            this.enableMouseWheel();\n        }\n        else {\n            this.disableMouseWheel();\n        }\n        return this;\n    }\n    // #endregion\n    // #region panning\n    isPannable() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            return scroller.isPannable();\n        }\n        return this.panning.pannable;\n    }\n    enablePanning() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.enablePanning();\n        }\n        else {\n            this.panning.enablePanning();\n        }\n        return this;\n    }\n    disablePanning() {\n        const scroller = this.getPlugin('scroller');\n        if (scroller) {\n            scroller.disablePanning();\n        }\n        else {\n            this.panning.disablePanning();\n        }\n        return this;\n    }\n    togglePanning(pannable) {\n        if (pannable == null) {\n            if (this.isPannable()) {\n                this.disablePanning();\n            }\n            else {\n                this.enablePanning();\n            }\n        }\n        else if (pannable !== this.isPannable()) {\n            if (pannable) {\n                this.enablePanning();\n            }\n            else {\n                this.disablePanning();\n            }\n        }\n        return this;\n    }\n    // #endregion\n    // #region plugin\n    use(plugin, ...options) {\n        if (!this.installedPlugins.has(plugin)) {\n            this.installedPlugins.add(plugin);\n            plugin.init(this, ...options);\n        }\n        return this;\n    }\n    getPlugin(pluginName) {\n        return Array.from(this.installedPlugins).find((plugin) => plugin.name === pluginName);\n    }\n    getPlugins(pluginName) {\n        return Array.from(this.installedPlugins).filter((plugin) => pluginName.includes(plugin.name));\n    }\n    enablePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            var _a;\n            (_a = plugin === null || plugin === void 0 ? void 0 : plugin.enable) === null || _a === void 0 ? void 0 : _a.call(plugin);\n        });\n        return this;\n    }\n    disablePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            var _a;\n            (_a = plugin === null || plugin === void 0 ? void 0 : plugin.disable) === null || _a === void 0 ? void 0 : _a.call(plugin);\n        });\n        return this;\n    }\n    isPluginEnabled(pluginName) {\n        var _a;\n        const pluginIns = this.getPlugin(pluginName);\n        return (_a = pluginIns === null || pluginIns === void 0 ? void 0 : pluginIns.isEnabled) === null || _a === void 0 ? void 0 : _a.call(pluginIns);\n    }\n    disposePlugins(plugins) {\n        let postPlugins = plugins;\n        if (!Array.isArray(postPlugins)) {\n            postPlugins = [postPlugins];\n        }\n        const aboutToChangePlugins = this.getPlugins(postPlugins);\n        aboutToChangePlugins === null || aboutToChangePlugins === void 0 ? void 0 : aboutToChangePlugins.forEach((plugin) => {\n            plugin.dispose();\n        });\n        return this;\n    }\n    // #endregion\n    // #region dispose\n    dispose() {\n        this.clearCells();\n        this.off();\n        this.css.dispose();\n        this.defs.dispose();\n        this.grid.dispose();\n        this.coord.dispose();\n        this.transform.dispose();\n        this.highlight.dispose();\n        this.background.dispose();\n        this.mousewheel.dispose();\n        this.panning.dispose();\n        this.view.dispose();\n        this.renderer.dispose();\n        this.installedPlugins.forEach((plugin) => {\n            plugin.dispose();\n        });\n    }\n}\n__decorate([\n    Basecoat.dispose()\n], Graph.prototype, \"dispose\", null);\n(function (Graph) {\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    Graph.View = GraphView;\n    Graph.Renderer = ViewRenderer;\n    Graph.MouseWheel = Wheel;\n    Graph.DefsManager = Defs;\n    Graph.GridManager = Grid;\n    Graph.CoordManager = Coord;\n    Graph.TransformManager = Transform;\n    Graph.HighlightManager = Highlight;\n    Graph.BackgroundManager = Background;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.toStringTag = `X6.${Graph.name}`;\n    function isGraph(instance) {\n        if (instance == null) {\n            return false;\n        }\n        if (instance instanceof Graph) {\n            return true;\n        }\n        const tag = instance[Symbol.toStringTag];\n        if (tag == null || tag === Graph.toStringTag) {\n            return true;\n        }\n        return false;\n    }\n    Graph.isGraph = isGraph;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    function render(options, data) {\n        const graph = options instanceof HTMLElement\n            ? new Graph({ container: options })\n            : new Graph(options);\n        if (data != null) {\n            graph.fromJSON(data);\n        }\n        return graph;\n    }\n    Graph.render = render;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.registerNode = Node.registry.register;\n    Graph.registerEdge = Edge.registry.register;\n    Graph.registerView = CellView.registry.register;\n    Graph.registerAttr = Registry.Attr.registry.register;\n    Graph.registerGrid = Registry.Grid.registry.register;\n    Graph.registerFilter = Registry.Filter.registry.register;\n    Graph.registerNodeTool = Registry.NodeTool.registry.register;\n    Graph.registerEdgeTool = Registry.EdgeTool.registry.register;\n    Graph.registerBackground = Registry.Background.registry.register;\n    Graph.registerHighlighter = Registry.Highlighter.registry.register;\n    Graph.registerPortLayout = Registry.PortLayout.registry.register;\n    Graph.registerPortLabelLayout = Registry.PortLabelLayout.registry.register;\n    Graph.registerMarker = Registry.Marker.registry.register;\n    Graph.registerRouter = Registry.Router.registry.register;\n    Graph.registerConnector = Registry.Connector.registry.register;\n    Graph.registerAnchor = Registry.NodeAnchor.registry.register;\n    Graph.registerEdgeAnchor = Registry.EdgeAnchor.registry.register;\n    Graph.registerConnectionPoint = Registry.ConnectionPoint.registry.register;\n})(Graph || (Graph = {}));\n(function (Graph) {\n    Graph.unregisterNode = Node.registry.unregister;\n    Graph.unregisterEdge = Edge.registry.unregister;\n    Graph.unregisterView = CellView.registry.unregister;\n    Graph.unregisterAttr = Registry.Attr.registry.unregister;\n    Graph.unregisterGrid = Registry.Grid.registry.unregister;\n    Graph.unregisterFilter = Registry.Filter.registry.unregister;\n    Graph.unregisterNodeTool = Registry.NodeTool.registry.unregister;\n    Graph.unregisterEdgeTool = Registry.EdgeTool.registry.unregister;\n    Graph.unregisterBackground = Registry.Background.registry.unregister;\n    Graph.unregisterHighlighter = Registry.Highlighter.registry.unregister;\n    Graph.unregisterPortLayout = Registry.PortLayout.registry.unregister;\n    Graph.unregisterPortLabelLayout = Registry.PortLabelLayout.registry.unregister;\n    Graph.unregisterMarker = Registry.Marker.registry.unregister;\n    Graph.unregisterRouter = Registry.Router.registry.unregister;\n    Graph.unregisterConnector = Registry.Connector.registry.unregister;\n    Graph.unregisterAnchor = Registry.NodeAnchor.registry.unregister;\n    Graph.unregisterEdgeAnchor = Registry.EdgeAnchor.registry.unregister;\n    Graph.unregisterConnectionPoint = Registry.ConnectionPoint.registry.unregister;\n})(Graph || (Graph = {}));\n//# sourceMappingURL=graph.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Dom } from '@antv/x6-common';\nimport { Markup } from '../view';\nimport { Node } from '../model/node';\nimport { NodeView } from '../view/node';\nimport { Graph } from '../graph/graph';\nexport class HTML extends Node {\n}\n(function (HTML) {\n    class View extends NodeView {\n        init() {\n            super.init();\n            this.cell.on('change:*', ({ key }) => {\n                const content = HTML.shapeMaps[this.cell.shape];\n                if (content) {\n                    const { effect } = content;\n                    if (!effect || effect.includes(key)) {\n                        this.renderHTMLComponent();\n                    }\n                }\n            });\n        }\n        confirmUpdate(flag) {\n            const ret = super.confirmUpdate(flag);\n            return this.handleAction(ret, View.action, () => this.renderHTMLComponent());\n        }\n        renderHTMLComponent() {\n            const container = this.selectors && this.selectors.foContent;\n            if (container) {\n                Dom.empty(container);\n                const content = HTML.shapeMaps[this.cell.shape];\n                if (!content) {\n                    return;\n                }\n                let { html } = content;\n                if (typeof html === 'function') {\n                    html = html(this.cell);\n                }\n                if (html) {\n                    if (typeof html === 'string') {\n                        container.innerHTML = html;\n                    }\n                    else {\n                        Dom.append(container, html);\n                    }\n                }\n            }\n        }\n    }\n    HTML.View = View;\n    (function (View) {\n        View.action = 'html';\n        View.config({\n            bootstrap: [View.action],\n            actions: {\n                html: View.action,\n            },\n        });\n        NodeView.registry.register('html-view', View, true);\n    })(View = HTML.View || (HTML.View = {}));\n})(HTML || (HTML = {}));\n(function (HTML) {\n    HTML.config({\n        view: 'html-view',\n        markup: [\n            {\n                tagName: 'rect',\n                selector: 'body',\n            },\n            Object.assign({}, Markup.getForeignObjectMarkup()),\n            {\n                tagName: 'text',\n                selector: 'label',\n            },\n        ],\n        attrs: {\n            body: {\n                fill: 'none',\n                stroke: 'none',\n                refWidth: '100%',\n                refHeight: '100%',\n            },\n            fo: {\n                refWidth: '100%',\n                refHeight: '100%',\n            },\n        },\n    });\n    Node.registry.register('html', HTML, true);\n})(HTML || (HTML = {}));\n(function (HTML) {\n    HTML.shapeMaps = {};\n    function register(config) {\n        const { shape, html, effect, inherit } = config, others = __rest(config, [\"shape\", \"html\", \"effect\", \"inherit\"]);\n        if (!shape) {\n            throw new Error('should specify shape in config');\n        }\n        HTML.shapeMaps[shape] = {\n            html,\n            effect,\n        };\n        Graph.registerNode(shape, Object.assign({ inherit: inherit || 'html' }, others), true);\n    }\n    HTML.register = register;\n})(HTML || (HTML = {}));\n//# sourceMappingURL=html.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n`;\n//# sourceMappingURL=raw.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { GeometryUtil, Rectangle, FunctionExt, Dom, CssLoader, View, Graph, } from '@antv/x6';\nimport { content } from './style/raw';\nexport class Dnd extends View {\n    get targetScroller() {\n        const target = this.options.target;\n        const scroller = target.getPlugin('scroller');\n        return scroller;\n    }\n    get targetGraph() {\n        return this.options.target;\n    }\n    get targetModel() {\n        return this.targetGraph.model;\n    }\n    get snapline() {\n        const target = this.options.target;\n        const snapline = target.getPlugin('snapline');\n        return snapline;\n    }\n    constructor(options) {\n        super();\n        this.name = 'dnd';\n        this.options = Object.assign(Object.assign({}, Dnd.defaults), options);\n        this.init();\n    }\n    init() {\n        CssLoader.ensure(this.name, content);\n        this.container = document.createElement('div');\n        Dom.addClass(this.container, this.prefixClassName('widget-dnd'));\n        this.draggingGraph = new Graph(Object.assign(Object.assign({}, this.options.delegateGraphOptions), { container: document.createElement('div'), width: 1, height: 1, async: false }));\n        Dom.append(this.container, this.draggingGraph.container);\n    }\n    start(node, evt) {\n        const e = evt;\n        e.preventDefault();\n        this.targetModel.startBatch('dnd');\n        Dom.addClass(this.container, 'dragging');\n        Dom.appendTo(this.container, this.options.draggingContainer || document.body);\n        this.sourceNode = node;\n        this.prepareDragging(node, e.clientX, e.clientY);\n        const local = this.updateNodePosition(e.clientX, e.clientY);\n        if (this.isSnaplineEnabled()) {\n            this.snapline.captureCursorOffset({\n                e,\n                node,\n                cell: node,\n                view: this.draggingView,\n                x: local.x,\n                y: local.y,\n            });\n            this.draggingNode.on('change:position', this.snap, this);\n        }\n        this.delegateDocumentEvents(Dnd.documentEvents, e.data);\n    }\n    isSnaplineEnabled() {\n        return this.snapline && this.snapline.isEnabled();\n    }\n    prepareDragging(sourceNode, clientX, clientY) {\n        const draggingGraph = this.draggingGraph;\n        const draggingModel = draggingGraph.model;\n        const draggingNode = this.options.getDragNode(sourceNode, {\n            sourceNode,\n            draggingGraph,\n            targetGraph: this.targetGraph,\n        });\n        draggingNode.position(0, 0);\n        let padding = 5;\n        if (this.isSnaplineEnabled()) {\n            padding += this.snapline.options.tolerance || 0;\n        }\n        if (this.isSnaplineEnabled() || this.options.scaled) {\n            const scale = this.targetGraph.transform.getScale();\n            draggingGraph.scale(scale.sx, scale.sy);\n            padding *= Math.max(scale.sx, scale.sy);\n        }\n        else {\n            draggingGraph.scale(1, 1);\n        }\n        this.clearDragging();\n        // if (this.options.animation) {\n        //   this.$container.stop(true, true)\n        // }\n        draggingModel.resetCells([draggingNode]);\n        const delegateView = draggingGraph.findViewByCell(draggingNode);\n        delegateView.undelegateEvents();\n        delegateView.cell.off('changed');\n        draggingGraph.fitToContent({\n            padding,\n            allowNewOrigin: 'any',\n        });\n        const bbox = delegateView.getBBox();\n        this.geometryBBox = delegateView.getBBox({ useCellGeometry: true });\n        this.delta = this.geometryBBox.getTopLeft().diff(bbox.getTopLeft());\n        this.draggingNode = draggingNode;\n        this.draggingView = delegateView;\n        this.draggingBBox = draggingNode.getBBox();\n        this.padding = padding;\n        this.originOffset = this.updateGraphPosition(clientX, clientY);\n    }\n    updateGraphPosition(clientX, clientY) {\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n        const delta = this.delta;\n        const nodeBBox = this.geometryBBox;\n        const padding = this.padding || 5;\n        const offset = {\n            left: clientX - delta.x - nodeBBox.width / 2 - padding,\n            top: clientY - delta.y - nodeBBox.height / 2 - padding + scrollTop,\n        };\n        if (this.draggingGraph) {\n            Dom.css(this.container, {\n                left: `${offset.left}px`,\n                top: `${offset.top}px`,\n            });\n        }\n        return offset;\n    }\n    updateNodePosition(x, y) {\n        const local = this.targetGraph.clientToLocal(x, y);\n        const bbox = this.draggingBBox;\n        local.x -= bbox.width / 2;\n        local.y -= bbox.height / 2;\n        this.draggingNode.position(local.x, local.y);\n        return local;\n    }\n    snap({ cell, current, options, }) {\n        const node = cell;\n        if (options.snapped) {\n            const bbox = this.draggingBBox;\n            node.position(bbox.x + options.tx, bbox.y + options.ty, { silent: true });\n            this.draggingView.translate();\n            node.position(current.x, current.y, { silent: true });\n            this.snapOffset = {\n                x: options.tx,\n                y: options.ty,\n            };\n        }\n        else {\n            this.snapOffset = null;\n        }\n    }\n    onDragging(evt) {\n        const draggingView = this.draggingView;\n        if (draggingView) {\n            evt.preventDefault();\n            const e = this.normalizeEvent(evt);\n            const clientX = e.clientX;\n            const clientY = e.clientY;\n            this.updateGraphPosition(clientX, clientY);\n            const local = this.updateNodePosition(clientX, clientY);\n            const embeddingMode = this.targetGraph.options.embedding.enabled;\n            const isValidArea = (embeddingMode || this.isSnaplineEnabled()) &&\n                this.isInsideValidArea({\n                    x: clientX,\n                    y: clientY,\n                });\n            if (embeddingMode) {\n                draggingView.setEventData(e, {\n                    graph: this.targetGraph,\n                    candidateEmbedView: this.candidateEmbedView,\n                });\n                const data = draggingView.getEventData(e);\n                if (isValidArea) {\n                    draggingView.processEmbedding(e, data);\n                }\n                else {\n                    draggingView.clearEmbedding(data);\n                }\n                this.candidateEmbedView = data.candidateEmbedView;\n            }\n            // update snapline\n            if (this.isSnaplineEnabled()) {\n                if (isValidArea) {\n                    this.snapline.snapOnMoving({\n                        e,\n                        view: draggingView,\n                        x: local.x,\n                        y: local.y,\n                    });\n                }\n                else {\n                    this.snapline.hide();\n                }\n            }\n        }\n    }\n    onDragEnd(evt) {\n        const draggingNode = this.draggingNode;\n        if (draggingNode) {\n            const e = this.normalizeEvent(evt);\n            const draggingView = this.draggingView;\n            const draggingBBox = this.draggingBBox;\n            const snapOffset = this.snapOffset;\n            let x = draggingBBox.x;\n            let y = draggingBBox.y;\n            if (snapOffset) {\n                x += snapOffset.x;\n                y += snapOffset.y;\n            }\n            draggingNode.position(x, y, { silent: true });\n            const ret = this.drop(draggingNode, { x: e.clientX, y: e.clientY });\n            const callback = (node) => {\n                if (node) {\n                    this.onDropped(draggingNode);\n                    if (this.targetGraph.options.embedding.enabled && draggingView) {\n                        draggingView.setEventData(e, {\n                            cell: node,\n                            graph: this.targetGraph,\n                            candidateEmbedView: this.candidateEmbedView,\n                        });\n                        draggingView.finalizeEmbedding(e, draggingView.getEventData(e));\n                    }\n                }\n                else {\n                    this.onDropInvalid();\n                }\n                this.candidateEmbedView = null;\n                this.targetModel.stopBatch('dnd');\n            };\n            if (FunctionExt.isAsync(ret)) {\n                // stop dragging\n                this.undelegateDocumentEvents();\n                ret.then(callback); // eslint-disable-line\n            }\n            else {\n                callback(ret);\n            }\n        }\n    }\n    clearDragging() {\n        if (this.draggingNode) {\n            this.sourceNode = null;\n            this.draggingNode.remove();\n            this.draggingNode = null;\n            this.draggingView = null;\n            this.delta = null;\n            this.padding = null;\n            this.snapOffset = null;\n            this.originOffset = null;\n            this.undelegateDocumentEvents();\n        }\n    }\n    onDropped(draggingNode) {\n        if (this.draggingNode === draggingNode) {\n            this.clearDragging();\n            Dom.removeClass(this.container, 'dragging');\n            Dom.remove(this.container);\n        }\n    }\n    onDropInvalid() {\n        const draggingNode = this.draggingNode;\n        if (draggingNode) {\n            this.onDropped(draggingNode);\n            // todo\n            // const anim = this.options.animation\n            // if (anim) {\n            //   const duration = (typeof anim === 'object' && anim.duration) || 150\n            //   const easing = (typeof anim === 'object' && anim.easing) || 'swing'\n            //   this.draggingView = null\n            //   this.$container.animate(this.originOffset!, duration, easing, () =>\n            //     this.onDropped(draggingNode),\n            //   )\n            // } else {\n            //   this.onDropped(draggingNode)\n            // }\n        }\n    }\n    isInsideValidArea(p) {\n        let targetRect;\n        let dndRect = null;\n        const targetGraph = this.targetGraph;\n        const targetScroller = this.targetScroller;\n        if (this.options.dndContainer) {\n            dndRect = this.getDropArea(this.options.dndContainer);\n        }\n        const isInsideDndRect = dndRect && dndRect.containsPoint(p);\n        if (targetScroller) {\n            if (targetScroller.options.autoResize) {\n                targetRect = this.getDropArea(targetScroller.container);\n            }\n            else {\n                const outter = this.getDropArea(targetScroller.container);\n                targetRect = this.getDropArea(targetGraph.container).intersectsWithRect(outter);\n            }\n        }\n        else {\n            targetRect = this.getDropArea(targetGraph.container);\n        }\n        return !isInsideDndRect && targetRect && targetRect.containsPoint(p);\n    }\n    getDropArea(elem) {\n        const offset = Dom.offset(elem);\n        const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n        const scrollLeft = document.body.scrollLeft || document.documentElement.scrollLeft;\n        return Rectangle.create({\n            x: offset.left +\n                parseInt(Dom.css(elem, 'border-left-width'), 10) -\n                scrollLeft,\n            y: offset.top +\n                parseInt(Dom.css(elem, 'border-top-width'), 10) -\n                scrollTop,\n            width: elem.clientWidth,\n            height: elem.clientHeight,\n        });\n    }\n    drop(draggingNode, pos) {\n        if (this.isInsideValidArea(pos)) {\n            const targetGraph = this.targetGraph;\n            const targetModel = targetGraph.model;\n            const local = targetGraph.clientToLocal(pos);\n            const sourceNode = this.sourceNode;\n            const droppingNode = this.options.getDropNode(draggingNode, {\n                sourceNode,\n                draggingNode,\n                targetGraph: this.targetGraph,\n                draggingGraph: this.draggingGraph,\n            });\n            const bbox = droppingNode.getBBox();\n            local.x += bbox.x - bbox.width / 2;\n            local.y += bbox.y - bbox.height / 2;\n            const gridSize = this.snapOffset ? 1 : targetGraph.getGridSize();\n            droppingNode.position(GeometryUtil.snapToGrid(local.x, gridSize), GeometryUtil.snapToGrid(local.y, gridSize));\n            droppingNode.removeZIndex();\n            const validateNode = this.options.validateNode;\n            const ret = validateNode\n                ? validateNode(droppingNode, {\n                    sourceNode,\n                    draggingNode,\n                    droppingNode,\n                    targetGraph,\n                    draggingGraph: this.draggingGraph,\n                })\n                : true;\n            if (typeof ret === 'boolean') {\n                if (ret) {\n                    targetModel.addCell(droppingNode, { stencil: this.cid });\n                    return droppingNode;\n                }\n                return null;\n            }\n            return FunctionExt.toDeferredBoolean(ret).then((valid) => {\n                if (valid) {\n                    targetModel.addCell(droppingNode, { stencil: this.cid });\n                    return droppingNode;\n                }\n                return null;\n            });\n        }\n        return null;\n    }\n    onRemove() {\n        if (this.draggingGraph) {\n            this.draggingGraph.view.remove();\n            this.draggingGraph.dispose();\n        }\n    }\n    dispose() {\n        this.remove();\n        CssLoader.clean(this.name);\n    }\n}\n__decorate([\n    View.dispose()\n], Dnd.prototype, \"dispose\", null);\n(function (Dnd) {\n    Dnd.defaults = {\n        // animation: false,\n        getDragNode: (sourceNode) => sourceNode.clone(),\n        getDropNode: (draggingNode) => draggingNode.clone(),\n    };\n    Dnd.documentEvents = {\n        mousemove: 'onDragging',\n        touchmove: 'onDragging',\n        mouseup: 'onDragEnd',\n        touchend: 'onDragEnd',\n        touchcancel: 'onDragEnd',\n    };\n})(Dnd || (Dnd = {}));\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { ArrayExt, FunctionExt, Vector, Angle, Point, Rectangle, View, } from '@antv/x6';\nexport class SnaplineImpl extends View {\n    get model() {\n        return this.graph.model;\n    }\n    get containerClassName() {\n        return this.prefixClassName('widget-snapline');\n    }\n    get verticalClassName() {\n        return `${this.containerClassName}-vertical`;\n    }\n    get horizontalClassName() {\n        return `${this.containerClassName}-horizontal`;\n    }\n    constructor(options) {\n        super();\n        const { graph } = options, others = __rest(options, [\"graph\"]);\n        this.graph = graph;\n        this.options = Object.assign({}, others);\n        this.offset = { x: 0, y: 0 };\n        this.render();\n        if (!this.disabled) {\n            this.startListening();\n        }\n    }\n    get disabled() {\n        return this.options.enabled !== true;\n    }\n    enable() {\n        if (this.disabled) {\n            this.options.enabled = true;\n            this.startListening();\n        }\n    }\n    disable() {\n        if (!this.disabled) {\n            this.options.enabled = false;\n            this.stopListening();\n        }\n    }\n    setFilter(filter) {\n        this.options.filter = filter;\n    }\n    render() {\n        const container = (this.containerWrapper = new Vector('svg'));\n        const horizontal = (this.horizontal = new Vector('line'));\n        const vertical = (this.vertical = new Vector('line'));\n        container.addClass(this.containerClassName);\n        horizontal.addClass(this.horizontalClassName);\n        vertical.addClass(this.verticalClassName);\n        container.setAttribute('width', '100%');\n        container.setAttribute('height', '100%');\n        horizontal.setAttribute('display', 'none');\n        vertical.setAttribute('display', 'none');\n        container.append([horizontal, vertical]);\n        if (this.options.className) {\n            container.addClass(this.options.className);\n        }\n        this.container = this.containerWrapper.node;\n    }\n    startListening() {\n        this.stopListening();\n        this.graph.on('node:mousedown', this.captureCursorOffset, this);\n        this.graph.on('node:mousemove', this.snapOnMoving, this);\n        this.model.on('batch:stop', this.onBatchStop, this);\n        this.delegateDocumentEvents({\n            mouseup: 'hide',\n            touchend: 'hide',\n        });\n    }\n    stopListening() {\n        this.graph.off('node:mousedown', this.captureCursorOffset, this);\n        this.graph.off('node:mousemove', this.snapOnMoving, this);\n        this.model.off('batch:stop', this.onBatchStop, this);\n        this.undelegateDocumentEvents();\n    }\n    onBatchStop({ name, data }) {\n        if (name === 'resize') {\n            this.snapOnResizing(data.cell, data);\n        }\n    }\n    captureCursorOffset({ view, x, y }) {\n        const targetView = view.getDelegatedView();\n        if (targetView && this.isNodeMovable(targetView)) {\n            const pos = view.cell.getPosition();\n            this.offset = {\n                x: x - pos.x,\n                y: y - pos.y,\n            };\n        }\n    }\n    isNodeMovable(view) {\n        return view && view.cell.isNode() && view.can('nodeMovable');\n    }\n    getRestrictArea(view) {\n        const restrict = this.graph.options.translating.restrict;\n        const area = typeof restrict === 'function'\n            ? FunctionExt.call(restrict, this.graph, view)\n            : restrict;\n        if (typeof area === 'number') {\n            return this.graph.transform.getGraphArea().inflate(area);\n        }\n        if (area === true) {\n            return this.graph.transform.getGraphArea();\n        }\n        return area || null;\n    }\n    snapOnResizing(node, options) {\n        if (this.options.resizing &&\n            !options.snapped &&\n            options.ui &&\n            options.direction &&\n            options.trueDirection) {\n            const view = this.graph.renderer.findViewByCell(node);\n            if (view && view.cell.isNode()) {\n                const nodeBbox = node.getBBox();\n                const nodeBBoxRotated = nodeBbox.bbox(node.getAngle());\n                const nodeTopLeft = nodeBBoxRotated.getTopLeft();\n                const nodeBottomRight = nodeBBoxRotated.getBottomRight();\n                const angle = Angle.normalize(node.getAngle());\n                const tolerance = this.options.tolerance || 0;\n                let verticalLeft;\n                let verticalTop;\n                let verticalHeight;\n                let horizontalTop;\n                let horizontalLeft;\n                let horizontalWidth;\n                const snapOrigin = {\n                    vertical: 0,\n                    horizontal: 0,\n                };\n                const direction = options.direction;\n                const trueDirection = options.trueDirection;\n                const relativeDirection = options.relativeDirection;\n                if (trueDirection.indexOf('right') !== -1) {\n                    snapOrigin.vertical = nodeBottomRight.x;\n                }\n                else {\n                    snapOrigin.vertical = nodeTopLeft.x;\n                }\n                if (trueDirection.indexOf('bottom') !== -1) {\n                    snapOrigin.horizontal = nodeBottomRight.y;\n                }\n                else {\n                    snapOrigin.horizontal = nodeTopLeft.y;\n                }\n                this.model.getNodes().some((cell) => {\n                    if (this.isIgnored(node, cell)) {\n                        return false;\n                    }\n                    const snapBBox = cell.getBBox().bbox(cell.getAngle());\n                    const snapTopLeft = snapBBox.getTopLeft();\n                    const snapBottomRight = snapBBox.getBottomRight();\n                    const groups = {\n                        vertical: [snapTopLeft.x, snapBottomRight.x],\n                        horizontal: [snapTopLeft.y, snapBottomRight.y],\n                    };\n                    const distances = {};\n                    Object.keys(groups).forEach((k) => {\n                        const key = k;\n                        const list = groups[key]\n                            .map((value) => ({\n                            position: value,\n                            distance: Math.abs(value - snapOrigin[key]),\n                        }))\n                            .filter((item) => item.distance <= tolerance);\n                        distances[key] = ArrayExt.sortBy(list, (item) => item.distance);\n                    });\n                    if (verticalLeft == null && distances.vertical.length > 0) {\n                        verticalLeft = distances.vertical[0].position;\n                        verticalTop = Math.min(nodeBBoxRotated.y, snapBBox.y);\n                        verticalHeight =\n                            Math.max(nodeBottomRight.y, snapBottomRight.y) - verticalTop;\n                    }\n                    if (horizontalTop == null && distances.horizontal.length > 0) {\n                        horizontalTop = distances.horizontal[0].position;\n                        horizontalLeft = Math.min(nodeBBoxRotated.x, snapBBox.x);\n                        horizontalWidth =\n                            Math.max(nodeBottomRight.x, snapBottomRight.x) - horizontalLeft;\n                    }\n                    return verticalLeft != null && horizontalTop != null;\n                });\n                this.hide();\n                let dx = 0;\n                let dy = 0;\n                if (horizontalTop != null || verticalLeft != null) {\n                    if (verticalLeft != null) {\n                        dx =\n                            trueDirection.indexOf('right') !== -1\n                                ? verticalLeft - nodeBottomRight.x\n                                : nodeTopLeft.x - verticalLeft;\n                    }\n                    if (horizontalTop != null) {\n                        dy =\n                            trueDirection.indexOf('bottom') !== -1\n                                ? horizontalTop - nodeBottomRight.y\n                                : nodeTopLeft.y - horizontalTop;\n                    }\n                }\n                let dWidth = 0;\n                let dHeight = 0;\n                if (angle % 90 === 0) {\n                    if (angle === 90 || angle === 270) {\n                        dWidth = dy;\n                        dHeight = dx;\n                    }\n                    else {\n                        dWidth = dx;\n                        dHeight = dy;\n                    }\n                }\n                else {\n                    const quadrant = angle >= 0 && angle < 90\n                        ? 1\n                        : angle >= 90 && angle < 180\n                            ? 4\n                            : angle >= 180 && angle < 270\n                                ? 3\n                                : 2;\n                    if (horizontalTop != null && verticalLeft != null) {\n                        if (dx < dy) {\n                            dy = 0;\n                            horizontalTop = undefined;\n                        }\n                        else {\n                            dx = 0;\n                            verticalLeft = undefined;\n                        }\n                    }\n                    const rad = Angle.toRad(angle % 90);\n                    if (dx) {\n                        dWidth = quadrant === 3 ? dx / Math.cos(rad) : dx / Math.sin(rad);\n                    }\n                    if (dy) {\n                        dHeight = quadrant === 3 ? dy / Math.cos(rad) : dy / Math.sin(rad);\n                    }\n                    const quadrant13 = quadrant === 1 || quadrant === 3;\n                    switch (relativeDirection) {\n                        case 'top':\n                        case 'bottom':\n                            dHeight = dy\n                                ? dy / (quadrant13 ? Math.cos(rad) : Math.sin(rad))\n                                : dx / (quadrant13 ? Math.sin(rad) : Math.cos(rad));\n                            break;\n                        case 'left':\n                        case 'right':\n                            dWidth = dx\n                                ? dx / (quadrant13 ? Math.cos(rad) : Math.sin(rad))\n                                : dy / (quadrant13 ? Math.sin(rad) : Math.cos(rad));\n                            break;\n                        default:\n                            break;\n                    }\n                }\n                switch (relativeDirection) {\n                    case 'top':\n                    case 'bottom':\n                        dWidth = 0;\n                        break;\n                    case 'left':\n                    case 'right':\n                        dHeight = 0;\n                        break;\n                    default:\n                        break;\n                }\n                const gridSize = this.graph.getGridSize();\n                let newWidth = Math.max(nodeBbox.width + dWidth, gridSize);\n                let newHeight = Math.max(nodeBbox.height + dHeight, gridSize);\n                if (options.minWidth && options.minWidth > gridSize) {\n                    newWidth = Math.max(newWidth, options.minWidth);\n                }\n                if (options.minHeight && options.minHeight > gridSize) {\n                    newHeight = Math.max(newHeight, options.minHeight);\n                }\n                if (options.maxWidth) {\n                    newWidth = Math.min(newWidth, options.maxWidth);\n                }\n                if (options.maxHeight) {\n                    newHeight = Math.min(newHeight, options.maxHeight);\n                }\n                if (options.preserveAspectRatio) {\n                    if (dHeight < dWidth) {\n                        newHeight = newWidth * (nodeBbox.height / nodeBbox.width);\n                    }\n                    else {\n                        newWidth = newHeight * (nodeBbox.width / nodeBbox.height);\n                    }\n                }\n                if (newWidth !== nodeBbox.width || newHeight !== nodeBbox.height) {\n                    node.resize(newWidth, newHeight, {\n                        direction,\n                        relativeDirection,\n                        trueDirection,\n                        snapped: true,\n                        snaplines: this.cid,\n                        restrict: this.getRestrictArea(view),\n                    });\n                    if (verticalHeight) {\n                        verticalHeight += newHeight - nodeBbox.height;\n                    }\n                    if (horizontalWidth) {\n                        horizontalWidth += newWidth - nodeBbox.width;\n                    }\n                }\n                const newRotatedBBox = node.getBBox().bbox(angle);\n                if (verticalLeft &&\n                    Math.abs(newRotatedBBox.x - verticalLeft) > 1 &&\n                    Math.abs(newRotatedBBox.width + newRotatedBBox.x - verticalLeft) > 1) {\n                    verticalLeft = undefined;\n                }\n                if (horizontalTop &&\n                    Math.abs(newRotatedBBox.y - horizontalTop) > 1 &&\n                    Math.abs(newRotatedBBox.height + newRotatedBBox.y - horizontalTop) > 1) {\n                    horizontalTop = undefined;\n                }\n                this.update({\n                    verticalLeft,\n                    verticalTop,\n                    verticalHeight,\n                    horizontalTop,\n                    horizontalLeft,\n                    horizontalWidth,\n                });\n            }\n        }\n    }\n    snapOnMoving({ view, e, x, y }) {\n        const targetView = view.getEventData(e).delegatedView || view;\n        if (!this.isNodeMovable(targetView)) {\n            return;\n        }\n        const node = targetView.cell;\n        const size = node.getSize();\n        const position = node.getPosition();\n        const cellBBox = new Rectangle(x - this.offset.x, y - this.offset.y, size.width, size.height);\n        const angle = node.getAngle();\n        const nodeCenter = cellBBox.getCenter();\n        const nodeBBoxRotated = cellBBox.bbox(angle);\n        const nodeTopLeft = nodeBBoxRotated.getTopLeft();\n        const nodeBottomRight = nodeBBoxRotated.getBottomRight();\n        const distance = this.options.tolerance || 0;\n        let verticalLeft;\n        let verticalTop;\n        let verticalHeight;\n        let horizontalTop;\n        let horizontalLeft;\n        let horizontalWidth;\n        let verticalFix = 0;\n        let horizontalFix = 0;\n        this.model.getNodes().some((targetNode) => {\n            if (this.isIgnored(node, targetNode)) {\n                return false;\n            }\n            const snapBBox = targetNode.getBBox().bbox(targetNode.getAngle());\n            const snapCenter = snapBBox.getCenter();\n            const snapTopLeft = snapBBox.getTopLeft();\n            const snapBottomRight = snapBBox.getBottomRight();\n            if (verticalLeft == null) {\n                if (Math.abs(snapCenter.x - nodeCenter.x) < distance) {\n                    verticalLeft = snapCenter.x;\n                    verticalFix = 0.5;\n                }\n                else if (Math.abs(snapTopLeft.x - nodeTopLeft.x) < distance) {\n                    verticalLeft = snapTopLeft.x;\n                    verticalFix = 0;\n                }\n                else if (Math.abs(snapTopLeft.x - nodeBottomRight.x) < distance) {\n                    verticalLeft = snapTopLeft.x;\n                    verticalFix = 1;\n                }\n                else if (Math.abs(snapBottomRight.x - nodeBottomRight.x) < distance) {\n                    verticalLeft = snapBottomRight.x;\n                    verticalFix = 1;\n                }\n                else if (Math.abs(snapBottomRight.x - nodeTopLeft.x) < distance) {\n                    verticalLeft = snapBottomRight.x;\n                }\n                if (verticalLeft != null) {\n                    verticalTop = Math.min(nodeBBoxRotated.y, snapBBox.y);\n                    verticalHeight =\n                        Math.max(nodeBottomRight.y, snapBottomRight.y) - verticalTop;\n                }\n            }\n            if (horizontalTop == null) {\n                if (Math.abs(snapCenter.y - nodeCenter.y) < distance) {\n                    horizontalTop = snapCenter.y;\n                    horizontalFix = 0.5;\n                }\n                else if (Math.abs(snapTopLeft.y - nodeTopLeft.y) < distance) {\n                    horizontalTop = snapTopLeft.y;\n                }\n                else if (Math.abs(snapTopLeft.y - nodeBottomRight.y) < distance) {\n                    horizontalTop = snapTopLeft.y;\n                    horizontalFix = 1;\n                }\n                else if (Math.abs(snapBottomRight.y - nodeBottomRight.y) < distance) {\n                    horizontalTop = snapBottomRight.y;\n                    horizontalFix = 1;\n                }\n                else if (Math.abs(snapBottomRight.y - nodeTopLeft.y) < distance) {\n                    horizontalTop = snapBottomRight.y;\n                }\n                if (horizontalTop != null) {\n                    horizontalLeft = Math.min(nodeBBoxRotated.x, snapBBox.x);\n                    horizontalWidth =\n                        Math.max(nodeBottomRight.x, snapBottomRight.x) - horizontalLeft;\n                }\n            }\n            return verticalLeft != null && horizontalTop != null;\n        });\n        this.hide();\n        if (horizontalTop != null || verticalLeft != null) {\n            if (horizontalTop != null) {\n                nodeBBoxRotated.y =\n                    horizontalTop - horizontalFix * nodeBBoxRotated.height;\n            }\n            if (verticalLeft != null) {\n                nodeBBoxRotated.x = verticalLeft - verticalFix * nodeBBoxRotated.width;\n            }\n            const newCenter = nodeBBoxRotated.getCenter();\n            const newX = newCenter.x - cellBBox.width / 2;\n            const newY = newCenter.y - cellBBox.height / 2;\n            const dx = newX - position.x;\n            const dy = newY - position.y;\n            if (dx !== 0 || dy !== 0) {\n                node.translate(dx, dy, {\n                    snapped: true,\n                    restrict: this.getRestrictArea(targetView),\n                });\n                if (horizontalWidth) {\n                    horizontalWidth += dx;\n                }\n                if (verticalHeight) {\n                    verticalHeight += dy;\n                }\n            }\n            this.update({\n                verticalLeft,\n                verticalTop,\n                verticalHeight,\n                horizontalTop,\n                horizontalLeft,\n                horizontalWidth,\n            });\n        }\n    }\n    isIgnored(snapNode, targetNode) {\n        return (targetNode.id === snapNode.id ||\n            targetNode.isDescendantOf(snapNode) ||\n            !this.filter(targetNode));\n    }\n    filter(node) {\n        const filter = this.options.filter;\n        if (Array.isArray(filter)) {\n            return filter.some((item) => {\n                if (typeof item === 'string') {\n                    return node.shape === item;\n                }\n                return node.id === item.id;\n            });\n        }\n        if (typeof filter === 'function') {\n            return FunctionExt.call(filter, this.graph, node);\n        }\n        return true;\n    }\n    update(metadata) {\n        // https://en.wikipedia.org/wiki/Transformation_matrix#Affine_transformations\n        if (metadata.horizontalTop) {\n            const start = this.graph.localToGraph(new Point(metadata.horizontalLeft, metadata.horizontalTop));\n            const end = this.graph.localToGraph(new Point(metadata.horizontalLeft + metadata.horizontalWidth, metadata.horizontalTop));\n            this.horizontal.setAttributes({\n                x1: this.options.sharp ? `${start.x}` : '0',\n                y1: `${start.y}`,\n                x2: this.options.sharp ? `${end.x}` : '100%',\n                y2: `${end.y}`,\n                display: 'inherit',\n            });\n        }\n        else {\n            this.horizontal.setAttribute('display', 'none');\n        }\n        if (metadata.verticalLeft) {\n            const start = this.graph.localToGraph(new Point(metadata.verticalLeft, metadata.verticalTop));\n            const end = this.graph.localToGraph(new Point(metadata.verticalLeft, metadata.verticalTop + metadata.verticalHeight));\n            this.vertical.setAttributes({\n                x1: `${start.x}`,\n                y1: this.options.sharp ? `${start.y}` : '0',\n                x2: `${end.x}`,\n                y2: this.options.sharp ? `${end.y}` : '100%',\n                display: 'inherit',\n            });\n        }\n        else {\n            this.vertical.setAttribute('display', 'none');\n        }\n        this.show();\n    }\n    resetTimer() {\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = null;\n        }\n    }\n    show() {\n        this.resetTimer();\n        if (this.container.parentNode == null) {\n            this.graph.container.appendChild(this.container);\n        }\n        return this;\n    }\n    hide() {\n        this.resetTimer();\n        this.vertical.setAttribute('display', 'none');\n        this.horizontal.setAttribute('display', 'none');\n        const clean = this.options.clean;\n        const delay = typeof clean === 'number' ? clean : clean !== false ? 3000 : 0;\n        if (delay > 0) {\n            this.timer = window.setTimeout(() => {\n                if (this.container.parentNode !== null) {\n                    this.unmount();\n                }\n            }, delay);\n        }\n        return this;\n    }\n    onRemove() {\n        this.stopListening();\n        this.hide();\n    }\n    dispose() {\n        this.remove();\n    }\n}\n__decorate([\n    View.dispose()\n], SnaplineImpl.prototype, \"dispose\", null);\n//# sourceMappingURL=snapline.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-widget-snapline {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  pointer-events: none;\n}\n.x6-widget-snapline-vertical,\n.x6-widget-snapline-horizontal {\n  stroke: #2ecc71;\n  stroke-width: 1px;\n}\n`;\n//# sourceMappingURL=raw.js.map","import { Graph } from '@antv/x6';\nGraph.prototype.isSnaplineEnabled = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        return snapline.isEnabled();\n    }\n    return false;\n};\nGraph.prototype.enableSnapline = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.enable();\n    }\n    return this;\n};\nGraph.prototype.disableSnapline = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.disable();\n    }\n    return this;\n};\nGraph.prototype.toggleSnapline = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.toggleEnabled();\n    }\n    return this;\n};\nGraph.prototype.hideSnapline = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.hide();\n    }\n    return this;\n};\nGraph.prototype.setSnaplineFilter = function (filter) {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.setFilter(filter);\n    }\n    return this;\n};\nGraph.prototype.isSnaplineOnResizingEnabled = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        return snapline.isOnResizingEnabled();\n    }\n    return false;\n};\nGraph.prototype.enableSnaplineOnResizing = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.enableOnResizing();\n    }\n    return this;\n};\nGraph.prototype.disableSnaplineOnResizing = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.disableOnResizing();\n    }\n    return this;\n};\nGraph.prototype.toggleSnaplineOnResizing = function (enableOnResizing) {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.toggleOnResizing(enableOnResizing);\n    }\n    return this;\n};\nGraph.prototype.isSharpSnapline = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        return snapline.isSharp();\n    }\n    return false;\n};\nGraph.prototype.enableSharpSnapline = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.enableSharp();\n    }\n    return this;\n};\nGraph.prototype.disableSharpSnapline = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.disableSharp();\n    }\n    return this;\n};\nGraph.prototype.toggleSharpSnapline = function (sharp) {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.toggleSharp(sharp);\n    }\n    return this;\n};\nGraph.prototype.getSnaplineTolerance = function () {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        return snapline.getTolerance();\n    }\n};\nGraph.prototype.setSnaplineTolerance = function (tolerance) {\n    const snapline = this.getPlugin('snapline');\n    if (snapline) {\n        snapline.setTolerance(tolerance);\n    }\n    return this;\n};\n//# sourceMappingURL=api.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Disposable, CssLoader } from '@antv/x6';\nimport { SnaplineImpl } from './snapline';\nimport { content } from './style/raw';\nimport './api';\nexport class Snapline extends Disposable {\n    constructor(options = {}) {\n        super();\n        this.name = 'snapline';\n        this.options = Object.assign({ enabled: true, tolerance: 10 }, options);\n        CssLoader.ensure(this.name, content);\n    }\n    init(graph) {\n        this.snaplineImpl = new SnaplineImpl(Object.assign(Object.assign({}, this.options), { graph }));\n    }\n    // #region api\n    isEnabled() {\n        return !this.snaplineImpl.disabled;\n    }\n    enable() {\n        this.snaplineImpl.enable();\n    }\n    disable() {\n        this.snaplineImpl.disable();\n    }\n    toggleEnabled(enabled) {\n        if (enabled != null) {\n            if (enabled !== this.isEnabled()) {\n                if (enabled) {\n                    this.enable();\n                }\n                else {\n                    this.disable();\n                }\n            }\n        }\n        else {\n            if (this.isEnabled()) {\n                this.disable();\n            }\n            else {\n                this.enable();\n            }\n            return this;\n        }\n    }\n    hide() {\n        this.snaplineImpl.hide();\n        return this;\n    }\n    setFilter(filter) {\n        this.snaplineImpl.setFilter(filter);\n        return this;\n    }\n    isOnResizingEnabled() {\n        return this.snaplineImpl.options.resizing === true;\n    }\n    enableOnResizing() {\n        this.snaplineImpl.options.resizing = true;\n        return this;\n    }\n    disableOnResizing() {\n        this.snaplineImpl.options.resizing = false;\n        return this;\n    }\n    toggleOnResizing(enableOnResizing) {\n        if (enableOnResizing != null) {\n            if (enableOnResizing !== this.isOnResizingEnabled()) {\n                if (enableOnResizing) {\n                    this.enableOnResizing();\n                }\n                else {\n                    this.disableOnResizing();\n                }\n            }\n        }\n        else if (this.isOnResizingEnabled()) {\n            this.disableOnResizing();\n        }\n        else {\n            this.enableOnResizing();\n        }\n        return this;\n    }\n    isSharp() {\n        return this.snaplineImpl.options.sharp === true;\n    }\n    enableSharp() {\n        this.snaplineImpl.options.sharp = true;\n        return this;\n    }\n    disableSharp() {\n        this.snaplineImpl.options.sharp = false;\n        return this;\n    }\n    toggleSharp(sharp) {\n        if (sharp != null) {\n            if (sharp !== this.isSharp()) {\n                if (sharp) {\n                    this.enableSharp();\n                }\n                else {\n                    this.disableSharp();\n                }\n            }\n        }\n        else if (this.isSharp()) {\n            this.disableSharp();\n        }\n        else {\n            this.enableSharp();\n        }\n        return this;\n    }\n    getTolerance() {\n        return this.snaplineImpl.options.tolerance;\n    }\n    setTolerance(tolerance) {\n        this.snaplineImpl.options.tolerance = tolerance;\n        return this;\n    }\n    captureCursorOffset(e) {\n        this.snaplineImpl.captureCursorOffset(e);\n    }\n    snapOnMoving(args) {\n        this.snaplineImpl.snapOnMoving(args);\n    }\n    // #endregion\n    dispose() {\n        this.snaplineImpl.dispose();\n        CssLoader.clean(this.name);\n    }\n}\n__decorate([\n    Disposable.dispose()\n], Snapline.prototype, \"dispose\", null);\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { GeometryUtil, Angle, Point, Dom, NumberExt, View, } from '@antv/x6';\nexport class TransformImpl extends View {\n    get model() {\n        return this.graph.model;\n    }\n    get view() {\n        return this.graph.renderer.findViewByCell(this.node);\n    }\n    get containerClassName() {\n        return this.prefixClassName('widget-transform');\n    }\n    get resizeClassName() {\n        return `${this.containerClassName}-resize`;\n    }\n    get rotateClassName() {\n        return `${this.containerClassName}-rotate`;\n    }\n    constructor(options, node, graph) {\n        super();\n        this.node = node;\n        this.graph = graph;\n        this.options = Object.assign(Object.assign({}, Private.defaultOptions), options);\n        this.render();\n        this.startListening();\n    }\n    startListening() {\n        this.delegateEvents({\n            [`mousedown .${this.resizeClassName}`]: 'startResizing',\n            [`touchstart .${this.resizeClassName}`]: 'startResizing',\n            [`mousedown .${this.rotateClassName}`]: 'startRotating',\n            [`touchstart .${this.rotateClassName}`]: 'startRotating',\n        });\n        this.model.on('*', this.update, this);\n        this.graph.on('scale', this.update, this);\n        this.graph.on('translate', this.update, this);\n        this.node.on('removed', this.remove, this);\n        this.model.on('reseted', this.remove, this);\n        this.view.on('cell:knob:mousedown', this.onKnobMouseDown, this);\n        this.view.on('cell:knob:mouseup', this.onKnobMouseUp, this);\n    }\n    stopListening() {\n        this.undelegateEvents();\n        this.model.off('*', this.update, this);\n        this.graph.off('scale', this.update, this);\n        this.graph.off('translate', this.update, this);\n        this.node.off('removed', this.remove, this);\n        this.model.off('reseted', this.remove, this);\n        this.view.off('cell:knob:mousedown', this.onKnobMouseDown, this);\n        this.view.off('cell:knob:mouseup', this.onKnobMouseUp, this);\n    }\n    renderHandles() {\n        this.container = document.createElement('div');\n        const knob = document.createElement('div');\n        Dom.attr(knob, 'draggable', 'false');\n        const rotate = knob.cloneNode(true);\n        Dom.addClass(rotate, this.rotateClassName);\n        const resizes = Private.POSITIONS.map((pos) => {\n            const elem = knob.cloneNode(true);\n            Dom.addClass(elem, this.resizeClassName);\n            Dom.attr(elem, 'data-position', pos);\n            return elem;\n        });\n        this.empty();\n        Dom.append(this.container, [...resizes, rotate]);\n    }\n    render() {\n        this.renderHandles();\n        if (this.view) {\n            this.view.addClass(Private.NODE_CLS);\n        }\n        Dom.addClass(this.container, this.containerClassName);\n        Dom.toggleClass(this.container, 'no-orth-resize', this.options.preserveAspectRatio || !this.options.orthogonalResizing);\n        Dom.toggleClass(this.container, 'no-resize', !this.options.resizable);\n        Dom.toggleClass(this.container, 'no-rotate', !this.options.rotatable);\n        if (this.options.className) {\n            Dom.addClass(this.container, this.options.className);\n        }\n        this.graph.container.appendChild(this.container);\n        return this.update();\n    }\n    update() {\n        const ctm = this.graph.matrix();\n        const bbox = this.node.getBBox();\n        bbox.x *= ctm.a;\n        bbox.x += ctm.e;\n        bbox.y *= ctm.d;\n        bbox.y += ctm.f;\n        bbox.width *= ctm.a;\n        bbox.height *= ctm.d;\n        const angle = Angle.normalize(this.node.getAngle());\n        const transform = angle !== 0 ? `rotate(${angle}deg)` : '';\n        Dom.css(this.container, {\n            transform,\n            width: bbox.width,\n            height: bbox.height,\n            left: bbox.x,\n            top: bbox.y,\n        });\n        this.updateResizerDirections();\n        return this;\n    }\n    remove() {\n        if (this.view) {\n            this.view.removeClass(Private.NODE_CLS);\n        }\n        return super.remove();\n    }\n    onKnobMouseDown() {\n        this.startHandle();\n    }\n    onKnobMouseUp() {\n        this.stopHandle();\n    }\n    updateResizerDirections() {\n        // Update the directions on the resizer divs while the node being rotated.\n        // The directions are represented by cardinal points (N,S,E,W). For example\n        // the div originally pointed to north needs to be changed to point to south\n        // if the node was rotated by 180 degrees.\n        const angle = Angle.normalize(this.node.getAngle());\n        const shift = Math.floor(angle * (Private.DIRECTIONS.length / 360));\n        if (shift !== this.prevShift) {\n            // Create the current directions array based on the calculated shift.\n            const directions = Private.DIRECTIONS.slice(shift).concat(Private.DIRECTIONS.slice(0, shift));\n            const className = (dir) => `${this.containerClassName}-cursor-${dir}`;\n            const resizes = this.container.querySelectorAll(`.${this.resizeClassName}`);\n            resizes.forEach((resize, index) => {\n                Dom.removeClass(resize, Private.DIRECTIONS.map((dir) => className(dir)).join(' '));\n                Dom.addClass(resize, className(directions[index]));\n            });\n            this.prevShift = shift;\n        }\n    }\n    getTrueDirection(dir) {\n        const angle = Angle.normalize(this.node.getAngle());\n        let index = Private.POSITIONS.indexOf(dir);\n        index += Math.floor(angle * (Private.POSITIONS.length / 360));\n        index %= Private.POSITIONS.length;\n        return Private.POSITIONS[index];\n    }\n    toValidResizeDirection(dir) {\n        return ({\n            top: 'top-left',\n            bottom: 'bottom-right',\n            left: 'bottom-left',\n            right: 'top-right',\n        }[dir] || dir);\n    }\n    startResizing(evt) {\n        evt.stopPropagation();\n        this.model.startBatch('resize', { cid: this.cid });\n        const dir = Dom.attr(evt.target, 'data-position');\n        this.prepareResizing(evt, dir);\n        this.startAction(evt);\n    }\n    prepareResizing(evt, relativeDirection) {\n        const trueDirection = this.getTrueDirection(relativeDirection);\n        let rx = 0;\n        let ry = 0;\n        relativeDirection.split('-').forEach((direction) => {\n            rx = { left: -1, right: 1 }[direction] || rx;\n            ry = { top: -1, bottom: 1 }[direction] || ry;\n        });\n        const direction = this.toValidResizeDirection(relativeDirection);\n        const selector = {\n            'top-right': 'bottomLeft',\n            'top-left': 'bottomRight',\n            'bottom-left': 'topRight',\n            'bottom-right': 'topLeft',\n        }[direction];\n        const angle = Angle.normalize(this.node.getAngle());\n        this.setEventData(evt, {\n            selector,\n            direction,\n            trueDirection,\n            relativeDirection,\n            angle,\n            resizeX: rx,\n            resizeY: ry,\n            action: 'resizing',\n        });\n    }\n    startRotating(evt) {\n        evt.stopPropagation();\n        this.model.startBatch('rotate', { cid: this.cid });\n        const center = this.node.getBBox().getCenter();\n        const e = this.normalizeEvent(evt);\n        const client = this.graph.snapToGrid(e.clientX, e.clientY);\n        this.setEventData(evt, {\n            center,\n            action: 'rotating',\n            angle: Angle.normalize(this.node.getAngle()),\n            start: Point.create(client).theta(center),\n        });\n        this.startAction(evt);\n    }\n    onMouseMove(evt) {\n        const view = this.graph.findViewByCell(this.node);\n        let data = this.getEventData(evt);\n        if (data.action) {\n            const e = this.normalizeEvent(evt);\n            let clientX = e.clientX;\n            let clientY = e.clientY;\n            const scroller = this.graph.getPlugin('scroller');\n            const restrict = this.options.restrictedResizing;\n            if (restrict === true || typeof restrict === 'number') {\n                const factor = restrict === true ? 0 : restrict;\n                const fix = scroller ? Math.max(factor, 8) : factor;\n                const rect = this.graph.container.getBoundingClientRect();\n                clientX = NumberExt.clamp(clientX, rect.left + fix, rect.right - fix);\n                clientY = NumberExt.clamp(clientY, rect.top + fix, rect.bottom - fix);\n            }\n            else if (this.options.autoScrollOnResizing && scroller) {\n                scroller.autoScroll(clientX, clientY);\n            }\n            const pos = this.graph.snapToGrid(clientX, clientY);\n            const gridSize = this.graph.getGridSize();\n            const node = this.node;\n            const options = this.options;\n            if (data.action === 'resizing') {\n                data = data;\n                if (!data.resized) {\n                    if (view) {\n                        view.addClass('node-resizing');\n                        this.notify('node:resize', evt, view);\n                    }\n                    data.resized = true;\n                }\n                const currentBBox = node.getBBox();\n                const requestedSize = Point.create(pos)\n                    .rotate(data.angle, currentBBox.getCenter())\n                    .diff(currentBBox[data.selector]);\n                let width = data.resizeX\n                    ? requestedSize.x * data.resizeX\n                    : currentBBox.width;\n                let height = data.resizeY\n                    ? requestedSize.y * data.resizeY\n                    : currentBBox.height;\n                const rawWidth = width;\n                const rawHeight = height;\n                width = GeometryUtil.snapToGrid(width, gridSize);\n                height = GeometryUtil.snapToGrid(height, gridSize);\n                width = Math.max(width, options.minWidth || gridSize);\n                height = Math.max(height, options.minHeight || gridSize);\n                width = Math.min(width, options.maxWidth || Infinity);\n                height = Math.min(height, options.maxHeight || Infinity);\n                if (options.preserveAspectRatio) {\n                    const candidateWidth = (currentBBox.width * height) / currentBBox.height;\n                    const candidateHeight = (currentBBox.height * width) / currentBBox.width;\n                    if (width < candidateWidth) {\n                        height = candidateHeight;\n                    }\n                    else {\n                        width = candidateWidth;\n                    }\n                }\n                const relativeDirection = data.relativeDirection;\n                if (options.allowReverse &&\n                    (rawWidth <= -width || rawHeight <= -height)) {\n                    let reverted;\n                    if (relativeDirection === 'left') {\n                        if (rawWidth <= -width) {\n                            reverted = 'right';\n                        }\n                    }\n                    else if (relativeDirection === 'right') {\n                        if (rawWidth <= -width) {\n                            reverted = 'left';\n                        }\n                    }\n                    else if (relativeDirection === 'top') {\n                        if (rawHeight <= -height) {\n                            reverted = 'bottom';\n                        }\n                    }\n                    else if (relativeDirection === 'bottom') {\n                        if (rawHeight <= -height) {\n                            reverted = 'top';\n                        }\n                    }\n                    else if (relativeDirection === 'top-left') {\n                        if (rawWidth <= -width && rawHeight <= -height) {\n                            reverted = 'bottom-right';\n                        }\n                        else if (rawWidth <= -width) {\n                            reverted = 'top-right';\n                        }\n                        else if (rawHeight <= -height) {\n                            reverted = 'bottom-left';\n                        }\n                    }\n                    else if (relativeDirection === 'top-right') {\n                        if (rawWidth <= -width && rawHeight <= -height) {\n                            reverted = 'bottom-left';\n                        }\n                        else if (rawWidth <= -width) {\n                            reverted = 'top-left';\n                        }\n                        else if (rawHeight <= -height) {\n                            reverted = 'bottom-right';\n                        }\n                    }\n                    else if (relativeDirection === 'bottom-left') {\n                        if (rawWidth <= -width && rawHeight <= -height) {\n                            reverted = 'top-right';\n                        }\n                        else if (rawWidth <= -width) {\n                            reverted = 'bottom-right';\n                        }\n                        else if (rawHeight <= -height) {\n                            reverted = 'top-left';\n                        }\n                    }\n                    else if (relativeDirection === 'bottom-right') {\n                        if (rawWidth <= -width && rawHeight <= -height) {\n                            reverted = 'top-left';\n                        }\n                        else if (rawWidth <= -width) {\n                            reverted = 'bottom-left';\n                        }\n                        else if (rawHeight <= -height) {\n                            reverted = 'top-right';\n                        }\n                    }\n                    const revertedDir = reverted;\n                    this.stopHandle();\n                    const handle = this.container.querySelector(`.${this.resizeClassName}[data-position=\"${revertedDir}\"]`);\n                    this.startHandle(handle);\n                    this.prepareResizing(evt, revertedDir);\n                    this.onMouseMove(evt);\n                }\n                if (currentBBox.width !== width || currentBBox.height !== height) {\n                    const resizeOptions = {\n                        ui: true,\n                        direction: data.direction,\n                        relativeDirection: data.relativeDirection,\n                        trueDirection: data.trueDirection,\n                        minWidth: options.minWidth,\n                        minHeight: options.minHeight,\n                        maxWidth: options.maxWidth,\n                        maxHeight: options.maxHeight,\n                        preserveAspectRatio: options.preserveAspectRatio === true,\n                    };\n                    node.resize(width, height, resizeOptions);\n                    this.notify('node:resizing', evt, view);\n                }\n            }\n            else if (data.action === 'rotating') {\n                data = data;\n                if (!data.rotated) {\n                    if (view) {\n                        view.addClass('node-rotating');\n                        this.notify('node:rotate', evt, view);\n                    }\n                    data.rotated = true;\n                }\n                const currentAngle = node.getAngle();\n                const theta = data.start - Point.create(pos).theta(data.center);\n                let target = data.angle + theta;\n                if (options.rotateGrid) {\n                    target = GeometryUtil.snapToGrid(target, options.rotateGrid);\n                }\n                target = Angle.normalize(target);\n                if (currentAngle !== target) {\n                    node.rotate(target, { absolute: true });\n                    this.notify('node:rotating', evt, view);\n                }\n            }\n        }\n    }\n    onMouseUp(evt) {\n        const data = this.getEventData(evt);\n        if (data.action) {\n            this.stopAction(evt);\n            this.model.stopBatch(data.action === 'resizing' ? 'resize' : 'rotate', {\n                cid: this.cid,\n            });\n        }\n    }\n    startHandle(handle) {\n        this.handle = handle || null;\n        Dom.addClass(this.container, `${this.containerClassName}-active`);\n        if (handle) {\n            Dom.addClass(handle, `${this.containerClassName}-active-handle`);\n            const pos = handle.getAttribute('data-position');\n            if (pos) {\n                const dir = Private.DIRECTIONS[Private.POSITIONS.indexOf(pos)];\n                Dom.addClass(this.container, `${this.containerClassName}-cursor-${dir}`);\n            }\n        }\n    }\n    stopHandle() {\n        Dom.removeClass(this.container, `${this.containerClassName}-active`);\n        if (this.handle) {\n            Dom.removeClass(this.handle, `${this.containerClassName}-active-handle`);\n            const pos = this.handle.getAttribute('data-position');\n            if (pos) {\n                const dir = Private.DIRECTIONS[Private.POSITIONS.indexOf(pos)];\n                Dom.removeClass(this.container, `${this.containerClassName}-cursor-${dir}`);\n            }\n            this.handle = null;\n        }\n    }\n    startAction(evt) {\n        this.startHandle(evt.target);\n        this.graph.view.undelegateEvents();\n        this.delegateDocumentEvents(Private.documentEvents, evt.data);\n    }\n    stopAction(evt) {\n        this.stopHandle();\n        this.undelegateDocumentEvents();\n        this.graph.view.delegateEvents();\n        const view = this.graph.findViewByCell(this.node);\n        const data = this.getEventData(evt);\n        if (view) {\n            view.removeClass(`node-${data.action}`);\n            if (data.action === 'resizing' && data.resized) {\n                this.notify('node:resized', evt, view);\n            }\n            else if (data.action === 'rotating' && data.rotated) {\n                this.notify('node:rotated', evt, view);\n            }\n        }\n    }\n    notify(name, evt, view, args = {}) {\n        if (view) {\n            const graph = view.graph;\n            const e = graph.view.normalizeEvent(evt);\n            const localPoint = graph.snapToGrid(e.clientX, e.clientY);\n            this.trigger(name, Object.assign({ e,\n                view, node: view.cell, cell: view.cell, x: localPoint.x, y: localPoint.y }, args));\n        }\n    }\n    dispose() {\n        this.remove();\n        this.off();\n    }\n}\n__decorate([\n    View.dispose()\n], TransformImpl.prototype, \"dispose\", null);\nvar Private;\n(function (Private) {\n    Private.NODE_CLS = 'has-widget-transform';\n    Private.DIRECTIONS = ['nw', 'n', 'ne', 'e', 'se', 's', 'sw', 'w'];\n    Private.POSITIONS = [\n        'top-left',\n        'top',\n        'top-right',\n        'right',\n        'bottom-right',\n        'bottom',\n        'bottom-left',\n        'left',\n    ];\n    Private.documentEvents = {\n        mousemove: 'onMouseMove',\n        touchmove: 'onMouseMove',\n        mouseup: 'onMouseUp',\n        touchend: 'onMouseUp',\n    };\n    Private.defaultOptions = {\n        minWidth: 0,\n        minHeight: 0,\n        maxWidth: Infinity,\n        maxHeight: Infinity,\n        rotateGrid: 15,\n        rotatable: true,\n        preserveAspectRatio: false,\n        orthogonalResizing: true,\n        restrictedResizing: false,\n        autoScrollOnResizing: true,\n        allowReverse: true,\n    };\n})(Private || (Private = {}));\n//# sourceMappingURL=transform.js.map","/* eslint-disable */\n/**\n * Auto generated file, do not modify it!\n */\nexport const content = `.x6-widget-transform {\n  position: absolute;\n  box-sizing: content-box !important;\n  margin: -5px 0 0 -5px;\n  padding: 4px;\n  border: 1px dashed #000;\n  border-radius: 5px;\n  user-select: none;\n  pointer-events: none;\n}\n.x6-widget-transform > div {\n  position: absolute;\n  box-sizing: border-box;\n  background-color: #fff;\n  border: 1px solid #000;\n  transition: background-color 0.2s;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-transform > div:hover {\n  background-color: #d3d3d3;\n}\n.x6-widget-transform-cursor-n {\n  cursor: n-resize;\n}\n.x6-widget-transform-cursor-s {\n  cursor: s-resize;\n}\n.x6-widget-transform-cursor-e {\n  cursor: e-resize;\n}\n.x6-widget-transform-cursor-w {\n  cursor: w-resize;\n}\n.x6-widget-transform-cursor-ne {\n  cursor: ne-resize;\n}\n.x6-widget-transform-cursor-nw {\n  cursor: nw-resize;\n}\n.x6-widget-transform-cursor-se {\n  cursor: se-resize;\n}\n.x6-widget-transform-cursor-sw {\n  cursor: sw-resize;\n}\n.x6-widget-transform-resize {\n  width: 10px;\n  height: 10px;\n  border-radius: 6px;\n}\n.x6-widget-transform-resize[data-position='top-left'] {\n  top: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='top-right'] {\n  top: -5px;\n  right: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-left'] {\n  bottom: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-right'] {\n  right: -5px;\n  bottom: -5px;\n}\n.x6-widget-transform-resize[data-position='top'] {\n  top: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom'] {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='left'] {\n  top: 50%;\n  left: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform-resize[data-position='right'] {\n  top: 50%;\n  right: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {\n  display: none;\n}\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {\n  display: none;\n}\n.x6-widget-transform.no-resize .x6-widget-transform-resize {\n  display: none;\n}\n.x6-widget-transform-rotate {\n  top: -20px;\n  left: -20px;\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  cursor: crosshair;\n}\n.x6-widget-transform.no-rotate .x6-widget-transform-rotate {\n  display: none;\n}\n.x6-widget-transform-active {\n  border-color: transparent;\n  pointer-events: all;\n}\n.x6-widget-transform-active > div {\n  display: none;\n}\n.x6-widget-transform-active > .x6-widget-transform-active-handle {\n  display: block;\n  background-color: #808080;\n}\n`;\n//# sourceMappingURL=raw.js.map","import { Graph } from '@antv/x6';\nGraph.prototype.createTransformWidget = function (node) {\n    const transform = this.getPlugin('transform');\n    if (transform) {\n        transform.createWidget(node);\n    }\n    return this;\n};\nGraph.prototype.clearTransformWidgets = function () {\n    const transform = this.getPlugin('transform');\n    if (transform) {\n        transform.clearWidgets();\n    }\n    return this;\n};\n//# sourceMappingURL=api.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Basecoat, CssLoader } from '@antv/x6';\nimport { TransformImpl } from './transform';\nimport { content } from './style/raw';\nimport './api';\nexport class Transform extends Basecoat {\n    constructor(options = {}) {\n        super();\n        this.name = 'transform';\n        this.widgets = new Map();\n        this.disabled = false;\n        this.options = options;\n        CssLoader.ensure(this.name, content);\n    }\n    init(graph) {\n        this.graph = graph;\n        if (this.disabled) {\n            return;\n        }\n        this.startListening();\n    }\n    startListening() {\n        this.graph.on('node:click', this.onNodeClick, this);\n        this.graph.on('blank:mousedown', this.onBlankMouseDown, this);\n    }\n    stopListening() {\n        this.graph.off('node:click', this.onNodeClick, this);\n        this.graph.off('blank:mousedown', this.onBlankMouseDown, this);\n    }\n    enable() {\n        if (this.disabled) {\n            this.disabled = false;\n            this.startListening();\n        }\n    }\n    disable() {\n        if (!this.disabled) {\n            this.disabled = true;\n            this.stopListening();\n        }\n    }\n    isEnabled() {\n        return !this.disabled;\n    }\n    createWidget(node) {\n        this.clearWidgets();\n        const widget = this.createTransform(node);\n        if (widget) {\n            this.widgets.set(node, widget);\n            widget.on('*', (name, args) => {\n                this.trigger(name, args);\n                this.graph.trigger(name, args);\n            });\n        }\n    }\n    onNodeClick({ node }) {\n        this.createWidget(node);\n    }\n    onBlankMouseDown() {\n        this.clearWidgets();\n    }\n    createTransform(node) {\n        const options = this.getTransformOptions(node);\n        if (options.resizable || options.rotatable) {\n            return new TransformImpl(options, node, this.graph);\n        }\n        return null;\n    }\n    getTransformOptions(node) {\n        if (!this.options.resizing) {\n            this.options.resizing = {\n                enabled: false,\n            };\n        }\n        if (!this.options.rotating) {\n            this.options.rotating = {\n                enabled: false,\n            };\n        }\n        if (typeof this.options.resizing === 'boolean') {\n            this.options.resizing = {\n                enabled: this.options.resizing,\n            };\n        }\n        if (typeof this.options.rotating === 'boolean') {\n            this.options.rotating = {\n                enabled: this.options.rotating,\n            };\n        }\n        const resizing = Transform.parseOptionGroup(this.graph, node, this.options.resizing);\n        const rotating = Transform.parseOptionGroup(this.graph, node, this.options.rotating);\n        const options = {\n            resizable: !!resizing.enabled,\n            minWidth: resizing.minWidth || 0,\n            maxWidth: resizing.maxWidth || Number.MAX_SAFE_INTEGER,\n            minHeight: resizing.minHeight || 0,\n            maxHeight: resizing.maxHeight || Number.MAX_SAFE_INTEGER,\n            orthogonalResizing: typeof resizing.orthogonal === 'boolean' ? resizing.orthogonal : true,\n            restrictedResizing: !!resizing.restrict,\n            autoScrollOnResizing: typeof resizing.autoScroll === 'boolean' ? resizing.autoScroll : true,\n            preserveAspectRatio: !!resizing.preserveAspectRatio,\n            allowReverse: typeof resizing.allowReverse === 'boolean'\n                ? resizing.allowReverse\n                : true,\n            rotatable: !!rotating.enabled,\n            rotateGrid: rotating.grid || 15,\n        };\n        return options;\n    }\n    clearWidgets() {\n        this.widgets.forEach((widget, node) => {\n            if (this.graph.getCellById(node.id)) {\n                widget.dispose();\n            }\n        });\n        this.widgets.clear();\n    }\n    dispose() {\n        this.clearWidgets();\n        this.stopListening();\n        this.off();\n        CssLoader.clean(this.name);\n    }\n}\n__decorate([\n    Basecoat.dispose()\n], Transform.prototype, \"dispose\", null);\n(function (Transform) {\n    function parseOptionGroup(graph, arg, options) {\n        const result = {};\n        Object.keys(options || {}).forEach((key) => {\n            const val = options[key];\n            result[key] = typeof val === 'function' ? val.call(graph, arg) : val;\n        });\n        return result;\n    }\n    Transform.parseOptionGroup = parseOptionGroup;\n})(Transform || (Transform = {}));\n//# sourceMappingURL=index.js.map","export const isString = (val) => typeof val === 'string';\nconst cacheStringFunction = (fn) => {\n    const cache = Object.create(null);\n    return ((str) => {\n        const hit = cache[str];\n        return hit || (cache[str] = fn(str));\n    });\n};\nconst camelizeRE = /-(\\w)/g;\nexport const camelize = cacheStringFunction((str) => {\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''));\n});\n// export const capitalize = cacheStringFunction(\n//   (str: string) => str.charAt(0).toUpperCase() + str.slice(1),\n// )\n//# sourceMappingURL=string.js.map","export const isArray = Array.isArray;\n//# sourceMappingURL=array.js.map","export const isNumber = (val) => typeof val === 'number';\nexport const isNaN = (num) => Number.isNaN(Number(num));\nexport const toNumber = (val) => {\n    const n = parseFloat(val);\n    return isNaN(n) ? val : n;\n};\n//# sourceMappingURL=number.js.map","export const isObject = (val) => val !== null && typeof val === 'object';\nexport const clone = (target) => {\n    if (target === null) {\n        return target;\n    }\n    if (target instanceof Date) {\n        return new Date(target.getTime());\n    }\n    if (target instanceof Array) {\n        const cp = [];\n        target.forEach((v) => {\n            cp.push(v);\n        });\n        return cp.map((n) => clone(n));\n    }\n    if (typeof target === 'object' && Object.keys(target).length) {\n        const cp = Object.assign({}, target);\n        Object.keys(cp).forEach((k) => {\n            cp[k] = clone(cp[k]);\n        });\n        return cp;\n    }\n    return target;\n};\n//# sourceMappingURL=object.js.map","import { isArray } from './array';\nimport { isNumber } from './number';\nimport { isObject } from './object';\nexport const getEdgeTerminal = (edge, type) => {\n    const terminal = edge[type];\n    if (isObject(terminal)) {\n        return terminal.cell;\n    }\n    return terminal;\n};\nexport const getDegree = (n, nodeIdxMap, edges) => {\n    const degrees = [];\n    for (let i = 0; i < n; i++) {\n        degrees[i] = {\n            in: 0,\n            out: 0,\n            all: 0\n        };\n    }\n    if (!edges)\n        return degrees;\n    edges.forEach((e) => {\n        const source = getEdgeTerminal(e, 'source');\n        const target = getEdgeTerminal(e, 'target');\n        if (source && degrees[nodeIdxMap[source]]) {\n            degrees[nodeIdxMap[source]].out += 1;\n            degrees[nodeIdxMap[source]].all += 1;\n        }\n        if (target && degrees[nodeIdxMap[target]]) {\n            degrees[nodeIdxMap[target]].in += 1;\n            degrees[nodeIdxMap[target]].all += 1;\n        }\n    });\n    return degrees;\n};\nexport const getDegreeMap = (nodes, edges) => {\n    const degreesMap = {};\n    nodes.forEach((node) => {\n        degreesMap[node.id] = {\n            in: 0,\n            out: 0,\n            all: 0\n        };\n    });\n    if (!edges)\n        return degreesMap;\n    edges.forEach((e) => {\n        const source = getEdgeTerminal(e, 'source');\n        const target = getEdgeTerminal(e, 'target');\n        if (source) {\n            degreesMap[source].out += 1;\n            degreesMap[source].all += 1;\n        }\n        if (target) {\n            degreesMap[target].in += 1;\n            degreesMap[target].all += 1;\n        }\n    });\n    return degreesMap;\n};\nexport const floydWarshall = (adjMatrix) => {\n    // initialize\n    const dist = [];\n    const size = adjMatrix.length;\n    for (let i = 0; i < size; i += 1) {\n        dist[i] = [];\n        for (let j = 0; j < size; j += 1) {\n            if (i === j) {\n                dist[i][j] = 0;\n            }\n            else if (adjMatrix[i][j] === 0 || !adjMatrix[i][j]) {\n                dist[i][j] = Infinity;\n            }\n            else {\n                dist[i][j] = adjMatrix[i][j];\n            }\n        }\n    }\n    // floyd\n    for (let k = 0; k < size; k += 1) {\n        for (let i = 0; i < size; i += 1) {\n            for (let j = 0; j < size; j += 1) {\n                if (dist[i][j] > dist[i][k] + dist[k][j]) {\n                    dist[i][j] = dist[i][k] + dist[k][j];\n                }\n            }\n        }\n    }\n    return dist;\n};\nexport const getAdjMatrix = (data, directed) => {\n    const { nodes, edges } = data;\n    const matrix = [];\n    // map node with index in data.nodes\n    const nodeMap = {};\n    if (!nodes) {\n        throw new Error('invalid nodes data!');\n    }\n    if (nodes) {\n        nodes.forEach((node, i) => {\n            nodeMap[node.id] = i;\n            const row = [];\n            matrix.push(row);\n        });\n    }\n    edges === null || edges === void 0 ? void 0 : edges.forEach((e) => {\n        const source = getEdgeTerminal(e, 'source');\n        const target = getEdgeTerminal(e, 'target');\n        const sIndex = nodeMap[source];\n        const tIndex = nodeMap[target];\n        if (sIndex === undefined || tIndex === undefined)\n            return;\n        matrix[sIndex][tIndex] = 1;\n        if (!directed) {\n            matrix[tIndex][sIndex] = 1;\n        }\n    });\n    return matrix;\n};\n/**\n * scale matrix\n * @param matrix [ [], [], [] ]\n * @param ratio\n */\nexport const scaleMatrix = (matrix, ratio) => {\n    const result = [];\n    matrix.forEach((row) => {\n        const newRow = [];\n        row.forEach((v) => {\n            newRow.push(v * ratio);\n        });\n        result.push(newRow);\n    });\n    return result;\n};\n/**\n * depth first traverse, from leaves to root, children in inverse order\n *  if the fn returns false, terminate the traverse\n */\nconst traverseUp = (data, fn) => {\n    if (data && data.children) {\n        for (let i = data.children.length - 1; i >= 0; i--) {\n            if (!traverseUp(data.children[i], fn))\n                return;\n        }\n    }\n    if (!fn(data)) {\n        return false;\n    }\n    return true;\n};\n/**\n * depth first traverse, from leaves to root, children in inverse order\n * if the fn returns false, terminate the traverse\n */\nexport const traverseTreeUp = (data, fn) => {\n    if (typeof fn !== 'function') {\n        return;\n    }\n    traverseUp(data, fn);\n};\n/**\n * calculate the bounding box for the nodes according to their x, y, and size\n * @param nodes nodes in the layout\n * @returns\n */\nexport const getLayoutBBox = (nodes) => {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    nodes.forEach((node) => {\n        let size = node.size;\n        if (isArray(size)) {\n            if (size.length === 1)\n                size = [size[0], size[0]];\n        }\n        else if (isNumber(size)) {\n            size = [size, size];\n        }\n        else if (size === undefined || isNaN(size)) {\n            size = [30, 30];\n        }\n        const halfSize = [size[0] / 2, size[1] / 2];\n        const left = node.x - halfSize[0];\n        const right = node.x + halfSize[0];\n        const top = node.y - halfSize[1];\n        const bottom = node.y + halfSize[1];\n        if (minX > left)\n            minX = left;\n        if (minY > top)\n            minY = top;\n        if (maxX < right)\n            maxX = right;\n        if (maxY < bottom)\n            maxY = bottom;\n    });\n    return { minX, minY, maxX, maxY };\n};\n/**\n * 获取节点集合的平均位置信息\n * @param nodes 节点集合\n * @returns 平局内置\n */\nexport const getAvgNodePosition = (nodes) => {\n    const totalNodes = { x: 0, y: 0 };\n    nodes.forEach((node) => {\n        totalNodes.x += node.x || 0;\n        totalNodes.y += node.y || 0;\n    });\n    // 获取均值向量\n    const length = nodes.length || 1;\n    return {\n        x: totalNodes.x / length,\n        y: totalNodes.y / length,\n    };\n};\n// 找出指定节点关联的边的起点或终点\nconst getCoreNode = (type, node, edges) => {\n    var _a, _b;\n    if (type === 'source') {\n        return (((_a = edges === null || edges === void 0 ? void 0 : edges.find((edge) => edge.target === node.id)) === null || _a === void 0 ? void 0 : _a.source) || {});\n    }\n    return (((_b = edges === null || edges === void 0 ? void 0 : edges.find((edge) => edge.source === node.id)) === null || _b === void 0 ? void 0 : _b.target) || {});\n};\n// 找出指定节点为起点或终点的所有一度叶子节点\nconst getRelativeNodeIds = (type, coreNode, edges) => {\n    let relativeNodes = [];\n    switch (type) {\n        case 'source':\n            relativeNodes = edges === null || edges === void 0 ? void 0 : edges.filter((edge) => edge.source === coreNode.id).map((edge) => edge.target);\n            break;\n        case 'target':\n            relativeNodes = edges === null || edges === void 0 ? void 0 : edges.filter((edge) => edge.target === coreNode.id).map((edge) => edge.source);\n            break;\n        case 'both':\n            relativeNodes = edges === null || edges === void 0 ? void 0 : edges.filter((edge) => edge.source === coreNode.id).map((edge) => edge.target).concat(edges === null || edges === void 0 ? void 0 : edges.filter((edge) => edge.target === coreNode.id).map((edge) => edge.source));\n            break;\n        default:\n            break;\n    }\n    // 去重\n    const set = new Set(relativeNodes);\n    return Array.from(set);\n};\n// 找出同类型的节点\nconst getSameTypeNodes = (type, nodeClusterBy, node, relativeNodes, degreesMap) => {\n    // @ts-ignore\n    const typeName = node[nodeClusterBy] || '';\n    // @ts-ignore\n    let sameTypeNodes = (relativeNodes === null || relativeNodes === void 0 ? void 0 : relativeNodes.filter((item) => item[nodeClusterBy] === typeName)) || [];\n    if (type === 'leaf') {\n        sameTypeNodes = sameTypeNodes.filter((node) => { var _a, _b; return ((_a = degreesMap[node.id]) === null || _a === void 0 ? void 0 : _a.in) === 0 || ((_b = degreesMap[node.id]) === null || _b === void 0 ? void 0 : _b.out) === 0; });\n    }\n    return sameTypeNodes;\n};\n// 找出与指定节点关联的边的起点或终点出发的所有一度叶子节点\nexport const getCoreNodeAndRelativeLeafNodes = (type, node, edges, nodeClusterBy, degreesMap, nodeMap) => {\n    const { in: inDegree, out: outDegree } = degreesMap[node.id];\n    let coreNode = node;\n    let relativeLeafNodes = [];\n    if (inDegree === 0) {\n        // 如果为没有出边的叶子节点，则找出与它关联的边的起点出发的所有一度节点\n        coreNode = getCoreNode('source', node, edges);\n        relativeLeafNodes = getRelativeNodeIds('both', coreNode, edges).map((nodeId) => nodeMap[nodeId]);\n    }\n    else if (outDegree === 0) {\n        // 如果为没有入边边的叶子节点，则找出与它关联的边的起点出发的所有一度节点\n        coreNode = getCoreNode('target', node, edges);\n        relativeLeafNodes = getRelativeNodeIds('both', coreNode, edges).map((nodeId) => nodeMap[nodeId]);\n    }\n    relativeLeafNodes = relativeLeafNodes.filter((node) => degreesMap[node.id] && (degreesMap[node.id].in === 0 || degreesMap[node.id].out === 0));\n    const sameTypeLeafNodes = getSameTypeNodes(type, nodeClusterBy, node, relativeLeafNodes, degreesMap);\n    return { coreNode, relativeLeafNodes, sameTypeLeafNodes };\n};\n//# sourceMappingURL=math.js.map","import { isArray, isObject } from \".\";\nimport { isNumber } from \"./number\";\nexport const isFunction = (val) => typeof val === 'function';\nexport const getFunc = (value, defaultValue, func) => {\n    let resultFunc;\n    if (func) {\n        resultFunc = func;\n    }\n    else if (isNumber(value)) {\n        resultFunc = () => value;\n    }\n    else {\n        resultFunc = () => defaultValue;\n    }\n    return resultFunc;\n};\nexport const getFuncByUnknownType = (defaultValue, value, resultIsNumber = true) => {\n    if (!value && value !== 0) {\n        return (d) => {\n            if (d.size) {\n                if (isArray(d.size))\n                    return d.size[0] > d.size[1] ? d.size[0] : d.size[1];\n                if (isObject(d.size))\n                    return d.size.width > d.size.height ? d.size.width : d.size.height;\n                return d.size;\n            }\n            return defaultValue;\n        };\n    }\n    if (isFunction(value)) {\n        return value;\n    }\n    if (isNumber(value)) {\n        return () => value;\n    }\n    if (isArray(value)) {\n        return () => {\n            if (resultIsNumber) {\n                const max = Math.max(...value);\n                return isNaN(max) ? defaultValue : max;\n            }\n            return value;\n        };\n    }\n    if (isObject(value)) {\n        return () => {\n            if (resultIsNumber) {\n                const max = Math.max(value.width, value.height);\n                return isNaN(max) ? defaultValue : max;\n            }\n            return [value.width, value.height];\n        };\n    }\n    return () => defaultValue;\n};\n//# sourceMappingURL=function.js.map","import { Base } from '../layout/base';\nimport { isObject } from '../util';\nconst map = new Map();\nexport const registerLayout = (name, layoutOverride) => {\n    if (map.get(name)) {\n        console.warn(`The layout with the name ${name} exists already, it will be overridden`);\n    }\n    if (isObject(layoutOverride)) {\n        // tslint:disable-next-line: max-classes-per-file\n        class GLayout extends Base {\n            constructor(cfg) {\n                var _a;\n                super();\n                const self = this;\n                const props = {};\n                const defaultCfg = Object.assign({}, self.getDefaultCfg(), ((_a = layoutOverride.getDefaultCfg) === null || _a === void 0 ? void 0 : _a.call(layoutOverride)) || {});\n                Object.assign(props, defaultCfg, layoutOverride, cfg);\n                Object.keys(props).forEach((key) => {\n                    const value = props[key];\n                    self[key] = value;\n                });\n            }\n        }\n        map.set(name, GLayout);\n    }\n    else {\n        map.set(name, layoutOverride);\n    }\n    return map.get(name);\n};\nexport const unRegisterLayout = (name) => {\n    if (map.has(name)) {\n        map.delete(name);\n    }\n};\nexport const getLayoutByName = (name) => {\n    if (map.has(name)) {\n        return map.get(name);\n    }\n    return null;\n};\n//# sourceMappingURL=index.js.map","export class Base {\n    constructor() {\n        this.nodes = [];\n        this.edges = [];\n        this.combos = [];\n        this.comboEdges = [];\n        this.hiddenNodes = [];\n        this.hiddenEdges = [];\n        this.hiddenCombos = [];\n        // temp edges e.g. the edge generated for releated collapsed combo\n        this.vedges = [];\n        this.positions = [];\n        this.destroyed = false;\n        this.onLayoutEnd = () => { };\n    }\n    layout(data) {\n        this.init(data);\n        return this.execute(true);\n    }\n    init(data) {\n        this.nodes = data.nodes || [];\n        this.edges = data.edges || [];\n        this.combos = data.combos || [];\n        this.comboEdges = data.comboEdges || [];\n        this.hiddenNodes = data.hiddenNodes || [];\n        this.hiddenEdges = data.hiddenEdges || [];\n        this.hiddenCombos = data.hiddenCombos || [];\n        this.vedges = data.vedges || [];\n    }\n    execute(reloadData) { }\n    executeWithWorker() { }\n    getDefaultCfg() {\n        return {};\n    }\n    updateCfg(cfg) {\n        if (cfg) {\n            Object.assign(this, cfg);\n        }\n    }\n    getType() {\n        return 'base';\n    }\n    destroy() {\n        this.nodes = null;\n        this.edges = null;\n        this.combos = null;\n        this.positions = null;\n        this.destroyed = true;\n    }\n}\n//# sourceMappingURL=base.js.map","export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n","export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries don’t change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n      i = (y < y0) << 1 | (x < x0);\n      parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z, y1 = y0 + z; break;\n        case 1: x0 = x1 - z, y1 = y0 + z; break;\n        case 2: x1 = x0 + z, y0 = y1 - z; break;\n        case 3: x0 = x1 - z, y0 = y1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n","export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n","export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n","export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant can’t contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isn’t necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n","export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n","export default function() {\n  return this._root;\n}\n","export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n","import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n","export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n","export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n","import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\nimport lcg from \"./lcg.js\";\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\n\nexport default function(nodes) {\n  var simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\"),\n      random = lcg();\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function(force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= velocityDecay;\n        else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(0.5 + i), angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, random);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    randomSource: function(_) {\n      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function(x, y, radius) {\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n\n      if (radius == null) radius = Infinity;\n      else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n","const filterOutLinks = (k, v) => {\n    if (k !== \"next\" && k !== \"prev\") {\n        return v;\n    }\n};\nconst unlink = (entry) => {\n    entry.prev.next = entry.next;\n    entry.next.prev = entry.prev;\n    delete entry.next;\n    delete entry.prev;\n};\nexport default class List {\n    constructor() {\n        const shortcut = {};\n        shortcut.prev = shortcut;\n        shortcut.next = shortcut.prev;\n        this.shortcut = shortcut;\n    }\n    dequeue() {\n        const shortcut = this.shortcut;\n        const entry = shortcut.prev;\n        if (entry && entry !== shortcut) {\n            unlink(entry);\n            return entry;\n        }\n    }\n    enqueue(entry) {\n        const shortcut = this.shortcut;\n        if (entry.prev && entry.next) {\n            unlink(entry);\n        }\n        entry.next = shortcut.next;\n        shortcut.next.prev = entry;\n        shortcut.next = entry;\n        entry.prev = shortcut;\n    }\n    toString() {\n        const strs = [];\n        const sentinel = this.shortcut;\n        let curr = sentinel.prev;\n        while (curr !== sentinel) {\n            strs.push(JSON.stringify(curr, filterOutLinks));\n            curr = curr === null || curr === void 0 ? void 0 : curr.prev;\n        }\n        return `[${strs.join(\", \")}]`;\n    }\n}\n//# sourceMappingURL=list.js.map","export var GraphEnum;\n\n(function (GraphEnum) {\n  GraphEnum[\"DEFAULT_EDGE_NAME\"] = \"\\0\";\n  GraphEnum[\"GRAPH_NODE\"] = \"\\0\";\n  GraphEnum[\"EDGE_KEY_DELIM\"] = \"\\x01\";\n})(GraphEnum || (GraphEnum = {}));","import { GraphEnum } from './Graph/enum';\n/**\n * @description add one to key's value in map\n * @description.zh-CN 在 map 中 key 的值加 1\n * @param map\n * @param key\n */\n\nexport function incrementOrInitEntry(map, key) {\n  var val = map.get(key) || 0;\n  map.set(key, val + 1);\n}\n/**\n * @description minus one from key's value in map, is value is 0, delete the key\n * @description.zh-CN 在 map 中 key 的值减 1，如果值为 0，则删除 key\n */\n\nexport function decrementOrRemoveEntry(map, key) {\n  var val = map.get(key);\n\n  if (val !== undefined) {\n    val = val - 1;\n\n    if (val > 0) {\n      map.set(key, val);\n    } else {\n      map.delete(key);\n    }\n  }\n}\n/**\n * @description convert edge to string id\n * @description.zh-CN 转换边为字符串 id\n */\n\nexport function edgeArgsToId(isDirected, v_, w_, name) {\n  var v = String(v_);\n  var w = String(w_);\n\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n\n  return v + GraphEnum.EDGE_KEY_DELIM + w + GraphEnum.EDGE_KEY_DELIM + (name === undefined ? GraphEnum.DEFAULT_EDGE_NAME : name);\n}\n/**\n * @description convert edge arguments to edge object\n * @description.zh-CN 转换边参数为边对象\n */\n\nexport function edgeArgsToObj(isDirected, v, w, name) {\n  var strV = String(v);\n  var strW = String(w);\n  var edgeObj = {\n    v: v,\n    w: w\n  };\n\n  if (!isDirected && strV > strW) {\n    var tmp = edgeObj.v;\n    edgeObj.v = edgeObj.w;\n    edgeObj.w = tmp;\n  }\n\n  if (name !== undefined) {\n    edgeObj.name = name;\n  }\n\n  return edgeObj;\n}\n/**\n * @description convert edge object to string id\n * @description.zh-CN 转换边对象为字符串 id\n */\n\nexport function edgeObjToId(isDirected, edgeObj) {\n  return edgeArgsToId(isDirected, edgeObj.v, edgeObj.w, edgeObj.name);\n}\nexport function isFunction(obj) {\n  return typeof obj === 'function';\n}","import Graph from '.';\n/**\n * @description Convert a graph's node to JSON.\n * @description.zh-CN 转换图的节点为 JSON。\n * @param graph\n * @returns\n */\n\nvar nodeToJSON = function nodeToJSON(graph) {\n  return graph.nodes().map(function (n) {\n    var value = graph.node(n);\n    var parent = graph.parent(n);\n    var node = {\n      id: n,\n      value: value,\n      parent: parent\n    };\n\n    if (node.value === undefined) {\n      delete node.value;\n    }\n\n    if (node.parent === undefined) {\n      delete node.parent;\n    }\n\n    return node;\n  });\n};\n/**\n * @description Convert all graph's edges to JSON.\n * @description.zh-CN 转换图的所有边为 JSON。\n * @param graph\n * @returns\n */\n\n\nvar edgeToJSON = function edgeToJSON(graph) {\n  return graph.edges().map(function (edge) {\n    var value = graph.edge(edge);\n    var e = {\n      v: edge.v,\n      w: edge.w,\n      value: value,\n      name: edge.name\n    };\n\n    if (e.name === undefined) {\n      delete e.name;\n    }\n\n    if (e.value === undefined) {\n      delete e.value;\n    }\n\n    return e;\n  });\n};\n/**\n * @description Convert a graph to JSON.\n * @description.zh-CN 转换图为 JSON。\n * @param graph\n * @returns\n */\n\n\nexport var write = function write(graph) {\n  var json = {\n    options: {\n      directed: graph.isDirected(),\n      multigraph: graph.isMultigraph(),\n      compound: graph.isCompound()\n    },\n    nodes: nodeToJSON(graph),\n    edges: edgeToJSON(graph),\n    value: graph.graph()\n  };\n\n  if (json.value === undefined) {\n    delete json.value;\n  }\n\n  return json;\n};\n/**\n * @description read a graph from JSON.\n * @description.zh-CN 从 JSON 读取图。\n * @param json\n * @returns\n */\n\nexport var read = function read(json) {\n  var graph = new Graph(json.options);\n\n  if (json.value !== undefined) {\n    graph.setGraph(json.value);\n  }\n\n  json.nodes.forEach(function (entry) {\n    graph.setNode(entry.id, entry.value);\n\n    if (entry.parent) {\n      graph.setParent(entry.id, entry.parent);\n    }\n  });\n  json.edges.forEach(function (entry) {\n    graph.setEdge(entry.v, entry.w, entry.value, entry.name);\n  });\n  return graph;\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nimport { edgeArgsToId, isFunction } from '../util';\nimport { GraphEnum } from './enum';\nimport { decrementOrRemoveEntry, edgeArgsToObj, edgeObjToId, incrementOrInitEntry } from '../util';\nimport { read, write } from './toJSON';\nvar defaultOption = {\n  compound: false,\n  multigraph: false,\n  directed: true\n};\n\nvar Graph = /*#__PURE__*/function () {\n  // Graph option or basic props\n\n  /**\n   * @description Label for this graph itself\n   * @description.zh-CN 图本身的标签（label）\n   * @default undefined\n   */\n\n  /**\n   * @description Number of nodes in the graph\n   * @description.zh-CN 节点的数量\n   * @default 0\n   */\n\n  /**\n   * @description Number of edges in the graph\n   * @description.zh-CN 节点的数量\n   * @default 0\n   */\n\n  /**\n   * @description return node label with its id\n   * @description.zh-CN 返回节点的默认的标签\n   */\n\n  /**\n   * @description return edge label with its id\n   * @description.zh-CN 返回边的默认的标签\n   */\n  function Graph() {\n    var _this = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Graph);\n\n    this.directed = true;\n    this.multigraph = false;\n    this.compound = false;\n    this.GRAPH_NODE = GraphEnum.GRAPH_NODE;\n    this.label = void 0;\n    this.nodeCountNum = 0;\n    this.edgeCountNum = 0;\n\n    this.defaultNodeLabelFn = function () {\n      return undefined;\n    };\n\n    this.defaultEdgeLabelFn = function () {\n      return undefined;\n    };\n\n    this.parentMap = void 0;\n    this.childrenMap = void 0;\n    this.nodesLabelMap = new Map();\n    this.inEdgesMap = new Map();\n    this.outEdgesMap = new Map();\n    this.predecessorsMap = new Map();\n    this.successorsMap = new Map();\n    this.edgesMap = new Map();\n    this.edgesLabelsMap = new Map();\n\n    this.isDirected = function () {\n      return _this.directed;\n    };\n\n    this.isMultigraph = function () {\n      return _this.multigraph;\n    };\n\n    this.isCompound = function () {\n      return _this.compound;\n    };\n\n    this.setGraph = function (label) {\n      _this.label = label;\n      return _this;\n    };\n\n    this.graph = function () {\n      return _this.label;\n    };\n\n    this.setDefaultNodeLabel = function (newDefault) {\n      if (isFunction(newDefault)) {\n        _this.defaultNodeLabelFn = newDefault;\n      } else {\n        _this.defaultNodeLabelFn = function () {\n          return newDefault;\n        };\n      }\n\n      return _this;\n    };\n\n    this.nodeCount = function () {\n      return _this.nodeCountNum;\n    };\n\n    this.node = function (n) {\n      return _this.nodesLabelMap.get(n);\n    };\n\n    this.nodes = function () {\n      return Array.from(_this.nodesLabelMap.keys());\n    };\n\n    this.sources = function () {\n      return _this.nodes().filter(function (n) {\n        var _this$inEdgesMap$get;\n\n        return !((_this$inEdgesMap$get = _this.inEdgesMap.get(n)) === null || _this$inEdgesMap$get === void 0 ? void 0 : _this$inEdgesMap$get.size);\n      });\n    };\n\n    this.sinks = function () {\n      return _this.nodes().filter(function (n) {\n        var _this$outEdgesMap$get;\n\n        return !((_this$outEdgesMap$get = _this.outEdgesMap.get(n)) === null || _this$outEdgesMap$get === void 0 ? void 0 : _this$outEdgesMap$get.size);\n      });\n    };\n\n    this.setNodes = function (nodes, value) {\n      nodes.map(function (node) {\n        return _this.setNode(node, value);\n      });\n      return _this;\n    };\n\n    this.hasNode = function (node) {\n      return _this.nodesLabelMap.has(node);\n    };\n\n    this.checkCompound = function () {\n      if (!_this.isCompound()) {\n        throw new Error('Cannot construct parent-children relations in a non-compound graph');\n      }\n    };\n\n    this.parent = function (node) {\n      if (_this.isCompound()) {\n        var _this$parentMap;\n\n        var parent = (_this$parentMap = _this.parentMap) === null || _this$parentMap === void 0 ? void 0 : _this$parentMap.get(node);\n\n        if (parent !== _this.GRAPH_NODE) {\n          return parent;\n        }\n      }\n    };\n\n    this.removeFromParentsChildList = function (node) {\n      var targetParent = _this.parentMap.get(node);\n\n      _this.childrenMap.get(targetParent).delete(node);\n    };\n\n    this.setParent = function (node, parent) {\n      var _this$parentMap2, _this$childrenMap;\n\n      _this.checkCompound();\n\n      var realParent = parent === undefined ? _this.GRAPH_NODE : parent;\n\n      var checkNode = _this.parent(realParent);\n\n      while (checkNode) {\n        if (node === checkNode) {\n          throw new Error('Setting ' + parent + ' as parent of ' + node + ' would create a cycle');\n        }\n\n        checkNode = _this.parent(checkNode);\n      }\n\n      if (parent) {\n        _this.setNode(parent);\n      }\n\n      _this.setNode(node);\n\n      _this.removeFromParentsChildList(node);\n\n      (_this$parentMap2 = _this.parentMap) === null || _this$parentMap2 === void 0 ? void 0 : _this$parentMap2.set(node, realParent);\n\n      var realParentChilren = _this.childrenMap.get(realParent);\n\n      realParentChilren.set(node, true);\n      (_this$childrenMap = _this.childrenMap) === null || _this$childrenMap === void 0 ? void 0 : _this$childrenMap.set(realParent, realParentChilren);\n      return _this;\n    };\n\n    this.children = function (node) {\n      var targetNode = node === undefined ? _this.GRAPH_NODE : node;\n\n      if (_this.isCompound()) {\n        var _this$childrenMap2;\n\n        var target = (_this$childrenMap2 = _this.childrenMap) === null || _this$childrenMap2 === void 0 ? void 0 : _this$childrenMap2.get(targetNode);\n\n        if (target) {\n          return Array.from(target.keys());\n        }\n\n        return undefined;\n      }\n\n      if (targetNode === _this.GRAPH_NODE) {\n        return _this.nodes();\n      }\n\n      if (node && _this.hasNode(node)) {\n        return [];\n      }\n    };\n\n    this.predecessors = function (node) {\n      var preds = _this.predecessorsMap.get(node);\n\n      return preds ? Array.from(preds.keys()) : undefined;\n    };\n\n    this.successors = function (node) {\n      var succs = _this.successorsMap.get(node);\n\n      return succs ? Array.from(succs.keys()) : undefined;\n    };\n\n    this.neighbors = function (node) {\n      var _this$predecessors;\n\n      if (!_this.hasNode(node)) {\n        return undefined;\n      }\n\n      return Array.from(new Set((_this$predecessors = _this.predecessors(node)) === null || _this$predecessors === void 0 ? void 0 : _this$predecessors.concat(_this.successors(node))));\n    };\n\n    this.isLeaf = function (node) {\n      var _this$neighbors;\n\n      if (_this.isDirected()) {\n        var _this$successors;\n\n        return !((_this$successors = _this.successors(node)) === null || _this$successors === void 0 ? void 0 : _this$successors.length);\n      }\n\n      return !((_this$neighbors = _this.neighbors(node)) === null || _this$neighbors === void 0 ? void 0 : _this$neighbors.length);\n    };\n\n    this.filterNodes = function (filter) {\n      var directed = _this.directed,\n          multigraph = _this.multigraph,\n          compound = _this.compound;\n      var copyGraph = new Graph({\n        directed: directed,\n        multigraph: multigraph,\n        compound: compound\n      });\n      copyGraph.setGraph(_this.graph());\n\n      _this.nodes().forEach(function (n) {\n        if (filter(n)) {\n          copyGraph.setNode(n, _this.node(n));\n        }\n      });\n\n      _this.edges().forEach(function (edgeObj) {\n        if (copyGraph.hasNode(edgeObj.v) && copyGraph.hasNode(edgeObj.w)) {\n          copyGraph.setEdgeObj(edgeObj, _this.edge(edgeObj));\n        }\n      });\n\n      if (compound) {\n        var findParent = function findParent(node) {\n          var parent = _this.parent(node);\n\n          while (parent !== undefined && !copyGraph.hasNode(parent)) {\n            parent = _this.parent(parent);\n          }\n\n          return parent;\n        };\n\n        copyGraph.nodes().forEach(function (node) {\n          copyGraph.setParent(node, findParent(node));\n        });\n      }\n\n      return copyGraph;\n    };\n\n    this.setDefaultEdgeLabel = function (newDefault) {\n      if (isFunction(newDefault)) {\n        _this.defaultEdgeLabelFn = newDefault;\n      } else {\n        _this.defaultEdgeLabelFn = function () {\n          return newDefault;\n        };\n      }\n\n      return _this;\n    };\n\n    this.edgeCount = function () {\n      return _this.edgeCountNum;\n    };\n\n    this.setEdgeObj = function (edgeObj, value) {\n      return _this.setEdge(edgeObj.v, edgeObj.w, value, edgeObj.name);\n    };\n\n    this.setPath = function (edges, value) {\n      edges.reduce(function (v, w) {\n        _this.setEdge(v, w, value);\n\n        return w;\n      });\n      return _this;\n    };\n\n    this.edgeFromArgs = function (v, w, name) {\n      return _this.edge({\n        v: v,\n        w: w,\n        name: name\n      });\n    };\n\n    this.edge = function (edgeObj) {\n      return _this.edgesLabelsMap.get(edgeObjToId(_this.isDirected(), edgeObj));\n    };\n\n    this.hasEdge = function (v, w, name) {\n      return _this.edgesLabelsMap.has(edgeObjToId(_this.isDirected(), {\n        v: v,\n        w: w,\n        name: name\n      }));\n    };\n\n    this.removeEdgeObj = function (_ref) {\n      var v = _ref.v,\n          w = _ref.w,\n          name = _ref.name;\n      return _this.removeEdge(v, w, name);\n    };\n\n    this.edges = function () {\n      return Array.from(_this.edgesMap.values());\n    };\n\n    this.inEdges = function (v, u) {\n      var inV = _this.inEdgesMap.get(v);\n\n      if (inV) {\n        return Array.from(inV.values()).filter(function (e) {\n          return !u || e.v === u;\n        });\n      }\n\n      return undefined;\n    };\n\n    this.outEdges = function (w, u) {\n      var outW = _this.outEdgesMap.get(w);\n\n      if (outW) {\n        return Array.from(outW.values()).filter(function (e) {\n          return !u || e.w === u;\n        });\n      }\n\n      return undefined;\n    };\n\n    this.nodeEdges = function (v, w) {\n      var _this$inEdges;\n\n      if (!_this.hasNode(v)) {\n        return undefined;\n      }\n\n      return (_this$inEdges = _this.inEdges(v, w)) === null || _this$inEdges === void 0 ? void 0 : _this$inEdges.concat(_this.outEdges(v, w));\n    };\n\n    this.toJSON = function () {\n      return write(_this);\n    };\n\n    this.nodeInDegree = function (node) {\n      var inEdges = _this.inEdgesMap.get(node);\n\n      if (inEdges) {\n        return inEdges.size;\n      }\n\n      return 0;\n    };\n\n    this.nodeOutDegree = function (node) {\n      var outEdges = _this.outEdgesMap.get(node);\n\n      if (outEdges) {\n        return outEdges.size;\n      }\n\n      return 0;\n    };\n\n    this.nodeDegree = function (node) {\n      return _this.nodeInDegree(node) + _this.nodeOutDegree(node);\n    };\n\n    this.source = function (edge) {\n      return edge.v;\n    };\n\n    this.target = function (edge) {\n      return edge.w;\n    };\n\n    var resultOptions = _objectSpread(_objectSpread({}, defaultOption), options);\n\n    this.compound = resultOptions.compound;\n    this.directed = resultOptions.directed;\n    this.multigraph = resultOptions.multigraph;\n\n    if (this.compound) {\n      this.parentMap = new Map();\n      this.childrenMap = new Map();\n    }\n  } // Map for graph\n\n  /**\n   * @description Map for parent relationship\n   * @description.zh-CN 父子关系的映射\n   */\n\n\n  _createClass(Graph, [{\n    key: \"setNode\",\n    value:\n    /**\n     * @description Set Node label in graph if node not in graph then create it\n     * @description.zh-CN 设置节点的label，如果这个节点不在图中，则在图中创建这个节点\n     * @param node\n     * @param value\n     * @returns\n     */\n    function setNode(node, value) {\n      var nodesLabelMap = this.nodesLabelMap,\n          defaultNodeLabelFn = this.defaultNodeLabelFn,\n          isCompound = this.isCompound,\n          parentMap = this.parentMap,\n          childrenMap = this.childrenMap,\n          inEdgesMap = this.inEdgesMap,\n          outEdgesMap = this.outEdgesMap,\n          predecessorsMap = this.predecessorsMap,\n          successorsMap = this.successorsMap; // 如果节点不在图中，则创建节点\n\n      if (nodesLabelMap.has(node)) {\n        if (value !== undefined) {\n          nodesLabelMap.set(node, value);\n        }\n\n        return this;\n      }\n\n      nodesLabelMap.set(node, value || defaultNodeLabelFn(node)); // 如果是复合图，则创建节点的子节点\n\n      if (isCompound()) {\n        var _childrenMap$get;\n\n        parentMap === null || parentMap === void 0 ? void 0 : parentMap.set(node, this.GRAPH_NODE);\n        childrenMap === null || childrenMap === void 0 ? void 0 : childrenMap.set(node, new Map());\n\n        if (!(childrenMap === null || childrenMap === void 0 ? void 0 : childrenMap.has(this.GRAPH_NODE))) {\n          childrenMap === null || childrenMap === void 0 ? void 0 : childrenMap.set(this.GRAPH_NODE, new Map());\n        }\n\n        childrenMap === null || childrenMap === void 0 ? void 0 : (_childrenMap$get = childrenMap.get(this.GRAPH_NODE)) === null || _childrenMap$get === void 0 ? void 0 : _childrenMap$get.set(node, true);\n      }\n\n      [inEdgesMap, outEdgesMap, predecessorsMap, successorsMap].forEach(function (map) {\n        return map.set(node, new Map());\n      });\n      this.nodeCountNum += 1;\n      return this;\n    }\n    /**\n     * @description Set nodes or add nodes in batch\n     * @description.zh-CN 批量设置或者创建节点\n     * @param nodes\n     * @param value\n     * @returns\n     */\n\n  }, {\n    key: \"removeNode\",\n    value:\n    /**\n     * @description Remove node from graph\n     * @description.zh-CN 将节点从图中移除\n     * @param node\n     * @returns\n     */\n    function removeNode(node) {\n      var _this2 = this;\n\n      if (this.hasNode(node)) {\n        var cleanEdge = function cleanEdge(edgeObj) {\n          _this2.removeEdge(edgeObj.v, edgeObj.w, edgeObj.name);\n        };\n\n        var inEdgesMap = this.inEdgesMap,\n            outEdgesMap = this.outEdgesMap,\n            predecessorsMap = this.predecessorsMap,\n            successorsMap = this.successorsMap,\n            nodesLabelMap = this.nodesLabelMap;\n\n        if (this.isCompound()) {\n          var _this$parentMap3, _this$children, _this$childrenMap3;\n\n          this.removeFromParentsChildList(node);\n          (_this$parentMap3 = this.parentMap) === null || _this$parentMap3 === void 0 ? void 0 : _this$parentMap3.delete(node);\n          (_this$children = this.children(node)) === null || _this$children === void 0 ? void 0 : _this$children.forEach(function (n) {\n            return _this2.setParent(n);\n          });\n          (_this$childrenMap3 = this.childrenMap) === null || _this$childrenMap3 === void 0 ? void 0 : _this$childrenMap3.delete(node);\n        }\n\n        var inE = inEdgesMap.get(node);\n        var outE = outEdgesMap.get(node);\n        Array.from(inE.values()).forEach(function (edge) {\n          return cleanEdge(edge);\n        });\n        Array.from(outE.values()).forEach(function (edge) {\n          return cleanEdge(edge);\n        });\n        nodesLabelMap.delete(node);\n        inEdgesMap.delete(node);\n        outEdgesMap.delete(node);\n        predecessorsMap.delete(node);\n        successorsMap.delete(node);\n        this.nodeCountNum -= 1;\n      }\n\n      return this;\n    }\n    /**\n     * @description Set function that generate default label for edge, if param is non-function value then default label will always be this value;\n     * @description.zh-CN 设置默认获取边Label的方法，如果传入不是函数的，那么默认label 的值只会是传入值\n     * @param newDefault\n     * @returns\n     */\n\n  }, {\n    key: \"setEdge\",\n    value:\n    /**\n     * @description set edge value, if nodes or edges not exsit then add to graph\n     * @description.zh-CN 设置边的属性，如果边或节点不存在，那么将他们加入这个图\n     * @param v\n     * @param w\n     * @param value\n     * @param name\n     * @returns\n     */\n    function setEdge(v_, w_, value, name) {\n      var _this$inEdgesMap$get2, _this$outEdgesMap$get2;\n\n      var edgeObj = edgeArgsToObj(this.isDirected(), v_, w_, name);\n      var edgeId = edgeObjToId(this.isDirected(), edgeObj);\n      var v = edgeObj.v,\n          w = edgeObj.w;\n\n      if (this.edgesLabelsMap.has(edgeId)) {\n        this.edgesLabelsMap.set(edgeId, value);\n        return this;\n      }\n\n      if (name !== undefined && !this.isMultigraph()) {\n        throw new Error('Cannot set a named edge when isMultigraph = false');\n      }\n\n      this.setNode(v);\n      this.setNode(w);\n      this.edgesLabelsMap.set(edgeId, value || this.defaultEdgeLabelFn(v, w, name));\n      Object.freeze(edgeObj);\n      this.edgesMap.set(edgeId, edgeObj);\n      var preds = this.predecessorsMap.get(w);\n      var succs = this.successorsMap.get(v);\n      incrementOrInitEntry(preds, v);\n      incrementOrInitEntry(succs, w);\n      (_this$inEdgesMap$get2 = this.inEdgesMap.get(w)) === null || _this$inEdgesMap$get2 === void 0 ? void 0 : _this$inEdgesMap$get2.set(edgeId, edgeObj);\n      (_this$outEdgesMap$get2 = this.outEdgesMap.get(v)) === null || _this$outEdgesMap$get2 === void 0 ? void 0 : _this$outEdgesMap$get2.set(edgeId, edgeObj);\n      this.edgeCountNum += 1;\n      return this;\n    }\n  }, {\n    key: \"removeEdge\",\n    value:\n    /**\n     * @description remove a specific edge\n     * @description.zh-CN 删除一条边\n     * @param v\n     * @param w\n     * @param name\n     * @returns\n     */\n    function removeEdge(v_, w_, name) {\n      var edgeId = edgeArgsToId(this.isDirected(), v_, w_, name);\n      var edgeObj = this.edgesMap.get(edgeId);\n\n      if (edgeObj) {\n        var _edgeArgsToObj = edgeArgsToObj(this.isDirected(), v_, w_, name),\n            v = _edgeArgsToObj.v,\n            w = _edgeArgsToObj.w;\n\n        this.edgesLabelsMap.delete(edgeId);\n        this.edgesMap.delete(edgeId);\n        var preds = this.predecessorsMap.get(w);\n        var succs = this.successorsMap.get(v);\n        decrementOrRemoveEntry(preds, v);\n        decrementOrRemoveEntry(succs, w);\n        this.inEdgesMap.get(w).delete(edgeId);\n        this.outEdgesMap.get(v).delete(edgeId);\n        this.edgeCountNum -= 1;\n      }\n\n      return this;\n    }\n    /**\n     * @description remove a specific edge by edge object\n     * @description.zh-CN 删除一条边\n     */\n\n  }]);\n\n  return Graph;\n}();\n\nGraph.fromJSON = read;\nexport { Graph as default };","function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// A PriorityQueue is a queue that can be sorted by priority.\nvar PriorityQueue = /*#__PURE__*/_createClass(function PriorityQueue() {\n  var _this = this;\n\n  _classCallCheck(this, PriorityQueue);\n\n  this.arr = [];\n  this.keyIndice = new Map();\n\n  this.size = function () {\n    return _this.arr.length;\n  };\n\n  this.keys = function () {\n    return _this.arr.map(function (e) {\n      return e.key;\n    });\n  };\n\n  this.has = function (key) {\n    return _this.keyIndice.has(key);\n  };\n\n  this.priority = function (key) {\n    var index = _this.keyIndice.get(key);\n\n    if (index !== undefined) {\n      return _this.arr[index].priority;\n    }\n  };\n\n  this.swap = function (i, j) {\n    var arr = _this.arr,\n        keyIndice = _this.keyIndice;\n    var _ref = [arr[i], arr[j]],\n        originI = _ref[0],\n        originJ = _ref[1];\n    arr[i] = originJ;\n    arr[j] = originI;\n    keyIndice.set(originI.key, j);\n    keyIndice.set(originJ.key, i);\n  };\n\n  this.innerDecrease = function (index) {\n    var arr = _this.arr;\n    var priority = arr[index].priority;\n    var parent;\n    var i = index;\n\n    while (i !== 0) {\n      var _arr$parent;\n\n      parent = i >> 1;\n\n      if (((_arr$parent = arr[parent]) === null || _arr$parent === void 0 ? void 0 : _arr$parent.priority) < priority) {\n        break;\n      }\n\n      _this.swap(i, parent);\n\n      i = parent;\n    }\n  };\n\n  this.heapify = function (i) {\n    var arr = _this.arr;\n    var l = i << 1;\n    var r = l + 1;\n    var largest = i;\n\n    if (l < arr.length) {\n      largest = arr[l].priority < arr[largest].priority ? l : largest;\n\n      if (r < arr.length) {\n        largest = arr[r].priority < arr[largest].priority ? r : largest;\n      }\n\n      if (largest !== i) {\n        _this.swap(i, largest);\n\n        _this.heapify(largest);\n      }\n    }\n  };\n\n  this.min = function () {\n    if (_this.size() === 0) {\n      throw new Error('Queue underflow');\n    }\n\n    return _this.arr[0].key;\n  };\n\n  this.add = function (key, priority) {\n    var keyIndice = _this.keyIndice,\n        arr = _this.arr; // if the key is already in the queue, update the priority\n\n    if (!keyIndice.has(key)) {\n      var index = arr.length;\n      keyIndice.set(key, index);\n      arr.push({\n        key: key,\n        priority: priority\n      });\n\n      _this.innerDecrease(index);\n\n      return true;\n    }\n\n    return false;\n  };\n\n  this.removeMin = function () {\n    _this.swap(0, _this.arr.length - 1);\n\n    var min = _this.arr.pop();\n\n    _this.keyIndice.delete(min.key);\n\n    _this.heapify(0);\n\n    return min.key;\n  };\n\n  this.decrease = function (key, priority) {\n    if (!_this.has(key)) {\n      throw new Error(\"There's no key named \".concat(key));\n    } // there must be an index\n\n\n    var index = _this.keyIndice.get(key);\n\n    if (priority > _this.arr[index].priority) {\n      throw new Error(\"New priority is greater than current priority.Key: \".concat(key, \" Old: + \").concat(_this.arr[index].priority, \" New: \").concat(priority));\n    }\n\n    _this.arr[index].priority = priority;\n\n    _this.innerDecrease(index);\n  };\n});\n\nexport { PriorityQueue as default };","import Graph from '../Graph';\nimport PriorityQueue from './PriorityQueue';\n\nvar prim = function prim(graph, weightFn) {\n  var result = new Graph();\n  var parents = new Map();\n  var pq = new PriorityQueue();\n  var v;\n\n  function updateNeighbors(edge) {\n    var w = edge.v === v ? edge.w : edge.v;\n    var pri = pq.priority(w);\n\n    if (pri !== undefined) {\n      var edgeWeight = weightFn(edge);\n\n      if (edgeWeight < pri) {\n        parents.set(w, v);\n        pq.decrease(w, edgeWeight);\n      }\n    }\n  }\n\n  if (graph.nodeCount() === 0) {\n    return result;\n  }\n\n  graph.nodes().forEach(function (node) {\n    pq.add(node, Number.POSITIVE_INFINITY);\n    result.setNode(node);\n  }); // Start from an arbitrary node\n\n  pq.decrease(graph.nodes()[0], 0);\n  var init = false;\n\n  while (pq.size() > 0) {\n    var _graph$nodeEdges;\n\n    v = pq.removeMin();\n\n    if (parents.has(v)) {\n      result.setEdge(v, parents.get(v));\n    } else if (init) {\n      throw new Error('Input graph is not connected: ' + graph.graph());\n    } else {\n      init = true;\n    }\n\n    (_graph$nodeEdges = graph.nodeEdges(v)) === null || _graph$nodeEdges === void 0 ? void 0 : _graph$nodeEdges.forEach(updateNeighbors);\n  }\n\n  return result;\n};\n\nexport default prim;","var components = function components(graph) {\n  var visited = new Set();\n  var resultComponents = [];\n  var nodes = graph.nodes();\n  nodes.forEach(function (n) {\n    var componentsArr = [];\n    var waitingList = [n];\n\n    while (waitingList.length > 0) {\n      var node = waitingList.pop();\n\n      if (!visited.has(node)) {\n        var _graph$successors, _graph$predecessors;\n\n        visited.add(node);\n        componentsArr.push(node);\n        (_graph$successors = graph.successors(node)) === null || _graph$successors === void 0 ? void 0 : _graph$successors.forEach(function (n) {\n          return waitingList.push(n);\n        });\n        (_graph$predecessors = graph.predecessors(node)) === null || _graph$predecessors === void 0 ? void 0 : _graph$predecessors.forEach(function (n) {\n          return waitingList.push(n);\n        });\n      }\n    }\n\n    if (componentsArr.length) {\n      resultComponents.push(componentsArr);\n    }\n  });\n  return resultComponents;\n};\n\nexport default components;","/**\n * @description DFS traversal.\n * @description.zh-CN DFS 遍历。\n */\nvar doDFS = function doDFS(graph, node, postorder, visited, navigator, result) {\n  if (!visited.includes(node)) {\n    visited.push(node);\n\n    if (!postorder) {\n      result.push(node);\n    }\n\n    navigator(node).forEach(function (n) {\n      return doDFS(graph, n, postorder, visited, navigator, result);\n    });\n\n    if (postorder) {\n      result.push(node);\n    }\n  }\n};\n/**\n * @description DFS traversal.\n * @description.zh-CN DFS 遍历。\n */\n\n\nvar dfs = function dfs(graph, node, order) {\n  var nodes = Array.isArray(node) ? node : [node];\n\n  var navigator = function navigator(n) {\n    return graph.isDirected() ? graph.successors(n) : graph.neighbors(n);\n  };\n\n  var results = [];\n  var visited = [];\n  nodes.forEach(function (node) {\n    if (!graph.hasNode(node)) {\n      throw new Error('Graph does not have node: ' + node);\n    } else {\n      doDFS(graph, node, order === 'post', visited, navigator, results);\n    }\n  });\n  return results;\n};\n\nexport default dfs;","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport PriorityQueue from './PriorityQueue';\n\nvar DEFAULT_WEIGHT_FUNC = function DEFAULT_WEIGHT_FUNC() {\n  return 1;\n};\n/**\n * @description Dijkstra's algorithm for single-source shortest paths.\n * @description https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm\n * @description.zh-CN Dijkstra 算法用于单源最短路径。\n */\n\n\nvar dijkstra = function dijkstra(graph, source, weightFn, edgeFn) {\n  return runDijkstra(graph, source, weightFn || DEFAULT_WEIGHT_FUNC, edgeFn || function (v) {\n    return graph.outEdges(v);\n  });\n};\n/**\n * @description Dijkstra's algorithm for single-source shortest paths.\n * @description https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm\n * @description.zh-CN Dijkstra 算法用于单源最短路径。\n */\n\n\nvar runDijkstra = function runDijkstra(graph, source, weightFn, edgeFn) {\n  var results = new Map();\n  var pq = new PriorityQueue();\n  var v;\n  var vEntry;\n\n  var updateNeighbors = function updateNeighbors(edge) {\n    var w = edge.v !== v ? edge.v : edge.w;\n    var wEntry = results.get(w);\n    var weight = weightFn(edge);\n    var distance = vEntry.distance + weight;\n\n    if (weight < 0) {\n      throw new Error('dijkstra does not allow negative edge weights. ' + 'Bad edge: ' + edge + ' Weight: ' + weight);\n    } // If there is already a shorter path to w, ignore this edge.\n\n\n    if (distance < wEntry.distance) {\n      wEntry.distance = distance;\n      wEntry.predecessor = v;\n      pq.decrease(w, distance);\n    }\n  };\n\n  graph.nodes().forEach(function (v) {\n    var distance = v === source ? 0 : Number.POSITIVE_INFINITY;\n    results.set(v, {\n      distance: distance\n    });\n    pq.add(v, distance);\n  });\n\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    vEntry = results.get(v);\n\n    if (vEntry && vEntry.distance === Number.POSITIVE_INFINITY) {\n      break;\n    }\n\n    edgeFn(v).forEach(updateNeighbors);\n  }\n\n  var obj = {};\n  Array.from(results.entries()).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        node = _ref2[0],\n        e = _ref2[1];\n\n    obj[String(node)] = e;\n    return obj;\n  });\n  return obj;\n};\n\nexport default dijkstra;","import dijkstra from './dijkstra';\n\nvar dijkstraAll = function dijkstraAll(graph, weightFn, edgeFn) {\n  var map = {};\n  graph.nodes().forEach(function (node) {\n    map[String(node)] = dijkstra(graph, node, weightFn, edgeFn);\n    return map;\n  });\n  return map;\n};\n\nexport default dijkstraAll;","/**\n * @description Tarjan's algorithm for finding the strongly connected components of a graph.\n * @description https://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm\n * @description.zh-CN Tarjan 算法用于找到图的强连通子图。\n * @param graph\n * @returns\n */\nvar tarjan = function tarjan(graph) {\n  var index = 0;\n  var stack = [];\n  var visited = new Map(); // node id -> { onStack, lowlink, index }\n\n  var results = [];\n\n  function dfs(v) {\n    var _graph$successors;\n\n    var entry = {\n      onStack: true,\n      lowlink: index,\n      index: index\n    };\n    visited.set(v, entry);\n    index += 1;\n    stack.push(v);\n    (_graph$successors = graph.successors(v)) === null || _graph$successors === void 0 ? void 0 : _graph$successors.forEach(function (w) {\n      var _visited$get;\n\n      // 如果 w 没有被访问过，则继续访问 w\n      if (!visited.has(w)) {\n        dfs(w);\n        var wEntry = visited.get(w);\n        entry.lowlink = Math.min(entry.lowlink, wEntry.lowlink); // 如果 w 在栈顶，则说明 w 和 v 不是强连通的\n      } else if ((_visited$get = visited.get(w)) === null || _visited$get === void 0 ? void 0 : _visited$get.onStack) {\n        var _wEntry = visited.get(w); // 如果 w 在栈中，则说明 w 在当前访问的路径上\n\n\n        entry.lowlink = Math.min(entry.lowlink, _wEntry.index);\n      }\n    }); // 如果 v 的 lowlink 不等于 v 的 index，则说明 v 和 v 的 lowlink 不是强连通的\n\n    if (entry.lowlink === entry.index) {\n      var cmpt = [];\n      var w;\n\n      do {\n        // 将 w 出栈，并将 w 的所有邻接点加入强连通子图\n        w = stack.pop();\n        var wEntry = visited.get(w);\n        wEntry.onStack = false;\n        cmpt.push(w);\n      } while (v !== w);\n\n      results.push(cmpt);\n    }\n  }\n\n  graph.nodes().forEach(function (v) {\n    if (!visited.has(v)) {\n      dfs(v);\n    }\n  });\n  return results;\n};\n\nexport default tarjan;","import tarjan from './tarjan';\n\nvar findCycles = function findCycles(graph) {\n  return tarjan(graph).filter(function (cmpt) {\n    return cmpt.length > 1 || cmpt.length === 1 && graph.hasEdge(cmpt[0], cmpt[0]);\n  });\n};\n\nexport default findCycles;","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nexport var CycleException = /*#__PURE__*/function (_Error) {\n  _inherits(CycleException, _Error);\n\n  var _super = _createSuper(CycleException);\n\n  function CycleException() {\n    _classCallCheck(this, CycleException);\n\n    return _super.apply(this, arguments);\n  }\n\n  return _createClass(CycleException);\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nfunction topsort(graph) {\n  var visited = new Set();\n  var stack = new Set();\n  var results = [];\n\n  function visit(node) {\n    if (stack.has(node)) {\n      throw new CycleException();\n    }\n\n    if (!visited.has(node)) {\n      var _graph$predecessors;\n\n      stack.add(node);\n      visited.add(node);\n      (_graph$predecessors = graph.predecessors(node)) === null || _graph$predecessors === void 0 ? void 0 : _graph$predecessors.forEach(visit);\n      stack.delete(node);\n      results.push(node);\n    }\n  }\n\n  graph.sinks().forEach(visit);\n\n  if (visited.size !== graph.nodeCount()) {\n    throw new CycleException();\n  }\n\n  return results;\n}\n\nexport default topsort;","import topsort, { CycleException } from './topsort';\n\nvar isAcyclic = function isAcyclic(graph) {\n  try {\n    topsort(graph);\n  } catch (e) {\n    if (e instanceof CycleException) {\n      return false;\n    }\n\n    throw e;\n  }\n\n  return true;\n};\n\nexport default isAcyclic;","import dfs from './dfs';\n\nvar postorder = function postorder(graph, nodes) {\n  return dfs(graph, nodes, 'post');\n};\n\nexport default postorder;","import dfs from './dfs';\n\nvar preorder = function preorder(graph, nodes) {\n  return dfs(graph, nodes, 'pre');\n};\n\nexport default preorder;","var DEFAULT_WEIGHT_FUNC = function DEFAULT_WEIGHT_FUNC() {\n  return 1;\n};\n\nexport function floydWarshall(graph, weightFn, edgeFn) {\n  return runFloydWarshall(graph, weightFn || DEFAULT_WEIGHT_FUNC, edgeFn || function (v) {\n    return graph.outEdges(v);\n  });\n}\n\nfunction runFloydWarshall(graph, weightFn, edgeFn) {\n  var results = {};\n  var nodes = graph.nodes();\n  nodes.forEach(function (node) {\n    var v = String(node);\n    results[v] = {};\n    results[v][v] = {\n      distance: 0\n    };\n    nodes.forEach(function (w) {\n      if (node !== w) {\n        results[v][String(w)] = {\n          distance: Number.POSITIVE_INFINITY\n        };\n      }\n    });\n    edgeFn(node).forEach(function (edge) {\n      var w = edge.v === node ? edge.w : edge.v;\n      var d = weightFn(edge);\n      results[v][String(w)] = {\n        distance: d,\n        predecessor: node\n      };\n    });\n  });\n  nodes.forEach(function (nodek) {\n    var k = String(nodek);\n    var rowK = results[k];\n    nodes.forEach(function (nodei) {\n      var i = String(nodei);\n      var rowI = results[i];\n      nodes.forEach(function (nodej) {\n        var j = String(nodej);\n        var ik = rowI[k];\n        var kj = rowK[j];\n        var ij = rowI[j];\n        var altDistance = ik.distance + kj.distance;\n\n        if (altDistance < ij.distance) {\n          ij.distance = altDistance;\n          ij.predecessor = kj.predecessor;\n        }\n      });\n    });\n  });\n  return results;\n}\n\nexport default floydWarshall;","import RawList from \"./data/list\";\nimport { Graph as RawGraph } from \"@antv/graphlib\";\nclass List extends RawList {\n}\nclass StateGraph extends RawGraph {\n}\n/*\n * A greedy heuristic for finding a feedback arc set for a graph. A feedback\n * arc set is a set of edges that can be removed to make a graph acyclic.\n * The algorithm comes from: P. Eades, X. Lin, and W. F. Smyth, \"A fast and\n * effective heuristic for the feedback arc set problem.\" This implementation\n * adjusts that from the paper to allow for weighted edges.\n */\nconst DEFAULT_WEIGHT_FN = () => 1;\nconst greedyFAS = (g, weightFn) => {\n    var _a;\n    if (g.nodeCount() <= 1)\n        return [];\n    const state = buildState(g, weightFn || DEFAULT_WEIGHT_FN);\n    const results = doGreedyFAS(state.graph, state.buckets, state.zeroIdx);\n    return (_a = results.map((e) => g.outEdges(e.v, e.w))) === null || _a === void 0 ? void 0 : _a.flat();\n};\nconst doGreedyFAS = (g, buckets, zeroIdx) => {\n    let results = [];\n    const sources = buckets[buckets.length - 1];\n    const sinks = buckets[0];\n    let entry;\n    while (g.nodeCount()) {\n        while ((entry = sinks.dequeue())) {\n            removeNode(g, buckets, zeroIdx, entry);\n        }\n        while ((entry = sources.dequeue())) {\n            removeNode(g, buckets, zeroIdx, entry);\n        }\n        if (g.nodeCount()) {\n            for (let i = buckets.length - 2; i > 0; --i) {\n                entry = buckets[i].dequeue();\n                if (entry) {\n                    results = results.concat(removeNode(g, buckets, zeroIdx, entry, true));\n                    break;\n                }\n            }\n        }\n    }\n    return results;\n};\nconst removeNode = (g, buckets, zeroIdx, entry, collectPredecessors) => {\n    var _a, _b;\n    const results = [];\n    (_a = g.inEdges(entry.v)) === null || _a === void 0 ? void 0 : _a.forEach((edge) => {\n        const weight = g.edge(edge);\n        const uEntry = g.node(edge.v);\n        if (collectPredecessors) {\n            // this result not really care about in or out\n            results.push({ v: edge.v, w: edge.w, in: 0, out: 0 });\n        }\n        if (uEntry.out === undefined)\n            uEntry.out = 0;\n        uEntry.out -= weight;\n        assignBucket(buckets, zeroIdx, uEntry);\n    });\n    (_b = g.outEdges(entry.v)) === null || _b === void 0 ? void 0 : _b.forEach((edge) => {\n        const weight = g.edge(edge);\n        const w = edge.w;\n        const wEntry = g.node(w);\n        if (wEntry.in === undefined)\n            wEntry.in = 0;\n        wEntry.in -= weight;\n        assignBucket(buckets, zeroIdx, wEntry);\n    });\n    g.removeNode(entry.v);\n    return collectPredecessors ? results : undefined;\n};\nconst buildState = (g, weightFn) => {\n    const fasGraph = new StateGraph();\n    let maxIn = 0;\n    let maxOut = 0;\n    g.nodes().forEach((v) => {\n        fasGraph.setNode(v, { v, in: 0, out: 0 });\n    });\n    // Aggregate weights on nodes, but also sum the weights across multi-edges\n    // into a single edge for the fasGraph.\n    g.edges().forEach((e) => {\n        const prevWeight = fasGraph.edge(e) || 0;\n        const weight = (weightFn === null || weightFn === void 0 ? void 0 : weightFn(e)) || 1;\n        const edgeWeight = prevWeight + weight;\n        fasGraph.setEdge(e.v, e.w, edgeWeight);\n        maxOut = Math.max(maxOut, (fasGraph.node(e.v).out += weight));\n        maxIn = Math.max(maxIn, (fasGraph.node(e.w).in += weight));\n    });\n    const buckets = [];\n    const rangeMax = maxOut + maxIn + 3;\n    for (let i = 0; i < rangeMax; i++) {\n        buckets.push(new List());\n    }\n    const zeroIdx = maxIn + 1;\n    fasGraph.nodes().forEach((v) => {\n        assignBucket(buckets, zeroIdx, fasGraph.node(v));\n    });\n    return { buckets, zeroIdx, graph: fasGraph };\n};\nconst assignBucket = (buckets, zeroIdx, entry) => {\n    if (!entry.out) {\n        buckets[0].enqueue(entry);\n    }\n    else if (!entry[\"in\"]) {\n        buckets[buckets.length - 1].enqueue(entry);\n    }\n    else {\n        buckets[entry.out - entry[\"in\"] + zeroIdx].enqueue(entry);\n    }\n};\nexport default greedyFAS;\n//# sourceMappingURL=greedy-fas.js.map","import greedyFAS from \"./greedy-fas\";\nconst run = (g) => {\n    const weightFn = (g) => {\n        return (e) => { var _a; return ((_a = g.edge(e)) === null || _a === void 0 ? void 0 : _a.weight) || 1; };\n    };\n    const fas = g.graph().acyclicer === \"greedy\" ? greedyFAS(g, weightFn(g)) : dfsFAS(g);\n    fas === null || fas === void 0 ? void 0 : fas.forEach((e) => {\n        const label = g.edge(e);\n        g.removeEdgeObj(e);\n        label.forwardName = e.name;\n        label.reversed = true;\n        g.setEdge(e.w, e.v, label, `rev-${Math.random()}`);\n    });\n};\nconst dfsFAS = (g) => {\n    const fas = [];\n    const stack = {};\n    const visited = {};\n    const dfs = (v) => {\n        var _a;\n        if (visited[v]) {\n            return;\n        }\n        visited[v] = true;\n        stack[v] = true;\n        (_a = g.outEdges(v)) === null || _a === void 0 ? void 0 : _a.forEach((e) => {\n            if (stack[e.w]) {\n                fas.push(e);\n            }\n            else {\n                dfs(e.w);\n            }\n        });\n        delete stack[v];\n    };\n    g.nodes().forEach(dfs);\n    return fas;\n};\nconst undo = (g) => {\n    g.edges().forEach((e) => {\n        const label = g.edge(e);\n        if (label.reversed) {\n            g.removeEdgeObj(e);\n            const forwardName = label.forwardName;\n            delete label.reversed;\n            delete label.forwardName;\n            g.setEdge(e.w, e.v, label, forwardName);\n        }\n    });\n};\nexport default { run, undo };\n//# sourceMappingURL=acyclic.js.map","import { Graph as RawGraph } from \"@antv/graphlib\";\nexport class Graph extends RawGraph {\n}\n//# sourceMappingURL=graph.js.map","import { isNumber } from \"../../../util\";\nimport { Graph } from \"../graph\";\nconst safeSort = (valueA, valueB) => {\n    return Number(valueA) - Number(valueB);\n};\n/*\n * Adds a dummy node to the graph and return v.\n */\nexport const addDummyNode = (g, type, attrs, name) => {\n    let v;\n    do {\n        v = `${name}${Math.random()}`;\n    } while (g.hasNode(v));\n    attrs.dummy = type;\n    g.setNode(v, attrs);\n    return v;\n};\n/*\n * Returns a new graph with only simple edges. Handles aggregation of data\n * associated with multi-edges.\n */\nexport const simplify = (g) => {\n    const simplified = new Graph().setGraph(g.graph());\n    g.nodes().forEach((v) => { simplified.setNode(v, g.node(v)); });\n    g.edges().forEach((e) => {\n        const simpleLabel = simplified.edgeFromArgs(e.v, e.w) || { weight: 0, minlen: 1 };\n        const label = g.edge(e);\n        simplified.setEdge(e.v, e.w, {\n            weight: simpleLabel.weight + label.weight,\n            minlen: Math.max(simpleLabel.minlen, label.minlen)\n        });\n    });\n    return simplified;\n};\nexport const asNonCompoundGraph = (g) => {\n    const simplified = new Graph({ multigraph: g.isMultigraph() }).setGraph(g.graph());\n    g.nodes().forEach((node) => {\n        var _a;\n        if (!((_a = g.children(node)) === null || _a === void 0 ? void 0 : _a.length)) {\n            simplified.setNode(node, g.node(node));\n        }\n    });\n    g.edges().forEach((edge) => {\n        simplified.setEdgeObj(edge, g.edge(edge));\n    });\n    return simplified;\n};\nexport const zipObject = (keys, values) => {\n    return keys === null || keys === void 0 ? void 0 : keys.reduce((obj, key, i) => {\n        obj[key] = values[i];\n        return obj;\n    }, {});\n};\nexport const successorWeights = (g) => {\n    const weightsMap = {};\n    g.nodes().forEach((node) => {\n        var _a;\n        const sucs = {};\n        (_a = g.outEdges(node)) === null || _a === void 0 ? void 0 : _a.forEach((e) => {\n            var _a;\n            sucs[e.w] = (sucs[e.w] || 0) + (((_a = g.edge(e)) === null || _a === void 0 ? void 0 : _a.weight) || 0);\n        });\n        weightsMap[node] = sucs;\n    });\n    return weightsMap;\n};\nexport const predecessorWeights = (g) => {\n    const nodes = g.nodes();\n    const weightMap = nodes.map((v) => {\n        var _a;\n        const preds = {};\n        (_a = g.inEdges(v)) === null || _a === void 0 ? void 0 : _a.forEach((e) => {\n            preds[e.v] = (preds[e.v] || 0) + g.edge(e).weight;\n        });\n        return preds;\n    });\n    return zipObject(nodes, weightMap);\n};\n/*\n * Finds where a line starting at point ({x, y}) would intersect a rectangle\n * ({x, y, width, height}) if it were pointing at the rectangle's center.\n */\nexport const intersectRect = (rect, point) => {\n    const x = Number(rect.x);\n    const y = Number(rect.y);\n    // Rectangle intersection algorithm from:\n    // http://math.stackexchange.com/questions/108113/find-edge-between-two-boxes\n    const dx = Number(point.x) - x;\n    const dy = Number(point.y) - y;\n    let w = Number(rect.width) / 2;\n    let h = Number(rect.height) / 2;\n    if (!dx && !dy) {\n        // completely overlapped directly, then return points its self\n        return { x: 0, y: 0 };\n    }\n    let sx;\n    let sy;\n    if (Math.abs(dy) * w > Math.abs(dx) * h) {\n        // Intersection is top or bottom of rect.\n        if (dy < 0) {\n            h = -h;\n        }\n        sx = (h * dx) / dy;\n        sy = h;\n    }\n    else {\n        // Intersection is left or right of rect.\n        if (dx < 0) {\n            w = -w;\n        }\n        sx = w;\n        sy = (w * dy) / dx;\n    }\n    return { x: x + sx, y: y + sy };\n};\n/*\n * Given a DAG with each node assigned \"rank\" and \"order\" properties, this\n * const will produce a matrix with the ids of each node.\n */\nexport const buildLayerMatrix = (g) => {\n    const layeringNodes = [];\n    const rankMax = maxRank(g) + 1;\n    for (let i = 0; i < rankMax; i++) {\n        layeringNodes.push([]);\n    }\n    // const layering = _.map(_.range(maxRank(g) + 1), function() { return []; });\n    g.nodes().forEach((v) => {\n        const node = g.node(v);\n        if (!node)\n            return;\n        const rank = node.rank;\n        if (rank !== undefined && layeringNodes[rank]) {\n            layeringNodes[rank].push(v);\n        }\n    });\n    for (let i = 0; i < rankMax; i++) {\n        layeringNodes[i] = layeringNodes[i].sort((va, vb) => { var _a, _b; return safeSort((_a = g.node(va)) === null || _a === void 0 ? void 0 : _a.order, (_b = g.node(vb)) === null || _b === void 0 ? void 0 : _b.order); });\n    }\n    return layeringNodes;\n};\n/*\n * Adjusts the ranks for all nodes in the graph such that all nodes v have\n * rank(v) >= 0 and at least one node w has rank(w) = 0.\n */\nexport const normalizeRanks = (g) => {\n    const nodeRanks = g\n        .nodes()\n        .filter((v) => { var _a; return ((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.rank) !== undefined; })\n        .map((v) => g.node(v).rank);\n    const min = Math.min(...nodeRanks);\n    g.nodes().forEach((v) => {\n        const node = g.node(v);\n        if (node.hasOwnProperty(\"rank\") && min !== Infinity) {\n            node.rank -= min;\n        }\n    });\n};\nexport const removeEmptyRanks = (g) => {\n    // Ranks may not start at 0, so we need to offset them\n    const nodes = g.nodes();\n    const nodeRanks = nodes\n        .filter((v) => { var _a; return ((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.rank) !== undefined; })\n        .map((v) => g.node(v).rank);\n    const offset = Math.min(...nodeRanks);\n    const layers = [];\n    nodes.forEach((v) => {\n        var _a;\n        const rank = (((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.rank) || 0) - offset;\n        if (!layers[rank]) {\n            layers[rank] = [];\n        }\n        layers[rank].push(v);\n    });\n    let delta = 0;\n    const nodeRankFactor = g.graph().nodeRankFactor || 0;\n    for (let i = 0; i < layers.length; i++) {\n        const vs = layers[i];\n        if (vs === undefined) {\n            if (i % nodeRankFactor !== 0) {\n                delta -= 1;\n            }\n        }\n        else if (delta) {\n            vs === null || vs === void 0 ? void 0 : vs.forEach((v) => {\n                const node = g.node(v);\n                if (node) {\n                    node.rank = node.rank || 0;\n                    node.rank += delta;\n                }\n            });\n        }\n    }\n};\nexport const addBorderNode = (g, prefix, rank, order) => {\n    const node = {\n        width: 0,\n        height: 0\n    };\n    if (isNumber(rank) && isNumber(order)) {\n        node.rank = rank;\n        node.order = order;\n    }\n    return addDummyNode(g, \"border\", node, prefix);\n};\nexport const maxRank = (g) => {\n    let maxRank;\n    g.nodes().forEach((v) => {\n        var _a;\n        const rank = (_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.rank;\n        if (rank !== undefined) {\n            if (maxRank === undefined || rank > maxRank) {\n                maxRank = rank;\n            }\n        }\n    });\n    if (!maxRank) {\n        maxRank = 0;\n    }\n    return maxRank;\n};\n/*\n * Partition a collection into two groups: `lhs` and `rhs`. If the supplied\n * const returns true for an entry it goes into `lhs`. Otherwise it goes\n * into `rhs.\n */\nexport const partition = (collection, fn) => {\n    const result = { lhs: [], rhs: [] };\n    collection === null || collection === void 0 ? void 0 : collection.forEach((value) => {\n        if (fn(value)) {\n            result.lhs.push(value);\n        }\n        else {\n            result.rhs.push(value);\n        }\n    });\n    return result;\n};\n/*\n * Returns a new const that wraps `fn` with a timer. The wrapper logs the\n * time it takes to execute the function.\n */\nexport const time = (name, fn) => {\n    const start = Date.now();\n    try {\n        return fn();\n    }\n    finally {\n        console.log(`${name} time: ${Date.now() - start}ms`);\n    }\n};\nexport const notime = (name, fn) => {\n    return fn();\n};\nexport const minBy = (array, func) => {\n    return array.reduce((a, b) => {\n        const valA = func(a);\n        const valB = func(b);\n        return valA > valB ? b : a;\n    });\n};\n//# sourceMappingURL=util.js.map","import { addDummyNode } from \"./util\";\n/*\n * Breaks any long edges in the graph into short segments that span 1 layer\n * each. This operation is undoable with the denormalize function.\n *\n * Pre-conditions:\n *\n *    1. The input graph is a DAG.\n *    2. Each node in the graph has a \"rank\" property.\n *\n * Post-condition:\n *\n *    1. All edges in the graph have a length of 1.\n *    2. Dummy nodes are added where edges have been split into segments.\n *    3. The graph is augmented with a \"dummyChains\" attribute which contains\n *       the first dummy in each chain of dummy nodes produced.\n */\nconst run = (g) => {\n    g.graph().dummyChains = [];\n    g.edges().forEach((edge) => normalizeEdge(g, edge));\n};\nconst normalizeEdge = (g, e) => {\n    let v = e.v;\n    let vRank = g.node(v).rank;\n    const w = e.w;\n    const wRank = g.node(w).rank;\n    const name = e.name;\n    const edgeLabel = g.edge(e);\n    const labelRank = edgeLabel.labelRank;\n    if (wRank === vRank + 1)\n        return;\n    g.removeEdgeObj(e);\n    const graph = g.graph();\n    let dummy;\n    let attrs;\n    let i;\n    for (i = 0, ++vRank; vRank < wRank; ++i, ++vRank) {\n        edgeLabel.points = [];\n        attrs = {\n            edgeLabel,\n            width: 0,\n            height: 0,\n            edgeObj: e,\n            rank: vRank,\n        };\n        dummy = addDummyNode(g, \"edge\", attrs, \"_d\");\n        if (vRank === labelRank) {\n            attrs.width = edgeLabel.width;\n            attrs.height = edgeLabel.height;\n            attrs.dummy = \"edge-label\";\n            attrs.labelpos = edgeLabel.labelpos;\n        }\n        g.setEdge(v, dummy, { weight: edgeLabel.weight }, name);\n        if (i === 0) {\n            if (!graph.dummyChains)\n                graph.dummyChains = [];\n            graph.dummyChains.push(dummy);\n        }\n        v = dummy;\n    }\n    g.setEdge(v, w, { weight: edgeLabel.weight }, name);\n};\nconst undo = (g) => {\n    var _a;\n    (_a = g.graph().dummyChains) === null || _a === void 0 ? void 0 : _a.forEach((v) => {\n        let node = g.node(v);\n        const origLabel = node.edgeLabel;\n        let w;\n        if (node.edgeObj) {\n            g.setEdgeObj(node.edgeObj, origLabel);\n        }\n        let currentV = v;\n        while (node.dummy) {\n            w = g.successors(currentV)[0];\n            g.removeNode(currentV);\n            origLabel.points.push({ x: node.x, y: node.y });\n            if (node.dummy === \"edge-label\") {\n                origLabel.x = node.x;\n                origLabel.y = node.y;\n                origLabel.width = node.width;\n                origLabel.height = node.height;\n            }\n            currentV = w;\n            node = g.node(currentV);\n        }\n    });\n};\nexport default { run, undo };\n//# sourceMappingURL=normalize.js.map","/*\n * Initializes ranks for the input graph using the longest path algorithm. This\n * algorithm scales well and is fast in practice, it yields rather poor\n * solutions. Nodes are pushed to the lowest layer possible, leaving the bottom\n * ranks wide and leaving edges longer than necessary. However, due to its\n * speed, this algorithm is good for getting an initial ranking that can be fed\n * into other algorithms.\n *\n * This algorithm does not normalize layers because it will be used by other\n * algorithms in most cases. If using this algorithm directly, be sure to\n * run normalize at the end.\n *\n * Pre-conditions:\n *\n *    1. Input graph is a DAG.\n *    2. Input graph node labels can be assigned properties.\n *\n * Post-conditions:\n *\n *    1. Each node will be assign an (unnormalized) \"rank\" property.\n */\nconst longestPath = (g) => {\n    var _a;\n    const visited = {};\n    const dfs = (v) => {\n        var _a;\n        const label = g.node(v);\n        if (!label)\n            return 0;\n        if (visited[v]) {\n            return label.rank;\n        }\n        visited[v] = true;\n        let rank;\n        (_a = g.outEdges(v)) === null || _a === void 0 ? void 0 : _a.forEach((edgeObj) => {\n            const wRank = dfs(edgeObj.w);\n            const minLen = g.edge(edgeObj).minlen;\n            const r = wRank - minLen;\n            if (r) {\n                if (rank === undefined || r < rank) {\n                    rank = r;\n                }\n            }\n        });\n        if (!rank) {\n            rank = 0;\n        }\n        label.rank = rank;\n        return rank;\n    };\n    (_a = g.sources()) === null || _a === void 0 ? void 0 : _a.forEach((source) => dfs(source));\n};\nconst longestPathWithLayer = (g) => {\n    var _a;\n    // 用longest path，找出最深的点\n    const visited = {};\n    let minRank;\n    const dfs = (v) => {\n        var _a;\n        const label = g.node(v);\n        if (!label)\n            return 0;\n        if (visited[v]) {\n            return label.rank;\n        }\n        visited[v] = true;\n        let rank;\n        (_a = g.outEdges(v)) === null || _a === void 0 ? void 0 : _a.forEach((edgeObj) => {\n            const wRank = dfs(edgeObj.w);\n            const minLen = g.edge(edgeObj).minlen;\n            const r = wRank - minLen;\n            if (r) {\n                if (rank === undefined || r < rank) {\n                    rank = r;\n                }\n            }\n        });\n        if (!rank) {\n            rank = 0;\n        }\n        if (minRank === undefined || rank < minRank) {\n            minRank = rank;\n        }\n        label.rank = rank;\n        return rank;\n    };\n    (_a = g.sources()) === null || _a === void 0 ? void 0 : _a.forEach((source) => {\n        if (g.node(source))\n            dfs(source);\n    });\n    if (minRank === undefined) {\n        minRank = 0;\n    }\n    // minRank += 1; // NOTE: 最小的层级是dummy root，+1\n    // forward一遍，赋值层级\n    const forwardVisited = {};\n    const dfsForward = (v, nextRank) => {\n        var _a;\n        const label = g.node(v);\n        const currRank = (!isNaN(label.layer) ? label.layer : nextRank);\n        // 没有指定，取最大值\n        if (label.rank === undefined || label.rank < currRank) {\n            label.rank = currRank;\n        }\n        if (forwardVisited[v])\n            return;\n        forwardVisited[v] = true;\n        // DFS遍历子节点\n        (_a = g.outEdges(v)) === null || _a === void 0 ? void 0 : _a.map((e) => {\n            dfsForward(e.w, currRank + g.edge(e).minlen);\n        });\n    };\n    // 指定层级的，更新下游\n    g.nodes().forEach((n) => {\n        const label = g.node(n);\n        if (!label)\n            return;\n        if (!isNaN(label.layer)) {\n            dfsForward(n, label.layer); // 默认的dummy root所在层的rank是-1\n        }\n        else {\n            label.rank -= minRank;\n        }\n    });\n};\n/*\n * Returns the amount of slack for the given edge. The slack is defined as the\n * difference between the length of the edge and its minimum length.\n */\nconst slack = (g, e) => {\n    return (g.node(e.w).rank -\n        g.node(e.v).rank -\n        g.edge(e).minlen);\n};\nexport { longestPath, longestPathWithLayer, slack };\nexport default {\n    longestPath,\n    longestPathWithLayer,\n    slack,\n};\n//# sourceMappingURL=util.js.map","import { slack } from './util';\nimport { minBy } from '../util';\nimport { Graph } from '../../graph';\n/*\n * Constructs a spanning tree with tight edges and adjusted the input node's\n * ranks to achieve this. A tight edge is one that is has a length that matches\n * its \"minlen\" attribute.\n *\n * The basic structure for this function is derived from Gansner, et al., \"A\n * Technique for Drawing Directed Graphs.\"\n *\n * Pre-conditions:\n *\n *    1. Graph must be a DAG.\n *    2. Graph must be connected.\n *    3. Graph must have at least one node.\n *    5. Graph nodes must have been previously assigned a \"rank\" property that\n *       respects the \"minlen\" property of incident edges.\n *    6. Graph edges must have a \"minlen\" property.\n *\n * Post-conditions:\n *\n *    - Graph nodes will have their rank adjusted to ensure that all edges are\n *      tight.\n *\n * Returns a tree (undirected graph) that is constructed using only \"tight\"\n * edges.\n */\nconst feasibleTree = (g) => {\n    const t = new Graph({ directed: false });\n    // Choose arbitrary node from which to start our tree\n    const start = g.nodes()[0];\n    const size = g.nodeCount();\n    t.setNode(start, {});\n    let edge;\n    let delta;\n    while (tightTree(t, g) < size) {\n        edge = findMinSlackEdge(t, g);\n        delta = t.hasNode(edge.v) ? slack(g, edge) : -slack(g, edge);\n        shiftRanks(t, g, delta);\n    }\n    return t;\n};\n/*\n * Finds a maximal tree of tight edges and returns the number of nodes in the\n * tree.\n */\nconst tightTree = (t, g) => {\n    const dfs = (v) => {\n        g.nodeEdges(v).forEach((e) => {\n            const edgeV = e.v;\n            const w = (v === edgeV) ? e.w : edgeV;\n            if (!t.hasNode(w) && !slack(g, e)) {\n                t.setNode(w, {});\n                t.setEdge(v, w, {});\n                dfs(w);\n            }\n        });\n    };\n    t.nodes().forEach(dfs);\n    return t.nodeCount();\n};\n/*\n * Constructs a spanning tree with tight edges and adjusted the input node's\n * ranks to achieve this. A tight edge is one that is has a length that matches\n * its \"minlen\" attribute.\n *\n * The basic structure for this function is derived from Gansner, et al., \"A\n * Technique for Drawing Directed Graphs.\"\n *\n * Pre-conditions:\n *\n *    1. Graph must be a DAG.\n *    2. Graph must be connected.\n *    3. Graph must have at least one node.\n *    5. Graph nodes must have been previously assigned a \"rank\" property that\n *       respects the \"minlen\" property of incident edges.\n *    6. Graph edges must have a \"minlen\" property.\n *\n * Post-conditions:\n *\n *    - Graph nodes will have their rank adjusted to ensure that all edges are\n *      tight.\n *\n * Returns a tree (undirected graph) that is constructed using only \"tight\"\n * edges.\n */\nconst feasibleTreeWithLayer = (g) => {\n    const t = new Graph({ directed: false });\n    // Choose arbitrary node from which to start our tree\n    const start = g.nodes()[0];\n    const size = g.nodes().filter((n) => !!g.node(n)).length;\n    t.setNode(start, {});\n    let edge;\n    let delta;\n    while (tightTreeWithLayer(t, g) < size) {\n        edge = findMinSlackEdge(t, g);\n        delta = t.hasNode(edge.v) ? slack(g, edge) : -slack(g, edge);\n        shiftRanks(t, g, delta);\n    }\n    return t;\n};\n/*\n * Finds a maximal tree of tight edges and returns the number of nodes in the\n * tree.\n */\nconst tightTreeWithLayer = (t, g) => {\n    const dfs = (v) => {\n        var _a;\n        (_a = g.nodeEdges(v)) === null || _a === void 0 ? void 0 : _a.forEach((e) => {\n            const edgeV = e.v;\n            const w = (v === edgeV) ? e.w : edgeV;\n            // 对于指定layer的，直接加入tight-tree，不参与调整\n            if (!t.hasNode(w) && (g.node(w).layer !== undefined || !slack(g, e))) {\n                t.setNode(w, {});\n                t.setEdge(v, w, {});\n                dfs(w);\n            }\n        });\n    };\n    t.nodes().forEach(dfs);\n    return t.nodeCount();\n};\n/*\n * Finds the edge with the smallest slack that is incident on tree and returns\n * it.\n */\nconst findMinSlackEdge = (t, g) => {\n    return minBy(g.edges(), (e) => {\n        if (t.hasNode(e.v) !== t.hasNode(e.w)) {\n            return slack(g, e);\n        }\n        return Infinity;\n    });\n};\nconst shiftRanks = (t, g, delta) => {\n    t.nodes().forEach((v) => {\n        if (!g.node(v).rank)\n            g.node(v).rank = 0;\n        g.node(v).rank += delta;\n    });\n};\nexport { feasibleTree, feasibleTreeWithLayer };\nexport default {\n    feasibleTree,\n    feasibleTreeWithLayer\n};\n//# sourceMappingURL=feasible-tree.js.map","import { feasibleTree } from './feasible-tree';\nimport { slack, longestPath as initRank } from './util';\nimport { minBy, simplify } from '../util';\nimport { algorithm } from '@antv/graphlib';\nconst { preorder, postorder } = algorithm;\n/*\n * The network simplex algorithm assigns ranks to each node in the input graph\n * and iteratively improves the ranking to reduce the length of edges.\n *\n * Preconditions:\n *\n *    1. The input graph must be a DAG.\n *    2. All nodes in the graph must have an object value.\n *    3. All edges in the graph must have \"minlen\" and \"weight\" attributes.\n *\n * Postconditions:\n *\n *    1. All nodes in the graph will have an assigned \"rank\" attribute that has\n *       been optimized by the network simplex algorithm. Ranks start at 0.\n *\n *\n * A rough sketch of the algorithm is as follows:\n *\n *    1. Assign initial ranks to each node. We use the longest path algorithm,\n *       which assigns ranks to the lowest position possible. In general this\n *       leads to very wide bottom ranks and unnecessarily long edges.\n *    2. Construct a feasible tight tree. A tight tree is one such that all\n *       edges in the tree have no slack (difference between length of edge\n *       and minlen for the edge). This by itself greatly improves the assigned\n *       rankings by shorting edges.\n *    3. Iteratively find edges that have negative cut values. Generally a\n *       negative cut value indicates that the edge could be removed and a new\n *       tree edge could be added to produce a more compact graph.\n *\n * Much of the algorithms here are derived from Gansner, et al., \"A Technique\n * for Drawing Directed Graphs.\" The structure of the file roughly follows the\n * structure of the overall algorithm.\n */\nconst networkSimplex = (og) => {\n    const g = simplify(og);\n    initRank(g);\n    const t = feasibleTree(g);\n    initLowLimValues(t);\n    initCutValues(t, g);\n    let e;\n    let f;\n    while ((e = leaveEdge(t))) {\n        f = enterEdge(t, g, e);\n        exchangeEdges(t, g, e, f);\n    }\n};\n/*\n * Initializes cut values for all edges in the tree.\n */\nexport const initCutValues = (t, g) => {\n    let vs = postorder(t, t.nodes());\n    vs = vs === null || vs === void 0 ? void 0 : vs.slice(0, (vs === null || vs === void 0 ? void 0 : vs.length) - 1);\n    vs === null || vs === void 0 ? void 0 : vs.forEach((v) => {\n        assignCutValue(t, g, v);\n    });\n};\nconst assignCutValue = (t, g, child) => {\n    const childLab = t.node(child);\n    const parent = childLab.parent;\n    t.edgeFromArgs(child, parent).cutvalue = calcCutValue(t, g, child);\n};\n/*\n * Given the tight tree, its graph, and a child in the graph calculate and\n * return the cut value for the edge between the child and its parent.\n */\nexport const calcCutValue = (t, g, child) => {\n    var _a;\n    const childLab = t.node(child);\n    const parent = childLab.parent;\n    // True if the child is on the tail end of the edge in the directed graph\n    let childIsTail = true;\n    // The graph's view of the tree edge we're inspecting\n    let graphEdge = g.edgeFromArgs(child, parent);\n    // The accumulated cut value for the edge between this node and its parent\n    let cutValue = 0;\n    if (!graphEdge) {\n        childIsTail = false;\n        graphEdge = g.edgeFromArgs(parent, child);\n    }\n    cutValue = graphEdge.weight;\n    (_a = g.nodeEdges(child)) === null || _a === void 0 ? void 0 : _a.forEach((e) => {\n        const isOutEdge = e.v === child;\n        const other = isOutEdge ? e.w : e.v;\n        if (other !== parent) {\n            const pointsToHead = isOutEdge === childIsTail;\n            const otherWeight = g.edge(e).weight;\n            cutValue += pointsToHead ? otherWeight : -otherWeight;\n            if (isTreeEdge(t, child, other)) {\n                const otherCutValue = t.edgeFromArgs(child, other).cutvalue;\n                cutValue += pointsToHead ? -otherCutValue : otherCutValue;\n            }\n        }\n    });\n    return cutValue;\n};\nexport const initLowLimValues = (tree, root = tree.nodes()[0]) => {\n    dfsAssignLowLim(tree, {}, 1, root);\n};\nconst dfsAssignLowLim = (tree, visited, nextLim, v, parent) => {\n    var _a;\n    const low = nextLim;\n    let useNextLim = nextLim;\n    const label = tree.node(v);\n    visited[v] = true;\n    (_a = tree.neighbors(v)) === null || _a === void 0 ? void 0 : _a.forEach((w) => {\n        if (!visited[w]) {\n            useNextLim = dfsAssignLowLim(tree, visited, useNextLim, w, v);\n        }\n    });\n    label.low = low;\n    label.lim = useNextLim++;\n    if (parent) {\n        label.parent = parent;\n    }\n    else {\n        // TODO should be able to remove this when we incrementally update low lim\n        delete label.parent;\n    }\n    return useNextLim;\n};\nexport const leaveEdge = (tree) => {\n    return tree.edges().find((e) => {\n        return tree.edge(e).cutvalue < 0;\n    });\n};\nexport const enterEdge = (t, g, edge) => {\n    let v = edge.v;\n    let w = edge.w;\n    // For the rest of this function we assume that v is the tail and w is the\n    // head, so if we don't have this edge in the graph we should flip it to\n    // match the correct orientation.\n    if (!g.hasEdge(v, w)) {\n        v = edge.w;\n        w = edge.v;\n    }\n    const vLabel = t.node(v);\n    const wLabel = t.node(w);\n    let tailLabel = vLabel;\n    let flip = false;\n    // If the root is in the tail of the edge then we need to flip the logic that\n    // checks for the head and tail nodes in the candidates function below.\n    if (vLabel.lim > wLabel.lim) {\n        tailLabel = wLabel;\n        flip = true;\n    }\n    const candidates = g.edges().filter((edge) => {\n        return flip === isDescendant(t, t.node(edge.v), tailLabel) &&\n            flip !== isDescendant(t, t.node(edge.w), tailLabel);\n    });\n    return minBy(candidates, (edge) => { return slack(g, edge); });\n};\nexport const exchangeEdges = (t, g, e, f) => {\n    const v = e.v;\n    const w = e.w;\n    t.removeEdge(v, w);\n    t.setEdge(f.v, f.w, {});\n    initLowLimValues(t);\n    initCutValues(t, g);\n    updateRanks(t, g);\n};\nconst updateRanks = (t, g) => {\n    const root = t.nodes().find((v) => { var _a; return !((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.parent); });\n    let vs = preorder(t, root);\n    vs = vs === null || vs === void 0 ? void 0 : vs.slice(1);\n    vs === null || vs === void 0 ? void 0 : vs.forEach((v) => {\n        const parent = t.node(v).parent;\n        let edge = g.edgeFromArgs(v, parent);\n        let flipped = false;\n        if (!edge) {\n            edge = g.edgeFromArgs(parent, v);\n            flipped = true;\n        }\n        g.node(v).rank = g.node(parent).rank + (flipped ? edge.minlen : -edge.minlen);\n    });\n};\n/*\n * Returns true if the edge is in the tree.\n */\nconst isTreeEdge = (tree, u, v) => {\n    return tree.hasEdge(u, v);\n};\n/*\n * Returns true if the specified node is descendant of the root node per the\n * assigned low and lim attributes in the tree.\n */\nconst isDescendant = (tree, vLabel, rootLabel) => {\n    return rootLabel.low <= vLabel.lim && vLabel.lim <= rootLabel.lim;\n};\nexport default networkSimplex;\n//# sourceMappingURL=network-simplex.js.map","// \"use strict\";\n// var rankUtil = require(\"./util\");\n// var longestPath = rankUtil.longestPathWithLayer;\n// var feasibleTree = require(\"./feasible-tree\").feasibleTreeWithLayer;\n// var networkSimplex = require(\"./network-simplex\");\nimport { longestPath, longestPathWithLayer } from './util';\nimport { feasibleTreeWithLayer as feasibleTree } from './feasible-tree';\nimport networkSimplex from './network-simplex';\n/*\n * Assigns a rank to each node in the input graph that respects the \"minlen\"\n * constraint specified on edges between nodes.\n *\n * This basic structure is derived from Gansner, et al., \"A Technique for\n * Drawing Directed Graphs.\"\n *\n * Pre-conditions:\n *\n *    1. Graph must be a connected DAG\n *    2. Graph nodes must be objects\n *    3. Graph edges must have \"weight\" and \"minlen\" attributes\n *\n * Post-conditions:\n *\n *    1. Graph nodes will have a \"rank\" attribute based on the results of the\n *       algorithm. Ranks can start at any index (including negative), we'll\n *       fix them up later.\n */\nconst rank = (g) => {\n    switch (g.graph().ranker) {\n        case \"network-simplex\":\n            networkSimplexRanker(g);\n            break;\n        case \"tight-tree\":\n            tightTreeRanker(g);\n            break;\n        case \"longest-path\":\n            longestPathRanker(g);\n            break;\n        // default: networkSimplexRanker(g);\n        default: tightTreeRanker(g);\n    }\n};\n// A fast and simple ranker, but results are far from optimal.\nconst longestPathRanker = longestPath;\nconst tightTreeRanker = (g) => {\n    longestPathWithLayer(g);\n    feasibleTree(g);\n};\nconst networkSimplexRanker = (g) => {\n    networkSimplex(g);\n};\nexport default rank;\n//# sourceMappingURL=index.js.map","// deep first search with both order low for pre, lim for post\nconst dfsBothOrder = (g) => {\n    var _a;\n    const result = {};\n    let lim = 0;\n    const dfs = (v) => {\n        var _a;\n        const low = lim;\n        (_a = g.children(v)) === null || _a === void 0 ? void 0 : _a.forEach(dfs);\n        result[v] = { low, lim: lim++ };\n    };\n    (_a = g.children()) === null || _a === void 0 ? void 0 : _a.forEach(dfs);\n    return result;\n};\n// Find a path from v to w through the lowest common ancestor (LCA). Return the\n// full path and the LCA.\nconst findPath = (g, postorderNums, v, w) => {\n    const vPath = [];\n    const wPath = [];\n    const low = Math.min(postorderNums[v].low, postorderNums[w].low);\n    const lim = Math.max(postorderNums[v].lim, postorderNums[w].lim);\n    let parent;\n    let lca;\n    // Traverse up from v to find the LCA\n    parent = v;\n    do {\n        parent = g.parent(parent);\n        vPath.push(parent);\n    } while (parent &&\n        (postorderNums[parent].low > low || lim > postorderNums[parent].lim));\n    lca = parent;\n    // Traverse from w to LCA\n    parent = w;\n    while (parent && parent !== lca) {\n        wPath.push(parent);\n        parent = g.parent(parent);\n    }\n    return { lca, path: vPath.concat(wPath.reverse()) };\n};\nconst parentDummyChains = (g) => {\n    var _a;\n    const postorderNums = dfsBothOrder(g);\n    (_a = g.graph().dummyChains) === null || _a === void 0 ? void 0 : _a.forEach((startV) => {\n        var _a, _b;\n        let v = startV;\n        let node = g.node(v);\n        const edgeObj = node.edgeObj;\n        if (!edgeObj)\n            return;\n        const pathData = findPath(g, postorderNums, edgeObj.v, edgeObj.w);\n        const path = pathData.path;\n        const lca = pathData.lca;\n        let pathIdx = 0;\n        let pathV = path[pathIdx];\n        let ascending = true;\n        while (v !== edgeObj.w) {\n            node = g.node(v);\n            if (ascending) {\n                while (pathV !== lca && ((_a = g.node(pathV)) === null || _a === void 0 ? void 0 : _a.maxRank) < node.rank) {\n                    pathIdx++;\n                    pathV = path[pathIdx];\n                }\n                if (pathV === lca) {\n                    ascending = false;\n                }\n            }\n            if (!ascending) {\n                while (pathIdx < path.length - 1 &&\n                    ((_b = g.node(path[pathIdx + 1])) === null || _b === void 0 ? void 0 : _b.minRank) <=\n                        node.rank) {\n                    pathIdx++;\n                }\n                pathV = path[pathIdx];\n            }\n            g.setParent(v, pathV);\n            v = g.successors(v)[0];\n        }\n    });\n};\nexport default parentDummyChains;\n//# sourceMappingURL=parent-dummy-chains.js.map","import { addBorderNode, addDummyNode } from \"./util\";\n/*\n * A nesting graph creates dummy nodes for the tops and bottoms of subgraphs,\n * adds appropriate edges to ensure that all cluster nodes are placed between\n * these boundries, and ensures that the graph is connected.\n *\n * In addition we ensure, through the use of the minlen property, that nodes\n * and subgraph border nodes to not end up on the same rank.\n *\n * Preconditions:\n *\n *    1. Input graph is a DAG\n *    2. Nodes in the input graph has a minlen attribute\n *\n * Postconditions:\n *\n *    1. Input graph is connected.\n *    2. Dummy nodes are added for the tops and bottoms of subgraphs.\n *    3. The minlen attribute for nodes is adjusted to ensure nodes do not\n *       get placed on the same rank as subgraph border nodes.\n *\n * The nesting graph idea comes from Sander, \"Layout of Compound Directed\n * Graphs.\"\n */\nconst run = (g) => {\n    var _a;\n    const root = addDummyNode(g, \"root\", {}, \"_root\");\n    const depths = treeDepths(g);\n    let maxDepth = Math.max(...Object.values(depths));\n    if (Math.abs(maxDepth) === Infinity) {\n        maxDepth = 1;\n    }\n    const height = maxDepth - 1; // Note: depths is an Object not an array\n    const nodeSep = 2 * height + 1;\n    g.graph().nestingRoot = root;\n    // Multiply minlen by nodeSep to align nodes on non-border ranks.\n    g.edges().forEach((e) => {\n        g.edge(e).minlen *= nodeSep;\n    });\n    // Calculate a weight that is sufficient to keep subgraphs vertically compact\n    const weight = sumWeights(g) + 1;\n    // Create border nodes and link them up\n    (_a = g.children()) === null || _a === void 0 ? void 0 : _a.forEach((child) => {\n        dfs(g, root, nodeSep, weight, height, depths, child);\n    });\n    // Save the multiplier for node layers for later removal of empty border\n    // layers.\n    g.graph().nodeRankFactor = nodeSep;\n};\nconst dfs = (g, root, nodeSep, weight, height, depths, v) => {\n    const children = g.children(v);\n    if (!(children === null || children === void 0 ? void 0 : children.length)) {\n        if (v !== root) {\n            g.setEdge(root, v, { weight: 0, minlen: nodeSep });\n        }\n        return;\n    }\n    const top = addBorderNode(g, \"_bt\");\n    const bottom = addBorderNode(g, \"_bb\");\n    const label = g.node(v);\n    g.setParent(top, v);\n    label.borderTop = top;\n    g.setParent(bottom, v);\n    label.borderBottom = bottom;\n    children === null || children === void 0 ? void 0 : children.forEach((child) => {\n        dfs(g, root, nodeSep, weight, height, depths, child);\n        const childNode = g.node(child);\n        const childTop = childNode.borderTop ? childNode.borderTop : child;\n        const childBottom = childNode.borderBottom ? childNode.borderBottom : child;\n        const thisWeight = childNode.borderTop ? weight : 2 * weight;\n        const minlen = childTop !== childBottom ? 1 : height - depths[v] + 1;\n        g.setEdge(top, childTop, {\n            minlen,\n            weight: thisWeight,\n            nestingEdge: true,\n        });\n        g.setEdge(childBottom, bottom, {\n            minlen,\n            weight: thisWeight,\n            nestingEdge: true,\n        });\n    });\n    if (!g.parent(v)) {\n        g.setEdge(root, top, { weight: 0, minlen: height + depths[v] });\n    }\n};\nconst treeDepths = (g) => {\n    var _a;\n    const depths = {};\n    const dfs = (v, depth) => {\n        const children = g.children(v);\n        children === null || children === void 0 ? void 0 : children.forEach((child) => dfs(child, depth + 1));\n        depths[v] = depth;\n    };\n    (_a = g.children()) === null || _a === void 0 ? void 0 : _a.forEach((v) => dfs(v, 1));\n    return depths;\n};\nconst sumWeights = (g) => {\n    let result = 0;\n    g.edges().forEach((e) => {\n        result += g.edge(e).weight;\n    });\n    return result;\n};\nconst cleanup = (g) => {\n    const graphLabel = g.graph();\n    graphLabel.nestingRoot && g.removeNode(graphLabel.nestingRoot);\n    delete graphLabel.nestingRoot;\n    g.edges().forEach((e) => {\n        const edge = g.edge(e);\n        if (edge.nestingEdge) {\n            g.removeEdgeObj(e);\n        }\n    });\n};\nexport default { run, cleanup };\n//# sourceMappingURL=nesting-graph.js.map","import { addDummyNode } from \"./util\";\nconst addBorderSegments = (g) => {\n    var _a;\n    const dfs = (v) => {\n        const children = g.children(v);\n        const node = g.node(v);\n        if (children === null || children === void 0 ? void 0 : children.length) {\n            children.forEach((child) => dfs(child));\n        }\n        if (node.hasOwnProperty(\"minRank\")) {\n            node.borderLeft = [];\n            node.borderRight = [];\n            for (let rank = node.minRank, maxRank = node.maxRank + 1; rank < maxRank; rank += 1) {\n                addBorderNode(g, \"borderLeft\", \"_bl\", v, node, rank);\n                addBorderNode(g, \"borderRight\", \"_br\", v, node, rank);\n            }\n        }\n    };\n    (_a = g.children()) === null || _a === void 0 ? void 0 : _a.forEach((child) => dfs(child));\n};\nconst addBorderNode = (g, prop, prefix, sg, sgNode, rank) => {\n    const label = { rank, borderType: prop, width: 0, height: 0 };\n    const prev = sgNode[prop][rank - 1];\n    const curr = addDummyNode(g, \"border\", label, prefix);\n    sgNode[prop][rank] = curr;\n    g.setParent(curr, sg);\n    if (prev) {\n        g.setEdge(prev, curr, { weight: 1 });\n    }\n};\nexport default addBorderSegments;\n//# sourceMappingURL=add-border-segments.js.map","const adjust = (g) => {\n    var _a;\n    const rankDir = (_a = g.graph().rankdir) === null || _a === void 0 ? void 0 : _a.toLowerCase();\n    if (rankDir === \"lr\" || rankDir === \"rl\") {\n        swapWidthHeight(g);\n    }\n};\nconst undo = (g) => {\n    var _a;\n    const rankDir = (_a = g.graph().rankdir) === null || _a === void 0 ? void 0 : _a.toLowerCase();\n    if (rankDir === \"bt\" || rankDir === \"rl\") {\n        reverseY(g);\n    }\n    if (rankDir === \"lr\" || rankDir === \"rl\") {\n        swapXY(g);\n        swapWidthHeight(g);\n    }\n};\nconst swapWidthHeight = (g) => {\n    g.nodes().forEach((v) => {\n        swapWidthHeightOne(g.node(v));\n    });\n    g.edges().forEach((e) => {\n        swapWidthHeightOne(g.edge(e));\n    });\n};\nconst swapWidthHeightOne = (attrs) => {\n    const w = attrs.width;\n    attrs.width = attrs.height;\n    attrs.height = w;\n};\nconst reverseY = (g) => {\n    g.nodes().forEach((v) => {\n        reverseYOne(g.node(v));\n    });\n    g.edges().forEach((e) => {\n        var _a;\n        const edge = g.edge(e);\n        (_a = edge.points) === null || _a === void 0 ? void 0 : _a.forEach((point) => reverseYOne(point));\n        if (edge.hasOwnProperty(\"y\")) {\n            reverseYOne(edge);\n        }\n    });\n};\nconst reverseYOne = (attrs) => {\n    if (attrs === null || attrs === void 0 ? void 0 : attrs.y) {\n        attrs.y = -attrs.y;\n    }\n};\nconst swapXY = (g) => {\n    g.nodes().forEach((v) => {\n        swapXYOne(g.node(v));\n    });\n    g.edges().forEach((e) => {\n        var _a;\n        const edge = g.edge(e);\n        (_a = edge.points) === null || _a === void 0 ? void 0 : _a.forEach((point) => swapXYOne(point));\n        if (edge.hasOwnProperty(\"x\")) {\n            swapXYOne(edge);\n        }\n    });\n};\nconst swapXYOne = (attrs) => {\n    const x = attrs.x;\n    attrs.x = attrs.y;\n    attrs.y = x;\n};\nexport default { adjust, undo };\n//# sourceMappingURL=coordinate-system.js.map","var toString = {}.toString;\nvar isType = function (value, type) { return toString.call(value) === '[object ' + type + ']'; };\nexport default isType;\n//# sourceMappingURL=is-type.js.map","import isType from './is-type';\nexport default (function (value) {\n    return Array.isArray ? Array.isArray(value) : isType(value, 'Array');\n});\n//# sourceMappingURL=is-array.js.map","import isArray from './is-array';\n/**\n * @param {Array} arr The array to iterate over.\n * @return {*} Returns the maximum value.\n * @example\n *\n * max([1, 2]);\n * // => 2\n *\n * max([]);\n * // => undefined\n *\n * const data = new Array(1250010).fill(1).map((d,idx) => idx);\n *\n * max(data);\n * // => 1250010\n * // Math.max(...data) will encounter \"Maximum call stack size exceeded\" error\n */\nexport default (function (arr) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    return arr.reduce(function (prev, curr) {\n        return Math.max(prev, curr);\n    }, arr[0]);\n});\n//# sourceMappingURL=max.js.map","import { max } from '@antv/util';\n/*\n * Assigns an initial order value for each node by performing a DFS search\n * starting from nodes in the first rank. Nodes are assigned an order in their\n * rank as they are first visited.\n *\n * This approach comes from Gansner, et al., \"A Technique for Drawing Directed\n * Graphs.\"\n *\n * Returns a layering matrix with an array per layer and each layer sorted by\n * the order of its nodes.\n */\nconst initOrder = (g) => {\n    const visited = {};\n    const simpleNodes = g.nodes().filter((v) => {\n        var _a;\n        return !((_a = g.children(v)) === null || _a === void 0 ? void 0 : _a.length);\n    });\n    const nodeRanks = simpleNodes.map((v) => g.node(v).rank);\n    const maxRank = max(nodeRanks);\n    const layers = [];\n    for (let i = 0; i < maxRank + 1; i++) {\n        layers.push([]);\n    }\n    const dfs = (v) => {\n        var _a;\n        if (visited.hasOwnProperty(v))\n            return;\n        visited[v] = true;\n        const node = g.node(v);\n        if (!isNaN(node.rank)) {\n            layers[node.rank].push(v);\n        }\n        (_a = g.successors(v)) === null || _a === void 0 ? void 0 : _a.forEach((child) => dfs(child));\n    };\n    const orderedVs = simpleNodes.sort((a, b) => g.node(a).rank - g.node(b).rank);\n    // const orderedVs = _.sortBy(simpleNodes, function(v) { return g.node(v)!.rank; });\n    // 有fixOrder的，直接排序好放进去\n    const beforeSort = orderedVs.filter((n) => {\n        return g.node(n).fixorder !== undefined;\n    });\n    const fixOrderNodes = beforeSort.sort((a, b) => g.node(a).fixorder - g.node(b).fixorder);\n    fixOrderNodes === null || fixOrderNodes === void 0 ? void 0 : fixOrderNodes.forEach((n) => {\n        if (!isNaN(g.node(n).rank)) {\n            layers[g.node(n).rank].push(n);\n        }\n        visited[n] = true;\n    });\n    orderedVs === null || orderedVs === void 0 ? void 0 : orderedVs.forEach(dfs);\n    return layers;\n};\nexport default initOrder;\n//# sourceMappingURL=init-order.js.map","/*\n * A function that takes a layering (an array of layers, each with an array of\n * ordererd nodes) and a graph and returns a weighted crossing count.\n *\n * Pre-conditions:\n *\n *    1. Input graph must be simple (not a multigraph), directed, and include\n *       only simple edges.\n *    2. Edges in the input graph must have assigned weights.\n *\n * Post-conditions:\n *\n *    1. The graph and layering matrix are left unchanged.\n *\n * This algorithm is derived from Barth, et al., \"Bilayer Cross Counting.\"\n */\nimport { zipObject } from \"../util\";\nconst twoLayerCrossCount = (g, northLayer, southLayer) => {\n    // Sort all of the edges between the north and south layers by their position\n    // in the north layer and then the south. Map these edges to the position of\n    // their head in the south layer.\n    const southPos = zipObject(southLayer, southLayer.map((v, i) => i));\n    const unflat = northLayer.map((v) => {\n        var _a;\n        const unsort = (_a = g.outEdges(v)) === null || _a === void 0 ? void 0 : _a.map((e) => {\n            return { pos: southPos[e.w] || 0, weight: g.edge(e).weight };\n        });\n        return unsort === null || unsort === void 0 ? void 0 : unsort.sort((a, b) => a.pos - b.pos);\n    });\n    const southEntries = unflat.flat().filter((entry) => entry !== undefined);\n    // Build the accumulator tree\n    let firstIndex = 1;\n    while (firstIndex < southLayer.length)\n        firstIndex <<= 1;\n    const treeSize = 2 * firstIndex - 1;\n    firstIndex -= 1;\n    const tree = Array(treeSize).fill(0, 0, treeSize);\n    // Calculate the weighted crossings\n    let cc = 0;\n    southEntries === null || southEntries === void 0 ? void 0 : southEntries.forEach((entry) => {\n        if (entry) {\n            let index = entry.pos + firstIndex;\n            tree[index] += entry.weight;\n            let weightSum = 0;\n            while (index > 0) {\n                if (index % 2) {\n                    weightSum += tree[index + 1];\n                }\n                index = (index - 1) >> 1;\n                tree[index] += entry.weight;\n            }\n            cc += entry.weight * weightSum;\n        }\n    });\n    return cc;\n};\nconst crossCount = (g, layering) => {\n    let cc = 0;\n    for (let i = 1; i < (layering === null || layering === void 0 ? void 0 : layering.length); i += 1) {\n        cc += twoLayerCrossCount(g, layering[i - 1], layering[i]);\n    }\n    return cc;\n};\nexport default crossCount;\n//# sourceMappingURL=cross-count.js.map","import { Graph } from \"../../graph\";\n/*\n * Constructs a graph that can be used to sort a layer of nodes. The graph will\n * contain all base and subgraph nodes from the request layer in their original\n * hierarchy and any edges that are incident on these nodes and are of the type\n * requested by the \"relationship\" parameter.\n *\n * Nodes from the requested rank that do not have parents are assigned a root\n * node in the output graph, which is set in the root graph attribute. This\n * makes it easy to walk the hierarchy of movable nodes during ordering.\n *\n * Pre-conditions:\n *\n *    1. Input graph is a DAG\n *    2. Base nodes in the input graph have a rank attribute\n *    3. Subgraph nodes in the input graph has minRank and maxRank attributes\n *    4. Edges have an assigned weight\n *\n * Post-conditions:\n *\n *    1. Output graph has all nodes in the movable rank with preserved\n *       hierarchy.\n *    2. Root nodes in the movable layer are made children of the node\n *       indicated by the root attribute of the graph.\n *    3. Non-movable nodes incident on movable nodes, selected by the\n *       relationship parameter, are included in the graph (without hierarchy).\n *    4. Edges incident on movable nodes, selected by the relationship\n *       parameter, are added to the output graph.\n *    5. The weights for copied edges are aggregated as need, since the output\n *       graph is not a multi-graph.\n */\nconst buildLayerGraph = (g, rank, relationship) => {\n    const root = createRootNode(g);\n    const result = new Graph({ compound: true })\n        .setGraph({ root })\n        .setDefaultNodeLabel((v) => {\n        return g.node(v);\n    });\n    g.nodes().forEach((v) => {\n        var _a;\n        const node = g.node(v);\n        const parent = g.parent(v);\n        if (node.rank === rank ||\n            (node.minRank <= rank && rank <= node.maxRank)) {\n            result.setNode(v);\n            result.setParent(v, parent || root);\n            // This assumes we have only short edges!\n            (_a = g[relationship](v)) === null || _a === void 0 ? void 0 : _a.forEach((e) => {\n                const u = e.v === v ? e.w : e.v;\n                const edge = result.edgeFromArgs(u, v);\n                const weight = edge !== undefined ? edge.weight : 0;\n                result.setEdge(u, v, { weight: g.edge(e).weight + weight });\n            });\n            if (node.hasOwnProperty(\"minRank\")) {\n                result.setNode(v, {\n                    borderLeft: node.borderLeft[rank],\n                    borderRight: node.borderRight[rank],\n                });\n            }\n        }\n    });\n    return result;\n};\nconst createRootNode = (g) => {\n    let v;\n    while (g.hasNode((v = `_root${Math.random()}`)))\n        ;\n    return v;\n};\nexport default buildLayerGraph;\n//# sourceMappingURL=build-layer-graph.js.map","const addSubgraphConstraints = (g, cg, vs) => {\n    const prev = {};\n    let rootPrev;\n    vs === null || vs === void 0 ? void 0 : vs.forEach((v) => {\n        let child = g.parent(v);\n        let parent;\n        let prevChild;\n        while (child) {\n            parent = g.parent(child);\n            if (parent) {\n                prevChild = prev[parent];\n                prev[parent] = child;\n            }\n            else {\n                prevChild = rootPrev;\n                rootPrev = child;\n            }\n            if (prevChild && prevChild !== child) {\n                cg.setEdge(prevChild, child);\n                return;\n            }\n            child = parent;\n        }\n    });\n};\nexport default addSubgraphConstraints;\n//# sourceMappingURL=add-subgraph-constraints.js.map","const barycenter = (g, movable) => {\n    return movable.map((v) => {\n        const inV = g.inEdges(v);\n        if (!(inV === null || inV === void 0 ? void 0 : inV.length)) {\n            return { v };\n        }\n        {\n            const result = { sum: 0, weight: 0 };\n            inV === null || inV === void 0 ? void 0 : inV.forEach((e) => {\n                const edge = g.edge(e);\n                const nodeU = g.node(e.v);\n                result.sum += (edge.weight * nodeU.order);\n                result.weight += edge.weight;\n            });\n            return {\n                v,\n                barycenter: result.sum / result.weight,\n                weight: result.weight\n            };\n        }\n    });\n};\nexport default barycenter;\n//# sourceMappingURL=barycenter.js.map","const resolveConflicts = (entries, cg) => {\n    var _a, _b, _c;\n    const mappedEntries = {};\n    entries === null || entries === void 0 ? void 0 : entries.forEach((entry, i) => {\n        mappedEntries[entry.v] = {\n            i,\n            indegree: 0,\n            in: [],\n            out: [],\n            vs: [entry.v],\n        };\n        const tmp = mappedEntries[entry.v];\n        if (entry.barycenter !== undefined) {\n            tmp.barycenter = entry.barycenter;\n            tmp.weight = entry.weight;\n        }\n    });\n    (_a = cg.edges()) === null || _a === void 0 ? void 0 : _a.forEach((e) => {\n        const entryV = mappedEntries[e.v];\n        const entryW = mappedEntries[e.w];\n        if (entryV !== undefined && entryW !== undefined) {\n            entryW.indegree++;\n            entryV.out.push(mappedEntries[e.w]);\n        }\n    });\n    const sourceSet = (_c = (_b = Object.values(mappedEntries)).filter) === null || _c === void 0 ? void 0 : _c.call(_b, (entry) => !entry.indegree);\n    return doResolveConflicts(sourceSet);\n};\nconst doResolveConflicts = (sourceSet) => {\n    var _a, _b;\n    const entries = [];\n    const handleIn = (vEntry) => {\n        return (uEntry) => {\n            if (uEntry.merged)\n                return;\n            if (uEntry.barycenter === undefined ||\n                vEntry.barycenter === undefined ||\n                uEntry.barycenter >= vEntry.barycenter) {\n                mergeEntries(vEntry, uEntry);\n            }\n        };\n    };\n    const handleOut = (vEntry) => {\n        return (wEntry) => {\n            wEntry[\"in\"].push(vEntry);\n            if (--wEntry.indegree === 0) {\n                sourceSet.push(wEntry);\n            }\n        };\n    };\n    while (sourceSet === null || sourceSet === void 0 ? void 0 : sourceSet.length) {\n        const entry = sourceSet.pop();\n        entries.push(entry);\n        (_a = entry[\"in\"].reverse()) === null || _a === void 0 ? void 0 : _a.forEach((e) => handleIn(entry)(e));\n        (_b = entry.out) === null || _b === void 0 ? void 0 : _b.forEach((e) => handleOut(entry)(e));\n    }\n    const filtered = entries.filter((entry) => !entry.merged);\n    const keys = [\n        \"vs\",\n        \"i\",\n        \"barycenter\",\n        \"weight\",\n    ];\n    return filtered.map((entry) => {\n        const picked = {};\n        keys === null || keys === void 0 ? void 0 : keys.forEach((key) => {\n            if (entry[key] === undefined)\n                return;\n            picked[key] = entry[key];\n        });\n        return picked;\n    });\n};\nconst mergeEntries = (target, source) => {\n    var _a;\n    let sum = 0;\n    let weight = 0;\n    if (target.weight) {\n        sum += target.barycenter * target.weight;\n        weight += target.weight;\n    }\n    if (source.weight) {\n        sum += source.barycenter * source.weight;\n        weight += source.weight;\n    }\n    target.vs = (_a = source.vs) === null || _a === void 0 ? void 0 : _a.concat(target.vs);\n    target.barycenter = sum / weight;\n    target.weight = weight;\n    target.i = Math.min(source.i, target.i);\n    source.merged = true;\n};\nexport default resolveConflicts;\n//# sourceMappingURL=resolve-conflicts.js.map","import { partition } from \"../util\";\nconst sort = (entries, biasRight, usePrev, keepNodeOrder) => {\n    const parts = partition(entries, (entry) => {\n        const hasFixOrder = entry.hasOwnProperty(\"fixorder\") && !isNaN(entry.fixorder);\n        if (keepNodeOrder)\n            return !hasFixOrder && entry.hasOwnProperty(\"barycenter\");\n        // NOTE: 有fixorder的也可以排\n        return hasFixOrder || entry.hasOwnProperty(\"barycenter\");\n    });\n    const sortable = parts.lhs;\n    const unsortable = parts.rhs.sort((a, b) => -a.i - (-b.i));\n    const vs = [];\n    let sum = 0;\n    let weight = 0;\n    let vsIndex = 0;\n    sortable === null || sortable === void 0 ? void 0 : sortable.sort(compareWithBias(!!biasRight, !!usePrev));\n    vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n    sortable === null || sortable === void 0 ? void 0 : sortable.forEach((entry) => {\n        var _a;\n        vsIndex += (_a = entry.vs) === null || _a === void 0 ? void 0 : _a.length;\n        vs.push(entry.vs);\n        sum += entry.barycenter * entry.weight;\n        weight += entry.weight;\n        vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n    });\n    const result = { vs: vs.flat() };\n    if (weight) {\n        result.barycenter = sum / weight;\n        result.weight = weight;\n    }\n    return result;\n};\nconst consumeUnsortable = (vs, unsortable, index) => {\n    let iindex = index;\n    let last;\n    while (unsortable.length && (last = unsortable[unsortable.length - 1]).i <= iindex) {\n        unsortable.pop();\n        vs === null || vs === void 0 ? void 0 : vs.push(last.vs);\n        iindex++;\n    }\n    return iindex;\n};\n/**\n * 配置是否考虑使用之前的布局结果\n */\nconst compareWithBias = (bias, usePrev) => {\n    return (entryV, entryW) => {\n        // 排序的时候先判断fixorder，不行再判断重心\n        if (entryV.fixorder !== undefined && entryW.fixorder !== undefined) {\n            return entryV.fixorder - entryW.fixorder;\n        }\n        if (entryV.barycenter < entryW.barycenter) {\n            return -1;\n        }\n        if (entryV.barycenter > entryW.barycenter) {\n            return 1;\n        }\n        // 重心相同，考虑之前排好的顺序\n        if (usePrev && entryV.order !== undefined && entryW.order !== undefined) {\n            if (entryV.order < entryW.order) {\n                return -1;\n            }\n            if (entryV.order > entryW.order) {\n                return 1;\n            }\n        }\n        return !bias ? entryV.i - entryW.i : entryW.i - entryV.i;\n    };\n};\nexport default sort;\n//# sourceMappingURL=sort.js.map","import barycenter from \"./barycenter\";\nimport resolveConflicts from \"./resolve-conflicts\";\nimport sort from \"./sort\";\nconst sortSubgraph = (g, v, cg, biasRight, usePrev, keepNodeOrder) => {\n    var _a, _b, _c, _d;\n    let movable = g.children(v);\n    // fixorder的点不参与排序（这个方案不合适，只排了新增节点，和原来的分离）\n    const node = g.node(v);\n    const bl = node ? node.borderLeft : undefined;\n    const br = node ? node.borderRight : undefined;\n    const subgraphs = {};\n    if (bl) {\n        movable = movable === null || movable === void 0 ? void 0 : movable.filter((w) => {\n            return w !== bl && w !== br;\n        });\n    }\n    const barycenters = barycenter(g, movable || []);\n    barycenters === null || barycenters === void 0 ? void 0 : barycenters.forEach((entry) => {\n        var _a;\n        if ((_a = g.children(entry.v)) === null || _a === void 0 ? void 0 : _a.length) {\n            const subgraphResult = sortSubgraph(g, entry.v, cg, biasRight, keepNodeOrder);\n            subgraphs[entry.v] = subgraphResult;\n            if (subgraphResult.hasOwnProperty(\"barycenter\")) {\n                mergeBarycenters(entry, subgraphResult);\n            }\n        }\n    });\n    const entries = resolveConflicts(barycenters, cg);\n    expandSubgraphs(entries, subgraphs);\n    // 添加fixorder信息到entries里边\n    // TODO: 不考虑复合情况，只用第一个点的fixorder信息，后续考虑更完备的实现\n    (_a = entries\n        .filter((e) => e.vs.length > 0)) === null || _a === void 0 ? void 0 : _a.forEach((e) => {\n        const node = g.node(e.vs[0]);\n        if (node) {\n            e.fixorder = node.fixorder;\n            e.order = node.order;\n        }\n    });\n    const result = sort(entries, biasRight, usePrev, keepNodeOrder);\n    if (bl) {\n        result.vs = [bl, result.vs, br].flat();\n        if ((_b = g.predecessors(bl)) === null || _b === void 0 ? void 0 : _b.length) {\n            const blPred = g.node(((_c = g.predecessors(bl)) === null || _c === void 0 ? void 0 : _c[0]) || \"\");\n            const brPred = g.node(((_d = g.predecessors(br)) === null || _d === void 0 ? void 0 : _d[0]) || \"\");\n            if (!result.hasOwnProperty(\"barycenter\")) {\n                result.barycenter = 0;\n                result.weight = 0;\n            }\n            result.barycenter =\n                (result.barycenter * result.weight +\n                    blPred.order +\n                    brPred.order) /\n                    (result.weight + 2);\n            result.weight += 2;\n        }\n    }\n    return result;\n};\nconst expandSubgraphs = (entries, subgraphs) => {\n    entries === null || entries === void 0 ? void 0 : entries.forEach((entry) => {\n        var _a;\n        const vss = (_a = entry.vs) === null || _a === void 0 ? void 0 : _a.map((v) => {\n            if (subgraphs[v]) {\n                return subgraphs[v].vs;\n            }\n            return v;\n        });\n        entry.vs = vss.flat();\n    });\n};\nconst mergeBarycenters = (target, other) => {\n    if (target.barycenter !== undefined) {\n        target.barycenter =\n            (target.barycenter * target.weight + other.barycenter * other.weight) /\n                (target.weight + other.weight);\n        target.weight += other.weight;\n    }\n    else {\n        target.barycenter = other.barycenter;\n        target.weight = other.weight;\n    }\n};\nexport default sortSubgraph;\n//# sourceMappingURL=sort-subgraph.js.map","import initOrder from \"./init-order\";\nimport crossCount from \"./cross-count\";\nimport buildLayerGraph from \"./build-layer-graph\";\nimport addSubgraphConstraints from \"./add-subgraph-constraints\";\nimport sortSubgraph from \"./sort-subgraph\";\nimport { clone } from \"../../../../util\";\nimport { Graph } from \"../../graph\";\nimport { buildLayerMatrix, maxRank } from \"../util\";\n/*\n * Applies heuristics to minimize edge crossings in the graph and sets the best\n * order solution as an order attribute on each node.\n *\n * Pre-conditions:\n *\n *    1. Graph must be DAG\n *    2. Graph nodes must be objects with a \"rank\" attribute\n *    3. Graph edges must have the \"weight\" attribute\n *\n * Post-conditions:\n *\n *    1. Graph nodes will have an \"order\" attribute based on the results of the\n *       algorithm.\n */\nconst order = (g, keepNodeOrder) => {\n    const mxRank = maxRank(g);\n    const range1 = [];\n    const range2 = [];\n    for (let i = 1; i < mxRank + 1; i++)\n        range1.push(i);\n    for (let i = mxRank - 1; i > -1; i--)\n        range2.push(i);\n    const downLayerGraphs = buildLayerGraphs(g, range1, \"inEdges\");\n    const upLayerGraphs = buildLayerGraphs(g, range2, \"outEdges\");\n    let layering = initOrder(g);\n    assignOrder(g, layering);\n    let bestCC = Number.POSITIVE_INFINITY;\n    let best;\n    for (let i = 0, lastBest = 0; lastBest < 4; ++i, ++lastBest) {\n        sweepLayerGraphs(i % 2 ? downLayerGraphs : upLayerGraphs, i % 4 >= 2, false, keepNodeOrder);\n        layering = buildLayerMatrix(g);\n        const cc = crossCount(g, layering);\n        if (cc < bestCC) {\n            lastBest = 0;\n            best = clone(layering);\n            bestCC = cc;\n        }\n    }\n    // consider use previous result, maybe somewhat reduendant\n    layering = initOrder(g);\n    assignOrder(g, layering);\n    for (let i = 0, lastBest = 0; lastBest < 4; ++i, ++lastBest) {\n        sweepLayerGraphs(i % 2 ? downLayerGraphs : upLayerGraphs, i % 4 >= 2, true, keepNodeOrder);\n        layering = buildLayerMatrix(g);\n        const cc = crossCount(g, layering);\n        if (cc < bestCC) {\n            lastBest = 0;\n            best = clone(layering);\n            bestCC = cc;\n        }\n    }\n    assignOrder(g, best);\n};\nconst buildLayerGraphs = (g, ranks, relationship) => {\n    return ranks.map((rank) => {\n        return buildLayerGraph(g, rank, relationship);\n    });\n};\nconst sweepLayerGraphs = (layerGraphs, biasRight, usePrev, keepNodeOrder) => {\n    const cg = new Graph();\n    layerGraphs === null || layerGraphs === void 0 ? void 0 : layerGraphs.forEach((lg) => {\n        var _a;\n        const root = lg.graph().root;\n        const sorted = sortSubgraph(lg, root, cg, biasRight, usePrev, keepNodeOrder);\n        for (let i = 0; i < ((_a = sorted.vs) === null || _a === void 0 ? void 0 : _a.length) || 0; i++) {\n            const lnode = lg.node(sorted.vs[i]);\n            if (lnode) {\n                lnode.order = i;\n            }\n        }\n        addSubgraphConstraints(lg, cg, sorted.vs);\n    });\n};\nconst assignOrder = (g, layering) => {\n    layering === null || layering === void 0 ? void 0 : layering.forEach((layer) => {\n        layer === null || layer === void 0 ? void 0 : layer.forEach((v, i) => {\n            g.node(v).order = i;\n        });\n    });\n};\nexport default order;\n//# sourceMappingURL=index.js.map","import isArray from './is-array';\n/**\n * @param {Array} arr The array to iterate over.\n * @return {*} Returns the minimum value.\n * @example\n *\n * min([1, 2]);\n * // => 1\n *\n * min([]);\n * // => undefined\n *\n * const data = new Array(1250010).fill(1).map((d,idx) => idx);\n *\n * min(data);\n * // => 1250010\n * // Math.min(...data) will encounter \"Maximum call stack size exceeded\" error\n */\nexport default (function (arr) {\n    if (!isArray(arr)) {\n        return undefined;\n    }\n    return arr.reduce(function (prev, curr) {\n        return Math.min(prev, curr);\n    }, arr[0]);\n});\n//# sourceMappingURL=min.js.map","/*\n * This module provides coordinate assignment based on Brandes and Köpf, \"Fast\n * and Simple Horizontal Coordinate Assignment.\"\n */\nimport { Graph as RawGraph } from \"@antv/graphlib\";\nimport { max, min } from '@antv/util';\nimport { buildLayerMatrix, minBy } from \"../util\";\nclass BlockGraph extends RawGraph {\n}\nexport const findType1Conflicts = (g, layering) => {\n    const conflicts = {};\n    const visitLayer = (prevLayer, layer) => {\n        // last visited node in the previous layer that is incident on an inner\n        // segment.\n        let k0 = 0;\n        // Tracks the last node in this layer scanned for crossings with a type-1\n        // segment.\n        let scanPos = 0;\n        const prevLayerLength = prevLayer.length;\n        const lastNode = layer === null || layer === void 0 ? void 0 : layer[(layer === null || layer === void 0 ? void 0 : layer.length) - 1];\n        layer === null || layer === void 0 ? void 0 : layer.forEach((v, i) => {\n            var _a;\n            const w = findOtherInnerSegmentNode(g, v);\n            const k1 = w ? g.node(w).order : prevLayerLength;\n            if (w || v === lastNode) {\n                (_a = layer.slice(scanPos, i + 1)) === null || _a === void 0 ? void 0 : _a.forEach((scanNode) => {\n                    var _a;\n                    (_a = g.predecessors(scanNode)) === null || _a === void 0 ? void 0 : _a.forEach((u) => {\n                        var _a;\n                        const uLabel = g.node(u);\n                        const uPos = uLabel.order;\n                        if ((uPos < k0 || k1 < uPos) &&\n                            !(uLabel.dummy && ((_a = g.node(scanNode)) === null || _a === void 0 ? void 0 : _a.dummy))) {\n                            addConflict(conflicts, u, scanNode);\n                        }\n                    });\n                });\n                scanPos = i + 1;\n                k0 = k1;\n            }\n        });\n        return layer;\n    };\n    if (layering === null || layering === void 0 ? void 0 : layering.length) {\n        layering.reduce(visitLayer);\n    }\n    return conflicts;\n};\nexport const findType2Conflicts = (g, layering) => {\n    const conflicts = {};\n    function scan(south, southPos, southEnd, prevNorthBorder, nextNorthBorder) {\n        var _a, _b;\n        let v;\n        for (let i = southPos; i < southEnd; i++) {\n            v = south[i];\n            if ((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.dummy) {\n                (_b = g.predecessors(v)) === null || _b === void 0 ? void 0 : _b.forEach((u) => {\n                    const uNode = g.node(u);\n                    if (uNode.dummy &&\n                        (uNode.order < prevNorthBorder ||\n                            uNode.order > nextNorthBorder)) {\n                        addConflict(conflicts, u, v);\n                    }\n                });\n            }\n        }\n    }\n    ;\n    function getScannedKey(params) {\n        // south数组可能很大，不适合做key\n        return JSON.stringify(params.slice(1));\n    }\n    function scanIfNeeded(params, scanCache) {\n        const cacheKey = getScannedKey(params);\n        if (scanCache.get(cacheKey))\n            return;\n        scan(...params);\n        scanCache.set(cacheKey, true);\n    }\n    const visitLayer = (north, south) => {\n        let prevNorthPos = -1;\n        let nextNorthPos;\n        let southPos = 0;\n        const scanned = new Map();\n        south === null || south === void 0 ? void 0 : south.forEach((v, southLookahead) => {\n            var _a;\n            if (((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.dummy) === \"border\") {\n                const predecessors = g.predecessors(v) || [];\n                if (predecessors.length) {\n                    nextNorthPos = g.node(predecessors[0]).order;\n                    scanIfNeeded([south, southPos, southLookahead, prevNorthPos, nextNorthPos], scanned);\n                    southPos = southLookahead;\n                    prevNorthPos = nextNorthPos;\n                }\n            }\n            scanIfNeeded([south, southPos, south.length, nextNorthPos, north.length], scanned);\n        });\n        return south;\n    };\n    if (layering === null || layering === void 0 ? void 0 : layering.length) {\n        layering.reduce(visitLayer);\n    }\n    return conflicts;\n};\nexport const findOtherInnerSegmentNode = (g, v) => {\n    var _a, _b;\n    if ((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.dummy) {\n        return (_b = g.predecessors(v)) === null || _b === void 0 ? void 0 : _b.find((u) => g.node(u).dummy);\n    }\n};\nexport const addConflict = (conflicts, v, w) => {\n    let vv = v;\n    let ww = w;\n    if (vv > ww) {\n        const tmp = vv;\n        vv = ww;\n        ww = tmp;\n    }\n    let conflictsV = conflicts[vv];\n    if (!conflictsV) {\n        conflicts[vv] = conflictsV = {};\n    }\n    conflictsV[ww] = true;\n};\nexport const hasConflict = (conflicts, v, w) => {\n    let vv = v;\n    let ww = w;\n    if (vv > ww) {\n        const tmp = v;\n        vv = ww;\n        ww = tmp;\n    }\n    return !!conflicts[vv];\n};\n/*\n * Try to align nodes into vertical \"blocks\" where possible. This algorithm\n * attempts to align a node with one of its median neighbors. If the edge\n * connecting a neighbor is a type-1 conflict then we ignore that possibility.\n * If a previous node has already formed a block with a node after the node\n * we're trying to form a block with, we also ignore that possibility - our\n * blocks would be split in that scenario.\n */\nexport const verticalAlignment = (g, layering, conflicts, neighborFn) => {\n    const root = {};\n    const align = {};\n    const pos = {};\n    // We cache the position here based on the layering because the graph and\n    // layering may be out of sync. The layering matrix is manipulated to\n    // generate different extreme alignments.\n    layering === null || layering === void 0 ? void 0 : layering.forEach((layer) => {\n        layer === null || layer === void 0 ? void 0 : layer.forEach((v, order) => {\n            root[v] = v;\n            align[v] = v;\n            pos[v] = order;\n        });\n    });\n    layering === null || layering === void 0 ? void 0 : layering.forEach((layer) => {\n        let prevIdx = -1;\n        layer === null || layer === void 0 ? void 0 : layer.forEach((v) => {\n            let ws = neighborFn(v);\n            if (ws.length) {\n                ws = ws.sort((a, b) => pos[a] - pos[b]);\n                const mp = (ws.length - 1) / 2;\n                for (let i = Math.floor(mp), il = Math.ceil(mp); i <= il; ++i) {\n                    const w = ws[i];\n                    if (align[v] === v &&\n                        prevIdx < pos[w] &&\n                        !hasConflict(conflicts, v, w)) {\n                        align[w] = v;\n                        align[v] = root[v] = root[w];\n                        prevIdx = pos[w];\n                    }\n                }\n            }\n        });\n    });\n    return { root, align };\n};\nexport const horizontalCompaction = (g, layering, root, align, reverseSep) => {\n    var _a;\n    // This portion of the algorithm differs from BK due to a number of problems.\n    // Instead of their algorithm we construct a new block graph and do two\n    // sweeps. The first sweep places blocks with the smallest possible\n    // coordinates. The second sweep removes unused space by moving blocks to the\n    // greatest coordinates without violating separation.\n    const xs = {};\n    const blockG = buildBlockGraph(g, layering, root, reverseSep);\n    const borderType = reverseSep ? \"borderLeft\" : \"borderRight\";\n    const iterate = (setXsFunc, nextNodesFunc) => {\n        let stack = blockG.nodes();\n        let elem = stack.pop();\n        const visited = {};\n        while (elem) {\n            if (visited[elem]) {\n                setXsFunc(elem);\n            }\n            else {\n                visited[elem] = true;\n                stack.push(elem);\n                stack = stack.concat(nextNodesFunc(elem));\n            }\n            elem = stack.pop();\n        }\n    };\n    // First pass, assign smallest coordinates\n    const pass1 = (elem) => {\n        xs[elem] = (blockG.inEdges(elem) || []).reduce((acc, e) => {\n            return Math.max(acc, (xs[e.v] || 0) + blockG.edge(e));\n        }, 0);\n    };\n    // Second pass, assign greatest coordinates\n    const pass2 = (elem) => {\n        const min = (blockG.outEdges(elem) || []).reduce((acc, e) => {\n            return Math.min(acc, (xs[e.w] || 0) - blockG.edge(e));\n        }, Number.POSITIVE_INFINITY);\n        const node = g.node(elem);\n        if (min !== Number.POSITIVE_INFINITY && node.borderType !== borderType) {\n            xs[elem] = Math.max(xs[elem], min);\n        }\n    };\n    iterate(pass1, blockG.predecessors.bind(blockG));\n    iterate(pass2, blockG.successors.bind(blockG));\n    // Assign x coordinates to all nodes\n    (_a = Object.values(align)) === null || _a === void 0 ? void 0 : _a.forEach((v) => {\n        xs[v] = xs[root[v]];\n    });\n    return xs;\n};\nexport const buildBlockGraph = (g, layering, root, reverseSep) => {\n    const blockGraph = new BlockGraph();\n    const graphLabel = g.graph();\n    const sepFn = sep(graphLabel.nodesep, graphLabel.edgesep, reverseSep);\n    layering === null || layering === void 0 ? void 0 : layering.forEach((layer) => {\n        let u;\n        layer === null || layer === void 0 ? void 0 : layer.forEach((v) => {\n            const vRoot = root[v];\n            blockGraph.setNode(vRoot);\n            if (u) {\n                const uRoot = root[u];\n                const prevMax = blockGraph.edgeFromArgs(uRoot, vRoot);\n                blockGraph.setEdge(uRoot, vRoot, Math.max(sepFn(g, v, u), prevMax || 0));\n            }\n            u = v;\n        });\n    });\n    return blockGraph;\n};\n/*\n * Returns the alignment that has the smallest width of the given alignments.\n */\nexport const findSmallestWidthAlignment = (g, xss) => {\n    return minBy(Object.values(xss), (xs) => {\n        var _a;\n        let max = Number.NEGATIVE_INFINITY;\n        let min = Number.POSITIVE_INFINITY;\n        (_a = Object.keys(xs)) === null || _a === void 0 ? void 0 : _a.forEach((v) => {\n            const x = xs[v];\n            const halfWidth = width(g, v) / 2;\n            max = Math.max(x + halfWidth, max);\n            min = Math.min(x - halfWidth, min);\n        });\n        return max - min;\n    });\n};\n/*\n * Align the coordinates of each of the layout alignments such that\n * left-biased alignments have their minimum coordinate at the same point as\n * the minimum coordinate of the smallest width alignment and right-biased\n * alignments have their maximum coordinate at the same point as the maximum\n * coordinate of the smallest width alignment.\n */\nexport function alignCoordinates(xss, alignTo) {\n    const alignToVals = Object.values(alignTo);\n    const alignToMin = min(alignToVals);\n    const alignToMax = max(alignToVals);\n    [\"u\", \"d\"].forEach((vert) => {\n        [\"l\", \"r\"].forEach((horiz) => {\n            const alignment = vert + horiz;\n            const xs = xss[alignment];\n            let delta;\n            if (xs === alignTo)\n                return;\n            const xsVals = Object.values(xs);\n            delta =\n                horiz === \"l\"\n                    ? alignToMin - min(xsVals)\n                    : alignToMax - max(xsVals);\n            if (delta) {\n                xss[alignment] = {};\n                Object.keys(xs).forEach((key) => {\n                    xss[alignment][key] = xs[key] + delta;\n                });\n            }\n        });\n    });\n}\nexport const balance = (xss, align) => {\n    const result = {};\n    Object.keys(xss.ul).forEach((key) => {\n        if (align) {\n            result[key] = xss[align.toLowerCase()][key];\n        }\n        else {\n            const values = Object.values(xss).map((x) => x[key]);\n            result[key] = (values[0] + values[1]) / 2; // (ur + ul) / 2\n        }\n    });\n    return result;\n};\nexport const positionX = (g) => {\n    const layering = buildLayerMatrix(g);\n    const conflicts = Object.assign(findType1Conflicts(g, layering), findType2Conflicts(g, layering));\n    const xss = {};\n    let adjustedLayering;\n    [\"u\", \"d\"].forEach((vert) => {\n        adjustedLayering =\n            vert === \"u\" ? layering : Object.values(layering).reverse();\n        [\"l\", \"r\"].forEach((horiz) => {\n            if (horiz === \"r\") {\n                adjustedLayering = adjustedLayering.map((inner) => Object.values(inner).reverse());\n            }\n            const neighborFn = (vert === \"u\" ? g.predecessors : g.successors).bind(g);\n            const align = verticalAlignment(g, adjustedLayering, conflicts, neighborFn);\n            const xs = horizontalCompaction(g, adjustedLayering, align.root, align.align, horiz === \"r\");\n            if (horiz === \"r\") {\n                Object.keys(xs).forEach((key) => {\n                    xs[key] = -xs[key];\n                });\n            }\n            xss[vert + horiz] = xs;\n        });\n    });\n    const smallestWidth = findSmallestWidthAlignment(g, xss);\n    alignCoordinates(xss, smallestWidth);\n    return balance(xss, g.graph().align);\n};\nexport const sep = (nodeSep, edgeSep, reverseSep) => {\n    return (g, v, w) => {\n        const vLabel = g.node(v);\n        const wLabel = g.node(w);\n        let sum = 0;\n        let delta;\n        sum += vLabel.width / 2;\n        if (vLabel.hasOwnProperty(\"labelpos\")) {\n            switch ((vLabel.labelpos || \"\").toLowerCase()) {\n                case \"l\":\n                    delta = -vLabel.width / 2;\n                    break;\n                case \"r\":\n                    delta = vLabel.width / 2;\n                    break;\n            }\n        }\n        if (delta) {\n            sum += reverseSep ? delta : -delta;\n        }\n        delta = 0;\n        sum += (vLabel.dummy ? edgeSep : nodeSep) / 2;\n        sum += (wLabel.dummy ? edgeSep : nodeSep) / 2;\n        sum += wLabel.width / 2;\n        if (wLabel.labelpos) {\n            switch ((wLabel.labelpos || \"\").toLowerCase()) {\n                case \"l\":\n                    delta = wLabel.width / 2;\n                    break;\n                case \"r\":\n                    delta = -wLabel.width / 2;\n                    break;\n            }\n        }\n        if (delta) {\n            sum += reverseSep ? delta : -delta;\n        }\n        delta = 0;\n        return sum;\n    };\n};\nexport const width = (g, v) => g.node(v).width || 0;\n//# sourceMappingURL=bk.js.map","import { asNonCompoundGraph, buildLayerMatrix } from \"../util\";\nimport { alignCoordinates, balance, findSmallestWidthAlignment, findType1Conflicts, findType2Conflicts, horizontalCompaction, verticalAlignment, } from \"./bk\";\nconst positionY = (g) => {\n    const layering = buildLayerMatrix(g);\n    const rankSep = g.graph().ranksep;\n    let prevY = 0;\n    layering === null || layering === void 0 ? void 0 : layering.forEach((layer) => {\n        const heights = layer.map((v) => g.node(v).height);\n        const maxHeight = Math.max(...heights, 0);\n        layer === null || layer === void 0 ? void 0 : layer.forEach((v) => {\n            g.node(v).y = prevY + maxHeight / 2;\n        });\n        prevY += maxHeight + rankSep;\n    });\n};\nconst positionX = (g) => {\n    const layering = buildLayerMatrix(g);\n    const conflicts = Object.assign(findType1Conflicts(g, layering), findType2Conflicts(g, layering));\n    const xss = {};\n    let adjustedLayering = [];\n    [\"u\", \"d\"].forEach((vert) => {\n        adjustedLayering =\n            vert === \"u\" ? layering : Object.values(layering).reverse();\n        [\"l\", \"r\"].forEach((horiz) => {\n            if (horiz === \"r\") {\n                adjustedLayering = adjustedLayering.map((inner) => Object.values(inner).reverse());\n            }\n            const neighborFn = (vert === \"u\" ? g.predecessors : g.successors).bind(g);\n            const align = verticalAlignment(g, adjustedLayering, conflicts, neighborFn);\n            const xs = horizontalCompaction(g, adjustedLayering, align.root, align.align, horiz === \"r\");\n            if (horiz === \"r\") {\n                Object.keys(xs).forEach((xsKey) => (xs[xsKey] = -xs[xsKey]));\n            }\n            xss[vert + horiz] = xs;\n        });\n    });\n    const smallestWidth = findSmallestWidthAlignment(g, xss);\n    smallestWidth && alignCoordinates(xss, smallestWidth);\n    return balance(xss, g.graph().align);\n};\nconst position = (g) => {\n    var _a;\n    const ng = asNonCompoundGraph(g);\n    positionY(ng);\n    const xs = positionX(ng);\n    (_a = Object.keys(xs)) === null || _a === void 0 ? void 0 : _a.forEach((key) => {\n        ng.node(key).x = xs[key];\n    });\n};\nexport default position;\n//# sourceMappingURL=index.js.map","/**\n * 按照数据中的结果设置fixorder\n */\nconst initDataOrder = (g, nodeOrder) => {\n    const simpleNodes = g.nodes().filter((v) => {\n        var _a;\n        return !((_a = g.children(v)) === null || _a === void 0 ? void 0 : _a.length);\n    });\n    const ranks = simpleNodes.map((v) => g.node(v).rank);\n    const maxRank = Math.max(...ranks);\n    const layers = [];\n    for (let i = 0; i < maxRank + 1; i++) {\n        layers[i] = [];\n    }\n    nodeOrder === null || nodeOrder === void 0 ? void 0 : nodeOrder.forEach((n) => {\n        const node = g.node(n);\n        // 只考虑原有节点，dummy节点需要按照后续算法排出\n        if (!node || (node === null || node === void 0 ? void 0 : node.dummy)) {\n            return;\n        }\n        if (!isNaN(node.rank)) {\n            node.fixorder = layers[node.rank].length; // 设置fixorder为当层的顺序\n            layers[node.rank].push(n);\n        }\n    });\n};\nexport default initDataOrder;\n//# sourceMappingURL=init-data-order.js.map","import acyclic from \"./acyclic\";\nimport normalize from \"./normalize\";\nimport rank from \"./rank\";\nimport { normalizeRanks, removeEmptyRanks, time as usetime, notime, asNonCompoundGraph, addDummyNode, intersectRect, buildLayerMatrix, } from \"./util\";\nimport parentDummyChains from \"./parent-dummy-chains\";\nimport nestingGraph from \"./nesting-graph\";\nimport addBorderSegments from \"./add-border-segments\";\nimport coordinateSystem from \"./coordinate-system\";\nimport order from \"./order\";\nimport position from \"./position\";\nimport initDataOrder from \"./order/init-data-order\";\nimport { Graph } from \"../graph\";\nconst layout = (g, opts) => {\n    const time = opts && opts.debugTiming ? usetime : notime;\n    time(\"layout\", () => {\n        // 如果在原图基础上修改，继承原图的order结果\n        if (opts && !opts.keepNodeOrder && opts.prevGraph) {\n            time(\"  inheritOrder\", () => {\n                inheritOrder(g, opts.prevGraph);\n            });\n        }\n        const layoutGraph = time(\"  buildLayoutGraph\", () => {\n            return buildLayoutGraph(g);\n        });\n        // 控制是否为边的label留位置（这会影响是否在边中间添加dummy node）\n        if (!(opts && opts.edgeLabelSpace === false)) {\n            time(\"  makeSpaceForEdgeLabels\", () => {\n                makeSpaceForEdgeLabels(layoutGraph);\n            });\n        }\n        // TODO: 暂时处理层级设置不正确时的异常报错，提示设置正确的层级\n        try {\n            time(\"  runLayout\", () => {\n                runLayout(layoutGraph, time, opts);\n            });\n        }\n        catch (e) {\n            if (e.message ===\n                \"Not possible to find intersection inside of the rectangle\") {\n                console.error(\"The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:\\n\", e);\n                return;\n            }\n            throw e;\n        }\n        time(\"  updateInputGraph\", () => {\n            updateInputGraph(g, layoutGraph);\n        });\n    });\n};\nconst runLayout = (g, time, opts) => {\n    time(\"    removeSelfEdges\", () => {\n        removeSelfEdges(g);\n    });\n    time(\"    acyclic\", () => {\n        acyclic.run(g);\n    });\n    time(\"    nestingGraph.run\", () => {\n        nestingGraph.run(g);\n    });\n    time(\"    rank\", () => {\n        rank(asNonCompoundGraph(g));\n    });\n    time(\"    injectEdgeLabelProxies\", () => {\n        injectEdgeLabelProxies(g);\n    });\n    time(\"    removeEmptyRanks\", () => {\n        removeEmptyRanks(g);\n    });\n    time(\"    nestingGraph.cleanup\", () => {\n        nestingGraph.cleanup(g);\n    });\n    time(\"    normalizeRanks\", () => {\n        normalizeRanks(g);\n    });\n    time(\"    assignRankMinMax\", () => {\n        assignRankMinMax(g);\n    });\n    time(\"    removeEdgeLabelProxies\", () => {\n        removeEdgeLabelProxies(g);\n    });\n    time(\"    normalize.run\", () => {\n        normalize.run(g);\n    });\n    time(\"    parentDummyChains\", () => {\n        parentDummyChains(g);\n    });\n    time(\"    addBorderSegments\", () => {\n        addBorderSegments(g);\n    });\n    if (opts && opts.keepNodeOrder) {\n        time(\"    initDataOrder\", () => {\n            initDataOrder(g, opts.nodeOrder);\n        });\n    }\n    time(\"    order\", () => {\n        order(g, opts === null || opts === void 0 ? void 0 : opts.keepNodeOrder);\n    });\n    time(\"    insertSelfEdges\", () => {\n        insertSelfEdges(g);\n    });\n    time(\"    adjustCoordinateSystem\", () => {\n        coordinateSystem.adjust(g);\n    });\n    time(\"    position\", () => {\n        position(g);\n    });\n    time(\"    positionSelfEdges\", () => {\n        positionSelfEdges(g);\n    });\n    time(\"    removeBorderNodes\", () => {\n        removeBorderNodes(g);\n    });\n    time(\"    normalize.undo\", () => {\n        normalize.undo(g);\n    });\n    time(\"    fixupEdgeLabelCoords\", () => {\n        fixupEdgeLabelCoords(g);\n    });\n    time(\"    undoCoordinateSystem\", () => {\n        coordinateSystem.undo(g);\n    });\n    time(\"    translateGraph\", () => {\n        translateGraph(g);\n    });\n    time(\"    assignNodeIntersects\", () => {\n        assignNodeIntersects(g);\n    });\n    time(\"    reversePoints\", () => {\n        reversePointsForReversedEdges(g);\n    });\n    time(\"    acyclic.undo\", () => {\n        acyclic.undo(g);\n    });\n};\n/**\n * 继承上一个布局中的order，防止翻转\n * TODO: 暂时没有考虑涉及层级变动的布局，只保证原来布局层级和相对顺序不变\n */\nconst inheritOrder = (currG, prevG) => {\n    currG.nodes().forEach((n) => {\n        const node = currG.node(n);\n        const prevNode = prevG.node(n);\n        if (prevNode !== undefined) {\n            node.fixorder = prevNode._order;\n            delete prevNode._order;\n        }\n        else {\n            delete node.fixorder;\n        }\n    });\n};\n/*\n * Copies final layout information from the layout graph back to the input\n * graph. This process only copies whitelisted attributes from the layout graph\n * to the input graph, so it serves as a good place to determine what\n * attributes can influence layout.\n */\nconst updateInputGraph = (inputGraph, layoutGraph) => {\n    inputGraph.nodes().forEach((v) => {\n        var _a;\n        const inputLabel = inputGraph.node(v);\n        if (inputLabel) {\n            const layoutLabel = layoutGraph.node(v);\n            inputLabel.x = layoutLabel.x;\n            inputLabel.y = layoutLabel.y;\n            inputLabel._order = layoutLabel.order;\n            inputLabel._rank = layoutLabel.rank;\n            if ((_a = layoutGraph.children(v)) === null || _a === void 0 ? void 0 : _a.length) {\n                inputLabel.width = layoutLabel.width;\n                inputLabel.height = layoutLabel.height;\n            }\n        }\n    });\n    inputGraph.edges().forEach((e) => {\n        const inputLabel = inputGraph.edge(e);\n        const layoutLabel = layoutGraph.edge(e);\n        inputLabel.points = layoutLabel ? layoutLabel.points : [];\n        if (layoutLabel && layoutLabel.hasOwnProperty(\"x\")) {\n            inputLabel.x = layoutLabel.x;\n            inputLabel.y = layoutLabel.y;\n        }\n    });\n    inputGraph.graph().width = layoutGraph.graph().width;\n    inputGraph.graph().height = layoutGraph.graph().height;\n};\nconst graphNumAttrs = [\"nodesep\", \"edgesep\", \"ranksep\", \"marginx\", \"marginy\"];\nconst graphDefaults = { ranksep: 50, edgesep: 20, nodesep: 50, rankdir: \"tb\" };\nconst graphAttrs = [\"acyclicer\", \"ranker\", \"rankdir\", \"align\"];\nconst nodeNumAttrs = [\"width\", \"height\", \"layer\", \"fixorder\"]; // 需要传入layer, fixOrder作为参数参考\nconst nodeDefaults = { width: 0, height: 0 };\nconst edgeNumAttrs = [\"minlen\", \"weight\", \"width\", \"height\", \"labeloffset\"];\nconst edgeDefaults = {\n    minlen: 1,\n    weight: 1,\n    width: 0,\n    height: 0,\n    labeloffset: 10,\n    labelpos: \"r\",\n};\nconst edgeAttrs = [\"labelpos\"];\n/*\n * Constructs a new graph from the input graph, which can be used for layout.\n * This process copies only whitelisted attributes from the input graph to the\n * layout graph. Thus this function serves as a good place to determine what\n * attributes can influence layout.\n */\nconst buildLayoutGraph = (inputGraph) => {\n    const g = new Graph({ multigraph: true, compound: true });\n    const graph = canonicalize(inputGraph.graph());\n    const pickedProperties = {};\n    graphAttrs === null || graphAttrs === void 0 ? void 0 : graphAttrs.forEach((key) => {\n        if (graph[key] !== undefined)\n            pickedProperties[key] = graph[key];\n    });\n    g.setGraph(Object.assign({}, graphDefaults, selectNumberAttrs(graph, graphNumAttrs), pickedProperties));\n    inputGraph.nodes().forEach((v) => {\n        const node = canonicalize(inputGraph.node(v));\n        const defaultNode = Object.assign(Object.assign({}, nodeDefaults), node);\n        const defaultAttrs = selectNumberAttrs(defaultNode, nodeNumAttrs);\n        g.setNode(v, defaultAttrs);\n        g.setParent(v, inputGraph.parent(v));\n    });\n    inputGraph.edges().forEach((e) => {\n        const edge = canonicalize(inputGraph.edge(e));\n        const pickedProperties = {};\n        edgeAttrs === null || edgeAttrs === void 0 ? void 0 : edgeAttrs.forEach((key) => {\n            if (edge[key] !== undefined)\n                pickedProperties[key] = edge[key];\n        });\n        g.setEdgeObj(e, Object.assign({}, edgeDefaults, selectNumberAttrs(edge, edgeNumAttrs), pickedProperties));\n    });\n    return g;\n};\n/*\n * This idea comes from the Gansner paper: to account for edge labels in our\n * layout we split each rank in half by doubling minlen and halving ranksep.\n * Then we can place labels at these mid-points between nodes.\n *\n * We also add some minimal padding to the width to push the label for the edge\n * away from the edge itself a bit.\n */\nconst makeSpaceForEdgeLabels = (g) => {\n    const graph = g.graph();\n    if (!graph.ranksep)\n        graph.ranksep = 0;\n    graph.ranksep /= 2;\n    g.nodes().forEach((n) => {\n        const node = g.node(n);\n        if (!isNaN(node.layer)) {\n            if (!node.layer)\n                node.layer = 0;\n        }\n    });\n    g.edges().forEach((e) => {\n        var _a;\n        const edge = g.edge(e);\n        edge.minlen *= 2;\n        if (((_a = edge.labelpos) === null || _a === void 0 ? void 0 : _a.toLowerCase()) !== \"c\") {\n            if (graph.rankdir === \"TB\" || graph.rankdir === \"BT\") {\n                edge.width += edge.labeloffset;\n            }\n            else {\n                edge.height += edge.labeloffset;\n            }\n        }\n    });\n};\n/*\n * Creates temporary dummy nodes that capture the rank in which each edge's\n * label is going to, if it has one of non-zero width and height. We do this\n * so that we can safely remove empty ranks while preserving balance for the\n * label's position.\n */\nconst injectEdgeLabelProxies = (g) => {\n    g.edges().forEach((e) => {\n        const edge = g.edge(e);\n        if (edge.width && edge.height) {\n            const v = g.node(e.v);\n            const w = g.node(e.w);\n            const label = {\n                e,\n                rank: (w.rank - v.rank) / 2 + v.rank,\n            };\n            addDummyNode(g, \"edge-proxy\", label, \"_ep\");\n        }\n    });\n};\nconst assignRankMinMax = (g) => {\n    let maxRank = 0;\n    g.nodes().forEach((v) => {\n        var _a, _b;\n        const node = g.node(v);\n        if (node.borderTop) {\n            node.minRank = (_a = g.node(node.borderTop)) === null || _a === void 0 ? void 0 : _a.rank;\n            node.maxRank = (_b = g.node(node.borderBottom)) === null || _b === void 0 ? void 0 : _b.rank;\n            maxRank = Math.max(maxRank, node.maxRank || -Infinity);\n        }\n    });\n    g.graph().maxRank = maxRank;\n};\nconst removeEdgeLabelProxies = (g) => {\n    g.nodes().forEach((v) => {\n        const node = g.node(v);\n        if (node.dummy === \"edge-proxy\") {\n            g.edge(node.e).labelRank = node.rank;\n            g.removeNode(v);\n        }\n    });\n};\nconst translateGraph = (g) => {\n    let minX;\n    let maxX = 0;\n    let minY;\n    let maxY = 0;\n    const graphLabel = g.graph();\n    const marginX = graphLabel.marginx || 0;\n    const marginY = graphLabel.marginy || 0;\n    const getExtremes = (attrs) => {\n        if (!attrs)\n            return;\n        const x = attrs.x;\n        const y = attrs.y;\n        const w = attrs.width;\n        const h = attrs.height;\n        if (!isNaN(x) && !isNaN(w)) {\n            if (minX === undefined) {\n                minX = x - w / 2;\n            }\n            minX = Math.min(minX, x - w / 2);\n            maxX = Math.max(maxX, x + w / 2);\n        }\n        if (!isNaN(y) && !isNaN(h)) {\n            if (minY === undefined) {\n                minY = y - h / 2;\n            }\n            minY = Math.min(minY, y - h / 2);\n            maxY = Math.max(maxY, y + h / 2);\n        }\n    };\n    g.nodes().forEach((v) => {\n        getExtremes(g.node(v));\n    });\n    g.edges().forEach((e) => {\n        const edge = g.edge(e);\n        if (edge === null || edge === void 0 ? void 0 : edge.hasOwnProperty(\"x\")) {\n            getExtremes(edge);\n        }\n    });\n    minX -= marginX;\n    minY -= marginY;\n    g.nodes().forEach((v) => {\n        const node = g.node(v);\n        if (node) {\n            node.x -= minX;\n            node.y -= minY;\n        }\n    });\n    g.edges().forEach((e) => {\n        var _a;\n        const edge = g.edge(e);\n        (_a = edge.points) === null || _a === void 0 ? void 0 : _a.forEach((p) => {\n            p.x -= minX;\n            p.y -= minY;\n        });\n        if (edge.hasOwnProperty(\"x\")) {\n            edge.x -= minX;\n        }\n        if (edge.hasOwnProperty(\"y\")) {\n            edge.y -= minY;\n        }\n    });\n    graphLabel.width = maxX - minX + marginX;\n    graphLabel.height = maxY - minY + marginY;\n};\nconst assignNodeIntersects = (g) => {\n    g.edges().forEach((e) => {\n        const edge = g.edge(e);\n        const nodeV = g.node(e.v);\n        const nodeW = g.node(e.w);\n        let p1;\n        let p2;\n        if (!edge.points) {\n            edge.points = [];\n            p1 = nodeW;\n            p2 = nodeV;\n        }\n        else {\n            p1 = edge.points[0];\n            p2 = edge.points[edge.points.length - 1];\n        }\n        edge.points.unshift(intersectRect(nodeV, p1));\n        edge.points.push(intersectRect(nodeW, p2));\n    });\n};\nconst fixupEdgeLabelCoords = (g) => {\n    g.edges().forEach((e) => {\n        const edge = g.edge(e);\n        if (edge === null || edge === void 0 ? void 0 : edge.hasOwnProperty(\"x\")) {\n            if (edge.labelpos === \"l\" || edge.labelpos === \"r\") {\n                edge.width -= edge.labeloffset;\n            }\n            switch (edge.labelpos) {\n                case \"l\":\n                    edge.x -= edge.width / 2 + edge.labeloffset;\n                    break;\n                case \"r\":\n                    edge.x += edge.width / 2 + edge.labeloffset;\n                    break;\n            }\n        }\n    });\n};\nconst reversePointsForReversedEdges = (g) => {\n    g.edges().forEach((e) => {\n        var _a;\n        const edge = g.edge(e);\n        if (edge.reversed) {\n            (_a = edge.points) === null || _a === void 0 ? void 0 : _a.reverse();\n        }\n    });\n};\nconst removeBorderNodes = (g) => {\n    g.nodes().forEach((v) => {\n        var _a, _b, _c;\n        if ((_a = g.children(v)) === null || _a === void 0 ? void 0 : _a.length) {\n            const node = g.node(v);\n            const t = g.node(node.borderTop);\n            const b = g.node(node.borderBottom);\n            const l = g.node(node.borderLeft[((_b = node.borderLeft) === null || _b === void 0 ? void 0 : _b.length) - 1]);\n            const r = g.node(node.borderRight[((_c = node.borderRight) === null || _c === void 0 ? void 0 : _c.length) - 1]);\n            node.width = Math.abs((r === null || r === void 0 ? void 0 : r.x) - (l === null || l === void 0 ? void 0 : l.x)) || 10;\n            node.height = Math.abs((b === null || b === void 0 ? void 0 : b.y) - (t === null || t === void 0 ? void 0 : t.y)) || 10;\n            node.x = ((l === null || l === void 0 ? void 0 : l.x) || 0) + node.width / 2;\n            node.y = ((t === null || t === void 0 ? void 0 : t.y) || 0) + node.height / 2;\n        }\n    });\n    g.nodes().forEach((v) => {\n        var _a;\n        if (((_a = g.node(v)) === null || _a === void 0 ? void 0 : _a.dummy) === \"border\") {\n            g.removeNode(v);\n        }\n    });\n};\nconst removeSelfEdges = (g) => {\n    g.edges().forEach((e) => {\n        if (e.v === e.w) {\n            const node = g.node(e.v);\n            if (!node.selfEdges) {\n                node.selfEdges = [];\n            }\n            node.selfEdges.push({ e, label: g.edge(e) });\n            g.removeEdgeObj(e);\n        }\n    });\n};\nconst insertSelfEdges = (g) => {\n    const layers = buildLayerMatrix(g);\n    layers === null || layers === void 0 ? void 0 : layers.forEach((layer) => {\n        let orderShift = 0;\n        layer === null || layer === void 0 ? void 0 : layer.forEach((v, i) => {\n            var _a;\n            const node = g.node(v);\n            node.order = i + orderShift;\n            (_a = node.selfEdges) === null || _a === void 0 ? void 0 : _a.forEach((selfEdge) => {\n                addDummyNode(g, \"selfedge\", {\n                    width: selfEdge.label.width,\n                    height: selfEdge.label.height,\n                    rank: node.rank,\n                    order: i + ++orderShift,\n                    e: selfEdge.e,\n                    label: selfEdge.label,\n                }, \"_se\");\n            });\n            delete node.selfEdges;\n        });\n    });\n};\nconst positionSelfEdges = (g) => {\n    g.nodes().forEach((v) => {\n        const node = g.node(v);\n        if (node.dummy === \"selfedge\") {\n            const selfNode = g.node(node.e.v);\n            const x = selfNode.x + selfNode.width / 2;\n            const y = selfNode.y;\n            const dx = node.x - x;\n            const dy = selfNode.height / 2;\n            g.setEdgeObj(node.e, node.label);\n            g.removeNode(v);\n            node.label.points = [\n                { x: x + (2 * dx) / 3, y: y - dy },\n                { x: x + (5 * dx) / 6, y: y - dy },\n                { y, x: x + dx },\n                { x: x + (5 * dx) / 6, y: y + dy },\n                { x: x + (2 * dx) / 3, y: y + dy },\n            ];\n            node.label.x = node.x;\n            node.label.y = node.y;\n        }\n    });\n};\nconst selectNumberAttrs = (obj, attrs) => {\n    const pickedProperties = {};\n    attrs === null || attrs === void 0 ? void 0 : attrs.forEach((key) => {\n        if (obj[key] === undefined)\n            return;\n        pickedProperties[key] = (+obj[key]);\n    });\n    return pickedProperties;\n};\nconst canonicalize = (attrs = {}) => {\n    const newAttrs = {};\n    Object.keys(attrs).forEach((k) => {\n        newAttrs[k.toLowerCase()] = attrs[k];\n    });\n    return newAttrs;\n};\nexport default layout;\n//# sourceMappingURL=layout.js.map","/*\nCopyright (c) 2012-2014 Chris Pettitt\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\nimport layout from './src/layout';\nimport { time, notime } from './src/util';\nexport default {\n    layout,\n    util: {\n        time,\n        notime\n    },\n};\n//# sourceMappingURL=index.js.map","/**\n * @fileOverview dagre layout\n * @author shiwu.wyy@antfin.com\n */\nimport dagre from './dagre/index';\nimport { isArray, isNumber, isObject, getEdgeTerminal, getFunc, isString, } from '../util';\nimport { Base } from './base';\nimport { Graph as DagreGraph } from './dagre/graph';\n/**\n * 层次布局\n */\nexport class DagreLayout extends Base {\n    constructor(options) {\n        super();\n        /** layout 方向, 可选 TB, BT, LR, RL */\n        this.rankdir = 'TB';\n        /** 节点水平间距(px) */\n        this.nodesep = 50;\n        /** 每一层节点之间间距 */\n        this.ranksep = 50;\n        /** 是否保留布局连线的控制点 */\n        this.controlPoints = false;\n        /** 每层节点是否根据节点数据中的 comboId 进行排序，以防止同层 combo 重叠 */\n        this.sortByCombo = false;\n        /** 是否保留每条边上的dummy node */\n        this.edgeLabelSpace = true;\n        /** 是否基于 dagre 进行辐射布局，若是，第一层节点将被放置在最内环上，其余层依次向外辐射 */\n        this.radial = false;\n        this.nodes = [];\n        this.edges = [];\n        /** 迭代结束的回调函数 */\n        this.onLayoutEnd = () => { };\n        this.layoutNode = (nodeId) => {\n            const self = this;\n            const { nodes } = self;\n            const node = nodes.find((node) => node.id === nodeId);\n            if (node) {\n                const layout = node.layout !== false;\n                return layout;\n            }\n            return true;\n        };\n        this.updateCfg(options);\n    }\n    getDefaultCfg() {\n        return {\n            rankdir: 'TB',\n            align: undefined,\n            nodeSize: undefined,\n            nodesepFunc: undefined,\n            ranksepFunc: undefined,\n            nodesep: 50,\n            ranksep: 50,\n            controlPoints: false,\n            radial: false,\n            focusNode: null, // radial 为 true 时生效，关注的节点\n        };\n    }\n    /**\n     * 执行布局\n     */\n    execute() {\n        var _a, _b, _c, _d;\n        const self = this;\n        const { nodes, nodeSize, rankdir, combos, begin, radial, comboEdges = [], vedges = [], } = self;\n        if (!nodes)\n            return;\n        const edges = self.edges || [];\n        const g = new DagreGraph({\n            multigraph: true,\n            compound: true,\n        });\n        // collect the nodes in their combo, to create virtual edges for comboEdges\n        self.nodeMap = {};\n        const nodeComboMap = {};\n        nodes.forEach((node) => {\n            self.nodeMap[node.id] = node;\n            if (!node.comboId)\n                return;\n            nodeComboMap[node.comboId] = nodeComboMap[node.comboId] || [];\n            nodeComboMap[node.comboId].push(node.id);\n        });\n        let sortedNodes = [];\n        const visitedMap = {};\n        if ((_a = self.nodeOrder) === null || _a === void 0 ? void 0 : _a.length) {\n            self.nodeOrder.forEach((id) => {\n                visitedMap[id] = true;\n                sortedNodes.push(self.nodeMap[id]);\n            });\n            nodes.forEach((node) => {\n                if (!visitedMap[node.id])\n                    sortedNodes.push(node);\n            });\n        }\n        else {\n            sortedNodes = nodes;\n        }\n        let nodeSizeFunc;\n        if (!nodeSize) {\n            nodeSizeFunc = (d) => {\n                if (d.size) {\n                    if (isArray(d.size)) {\n                        return d.size;\n                    }\n                    if (isObject(d.size)) {\n                        return [d.size.width || 40, d.size.height || 40];\n                    }\n                    return [d.size, d.size];\n                }\n                return [40, 40];\n            };\n        }\n        else if (isArray(nodeSize)) {\n            nodeSizeFunc = () => nodeSize;\n        }\n        else {\n            nodeSizeFunc = () => [nodeSize, nodeSize];\n        }\n        const ranksepfunc = getFunc(self.ranksep, 50, self.ranksepFunc);\n        const nodesepfunc = getFunc(self.nodesep, 50, self.nodesepFunc);\n        let horisep = nodesepfunc;\n        let vertisep = ranksepfunc;\n        if (rankdir === 'LR' || rankdir === 'RL') {\n            horisep = ranksepfunc;\n            vertisep = nodesepfunc;\n        }\n        g.setDefaultEdgeLabel(() => ({}));\n        g.setGraph(self);\n        const comboMap = {};\n        if (this.sortByCombo && combos) {\n            combos.forEach((combo) => {\n                comboMap[combo.id] = combo;\n                // regard the collapsed combo as a node\n                if (combo.collapsed) {\n                    const size = nodeSizeFunc(combo);\n                    const verti = vertisep(combo);\n                    const hori = horisep(combo);\n                    const width = size[0] + 2 * hori;\n                    const height = size[1] + 2 * verti;\n                    g.setNode(combo.id, { width, height });\n                }\n                if (!combo.parentId)\n                    return;\n                if (!comboMap[combo.parentId]) {\n                    g.setNode(combo.parentId, {});\n                }\n                g.setParent(combo.id, combo.parentId);\n            });\n        }\n        sortedNodes\n            .filter((node) => node.layout !== false)\n            .forEach((node) => {\n            const size = nodeSizeFunc(node);\n            const verti = vertisep(node);\n            const hori = horisep(node);\n            const width = size[0] + 2 * hori;\n            const height = size[1] + 2 * verti;\n            const layer = node.layer;\n            if (isNumber(layer)) {\n                // 如果有layer属性，加入到node的label中\n                g.setNode(node.id, { width, height, layer });\n            }\n            else {\n                g.setNode(node.id, { width, height });\n            }\n            if (this.sortByCombo && node.comboId) {\n                if (!comboMap[node.comboId]) {\n                    comboMap[node.comboId] = { id: node.comboId };\n                    g.setNode(node.comboId, {});\n                }\n                g.setParent(node.id, node.comboId);\n            }\n        });\n        edges.forEach((edge) => {\n            // dagrejs Wiki https://github.com/dagrejs/dagre/wiki#configuring-the-layout\n            const source = getEdgeTerminal(edge, 'source');\n            const target = getEdgeTerminal(edge, 'target');\n            if (this.layoutNode(source) && this.layoutNode(target)) {\n                g.setEdge(source, target, {\n                    weight: edge.weight || 1,\n                });\n            }\n        });\n        // create virtual edges from node to node for comboEdges\n        (_b = comboEdges === null || comboEdges === void 0 ? void 0 : comboEdges.concat(vedges || [])) === null || _b === void 0 ? void 0 : _b.forEach((comboEdge) => {\n            var _a, _b;\n            const { source, target } = comboEdge;\n            const sources = ((_a = comboMap[source]) === null || _a === void 0 ? void 0 : _a.collapsed)\n                ? [source]\n                : nodeComboMap[source] || [source];\n            const targets = ((_b = comboMap[target]) === null || _b === void 0 ? void 0 : _b.collapsed)\n                ? [target]\n                : nodeComboMap[target] || [target];\n            sources.forEach((s) => {\n                targets.forEach((t) => {\n                    g.setEdge(s, t, {\n                        weight: comboEdge.weight || 1,\n                    });\n                });\n            });\n        });\n        // 考虑增量图中的原始图\n        let prevGraph = undefined;\n        if ((_c = self.preset) === null || _c === void 0 ? void 0 : _c.nodes) {\n            prevGraph = new DagreGraph({\n                multigraph: true,\n                compound: true,\n            });\n            self.preset.nodes.forEach((node) => {\n                prevGraph === null || prevGraph === void 0 ? void 0 : prevGraph.setNode(node.id, node);\n            });\n        }\n        dagre.layout(g, {\n            prevGraph,\n            edgeLabelSpace: self.edgeLabelSpace,\n            keepNodeOrder: Boolean(!!self.nodeOrder),\n            nodeOrder: self.nodeOrder,\n        });\n        const dBegin = [0, 0];\n        if (begin) {\n            let minX = Infinity;\n            let minY = Infinity;\n            g.nodes().forEach((node) => {\n                const coord = g.node(node);\n                if (minX > coord.x)\n                    minX = coord.x;\n                if (minY > coord.y)\n                    minY = coord.y;\n            });\n            g.edges().forEach((edge) => {\n                var _a;\n                const coord = g.edge(edge);\n                (_a = coord.points) === null || _a === void 0 ? void 0 : _a.forEach((point) => {\n                    if (minX > point.x)\n                        minX = point.x;\n                    if (minY > point.y)\n                        minY = point.y;\n                });\n            });\n            dBegin[0] = begin[0] - minX;\n            dBegin[1] = begin[1] - minY;\n        }\n        const isHorizontal = rankdir === 'LR' || rankdir === 'RL';\n        // 变形为辐射\n        if (radial) {\n            const { focusNode, ranksep, getRadialPos } = this;\n            const focusId = isString(focusNode) ? focusNode : focusNode === null || focusNode === void 0 ? void 0 : focusNode.id;\n            const focusLayer = focusId ? (_d = g.node(focusId)) === null || _d === void 0 ? void 0 : _d._rank : 0;\n            const layers = [];\n            const dim = isHorizontal ? 'y' : 'x';\n            const sizeDim = isHorizontal ? 'height' : 'width';\n            // 找到整个图作为环的坐标维度（dim）的最大、最小值，考虑节点宽度\n            let min = Infinity;\n            let max = -Infinity;\n            g.nodes().forEach((node) => {\n                const coord = g.node(node);\n                if (!self.nodeMap[node])\n                    return;\n                const currentNodesep = nodesepfunc(self.nodeMap[node]);\n                if (focusLayer === 0) {\n                    if (!layers[coord._rank]) {\n                        layers[coord._rank] = {\n                            nodes: [],\n                            totalWidth: 0,\n                            maxSize: -Infinity,\n                        };\n                    }\n                    layers[coord._rank].nodes.push(node);\n                    layers[coord._rank].totalWidth += currentNodesep * 2 + coord[sizeDim];\n                    if (layers[coord._rank].maxSize < Math.max(coord.width, coord.height)) {\n                        layers[coord._rank].maxSize = Math.max(coord.width, coord.height);\n                    }\n                }\n                else {\n                    const diffLayer = coord._rank - focusLayer;\n                    if (diffLayer === 0) {\n                        if (!layers[diffLayer]) {\n                            layers[diffLayer] = {\n                                nodes: [],\n                                totalWidth: 0,\n                                maxSize: -Infinity,\n                            };\n                        }\n                        layers[diffLayer].nodes.push(node);\n                        layers[diffLayer].totalWidth += currentNodesep * 2 + coord[sizeDim];\n                        if (layers[diffLayer].maxSize < Math.max(coord.width, coord.height)) {\n                            layers[diffLayer].maxSize = Math.max(coord.width, coord.height);\n                        }\n                    }\n                    else {\n                        const diffLayerAbs = Math.abs(diffLayer);\n                        if (!layers[diffLayerAbs]) {\n                            layers[diffLayerAbs] = {\n                                left: [],\n                                right: [],\n                                totalWidth: 0,\n                                maxSize: -Infinity,\n                            };\n                        }\n                        layers[diffLayerAbs].totalWidth +=\n                            currentNodesep * 2 + coord[sizeDim];\n                        if (layers[diffLayerAbs].maxSize < Math.max(coord.width, coord.height)) {\n                            layers[diffLayerAbs].maxSize = Math.max(coord.width, coord.height);\n                        }\n                        if (diffLayer < 0) {\n                            layers[diffLayerAbs].left.push(node);\n                        }\n                        else {\n                            layers[diffLayerAbs].right.push(node);\n                        }\n                    }\n                }\n                const leftPos = coord[dim] - coord[sizeDim] / 2 - currentNodesep;\n                const rightPos = coord[dim] + coord[sizeDim] / 2 + currentNodesep;\n                if (leftPos < min)\n                    min = leftPos;\n                if (rightPos > max)\n                    max = rightPos;\n            });\n            // const padding = (max - min) * 0.1; // TODO\n            // \b初始化为第一圈的半径，后面根据每层 ranksep 叠加\n            let radius = ranksep || 50; // TODO;\n            const radiusMap = {};\n            // 扩大最大最小值范围，以便为环上留出接缝处的空隙\n            const rangeLength = (max - min) / 0.9;\n            const range = [\n                (min + max - rangeLength) * 0.5,\n                (min + max + rangeLength) * 0.5,\n            ];\n            // 根据半径、分布比例，计算节点在环上的位置，并返回该组节点中最大的 ranksep 值\n            const processNodes = (layerNodes, radius, propsMaxRanksep = -Infinity, arcRange = [0, 1]) => {\n                let maxRanksep = propsMaxRanksep;\n                layerNodes.forEach((node) => {\n                    const coord = g.node(node);\n                    radiusMap[node] = radius;\n                    // 获取变形为 radial 后的直角坐标系坐标\n                    const { x: newX, y: newY } = getRadialPos(coord[dim], range, rangeLength, radius, arcRange);\n                    // 将新坐标写入源数据\n                    if (!self.nodeMap[node])\n                        return;\n                    self.nodeMap[node].x = newX + dBegin[0];\n                    self.nodeMap[node].y = newY + dBegin[1];\n                    // @ts-ignore: pass layer order to data for increment layout use\n                    self.nodeMap[node]._order = coord._order;\n                    // 找到本层最大的一个 ranksep，作为下一层与本层的间隙，叠加到下一层的半径上\n                    const currentNodeRanksep = ranksepfunc(self.nodeMap[node]);\n                    if (maxRanksep < currentNodeRanksep)\n                        maxRanksep = currentNodeRanksep;\n                });\n                return maxRanksep;\n            };\n            let isFirstLevel = true;\n            const lastLayerMaxNodeSize = 0;\n            layers.forEach((layerNodes) => {\n                var _a, _b, _c, _d, _e, _f, _g;\n                if (!((_a = layerNodes === null || layerNodes === void 0 ? void 0 : layerNodes.nodes) === null || _a === void 0 ? void 0 : _a.length) &&\n                    !((_b = layerNodes === null || layerNodes === void 0 ? void 0 : layerNodes.left) === null || _b === void 0 ? void 0 : _b.length) &&\n                    !((_c = layerNodes === null || layerNodes === void 0 ? void 0 : layerNodes.right) === null || _c === void 0 ? void 0 : _c.length)) {\n                    return;\n                }\n                // 第一层只有一个节点，直接放在圆心，初始半径设定为 0\n                if (isFirstLevel && layerNodes.nodes.length === 1) {\n                    // 将新坐标写入源数据\n                    const nodeId = layerNodes.nodes[0];\n                    if (!self.nodeMap[nodeId])\n                        return;\n                    self.nodeMap[nodeId].x = dBegin[0];\n                    self.nodeMap[nodeId].y = dBegin[1];\n                    radiusMap[layerNodes.nodes[0]] = 0;\n                    radius = ranksepfunc(self.nodeMap[nodeId]);\n                    isFirstLevel = false;\n                    return;\n                }\n                // 为接缝留出空隙，半径也需要扩大\n                radius = Math.max(radius, layerNodes.totalWidth / (2 * Math.PI)); // / 0.9;\n                let maxRanksep = -Infinity;\n                if (focusLayer === 0 || ((_d = layerNodes.nodes) === null || _d === void 0 ? void 0 : _d.length)) {\n                    maxRanksep = processNodes(layerNodes.nodes, radius, maxRanksep, [0, 1]); // 0.8\n                }\n                else {\n                    const leftRatio = ((_e = layerNodes.left) === null || _e === void 0 ? void 0 : _e.length) /\n                        (((_f = layerNodes.left) === null || _f === void 0 ? void 0 : _f.length) + ((_g = layerNodes.right) === null || _g === void 0 ? void 0 : _g.length));\n                    maxRanksep = processNodes(layerNodes.left, radius, maxRanksep, [\n                        0,\n                        leftRatio,\n                    ]); // 接缝留出 0.05 的缝隙\n                    maxRanksep = processNodes(layerNodes.right, radius, maxRanksep, [\n                        leftRatio + 0.05,\n                        1,\n                    ]); // 接缝留出 0.05 的缝隙\n                }\n                radius += maxRanksep;\n                isFirstLevel = false;\n                lastLayerMaxNodeSize - layerNodes.maxSize;\n            });\n            g.edges().forEach((edge) => {\n                var _a, _b, _c;\n                const coord = g.edge(edge);\n                const i = edges.findIndex((it) => {\n                    const source = getEdgeTerminal(it, 'source');\n                    const target = getEdgeTerminal(it, 'target');\n                    return source === edge.v && target === edge.w;\n                });\n                if (i <= -1)\n                    return;\n                if (self.edgeLabelSpace &&\n                    self.controlPoints &&\n                    edges[i].type !== 'loop') {\n                    const otherDim = dim === 'x' ? 'y' : 'x';\n                    const controlPoints = (_a = coord === null || coord === void 0 ? void 0 : coord.points) === null || _a === void 0 ? void 0 : _a.slice(1, coord.points.length - 1);\n                    const newControlPoints = [];\n                    const sourceOtherDimValue = (_b = g.node(edge.v)) === null || _b === void 0 ? void 0 : _b[otherDim];\n                    const otherDimDist = sourceOtherDimValue - ((_c = g.node(edge.w)) === null || _c === void 0 ? void 0 : _c[otherDim]);\n                    const sourceRadius = radiusMap[edge.v];\n                    const radiusDist = sourceRadius - radiusMap[edge.w];\n                    controlPoints === null || controlPoints === void 0 ? void 0 : controlPoints.forEach((point) => {\n                        // 根据该边的起点、终点半径，及起点、终点、控制点位置关系，确定该控制点的半径\n                        const cRadius = ((point[otherDim] - sourceOtherDimValue) / otherDimDist) *\n                            radiusDist +\n                            sourceRadius;\n                        // 获取变形为 radial 后的直角坐标系坐标\n                        const newPos = getRadialPos(point[dim], range, rangeLength, cRadius);\n                        newControlPoints.push({\n                            x: newPos.x + dBegin[0],\n                            y: newPos.y + dBegin[1],\n                        });\n                    });\n                    edges[i].controlPoints = newControlPoints;\n                }\n            });\n        }\n        else {\n            const layerCoords = new Set();\n            const isInvert = rankdir === 'BT' || rankdir === 'RL';\n            const layerCoordSort = isInvert\n                ? (a, b) => b - a\n                : (a, b) => a - b;\n            g.nodes().forEach((node) => {\n                const coord = g.node(node);\n                if (!coord)\n                    return;\n                let ndata = this.nodeMap[node];\n                if (!ndata) {\n                    ndata = combos === null || combos === void 0 ? void 0 : combos.find((it) => it.id === node);\n                }\n                if (!ndata)\n                    return;\n                ndata.x = coord.x + dBegin[0];\n                ndata.y = coord.y + dBegin[1];\n                // @ts-ignore: pass layer order to data for increment layout use\n                ndata._order = coord._order;\n                layerCoords.add(isHorizontal ? ndata.x : ndata.y);\n            });\n            const layerCoordsArr = Array.from(layerCoords).sort(layerCoordSort);\n            // pre-define the isHorizontal related functions to avoid redundant calc in interations\n            const isDifferentLayer = isHorizontal\n                ? (point1, point2) => point1.x !== point2.x\n                : (point1, point2) => point1.y !== point2.y;\n            const filterControlPointsOutOfBoundary = isHorizontal\n                ? (ps, point1, point2) => {\n                    const max = Math.max(point1.y, point2.y);\n                    const min = Math.min(point1.y, point2.y);\n                    return ps.filter((point) => point.y <= max && point.y >= min);\n                }\n                : (ps, point1, point2) => {\n                    const max = Math.max(point1.x, point2.x);\n                    const min = Math.min(point1.x, point2.x);\n                    return ps.filter((point) => point.x <= max && point.x >= min);\n                };\n            g.edges().forEach((edge) => {\n                var _a;\n                const coord = g.edge(edge);\n                const i = edges.findIndex((it) => {\n                    const source = getEdgeTerminal(it, 'source');\n                    const target = getEdgeTerminal(it, 'target');\n                    return source === edge.v && target === edge.w;\n                });\n                if (i <= -1)\n                    return;\n                if (self.edgeLabelSpace &&\n                    self.controlPoints &&\n                    edges[i].type !== 'loop') {\n                    (_a = coord === null || coord === void 0 ? void 0 : coord.points) === null || _a === void 0 ? void 0 : _a.forEach((point) => {\n                        point.x += dBegin[0];\n                        point.y += dBegin[1];\n                    });\n                    const sourceNode = self.nodeMap[edge.v];\n                    const targetNode = self.nodeMap[edge.w];\n                    edges[i].controlPoints = getControlPoints(coord === null || coord === void 0 ? void 0 : coord.points, sourceNode, targetNode, layerCoordsArr, isHorizontal, isDifferentLayer, filterControlPointsOutOfBoundary);\n                }\n            });\n        }\n        if (self.onLayoutEnd)\n            self.onLayoutEnd();\n        return {\n            nodes,\n            edges,\n        };\n    }\n    getRadialPos(dimValue, range, rangeLength, radius, arcRange = [0, 1]) {\n        // dimRatio 占圆弧的比例\n        let dimRatio = (dimValue - range[0]) / rangeLength;\n        // 再进一步归一化到指定的范围上\n        dimRatio = dimRatio * (arcRange[1] - arcRange[0]) + arcRange[0];\n        // 使用最终归一化后的范围计算角度\n        const angle = dimRatio * 2 * Math.PI; // 弧度\n        // 将极坐标系转换为直角坐标系\n        return {\n            x: Math.cos(angle) * radius,\n            y: Math.sin(angle) * radius,\n        };\n    }\n    getType() {\n        return 'dagre';\n    }\n}\n/**\n * Format controlPoints to avoid polylines crossing nodes\n * @param points\n * @param sourceNode\n * @param targetNode\n * @param layerCoordsArr\n * @param isHorizontal\n * @returns\n */\nconst getControlPoints = (points, sourceNode, targetNode, layerCoordsArr, isHorizontal, isDifferentLayer, filterControlPointsOutOfBoundary) => {\n    let controlPoints = (points === null || points === void 0 ? void 0 : points.slice(1, points.length - 1)) || []; // 去掉头尾\n    // 酌情增加控制点，使折线不穿过跨层的节点\n    if (sourceNode && targetNode) {\n        let { x: sourceX, y: sourceY } = sourceNode;\n        let { x: targetX, y: targetY } = targetNode;\n        if (isHorizontal) {\n            sourceX = sourceNode.y;\n            sourceY = sourceNode.x;\n            targetX = targetNode.y;\n            targetY = targetNode.x;\n        }\n        // 为跨层级的边增加第一个控制点。忽略垂直的/横向的边。\n        // 新控制点 = {\n        //   x: 终点x,\n        //   y: (起点y + 下一层y) / 2,   #下一层y可能不等于终点y\n        // }\n        if (targetY !== sourceY && sourceX !== targetX) {\n            const sourceLayer = layerCoordsArr.indexOf(sourceY);\n            const sourceNextLayerCoord = layerCoordsArr[sourceLayer + 1];\n            if (sourceNextLayerCoord) {\n                const firstControlPoint = controlPoints[0];\n                const insertStartControlPoint = isHorizontal\n                    ? {\n                        x: (sourceY + sourceNextLayerCoord) / 2,\n                        y: (firstControlPoint === null || firstControlPoint === void 0 ? void 0 : firstControlPoint.y) || targetX,\n                    }\n                    : {\n                        x: (firstControlPoint === null || firstControlPoint === void 0 ? void 0 : firstControlPoint.x) || targetX,\n                        y: (sourceY + sourceNextLayerCoord) / 2,\n                    };\n                // 当新增的控制点不存在（!=当前第一个控制点）时添加\n                if (!firstControlPoint ||\n                    isDifferentLayer(firstControlPoint, insertStartControlPoint)) {\n                    controlPoints.unshift(insertStartControlPoint);\n                }\n            }\n            const targetLayer = layerCoordsArr.indexOf(targetY);\n            const layerDiff = Math.abs(targetLayer - sourceLayer);\n            if (layerDiff === 1) {\n                controlPoints = filterControlPointsOutOfBoundary(controlPoints, sourceNode, targetNode);\n                // one controlPoint at least\n                if (!controlPoints.length) {\n                    controlPoints.push(isHorizontal\n                        ? {\n                            x: (sourceY + targetY) / 2,\n                            y: sourceX,\n                        }\n                        : {\n                            x: sourceX,\n                            y: (sourceY + targetY) / 2,\n                        });\n                }\n            }\n            else if (layerDiff > 1) {\n                const targetLastLayerCoord = layerCoordsArr[targetLayer - 1];\n                if (targetLastLayerCoord) {\n                    const lastControlPoints = controlPoints[controlPoints.length - 1];\n                    const insertEndControlPoint = isHorizontal\n                        ? {\n                            x: (targetY + targetLastLayerCoord) / 2,\n                            y: (lastControlPoints === null || lastControlPoints === void 0 ? void 0 : lastControlPoints.y) || targetX,\n                        }\n                        : {\n                            x: (lastControlPoints === null || lastControlPoints === void 0 ? void 0 : lastControlPoints.x) || sourceX,\n                            y: (targetY + targetLastLayerCoord) / 2,\n                        };\n                    // 当新增的控制点不存在（!=当前最后一个控制点）时添加\n                    if (!lastControlPoints ||\n                        isDifferentLayer(lastControlPoints, insertEndControlPoint)) {\n                        controlPoints.push(insertEndControlPoint);\n                    }\n                }\n            }\n        }\n    }\n    return controlPoints;\n};\n//# sourceMappingURL=dagre.js.map","const e={graph:{meta:{rankDir:\"TB\",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function n(n={},t=e){var r,o,i,a;const u=JSON.parse(JSON.stringify(t)),c=(null===(r=null==n?void 0:n.graph)||void 0===r?void 0:r.meta)||{},s=(null===(o=null==n?void 0:n.subScene)||void 0===o?void 0:o.meta)||{},d=(null===(i=null==n?void 0:n.nodeSize)||void 0===i?void 0:i.meta)||{},f=(null===(a=null==n?void 0:n.nodeSize)||void 0===a?void 0:a.node)||{},h=u.nodeSize.bridge;return{graph:{meta:Object.assign(u.graph.meta,c)},subScene:{meta:Object.assign(u.subScene.meta,s)},nodeSize:{meta:Object.assign(u.nodeSize.meta,d),node:Object.assign(u.nodeSize.node,f),bridge:h}}}function t(e){return`◬${e}◬`}const r=t(\"ROOT\"),o=t(\"BRIDGE_GRAPH\");var i,a,u,c;!function(e){e[e.META=0]=\"META\",e[e.NODE=1]=\"NODE\",e[e.BRIDGE=2]=\"BRIDGE\"}(i||(i={})),function(e){e[e.INCLUDE=0]=\"INCLUDE\",e[e.EXCLUDE=1]=\"EXCLUDE\",e[e.UNSPECIFIED=2]=\"UNSPECIFIED\"}(a||(a={})),function(e){e[e.META=0]=\"META\",e[e.CORE=1]=\"CORE\",e[e.BRIDGE=2]=\"BRIDGE\"}(u||(u={})),function(e){e[e.META=0]=\"META\",e[e.OP=1]=\"OP\",e[e.SERIES=2]=\"SERIES\"}(c||(c={}));var s=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{};function d(e,n){return e(n={exports:{}},n.exports),n.exports}var f=function(){this.__data__=[],this.size=0};var h=function(e,n){return e===n||e!=e&&n!=n};var l=function(e,n){for(var t=e.length;t--;)if(h(e[t][0],n))return t;return-1},v=Array.prototype.splice;var p=function(e){var n=this.__data__,t=l(n,e);return!(t<0)&&(t==n.length-1?n.pop():v.call(n,t,1),--this.size,!0)};var g=function(e){var n=this.__data__,t=l(n,e);return t<0?void 0:n[t][1]};var y=function(e){return l(this.__data__,e)>-1};var b=function(e,n){var t=this.__data__,r=l(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this};function m(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}m.prototype.clear=f,m.prototype.delete=p,m.prototype.get=g,m.prototype.has=y,m.prototype.set=b;var w=m;var E=function(){this.__data__=new w,this.size=0};var _=function(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t};var j=function(e){return this.__data__.get(e)};var x=function(e){return this.__data__.has(e)},N=\"object\"==typeof s&&s&&s.Object===Object&&s,O=\"object\"==typeof self&&self&&self.Object===Object&&self,k=N||O||Function(\"return this\")(),I=k.Symbol,S=Object.prototype,M=S.hasOwnProperty,C=S.toString,G=I?I.toStringTag:void 0;var B=function(e){var n=M.call(e,G),t=e[G];try{e[G]=void 0;var r=!0}catch(e){}var o=C.call(e);return r&&(n?e[G]=t:delete e[G]),o},A=Object.prototype.toString;var L=function(e){return A.call(e)},R=I?I.toStringTag:void 0;var T=function(e){return null==e?void 0===e?\"[object Undefined]\":\"[object Null]\":R&&R in Object(e)?B(e):L(e)};var D=function(e){var n=typeof e;return null!=e&&(\"object\"==n||\"function\"==n)};var P,z=function(e){if(!D(e))return!1;var n=T(e);return\"[object Function]\"==n||\"[object GeneratorFunction]\"==n||\"[object AsyncFunction]\"==n||\"[object Proxy]\"==n},F=k[\"__core-js_shared__\"],U=(P=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+P:\"\";var V=function(e){return!!U&&U in e},$=Function.prototype.toString;var H=function(e){if(null!=e){try{return $.call(e)}catch(e){}try{return e+\"\"}catch(e){}}return\"\"},W=/^\\[object .+?Constructor\\]$/,q=Function.prototype,Y=Object.prototype,J=q.toString,X=Y.hasOwnProperty,K=RegExp(\"^\"+J.call(X).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\");var Q=function(e){return!(!D(e)||V(e))&&(z(e)?K:W).test(H(e))};var Z=function(e,n){return null==e?void 0:e[n]};var ee=function(e,n){var t=Z(e,n);return Q(t)?t:void 0},ne=ee(k,\"Map\"),te=ee(Object,\"create\");var re=function(){this.__data__=te?te(null):{},this.size=0};var oe=function(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n},ie=Object.prototype.hasOwnProperty;var ae=function(e){var n=this.__data__;if(te){var t=n[e];return\"__lodash_hash_undefined__\"===t?void 0:t}return ie.call(n,e)?n[e]:void 0},ue=Object.prototype.hasOwnProperty;var ce=function(e){var n=this.__data__;return te?void 0!==n[e]:ue.call(n,e)};var se=function(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=te&&void 0===n?\"__lodash_hash_undefined__\":n,this};function de(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}de.prototype.clear=re,de.prototype.delete=oe,de.prototype.get=ae,de.prototype.has=ce,de.prototype.set=se;var fe=de;var he=function(){this.size=0,this.__data__={hash:new fe,map:new(ne||w),string:new fe}};var le=function(e){var n=typeof e;return\"string\"==n||\"number\"==n||\"symbol\"==n||\"boolean\"==n?\"__proto__\"!==e:null===e};var ve=function(e,n){var t=e.__data__;return le(n)?t[\"string\"==typeof n?\"string\":\"hash\"]:t.map};var pe=function(e){var n=ve(this,e).delete(e);return this.size-=n?1:0,n};var ge=function(e){return ve(this,e).get(e)};var ye=function(e){return ve(this,e).has(e)};var be=function(e,n){var t=ve(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this};function me(e){var n=-1,t=null==e?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}me.prototype.clear=he,me.prototype.delete=pe,me.prototype.get=ge,me.prototype.has=ye,me.prototype.set=be;var we=me;var Ee=function(e,n){var t=this.__data__;if(t instanceof w){var r=t.__data__;if(!ne||r.length<199)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new we(r)}return t.set(e,n),this.size=t.size,this};function _e(e){var n=this.__data__=new w(e);this.size=n.size}_e.prototype.clear=E,_e.prototype.delete=_,_e.prototype.get=j,_e.prototype.has=x,_e.prototype.set=Ee;var je=_e;var xe=function(e,n){for(var t=-1,r=null==e?0:e.length;++t<r&&!1!==n(e[t],t,e););return e},Ne=function(){try{var e=ee(Object,\"defineProperty\");return e({},\"\",{}),e}catch(e){}}();var Oe=function(e,n,t){\"__proto__\"==n&&Ne?Ne(e,n,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[n]=t},ke=Object.prototype.hasOwnProperty;var Ie=function(e,n,t){var r=e[n];ke.call(e,n)&&h(r,t)&&(void 0!==t||n in e)||Oe(e,n,t)};var Se=function(e,n,t,r){var o=!t;t||(t={});for(var i=-1,a=n.length;++i<a;){var u=n[i],c=r?r(t[u],e[u],u,t,e):void 0;void 0===c&&(c=e[u]),o?Oe(t,u,c):Ie(t,u,c)}return t};var Me=function(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r};var Ce=function(e){return null!=e&&\"object\"==typeof e};var Ge=function(e){return Ce(e)&&\"[object Arguments]\"==T(e)},Be=Object.prototype,Ae=Be.hasOwnProperty,Le=Be.propertyIsEnumerable,Re=Ge(function(){return arguments}())?Ge:function(e){return Ce(e)&&Ae.call(e,\"callee\")&&!Le.call(e,\"callee\")},Te=Array.isArray;var De=function(){return!1},Pe=d((function(e,n){var t=n&&!n.nodeType&&n,r=t&&e&&!e.nodeType&&e,o=r&&r.exports===t?k.Buffer:void 0,i=(o?o.isBuffer:void 0)||De;e.exports=i})),ze=/^(?:0|[1-9]\\d*)$/;var Fe=function(e,n){var t=typeof e;return!!(n=null==n?9007199254740991:n)&&(\"number\"==t||\"symbol\"!=t&&ze.test(e))&&e>-1&&e%1==0&&e<n};var Ue=function(e){return\"number\"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Ve={};Ve[\"[object Float32Array]\"]=Ve[\"[object Float64Array]\"]=Ve[\"[object Int8Array]\"]=Ve[\"[object Int16Array]\"]=Ve[\"[object Int32Array]\"]=Ve[\"[object Uint8Array]\"]=Ve[\"[object Uint8ClampedArray]\"]=Ve[\"[object Uint16Array]\"]=Ve[\"[object Uint32Array]\"]=!0,Ve[\"[object Arguments]\"]=Ve[\"[object Array]\"]=Ve[\"[object ArrayBuffer]\"]=Ve[\"[object Boolean]\"]=Ve[\"[object DataView]\"]=Ve[\"[object Date]\"]=Ve[\"[object Error]\"]=Ve[\"[object Function]\"]=Ve[\"[object Map]\"]=Ve[\"[object Number]\"]=Ve[\"[object Object]\"]=Ve[\"[object RegExp]\"]=Ve[\"[object Set]\"]=Ve[\"[object String]\"]=Ve[\"[object WeakMap]\"]=!1;var $e=function(e){return Ce(e)&&Ue(e.length)&&!!Ve[T(e)]};var He=function(e){return function(n){return e(n)}},We=d((function(e,n){var t=n&&!n.nodeType&&n,r=t&&e&&!e.nodeType&&e,o=r&&r.exports===t&&N.process,i=function(){try{var e=r&&r.require&&r.require(\"util\").types;return e||o&&o.binding&&o.binding(\"util\")}catch(e){}}();e.exports=i})),qe=We&&We.isTypedArray,Ye=qe?He(qe):$e,Je=Object.prototype.hasOwnProperty;var Xe=function(e,n){var t=Te(e),r=!t&&Re(e),o=!t&&!r&&Pe(e),i=!t&&!r&&!o&&Ye(e),a=t||r||o||i,u=a?Me(e.length,String):[],c=u.length;for(var s in e)!n&&!Je.call(e,s)||a&&(\"length\"==s||o&&(\"offset\"==s||\"parent\"==s)||i&&(\"buffer\"==s||\"byteLength\"==s||\"byteOffset\"==s)||Fe(s,c))||u.push(s);return u},Ke=Object.prototype;var Qe=function(e){var n=e&&e.constructor;return e===(\"function\"==typeof n&&n.prototype||Ke)};var Ze=function(e,n){return function(t){return e(n(t))}},en=Ze(Object.keys,Object),nn=Object.prototype.hasOwnProperty;var tn=function(e){if(!Qe(e))return en(e);var n=[];for(var t in Object(e))nn.call(e,t)&&\"constructor\"!=t&&n.push(t);return n};var rn=function(e){return null!=e&&Ue(e.length)&&!z(e)};var on=function(e){return rn(e)?Xe(e):tn(e)};var an=function(e,n){return e&&Se(n,on(n),e)};var un=function(e){var n=[];if(null!=e)for(var t in Object(e))n.push(t);return n},cn=Object.prototype.hasOwnProperty;var sn=function(e){if(!D(e))return un(e);var n=Qe(e),t=[];for(var r in e)(\"constructor\"!=r||!n&&cn.call(e,r))&&t.push(r);return t};var dn=function(e){return rn(e)?Xe(e,!0):sn(e)};var fn=function(e,n){return e&&Se(n,dn(n),e)},hn=d((function(e,n){var t=n&&!n.nodeType&&n,r=t&&e&&!e.nodeType&&e,o=r&&r.exports===t?k.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,n){if(n)return e.slice();var t=e.length,r=i?i(t):new e.constructor(t);return e.copy(r),r}}));var ln=function(e,n){var t=-1,r=e.length;for(n||(n=Array(r));++t<r;)n[t]=e[t];return n};var vn=function(e,n){for(var t=-1,r=null==e?0:e.length,o=0,i=[];++t<r;){var a=e[t];n(a,t,e)&&(i[o++]=a)}return i};var pn=function(){return[]},gn=Object.prototype.propertyIsEnumerable,yn=Object.getOwnPropertySymbols,bn=yn?function(e){return null==e?[]:(e=Object(e),vn(yn(e),(function(n){return gn.call(e,n)})))}:pn;var mn=function(e,n){return Se(e,bn(e),n)};var wn=function(e,n){for(var t=-1,r=n.length,o=e.length;++t<r;)e[o+t]=n[t];return e},En=Ze(Object.getPrototypeOf,Object),_n=Object.getOwnPropertySymbols?function(e){for(var n=[];e;)wn(n,bn(e)),e=En(e);return n}:pn;var jn=function(e,n){return Se(e,_n(e),n)};var xn=function(e,n,t){var r=n(e);return Te(e)?r:wn(r,t(e))};var Nn=function(e){return xn(e,on,bn)};var On=function(e){return xn(e,dn,_n)},kn=ee(k,\"DataView\"),In=ee(k,\"Promise\"),Sn=ee(k,\"Set\"),Mn=ee(k,\"WeakMap\"),Cn=H(kn),Gn=H(ne),Bn=H(In),An=H(Sn),Ln=H(Mn),Rn=T;(kn&&\"[object DataView]\"!=Rn(new kn(new ArrayBuffer(1)))||ne&&\"[object Map]\"!=Rn(new ne)||In&&\"[object Promise]\"!=Rn(In.resolve())||Sn&&\"[object Set]\"!=Rn(new Sn)||Mn&&\"[object WeakMap]\"!=Rn(new Mn))&&(Rn=function(e){var n=T(e),t=\"[object Object]\"==n?e.constructor:void 0,r=t?H(t):\"\";if(r)switch(r){case Cn:return\"[object DataView]\";case Gn:return\"[object Map]\";case Bn:return\"[object Promise]\";case An:return\"[object Set]\";case Ln:return\"[object WeakMap]\"}return n});var Tn=Rn,Dn=Object.prototype.hasOwnProperty;var Pn=function(e){var n=e.length,t=new e.constructor(n);return n&&\"string\"==typeof e[0]&&Dn.call(e,\"index\")&&(t.index=e.index,t.input=e.input),t},zn=k.Uint8Array;var Fn=function(e){var n=new e.constructor(e.byteLength);return new zn(n).set(new zn(e)),n};var Un=function(e,n){var t=n?Fn(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)},Vn=/\\w*$/;var $n=function(e){var n=new e.constructor(e.source,Vn.exec(e));return n.lastIndex=e.lastIndex,n},Hn=I?I.prototype:void 0,Wn=Hn?Hn.valueOf:void 0;var qn=function(e){return Wn?Object(Wn.call(e)):{}};var Yn=function(e,n){var t=n?Fn(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)};var Jn=function(e,n,t){var r=e.constructor;switch(n){case\"[object ArrayBuffer]\":return Fn(e);case\"[object Boolean]\":case\"[object Date]\":return new r(+e);case\"[object DataView]\":return Un(e,t);case\"[object Float32Array]\":case\"[object Float64Array]\":case\"[object Int8Array]\":case\"[object Int16Array]\":case\"[object Int32Array]\":case\"[object Uint8Array]\":case\"[object Uint8ClampedArray]\":case\"[object Uint16Array]\":case\"[object Uint32Array]\":return Yn(e,t);case\"[object Map]\":return new r;case\"[object Number]\":case\"[object String]\":return new r(e);case\"[object RegExp]\":return $n(e);case\"[object Set]\":return new r;case\"[object Symbol]\":return qn(e)}},Xn=Object.create,Kn=function(){function e(){}return function(n){if(!D(n))return{};if(Xn)return Xn(n);e.prototype=n;var t=new e;return e.prototype=void 0,t}}();var Qn=function(e){return\"function\"!=typeof e.constructor||Qe(e)?{}:Kn(En(e))};var Zn=function(e){return Ce(e)&&\"[object Map]\"==Tn(e)},et=We&&We.isMap,nt=et?He(et):Zn;var tt=function(e){return Ce(e)&&\"[object Set]\"==Tn(e)},rt=We&&We.isSet,ot=rt?He(rt):tt,it={};it[\"[object Arguments]\"]=it[\"[object Array]\"]=it[\"[object ArrayBuffer]\"]=it[\"[object DataView]\"]=it[\"[object Boolean]\"]=it[\"[object Date]\"]=it[\"[object Float32Array]\"]=it[\"[object Float64Array]\"]=it[\"[object Int8Array]\"]=it[\"[object Int16Array]\"]=it[\"[object Int32Array]\"]=it[\"[object Map]\"]=it[\"[object Number]\"]=it[\"[object Object]\"]=it[\"[object RegExp]\"]=it[\"[object Set]\"]=it[\"[object String]\"]=it[\"[object Symbol]\"]=it[\"[object Uint8Array]\"]=it[\"[object Uint8ClampedArray]\"]=it[\"[object Uint16Array]\"]=it[\"[object Uint32Array]\"]=!0,it[\"[object Error]\"]=it[\"[object Function]\"]=it[\"[object WeakMap]\"]=!1;var at=function e(n,t,r,o,i,a){var u,c=1&t,s=2&t,d=4&t;if(r&&(u=i?r(n,o,i,a):r(n)),void 0!==u)return u;if(!D(n))return n;var f=Te(n);if(f){if(u=Pn(n),!c)return ln(n,u)}else{var h=Tn(n),l=\"[object Function]\"==h||\"[object GeneratorFunction]\"==h;if(Pe(n))return hn(n,c);if(\"[object Object]\"==h||\"[object Arguments]\"==h||l&&!i){if(u=s||l?{}:Qn(n),!c)return s?jn(n,fn(u,n)):mn(n,an(u,n))}else{if(!it[h])return i?n:{};u=Jn(n,h,c)}}a||(a=new je);var v=a.get(n);if(v)return v;a.set(n,u),ot(n)?n.forEach((function(o){u.add(e(o,t,r,o,n,a))})):nt(n)&&n.forEach((function(o,i){u.set(i,e(o,t,r,i,n,a))}));var p=f?void 0:(d?s?On:Nn:s?dn:on)(n);return xe(p||n,(function(o,i){p&&(o=n[i=o]),Ie(u,i,e(o,t,r,i,n,a))})),u};var ut=function(e){return at(e,4)};var ct=function(e){return function(){return e}};var st=function(e){return function(n,t,r){for(var o=-1,i=Object(n),a=r(n),u=a.length;u--;){var c=a[e?u:++o];if(!1===t(i[c],c,i))break}return n}}();var dt=function(e,n){return e&&st(e,n,on)};var ft=function(e,n){return function(t,r){if(null==t)return t;if(!rn(t))return e(t,r);for(var o=t.length,i=n?o:-1,a=Object(t);(n?i--:++i<o)&&!1!==r(a[i],i,a););return t}}(dt);var ht=function(e){return e};var lt=function(e){return\"function\"==typeof e?e:ht};var vt=function(e,n){return(Te(e)?xe:ft)(e,lt(n))},pt=vt;var gt=function(e,n){var t=[];return ft(e,(function(e,r,o){n(e,r,o)&&t.push(e)})),t};var yt=function(e){return this.__data__.set(e,\"__lodash_hash_undefined__\"),this};var bt=function(e){return this.__data__.has(e)};function mt(e){var n=-1,t=null==e?0:e.length;for(this.__data__=new we;++n<t;)this.add(e[n])}mt.prototype.add=mt.prototype.push=yt,mt.prototype.has=bt;var wt=mt;var Et=function(e,n){for(var t=-1,r=null==e?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1};var _t=function(e,n){return e.has(n)};var jt=function(e,n,t,r,o,i){var a=1&t,u=e.length,c=n.length;if(u!=c&&!(a&&c>u))return!1;var s=i.get(e),d=i.get(n);if(s&&d)return s==n&&d==e;var f=-1,h=!0,l=2&t?new wt:void 0;for(i.set(e,n),i.set(n,e);++f<u;){var v=e[f],p=n[f];if(r)var g=a?r(p,v,f,n,e,i):r(v,p,f,e,n,i);if(void 0!==g){if(g)continue;h=!1;break}if(l){if(!Et(n,(function(e,n){if(!_t(l,n)&&(v===e||o(v,e,t,r,i)))return l.push(n)}))){h=!1;break}}else if(v!==p&&!o(v,p,t,r,i)){h=!1;break}}return i.delete(e),i.delete(n),h};var xt=function(e){var n=-1,t=Array(e.size);return e.forEach((function(e,r){t[++n]=[r,e]})),t};var Nt=function(e){var n=-1,t=Array(e.size);return e.forEach((function(e){t[++n]=e})),t},Ot=I?I.prototype:void 0,kt=Ot?Ot.valueOf:void 0;var It=function(e,n,t,r,o,i,a){switch(t){case\"[object DataView]\":if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case\"[object ArrayBuffer]\":return!(e.byteLength!=n.byteLength||!i(new zn(e),new zn(n)));case\"[object Boolean]\":case\"[object Date]\":case\"[object Number]\":return h(+e,+n);case\"[object Error]\":return e.name==n.name&&e.message==n.message;case\"[object RegExp]\":case\"[object String]\":return e==n+\"\";case\"[object Map]\":var u=xt;case\"[object Set]\":var c=1&r;if(u||(u=Nt),e.size!=n.size&&!c)return!1;var s=a.get(e);if(s)return s==n;r|=2,a.set(e,n);var d=jt(u(e),u(n),r,o,i,a);return a.delete(e),d;case\"[object Symbol]\":if(kt)return kt.call(e)==kt.call(n)}return!1},St=Object.prototype.hasOwnProperty;var Mt=function(e,n,t,r,o,i){var a=1&t,u=Nn(e),c=u.length;if(c!=Nn(n).length&&!a)return!1;for(var s=c;s--;){var d=u[s];if(!(a?d in n:St.call(n,d)))return!1}var f=i.get(e),h=i.get(n);if(f&&h)return f==n&&h==e;var l=!0;i.set(e,n),i.set(n,e);for(var v=a;++s<c;){var p=e[d=u[s]],g=n[d];if(r)var y=a?r(g,p,d,n,e,i):r(p,g,d,e,n,i);if(!(void 0===y?p===g||o(p,g,t,r,i):y)){l=!1;break}v||(v=\"constructor\"==d)}if(l&&!v){var b=e.constructor,m=n.constructor;b==m||!(\"constructor\"in e)||!(\"constructor\"in n)||\"function\"==typeof b&&b instanceof b&&\"function\"==typeof m&&m instanceof m||(l=!1)}return i.delete(e),i.delete(n),l},Ct=Object.prototype.hasOwnProperty;var Gt=function(e,n,t,r,o,i){var a=Te(e),u=Te(n),c=a?\"[object Array]\":Tn(e),s=u?\"[object Array]\":Tn(n),d=\"[object Object]\"==(c=\"[object Arguments]\"==c?\"[object Object]\":c),f=\"[object Object]\"==(s=\"[object Arguments]\"==s?\"[object Object]\":s),h=c==s;if(h&&Pe(e)){if(!Pe(n))return!1;a=!0,d=!1}if(h&&!d)return i||(i=new je),a||Ye(e)?jt(e,n,t,r,o,i):It(e,n,c,t,r,o,i);if(!(1&t)){var l=d&&Ct.call(e,\"__wrapped__\"),v=f&&Ct.call(n,\"__wrapped__\");if(l||v){var p=l?e.value():e,g=v?n.value():n;return i||(i=new je),o(p,g,t,r,i)}}return!!h&&(i||(i=new je),Mt(e,n,t,r,o,i))};var Bt=function e(n,t,r,o,i){return n===t||(null==n||null==t||!Ce(n)&&!Ce(t)?n!=n&&t!=t:Gt(n,t,r,o,e,i))};var At=function(e,n,t,r){var o=t.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var u=t[o];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<i;){var c=(u=t[o])[0],s=e[c],d=u[1];if(a&&u[2]){if(void 0===s&&!(c in e))return!1}else{var f=new je;if(r)var h=r(s,d,c,e,n,f);if(!(void 0===h?Bt(d,s,3,r,f):h))return!1}}return!0};var Lt=function(e){return e==e&&!D(e)};var Rt=function(e){for(var n=on(e),t=n.length;t--;){var r=n[t],o=e[r];n[t]=[r,o,Lt(o)]}return n};var Tt=function(e,n){return function(t){return null!=t&&(t[e]===n&&(void 0!==n||e in Object(t)))}};var Dt=function(e){var n=Rt(e);return 1==n.length&&n[0][2]?Tt(n[0][0],n[0][1]):function(t){return t===e||At(t,e,n)}};var Pt=function(e){return\"symbol\"==typeof e||Ce(e)&&\"[object Symbol]\"==T(e)},zt=/\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,Ft=/^\\w*$/;var Ut=function(e,n){if(Te(e))return!1;var t=typeof e;return!(\"number\"!=t&&\"symbol\"!=t&&\"boolean\"!=t&&null!=e&&!Pt(e))||(Ft.test(e)||!zt.test(e)||null!=n&&e in Object(n))};function Vt(e,n){if(\"function\"!=typeof e||null!=n&&\"function\"!=typeof n)throw new TypeError(\"Expected a function\");var t=function(){var r=arguments,o=n?n.apply(this,r):r[0],i=t.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return t.cache=i.set(o,a)||i,a};return t.cache=new(Vt.Cache||we),t}Vt.Cache=we;var $t=Vt;var Ht=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,Wt=/\\\\(\\\\)?/g,qt=function(e){var n=$t(e,(function(e){return 500===t.size&&t.clear(),e})),t=n.cache;return n}((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(\"\"),e.replace(Ht,(function(e,t,r,o){n.push(r?o.replace(Wt,\"$1\"):t||e)})),n}));var Yt=function(e,n){for(var t=-1,r=null==e?0:e.length,o=Array(r);++t<r;)o[t]=n(e[t],t,e);return o},Jt=I?I.prototype:void 0,Xt=Jt?Jt.toString:void 0;var Kt=function e(n){if(\"string\"==typeof n)return n;if(Te(n))return Yt(n,e)+\"\";if(Pt(n))return Xt?Xt.call(n):\"\";var t=n+\"\";return\"0\"==t&&1/n==-Infinity?\"-0\":t};var Qt=function(e){return null==e?\"\":Kt(e)};var Zt=function(e,n){return Te(e)?e:Ut(e,n)?[e]:qt(Qt(e))};var er=function(e){if(\"string\"==typeof e||Pt(e))return e;var n=e+\"\";return\"0\"==n&&1/e==-Infinity?\"-0\":n};var nr=function(e,n){for(var t=0,r=(n=Zt(n,e)).length;null!=e&&t<r;)e=e[er(n[t++])];return t&&t==r?e:void 0};var tr=function(e,n,t){var r=null==e?void 0:nr(e,n);return void 0===r?t:r};var rr=function(e,n){return null!=e&&n in Object(e)};var or=function(e,n,t){for(var r=-1,o=(n=Zt(n,e)).length,i=!1;++r<o;){var a=er(n[r]);if(!(i=null!=e&&t(e,a)))break;e=e[a]}return i||++r!=o?i:!!(o=null==e?0:e.length)&&Ue(o)&&Fe(a,o)&&(Te(e)||Re(e))};var ir=function(e,n){return null!=e&&or(e,n,rr)};var ar=function(e,n){return Ut(e)&&Lt(n)?Tt(er(e),n):function(t){var r=tr(t,e);return void 0===r&&r===n?ir(t,e):Bt(n,r,3)}};var ur=function(e){return function(n){return null==n?void 0:n[e]}};var cr=function(e){return function(n){return nr(n,e)}};var sr=function(e){return Ut(e)?ur(er(e)):cr(e)};var dr=function(e){return\"function\"==typeof e?e:null==e?ht:\"object\"==typeof e?Te(e)?ar(e[0],e[1]):Dt(e):sr(e)};var fr=function(e,n){return(Te(e)?vn:gt)(e,dr(n))},hr=Object.prototype.hasOwnProperty;var lr=function(e,n){return null!=e&&hr.call(e,n)};var vr=function(e,n){return null!=e&&or(e,n,lr)},pr=Object.prototype.hasOwnProperty;var gr=function(e){if(null==e)return!0;if(rn(e)&&(Te(e)||\"string\"==typeof e||\"function\"==typeof e.splice||Pe(e)||Ye(e)||Re(e)))return!e.length;var n=Tn(e);if(\"[object Map]\"==n||\"[object Set]\"==n)return!e.size;if(Qe(e))return!tn(e).length;for(var t in e)if(pr.call(e,t))return!1;return!0};var yr=function(e){return void 0===e};var br=function(e,n){var t=-1,r=rn(e)?Array(e.length):[];return ft(e,(function(e,o,i){r[++t]=n(e,o,i)})),r};var mr=function(e,n){return(Te(e)?Yt:br)(e,dr(n))};var wr=function(e,n,t,r){var o=-1,i=null==e?0:e.length;for(r&&i&&(t=e[++o]);++o<i;)t=n(t,e[o],o,e);return t};var Er=function(e,n,t,r,o){return o(e,(function(e,o,i){t=r?(r=!1,e):n(t,e,o,i)})),t};var _r=function(e,n,t){var r=Te(e)?wr:Er,o=arguments.length<3;return r(e,dr(n),t,o,ft)};var jr=function(e){return\"string\"==typeof e||!Te(e)&&Ce(e)&&\"[object String]\"==T(e)},xr=ur(\"length\"),Nr=RegExp(\"[\\\\u200d\\\\ud800-\\\\udfff\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\\\\ufe0e\\\\ufe0f]\");var Or=function(e){return Nr.test(e)},kr=\"[\\\\ud800-\\\\udfff]\",Ir=\"[\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff]\",Sr=\"\\\\ud83c[\\\\udffb-\\\\udfff]\",Mr=\"[^\\\\ud800-\\\\udfff]\",Cr=\"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",Gr=\"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",Br=\"(?:\"+Ir+\"|\"+Sr+\")\"+\"?\",Ar=\"[\\\\ufe0e\\\\ufe0f]?\"+Br+(\"(?:\\\\u200d(?:\"+[Mr,Cr,Gr].join(\"|\")+\")[\\\\ufe0e\\\\ufe0f]?\"+Br+\")*\"),Lr=\"(?:\"+[Mr+Ir+\"?\",Ir,Cr,Gr,kr].join(\"|\")+\")\",Rr=RegExp(Sr+\"(?=\"+Sr+\")|\"+Lr+Ar,\"g\");var Tr=function(e){for(var n=Rr.lastIndex=0;Rr.test(e);)++n;return n};var Dr=function(e){return Or(e)?Tr(e):xr(e)};var Pr=function(e){if(null==e)return 0;if(rn(e))return jr(e)?Dr(e):e.length;var n=Tn(e);return\"[object Map]\"==n||\"[object Set]\"==n?e.size:tn(e).length};var zr=function(e,n,t){var r=Te(e),o=r||Pe(e)||Ye(e);if(n=dr(n),null==t){var i=e&&e.constructor;t=o?r?new i:[]:D(e)&&z(i)?Kn(En(e)):{}}return(o?xe:dt)(e,(function(e,r,o){return n(t,e,r,o)})),t},Fr=I?I.isConcatSpreadable:void 0;var Ur=function(e){return Te(e)||Re(e)||!!(Fr&&e&&e[Fr])};var Vr=function e(n,t,r,o,i){var a=-1,u=n.length;for(r||(r=Ur),i||(i=[]);++a<u;){var c=n[a];t>0&&r(c)?t>1?e(c,t-1,r,o,i):wn(i,c):o||(i[i.length]=c)}return i};var $r=function(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)},Hr=Math.max;var Wr=function(e,n,t){return n=Hr(void 0===n?e.length-1:n,0),function(){for(var r=arguments,o=-1,i=Hr(r.length-n,0),a=Array(i);++o<i;)a[o]=r[n+o];o=-1;for(var u=Array(n+1);++o<n;)u[o]=r[o];return u[n]=t(a),$r(e,this,u)}},qr=Ne?function(e,n){return Ne(e,\"toString\",{configurable:!0,enumerable:!1,value:ct(n),writable:!0})}:ht,Yr=Date.now;var Jr=function(e){var n=0,t=0;return function(){var r=Yr(),o=16-(r-t);if(t=r,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}(qr);var Xr=function(e,n){return Jr(Wr(e,n,ht),e+\"\")};var Kr=function(e,n,t,r){for(var o=e.length,i=t+(r?1:-1);r?i--:++i<o;)if(n(e[i],i,e))return i;return-1};var Qr=function(e){return e!=e};var Zr=function(e,n,t){for(var r=t-1,o=e.length;++r<o;)if(e[r]===n)return r;return-1};var eo=function(e,n,t){return n==n?Zr(e,n,t):Kr(e,Qr,t)};var no=function(e,n){return!!(null==e?0:e.length)&&eo(e,n,0)>-1};var to=function(e,n,t){for(var r=-1,o=null==e?0:e.length;++r<o;)if(t(n,e[r]))return!0;return!1};var ro=function(){},oo=Sn&&1/Nt(new Sn([,-0]))[1]==1/0?function(e){return new Sn(e)}:ro;var io=function(e,n,t){var r=-1,o=no,i=e.length,a=!0,u=[],c=u;if(t)a=!1,o=to;else if(i>=200){var s=n?null:oo(e);if(s)return Nt(s);a=!1,o=_t,c=new wt}else c=n?[]:u;e:for(;++r<i;){var d=e[r],f=n?n(d):d;if(d=t||0!==d?d:0,a&&f==f){for(var h=c.length;h--;)if(c[h]===f)continue e;n&&c.push(f),u.push(d)}else o(c,f,t)||(c!==u&&c.push(f),u.push(d))}return u};var ao=function(e){return Ce(e)&&rn(e)},uo=Xr((function(e){return io(Vr(e,1,ao,!0))}));var co=function(e,n){return Yt(n,(function(n){return e[n]}))};var so,fo=function(e){return null==e?[]:co(e,on(e))};try{so={clone:ut,constant:ct,each:pt,filter:fr,has:vr,isArray:Te,isEmpty:gr,isFunction:z,isUndefined:yr,keys:on,map:mr,reduce:_r,size:Pr,transform:zr,union:uo,values:fo}}catch(e){}so||(so=window._);var ho=so,lo=vo;function vo(e){this._isDirected=!ho.has(e,\"directed\")||e.directed,this._isMultigraph=!!ho.has(e,\"multigraph\")&&e.multigraph,this._isCompound=!!ho.has(e,\"compound\")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=ho.constant(void 0),this._defaultEdgeLabelFn=ho.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[\"\\0\"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function po(e,n){e[n]?e[n]++:e[n]=1}function go(e,n){--e[n]||delete e[n]}function yo(e,n,t,r){var o=\"\"+n,i=\"\"+t;if(!e&&o>i){var a=o;o=i,i=a}return o+\"\u0001\"+i+\"\u0001\"+(ho.isUndefined(r)?\"\\0\":r)}function bo(e,n,t,r){var o=\"\"+n,i=\"\"+t;if(!e&&o>i){var a=o;o=i,i=a}var u={v:o,w:i};return r&&(u.name=r),u}function mo(e,n){return yo(e,n.v,n.w,n.name)}vo.prototype._nodeCount=0,vo.prototype._edgeCount=0,vo.prototype.isDirected=function(){return this._isDirected},vo.prototype.isMultigraph=function(){return this._isMultigraph},vo.prototype.isCompound=function(){return this._isCompound},vo.prototype.setGraph=function(e){return this._label=e,this},vo.prototype.graph=function(){return this._label},vo.prototype.setDefaultNodeLabel=function(e){return ho.isFunction(e)||(e=ho.constant(e)),this._defaultNodeLabelFn=e,this},vo.prototype.nodeCount=function(){return this._nodeCount},vo.prototype.nodes=function(){return ho.keys(this._nodes)},vo.prototype.sources=function(){var e=this;return ho.filter(this.nodes(),(function(n){return ho.isEmpty(e._in[n])}))},vo.prototype.sinks=function(){var e=this;return ho.filter(this.nodes(),(function(n){return ho.isEmpty(e._out[n])}))},vo.prototype.setNodes=function(e,n){var t=arguments,r=this;return ho.each(e,(function(e){t.length>1?r.setNode(e,n):r.setNode(e)})),this},vo.prototype.setNode=function(e,n){return ho.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=n),this):(this._nodes[e]=arguments.length>1?n:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=\"\\0\",this._children[e]={},this._children[\"\\0\"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},vo.prototype.node=function(e){return this._nodes[e]},vo.prototype.hasNode=function(e){return ho.has(this._nodes,e)},vo.prototype.removeNode=function(e){var n=this;if(ho.has(this._nodes,e)){var t=function(e){n.removeEdge(n._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],ho.each(this.children(e),(function(e){n.setParent(e)})),delete this._children[e]),ho.each(ho.keys(this._in[e]),t),delete this._in[e],delete this._preds[e],ho.each(ho.keys(this._out[e]),t),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},vo.prototype.setParent=function(e,n){if(!this._isCompound)throw new Error(\"Cannot set parent in a non-compound graph\");if(ho.isUndefined(n))n=\"\\0\";else{for(var t=n+=\"\";!ho.isUndefined(t);t=this.parent(t))if(t===e)throw new Error(\"Setting \"+n+\" as parent of \"+e+\" would create a cycle\");this.setNode(n)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=n,this._children[n][e]=!0,this},vo.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},vo.prototype.parent=function(e){if(this._isCompound){var n=this._parent[e];if(\"\\0\"!==n)return n}},vo.prototype.children=function(e){if(ho.isUndefined(e)&&(e=\"\\0\"),this._isCompound){var n=this._children[e];if(n)return ho.keys(n)}else{if(\"\\0\"===e)return this.nodes();if(this.hasNode(e))return[]}},vo.prototype.predecessors=function(e){var n=this._preds[e];if(n)return ho.keys(n)},vo.prototype.successors=function(e){var n=this._sucs[e];if(n)return ho.keys(n)},vo.prototype.neighbors=function(e){var n=this.predecessors(e);if(n)return ho.union(n,this.successors(e))},vo.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},vo.prototype.filterNodes=function(e){var n=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});n.setGraph(this.graph());var t=this;ho.each(this._nodes,(function(t,r){e(r)&&n.setNode(r,t)})),ho.each(this._edgeObjs,(function(e){n.hasNode(e.v)&&n.hasNode(e.w)&&n.setEdge(e,t.edge(e))}));var r={};function o(e){var i=t.parent(e);return void 0===i||n.hasNode(i)?(r[e]=i,i):i in r?r[i]:o(i)}return this._isCompound&&ho.each(n.nodes(),(function(e){n.setParent(e,o(e))})),n},vo.prototype.setDefaultEdgeLabel=function(e){return ho.isFunction(e)||(e=ho.constant(e)),this._defaultEdgeLabelFn=e,this},vo.prototype.edgeCount=function(){return this._edgeCount},vo.prototype.edges=function(){return ho.values(this._edgeObjs)},vo.prototype.setPath=function(e,n){var t=this,r=arguments;return ho.reduce(e,(function(e,o){return r.length>1?t.setEdge(e,o,n):t.setEdge(e,o),o})),this},vo.prototype.setEdge=function(){var e,n,t,r,o=!1,i=arguments[0];\"object\"==typeof i&&null!==i&&\"v\"in i?(e=i.v,n=i.w,t=i.name,2===arguments.length&&(r=arguments[1],o=!0)):(e=i,n=arguments[1],t=arguments[3],arguments.length>2&&(r=arguments[2],o=!0)),e=\"\"+e,n=\"\"+n,ho.isUndefined(t)||(t=\"\"+t);var a=yo(this._isDirected,e,n,t);if(ho.has(this._edgeLabels,a))return o&&(this._edgeLabels[a]=r),this;if(!ho.isUndefined(t)&&!this._isMultigraph)throw new Error(\"Cannot set a named edge when isMultigraph = false\");this.setNode(e),this.setNode(n),this._edgeLabels[a]=o?r:this._defaultEdgeLabelFn(e,n,t);var u=bo(this._isDirected,e,n,t);return e=u.v,n=u.w,Object.freeze(u),this._edgeObjs[a]=u,po(this._preds[n],e),po(this._sucs[e],n),this._in[n][a]=u,this._out[e][a]=u,this._edgeCount++,this},vo.prototype.edge=function(e,n,t){var r=1===arguments.length?mo(this._isDirected,arguments[0]):yo(this._isDirected,e,n,t);return this._edgeLabels[r]},vo.prototype.hasEdge=function(e,n,t){var r=1===arguments.length?mo(this._isDirected,arguments[0]):yo(this._isDirected,e,n,t);return ho.has(this._edgeLabels,r)},vo.prototype.removeEdge=function(e,n,t){var r=1===arguments.length?mo(this._isDirected,arguments[0]):yo(this._isDirected,e,n,t),o=this._edgeObjs[r];return o&&(e=o.v,n=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],go(this._preds[n],e),go(this._sucs[e],n),delete this._in[n][r],delete this._out[e][r],this._edgeCount--),this},vo.prototype.inEdges=function(e,n){var t=this._in[e];if(t){var r=ho.values(t);return n?ho.filter(r,(function(e){return e.v===n})):r}},vo.prototype.outEdges=function(e,n){var t=this._out[e];if(t){var r=ho.values(t);return n?ho.filter(r,(function(e){return e.w===n})):r}},vo.prototype.nodeEdges=function(e,n){var t=this.inEdges(e,n);if(t)return t.concat(this.outEdges(e,n))};var wo={Graph:lo,version:\"2.1.8\"},Eo={write:function(e){var n={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:_o(e),edges:jo(e)};ho.isUndefined(e.graph())||(n.value=ho.clone(e.graph()));return n},read:function(e){var n=new lo(e.options).setGraph(e.value);return ho.each(e.nodes,(function(e){n.setNode(e.v,e.value),e.parent&&n.setParent(e.v,e.parent)})),ho.each(e.edges,(function(e){n.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),n}};function _o(e){return ho.map(e.nodes(),(function(n){var t=e.node(n),r=e.parent(n),o={v:n};return ho.isUndefined(t)||(o.value=t),ho.isUndefined(r)||(o.parent=r),o}))}function jo(e){return ho.map(e.edges(),(function(n){var t=e.edge(n),r={v:n.v,w:n.w};return ho.isUndefined(n.name)||(r.name=n.name),ho.isUndefined(t)||(r.value=t),r}))}var xo=function(e){var n,t={},r=[];function o(r){ho.has(t,r)||(t[r]=!0,n.push(r),ho.each(e.successors(r),o),ho.each(e.predecessors(r),o))}return ho.each(e.nodes(),(function(e){n=[],o(e),n.length&&r.push(n)})),r};var No=Oo;function Oo(){this._arr=[],this._keyIndices={}}Oo.prototype.size=function(){return this._arr.length},Oo.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},Oo.prototype.has=function(e){return ho.has(this._keyIndices,e)},Oo.prototype.priority=function(e){var n=this._keyIndices[e];if(void 0!==n)return this._arr[n].priority},Oo.prototype.min=function(){if(0===this.size())throw new Error(\"Queue underflow\");return this._arr[0].key},Oo.prototype.add=function(e,n){var t=this._keyIndices;if(e=String(e),!ho.has(t,e)){var r=this._arr,o=r.length;return t[e]=o,r.push({key:e,priority:n}),this._decrease(o),!0}return!1},Oo.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Oo.prototype.decrease=function(e,n){var t=this._keyIndices[e];if(n>this._arr[t].priority)throw new Error(\"New priority is greater than current priority. Key: \"+e+\" Old: \"+this._arr[t].priority+\" New: \"+n);this._arr[t].priority=n,this._decrease(t)},Oo.prototype._heapify=function(e){var n=this._arr,t=2*e,r=t+1,o=e;t<n.length&&(o=n[t].priority<n[o].priority?t:o,r<n.length&&(o=n[r].priority<n[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))},Oo.prototype._decrease=function(e){for(var n,t=this._arr,r=t[e].priority;0!==e&&!(t[n=e>>1].priority<r);)this._swap(e,n),e=n},Oo.prototype._swap=function(e,n){var t=this._arr,r=this._keyIndices,o=t[e],i=t[n];t[e]=i,t[n]=o,r[i.key]=e,r[o.key]=n};var ko=function(e,n,t,r){return function(e,n,t,r){var o,i,a={},u=new No,c=function(e){var n=e.v!==o?e.v:e.w,r=a[n],c=t(e),s=i.distance+c;if(c<0)throw new Error(\"dijkstra does not allow negative edge weights. Bad edge: \"+e+\" Weight: \"+c);s<r.distance&&(r.distance=s,r.predecessor=o,u.decrease(n,s))};e.nodes().forEach((function(e){var t=e===n?0:Number.POSITIVE_INFINITY;a[e]={distance:t},u.add(e,t)}));for(;u.size()>0&&(o=u.removeMin(),(i=a[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(c);return a}(e,String(n),t||Io,r||function(n){return e.outEdges(n)})},Io=ho.constant(1);var So=function(e,n,t){return ho.transform(e.nodes(),(function(r,o){r[o]=ko(e,o,n,t)}),{})};var Mo=function(e){var n=0,t=[],r={},o=[];function i(a){var u=r[a]={onStack:!0,lowlink:n,index:n++};if(t.push(a),e.successors(a).forEach((function(e){ho.has(r,e)?r[e].onStack&&(u.lowlink=Math.min(u.lowlink,r[e].index)):(i(e),u.lowlink=Math.min(u.lowlink,r[e].lowlink))})),u.lowlink===u.index){var c,s=[];do{c=t.pop(),r[c].onStack=!1,s.push(c)}while(a!==c);o.push(s)}}return e.nodes().forEach((function(e){ho.has(r,e)||i(e)})),o};var Co=function(e){return ho.filter(Mo(e),(function(n){return n.length>1||1===n.length&&e.hasEdge(n[0],n[0])}))};var Go=function(e,n,t){return function(e,n,t){var r={},o=e.nodes();return o.forEach((function(e){r[e]={},r[e][e]={distance:0},o.forEach((function(n){e!==n&&(r[e][n]={distance:Number.POSITIVE_INFINITY})})),t(e).forEach((function(t){var o=t.v===e?t.w:t.v,i=n(t);r[e][o]={distance:i,predecessor:e}}))})),o.forEach((function(e){var n=r[e];o.forEach((function(t){var i=r[t];o.forEach((function(t){var r=i[e],o=n[t],a=i[t],u=r.distance+o.distance;u<a.distance&&(a.distance=u,a.predecessor=o.predecessor)}))}))})),r}(e,n||Bo,t||function(n){return e.outEdges(n)})},Bo=ho.constant(1);var Ao=Lo;function Lo(e){var n={},t={},r=[];if(ho.each(e.sinks(),(function o(i){if(ho.has(t,i))throw new Ro;ho.has(n,i)||(t[i]=!0,n[i]=!0,ho.each(e.predecessors(i),o),delete t[i],r.push(i))})),ho.size(n)!==e.nodeCount())throw new Ro;return r}function Ro(){}Lo.CycleException=Ro,Ro.prototype=new Error;var To=function(e,n,t){ho.isArray(n)||(n=[n]);var r=(e.isDirected()?e.successors:e.neighbors).bind(e),o=[],i={};return ho.each(n,(function(n){if(!e.hasNode(n))throw new Error(\"Graph does not have node: \"+n);Do(e,n,\"post\"===t,i,r,o)})),o};function Do(e,n,t,r,o,i){ho.has(r,n)||(r[n]=!0,t||i.push(n),ho.each(o(n),(function(n){Do(e,n,t,r,o,i)})),t&&i.push(n))}var Po,zo={Graph:wo.Graph,json:Eo,alg:{components:xo,dijkstra:ko,dijkstraAll:So,findCycles:Co,floydWarshall:Go,isAcyclic:function(e){try{Ao(e)}catch(e){if(e instanceof Ao.CycleException)return!1;throw e}return!0},postorder:function(e,n){return To(e,n,\"post\")},preorder:function(e,n){return To(e,n,\"pre\")},prim:function(e,n){var t,r=new lo,o={},i=new No;function a(e){var r=e.v===t?e.w:e.v,a=i.priority(r);if(void 0!==a){var u=n(e);u<a&&(o[r]=t,i.decrease(r,u))}}if(0===e.nodeCount())return r;ho.each(e.nodes(),(function(e){i.add(e,Number.POSITIVE_INFINITY),r.setNode(e)})),i.decrease(e.nodes()[0],0);var u=!1;for(;i.size()>0;){if(t=i.removeMin(),ho.has(o,t))r.setEdge(t,o[t]);else{if(u)throw new Error(\"Input graph is not connected: \"+e);u=!0}e.nodeEdges(t).forEach(a)}return r},tarjan:Mo,topsort:Ao},version:wo.version};try{Po=zo}catch(e){}Po||(Po=window.graphlib);var Fo=Po;var Uo=function(e){return at(e,5)};var Vo=function(e,n,t){if(!D(t))return!1;var r=typeof n;return!!(\"number\"==r?rn(t)&&Fe(n,t.length):\"string\"==r&&n in t)&&h(t[n],e)},$o=Object.prototype,Ho=$o.hasOwnProperty,Wo=Xr((function(e,n){e=Object(e);var t=-1,r=n.length,o=r>2?n[2]:void 0;for(o&&Vo(n[0],n[1],o)&&(r=1);++t<r;)for(var i=n[t],a=dn(i),u=-1,c=a.length;++u<c;){var s=a[u],d=e[s];(void 0===d||h(d,$o[s])&&!Ho.call(e,s))&&(e[s]=i[s])}return e}));var qo=function(e){return function(n,t,r){var o=Object(n);if(!rn(n)){var i=dr(t);n=on(n),t=function(e){return i(o[e],e,o)}}var a=e(n,t,r);return a>-1?o[i?n[a]:a]:void 0}},Yo=/^\\s+|\\s+$/g,Jo=/^[-+]0x[0-9a-f]+$/i,Xo=/^0b[01]+$/i,Ko=/^0o[0-7]+$/i,Qo=parseInt;var Zo=function(e){if(\"number\"==typeof e)return e;if(Pt(e))return NaN;if(D(e)){var n=\"function\"==typeof e.valueOf?e.valueOf():e;e=D(n)?n+\"\":n}if(\"string\"!=typeof e)return 0===e?e:+e;e=e.replace(Yo,\"\");var t=Xo.test(e);return t||Ko.test(e)?Qo(e.slice(2),t?2:8):Jo.test(e)?NaN:+e};var ei=function(e){return e?Infinity===(e=Zo(e))||-Infinity===e?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};var ni=function(e){var n=ei(e),t=n%1;return n==n?t?n-t:n:0},ti=Math.max;var ri=qo((function(e,n,t){var r=null==e?0:e.length;if(!r)return-1;var o=null==t?0:ni(t);return o<0&&(o=ti(r+o,0)),Kr(e,dr(n),o)}));var oi=function(e){return(null==e?0:e.length)?Vr(e,1):[]};var ii=function(e,n){return null==e?e:st(e,lt(n),dn)};var ai=function(e){var n=null==e?0:e.length;return n?e[n-1]:void 0};var ui=function(e,n){var t={};return n=dr(n),dt(e,(function(e,r,o){Oe(t,r,n(e,r,o))})),t};var ci=function(e,n,t){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=n(i);if(null!=a&&(void 0===u?a==a&&!Pt(a):t(a,u)))var u=a,c=i}return c};var si=function(e,n){return e>n};var di=function(e){return e&&e.length?ci(e,ht,si):void 0};var fi=function(e,n,t){(void 0!==t&&!h(e[n],t)||void 0===t&&!(n in e))&&Oe(e,n,t)},hi=Function.prototype,li=Object.prototype,vi=hi.toString,pi=li.hasOwnProperty,gi=vi.call(Object);var yi=function(e){if(!Ce(e)||\"[object Object]\"!=T(e))return!1;var n=En(e);if(null===n)return!0;var t=pi.call(n,\"constructor\")&&n.constructor;return\"function\"==typeof t&&t instanceof t&&vi.call(t)==gi};var bi=function(e,n){if((\"constructor\"!==n||\"function\"!=typeof e[n])&&\"__proto__\"!=n)return e[n]};var mi=function(e){return Se(e,dn(e))};var wi=function(e,n,t,r,o,i,a){var u=bi(e,t),c=bi(n,t),s=a.get(c);if(s)fi(e,t,s);else{var d=i?i(u,c,t+\"\",e,n,a):void 0,f=void 0===d;if(f){var h=Te(c),l=!h&&Pe(c),v=!h&&!l&&Ye(c);d=c,h||l||v?Te(u)?d=u:ao(u)?d=ln(u):l?(f=!1,d=hn(c,!0)):v?(f=!1,d=Yn(c,!0)):d=[]:yi(c)||Re(c)?(d=u,Re(u)?d=mi(u):D(u)&&!z(u)||(d=Qn(c))):f=!1}f&&(a.set(c,d),o(d,c,r,i,a),a.delete(c)),fi(e,t,d)}};var Ei=function e(n,t,r,o,i){n!==t&&st(t,(function(a,u){if(i||(i=new je),D(a))wi(n,t,u,r,e,o,i);else{var c=o?o(bi(n,u),a,u+\"\",n,t,i):void 0;void 0===c&&(c=a),fi(n,u,c)}}),dn)};var _i=function(e){return Xr((function(n,t){var r=-1,o=t.length,i=o>1?t[o-1]:void 0,a=o>2?t[2]:void 0;for(i=e.length>3&&\"function\"==typeof i?(o--,i):void 0,a&&Vo(t[0],t[1],a)&&(i=o<3?void 0:i,o=1),n=Object(n);++r<o;){var u=t[r];u&&e(n,u,r,i)}return n}))}((function(e,n,t){Ei(e,n,t)}));var ji=function(e,n){return e<n};var xi=function(e){return e&&e.length?ci(e,ht,ji):void 0};var Ni=function(e,n){return e&&e.length?ci(e,dr(n),ji):void 0},Oi=function(){return k.Date.now()};var ki=function(e,n,t,r){if(!D(e))return e;for(var o=-1,i=(n=Zt(n,e)).length,a=i-1,u=e;null!=u&&++o<i;){var c=er(n[o]),s=t;if(\"__proto__\"===c||\"constructor\"===c||\"prototype\"===c)return e;if(o!=a){var d=u[c];void 0===(s=r?r(d,c,u):void 0)&&(s=D(d)?d:Fe(n[o+1])?[]:{})}Ie(u,c,s),u=u[c]}return e};var Ii=function(e,n,t){for(var r=-1,o=n.length,i={};++r<o;){var a=n[r],u=nr(e,a);t(u,a)&&ki(i,Zt(a,e),u)}return i};var Si=function(e,n){return Ii(e,n,(function(n,t){return ir(e,t)}))};var Mi=function(e){return Jr(Wr(e,void 0,oi),e+\"\")}((function(e,n){return null==e?{}:Si(e,n)})),Ci=Math.ceil,Gi=Math.max;var Bi=function(e,n,t,r){for(var o=-1,i=Gi(Ci((n-e)/(t||1)),0),a=Array(i);i--;)a[r?i:++o]=e,e+=t;return a};var Ai=function(e){return function(n,t,r){return r&&\"number\"!=typeof r&&Vo(n,t,r)&&(t=r=void 0),n=ei(n),void 0===t?(t=n,n=0):t=ei(t),r=void 0===r?n<t?1:-1:ei(r),Bi(n,t,r,e)}}();var Li=function(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].value;return e};var Ri=function(e,n){if(e!==n){var t=void 0!==e,r=null===e,o=e==e,i=Pt(e),a=void 0!==n,u=null===n,c=n==n,s=Pt(n);if(!u&&!s&&!i&&e>n||i&&a&&c&&!u&&!s||r&&a&&c||!t&&c||!o)return 1;if(!r&&!i&&!s&&e<n||s&&t&&o&&!r&&!i||u&&t&&o||!a&&o||!c)return-1}return 0};var Ti=function(e,n,t){for(var r=-1,o=e.criteria,i=n.criteria,a=o.length,u=t.length;++r<a;){var c=Ri(o[r],i[r]);if(c)return r>=u?c:c*(\"desc\"==t[r]?-1:1)}return e.index-n.index};var Di=function(e,n,t){n=n.length?Yt(n,(function(e){return Te(e)?function(n){return nr(n,1===e.length?e[0]:e)}:e})):[ht];var r=-1;n=Yt(n,He(dr));var o=br(e,(function(e,t,o){return{criteria:Yt(n,(function(n){return n(e)})),index:++r,value:e}}));return Li(o,(function(e,n){return Ti(e,n,t)}))},Pi=Xr((function(e,n){if(null==e)return[];var t=n.length;return t>1&&Vo(e,n[0],n[1])?n=[]:t>2&&Vo(n[0],n[1],n[2])&&(n=[n[0]]),Di(e,Vr(n,1),[])})),zi=0;var Fi=function(e){var n=++zi;return Qt(e)+n};var Ui=function(e,n,t){for(var r=-1,o=e.length,i=n.length,a={};++r<o;){var u=r<i?n[r]:void 0;t(a,e[r],u)}return a};var Vi,$i=function(e,n){return Ui(e||[],n||[],Ie)};try{Vi={cloneDeep:Uo,constant:ct,defaults:Wo,each:pt,filter:fr,find:ri,flatten:oi,forEach:vt,forIn:ii,has:vr,isUndefined:yr,last:ai,map:mr,mapValues:ui,max:di,merge:_i,min:xi,minBy:Ni,now:Oi,pick:Mi,range:Ai,reduce:_r,sortBy:Pi,uniqueId:Fi,values:fo,zipObject:$i}}catch(e){}Vi||(Vi=window._);var Hi=Vi,Wi=qi;function qi(){var e={};e._next=e._prev=e,this._sentinel=e}function Yi(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Ji(e,n){if(\"_next\"!==e&&\"_prev\"!==e)return n}qi.prototype.dequeue=function(){var e=this._sentinel,n=e._prev;if(n!==e)return Yi(n),n},qi.prototype.enqueue=function(e){var n=this._sentinel;e._prev&&e._next&&Yi(e),e._next=n._next,n._next._prev=e,n._next=e,e._prev=n},qi.prototype.toString=function(){for(var e=[],n=this._sentinel,t=n._prev;t!==n;)e.push(JSON.stringify(t,Ji)),t=t._prev;return\"[\"+e.join(\", \")+\"]\"};var Xi=Fo.Graph,Ki=function(e,n){if(e.nodeCount()<=1)return[];var t=function(e,n){var t=new Xi,r=0,o=0;Hi.forEach(e.nodes(),(function(e){t.setNode(e,{v:e,in:0,out:0})})),Hi.forEach(e.edges(),(function(e){var i=t.edge(e.v,e.w)||0,a=n(e),u=i+a;t.setEdge(e.v,e.w,u),o=Math.max(o,t.node(e.v).out+=a),r=Math.max(r,t.node(e.w).in+=a)}));var i=Hi.range(o+r+3).map((function(){return new Wi})),a=r+1;return Hi.forEach(t.nodes(),(function(e){ea(i,a,t.node(e))})),{graph:t,buckets:i,zeroIdx:a}}(e,n||Qi),r=function(e,n,t){var r,o=[],i=n[n.length-1],a=n[0];for(;e.nodeCount();){for(;r=a.dequeue();)Zi(e,n,t,r);for(;r=i.dequeue();)Zi(e,n,t,r);if(e.nodeCount())for(var u=n.length-2;u>0;--u)if(r=n[u].dequeue()){o=o.concat(Zi(e,n,t,r,!0));break}}return o}(t.graph,t.buckets,t.zeroIdx);return Hi.flatten(Hi.map(r,(function(n){return e.outEdges(n.v,n.w)})),!0)},Qi=Hi.constant(1);function Zi(e,n,t,r,o){var i=o?[]:void 0;return Hi.forEach(e.inEdges(r.v),(function(r){var a=e.edge(r),u=e.node(r.v);o&&i.push({v:r.v,w:r.w}),u.out-=a,ea(n,t,u)})),Hi.forEach(e.outEdges(r.v),(function(r){var o=e.edge(r),i=r.w,a=e.node(i);a.in-=o,ea(n,t,a)})),e.removeNode(r.v),i}function ea(e,n,t){t.out?t.in?e[t.out-t.in+n].enqueue(t):e[e.length-1].enqueue(t):e[0].enqueue(t)}var na={run:function(e){var n=\"greedy\"===e.graph().acyclicer?Ki(e,function(e){return function(n){return e.edge(n).weight}}(e)):function(e){var n=[],t={},r={};function o(i){Hi.has(r,i)||(r[i]=!0,t[i]=!0,Hi.forEach(e.outEdges(i),(function(e){Hi.has(t,e.w)?n.push(e):o(e.w)})),delete t[i])}return Hi.forEach(e.nodes(),o),n}(e);Hi.forEach(n,(function(n){var t=e.edge(n);e.removeEdge(n),t.forwardName=n.name,t.reversed=!0,e.setEdge(n.w,n.v,t,Hi.uniqueId(\"rev\"))}))},undo:function(e){Hi.forEach(e.edges(),(function(n){var t=e.edge(n);if(t.reversed){e.removeEdge(n);var r=t.forwardName;delete t.reversed,delete t.forwardName,e.setEdge(n.w,n.v,t,r)}}))}};var ta=Fo.Graph,ra={addDummyNode:oa,simplify:function(e){var n=(new ta).setGraph(e.graph());return Hi.forEach(e.nodes(),(function(t){n.setNode(t,e.node(t))})),Hi.forEach(e.edges(),(function(t){var r=n.edge(t.v,t.w)||{weight:0,minlen:1},o=e.edge(t);n.setEdge(t.v,t.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),n},asNonCompoundGraph:function(e){var n=new ta({multigraph:e.isMultigraph()}).setGraph(e.graph());return Hi.forEach(e.nodes(),(function(t){e.children(t).length||n.setNode(t,e.node(t))})),Hi.forEach(e.edges(),(function(t){n.setEdge(t,e.edge(t))})),n},successorWeights:function(e){var n=Hi.map(e.nodes(),(function(n){var t={};return Hi.forEach(e.outEdges(n),(function(n){t[n.w]=(t[n.w]||0)+e.edge(n).weight})),t}));return Hi.zipObject(e.nodes(),n)},predecessorWeights:function(e){var n=Hi.map(e.nodes(),(function(n){var t={};return Hi.forEach(e.inEdges(n),(function(n){t[n.v]=(t[n.v]||0)+e.edge(n).weight})),t}));return Hi.zipObject(e.nodes(),n)},intersectRect:function(e,n){var t,r,o=e.x,i=e.y,a=n.x-o,u=n.y-i,c=e.width/2,s=e.height/2;if(!a&&!u)throw new Error(\"Not possible to find intersection inside of the rectangle\");Math.abs(u)*c>Math.abs(a)*s?(u<0&&(s=-s),t=s*a/u,r=s):(a<0&&(c=-c),t=c,r=c*u/a);return{x:o+t,y:i+r}},buildLayerMatrix:function(e){var n=Hi.map(Hi.range(ia(e)+1),(function(){return[]}));return Hi.forEach(e.nodes(),(function(t){var r=e.node(t),o=r.rank;Hi.isUndefined(o)||(n[o][r.order]=t)})),n},normalizeRanks:function(e){var n=Hi.min(Hi.map(e.nodes(),(function(n){return e.node(n).rank})));Hi.forEach(e.nodes(),(function(t){var r=e.node(t);Hi.has(r,\"rank\")&&(r.rank-=n)}))},removeEmptyRanks:function(e){var n=Hi.min(Hi.map(e.nodes(),(function(n){return e.node(n).rank}))),t=[];Hi.forEach(e.nodes(),(function(r){var o=e.node(r).rank-n;t[o]||(t[o]=[]),t[o].push(r)}));var r=0,o=e.graph().nodeRankFactor;Hi.forEach(t,(function(n,t){Hi.isUndefined(n)&&t%o!=0?--r:r&&Hi.forEach(n,(function(n){e.node(n).rank+=r}))}))},addBorderNode:function(e,n,t,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=t,o.order=r);return oa(e,\"border\",o,n)},maxRank:ia,partition:function(e,n){var t={lhs:[],rhs:[]};return Hi.forEach(e,(function(e){n(e)?t.lhs.push(e):t.rhs.push(e)})),t},time:function(e,n){var t=Hi.now();try{return n()}finally{console.log(e+\" time: \"+(Hi.now()-t)+\"ms\")}},notime:function(e,n){return n()}};function oa(e,n,t,r){var o;do{o=Hi.uniqueId(r)}while(e.hasNode(o));return t.dummy=n,e.setNode(o,t),o}function ia(e){return Hi.max(Hi.map(e.nodes(),(function(n){var t=e.node(n).rank;if(!Hi.isUndefined(t))return t})))}var aa={run:function(e){e.graph().dummyChains=[],Hi.forEach(e.edges(),(function(n){!function(e,n){var t,r,o,i=n.v,a=e.node(i).rank,u=n.w,c=e.node(u).rank,s=n.name,d=e.edge(n),f=d.labelRank;if(c===a+1)return;for(e.removeEdge(n),o=0,++a;a<c;++o,++a)d.points=[],r={width:0,height:0,edgeLabel:d,edgeObj:n,rank:a},t=ra.addDummyNode(e,\"edge\",r,\"_d\"),a===f&&(r.width=d.width,r.height=d.height,r.dummy=\"edge-label\",r.labelpos=d.labelpos),e.setEdge(i,t,{weight:d.weight},s),0===o&&e.graph().dummyChains.push(t),i=t;e.setEdge(i,u,{weight:d.weight},s)}(e,n)}))},undo:function(e){Hi.forEach(e.graph().dummyChains,(function(n){var t,r=e.node(n),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)t=e.successors(n)[0],e.removeNode(n),o.points.push({x:r.x,y:r.y}),\"edge-label\"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),n=t,r=e.node(n)}))}};var ua=function(e){var n={};Hi.forEach(e.sources(),(function t(r){var o=e.node(r);if(Hi.has(n,r))return o.rank;n[r]=!0;var i=Hi.min(Hi.map(e.outEdges(r),(function(n){return t(n.w)-e.edge(n).minlen})));return i!==Number.POSITIVE_INFINITY&&null!=i||(i=0),o.rank=i}))},ca=function(e,n){return e.node(n.w).rank-e.node(n.v).rank-e.edge(n).minlen};var sa=Fo.Graph,da=ca,fa=function(e){var n,t,r=new sa({directed:!1}),o=e.nodes()[0],i=e.nodeCount();r.setNode(o,{});for(;ha(r,e)<i;)n=la(r,e),t=r.hasNode(n.v)?da(e,n):-da(e,n),va(r,e,t);return r};function ha(e,n){return Hi.forEach(e.nodes(),(function t(r){Hi.forEach(n.nodeEdges(r),(function(o){var i=o.v,a=r===i?o.w:i;e.hasNode(a)||da(n,o)||(e.setNode(a,{}),e.setEdge(r,a,{}),t(a))}))})),e.nodeCount()}function la(e,n){return Hi.minBy(n.edges(),(function(t){if(e.hasNode(t.v)!==e.hasNode(t.w))return da(n,t)}))}function va(e,n,t){Hi.forEach(e.nodes(),(function(e){n.node(e).rank+=t}))}var pa=ca,ga=ua,ya=Fo.alg.preorder,ba=Fo.alg.postorder,ma=ra.simplify,wa=Ea;function Ea(e){e=ma(e),ga(e);var n,t=fa(e);for(xa(t),_a(t,e);n=Oa(t);)Ia(t,e,n,ka(t,e,n))}function _a(e,n){var t=ba(e,e.nodes());t=t.slice(0,t.length-1),Hi.forEach(t,(function(t){!function(e,n,t){var r=e.node(t).parent;e.edge(t,r).cutvalue=ja(e,n,t)}(e,n,t)}))}function ja(e,n,t){var r=e.node(t).parent,o=!0,i=n.edge(t,r),a=0;return i||(o=!1,i=n.edge(r,t)),a=i.weight,Hi.forEach(n.nodeEdges(t),(function(i){var u,c,s=i.v===t,d=s?i.w:i.v;if(d!==r){var f=s===o,h=n.edge(i).weight;if(a+=f?h:-h,u=t,c=d,e.hasEdge(u,c)){var l=e.edge(t,d).cutvalue;a+=f?-l:l}}})),a}function xa(e,n){arguments.length<2&&(n=e.nodes()[0]),Na(e,{},1,n)}function Na(e,n,t,r,o){var i=t,a=e.node(r);return n[r]=!0,Hi.forEach(e.neighbors(r),(function(o){Hi.has(n,o)||(t=Na(e,n,t,o,r))})),a.low=i,a.lim=t++,o?a.parent=o:delete a.parent,t}function Oa(e){return Hi.find(e.edges(),(function(n){return e.edge(n).cutvalue<0}))}function ka(e,n,t){var r=t.v,o=t.w;n.hasEdge(r,o)||(r=t.w,o=t.v);var i=e.node(r),a=e.node(o),u=i,c=!1;i.lim>a.lim&&(u=a,c=!0);var s=Hi.filter(n.edges(),(function(n){return c===Sa(e,e.node(n.v),u)&&c!==Sa(e,e.node(n.w),u)}));return Hi.minBy(s,(function(e){return pa(n,e)}))}function Ia(e,n,t,r){var o=t.v,i=t.w;e.removeEdge(o,i),e.setEdge(r.v,r.w,{}),xa(e),_a(e,n),function(e,n){var t=Hi.find(e.nodes(),(function(e){return!n.node(e).parent})),r=ya(e,t);r=r.slice(1),Hi.forEach(r,(function(t){var r=e.node(t).parent,o=n.edge(t,r),i=!1;o||(o=n.edge(r,t),i=!0),n.node(t).rank=n.node(r).rank+(i?o.minlen:-o.minlen)}))}(e,n)}function Sa(e,n,t){return t.low<=n.lim&&n.lim<=t.lim}Ea.initLowLimValues=xa,Ea.initCutValues=_a,Ea.calcCutValue=ja,Ea.leaveEdge=Oa,Ea.enterEdge=ka,Ea.exchangeEdges=Ia;var Ma=ua,Ca=function(e){switch(e.graph().ranker){case\"network-simplex\":Ba(e);break;case\"tight-tree\":!function(e){Ma(e),fa(e)}(e);break;case\"longest-path\":Ga(e);break;default:Ba(e)}};var Ga=Ma;function Ba(e){wa(e)}var Aa=function(e){var n=function(e){var n={},t=0;function r(o){var i=t;Hi.forEach(e.children(o),r),n[o]={low:i,lim:t++}}return Hi.forEach(e.children(),r),n}(e);Hi.forEach(e.graph().dummyChains,(function(t){for(var r=e.node(t),o=r.edgeObj,i=function(e,n,t,r){var o,i,a=[],u=[],c=Math.min(n[t].low,n[r].low),s=Math.max(n[t].lim,n[r].lim);o=t;do{o=e.parent(o),a.push(o)}while(o&&(n[o].low>c||s>n[o].lim));i=o,o=r;for(;(o=e.parent(o))!==i;)u.push(o);return{path:a.concat(u.reverse()),lca:i}}(e,n,o.v,o.w),a=i.path,u=i.lca,c=0,s=a[c],d=!0;t!==o.w;){if(r=e.node(t),d){for(;(s=a[c])!==u&&e.node(s).maxRank<r.rank;)c++;s===u&&(d=!1)}if(!d){for(;c<a.length-1&&e.node(s=a[c+1]).minRank<=r.rank;)c++;s=a[c]}e.setParent(t,s),t=e.successors(t)[0]}}))};var La={run:function(e){var n=ra.addDummyNode(e,\"root\",{},\"_root\"),t=function(e){var n={};function t(r,o){var i=e.children(r);i&&i.length&&Hi.forEach(i,(function(e){t(e,o+1)})),n[r]=o}return Hi.forEach(e.children(),(function(e){t(e,1)})),n}(e),r=Hi.max(Hi.values(t))-1,o=2*r+1;e.graph().nestingRoot=n,Hi.forEach(e.edges(),(function(n){e.edge(n).minlen*=o}));var i=function(e){return Hi.reduce(e.edges(),(function(n,t){return n+e.edge(t).weight}),0)}(e)+1;Hi.forEach(e.children(),(function(a){Ra(e,n,o,i,r,t,a)})),e.graph().nodeRankFactor=o},cleanup:function(e){var n=e.graph();e.removeNode(n.nestingRoot),delete n.nestingRoot,Hi.forEach(e.edges(),(function(n){e.edge(n).nestingEdge&&e.removeEdge(n)}))}};function Ra(e,n,t,r,o,i,a){var u=e.children(a);if(u.length){var c=ra.addBorderNode(e,\"_bt\"),s=ra.addBorderNode(e,\"_bb\"),d=e.node(a);e.setParent(c,a),d.borderTop=c,e.setParent(s,a),d.borderBottom=s,Hi.forEach(u,(function(u){Ra(e,n,t,r,o,i,u);var d=e.node(u),f=d.borderTop?d.borderTop:u,h=d.borderBottom?d.borderBottom:u,l=d.borderTop?r:2*r,v=f!==h?1:o-i[a]+1;e.setEdge(c,f,{weight:l,minlen:v,nestingEdge:!0}),e.setEdge(h,s,{weight:l,minlen:v,nestingEdge:!0})})),e.parent(a)||e.setEdge(n,c,{weight:0,minlen:o+i[a]})}else a!==n&&e.setEdge(n,a,{weight:0,minlen:t})}var Ta=function(e){Hi.forEach(e.children(),(function n(t){var r=e.children(t),o=e.node(t);if(r.length&&Hi.forEach(r,n),Hi.has(o,\"minRank\")){o.borderLeft=[],o.borderRight=[];for(var i=o.minRank,a=o.maxRank+1;i<a;++i)Da(e,\"borderLeft\",\"_bl\",t,o,i),Da(e,\"borderRight\",\"_br\",t,o,i)}}))};function Da(e,n,t,r,o,i){var a={width:0,height:0,rank:i,borderType:n},u=o[n][i-1],c=ra.addDummyNode(e,\"border\",a,t);o[n][i]=c,e.setParent(c,r),u&&e.setEdge(u,c,{weight:1})}var Pa={adjust:function(e){var n=e.graph().rankdir.toLowerCase();\"lr\"!==n&&\"rl\"!==n||za(e)},undo:function(e){var n=e.graph().rankdir.toLowerCase();\"bt\"!==n&&\"rl\"!==n||function(e){Hi.forEach(e.nodes(),(function(n){Ua(e.node(n))})),Hi.forEach(e.edges(),(function(n){var t=e.edge(n);Hi.forEach(t.points,Ua),Hi.has(t,\"y\")&&Ua(t)}))}(e);\"lr\"!==n&&\"rl\"!==n||(!function(e){Hi.forEach(e.nodes(),(function(n){Va(e.node(n))})),Hi.forEach(e.edges(),(function(n){var t=e.edge(n);Hi.forEach(t.points,Va),Hi.has(t,\"x\")&&Va(t)}))}(e),za(e))}};function za(e){Hi.forEach(e.nodes(),(function(n){Fa(e.node(n))})),Hi.forEach(e.edges(),(function(n){Fa(e.edge(n))}))}function Fa(e){var n=e.width;e.width=e.height,e.height=n}function Ua(e){e.y=-e.y}function Va(e){var n=e.x;e.x=e.y,e.y=n}var $a=function(e){var n={},t=Hi.filter(e.nodes(),(function(n){return!e.children(n).length})),r=Hi.max(Hi.map(t,(function(n){return e.node(n).rank}))),o=Hi.map(Hi.range(r+1),(function(){return[]}));function i(t){if(!Hi.has(n,t)){n[t]=!0;var r=e.node(t);o[r.rank].push(t),Hi.forEach(e.successors(t),i)}}var a=Hi.sortBy(t,(function(n){return e.node(n).rank}));return Hi.forEach(a,i),o};var Ha=function(e,n){for(var t=0,r=1;r<n.length;++r)t+=Wa(e,n[r-1],n[r]);return t};function Wa(e,n,t){for(var r=Hi.zipObject(t,Hi.map(t,(function(e,n){return n}))),o=Hi.flatten(Hi.map(n,(function(n){return Hi.sortBy(Hi.map(e.outEdges(n),(function(n){return{pos:r[n.w],weight:e.edge(n).weight}})),\"pos\")})),!0),i=1;i<t.length;)i<<=1;var a=2*i-1;i-=1;var u=Hi.map(new Array(a),(function(){return 0})),c=0;return Hi.forEach(o.forEach((function(e){var n=e.pos+i;u[n]+=e.weight;for(var t=0;n>0;)n%2&&(t+=u[n+1]),u[n=n-1>>1]+=e.weight;c+=e.weight*t}))),c}var qa=function(e,n){return Hi.map(n,(function(n){var t=e.inEdges(n);if(t.length){var r=Hi.reduce(t,(function(n,t){var r=e.edge(t),o=e.node(t.v);return{sum:n.sum+r.weight*o.order,weight:n.weight+r.weight}}),{sum:0,weight:0});return{v:n,barycenter:r.sum/r.weight,weight:r.weight}}return{v:n}}))};var Ya=function(e,n){var t={};return Hi.forEach(e,(function(e,n){var r=t[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:n};Hi.isUndefined(e.barycenter)||(r.barycenter=e.barycenter,r.weight=e.weight)})),Hi.forEach(n.edges(),(function(e){var n=t[e.v],r=t[e.w];Hi.isUndefined(n)||Hi.isUndefined(r)||(r.indegree++,n.out.push(t[e.w]))})),function(e){var n=[];function t(e){return function(n){n.merged||(Hi.isUndefined(n.barycenter)||Hi.isUndefined(e.barycenter)||n.barycenter>=e.barycenter)&&function(e,n){var t=0,r=0;e.weight&&(t+=e.barycenter*e.weight,r+=e.weight);n.weight&&(t+=n.barycenter*n.weight,r+=n.weight);e.vs=n.vs.concat(e.vs),e.barycenter=t/r,e.weight=r,e.i=Math.min(n.i,e.i),n.merged=!0}(e,n)}}function r(n){return function(t){t.in.push(n),0==--t.indegree&&e.push(t)}}for(;e.length;){var o=e.pop();n.push(o),Hi.forEach(o.in.reverse(),t(o)),Hi.forEach(o.out,r(o))}return Hi.map(Hi.filter(n,(function(e){return!e.merged})),(function(e){return Hi.pick(e,[\"vs\",\"i\",\"barycenter\",\"weight\"])}))}(Hi.filter(t,(function(e){return!e.indegree})))};var Ja=function(e,n){var t=ra.partition(e,(function(e){return Hi.has(e,\"barycenter\")})),r=t.lhs,o=Hi.sortBy(t.rhs,(function(e){return-e.i})),i=[],a=0,u=0,c=0;r.sort((s=!!n,function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:s?n.i-e.i:e.i-n.i})),c=Xa(i,o,c),Hi.forEach(r,(function(e){c+=e.vs.length,i.push(e.vs),a+=e.barycenter*e.weight,u+=e.weight,c=Xa(i,o,c)}));var s;var d={vs:Hi.flatten(i,!0)};u&&(d.barycenter=a/u,d.weight=u);return d};function Xa(e,n,t){for(var r;n.length&&(r=Hi.last(n)).i<=t;)n.pop(),e.push(r.vs),t++;return t}var Ka=function e(n,t,r,o){var i=n.children(t),a=n.node(t),u=a?a.borderLeft:void 0,c=a?a.borderRight:void 0,s={};u&&(i=Hi.filter(i,(function(e){return e!==u&&e!==c})));var d=qa(n,i);Hi.forEach(d,(function(t){if(n.children(t.v).length){var i=e(n,t.v,r,o);s[t.v]=i,Hi.has(i,\"barycenter\")&&(a=t,u=i,Hi.isUndefined(a.barycenter)?(a.barycenter=u.barycenter,a.weight=u.weight):(a.barycenter=(a.barycenter*a.weight+u.barycenter*u.weight)/(a.weight+u.weight),a.weight+=u.weight))}var a,u}));var f=Ya(d,r);!function(e,n){Hi.forEach(e,(function(e){e.vs=Hi.flatten(e.vs.map((function(e){return n[e]?n[e].vs:e})),!0)}))}(f,s);var h=Ja(f,o);if(u&&(h.vs=Hi.flatten([u,h.vs,c],!0),n.predecessors(u).length)){var l=n.node(n.predecessors(u)[0]),v=n.node(n.predecessors(c)[0]);Hi.has(h,\"barycenter\")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+l.order+v.order)/(h.weight+2),h.weight+=2}return h};var Qa=Fo.Graph,Za=function(e,n,t){var r=function(e){var n;for(;e.hasNode(n=Hi.uniqueId(\"_root\")););return n}(e),o=new Qa({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(n){return e.node(n)}));return Hi.forEach(e.nodes(),(function(i){var a=e.node(i),u=e.parent(i);(a.rank===n||a.minRank<=n&&n<=a.maxRank)&&(o.setNode(i),o.setParent(i,u||r),Hi.forEach(e[t](i),(function(n){var t=n.v===i?n.w:n.v,r=o.edge(t,i),a=Hi.isUndefined(r)?0:r.weight;o.setEdge(t,i,{weight:e.edge(n).weight+a})})),Hi.has(a,\"minRank\")&&o.setNode(i,{borderLeft:a.borderLeft[n],borderRight:a.borderRight[n]}))})),o};var eu=function(e,n,t){var r,o={};Hi.forEach(t,(function(t){for(var i,a,u=e.parent(t);u;){if((i=e.parent(u))?(a=o[i],o[i]=u):(a=r,r=u),a&&a!==u)return void n.setEdge(a,u);u=i}}))};var nu=Fo.Graph,tu=function(e){var n=ra.maxRank(e),t=ru(e,Hi.range(1,n+1),\"inEdges\"),r=ru(e,Hi.range(n-1,-1,-1),\"outEdges\"),o=$a(e);iu(e,o);for(var i,a=Number.POSITIVE_INFINITY,u=0,c=0;c<4;++u,++c){ou(u%2?t:r,u%4>=2),o=ra.buildLayerMatrix(e);var s=Ha(e,o);s<a&&(c=0,i=Hi.cloneDeep(o),a=s)}iu(e,i)};function ru(e,n,t){return Hi.map(n,(function(n){return Za(e,n,t)}))}function ou(e,n){var t=new nu;Hi.forEach(e,(function(e){var r=e.graph().root,o=Ka(e,r,t,n);Hi.forEach(o.vs,(function(n,t){e.node(n).order=t})),eu(e,t,o.vs)}))}function iu(e,n){Hi.forEach(n,(function(n){Hi.forEach(n,(function(n,t){e.node(n).order=t}))}))}var au=Fo.Graph,uu=function(e){var n,t=ra.buildLayerMatrix(e),r=Hi.merge(cu(e,t),su(e,t)),o={};Hi.forEach([\"u\",\"d\"],(function(i){n=\"u\"===i?t:Hi.values(t).reverse(),Hi.forEach([\"l\",\"r\"],(function(t){\"r\"===t&&(n=Hi.map(n,(function(e){return Hi.values(e).reverse()})));var a=(\"u\"===i?e.predecessors:e.successors).bind(e),u=hu(e,n,r,a),c=lu(e,n,u.root,u.align,\"r\"===t);\"r\"===t&&(c=Hi.mapValues(c,(function(e){return-e}))),o[i+t]=c}))}));var i=vu(e,o);return pu(o,i),gu(o,e.graph().align)};function cu(e,n){var t={};return Hi.reduce(n,(function(n,r){var o=0,i=0,a=n.length,u=Hi.last(r);return Hi.forEach(r,(function(n,c){var s=function(e,n){if(e.node(n).dummy)return Hi.find(e.predecessors(n),(function(n){return e.node(n).dummy}))}(e,n),d=s?e.node(s).order:a;(s||n===u)&&(Hi.forEach(r.slice(i,c+1),(function(n){Hi.forEach(e.predecessors(n),(function(r){var i=e.node(r),a=i.order;!(a<o||d<a)||i.dummy&&e.node(n).dummy||du(t,r,n)}))})),i=c+1,o=d)})),r})),t}function su(e,n){var t={};function r(n,r,o,i,a){var u;Hi.forEach(Hi.range(r,o),(function(r){u=n[r],e.node(u).dummy&&Hi.forEach(e.predecessors(u),(function(n){var r=e.node(n);r.dummy&&(r.order<i||r.order>a)&&du(t,n,u)}))}))}return Hi.reduce(n,(function(n,t){var o,i=-1,a=0;return Hi.forEach(t,(function(u,c){if(\"border\"===e.node(u).dummy){var s=e.predecessors(u);s.length&&(o=e.node(s[0]).order,r(t,a,c,i,o),a=c,i=o)}r(t,a,t.length,o,n.length)})),t})),t}function du(e,n,t){if(n>t){var r=n;n=t,t=r}var o=e[n];o||(e[n]=o={}),o[t]=!0}function fu(e,n,t){if(n>t){var r=n;n=t,t=r}return Hi.has(e[n],t)}function hu(e,n,t,r){var o={},i={},a={};return Hi.forEach(n,(function(e){Hi.forEach(e,(function(e,n){o[e]=e,i[e]=e,a[e]=n}))})),Hi.forEach(n,(function(e){var n=-1;Hi.forEach(e,(function(e){var u=r(e);if(u.length)for(var c=((u=Hi.sortBy(u,(function(e){return a[e]}))).length-1)/2,s=Math.floor(c),d=Math.ceil(c);s<=d;++s){var f=u[s];i[e]===e&&n<a[f]&&!fu(t,e,f)&&(i[f]=e,i[e]=o[e]=o[f],n=a[f])}}))})),{root:o,align:i}}function lu(e,n,t,r,o){var i={},a=function(e,n,t,r){var o=new au,i=e.graph(),a=function(e,n,t){return function(r,o,i){var a,u=r.node(o),c=r.node(i),s=0;if(s+=u.width/2,Hi.has(u,\"labelpos\"))switch(u.labelpos.toLowerCase()){case\"l\":a=-u.width/2;break;case\"r\":a=u.width/2}if(a&&(s+=t?a:-a),a=0,s+=(u.dummy?n:e)/2,s+=(c.dummy?n:e)/2,s+=c.width/2,Hi.has(c,\"labelpos\"))switch(c.labelpos.toLowerCase()){case\"l\":a=c.width/2;break;case\"r\":a=-c.width/2}return a&&(s+=t?a:-a),a=0,s}}(i.nodesep,i.edgesep,r);return Hi.forEach(n,(function(n){var r;Hi.forEach(n,(function(n){var i=t[n];if(o.setNode(i),r){var u=t[r],c=o.edge(u,i);o.setEdge(u,i,Math.max(a(e,n,r),c||0))}r=n}))})),o}(e,n,t,o),u=o?\"borderLeft\":\"borderRight\";function c(e,n){for(var t=a.nodes(),r=t.pop(),o={};r;)o[r]?e(r):(o[r]=!0,t.push(r),t=t.concat(n(r))),r=t.pop()}return c((function(e){i[e]=a.inEdges(e).reduce((function(e,n){return Math.max(e,i[n.v]+a.edge(n))}),0)}),a.predecessors.bind(a)),c((function(n){var t=a.outEdges(n).reduce((function(e,n){return Math.min(e,i[n.w]-a.edge(n))}),Number.POSITIVE_INFINITY),r=e.node(n);t!==Number.POSITIVE_INFINITY&&r.borderType!==u&&(i[n]=Math.max(i[n],t))}),a.successors.bind(a)),Hi.forEach(r,(function(e){i[e]=i[t[e]]})),i}function vu(e,n){return Hi.minBy(Hi.values(n),(function(n){var t=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return Hi.forIn(n,(function(n,o){var i=function(e,n){return e.node(n).width}(e,o)/2;t=Math.max(n+i,t),r=Math.min(n-i,r)})),t-r}))}function pu(e,n){var t=Hi.values(n),r=Hi.min(t),o=Hi.max(t);Hi.forEach([\"u\",\"d\"],(function(t){Hi.forEach([\"l\",\"r\"],(function(i){var a,u=t+i,c=e[u];if(c!==n){var s=Hi.values(c);(a=\"l\"===i?r-Hi.min(s):o-Hi.max(s))&&(e[u]=Hi.mapValues(c,(function(e){return e+a})))}}))}))}function gu(e,n){return Hi.mapValues(e.ul,(function(t,r){if(n)return e[n.toLowerCase()][r];var o=Hi.sortBy(Hi.map(e,r));return(o[1]+o[2])/2}))}var yu=uu,bu=function(e){(function(e){var n=ra.buildLayerMatrix(e),t=e.graph().ranksep,r=0;Hi.forEach(n,(function(n){var o=Hi.max(Hi.map(n,(function(n){return e.node(n).height})));Hi.forEach(n,(function(n){e.node(n).y=r+o/2})),r+=o+t}))})(e=ra.asNonCompoundGraph(e)),Hi.forEach(yu(e),(function(n,t){e.node(t).x=n}))};var mu=ra.normalizeRanks,wu=ra.removeEmptyRanks,Eu=ra,_u=Fo.Graph,ju=function(e,n){var t=n&&n.debugTiming?Eu.time:Eu.notime;t(\"layout\",(function(){var n=t(\"  buildLayoutGraph\",(function(){return function(e){var n=new _u({multigraph:!0,compound:!0}),t=Bu(e.graph());return n.setGraph(Hi.merge({},Nu,Gu(t,xu),Hi.pick(t,Ou))),Hi.forEach(e.nodes(),(function(t){var r=Bu(e.node(t));n.setNode(t,Hi.defaults(Gu(r,ku),Iu)),n.setParent(t,e.parent(t))})),Hi.forEach(e.edges(),(function(t){var r=Bu(e.edge(t));n.setEdge(t,Hi.merge({},Mu,Gu(r,Su),Hi.pick(r,Cu)))})),n}(e)}));t(\"  runLayout\",(function(){!function(e,n){n(\"    makeSpaceForEdgeLabels\",(function(){!function(e){var n=e.graph();n.ranksep/=2,Hi.forEach(e.edges(),(function(t){var r=e.edge(t);r.minlen*=2,\"c\"!==r.labelpos.toLowerCase()&&(\"TB\"===n.rankdir||\"BT\"===n.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(e)})),n(\"    removeSelfEdges\",(function(){!function(e){Hi.forEach(e.edges(),(function(n){if(n.v===n.w){var t=e.node(n.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e:n,label:e.edge(n)}),e.removeEdge(n)}}))}(e)})),n(\"    acyclic\",(function(){na.run(e)})),n(\"    nestingGraph.run\",(function(){La.run(e)})),n(\"    rank\",(function(){Ca(Eu.asNonCompoundGraph(e))})),n(\"    injectEdgeLabelProxies\",(function(){!function(e){Hi.forEach(e.edges(),(function(n){var t=e.edge(n);if(t.width&&t.height){var r=e.node(n.v),o={rank:(e.node(n.w).rank-r.rank)/2+r.rank,e:n};Eu.addDummyNode(e,\"edge-proxy\",o,\"_ep\")}}))}(e)})),n(\"    removeEmptyRanks\",(function(){wu(e)})),n(\"    nestingGraph.cleanup\",(function(){La.cleanup(e)})),n(\"    normalizeRanks\",(function(){mu(e)})),n(\"    assignRankMinMax\",(function(){!function(e){var n=0;Hi.forEach(e.nodes(),(function(t){var r=e.node(t);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,n=Hi.max(n,r.maxRank))})),e.graph().maxRank=n}(e)})),n(\"    removeEdgeLabelProxies\",(function(){!function(e){Hi.forEach(e.nodes(),(function(n){var t=e.node(n);\"edge-proxy\"===t.dummy&&(e.edge(t.e).labelRank=t.rank,e.removeNode(n))}))}(e)})),n(\"    normalize.run\",(function(){aa.run(e)})),n(\"    parentDummyChains\",(function(){Aa(e)})),n(\"    addBorderSegments\",(function(){Ta(e)})),n(\"    order\",(function(){tu(e)})),n(\"    insertSelfEdges\",(function(){!function(e){var n=Eu.buildLayerMatrix(e);Hi.forEach(n,(function(n){var t=0;Hi.forEach(n,(function(n,r){var o=e.node(n);o.order=r+t,Hi.forEach(o.selfEdges,(function(n){Eu.addDummyNode(e,\"selfedge\",{width:n.label.width,height:n.label.height,rank:o.rank,order:r+ ++t,e:n.e,label:n.label},\"_se\")})),delete o.selfEdges}))}))}(e)})),n(\"    adjustCoordinateSystem\",(function(){Pa.adjust(e)})),n(\"    position\",(function(){bu(e)})),n(\"    positionSelfEdges\",(function(){!function(e){Hi.forEach(e.nodes(),(function(n){var t=e.node(n);if(\"selfedge\"===t.dummy){var r=e.node(t.e.v),o=r.x+r.width/2,i=r.y,a=t.x-o,u=r.height/2;e.setEdge(t.e,t.label),e.removeNode(n),t.label.points=[{x:o+2*a/3,y:i-u},{x:o+5*a/6,y:i-u},{x:o+a,y:i},{x:o+5*a/6,y:i+u},{x:o+2*a/3,y:i+u}],t.label.x=t.x,t.label.y=t.y}}))}(e)})),n(\"    removeBorderNodes\",(function(){!function(e){Hi.forEach(e.nodes(),(function(n){if(e.children(n).length){var t=e.node(n),r=e.node(t.borderTop),o=e.node(t.borderBottom),i=e.node(Hi.last(t.borderLeft)),a=e.node(Hi.last(t.borderRight));t.width=Math.abs(a.x-i.x),t.height=Math.abs(o.y-r.y),t.x=i.x+t.width/2,t.y=r.y+t.height/2}})),Hi.forEach(e.nodes(),(function(n){\"border\"===e.node(n).dummy&&e.removeNode(n)}))}(e)})),n(\"    normalize.undo\",(function(){aa.undo(e)})),n(\"    fixupEdgeLabelCoords\",(function(){!function(e){Hi.forEach(e.edges(),(function(n){var t=e.edge(n);if(Hi.has(t,\"x\"))switch(\"l\"!==t.labelpos&&\"r\"!==t.labelpos||(t.width-=t.labeloffset),t.labelpos){case\"l\":t.x-=t.width/2+t.labeloffset;break;case\"r\":t.x+=t.width/2+t.labeloffset}}))}(e)})),n(\"    undoCoordinateSystem\",(function(){Pa.undo(e)})),n(\"    translateGraph\",(function(){!function(e){var n=Number.POSITIVE_INFINITY,t=0,r=Number.POSITIVE_INFINITY,o=0,i=e.graph(),a=i.marginx||0,u=i.marginy||0;function c(e){var i=e.x,a=e.y,u=e.width,c=e.height;n=Math.min(n,i-u/2),t=Math.max(t,i+u/2),r=Math.min(r,a-c/2),o=Math.max(o,a+c/2)}Hi.forEach(e.nodes(),(function(n){c(e.node(n))})),Hi.forEach(e.edges(),(function(n){var t=e.edge(n);Hi.has(t,\"x\")&&c(t)})),n-=a,r-=u,Hi.forEach(e.nodes(),(function(t){var o=e.node(t);o.x-=n,o.y-=r})),Hi.forEach(e.edges(),(function(t){var o=e.edge(t);Hi.forEach(o.points,(function(e){e.x-=n,e.y-=r})),Hi.has(o,\"x\")&&(o.x-=n),Hi.has(o,\"y\")&&(o.y-=r)})),i.width=t-n+a,i.height=o-r+u}(e)})),n(\"    assignNodeIntersects\",(function(){!function(e){Hi.forEach(e.edges(),(function(n){var t,r,o=e.edge(n),i=e.node(n.v),a=e.node(n.w);o.points?(t=o.points[0],r=o.points[o.points.length-1]):(o.points=[],t=a,r=i),o.points.unshift(Eu.intersectRect(i,t)),o.points.push(Eu.intersectRect(a,r))}))}(e)})),n(\"    reversePoints\",(function(){!function(e){Hi.forEach(e.edges(),(function(n){var t=e.edge(n);t.reversed&&t.points.reverse()}))}(e)})),n(\"    acyclic.undo\",(function(){na.undo(e)}))}(n,t)})),t(\"  updateInputGraph\",(function(){!function(e,n){Hi.forEach(e.nodes(),(function(t){var r=e.node(t),o=n.node(t);r&&(r.x=o.x,r.y=o.y,n.children(t).length&&(r.width=o.width,r.height=o.height))})),Hi.forEach(e.edges(),(function(t){var r=e.edge(t),o=n.edge(t);r.points=o.points,Hi.has(o,\"x\")&&(r.x=o.x,r.y=o.y)})),e.graph().width=n.graph().width,e.graph().height=n.graph().height}(e,n)}))}))};var xu=[\"nodesep\",\"edgesep\",\"ranksep\",\"marginx\",\"marginy\"],Nu={ranksep:50,edgesep:20,nodesep:50,rankdir:\"tb\"},Ou=[\"acyclicer\",\"ranker\",\"rankdir\",\"align\"],ku=[\"width\",\"height\"],Iu={width:0,height:0},Su=[\"minlen\",\"weight\",\"width\",\"height\",\"labeloffset\"],Mu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:\"r\"},Cu=[\"labelpos\"];function Gu(e,n){return Hi.mapValues(Hi.pick(e,n),Number)}function Bu(e){var n={};return Hi.forEach(e,(function(e,t){n[t.toLowerCase()]=e})),n}var Au=Fo.Graph;var Lu={graphlib:Fo,layout:ju,debug:{debugOrdering:function(e){var n=ra.buildLayerMatrix(e),t=new Au({compound:!0,multigraph:!0}).setGraph({});return Hi.forEach(e.nodes(),(function(n){t.setNode(n,{label:n}),t.setParent(n,\"layer\"+e.node(n).rank)})),Hi.forEach(e.edges(),(function(e){t.setEdge(e.v,e.w,{},e.name)})),Hi.forEach(n,(function(e,n){var r=\"layer\"+n;t.setNode(r,{rank:\"same\"}),Hi.reduce(e,(function(e,n){return t.setEdge(e,n,{style:\"invis\"}),n}))})),t}},util:{time:ra.time,notime:ra.notime},version:\"0.8.5\"},Ru=Lu.graphlib,Tu=Lu.layout;class Du{constructor(e){this.cardinality=1,this.include=a.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=i.NODE,this.name=e.name,this.attr=e.attr||{},this.inputs=e.inputs,this.path=e.path||[],this.width=e.width,this.height=e.height}}class Pu{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function zu(e){const n=new Pu;return e.nodes.map((e=>new Du(e))).forEach((e=>{n.nodes[e.name]=e,e.inputs.forEach((t=>{!function(e,n,t){t.name!==n.name&&e.edges.push(Object.assign(Object.assign({},t.attr),{v:t.name,w:n.name}))}(n,e,t)}))})),n}class Fu{constructor(e,n={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=a.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=i.META,this.path=[],this.name=e,this.metaGraph=Hu(e,u.META,n)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map((e=>this.metaGraph.node(e)))}leaves(){let e,n=[],t=[this];for(;t.length;){let r=t.shift();r.isGroupNode?(e=r.metaGraph,e.nodes().forEach((n=>t.push(e.node(n))))):n.push(r.name)}return n}}class Uu{constructor(e,n){this.v=e,this.w=n,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(e,n){this.baseEdgeList.push(e)}}function Vu(e,n={}){return new Fu(e,n)}function $u(e,n){return new Uu(e,n)}function Hu(e,n,t){const r=t||{},o=new Ru.Graph(r);return o.setGraph({name:e,rankdir:r.rankdir,type:n,align:r.align}),o}class Wu{constructor(e={}){this.graphOptions=e,this.index={},this.graphOptions.compound=!0,this.root=Vu(r,this.graphOptions),this.index[r]=this.root}getNodeMap(){return this.index}node(e){return this.index[e]}setNode(e,n){this.index[e]=n}getBridgeGraph(e){const n=this.index[e];if(!n)throw Error(\"Could not find node in hierarchy: \"+e);if(!(\"metaGraph\"in n))return null;const t=n;if(t.bridgeGraph)return t.bridgeGraph;const r=Hu(o,u.BRIDGE,this.graphOptions);if(t.bridgeGraph=r,!n.parentNode||!(\"metaGraph\"in n.parentNode))return r;const i=n.parentNode;return[i.metaGraph,this.getBridgeGraph(i.name)].forEach((n=>{n.edges().filter((n=>n.v===e||n.w===e)).forEach((t=>{const o=t.w===e;n.edge(t).baseEdgeList.forEach((n=>{const[i,a]=o?[n.w,t.v]:[n.v,t.w],u=this.getChildName(e,i),c={v:o?a:u,w:o?u:a};let s=r.edge(c);s||(s=$u(c.v,c.w),s.inbound=o,r.setEdge(c.v,c.w,s)),s.addBaseEdge(n,this)}))}))})),r}getChildName(e,n){let t=this.index[n];for(;t;){if(t.parentNode&&t.parentNode.name===e)return t.name;t=t.parentNode}throw Error(\"Could not find immediate child for descendant: \"+n)}getPredecessors(e){const n=this.index[e];if(!n)throw Error(\"Could not find node with name: \"+e);return this.getOneWayEdges(n,!0)}getSuccessors(e){const n=this.index[e];if(!n)throw Error(\"Could not find node with name: \"+e);return this.getOneWayEdges(n,!1)}getOneWayEdges(e,n){const t=[];if(!e.parentNode||!e.parentNode.isGroupNode)return t;const r=e.parentNode,o=r.metaGraph,i=this.getBridgeGraph(r.name);return Yu(o,e,n,t),Yu(i,e,n,t),t}}function qu(e,n){const{rankDirection:t,align:r}=n,o=new Wu({rankdir:t,align:r});return function(e,n){Object.keys(n.nodes).forEach((t=>{const r=n.nodes[t],o=r.path;let i=e.root;i.depth=Math.max(o.length,i.depth);for(let n=0;n<o.length&&(i.depth=Math.max(i.depth,o.length-n),i.cardinality+=r.cardinality,n!==o.length-1);n++){const t=o[n];let a=e.node(t);a||(a=Vu(t,e.graphOptions),a.path=r.path.slice(0,n+1),a.parentNode=i,e.setNode(t,a),i.metaGraph.setNode(t,a)),i=a}e.setNode(r.name,r),r.parentNode=i,i.metaGraph.setNode(r.name,r)}))}(o,e),function(e,n){const t=e.getNodeMap();let r=[],o=[];const i=(e,n)=>{let t=0;for(;e;)n[t++]=e.name,e=e.parentNode;return t-1};n.edges.forEach((a=>{r=[],o=[];let u=i(n.nodes[a.v],r),c=i(n.nodes[a.w],o);for(;r[u]===o[c];)if(u--,c--,u<0||c<0)throw Error(\"No difference found between ancestor paths.\");const s=t[r[u+1]],d=r[u],f=o[c];let h=s.metaGraph.edge(d,f);h||(h=$u(d,f),s.metaGraph.setEdge(d,f,h)),h.addBaseEdge(a,e)}))}(o,e),o}function Yu(e,n,t,r){(t?e.inEdges(n.name):e.outEdges(n.name)).forEach((n=>{const t=e.edge(n);r.push(t)}))}class Ju{constructor(e){this.hierarchy=e,this.index={},this.hasSubHierarchy={},this.root=new Qu(this.hierarchy.root,this.hierarchy.graphOptions),this.index[e.root.name]=this.root,this.buildSubHierarchy(e.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(e){if(e in this.hasSubHierarchy)return;this.hasSubHierarchy[e]=!0;const n=this.index[e];if(n.node.type!==i.META)return;const t=n,r=t.node.metaGraph,o=t.coreGraph;r.nodes().forEach((e=>{const n=this.getOrCreateRenderNodeByName(e);o.setNode(e,n)})),r.edges().forEach((e=>{const n=r.edge(e),t=new Ku(n);o.setEdge(e.v,e.w,t)}));const u=t.node.parentNode;if(!u)return;const c=this.getRenderNodeByName(u.name),s=(e,...n)=>n.concat([e?\"IN\":\"OUT\"]).join(\"~~\"),d=this.hierarchy.getBridgeGraph(e);d.edges().forEach((n=>{const t=d.edge(n),f=!!r.node(n.w),[h,l]=f?[n.w,n.v]:[n.v,n.w],v=n=>{const t=f?{v:n,w:e}:{v:e,w:n};return c.coreGraph.edge(t)};let p=v(l);p||(p=v(s(f,l,u.name)));const g=s(f,e),y=s(f,l,e);let b=o.node(y);if(!b){let e=o.node(g);if(!e){const n={name:g,type:i.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:a.UNSPECIFIED,inbound:f,attr:{}};e=new Xu(n),this.index[g]=e,o.setNode(g,e)}const n={name:y,type:i.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:a.UNSPECIFIED,inbound:f,attr:{}};b=new Xu(n),this.index[y]=b,o.setNode(y,b),o.setParent(y,g),e.node.cardinality++}const m=new Ku(t);m.adjoiningMetaEdge=p,f?o.setEdge(y,h,m):o.setEdge(h,y,m)}))}getOrCreateRenderNodeByName(e){if(!e)return null;if(e in this.index)return this.index[e];const n=this.getNodeByName(e);return n?(this.index[e]=n.isGroupNode?new Qu(n,this.hierarchy.graphOptions):new Xu(n),this.index[e]):null}getRenderNodeByName(e){return this.index[e]}getNodeByName(e){return this.hierarchy.node(e)}}class Xu{constructor(e){this.node=e,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=e.width||0,this.height=e.height||0,this.displayName=e.name,this.attr=e.attr}}class Ku{constructor(e){this.metaEdge=e,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Qu extends Xu{constructor(e,n){super(e);const t=e.metaGraph.graph();n.compound=!0,this.coreGraph=Hu(t.name,u.CORE,n)}}function Zu(e,t){e.node.isGroupNode&&function(e,t){const r=n(t);e.coreGraph.nodes().map((n=>e.coreGraph.node(n))).forEach((e=>{var n,o,a,u,c,s;const{height:d,width:f}=e;switch(e.node.type){case i.NODE:Object.assign(e,r.nodeSize.node),e.height=d||r.nodeSize.node.height,e.width=f||r.nodeSize.node.width;break;case i.BRIDGE:Object.assign(e,r.nodeSize.bridge);break;case i.META:if(e.expanded){Zu(e,t)}else Object.assign(e,r.nodeSize.meta),e.height=r.nodeSize.meta.height,e.width=r.nodeSize.meta.width;break;default:throw Error(\"Unrecognized node type: \"+e.node.type)}if(!e.expanded){const r=e.attr;!function(e,n=!1){if(e.coreBox.width=e.width,e.coreBox.height=e.height,!n){const n=`${e.displayName}`.length,t=3;e.width=Math.max(e.coreBox.width,n*t)}}(e,t&&(0===e.node.type&&!!(null===(o=null===(n=null==t?void 0:t.nodeSize)||void 0===n?void 0:n.meta)||void 0===o?void 0:o.width)||1===e.node.type&&(!!(null===(u=null===(a=null==t?void 0:t.nodeSize)||void 0===a?void 0:a.node)||void 0===u?void 0:u.width)||!!r.width)||2===e.node.type&&!!(null===(s=null===(c=null==t?void 0:t.nodeSize)||void 0===c?void 0:c.bridge)||void 0===s?void 0:s.width)))}}))}(e,t),e.node.type===i.META&&function(e,t){const r=n(t),o=r.subScene.meta;Object.assign(e,o);const{nodeSep:a,rankSep:u,edgeSep:c,align:s}=r.graph.meta,d={nodesep:a,ranksep:u,edgesep:c,align:s};Object.assign(e.coreBox,function(e,n){const{ranksep:t,nodesep:r,edgesep:o,align:a}=n;Object.assign(e.graph(),{ranksep:t,nodesep:r,edgesep:o,align:a});const u=[];if(e.nodes().forEach((n=>{e.node(n).node.type!==i.BRIDGE&&u.push(n)})),!u.length)return{width:0,height:0};Tu(e);let c=1/0,s=1/0,d=-1/0,f=-1/0;return u.forEach((n=>{const t=e.node(n),r=.5*t.width,o=t.x-r,i=t.x+r;c=o<c?o:c,d=i>d?i:d;const a=.5*t.height,u=t.y-a,h=t.y+a;s=u<s?u:s,f=h>f?h:f})),e.edges().forEach((n=>{const t=e.edge(n),r=e.node(t.metaEdge.v),o=e.node(t.metaEdge.w);if(3===t.points.length&&function(e){let n=ec(e[0],e[1]);for(let t=1;t<e.length-1;t++){const r=ec(e[t],e[t+1]);if(Math.abs(r-n)>1)return!1;n=r}return!0}(t.points)){if(null!=r){const e=r.expanded?r.x:nc(r);t.points[0].x=e}if(null!=o){const e=o.expanded?o.x:nc(o);t.points[2].x=e}t.points=[t.points[0],t.points[1]]}const i=t.points[t.points.length-2];null!=o&&(t.points[t.points.length-1]=tc(i,o));const a=t.points[1];null!=r&&(t.points[0]=tc(a,r)),t.points.forEach((e=>{c=e.x<c?e.x:c,d=e.x>d?e.x:d,s=e.y<s?e.y:s,f=e.y>f?e.y:f}))})),e.nodes().forEach((n=>{const t=e.node(n);t.x-=c,t.y-=s})),e.edges().forEach((n=>{e.edge(n).points.forEach((e=>{e.x-=c,e.y-=s}))})),{width:d-c,height:f-s}}(e.coreGraph,d));let f=0;e.coreGraph.nodeCount()>0&&f++;const h=f<=1?0:f;e.coreBox.width+=h+h,e.coreBox.height=o.labelHeight+e.coreBox.height,e.width=e.coreBox.width+o.paddingLeft+o.paddingRight,e.height=e.paddingTop+e.coreBox.height+e.paddingBottom}(e,t)}function ec(e,n){const t=n.x-e.x,r=n.y-e.y;return 180*Math.atan(r/t)/Math.PI}function nc(e){if(e.expanded)return e.x;return e.x-e.width/2+0+e.coreBox.width/2}function tc(e,n){const t=n.expanded?n.x:nc(n),r=n.y,o=e.x-t,i=e.y-r;let a,u,c=n.expanded?n.width:n.coreBox.width,s=n.expanded?n.height:n.coreBox.height;return Math.abs(i)*c/2>Math.abs(o)*s/2?(i<0&&(s=-s),a=0===i?0:s/2*o/i,u=s/2):(o<0&&(c=-c),a=c/2,u=0===o?0:c/2*i/o),{x:t+a,y:r+u}}function rc(n,t,r){var o,i,a,u;const c=n.nodes.filter(((e,n,t)=>t.findIndex((n=>n.id===e.id))!==n)).map((e=>e.id));if(c.length)throw new Error(`Duplicated ids found: ${c.join(\", \")}`);const s=function(e){const n={nodes:[]},t=e.compound,r=Object.keys(t||{}),o=new Map,i=(e,n=[])=>{if(o.has(e))return o.get(e);for(let o=0;o<r.length;o++){let a=r[o];if(t&&-1!==t[a].indexOf(e))return n.unshift(a),i(a,n)}return 0===n.length&&o.set(e,n),n},a=n=>e.edges.filter((e=>e.w===n)).map((e=>({name:e.v})));return e.nodes.forEach((e=>{const t=e.id,r=[...i(t),t];let o=a(t);n.nodes.push({name:t,path:r,inputs:o,width:e.width,height:e.height,attr:Object.assign({},e)})})),n}(n),d=function(e,n){const t=(e,n)=>{for(let t of n.values())if(t.includes(e))return!0;return!1},r=(e,n=[])=>{if(0===Object.keys(e).length)return[...new Set(n)];const o=new Map(Object.keys(e).map((n=>[n,e[n]]))),i={};for(let[e,r]of o)t(e,o)?i[e]=r:n=n.concat(e,r);return r(i,n)};return r(e).filter((e=>n.includes(e)))}(n.compound||{},(null==t?void 0:t.expanded)||[]),f=function(e,n){return function(e){return new Ju(e)}(qu(zu(e),n))}(s,{rankDirection:(null===(i=null===(o=null==r?void 0:r.graph)||void 0===o?void 0:o.meta)||void 0===i?void 0:i.rankDir)||(null==t?void 0:t.rankDirection)||e.graph.meta.rankDir,align:(null===(u=null===(a=null==r?void 0:r.graph)||void 0===a?void 0:a.meta)||void 0===u?void 0:u.align)||e.graph.meta.align});return function(e,n){n.forEach((n=>{const t=e.getRenderInfoNodes().find((e=>e.displayName===n));let r=t&&t.node&&t.node.name||\"\";const o=e.getRenderNodeByName(r);if(!o)throw new Error(`No nodes found: ${r}`);o.expanded=!0,e.buildSubHierarchy(r)}))}(f,d),Zu(f.root,r),ac(f.root)}function oc(e,n=!1){const t=JSON.parse(JSON.stringify(e)),o={nodes:[t],edges:[...t.edges]};return t.nodes.forEach((function e(n){(0===n.type||1===n.type)&&o.nodes.push(n),0===n.type&&(o.edges=o.edges.concat(n.edges)),Array.isArray(n.nodes)&&n.nodes.forEach(e)})),n&&o.nodes.forEach((e=>{const n=o.nodes.find((n=>n.id===e.parentNodeName));if(n){const t=n.x-n.width/2+n.paddingLeft,o=n.y-n.height/2+n.labelHeight+n.paddingTop;n.id!==r&&(e.x+=t,e.y+=o),0===e.type&&e.edges.forEach((n=>{n.points.forEach((n=>{n.x+=e.x-e.width/2+e.paddingLeft,n.y+=e.y-e.height/2+e.labelHeight+e.paddingTop}))}))}})),o}function ic(e,n,t,o){var i,a;let u=[];const c=(null===(i=t.find((n=>n.id===e)))||void 0===i?void 0:i.path)||[],s=(null===(a=t.find((e=>e.id===n)))||void 0===a?void 0:a.path)||[],d=[r,...c].slice(0,c.length).reverse(),f=[r,...s].slice(0,s.length);return d.forEach((r=>{const i=t.find((e=>e.id===r));u=u.concat(i.edges.filter((t=>t.baseEdgeList.some((t=>t.v===((null==o?void 0:o.v)||e)&&t.w===((null==o?void 0:o.w)||n))))))})),f.filter((e=>!d.includes(e))).forEach((r=>{const i=t.find((e=>e.id===r));u=u.concat(i.edges.filter((t=>t.baseEdgeList.some((t=>t.v===((null==o?void 0:o.v)||e)&&t.w===((null==o?void 0:o.w)||n))))))})),u}function ac(e){const n=e.coreGraph.nodes().map((n=>e.coreGraph.node(n)));return Object.assign(Object.assign({},uc(e)),{expanded:e.expanded,nodes:e.expanded?(t=n,t.map((e=>e.node.type===i.META?ac(e):uc(e)))):[],edges:e.expanded?cc(e):[]});var t}function uc(e){return{id:e.node.name,name:e.node.name,type:e.node.type,cardinality:e.node.cardinality,attr:e.attr,parentNodeName:e.node.parentNode?e.node.parentNode.name:null,coreBox:Object.assign({},e.coreBox),x:e.x,y:e.y,width:e.width,height:e.height,radius:e.radius,labelHeight:e.labelHeight,labelOffset:e.labelOffset,outboxWidth:e.outboxWidth,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,paddingRight:e.paddingRight,paddingBottom:e.paddingBottom,path:e.node.path}}function cc(e){return e.coreGraph.edges().map((n=>({renderInfoEdge:e.coreGraph.edge(n),edge:n}))).filter((({renderInfoEdge:e})=>e.metaEdge)).map((({edge:n,renderInfoEdge:t})=>{const r=function(e,n){const t=n.points.map((e=>Object.assign({},e)));if(n.adjoiningMetaEdge){const r=n.adjoiningMetaEdge.points,o=n.metaEdge.inbound,i=o?r[r.length-1]:r[0],a=t[o?0:t.length-1],u=e.x-e.width/2,c=e.y-e.height/2,s=i.x-u,d=i.y-c,f=-e.paddingLeft,h=-(e.paddingTop+e.labelHeight);a.x=s+f,a.y=d+h}return t}(e,t);return{adjoiningEdge:t.adjoiningMetaEdge?{w:t.adjoiningMetaEdge.metaEdge.w,v:t.adjoiningMetaEdge.metaEdge.v}:null,inbound:t.metaEdge.inbound,w:n.w,v:n.v,points:r,weight:t.weight,baseEdgeList:t.metaEdge.baseEdgeList,parentNodeName:e.node.name}}))}export{o as BRIDGE_GRAPH_NAME,u as GraphType,c as HierarchyNodeType,a as InclusionType,e as LAYOUT_CONFIG,i as NodeType,r as ROOT_NAME,rc as buildGraph,oc as flatGraph,ic as getEdges,n as mergeConfig};\n//# sourceMappingURL=dagre-compound.es5.js.map\n","// eslint-disable-next-line @typescript-eslint/unbound-method\nconst toString = Object.prototype.toString;\n/**\n * Checks if an object is an instance of an Array (array or typed array, except those that contain bigint values).\n *\n * @param value - Object to check.\n * @returns True if the object is an array or a typed array.\n */\nexport function isAnyArray(value) {\n    const tag = toString.call(value);\n    return tag.endsWith('Array]') && !tag.includes('Big');\n}\n//# sourceMappingURL=index.js.map","import { isAnyArray } from 'is-any-array';\n\nfunction max(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isAnyArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var _options$fromIndex = options.fromIndex,\n      fromIndex = _options$fromIndex === void 0 ? 0 : _options$fromIndex,\n      _options$toIndex = options.toIndex,\n      toIndex = _options$toIndex === void 0 ? input.length : _options$toIndex;\n\n  if (fromIndex < 0 || fromIndex >= input.length || !Number.isInteger(fromIndex)) {\n    throw new Error('fromIndex must be a positive integer smaller than length');\n  }\n\n  if (toIndex <= fromIndex || toIndex > input.length || !Number.isInteger(toIndex)) {\n    throw new Error('toIndex must be an integer greater than fromIndex and at most equal to length');\n  }\n\n  var maxValue = input[fromIndex];\n\n  for (var i = fromIndex + 1; i < toIndex; i++) {\n    if (input[i] > maxValue) maxValue = input[i];\n  }\n\n  return maxValue;\n}\n\nexport { max as default };\n","import { isAnyArray } from 'is-any-array';\n\nfunction min(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isAnyArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var _options$fromIndex = options.fromIndex,\n      fromIndex = _options$fromIndex === void 0 ? 0 : _options$fromIndex,\n      _options$toIndex = options.toIndex,\n      toIndex = _options$toIndex === void 0 ? input.length : _options$toIndex;\n\n  if (fromIndex < 0 || fromIndex >= input.length || !Number.isInteger(fromIndex)) {\n    throw new Error('fromIndex must be a positive integer smaller than length');\n  }\n\n  if (toIndex <= fromIndex || toIndex > input.length || !Number.isInteger(toIndex)) {\n    throw new Error('toIndex must be an integer greater than fromIndex and at most equal to length');\n  }\n\n  var minValue = input[fromIndex];\n\n  for (var i = fromIndex + 1; i < toIndex; i++) {\n    if (input[i] < minValue) minValue = input[i];\n  }\n\n  return minValue;\n}\n\nexport { min as default };\n","import { isAnyArray } from 'is-any-array';\nimport max from 'ml-array-max';\nimport min from 'ml-array-min';\n\nfunction rescale(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isAnyArray(input)) {\n    throw new TypeError('input must be an array');\n  } else if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var output;\n\n  if (options.output !== undefined) {\n    if (!isAnyArray(options.output)) {\n      throw new TypeError('output option must be an array if specified');\n    }\n\n    output = options.output;\n  } else {\n    output = new Array(input.length);\n  }\n\n  var currentMin = min(input);\n  var currentMax = max(input);\n\n  if (currentMin === currentMax) {\n    throw new RangeError('minimum and maximum input values are equal. Cannot rescale a constant array');\n  }\n\n  var _options$min = options.min,\n      minValue = _options$min === void 0 ? options.autoMinMax ? currentMin : 0 : _options$min,\n      _options$max = options.max,\n      maxValue = _options$max === void 0 ? options.autoMinMax ? currentMax : 1 : _options$max;\n\n  if (minValue >= maxValue) {\n    throw new RangeError('min option must be smaller than max option');\n  }\n\n  var factor = (maxValue - minValue) / (currentMax - currentMin);\n\n  for (var i = 0; i < input.length; i++) {\n    output[i] = (input[i] - currentMin) * factor + minValue;\n  }\n\n  return output;\n}\n\nexport { rescale as default };\n","const indent = ' '.repeat(2);\nconst indentData = ' '.repeat(4);\n\nexport function inspectMatrix() {\n  return inspectMatrixWithOptions(this);\n}\n\nexport function inspectMatrixWithOptions(matrix, options = {}) {\n  const {\n    maxRows = 15,\n    maxColumns = 10,\n    maxNumSize = 8,\n    padMinus = 'auto',\n  } = options;\n  return `${matrix.constructor.name} {\n${indent}[\n${indentData}${inspectData(matrix, maxRows, maxColumns, maxNumSize, padMinus)}\n${indent}]\n${indent}rows: ${matrix.rows}\n${indent}columns: ${matrix.columns}\n}`;\n}\n\nfunction inspectData(matrix, maxRows, maxColumns, maxNumSize, padMinus) {\n  const { rows, columns } = matrix;\n  const maxI = Math.min(rows, maxRows);\n  const maxJ = Math.min(columns, maxColumns);\n  const result = [];\n\n  if (padMinus === 'auto') {\n    padMinus = false;\n    loop: for (let i = 0; i < maxI; i++) {\n      for (let j = 0; j < maxJ; j++) {\n        if (matrix.get(i, j) < 0) {\n          padMinus = true;\n          break loop;\n        }\n      }\n    }\n  }\n\n  for (let i = 0; i < maxI; i++) {\n    let line = [];\n    for (let j = 0; j < maxJ; j++) {\n      line.push(formatNumber(matrix.get(i, j), maxNumSize, padMinus));\n    }\n    result.push(`${line.join(' ')}`);\n  }\n  if (maxJ !== columns) {\n    result[result.length - 1] += ` ... ${columns - maxColumns} more columns`;\n  }\n  if (maxI !== rows) {\n    result.push(`... ${rows - maxRows} more rows`);\n  }\n  return result.join(`\\n${indentData}`);\n}\n\nfunction formatNumber(num, maxNumSize, padMinus) {\n  return (\n    num >= 0 && padMinus\n      ? ` ${formatNumber2(num, maxNumSize - 1)}`\n      : formatNumber2(num, maxNumSize)\n  ).padEnd(maxNumSize);\n}\n\nfunction formatNumber2(num, len) {\n  // small.length numbers should be as is\n  let str = num.toString();\n  if (str.length <= len) return str;\n\n  // (7)'0.00123' is better then (7)'1.23e-2'\n  // (8)'0.000123' is worse then (7)'1.23e-3',\n  let fix = num.toFixed(len);\n  if (fix.length > len) {\n    fix = num.toFixed(Math.max(0, len - (fix.length - len)));\n  }\n  if (\n    fix.length <= len &&\n    !fix.startsWith('0.000') &&\n    !fix.startsWith('-0.000')\n  ) {\n    return fix;\n  }\n\n  // well, if it's still too long the user should've used longer numbers\n  let exp = num.toExponential(len);\n  if (exp.length > len) {\n    exp = num.toExponential(Math.max(0, len - (exp.length - len)));\n  }\n  return exp.slice(0);\n}\n","export function installMathOperations(AbstractMatrix, Matrix) {\n  AbstractMatrix.prototype.add = function add(value) {\n    if (typeof value === 'number') return this.addS(value);\n    return this.addM(value);\n  };\n\n  AbstractMatrix.prototype.addS = function addS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.addM = function addM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.add = function add(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.add(value);\n  };\n\n  AbstractMatrix.prototype.sub = function sub(value) {\n    if (typeof value === 'number') return this.subS(value);\n    return this.subM(value);\n  };\n\n  AbstractMatrix.prototype.subS = function subS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.subM = function subM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sub = function sub(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sub(value);\n  };\n  AbstractMatrix.prototype.subtract = AbstractMatrix.prototype.sub;\n  AbstractMatrix.prototype.subtractS = AbstractMatrix.prototype.subS;\n  AbstractMatrix.prototype.subtractM = AbstractMatrix.prototype.subM;\n  AbstractMatrix.subtract = AbstractMatrix.sub;\n\n  AbstractMatrix.prototype.mul = function mul(value) {\n    if (typeof value === 'number') return this.mulS(value);\n    return this.mulM(value);\n  };\n\n  AbstractMatrix.prototype.mulS = function mulS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.mulM = function mulM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mul = function mul(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.mul(value);\n  };\n  AbstractMatrix.prototype.multiply = AbstractMatrix.prototype.mul;\n  AbstractMatrix.prototype.multiplyS = AbstractMatrix.prototype.mulS;\n  AbstractMatrix.prototype.multiplyM = AbstractMatrix.prototype.mulM;\n  AbstractMatrix.multiply = AbstractMatrix.mul;\n\n  AbstractMatrix.prototype.div = function div(value) {\n    if (typeof value === 'number') return this.divS(value);\n    return this.divM(value);\n  };\n\n  AbstractMatrix.prototype.divS = function divS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.divM = function divM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.div = function div(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.div(value);\n  };\n  AbstractMatrix.prototype.divide = AbstractMatrix.prototype.div;\n  AbstractMatrix.prototype.divideS = AbstractMatrix.prototype.divS;\n  AbstractMatrix.prototype.divideM = AbstractMatrix.prototype.divM;\n  AbstractMatrix.divide = AbstractMatrix.div;\n\n  AbstractMatrix.prototype.mod = function mod(value) {\n    if (typeof value === 'number') return this.modS(value);\n    return this.modM(value);\n  };\n\n  AbstractMatrix.prototype.modS = function modS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.modM = function modM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mod = function mod(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.mod(value);\n  };\n  AbstractMatrix.prototype.modulus = AbstractMatrix.prototype.mod;\n  AbstractMatrix.prototype.modulusS = AbstractMatrix.prototype.modS;\n  AbstractMatrix.prototype.modulusM = AbstractMatrix.prototype.modM;\n  AbstractMatrix.modulus = AbstractMatrix.mod;\n\n  AbstractMatrix.prototype.and = function and(value) {\n    if (typeof value === 'number') return this.andS(value);\n    return this.andM(value);\n  };\n\n  AbstractMatrix.prototype.andS = function andS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.andM = function andM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.and = function and(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.and(value);\n  };\n\n  AbstractMatrix.prototype.or = function or(value) {\n    if (typeof value === 'number') return this.orS(value);\n    return this.orM(value);\n  };\n\n  AbstractMatrix.prototype.orS = function orS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.orM = function orM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.or = function or(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.or(value);\n  };\n\n  AbstractMatrix.prototype.xor = function xor(value) {\n    if (typeof value === 'number') return this.xorS(value);\n    return this.xorM(value);\n  };\n\n  AbstractMatrix.prototype.xorS = function xorS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.xorM = function xorM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.xor = function xor(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.xor(value);\n  };\n\n  AbstractMatrix.prototype.leftShift = function leftShift(value) {\n    if (typeof value === 'number') return this.leftShiftS(value);\n    return this.leftShiftM(value);\n  };\n\n  AbstractMatrix.prototype.leftShiftS = function leftShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.leftShiftM = function leftShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.leftShift = function leftShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.leftShift(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShift = function signPropagatingRightShift(value) {\n    if (typeof value === 'number') return this.signPropagatingRightShiftS(value);\n    return this.signPropagatingRightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftS = function signPropagatingRightShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftM = function signPropagatingRightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.signPropagatingRightShift = function signPropagatingRightShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.signPropagatingRightShift(value);\n  };\n\n  AbstractMatrix.prototype.rightShift = function rightShift(value) {\n    if (typeof value === 'number') return this.rightShiftS(value);\n    return this.rightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.rightShiftS = function rightShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.rightShiftM = function rightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.rightShift = function rightShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.rightShift(value);\n  };\n  AbstractMatrix.prototype.zeroFillRightShift = AbstractMatrix.prototype.rightShift;\n  AbstractMatrix.prototype.zeroFillRightShiftS = AbstractMatrix.prototype.rightShiftS;\n  AbstractMatrix.prototype.zeroFillRightShiftM = AbstractMatrix.prototype.rightShiftM;\n  AbstractMatrix.zeroFillRightShift = AbstractMatrix.rightShift;\n\n  AbstractMatrix.prototype.not = function not() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, ~(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.not = function not(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.not();\n  };\n\n  AbstractMatrix.prototype.abs = function abs() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.abs(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.abs = function abs(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.abs();\n  };\n\n  AbstractMatrix.prototype.acos = function acos() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acos = function acos(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.acos();\n  };\n\n  AbstractMatrix.prototype.acosh = function acosh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acosh = function acosh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.acosh();\n  };\n\n  AbstractMatrix.prototype.asin = function asin() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asin = function asin(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.asin();\n  };\n\n  AbstractMatrix.prototype.asinh = function asinh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asinh = function asinh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.asinh();\n  };\n\n  AbstractMatrix.prototype.atan = function atan() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atan = function atan(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.atan();\n  };\n\n  AbstractMatrix.prototype.atanh = function atanh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atanh = function atanh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.atanh();\n  };\n\n  AbstractMatrix.prototype.cbrt = function cbrt() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cbrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cbrt = function cbrt(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cbrt();\n  };\n\n  AbstractMatrix.prototype.ceil = function ceil() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.ceil(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.ceil = function ceil(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.ceil();\n  };\n\n  AbstractMatrix.prototype.clz32 = function clz32() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.clz32(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.clz32 = function clz32(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.clz32();\n  };\n\n  AbstractMatrix.prototype.cos = function cos() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cos = function cos(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cos();\n  };\n\n  AbstractMatrix.prototype.cosh = function cosh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cosh = function cosh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cosh();\n  };\n\n  AbstractMatrix.prototype.exp = function exp() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.exp(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.exp = function exp(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.exp();\n  };\n\n  AbstractMatrix.prototype.expm1 = function expm1() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.expm1(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.expm1 = function expm1(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.expm1();\n  };\n\n  AbstractMatrix.prototype.floor = function floor() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.floor(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.floor = function floor(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.floor();\n  };\n\n  AbstractMatrix.prototype.fround = function fround() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.fround(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.fround = function fround(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.fround();\n  };\n\n  AbstractMatrix.prototype.log = function log() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log = function log(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log();\n  };\n\n  AbstractMatrix.prototype.log1p = function log1p() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log1p(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log1p = function log1p(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log1p();\n  };\n\n  AbstractMatrix.prototype.log10 = function log10() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log10(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log10 = function log10(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log10();\n  };\n\n  AbstractMatrix.prototype.log2 = function log2() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log2(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log2 = function log2(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log2();\n  };\n\n  AbstractMatrix.prototype.round = function round() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.round(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.round = function round(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.round();\n  };\n\n  AbstractMatrix.prototype.sign = function sign() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sign(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sign = function sign(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sign();\n  };\n\n  AbstractMatrix.prototype.sin = function sin() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sin = function sin(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sin();\n  };\n\n  AbstractMatrix.prototype.sinh = function sinh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sinh = function sinh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sinh();\n  };\n\n  AbstractMatrix.prototype.sqrt = function sqrt() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sqrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sqrt = function sqrt(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sqrt();\n  };\n\n  AbstractMatrix.prototype.tan = function tan() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tan = function tan(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.tan();\n  };\n\n  AbstractMatrix.prototype.tanh = function tanh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tanh = function tanh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.tanh();\n  };\n\n  AbstractMatrix.prototype.trunc = function trunc() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.trunc(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.trunc = function trunc(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.trunc();\n  };\n\n  AbstractMatrix.pow = function pow(matrix, arg0) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.pow(arg0);\n  };\n\n  AbstractMatrix.prototype.pow = function pow(value) {\n    if (typeof value === 'number') return this.powS(value);\n    return this.powM(value);\n  };\n\n  AbstractMatrix.prototype.powS = function powS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.pow(this.get(i, j), value));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.powM = function powM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.pow(this.get(i, j), matrix.get(i, j)));\n      }\n    }\n    return this;\n  };\n}\n","import { isAnyArray } from 'is-any-array';\n\n/**\n * @private\n * Check that a row index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexport function checkRowIndex(matrix, index, outer) {\n  let max = outer ? matrix.rows : matrix.rows - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Row index out of range');\n  }\n}\n\n/**\n * @private\n * Check that a column index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nexport function checkColumnIndex(matrix, index, outer) {\n  let max = outer ? matrix.columns : matrix.columns - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Column index out of range');\n  }\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexport function checkRowVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.columns) {\n    throw new RangeError(\n      'vector size must be the same as the number of columns',\n    );\n  }\n  return vector;\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nexport function checkColumnVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.rows) {\n    throw new RangeError('vector size must be the same as the number of rows');\n  }\n  return vector;\n}\n\nexport function checkRowIndices(matrix, rowIndices) {\n  if (!isAnyArray(rowIndices)) {\n    throw new TypeError('row indices must be an array');\n  }\n\n  for (let i = 0; i < rowIndices.length; i++) {\n    if (rowIndices[i] < 0 || rowIndices[i] >= matrix.rows) {\n      throw new RangeError('row indices are out of range');\n    }\n  }\n}\n\nexport function checkColumnIndices(matrix, columnIndices) {\n  if (!isAnyArray(columnIndices)) {\n    throw new TypeError('column indices must be an array');\n  }\n\n  for (let i = 0; i < columnIndices.length; i++) {\n    if (columnIndices[i] < 0 || columnIndices[i] >= matrix.columns) {\n      throw new RangeError('column indices are out of range');\n    }\n  }\n}\n\nexport function checkRange(matrix, startRow, endRow, startColumn, endColumn) {\n  if (arguments.length !== 5) {\n    throw new RangeError('expected 4 arguments');\n  }\n  checkNumber('startRow', startRow);\n  checkNumber('endRow', endRow);\n  checkNumber('startColumn', startColumn);\n  checkNumber('endColumn', endColumn);\n  if (\n    startRow > endRow ||\n    startColumn > endColumn ||\n    startRow < 0 ||\n    startRow >= matrix.rows ||\n    endRow < 0 ||\n    endRow >= matrix.rows ||\n    startColumn < 0 ||\n    startColumn >= matrix.columns ||\n    endColumn < 0 ||\n    endColumn >= matrix.columns\n  ) {\n    throw new RangeError('Submatrix indices are out of range');\n  }\n}\n\nexport function newArray(length, value = 0) {\n  let array = [];\n  for (let i = 0; i < length; i++) {\n    array.push(value);\n  }\n  return array;\n}\n\nfunction checkNumber(name, value) {\n  if (typeof value !== 'number') {\n    throw new TypeError(`${name} must be a number`);\n  }\n}\n\nexport function checkNonEmpty(matrix) {\n  if (matrix.isEmpty()) {\n    throw new Error('Empty matrix has no elements to index');\n  }\n}\n","import { newArray } from './util';\n\nexport function sumByRow(matrix) {\n  let sum = newArray(matrix.rows);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function sumByColumn(matrix) {\n  let sum = newArray(matrix.columns);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function sumAll(matrix) {\n  let v = 0;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v += matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nexport function productByRow(matrix) {\n  let sum = newArray(matrix.rows, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function productByColumn(matrix) {\n  let sum = newArray(matrix.columns, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nexport function productAll(matrix) {\n  let v = 1;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v *= matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nexport function varianceByRow(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let i = 0; i < rows; i++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean[i];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / cols) / (cols - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / cols) / cols);\n    }\n  }\n  return variance;\n}\n\nexport function varianceByColumn(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let j = 0; j < cols; j++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let i = 0; i < rows; i++) {\n      x = matrix.get(i, j) - mean[j];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / rows) / (rows - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / rows) / rows);\n    }\n  }\n  return variance;\n}\n\nexport function varianceAll(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const size = rows * cols;\n\n  let sum1 = 0;\n  let sum2 = 0;\n  let x = 0;\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean;\n      sum1 += x;\n      sum2 += x * x;\n    }\n  }\n  if (unbiased) {\n    return (sum2 - (sum1 * sum1) / size) / (size - 1);\n  } else {\n    return (sum2 - (sum1 * sum1) / size) / size;\n  }\n}\n\nexport function centerByRow(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[i]);\n    }\n  }\n}\n\nexport function centerByColumn(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[j]);\n    }\n  }\n}\n\nexport function centerAll(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean);\n    }\n  }\n}\n\nexport function getScaleByRow(matrix) {\n  const scale = [];\n  for (let i = 0; i < matrix.rows; i++) {\n    let sum = 0;\n    for (let j = 0; j < matrix.columns; j++) {\n      sum += Math.pow(matrix.get(i, j), 2) / (matrix.columns - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nexport function scaleByRow(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[i]);\n    }\n  }\n}\n\nexport function getScaleByColumn(matrix) {\n  const scale = [];\n  for (let j = 0; j < matrix.columns; j++) {\n    let sum = 0;\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += Math.pow(matrix.get(i, j), 2) / (matrix.rows - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nexport function scaleByColumn(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[j]);\n    }\n  }\n}\n\nexport function getScaleAll(matrix) {\n  const divider = matrix.size - 1;\n  let sum = 0;\n  for (let j = 0; j < matrix.columns; j++) {\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += Math.pow(matrix.get(i, j), 2) / divider;\n    }\n  }\n  return Math.sqrt(sum);\n}\n\nexport function scaleAll(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale);\n    }\n  }\n}\n","import { isAnyArray } from 'is-any-array';\nimport rescale from 'ml-array-rescale';\n\nimport { inspectMatrix, inspectMatrixWithOptions } from './inspect';\nimport { installMathOperations } from './mathOperations';\nimport {\n  sumByRow,\n  sumByColumn,\n  sumAll,\n  productByRow,\n  productByColumn,\n  productAll,\n  varianceByRow,\n  varianceByColumn,\n  varianceAll,\n  centerByRow,\n  centerByColumn,\n  centerAll,\n  scaleByRow,\n  scaleByColumn,\n  scaleAll,\n  getScaleByRow,\n  getScaleByColumn,\n  getScaleAll,\n} from './stat';\nimport {\n  checkRowVector,\n  checkRowIndex,\n  checkColumnIndex,\n  checkColumnVector,\n  checkRange,\n  checkNonEmpty,\n  checkRowIndices,\n  checkColumnIndices,\n} from './util';\n\nexport class AbstractMatrix {\n  static from1DArray(newRows, newColumns, newData) {\n    let length = newRows * newColumns;\n    if (length !== newData.length) {\n      throw new RangeError('data length does not match given dimensions');\n    }\n    let newMatrix = new Matrix(newRows, newColumns);\n    for (let row = 0; row < newRows; row++) {\n      for (let column = 0; column < newColumns; column++) {\n        newMatrix.set(row, column, newData[row * newColumns + column]);\n      }\n    }\n    return newMatrix;\n  }\n\n  static rowVector(newData) {\n    let vector = new Matrix(1, newData.length);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(0, i, newData[i]);\n    }\n    return vector;\n  }\n\n  static columnVector(newData) {\n    let vector = new Matrix(newData.length, 1);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(i, 0, newData[i]);\n    }\n    return vector;\n  }\n\n  static zeros(rows, columns) {\n    return new Matrix(rows, columns);\n  }\n\n  static ones(rows, columns) {\n    return new Matrix(rows, columns).fill(1);\n  }\n\n  static rand(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { random = Math.random } = options;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.set(i, j, random());\n      }\n    }\n    return matrix;\n  }\n\n  static randInt(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1000, random = Math.random } = options;\n    if (!Number.isInteger(min)) throw new TypeError('min must be an integer');\n    if (!Number.isInteger(max)) throw new TypeError('max must be an integer');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let interval = max - min;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        let value = min + Math.round(random() * interval);\n        matrix.set(i, j, value);\n      }\n    }\n    return matrix;\n  }\n\n  static eye(rows, columns, value) {\n    if (columns === undefined) columns = rows;\n    if (value === undefined) value = 1;\n    let min = Math.min(rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, value);\n    }\n    return matrix;\n  }\n\n  static diag(data, rows, columns) {\n    let l = data.length;\n    if (rows === undefined) rows = l;\n    if (columns === undefined) columns = rows;\n    let min = Math.min(l, rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, data[i]);\n    }\n    return matrix;\n  }\n\n  static min(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static max(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new this(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static checkMatrix(value) {\n    return AbstractMatrix.isMatrix(value) ? value : new Matrix(value);\n  }\n\n  static isMatrix(value) {\n    return value != null && value.klass === 'Matrix';\n  }\n\n  get size() {\n    return this.rows * this.columns;\n  }\n\n  apply(callback) {\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback must be a function');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        callback.call(this, i, j);\n      }\n    }\n    return this;\n  }\n\n  to1DArray() {\n    let array = [];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        array.push(this.get(i, j));\n      }\n    }\n    return array;\n  }\n\n  to2DArray() {\n    let copy = [];\n    for (let i = 0; i < this.rows; i++) {\n      copy.push([]);\n      for (let j = 0; j < this.columns; j++) {\n        copy[i].push(this.get(i, j));\n      }\n    }\n    return copy;\n  }\n\n  toJSON() {\n    return this.to2DArray();\n  }\n\n  isRowVector() {\n    return this.rows === 1;\n  }\n\n  isColumnVector() {\n    return this.columns === 1;\n  }\n\n  isVector() {\n    return this.rows === 1 || this.columns === 1;\n  }\n\n  isSquare() {\n    return this.rows === this.columns;\n  }\n\n  isEmpty() {\n    return this.rows === 0 || this.columns === 0;\n  }\n\n  isSymmetric() {\n    if (this.isSquare()) {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j <= i; j++) {\n          if (this.get(i, j) !== this.get(j, i)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  isEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isEchelonForm = false;\n          checked = true;\n        }\n      }\n      i++;\n    }\n    return isEchelonForm;\n  }\n\n  isReducedEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isReducedEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isReducedEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isReducedEchelonForm = false;\n          checked = true;\n        }\n      }\n      for (let k = j + 1; k < this.rows; k++) {\n        if (this.get(i, k) !== 0) {\n          isReducedEchelonForm = false;\n        }\n      }\n      i++;\n    }\n    return isReducedEchelonForm;\n  }\n\n  echelonForm() {\n    let result = this.clone();\n    let h = 0;\n    let k = 0;\n    while (h < result.rows && k < result.columns) {\n      let iMax = h;\n      for (let i = h; i < result.rows; i++) {\n        if (result.get(i, k) > result.get(iMax, k)) {\n          iMax = i;\n        }\n      }\n      if (result.get(iMax, k) === 0) {\n        k++;\n      } else {\n        result.swapRows(h, iMax);\n        let tmp = result.get(h, k);\n        for (let j = k; j < result.columns; j++) {\n          result.set(h, j, result.get(h, j) / tmp);\n        }\n        for (let i = h + 1; i < result.rows; i++) {\n          let factor = result.get(i, k) / result.get(h, k);\n          result.set(i, k, 0);\n          for (let j = k + 1; j < result.columns; j++) {\n            result.set(i, j, result.get(i, j) - result.get(h, j) * factor);\n          }\n        }\n        h++;\n        k++;\n      }\n    }\n    return result;\n  }\n\n  reducedEchelonForm() {\n    let result = this.echelonForm();\n    let m = result.columns;\n    let n = result.rows;\n    let h = n - 1;\n    while (h >= 0) {\n      if (result.maxRow(h) === 0) {\n        h--;\n      } else {\n        let p = 0;\n        let pivot = false;\n        while (p < n && pivot === false) {\n          if (result.get(h, p) === 1) {\n            pivot = true;\n          } else {\n            p++;\n          }\n        }\n        for (let i = 0; i < h; i++) {\n          let factor = result.get(i, p);\n          for (let j = p; j < m; j++) {\n            let tmp = result.get(i, j) - factor * result.get(h, j);\n            result.set(i, j, tmp);\n          }\n        }\n        h--;\n      }\n    }\n    return result;\n  }\n\n  set() {\n    throw new Error('set method is unimplemented');\n  }\n\n  get() {\n    throw new Error('get method is unimplemented');\n  }\n\n  repeat(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { rows = 1, columns = 1 } = options;\n    if (!Number.isInteger(rows) || rows <= 0) {\n      throw new TypeError('rows must be a positive integer');\n    }\n    if (!Number.isInteger(columns) || columns <= 0) {\n      throw new TypeError('columns must be a positive integer');\n    }\n    let matrix = new Matrix(this.rows * rows, this.columns * columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.setSubMatrix(this, this.rows * i, this.columns * j);\n      }\n    }\n    return matrix;\n  }\n\n  fill(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, value);\n      }\n    }\n    return this;\n  }\n\n  neg() {\n    return this.mulS(-1);\n  }\n\n  getRow(index) {\n    checkRowIndex(this, index);\n    let row = [];\n    for (let i = 0; i < this.columns; i++) {\n      row.push(this.get(index, i));\n    }\n    return row;\n  }\n\n  getRowVector(index) {\n    return Matrix.rowVector(this.getRow(index));\n  }\n\n  setRow(index, array) {\n    checkRowIndex(this, index);\n    array = checkRowVector(this, array);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, array[i]);\n    }\n    return this;\n  }\n\n  swapRows(row1, row2) {\n    checkRowIndex(this, row1);\n    checkRowIndex(this, row2);\n    for (let i = 0; i < this.columns; i++) {\n      let temp = this.get(row1, i);\n      this.set(row1, i, this.get(row2, i));\n      this.set(row2, i, temp);\n    }\n    return this;\n  }\n\n  getColumn(index) {\n    checkColumnIndex(this, index);\n    let column = [];\n    for (let i = 0; i < this.rows; i++) {\n      column.push(this.get(i, index));\n    }\n    return column;\n  }\n\n  getColumnVector(index) {\n    return Matrix.columnVector(this.getColumn(index));\n  }\n\n  setColumn(index, array) {\n    checkColumnIndex(this, index);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, array[i]);\n    }\n    return this;\n  }\n\n  swapColumns(column1, column2) {\n    checkColumnIndex(this, column1);\n    checkColumnIndex(this, column2);\n    for (let i = 0; i < this.rows; i++) {\n      let temp = this.get(i, column1);\n      this.set(i, column1, this.get(i, column2));\n      this.set(i, column2, temp);\n    }\n    return this;\n  }\n\n  addRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[j]);\n      }\n    }\n    return this;\n  }\n\n  subRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[j]);\n      }\n    }\n    return this;\n  }\n\n  mulRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[j]);\n      }\n    }\n    return this;\n  }\n\n  divRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[j]);\n      }\n    }\n    return this;\n  }\n\n  addColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[i]);\n      }\n    }\n    return this;\n  }\n\n  subColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[i]);\n      }\n    }\n    return this;\n  }\n\n  divColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulRow(index, value) {\n    checkRowIndex(this, index);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, this.get(index, i) * value);\n    }\n    return this;\n  }\n\n  mulColumn(index, value) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, this.get(i, index) * value);\n    }\n    return this;\n  }\n\n  max(by) {\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    switch (by) {\n      case 'row': {\n        const max = new Array(this.rows).fill(Number.NEGATIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) > max[row]) {\n              max[row] = this.get(row, column);\n            }\n          }\n        }\n        return max;\n      }\n      case 'column': {\n        const max = new Array(this.columns).fill(Number.NEGATIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) > max[column]) {\n              max[column] = this.get(row, column);\n            }\n          }\n        }\n        return max;\n      }\n      case undefined: {\n        let max = this.get(0, 0);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) > max) {\n              max = this.get(row, column);\n            }\n          }\n        }\n        return max;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  maxIndex() {\n    checkNonEmpty(this);\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  min(by) {\n    if (this.isEmpty()) {\n      return NaN;\n    }\n\n    switch (by) {\n      case 'row': {\n        const min = new Array(this.rows).fill(Number.POSITIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) < min[row]) {\n              min[row] = this.get(row, column);\n            }\n          }\n        }\n        return min;\n      }\n      case 'column': {\n        const min = new Array(this.columns).fill(Number.POSITIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) < min[column]) {\n              min[column] = this.get(row, column);\n            }\n          }\n        }\n        return min;\n      }\n      case undefined: {\n        let min = this.get(0, 0);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) < min) {\n              min = this.get(row, column);\n            }\n          }\n        }\n        return min;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  minIndex() {\n    checkNonEmpty(this);\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  maxRow(row) {\n    checkRowIndex(this, row);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  maxRowIndex(row) {\n    checkRowIndex(this, row);\n    checkNonEmpty(this);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  minRow(row) {\n    checkRowIndex(this, row);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  minRowIndex(row) {\n    checkRowIndex(this, row);\n    checkNonEmpty(this);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  maxColumn(column) {\n    checkColumnIndex(this, column);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  maxColumnIndex(column) {\n    checkColumnIndex(this, column);\n    checkNonEmpty(this);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  minColumn(column) {\n    checkColumnIndex(this, column);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  minColumnIndex(column) {\n    checkColumnIndex(this, column);\n    checkNonEmpty(this);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  diag() {\n    let min = Math.min(this.rows, this.columns);\n    let diag = [];\n    for (let i = 0; i < min; i++) {\n      diag.push(this.get(i, i));\n    }\n    return diag;\n  }\n\n  norm(type = 'frobenius') {\n    let result = 0;\n    if (type === 'max') {\n      return this.max();\n    } else if (type === 'frobenius') {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j < this.columns; j++) {\n          result = result + this.get(i, j) * this.get(i, j);\n        }\n      }\n      return Math.sqrt(result);\n    } else {\n      throw new RangeError(`unknown norm type: ${type}`);\n    }\n  }\n\n  cumulativeSum() {\n    let sum = 0;\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        sum += this.get(i, j);\n        this.set(i, j, sum);\n      }\n    }\n    return this;\n  }\n\n  dot(vector2) {\n    if (AbstractMatrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\n    let vector1 = this.to1DArray();\n    if (vector1.length !== vector2.length) {\n      throw new RangeError('vectors do not have the same size');\n    }\n    let dot = 0;\n    for (let i = 0; i < vector1.length; i++) {\n      dot += vector1[i] * vector2[i];\n    }\n    return dot;\n  }\n\n  mmul(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.columns;\n\n    let result = new Matrix(m, p);\n\n    let Bcolj = new Float64Array(n);\n    for (let j = 0; j < p; j++) {\n      for (let k = 0; k < n; k++) {\n        Bcolj[k] = other.get(k, j);\n      }\n\n      for (let i = 0; i < m; i++) {\n        let s = 0;\n        for (let k = 0; k < n; k++) {\n          s += this.get(i, k) * Bcolj[k];\n        }\n\n        result.set(i, j, s);\n      }\n    }\n    return result;\n  }\n\n  strassen2x2(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(2, 2);\n    const a11 = this.get(0, 0);\n    const b11 = other.get(0, 0);\n    const a12 = this.get(0, 1);\n    const b12 = other.get(0, 1);\n    const a21 = this.get(1, 0);\n    const b21 = other.get(1, 0);\n    const a22 = this.get(1, 1);\n    const b22 = other.get(1, 1);\n\n    // Compute intermediate values.\n    const m1 = (a11 + a22) * (b11 + b22);\n    const m2 = (a21 + a22) * b11;\n    const m3 = a11 * (b12 - b22);\n    const m4 = a22 * (b21 - b11);\n    const m5 = (a11 + a12) * b22;\n    const m6 = (a21 - a11) * (b11 + b12);\n    const m7 = (a12 - a22) * (b21 + b22);\n\n    // Combine intermediate values into the output.\n    const c00 = m1 + m4 - m5 + m7;\n    const c01 = m3 + m5;\n    const c10 = m2 + m4;\n    const c11 = m1 - m2 + m3 + m6;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    return result;\n  }\n\n  strassen3x3(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(3, 3);\n\n    const a00 = this.get(0, 0);\n    const a01 = this.get(0, 1);\n    const a02 = this.get(0, 2);\n    const a10 = this.get(1, 0);\n    const a11 = this.get(1, 1);\n    const a12 = this.get(1, 2);\n    const a20 = this.get(2, 0);\n    const a21 = this.get(2, 1);\n    const a22 = this.get(2, 2);\n\n    const b00 = other.get(0, 0);\n    const b01 = other.get(0, 1);\n    const b02 = other.get(0, 2);\n    const b10 = other.get(1, 0);\n    const b11 = other.get(1, 1);\n    const b12 = other.get(1, 2);\n    const b20 = other.get(2, 0);\n    const b21 = other.get(2, 1);\n    const b22 = other.get(2, 2);\n\n    const m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\n    const m2 = (a00 - a10) * (-b01 + b11);\n    const m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\n    const m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\n    const m5 = (a10 + a11) * (-b00 + b01);\n    const m6 = a00 * b00;\n    const m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\n    const m8 = (-a00 + a20) * (b02 - b12);\n    const m9 = (a20 + a21) * (-b00 + b02);\n    const m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\n    const m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\n    const m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\n    const m13 = (a02 - a22) * (b11 - b21);\n    const m14 = a02 * b20;\n    const m15 = (a21 + a22) * (-b20 + b21);\n    const m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\n    const m17 = (a02 - a12) * (b12 - b22);\n    const m18 = (a11 + a12) * (-b20 + b22);\n    const m19 = a01 * b10;\n    const m20 = a12 * b21;\n    const m21 = a10 * b02;\n    const m22 = a20 * b01;\n    const m23 = a22 * b22;\n\n    const c00 = m6 + m14 + m19;\n    const c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\n    const c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\n    const c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\n    const c11 = m2 + m4 + m5 + m6 + m20;\n    const c12 = m14 + m16 + m17 + m18 + m21;\n    const c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\n    const c21 = m12 + m13 + m14 + m15 + m22;\n    const c22 = m6 + m7 + m8 + m9 + m23;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(0, 2, c02);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    result.set(1, 2, c12);\n    result.set(2, 0, c20);\n    result.set(2, 1, c21);\n    result.set(2, 2, c22);\n    return result;\n  }\n\n  mmulStrassen(y) {\n    y = Matrix.checkMatrix(y);\n    let x = this.clone();\n    let r1 = x.rows;\n    let c1 = x.columns;\n    let r2 = y.rows;\n    let c2 = y.columns;\n    if (c1 !== r2) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Multiplying ${r1} x ${c1} and ${r2} x ${c2} matrix: dimensions do not match.`,\n      );\n    }\n\n    // Put a matrix into the top left of a matrix of zeros.\n    // `rows` and `cols` are the dimensions of the output matrix.\n    function embed(mat, rows, cols) {\n      let r = mat.rows;\n      let c = mat.columns;\n      if (r === rows && c === cols) {\n        return mat;\n      } else {\n        let resultat = AbstractMatrix.zeros(rows, cols);\n        resultat = resultat.setSubMatrix(mat, 0, 0);\n        return resultat;\n      }\n    }\n\n    // Make sure both matrices are the same size.\n    // This is exclusively for simplicity:\n    // this algorithm can be implemented with matrices of different sizes.\n\n    let r = Math.max(r1, r2);\n    let c = Math.max(c1, c2);\n    x = embed(x, r, c);\n    y = embed(y, r, c);\n\n    // Our recursive multiplication function.\n    function blockMult(a, b, rows, cols) {\n      // For small matrices, resort to naive multiplication.\n      if (rows <= 512 || cols <= 512) {\n        return a.mmul(b); // a is equivalent to this\n      }\n\n      // Apply dynamic padding.\n      if (rows % 2 === 1 && cols % 2 === 1) {\n        a = embed(a, rows + 1, cols + 1);\n        b = embed(b, rows + 1, cols + 1);\n      } else if (rows % 2 === 1) {\n        a = embed(a, rows + 1, cols);\n        b = embed(b, rows + 1, cols);\n      } else if (cols % 2 === 1) {\n        a = embed(a, rows, cols + 1);\n        b = embed(b, rows, cols + 1);\n      }\n\n      let halfRows = parseInt(a.rows / 2, 10);\n      let halfCols = parseInt(a.columns / 2, 10);\n      // Subdivide input matrices.\n      let a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n      let b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n\n      let a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\n      let b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\n\n      let a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\n      let b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\n\n      let a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\n      let b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1);\n\n      // Compute intermediate values.\n      let m1 = blockMult(\n        AbstractMatrix.add(a11, a22),\n        AbstractMatrix.add(b11, b22),\n        halfRows,\n        halfCols,\n      );\n      let m2 = blockMult(AbstractMatrix.add(a21, a22), b11, halfRows, halfCols);\n      let m3 = blockMult(a11, AbstractMatrix.sub(b12, b22), halfRows, halfCols);\n      let m4 = blockMult(a22, AbstractMatrix.sub(b21, b11), halfRows, halfCols);\n      let m5 = blockMult(AbstractMatrix.add(a11, a12), b22, halfRows, halfCols);\n      let m6 = blockMult(\n        AbstractMatrix.sub(a21, a11),\n        AbstractMatrix.add(b11, b12),\n        halfRows,\n        halfCols,\n      );\n      let m7 = blockMult(\n        AbstractMatrix.sub(a12, a22),\n        AbstractMatrix.add(b21, b22),\n        halfRows,\n        halfCols,\n      );\n\n      // Combine intermediate values into the output.\n      let c11 = AbstractMatrix.add(m1, m4);\n      c11.sub(m5);\n      c11.add(m7);\n      let c12 = AbstractMatrix.add(m3, m5);\n      let c21 = AbstractMatrix.add(m2, m4);\n      let c22 = AbstractMatrix.sub(m1, m2);\n      c22.add(m3);\n      c22.add(m6);\n\n      // Crop output to the desired size (undo dynamic padding).\n      let resultat = AbstractMatrix.zeros(2 * c11.rows, 2 * c11.columns);\n      resultat = resultat.setSubMatrix(c11, 0, 0);\n      resultat = resultat.setSubMatrix(c12, c11.rows, 0);\n      resultat = resultat.setSubMatrix(c21, 0, c11.columns);\n      resultat = resultat.setSubMatrix(c22, c11.rows, c11.columns);\n      return resultat.subMatrix(0, rows - 1, 0, cols - 1);\n    }\n\n    return blockMult(x, y, r, c);\n  }\n\n  scaleRows(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.rows; i++) {\n      const row = this.getRow(i);\n      if (row.length > 0) {\n        rescale(row, { min, max, output: row });\n      }\n      newMatrix.setRow(i, row);\n    }\n    return newMatrix;\n  }\n\n  scaleColumns(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.columns; i++) {\n      const column = this.getColumn(i);\n      if (column.length) {\n        rescale(column, {\n          min: min,\n          max: max,\n          output: column,\n        });\n      }\n      newMatrix.setColumn(i, column);\n    }\n    return newMatrix;\n  }\n\n  flipRows() {\n    const middle = Math.ceil(this.columns / 2);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < middle; j++) {\n        let first = this.get(i, j);\n        let last = this.get(i, this.columns - 1 - j);\n        this.set(i, j, last);\n        this.set(i, this.columns - 1 - j, first);\n      }\n    }\n    return this;\n  }\n\n  flipColumns() {\n    const middle = Math.ceil(this.rows / 2);\n    for (let j = 0; j < this.columns; j++) {\n      for (let i = 0; i < middle; i++) {\n        let first = this.get(i, j);\n        let last = this.get(this.rows - 1 - i, j);\n        this.set(i, j, last);\n        this.set(this.rows - 1 - i, j, first);\n      }\n    }\n    return this;\n  }\n\n  kroneckerProduct(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.rows;\n    let q = other.columns;\n\n    let result = new Matrix(m * p, n * q);\n    for (let i = 0; i < m; i++) {\n      for (let j = 0; j < n; j++) {\n        for (let k = 0; k < p; k++) {\n          for (let l = 0; l < q; l++) {\n            result.set(p * i + k, q * j + l, this.get(i, j) * other.get(k, l));\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  kroneckerSum(other) {\n    other = Matrix.checkMatrix(other);\n    if (!this.isSquare() || !other.isSquare()) {\n      throw new Error('Kronecker Sum needs two Square Matrices');\n    }\n    let m = this.rows;\n    let n = other.rows;\n    let AxI = this.kroneckerProduct(Matrix.eye(n, n));\n    let IxB = Matrix.eye(m, m).kroneckerProduct(other);\n    return AxI.add(IxB);\n  }\n\n  transpose() {\n    let result = new Matrix(this.columns, this.rows);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        result.set(j, i, this.get(i, j));\n      }\n    }\n    return result;\n  }\n\n  sortRows(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.rows; i++) {\n      this.setRow(i, this.getRow(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  sortColumns(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.columns; i++) {\n      this.setColumn(i, this.getColumn(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  subMatrix(startRow, endRow, startColumn, endColumn) {\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    let newMatrix = new Matrix(\n      endRow - startRow + 1,\n      endColumn - startColumn + 1,\n    );\n    for (let i = startRow; i <= endRow; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        newMatrix.set(i - startRow, j - startColumn, this.get(i, j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixRow(indices, startColumn, endColumn) {\n    if (startColumn === undefined) startColumn = 0;\n    if (endColumn === undefined) endColumn = this.columns - 1;\n    if (\n      startColumn > endColumn ||\n      startColumn < 0 ||\n      startColumn >= this.columns ||\n      endColumn < 0 ||\n      endColumn >= this.columns\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(indices.length, endColumn - startColumn + 1);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        if (indices[i] < 0 || indices[i] >= this.rows) {\n          throw new RangeError(`Row index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(i, j - startColumn, this.get(indices[i], j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixColumn(indices, startRow, endRow) {\n    if (startRow === undefined) startRow = 0;\n    if (endRow === undefined) endRow = this.rows - 1;\n    if (\n      startRow > endRow ||\n      startRow < 0 ||\n      startRow >= this.rows ||\n      endRow < 0 ||\n      endRow >= this.rows\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(endRow - startRow + 1, indices.length);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startRow; j <= endRow; j++) {\n        if (indices[i] < 0 || indices[i] >= this.columns) {\n          throw new RangeError(`Column index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(j - startRow, i, this.get(j, indices[i]));\n      }\n    }\n    return newMatrix;\n  }\n\n  setSubMatrix(matrix, startRow, startColumn) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (matrix.isEmpty()) {\n      return this;\n    }\n    let endRow = startRow + matrix.rows - 1;\n    let endColumn = startColumn + matrix.columns - 1;\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    for (let i = 0; i < matrix.rows; i++) {\n      for (let j = 0; j < matrix.columns; j++) {\n        this.set(startRow + i, startColumn + j, matrix.get(i, j));\n      }\n    }\n    return this;\n  }\n\n  selection(rowIndices, columnIndices) {\n    checkRowIndices(this, rowIndices);\n    checkColumnIndices(this, columnIndices);\n    let newMatrix = new Matrix(rowIndices.length, columnIndices.length);\n    for (let i = 0; i < rowIndices.length; i++) {\n      let rowIndex = rowIndices[i];\n      for (let j = 0; j < columnIndices.length; j++) {\n        let columnIndex = columnIndices[j];\n        newMatrix.set(i, j, this.get(rowIndex, columnIndex));\n      }\n    }\n    return newMatrix;\n  }\n\n  trace() {\n    let min = Math.min(this.rows, this.columns);\n    let trace = 0;\n    for (let i = 0; i < min; i++) {\n      trace += this.get(i, i);\n    }\n    return trace;\n  }\n\n  clone() {\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let row = 0; row < this.rows; row++) {\n      for (let column = 0; column < this.columns; column++) {\n        newMatrix.set(row, column, this.get(row, column));\n      }\n    }\n    return newMatrix;\n  }\n\n  sum(by) {\n    switch (by) {\n      case 'row':\n        return sumByRow(this);\n      case 'column':\n        return sumByColumn(this);\n      case undefined:\n        return sumAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  product(by) {\n    switch (by) {\n      case 'row':\n        return productByRow(this);\n      case 'column':\n        return productByColumn(this);\n      case undefined:\n        return productAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  mean(by) {\n    const sum = this.sum(by);\n    switch (by) {\n      case 'row': {\n        for (let i = 0; i < this.rows; i++) {\n          sum[i] /= this.columns;\n        }\n        return sum;\n      }\n      case 'column': {\n        for (let i = 0; i < this.columns; i++) {\n          sum[i] /= this.rows;\n        }\n        return sum;\n      }\n      case undefined:\n        return sum / this.size;\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  variance(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { unbiased = true, mean = this.mean(by) } = options;\n    if (typeof unbiased !== 'boolean') {\n      throw new TypeError('unbiased must be a boolean');\n    }\n    switch (by) {\n      case 'row': {\n        if (!isAnyArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByRow(this, unbiased, mean);\n      }\n      case 'column': {\n        if (!isAnyArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByColumn(this, unbiased, mean);\n      }\n      case undefined: {\n        if (typeof mean !== 'number') {\n          throw new TypeError('mean must be a number');\n        }\n        return varianceAll(this, unbiased, mean);\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  standardDeviation(by, options) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    const variance = this.variance(by, options);\n    if (by === undefined) {\n      return Math.sqrt(variance);\n    } else {\n      for (let i = 0; i < variance.length; i++) {\n        variance[i] = Math.sqrt(variance[i]);\n      }\n      return variance;\n    }\n  }\n\n  center(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { center = this.mean(by) } = options;\n    switch (by) {\n      case 'row': {\n        if (!isAnyArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByRow(this, center);\n        return this;\n      }\n      case 'column': {\n        if (!isAnyArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByColumn(this, center);\n        return this;\n      }\n      case undefined: {\n        if (typeof center !== 'number') {\n          throw new TypeError('center must be a number');\n        }\n        centerAll(this, center);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  scale(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    let scale = options.scale;\n    switch (by) {\n      case 'row': {\n        if (scale === undefined) {\n          scale = getScaleByRow(this);\n        } else if (!isAnyArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByRow(this, scale);\n        return this;\n      }\n      case 'column': {\n        if (scale === undefined) {\n          scale = getScaleByColumn(this);\n        } else if (!isAnyArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByColumn(this, scale);\n        return this;\n      }\n      case undefined: {\n        if (scale === undefined) {\n          scale = getScaleAll(this);\n        } else if (typeof scale !== 'number') {\n          throw new TypeError('scale must be a number');\n        }\n        scaleAll(this, scale);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  toString(options) {\n    return inspectMatrixWithOptions(this, options);\n  }\n}\n\nAbstractMatrix.prototype.klass = 'Matrix';\nif (typeof Symbol !== 'undefined') {\n  AbstractMatrix.prototype[Symbol.for('nodejs.util.inspect.custom')] =\n    inspectMatrix;\n}\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\nfunction isArrayOfNumbers(array) {\n  return array.every((element) => {\n    return typeof element === 'number';\n  });\n}\n\n// Synonyms\nAbstractMatrix.random = AbstractMatrix.rand;\nAbstractMatrix.randomInt = AbstractMatrix.randInt;\nAbstractMatrix.diagonal = AbstractMatrix.diag;\nAbstractMatrix.prototype.diagonal = AbstractMatrix.prototype.diag;\nAbstractMatrix.identity = AbstractMatrix.eye;\nAbstractMatrix.prototype.negate = AbstractMatrix.prototype.neg;\nAbstractMatrix.prototype.tensorProduct =\n  AbstractMatrix.prototype.kroneckerProduct;\n\nexport default class Matrix extends AbstractMatrix {\n  constructor(nRows, nColumns) {\n    super();\n    if (Matrix.isMatrix(nRows)) {\n      // eslint-disable-next-line no-constructor-return\n      return nRows.clone();\n    } else if (Number.isInteger(nRows) && nRows >= 0) {\n      // Create an empty matrix\n      this.data = [];\n      if (Number.isInteger(nColumns) && nColumns >= 0) {\n        for (let i = 0; i < nRows; i++) {\n          this.data.push(new Float64Array(nColumns));\n        }\n      } else {\n        throw new TypeError('nColumns must be a positive integer');\n      }\n    } else if (isAnyArray(nRows)) {\n      // Copy the values from the 2D array\n      const arrayData = nRows;\n      nRows = arrayData.length;\n      nColumns = nRows ? arrayData[0].length : 0;\n      if (typeof nColumns !== 'number') {\n        throw new TypeError(\n          'Data must be a 2D array with at least one element',\n        );\n      }\n      this.data = [];\n      for (let i = 0; i < nRows; i++) {\n        if (arrayData[i].length !== nColumns) {\n          throw new RangeError('Inconsistent array dimensions');\n        }\n        if (!isArrayOfNumbers(arrayData[i])) {\n          throw new TypeError('Input data contains non-numeric values');\n        }\n        this.data.push(Float64Array.from(arrayData[i]));\n      }\n    } else {\n      throw new TypeError(\n        'First argument must be a positive number or an array',\n      );\n    }\n    this.rows = nRows;\n    this.columns = nColumns;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n\n  removeRow(index) {\n    checkRowIndex(this, index);\n    this.data.splice(index, 1);\n    this.rows -= 1;\n    return this;\n  }\n\n  addRow(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.rows;\n    }\n    checkRowIndex(this, index, true);\n    array = Float64Array.from(checkRowVector(this, array));\n    this.data.splice(index, 0, array);\n    this.rows += 1;\n    return this;\n  }\n\n  removeColumn(index) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns - 1);\n      for (let j = 0; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      for (let j = index + 1; j < this.columns; j++) {\n        newRow[j - 1] = this.data[i][j];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns -= 1;\n    return this;\n  }\n\n  addColumn(index, array) {\n    if (typeof array === 'undefined') {\n      array = index;\n      index = this.columns;\n    }\n    checkColumnIndex(this, index, true);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns + 1);\n      let j = 0;\n      for (; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      newRow[j++] = array[i];\n      for (; j < this.columns + 1; j++) {\n        newRow[j] = this.data[i][j - 1];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns += 1;\n    return this;\n  }\n}\n\ninstallMathOperations(AbstractMatrix, Matrix);\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import _typeof from \"./typeof.js\";\nexport default function _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { EMPTY } from './Entity';\nexport var Component = /*#__PURE__*/_createClass(function Component(data) {\n  _classCallCheck(this, Component);\n} //\n);\n\n/**\n * 管理某一类 Component，尽可能做到 AoS 而非 SoA\n * @see https://wickedengine.net/2019/09/29/entity-component-system/\n * @see https://github.com/turanszkij/WickedEngine/blob/master/WickedEngine/wiECS.h\n */\n// tslint:disable-next-line:max-classes-per-file\nexport var ComponentManager = /*#__PURE__*/function () {\n  /**\n   * 不在 Entity 中维护拥有的 Component 列表，反之亦然\n   */\n\n  function ComponentManager(clazz) {\n    _classCallCheck(this, ComponentManager);\n    this.clazz = void 0;\n    this.components = [];\n    this.entities = [];\n    this.lookup = {};\n    this.clazz = clazz;\n  }\n  _createClass(ComponentManager, [{\n    key: \"clear\",\n    value: function clear() {\n      this.components = [];\n      this.entities = [];\n      this.lookup = {};\n    }\n  }, {\n    key: \"contains\",\n    value: function contains(entity) {\n      return this.lookup[entity] > -1;\n    }\n  }, {\n    key: \"create\",\n    value: function create(entity, data) {\n      this.lookup[entity] = this.components.length;\n      var component = new this.clazz(data || {});\n      this.components.push(component);\n      this.entities.push(entity);\n      return component;\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(entity) {\n      var componentIndex = this.lookup[entity];\n      if (componentIndex > -1) {\n        if (componentIndex < this.components.length - 1) {\n          // 将待删除元素和最后一个元素交换\n          // C++ 中有 std::move 这样的操作，避免数据的拷贝\n          // @see https://github.com/turanszkij/WickedEngine/blob/master/WickedEngine/wiECS.h#L169\n          this.components[componentIndex] = this.components[this.components.length - 1];\n          this.entities[componentIndex] = this.entities[this.entities.length - 1];\n          this.lookup[this.entities[componentIndex]] = componentIndex;\n        }\n      }\n\n      // 待删除元素已经移动到了最后一个\n      this.components.pop();\n      this.entities.pop();\n      delete this.lookup[entity];\n    }\n  }, {\n    key: \"removeKeepSorted\",\n    value: function removeKeepSorted(entity) {\n      var componentIndex = this.lookup[entity];\n      if (componentIndex > -1) {\n        var entity2 = this.entities[componentIndex];\n        if (componentIndex < this.components.length - 1) {\n          // Move every component left by one that is after this element:\n          for (var _i = componentIndex + 1; _i < this.components.length; ++_i) {\n            this.components[_i - 1] = this.components[_i];\n          }\n          // Move every entity left by one that is after this element and update lut:\n          for (var _i2 = componentIndex + 1; _i2 < this.entities.length; ++_i2) {\n            this.entities[_i2 - 1] = this.entities[_i2];\n            this.lookup[this.entities[_i2 - 1]] = _i2 - 1;\n          }\n        }\n        this.components.pop();\n        this.entities.pop();\n        delete this.lookup[entity2];\n      }\n    }\n  }, {\n    key: \"moveItem\",\n    value: function moveItem(srcIndex, destIndex) {\n      if (srcIndex === destIndex) {\n        return;\n      }\n\n      // Save the moved component and entity:\n      var srcComponent = this.components[srcIndex];\n      var srcEntity = this.entities[srcIndex];\n\n      // Every other entity-component that's in the way gets moved by one and lut is kept updated:\n      var direction = srcIndex < destIndex ? 1 : -1;\n      for (var _i3 = srcIndex; _i3 !== destIndex; _i3 += direction) {\n        var next = _i3 + direction;\n        this.components[_i3] = this.components[next];\n        this.entities[_i3] = this.entities[next];\n        this.lookup[this.entities[_i3]] = _i3;\n      }\n\n      // Saved entity-component moved to the required position:\n      this.components[destIndex] = srcComponent;\n      this.entities[destIndex] = srcEntity;\n      this.lookup[srcEntity] = destIndex;\n    }\n  }, {\n    key: \"getEntity\",\n    value: function getEntity(index) {\n      return this.entities[index];\n    }\n\n    /**\n     * 由于缺少类似 C++ 的重载操作符，没法通过 [下标] 直接访问。因此只能增加该方法用于遍历。\n     */\n  }, {\n    key: \"getComponent\",\n    value: function getComponent(index) {\n      return this.components[index];\n    }\n  }, {\n    key: \"getComponentByEntity\",\n    value: function getComponentByEntity(entity) {\n      var componentIndex = this.lookup[entity];\n      if (componentIndex > -1) {\n        return this.components[componentIndex];\n      }\n      return null;\n    }\n  }, {\n    key: \"getCount\",\n    value: function getCount() {\n      return this.components.length;\n    }\n  }, {\n    key: \"getEntityByComponentIndex\",\n    value: function getEntityByComponentIndex(componentIdx) {\n      for (var _i4 = 0, _Object$keys = Object.keys(this.lookup); _i4 < _Object$keys.length; _i4++) {\n        var _entity = _Object$keys[_i4];\n        var entityInNum = Number(_entity);\n        if (this.lookup[entityInNum] === componentIdx) {\n          return entityInNum;\n        }\n      }\n      return EMPTY;\n    }\n  }, {\n    key: \"find\",\n    value: function find(callback) {\n      for (var _i5 = 0; _i5 < this.getCount(); _i5++) {\n        var _component = this.getComponent(_i5);\n        if (callback(_component, _i5)) {\n          return _component;\n        }\n      }\n      return null;\n    }\n  }, {\n    key: \"findIndex\",\n    value: function findIndex(callback) {\n      for (var _i6 = 0; _i6 < this.getCount(); _i6++) {\n        var _component2 = this.getComponent(_i6);\n        if (callback(_component2, _i6)) {\n          return _i6;\n        }\n      }\n      return -1;\n    }\n  }, {\n    key: \"forEach\",\n    value: function forEach(callback) {\n      for (var _i7 = 0, _Object$keys2 = Object.keys(this.lookup); _i7 < _Object$keys2.length; _i7++) {\n        var _entity2 = _Object$keys2[_i7];\n        var entityInNum = Number(_entity2);\n        var componentIndex = this.lookup[entityInNum];\n        callback(entityInNum, this.getComponent(componentIndex));\n      }\n    }\n  }, {\n    key: \"forEachAsync\",\n    value: function () {\n      var _forEachAsync = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(callback) {\n        var _i8, _Object$keys3, _entity3, entityInNum, componentIndex;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _i8 = 0, _Object$keys3 = Object.keys(this.lookup);\n              case 1:\n                if (!(_i8 < _Object$keys3.length)) {\n                  _context.next = 10;\n                  break;\n                }\n                _entity3 = _Object$keys3[_i8];\n                entityInNum = Number(_entity3);\n                componentIndex = this.lookup[entityInNum];\n                _context.next = 7;\n                return callback(entityInNum, this.getComponent(componentIndex));\n              case 7:\n                _i8++;\n                _context.next = 1;\n                break;\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function forEachAsync(_x) {\n        return _forEachAsync.apply(this, arguments);\n      }\n      return forEachAsync;\n    }()\n  }, {\n    key: \"map\",\n    value: function map(callback) {\n      var result = [];\n      for (var _i9 = 0, _Object$keys4 = Object.keys(this.lookup); _i9 < _Object$keys4.length; _i9++) {\n        var _entity4 = _Object$keys4[_i9];\n        var entityInNum = Number(_entity4);\n        var componentIndex = this.lookup[entityInNum];\n        result.push(callback(entityInNum, this.getComponent(componentIndex)));\n      }\n      return result;\n    }\n  }]);\n  return ComponentManager;\n}();\n//# sourceMappingURL=ComponentManager.js.map","/**\n * WebGL 枚举值\n * @see http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14\n * 使用 babel 插件对常量进行内联，以减少最终打包产物大小\n * @see https://github.com/uber/deck.gl/blob/7.1-release/dev-docs/roadmaps/dist-size-roadmap.md#inline-gl-constants\n * 为了支持 WebGPU，新增 TextureUsage\n * @see https://gpuweb.github.io/gpuweb/#gputextureusage\n */\nexport var gl;\n(function (gl) {\n  gl[gl[\"DEPTH_BUFFER_BIT\"] = 256] = \"DEPTH_BUFFER_BIT\";\n  gl[gl[\"STENCIL_BUFFER_BIT\"] = 1024] = \"STENCIL_BUFFER_BIT\";\n  gl[gl[\"COLOR_BUFFER_BIT\"] = 16384] = \"COLOR_BUFFER_BIT\";\n  gl[gl[\"POINTS\"] = 0] = \"POINTS\";\n  gl[gl[\"LINES\"] = 1] = \"LINES\";\n  gl[gl[\"LINE_LOOP\"] = 2] = \"LINE_LOOP\";\n  gl[gl[\"LINE_STRIP\"] = 3] = \"LINE_STRIP\";\n  gl[gl[\"TRIANGLES\"] = 4] = \"TRIANGLES\";\n  gl[gl[\"TRIANGLE_STRIP\"] = 5] = \"TRIANGLE_STRIP\";\n  gl[gl[\"TRIANGLE_FAN\"] = 6] = \"TRIANGLE_FAN\";\n  gl[gl[\"ZERO\"] = 0] = \"ZERO\";\n  gl[gl[\"ONE\"] = 1] = \"ONE\";\n  gl[gl[\"SRC_COLOR\"] = 768] = \"SRC_COLOR\";\n  gl[gl[\"ONE_MINUS_SRC_COLOR\"] = 769] = \"ONE_MINUS_SRC_COLOR\";\n  gl[gl[\"SRC_ALPHA\"] = 770] = \"SRC_ALPHA\";\n  gl[gl[\"ONE_MINUS_SRC_ALPHA\"] = 771] = \"ONE_MINUS_SRC_ALPHA\";\n  gl[gl[\"DST_ALPHA\"] = 772] = \"DST_ALPHA\";\n  gl[gl[\"ONE_MINUS_DST_ALPHA\"] = 773] = \"ONE_MINUS_DST_ALPHA\";\n  gl[gl[\"DST_COLOR\"] = 774] = \"DST_COLOR\";\n  gl[gl[\"ONE_MINUS_DST_COLOR\"] = 775] = \"ONE_MINUS_DST_COLOR\";\n  gl[gl[\"SRC_ALPHA_SATURATE\"] = 776] = \"SRC_ALPHA_SATURATE\";\n  gl[gl[\"FUNC_ADD\"] = 32774] = \"FUNC_ADD\";\n  gl[gl[\"BLEND_EQUATION\"] = 32777] = \"BLEND_EQUATION\";\n  gl[gl[\"BLEND_EQUATION_RGB\"] = 32777] = \"BLEND_EQUATION_RGB\";\n  gl[gl[\"BLEND_EQUATION_ALPHA\"] = 34877] = \"BLEND_EQUATION_ALPHA\";\n  gl[gl[\"FUNC_SUBTRACT\"] = 32778] = \"FUNC_SUBTRACT\";\n  gl[gl[\"FUNC_REVERSE_SUBTRACT\"] = 32779] = \"FUNC_REVERSE_SUBTRACT\";\n  gl[gl[\"MAX_EXT\"] = 32776] = \"MAX_EXT\";\n  gl[gl[\"MIN_EXT\"] = 32775] = \"MIN_EXT\";\n  gl[gl[\"BLEND_DST_RGB\"] = 32968] = \"BLEND_DST_RGB\";\n  gl[gl[\"BLEND_SRC_RGB\"] = 32969] = \"BLEND_SRC_RGB\";\n  gl[gl[\"BLEND_DST_ALPHA\"] = 32970] = \"BLEND_DST_ALPHA\";\n  gl[gl[\"BLEND_SRC_ALPHA\"] = 32971] = \"BLEND_SRC_ALPHA\";\n  gl[gl[\"CONSTANT_COLOR\"] = 32769] = \"CONSTANT_COLOR\";\n  gl[gl[\"ONE_MINUS_CONSTANT_COLOR\"] = 32770] = \"ONE_MINUS_CONSTANT_COLOR\";\n  gl[gl[\"CONSTANT_ALPHA\"] = 32771] = \"CONSTANT_ALPHA\";\n  gl[gl[\"ONE_MINUS_CONSTANT_ALPHA\"] = 32772] = \"ONE_MINUS_CONSTANT_ALPHA\";\n  gl[gl[\"BLEND_COLOR\"] = 32773] = \"BLEND_COLOR\";\n  gl[gl[\"ARRAY_BUFFER\"] = 34962] = \"ARRAY_BUFFER\";\n  gl[gl[\"ELEMENT_ARRAY_BUFFER\"] = 34963] = \"ELEMENT_ARRAY_BUFFER\";\n  gl[gl[\"ARRAY_BUFFER_BINDING\"] = 34964] = \"ARRAY_BUFFER_BINDING\";\n  gl[gl[\"ELEMENT_ARRAY_BUFFER_BINDING\"] = 34965] = \"ELEMENT_ARRAY_BUFFER_BINDING\";\n  gl[gl[\"STREAM_DRAW\"] = 35040] = \"STREAM_DRAW\";\n  gl[gl[\"STATIC_DRAW\"] = 35044] = \"STATIC_DRAW\";\n  gl[gl[\"DYNAMIC_DRAW\"] = 35048] = \"DYNAMIC_DRAW\";\n  gl[gl[\"BUFFER_SIZE\"] = 34660] = \"BUFFER_SIZE\";\n  gl[gl[\"BUFFER_USAGE\"] = 34661] = \"BUFFER_USAGE\";\n  gl[gl[\"CURRENT_VERTEX_ATTRIB\"] = 34342] = \"CURRENT_VERTEX_ATTRIB\";\n  gl[gl[\"FRONT\"] = 1028] = \"FRONT\";\n  gl[gl[\"BACK\"] = 1029] = \"BACK\";\n  gl[gl[\"FRONT_AND_BACK\"] = 1032] = \"FRONT_AND_BACK\";\n  gl[gl[\"CULL_FACE\"] = 2884] = \"CULL_FACE\";\n  gl[gl[\"BLEND\"] = 3042] = \"BLEND\";\n  gl[gl[\"DITHER\"] = 3024] = \"DITHER\";\n  gl[gl[\"STENCIL_TEST\"] = 2960] = \"STENCIL_TEST\";\n  gl[gl[\"DEPTH_TEST\"] = 2929] = \"DEPTH_TEST\";\n  gl[gl[\"SCISSOR_TEST\"] = 3089] = \"SCISSOR_TEST\";\n  gl[gl[\"POLYGON_OFFSET_FILL\"] = 32823] = \"POLYGON_OFFSET_FILL\";\n  gl[gl[\"SAMPLE_ALPHA_TO_COVERAGE\"] = 32926] = \"SAMPLE_ALPHA_TO_COVERAGE\";\n  gl[gl[\"SAMPLE_COVERAGE\"] = 32928] = \"SAMPLE_COVERAGE\";\n  gl[gl[\"NO_ERROR\"] = 0] = \"NO_ERROR\";\n  gl[gl[\"INVALID_ENUM\"] = 1280] = \"INVALID_ENUM\";\n  gl[gl[\"INVALID_VALUE\"] = 1281] = \"INVALID_VALUE\";\n  gl[gl[\"INVALID_OPERATION\"] = 1282] = \"INVALID_OPERATION\";\n  gl[gl[\"OUT_OF_MEMORY\"] = 1285] = \"OUT_OF_MEMORY\";\n  gl[gl[\"CW\"] = 2304] = \"CW\";\n  gl[gl[\"CCW\"] = 2305] = \"CCW\";\n  gl[gl[\"LINE_WIDTH\"] = 2849] = \"LINE_WIDTH\";\n  gl[gl[\"ALIASED_POINT_SIZE_RANGE\"] = 33901] = \"ALIASED_POINT_SIZE_RANGE\";\n  gl[gl[\"ALIASED_LINE_WIDTH_RANGE\"] = 33902] = \"ALIASED_LINE_WIDTH_RANGE\";\n  gl[gl[\"CULL_FACE_MODE\"] = 2885] = \"CULL_FACE_MODE\";\n  gl[gl[\"FRONT_FACE\"] = 2886] = \"FRONT_FACE\";\n  gl[gl[\"DEPTH_RANGE\"] = 2928] = \"DEPTH_RANGE\";\n  gl[gl[\"DEPTH_WRITEMASK\"] = 2930] = \"DEPTH_WRITEMASK\";\n  gl[gl[\"DEPTH_CLEAR_VALUE\"] = 2931] = \"DEPTH_CLEAR_VALUE\";\n  gl[gl[\"DEPTH_FUNC\"] = 2932] = \"DEPTH_FUNC\";\n  gl[gl[\"STENCIL_CLEAR_VALUE\"] = 2961] = \"STENCIL_CLEAR_VALUE\";\n  gl[gl[\"STENCIL_FUNC\"] = 2962] = \"STENCIL_FUNC\";\n  gl[gl[\"STENCIL_FAIL\"] = 2964] = \"STENCIL_FAIL\";\n  gl[gl[\"STENCIL_PASS_DEPTH_FAIL\"] = 2965] = \"STENCIL_PASS_DEPTH_FAIL\";\n  gl[gl[\"STENCIL_PASS_DEPTH_PASS\"] = 2966] = \"STENCIL_PASS_DEPTH_PASS\";\n  gl[gl[\"STENCIL_REF\"] = 2967] = \"STENCIL_REF\";\n  gl[gl[\"STENCIL_VALUE_MASK\"] = 2963] = \"STENCIL_VALUE_MASK\";\n  gl[gl[\"STENCIL_WRITEMASK\"] = 2968] = \"STENCIL_WRITEMASK\";\n  gl[gl[\"STENCIL_BACK_FUNC\"] = 34816] = \"STENCIL_BACK_FUNC\";\n  gl[gl[\"STENCIL_BACK_FAIL\"] = 34817] = \"STENCIL_BACK_FAIL\";\n  gl[gl[\"STENCIL_BACK_PASS_DEPTH_FAIL\"] = 34818] = \"STENCIL_BACK_PASS_DEPTH_FAIL\";\n  gl[gl[\"STENCIL_BACK_PASS_DEPTH_PASS\"] = 34819] = \"STENCIL_BACK_PASS_DEPTH_PASS\";\n  gl[gl[\"STENCIL_BACK_REF\"] = 36003] = \"STENCIL_BACK_REF\";\n  gl[gl[\"STENCIL_BACK_VALUE_MASK\"] = 36004] = \"STENCIL_BACK_VALUE_MASK\";\n  gl[gl[\"STENCIL_BACK_WRITEMASK\"] = 36005] = \"STENCIL_BACK_WRITEMASK\";\n  gl[gl[\"VIEWPORT\"] = 2978] = \"VIEWPORT\";\n  gl[gl[\"SCISSOR_BOX\"] = 3088] = \"SCISSOR_BOX\";\n  gl[gl[\"COLOR_CLEAR_VALUE\"] = 3106] = \"COLOR_CLEAR_VALUE\";\n  gl[gl[\"COLOR_WRITEMASK\"] = 3107] = \"COLOR_WRITEMASK\";\n  gl[gl[\"UNPACK_ALIGNMENT\"] = 3317] = \"UNPACK_ALIGNMENT\";\n  gl[gl[\"PACK_ALIGNMENT\"] = 3333] = \"PACK_ALIGNMENT\";\n  gl[gl[\"MAX_TEXTURE_SIZE\"] = 3379] = \"MAX_TEXTURE_SIZE\";\n  gl[gl[\"MAX_VIEWPORT_DIMS\"] = 3386] = \"MAX_VIEWPORT_DIMS\";\n  gl[gl[\"SUBPIXEL_BITS\"] = 3408] = \"SUBPIXEL_BITS\";\n  gl[gl[\"RED_BITS\"] = 3410] = \"RED_BITS\";\n  gl[gl[\"GREEN_BITS\"] = 3411] = \"GREEN_BITS\";\n  gl[gl[\"BLUE_BITS\"] = 3412] = \"BLUE_BITS\";\n  gl[gl[\"ALPHA_BITS\"] = 3413] = \"ALPHA_BITS\";\n  gl[gl[\"DEPTH_BITS\"] = 3414] = \"DEPTH_BITS\";\n  gl[gl[\"STENCIL_BITS\"] = 3415] = \"STENCIL_BITS\";\n  gl[gl[\"POLYGON_OFFSET_UNITS\"] = 10752] = \"POLYGON_OFFSET_UNITS\";\n  gl[gl[\"POLYGON_OFFSET_FACTOR\"] = 32824] = \"POLYGON_OFFSET_FACTOR\";\n  gl[gl[\"TEXTURE_BINDING_2D\"] = 32873] = \"TEXTURE_BINDING_2D\";\n  gl[gl[\"SAMPLE_BUFFERS\"] = 32936] = \"SAMPLE_BUFFERS\";\n  gl[gl[\"SAMPLES\"] = 32937] = \"SAMPLES\";\n  gl[gl[\"SAMPLE_COVERAGE_VALUE\"] = 32938] = \"SAMPLE_COVERAGE_VALUE\";\n  gl[gl[\"SAMPLE_COVERAGE_INVERT\"] = 32939] = \"SAMPLE_COVERAGE_INVERT\";\n  gl[gl[\"COMPRESSED_TEXTURE_FORMATS\"] = 34467] = \"COMPRESSED_TEXTURE_FORMATS\";\n  gl[gl[\"DONT_CARE\"] = 4352] = \"DONT_CARE\";\n  gl[gl[\"FASTEST\"] = 4353] = \"FASTEST\";\n  gl[gl[\"NICEST\"] = 4354] = \"NICEST\";\n  gl[gl[\"GENERATE_MIPMAP_HINT\"] = 33170] = \"GENERATE_MIPMAP_HINT\";\n  gl[gl[\"BYTE\"] = 5120] = \"BYTE\";\n  gl[gl[\"UNSIGNED_BYTE\"] = 5121] = \"UNSIGNED_BYTE\";\n  gl[gl[\"SHORT\"] = 5122] = \"SHORT\";\n  gl[gl[\"UNSIGNED_SHORT\"] = 5123] = \"UNSIGNED_SHORT\";\n  gl[gl[\"INT\"] = 5124] = \"INT\";\n  gl[gl[\"UNSIGNED_INT\"] = 5125] = \"UNSIGNED_INT\";\n  gl[gl[\"FLOAT\"] = 5126] = \"FLOAT\";\n  gl[gl[\"DEPTH_COMPONENT\"] = 6402] = \"DEPTH_COMPONENT\";\n  gl[gl[\"ALPHA\"] = 6406] = \"ALPHA\";\n  gl[gl[\"RGB\"] = 6407] = \"RGB\";\n  gl[gl[\"RGBA\"] = 6408] = \"RGBA\";\n  gl[gl[\"LUMINANCE\"] = 6409] = \"LUMINANCE\";\n  gl[gl[\"LUMINANCE_ALPHA\"] = 6410] = \"LUMINANCE_ALPHA\";\n  gl[gl[\"UNSIGNED_SHORT_4_4_4_4\"] = 32819] = \"UNSIGNED_SHORT_4_4_4_4\";\n  gl[gl[\"UNSIGNED_SHORT_5_5_5_1\"] = 32820] = \"UNSIGNED_SHORT_5_5_5_1\";\n  gl[gl[\"UNSIGNED_SHORT_5_6_5\"] = 33635] = \"UNSIGNED_SHORT_5_6_5\";\n  gl[gl[\"FRAGMENT_SHADER\"] = 35632] = \"FRAGMENT_SHADER\";\n  gl[gl[\"VERTEX_SHADER\"] = 35633] = \"VERTEX_SHADER\";\n  gl[gl[\"MAX_VERTEX_ATTRIBS\"] = 34921] = \"MAX_VERTEX_ATTRIBS\";\n  gl[gl[\"MAX_VERTEX_UNIFORM_VECTORS\"] = 36347] = \"MAX_VERTEX_UNIFORM_VECTORS\";\n  gl[gl[\"MAX_VARYING_VECTORS\"] = 36348] = \"MAX_VARYING_VECTORS\";\n  gl[gl[\"MAX_COMBINED_TEXTURE_IMAGE_UNITS\"] = 35661] = \"MAX_COMBINED_TEXTURE_IMAGE_UNITS\";\n  gl[gl[\"MAX_VERTEX_TEXTURE_IMAGE_UNITS\"] = 35660] = \"MAX_VERTEX_TEXTURE_IMAGE_UNITS\";\n  gl[gl[\"MAX_TEXTURE_IMAGE_UNITS\"] = 34930] = \"MAX_TEXTURE_IMAGE_UNITS\";\n  gl[gl[\"MAX_FRAGMENT_UNIFORM_VECTORS\"] = 36349] = \"MAX_FRAGMENT_UNIFORM_VECTORS\";\n  gl[gl[\"SHADER_TYPE\"] = 35663] = \"SHADER_TYPE\";\n  gl[gl[\"DELETE_STATUS\"] = 35712] = \"DELETE_STATUS\";\n  gl[gl[\"LINK_STATUS\"] = 35714] = \"LINK_STATUS\";\n  gl[gl[\"VALIDATE_STATUS\"] = 35715] = \"VALIDATE_STATUS\";\n  gl[gl[\"ATTACHED_SHADERS\"] = 35717] = \"ATTACHED_SHADERS\";\n  gl[gl[\"ACTIVE_UNIFORMS\"] = 35718] = \"ACTIVE_UNIFORMS\";\n  gl[gl[\"ACTIVE_ATTRIBUTES\"] = 35721] = \"ACTIVE_ATTRIBUTES\";\n  gl[gl[\"SHADING_LANGUAGE_VERSION\"] = 35724] = \"SHADING_LANGUAGE_VERSION\";\n  gl[gl[\"CURRENT_PROGRAM\"] = 35725] = \"CURRENT_PROGRAM\";\n  gl[gl[\"NEVER\"] = 512] = \"NEVER\";\n  gl[gl[\"LESS\"] = 513] = \"LESS\";\n  gl[gl[\"EQUAL\"] = 514] = \"EQUAL\";\n  gl[gl[\"LEQUAL\"] = 515] = \"LEQUAL\";\n  gl[gl[\"GREATER\"] = 516] = \"GREATER\";\n  gl[gl[\"NOTEQUAL\"] = 517] = \"NOTEQUAL\";\n  gl[gl[\"GEQUAL\"] = 518] = \"GEQUAL\";\n  gl[gl[\"ALWAYS\"] = 519] = \"ALWAYS\";\n  gl[gl[\"KEEP\"] = 7680] = \"KEEP\";\n  gl[gl[\"REPLACE\"] = 7681] = \"REPLACE\";\n  gl[gl[\"INCR\"] = 7682] = \"INCR\";\n  gl[gl[\"DECR\"] = 7683] = \"DECR\";\n  gl[gl[\"INVERT\"] = 5386] = \"INVERT\";\n  gl[gl[\"INCR_WRAP\"] = 34055] = \"INCR_WRAP\";\n  gl[gl[\"DECR_WRAP\"] = 34056] = \"DECR_WRAP\";\n  gl[gl[\"VENDOR\"] = 7936] = \"VENDOR\";\n  gl[gl[\"RENDERER\"] = 7937] = \"RENDERER\";\n  gl[gl[\"VERSION\"] = 7938] = \"VERSION\";\n  gl[gl[\"NEAREST\"] = 9728] = \"NEAREST\";\n  gl[gl[\"LINEAR\"] = 9729] = \"LINEAR\";\n  gl[gl[\"NEAREST_MIPMAP_NEAREST\"] = 9984] = \"NEAREST_MIPMAP_NEAREST\";\n  gl[gl[\"LINEAR_MIPMAP_NEAREST\"] = 9985] = \"LINEAR_MIPMAP_NEAREST\";\n  gl[gl[\"NEAREST_MIPMAP_LINEAR\"] = 9986] = \"NEAREST_MIPMAP_LINEAR\";\n  gl[gl[\"LINEAR_MIPMAP_LINEAR\"] = 9987] = \"LINEAR_MIPMAP_LINEAR\";\n  gl[gl[\"TEXTURE_MAG_FILTER\"] = 10240] = \"TEXTURE_MAG_FILTER\";\n  gl[gl[\"TEXTURE_MIN_FILTER\"] = 10241] = \"TEXTURE_MIN_FILTER\";\n  gl[gl[\"TEXTURE_WRAP_S\"] = 10242] = \"TEXTURE_WRAP_S\";\n  gl[gl[\"TEXTURE_WRAP_T\"] = 10243] = \"TEXTURE_WRAP_T\";\n  gl[gl[\"TEXTURE_2D\"] = 3553] = \"TEXTURE_2D\";\n  gl[gl[\"TEXTURE\"] = 5890] = \"TEXTURE\";\n  gl[gl[\"TEXTURE_CUBE_MAP\"] = 34067] = \"TEXTURE_CUBE_MAP\";\n  gl[gl[\"TEXTURE_BINDING_CUBE_MAP\"] = 34068] = \"TEXTURE_BINDING_CUBE_MAP\";\n  gl[gl[\"TEXTURE_CUBE_MAP_POSITIVE_X\"] = 34069] = \"TEXTURE_CUBE_MAP_POSITIVE_X\";\n  gl[gl[\"TEXTURE_CUBE_MAP_NEGATIVE_X\"] = 34070] = \"TEXTURE_CUBE_MAP_NEGATIVE_X\";\n  gl[gl[\"TEXTURE_CUBE_MAP_POSITIVE_Y\"] = 34071] = \"TEXTURE_CUBE_MAP_POSITIVE_Y\";\n  gl[gl[\"TEXTURE_CUBE_MAP_NEGATIVE_Y\"] = 34072] = \"TEXTURE_CUBE_MAP_NEGATIVE_Y\";\n  gl[gl[\"TEXTURE_CUBE_MAP_POSITIVE_Z\"] = 34073] = \"TEXTURE_CUBE_MAP_POSITIVE_Z\";\n  gl[gl[\"TEXTURE_CUBE_MAP_NEGATIVE_Z\"] = 34074] = \"TEXTURE_CUBE_MAP_NEGATIVE_Z\";\n  gl[gl[\"MAX_CUBE_MAP_TEXTURE_SIZE\"] = 34076] = \"MAX_CUBE_MAP_TEXTURE_SIZE\";\n  gl[gl[\"TEXTURE0\"] = 33984] = \"TEXTURE0\";\n  gl[gl[\"TEXTURE1\"] = 33985] = \"TEXTURE1\";\n  gl[gl[\"TEXTURE2\"] = 33986] = \"TEXTURE2\";\n  gl[gl[\"TEXTURE3\"] = 33987] = \"TEXTURE3\";\n  gl[gl[\"TEXTURE4\"] = 33988] = \"TEXTURE4\";\n  gl[gl[\"TEXTURE5\"] = 33989] = \"TEXTURE5\";\n  gl[gl[\"TEXTURE6\"] = 33990] = \"TEXTURE6\";\n  gl[gl[\"TEXTURE7\"] = 33991] = \"TEXTURE7\";\n  gl[gl[\"TEXTURE8\"] = 33992] = \"TEXTURE8\";\n  gl[gl[\"TEXTURE9\"] = 33993] = \"TEXTURE9\";\n  gl[gl[\"TEXTURE10\"] = 33994] = \"TEXTURE10\";\n  gl[gl[\"TEXTURE11\"] = 33995] = \"TEXTURE11\";\n  gl[gl[\"TEXTURE12\"] = 33996] = \"TEXTURE12\";\n  gl[gl[\"TEXTURE13\"] = 33997] = \"TEXTURE13\";\n  gl[gl[\"TEXTURE14\"] = 33998] = \"TEXTURE14\";\n  gl[gl[\"TEXTURE15\"] = 33999] = \"TEXTURE15\";\n  gl[gl[\"TEXTURE16\"] = 34000] = \"TEXTURE16\";\n  gl[gl[\"TEXTURE17\"] = 34001] = \"TEXTURE17\";\n  gl[gl[\"TEXTURE18\"] = 34002] = \"TEXTURE18\";\n  gl[gl[\"TEXTURE19\"] = 34003] = \"TEXTURE19\";\n  gl[gl[\"TEXTURE20\"] = 34004] = \"TEXTURE20\";\n  gl[gl[\"TEXTURE21\"] = 34005] = \"TEXTURE21\";\n  gl[gl[\"TEXTURE22\"] = 34006] = \"TEXTURE22\";\n  gl[gl[\"TEXTURE23\"] = 34007] = \"TEXTURE23\";\n  gl[gl[\"TEXTURE24\"] = 34008] = \"TEXTURE24\";\n  gl[gl[\"TEXTURE25\"] = 34009] = \"TEXTURE25\";\n  gl[gl[\"TEXTURE26\"] = 34010] = \"TEXTURE26\";\n  gl[gl[\"TEXTURE27\"] = 34011] = \"TEXTURE27\";\n  gl[gl[\"TEXTURE28\"] = 34012] = \"TEXTURE28\";\n  gl[gl[\"TEXTURE29\"] = 34013] = \"TEXTURE29\";\n  gl[gl[\"TEXTURE30\"] = 34014] = \"TEXTURE30\";\n  gl[gl[\"TEXTURE31\"] = 34015] = \"TEXTURE31\";\n  gl[gl[\"ACTIVE_TEXTURE\"] = 34016] = \"ACTIVE_TEXTURE\";\n  gl[gl[\"REPEAT\"] = 10497] = \"REPEAT\";\n  gl[gl[\"CLAMP_TO_EDGE\"] = 33071] = \"CLAMP_TO_EDGE\";\n  gl[gl[\"MIRRORED_REPEAT\"] = 33648] = \"MIRRORED_REPEAT\";\n  gl[gl[\"FLOAT_VEC2\"] = 35664] = \"FLOAT_VEC2\";\n  gl[gl[\"FLOAT_VEC3\"] = 35665] = \"FLOAT_VEC3\";\n  gl[gl[\"FLOAT_VEC4\"] = 35666] = \"FLOAT_VEC4\";\n  gl[gl[\"INT_VEC2\"] = 35667] = \"INT_VEC2\";\n  gl[gl[\"INT_VEC3\"] = 35668] = \"INT_VEC3\";\n  gl[gl[\"INT_VEC4\"] = 35669] = \"INT_VEC4\";\n  gl[gl[\"BOOL\"] = 35670] = \"BOOL\";\n  gl[gl[\"BOOL_VEC2\"] = 35671] = \"BOOL_VEC2\";\n  gl[gl[\"BOOL_VEC3\"] = 35672] = \"BOOL_VEC3\";\n  gl[gl[\"BOOL_VEC4\"] = 35673] = \"BOOL_VEC4\";\n  gl[gl[\"FLOAT_MAT2\"] = 35674] = \"FLOAT_MAT2\";\n  gl[gl[\"FLOAT_MAT3\"] = 35675] = \"FLOAT_MAT3\";\n  gl[gl[\"FLOAT_MAT4\"] = 35676] = \"FLOAT_MAT4\";\n  gl[gl[\"SAMPLER_2D\"] = 35678] = \"SAMPLER_2D\";\n  gl[gl[\"SAMPLER_CUBE\"] = 35680] = \"SAMPLER_CUBE\";\n  gl[gl[\"VERTEX_ATTRIB_ARRAY_ENABLED\"] = 34338] = \"VERTEX_ATTRIB_ARRAY_ENABLED\";\n  gl[gl[\"VERTEX_ATTRIB_ARRAY_SIZE\"] = 34339] = \"VERTEX_ATTRIB_ARRAY_SIZE\";\n  gl[gl[\"VERTEX_ATTRIB_ARRAY_STRIDE\"] = 34340] = \"VERTEX_ATTRIB_ARRAY_STRIDE\";\n  gl[gl[\"VERTEX_ATTRIB_ARRAY_TYPE\"] = 34341] = \"VERTEX_ATTRIB_ARRAY_TYPE\";\n  gl[gl[\"VERTEX_ATTRIB_ARRAY_NORMALIZED\"] = 34922] = \"VERTEX_ATTRIB_ARRAY_NORMALIZED\";\n  gl[gl[\"VERTEX_ATTRIB_ARRAY_POINTER\"] = 34373] = \"VERTEX_ATTRIB_ARRAY_POINTER\";\n  gl[gl[\"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING\"] = 34975] = \"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING\";\n  gl[gl[\"COMPILE_STATUS\"] = 35713] = \"COMPILE_STATUS\";\n  gl[gl[\"LOW_FLOAT\"] = 36336] = \"LOW_FLOAT\";\n  gl[gl[\"MEDIUM_FLOAT\"] = 36337] = \"MEDIUM_FLOAT\";\n  gl[gl[\"HIGH_FLOAT\"] = 36338] = \"HIGH_FLOAT\";\n  gl[gl[\"LOW_INT\"] = 36339] = \"LOW_INT\";\n  gl[gl[\"MEDIUM_INT\"] = 36340] = \"MEDIUM_INT\";\n  gl[gl[\"HIGH_INT\"] = 36341] = \"HIGH_INT\";\n  gl[gl[\"FRAMEBUFFER\"] = 36160] = \"FRAMEBUFFER\";\n  gl[gl[\"RENDERBUFFER\"] = 36161] = \"RENDERBUFFER\";\n  gl[gl[\"RGBA4\"] = 32854] = \"RGBA4\";\n  gl[gl[\"RGB5_A1\"] = 32855] = \"RGB5_A1\";\n  gl[gl[\"RGB565\"] = 36194] = \"RGB565\";\n  gl[gl[\"DEPTH_COMPONENT16\"] = 33189] = \"DEPTH_COMPONENT16\";\n  gl[gl[\"STENCIL_INDEX\"] = 6401] = \"STENCIL_INDEX\";\n  gl[gl[\"STENCIL_INDEX8\"] = 36168] = \"STENCIL_INDEX8\";\n  gl[gl[\"DEPTH_STENCIL\"] = 34041] = \"DEPTH_STENCIL\";\n  gl[gl[\"RENDERBUFFER_WIDTH\"] = 36162] = \"RENDERBUFFER_WIDTH\";\n  gl[gl[\"RENDERBUFFER_HEIGHT\"] = 36163] = \"RENDERBUFFER_HEIGHT\";\n  gl[gl[\"RENDERBUFFER_INTERNAL_FORMAT\"] = 36164] = \"RENDERBUFFER_INTERNAL_FORMAT\";\n  gl[gl[\"RENDERBUFFER_RED_SIZE\"] = 36176] = \"RENDERBUFFER_RED_SIZE\";\n  gl[gl[\"RENDERBUFFER_GREEN_SIZE\"] = 36177] = \"RENDERBUFFER_GREEN_SIZE\";\n  gl[gl[\"RENDERBUFFER_BLUE_SIZE\"] = 36178] = \"RENDERBUFFER_BLUE_SIZE\";\n  gl[gl[\"RENDERBUFFER_ALPHA_SIZE\"] = 36179] = \"RENDERBUFFER_ALPHA_SIZE\";\n  gl[gl[\"RENDERBUFFER_DEPTH_SIZE\"] = 36180] = \"RENDERBUFFER_DEPTH_SIZE\";\n  gl[gl[\"RENDERBUFFER_STENCIL_SIZE\"] = 36181] = \"RENDERBUFFER_STENCIL_SIZE\";\n  gl[gl[\"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE\"] = 36048] = \"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE\";\n  gl[gl[\"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME\"] = 36049] = \"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME\";\n  gl[gl[\"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL\"] = 36050] = \"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL\";\n  gl[gl[\"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE\"] = 36051] = \"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE\";\n  gl[gl[\"COLOR_ATTACHMENT0\"] = 36064] = \"COLOR_ATTACHMENT0\";\n  gl[gl[\"DEPTH_ATTACHMENT\"] = 36096] = \"DEPTH_ATTACHMENT\";\n  gl[gl[\"STENCIL_ATTACHMENT\"] = 36128] = \"STENCIL_ATTACHMENT\";\n  gl[gl[\"DEPTH_STENCIL_ATTACHMENT\"] = 33306] = \"DEPTH_STENCIL_ATTACHMENT\";\n  gl[gl[\"NONE\"] = 0] = \"NONE\";\n  gl[gl[\"FRAMEBUFFER_COMPLETE\"] = 36053] = \"FRAMEBUFFER_COMPLETE\";\n  gl[gl[\"FRAMEBUFFER_INCOMPLETE_ATTACHMENT\"] = 36054] = \"FRAMEBUFFER_INCOMPLETE_ATTACHMENT\";\n  gl[gl[\"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT\"] = 36055] = \"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT\";\n  gl[gl[\"FRAMEBUFFER_INCOMPLETE_DIMENSIONS\"] = 36057] = \"FRAMEBUFFER_INCOMPLETE_DIMENSIONS\";\n  gl[gl[\"FRAMEBUFFER_UNSUPPORTED\"] = 36061] = \"FRAMEBUFFER_UNSUPPORTED\";\n  gl[gl[\"FRAMEBUFFER_BINDING\"] = 36006] = \"FRAMEBUFFER_BINDING\";\n  gl[gl[\"RENDERBUFFER_BINDING\"] = 36007] = \"RENDERBUFFER_BINDING\";\n  gl[gl[\"MAX_RENDERBUFFER_SIZE\"] = 34024] = \"MAX_RENDERBUFFER_SIZE\";\n  gl[gl[\"INVALID_FRAMEBUFFER_OPERATION\"] = 1286] = \"INVALID_FRAMEBUFFER_OPERATION\";\n  gl[gl[\"UNPACK_FLIP_Y_WEBGL\"] = 37440] = \"UNPACK_FLIP_Y_WEBGL\";\n  gl[gl[\"UNPACK_PREMULTIPLY_ALPHA_WEBGL\"] = 37441] = \"UNPACK_PREMULTIPLY_ALPHA_WEBGL\";\n  gl[gl[\"CONTEXT_LOST_WEBGL\"] = 37442] = \"CONTEXT_LOST_WEBGL\";\n  gl[gl[\"UNPACK_COLORSPACE_CONVERSION_WEBGL\"] = 37443] = \"UNPACK_COLORSPACE_CONVERSION_WEBGL\";\n  gl[gl[\"BROWSER_DEFAULT_WEBGL\"] = 37444] = \"BROWSER_DEFAULT_WEBGL\";\n  gl[gl[\"COPY_SRC\"] = 1] = \"COPY_SRC\";\n  gl[gl[\"COPY_DST\"] = 2] = \"COPY_DST\";\n  gl[gl[\"SAMPLED\"] = 4] = \"SAMPLED\";\n  gl[gl[\"STORAGE\"] = 8] = \"STORAGE\";\n  gl[gl[\"RENDER_ATTACHMENT\"] = 16] = \"RENDER_ATTACHMENT\";\n})(gl || (gl = {}));\n//# sourceMappingURL=gl.js.map","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nexport var ConfigService = /*#__PURE__*/function () {\n  function ConfigService() {\n    _classCallCheck(this, ConfigService);\n    this.config = void 0;\n  }\n  _createClass(ConfigService, [{\n    key: \"get\",\n    value: function get() {\n      return this.config;\n    }\n  }, {\n    key: \"set\",\n    value: function set(config) {\n      this.config = config;\n    }\n  }]);\n  return ConfigService;\n}();\n//# sourceMappingURL=ConfigService.js.map","import { Component, ComponentManager } from './ComponentManager';\nimport { gl } from './components/renderer/gl';\nimport { createEntity } from './Entity';\nimport { ConfigService } from './services/config/ConfigService';\nimport { isSafari } from './utils/isSafari';\nvar AST_TOKEN_TYPES;\n(function (AST_TOKEN_TYPES) {\n  AST_TOKEN_TYPES[\"Void\"] = \"Void\";\n  AST_TOKEN_TYPES[\"Boolean\"] = \"Boolean\";\n  AST_TOKEN_TYPES[\"Float\"] = \"Float\";\n  AST_TOKEN_TYPES[\"Uint32\"] = \"Uint32\";\n  AST_TOKEN_TYPES[\"Int32\"] = \"Int32\";\n  AST_TOKEN_TYPES[\"Vector\"] = \"Vector\";\n  AST_TOKEN_TYPES[\"Vector2Float\"] = \"vec2<f32>\";\n  AST_TOKEN_TYPES[\"Vector3Float\"] = \"vec3<f32>\";\n  AST_TOKEN_TYPES[\"Vector4Float\"] = \"vec4<f32>\";\n  AST_TOKEN_TYPES[\"Vector2Boolean\"] = \"vec2<bool>\";\n  AST_TOKEN_TYPES[\"Vector3Boolean\"] = \"vec3<bool>\";\n  AST_TOKEN_TYPES[\"Vector4Boolean\"] = \"vec4<bool>\";\n  AST_TOKEN_TYPES[\"Vector2Uint\"] = \"vec2<u32>\";\n  AST_TOKEN_TYPES[\"Vector3Uint\"] = \"vec3<u32>\";\n  AST_TOKEN_TYPES[\"Vector4Uint\"] = \"vec4<u32>\";\n  AST_TOKEN_TYPES[\"Vector2Int\"] = \"vec2<i32>\";\n  AST_TOKEN_TYPES[\"Vector3Int\"] = \"vec3<i32>\";\n  AST_TOKEN_TYPES[\"Vector4Int\"] = \"vec4<i32>\";\n  AST_TOKEN_TYPES[\"Matrix\"] = \"Matrix\";\n  AST_TOKEN_TYPES[\"Matrix3x3Float\"] = \"mat3x3<f32>\";\n  AST_TOKEN_TYPES[\"Matrix4x4Float\"] = \"mat4x4<i32>\";\n  AST_TOKEN_TYPES[\"Struct\"] = \"Struct\";\n  AST_TOKEN_TYPES[\"FloatArray\"] = \"Float[]\";\n  AST_TOKEN_TYPES[\"Vector4FloatArray\"] = \"vec4<f32>[]\";\n})(AST_TOKEN_TYPES || (AST_TOKEN_TYPES = {}));\nvar AST_NODE_TYPES;\n(function (AST_NODE_TYPES) {\n  AST_NODE_TYPES[\"Program\"] = \"Program\";\n  AST_NODE_TYPES[\"Identifier\"] = \"Identifier\";\n  AST_NODE_TYPES[\"VariableDeclaration\"] = \"VariableDeclaration\";\n  AST_NODE_TYPES[\"BlockStatement\"] = \"BlockStatement\";\n  AST_NODE_TYPES[\"ReturnStatement\"] = \"ReturnStatement\";\n  AST_NODE_TYPES[\"FunctionDeclaration\"] = \"FunctionDeclaration\";\n  AST_NODE_TYPES[\"VariableDeclarator\"] = \"VariableDeclarator\";\n  AST_NODE_TYPES[\"AssignmentExpression\"] = \"AssignmentExpression\";\n  AST_NODE_TYPES[\"LogicalExpression\"] = \"LogicalExpression\";\n  AST_NODE_TYPES[\"BinaryExpression\"] = \"BinaryExpression\";\n  AST_NODE_TYPES[\"ArrayExpression\"] = \"ArrayExpression\";\n  AST_NODE_TYPES[\"UnaryExpression\"] = \"UnaryExpression\";\n  AST_NODE_TYPES[\"UpdateExpression\"] = \"UpdateExpression\";\n  AST_NODE_TYPES[\"FunctionExpression\"] = \"FunctionExpression\";\n  AST_NODE_TYPES[\"MemberExpression\"] = \"MemberExpression\";\n  AST_NODE_TYPES[\"ConditionalExpression\"] = \"ConditionalExpression\";\n  AST_NODE_TYPES[\"ExpressionStatement\"] = \"ExpressionStatement\";\n  AST_NODE_TYPES[\"CallExpression\"] = \"CallExpression\";\n  AST_NODE_TYPES[\"NumThreadStatement\"] = \"NumThreadStatement\";\n  AST_NODE_TYPES[\"StorageStatement\"] = \"StorageStatement\";\n  AST_NODE_TYPES[\"DoWhileStatement\"] = \"DoWhileStatement\";\n  AST_NODE_TYPES[\"WhileStatement\"] = \"WhileStatement\";\n  AST_NODE_TYPES[\"ForStatement\"] = \"ForStatement\";\n  AST_NODE_TYPES[\"BreakStatement\"] = \"BreakStatement\";\n  AST_NODE_TYPES[\"ContinueStatement\"] = \"ContinueStatement\";\n  AST_NODE_TYPES[\"IfStatement\"] = \"IfStatement\";\n  AST_NODE_TYPES[\"ImportedFunctionStatement\"] = \"ImportedFunctionStatement\";\n})(AST_NODE_TYPES || (AST_NODE_TYPES = {}));\nvar STORAGE_CLASS;\n(function (STORAGE_CLASS) {\n  STORAGE_CLASS[\"Input\"] = \"Input\";\n  STORAGE_CLASS[\"Output\"] = \"Output\";\n  STORAGE_CLASS[\"Uniform\"] = \"Uniform\";\n  STORAGE_CLASS[\"Workgroup\"] = \"Workgroup\";\n  STORAGE_CLASS[\"UniformConstant\"] = \"UniformConstant\";\n  STORAGE_CLASS[\"Image\"] = \"Image\";\n  STORAGE_CLASS[\"StorageBuffer\"] = \"StorageBuffer\";\n  STORAGE_CLASS[\"Private\"] = \"Private\";\n  STORAGE_CLASS[\"Function\"] = \"Function\";\n})(STORAGE_CLASS || (STORAGE_CLASS = {}));\n/**\n * 根据目标平台生成 Shader 代码\n * * WebGL GLSL 1.0\n * * WebGPU Chrome/Edge GLSL 4.5 & WGSL @see https://gpuweb.github.io/gpuweb/wgsl.html\n * * Safari WHLSL (maybe deprecated)\n */\nvar Target;\n(function (Target) {\n  Target[\"GLSL100\"] = \"GLSL100\";\n  Target[\"GLSL450\"] = \"GLSL450\";\n  Target[\"WGSL\"] = \"WGSL\";\n})(Target || (Target = {}));\nvar DefineValuePlaceholder = '__DefineValuePlaceholder__';\nexport { createEntity, Component, ComponentManager, isSafari,\n// renderer service\ngl, ConfigService, AST_TOKEN_TYPES, AST_NODE_TYPES, STORAGE_CLASS, Target, DefineValuePlaceholder };\n//# sourceMappingURL=index.js.map","export var isSafari = typeof navigator !== 'undefined' && /Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent);\n//# sourceMappingURL=isSafari.js.map","import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _isTypedArray from \"lodash/isTypedArray\";\nimport _isNumber from \"lodash/isNumber\";\nimport _isArray from \"lodash/isArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { AST_TOKEN_TYPES, DefineValuePlaceholder, STORAGE_CLASS, Target } from '@antv/g-webgpu-core';\nimport { createCanvas } from './utils/canvas';\nexport var Kernel = /*#__PURE__*/function () {\n  function Kernel(engine, configService) {\n    _classCallCheck(this, Kernel);\n    this.engine = engine;\n    this.configService = configService;\n    this.model = void 0;\n    this.dirty = true;\n    this.compiledBundle = void 0;\n    this.initPromise = void 0;\n  }\n  _createClass(Kernel, [{\n    key: \"init\",\n    value: function init() {\n      var _this$configService$g = this.configService.get(),\n        canvas = _this$configService$g.canvas,\n        engineOptions = _this$configService$g.engineOptions;\n      this.initPromise = this.engine.init(_objectSpread({\n        canvas: canvas || createCanvas(),\n        // swapChainFormat: WebGPUConstants.TextureFormat.BGRA8Unorm,\n        antialiasing: false\n      }, engineOptions));\n    }\n  }, {\n    key: \"setBundle\",\n    value: function setBundle(bundle) {\n      // deep clone\n      this.compiledBundle = JSON.parse(JSON.stringify(bundle));\n    }\n  }, {\n    key: \"setDispatch\",\n    value: function setDispatch(dispatch) {\n      if (this.compiledBundle.context) {\n        this.compiledBundle.context.dispatch = dispatch;\n      }\n      return this;\n    }\n  }, {\n    key: \"setMaxIteration\",\n    value: function setMaxIteration(maxIteration) {\n      if (this.compiledBundle.context) {\n        this.compiledBundle.context.maxIteration = maxIteration;\n      }\n      return this;\n    }\n  }, {\n    key: \"setBinding\",\n    value: function setBinding(name, data) {\n      var _this = this;\n      if (typeof name === 'string') {\n        var isNumberLikeData = _isNumber(data) || _isTypedArray(data) || _isArray(data);\n        if (this.compiledBundle && this.compiledBundle.context) {\n          // set define, eg. setBinding('MAX_LENGTH', 10)\n          var existedDefine = this.compiledBundle.context.defines.find(function (b) {\n            return b.name === name;\n          });\n          if (existedDefine) {\n            existedDefine.value = data;\n            return this;\n          }\n\n          // set uniform\n          var existedBinding = this.compiledBundle.context.uniforms.find(function (b) {\n            return b.name === name;\n          });\n          if (existedBinding) {\n            // update uniform or buffer\n            if (isNumberLikeData) {\n              // @ts-ignore\n              existedBinding.data = data;\n              existedBinding.isReferer = false;\n              if (existedBinding.storageClass === STORAGE_CLASS.Uniform) {\n                if (this.model) {\n                  // @ts-ignore\n                  this.model.updateUniform(name, data);\n                }\n              } else {\n                if (this.model) {\n                  // @ts-ignore\n                  this.model.updateBuffer(name, data);\n                }\n              }\n            } else {\n              // update with another kernel\n              existedBinding.isReferer = true;\n              // @ts-ignore\n              existedBinding.data = data;\n            }\n          }\n        }\n      } else {\n        Object.keys(name).forEach(function (key) {\n          _this.setBinding(key, name[key]);\n        });\n      }\n      return this;\n    }\n  }, {\n    key: \"execute\",\n    value: function () {\n      var _execute = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n        var iteration,\n          i,\n          _args = arguments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                iteration = _args.length > 0 && _args[0] !== undefined ? _args[0] : 1;\n                if (!this.dirty) {\n                  _context.next = 6;\n                  break;\n                }\n                if (this.compiledBundle.context) {\n                  if (iteration > 1) {\n                    this.compiledBundle.context.maxIteration = iteration;\n                  } else {\n                    this.compiledBundle.context.maxIteration++;\n                  }\n                }\n                _context.next = 5;\n                return this.compile();\n              case 5:\n                this.dirty = false;\n              case 6:\n                this.engine.beginFrame();\n\n                // 首先开启当前 frame 的 compute pass\n                this.engine.clear({});\n                if (this.compiledBundle.context) {\n                  this.compiledBundle.context.uniforms.filter(function (_ref) {\n                    var isReferer = _ref.isReferer;\n                    return isReferer;\n                  }).forEach(function (_ref2) {\n                    var data = _ref2.data,\n                      name = _ref2.name;\n                    // @ts-ignore\n                    _this2.model.confirmInput(data.model, name);\n                  });\n                }\n                for (i = 0; i < iteration; i++) {\n                  this.model.run();\n                }\n                this.engine.endFrame();\n                return _context.abrupt(\"return\", this);\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n      function execute() {\n        return _execute.apply(this, arguments);\n      }\n      return execute;\n    }()\n    /**\n     * read output from GPUBuffer\n     */\n  }, {\n    key: \"getOutput\",\n    value: function () {\n      var _getOutput = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", this.model.readData());\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n      function getOutput() {\n        return _getOutput.apply(this, arguments);\n      }\n      return getOutput;\n    }()\n  }, {\n    key: \"compile\",\n    value: function () {\n      var _compile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var context, target, shader;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.initPromise;\n              case 2:\n                context = _objectSpread({}, this.compiledBundle.context);\n                target = this.engine.supportWebGPU ? this.engine.useWGSL ? Target.WGSL : Target.GLSL450 : Target.GLSL100;\n                shader = this.compiledBundle.shaders[target]; // this.bindings?.forEach(({ name, data }) => {\n                //   if (name === name.toUpperCase()) {\n                //     const define = context.defines.find((d) => d.name === name);\n                //     if (define) {\n                //       // @ts-ignore\n                //       define.value = data;\n                //     }\n                //   }\n                // });\n                // 生成运行时 define\n                context.defines.filter(function (define) {\n                  return define.runtime;\n                }).forEach(function (define) {\n                  var valuePlaceHolder = \"\".concat(DefineValuePlaceholder).concat(define.name);\n                  shader = shader.replace(valuePlaceHolder, \"\".concat(define.value));\n                });\n                context.shader = shader;\n\n                // 添加 uniform 绑定的数据\n                context.uniforms.forEach(function (uniform) {\n                  // const binding = this.bindings.find((b) => b.name === uniform.name);\n                  // if (binding) {\n                  //   // @ts-ignore\n                  //   uniform.data = binding.referer || binding.data;\n                  //   // @ts-ignore\n                  //   uniform.isReferer = !!binding.referer;\n                  // }\n\n                  // 未指定数据，尝试根据 uniform 类型初始化\n                  if (!uniform.data) {\n                    if (uniform.storageClass === STORAGE_CLASS.StorageBuffer) {\n                      var sizePerElement = 1;\n                      if (uniform.type === AST_TOKEN_TYPES.FloatArray) {\n                        sizePerElement = 1;\n                      } else if (uniform.type === AST_TOKEN_TYPES.Vector4FloatArray) {\n                        sizePerElement = 4;\n                      }\n                      uniform.data = new Float32Array(context.output.length * sizePerElement).fill(0);\n                    }\n                  }\n                });\n                // } else if (uniform.type === 'image2D') {\n                //   // @ts-ignore\n                //   buffer.data = new Uint8ClampedArray(context.output.length!).fill(0);\n                // }\n\n                this.compiledBundle.context = context;\n                _context3.next = 11;\n                return this.engine.createComputeModel(this.compiledBundle.context);\n              case 11:\n                this.model = _context3.sent;\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n      function compile() {\n        return _compile.apply(this, arguments);\n      }\n      return compile;\n    }()\n  }]);\n  return Kernel;\n}();\n//# sourceMappingURL=Kernel.js.map","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nvar _primitiveMap, _usageMap, _dataTypeMap, _formatMap, _mipmapMap, _filterMap, _wrapModeMap, _colorSpaceMap, _depthFuncMap, _blendEquationMap, _blendFuncMap, _stencilFuncMap, _stencilOpMap, _cullFaceMap;\n/**\n * @desc 由于 regl 使用大量字符串而非 WebGL 常量，因此需要映射\n */\nimport { gl } from '@antv/g-webgpu-core';\n// @see https://github.com/regl-project/regl/blob/gh-pages/lib/constants/primitives.json\nexport var primitiveMap = (_primitiveMap = {}, _defineProperty(_primitiveMap, gl.POINTS, 'points'), _defineProperty(_primitiveMap, gl.LINES, 'lines'), _defineProperty(_primitiveMap, gl.LINE_LOOP, 'line loop'), _defineProperty(_primitiveMap, gl.LINE_STRIP, 'line strip'), _defineProperty(_primitiveMap, gl.TRIANGLES, 'triangles'), _defineProperty(_primitiveMap, gl.TRIANGLE_FAN, 'triangle fan'), _defineProperty(_primitiveMap, gl.TRIANGLE_STRIP, 'triangle strip'), _primitiveMap);\nexport var usageMap = (_usageMap = {}, _defineProperty(_usageMap, gl.STATIC_DRAW, 'static'), _defineProperty(_usageMap, gl.DYNAMIC_DRAW, 'dynamic'), _defineProperty(_usageMap, gl.STREAM_DRAW, 'stream'), _usageMap);\nexport var dataTypeMap = (_dataTypeMap = {}, _defineProperty(_dataTypeMap, gl.BYTE, 'int8'), _defineProperty(_dataTypeMap, gl.UNSIGNED_INT, 'int16'), _defineProperty(_dataTypeMap, gl.INT, 'int32'), _defineProperty(_dataTypeMap, gl.UNSIGNED_BYTE, 'uint8'), _defineProperty(_dataTypeMap, gl.UNSIGNED_SHORT, 'uint16'), _defineProperty(_dataTypeMap, gl.UNSIGNED_INT, 'uint32'), _defineProperty(_dataTypeMap, gl.FLOAT, 'float'), _dataTypeMap);\nexport var formatMap = (_formatMap = {}, _defineProperty(_formatMap, gl.ALPHA, 'alpha'), _defineProperty(_formatMap, gl.LUMINANCE, 'luminance'), _defineProperty(_formatMap, gl.LUMINANCE_ALPHA, 'luminance alpha'), _defineProperty(_formatMap, gl.RGB, 'rgb'), _defineProperty(_formatMap, gl.RGBA, 'rgba'), _defineProperty(_formatMap, gl.RGBA4, 'rgba4'), _defineProperty(_formatMap, gl.RGB5_A1, 'rgb5 a1'), _defineProperty(_formatMap, gl.RGB565, 'rgb565'), _defineProperty(_formatMap, gl.DEPTH_COMPONENT, 'depth'), _defineProperty(_formatMap, gl.DEPTH_STENCIL, 'depth stencil'), _formatMap);\nexport var mipmapMap = (_mipmapMap = {}, _defineProperty(_mipmapMap, gl.DONT_CARE, 'dont care'), _defineProperty(_mipmapMap, gl.NICEST, 'nice'), _defineProperty(_mipmapMap, gl.FASTEST, 'fast'), _mipmapMap);\nexport var filterMap = (_filterMap = {}, _defineProperty(_filterMap, gl.NEAREST, 'nearest'), _defineProperty(_filterMap, gl.LINEAR, 'linear'), _defineProperty(_filterMap, gl.LINEAR_MIPMAP_LINEAR, 'mipmap'), _defineProperty(_filterMap, gl.NEAREST_MIPMAP_LINEAR, 'nearest mipmap linear'), _defineProperty(_filterMap, gl.LINEAR_MIPMAP_NEAREST, 'linear mipmap nearest'), _defineProperty(_filterMap, gl.NEAREST_MIPMAP_NEAREST, 'nearest mipmap nearest'), _filterMap);\nexport var wrapModeMap = (_wrapModeMap = {}, _defineProperty(_wrapModeMap, gl.REPEAT, 'repeat'), _defineProperty(_wrapModeMap, gl.CLAMP_TO_EDGE, 'clamp'), _defineProperty(_wrapModeMap, gl.MIRRORED_REPEAT, 'mirror'), _wrapModeMap);\nexport var colorSpaceMap = (_colorSpaceMap = {}, _defineProperty(_colorSpaceMap, gl.NONE, 'none'), _defineProperty(_colorSpaceMap, gl.BROWSER_DEFAULT_WEBGL, 'browser'), _colorSpaceMap);\nexport var depthFuncMap = (_depthFuncMap = {}, _defineProperty(_depthFuncMap, gl.NEVER, 'never'), _defineProperty(_depthFuncMap, gl.ALWAYS, 'always'), _defineProperty(_depthFuncMap, gl.LESS, 'less'), _defineProperty(_depthFuncMap, gl.LEQUAL, 'lequal'), _defineProperty(_depthFuncMap, gl.GREATER, 'greater'), _defineProperty(_depthFuncMap, gl.GEQUAL, 'gequal'), _defineProperty(_depthFuncMap, gl.EQUAL, 'equal'), _defineProperty(_depthFuncMap, gl.NOTEQUAL, 'notequal'), _depthFuncMap);\nexport var blendEquationMap = (_blendEquationMap = {}, _defineProperty(_blendEquationMap, gl.FUNC_ADD, 'add'), _defineProperty(_blendEquationMap, gl.MIN_EXT, 'min'), _defineProperty(_blendEquationMap, gl.MAX_EXT, 'max'), _defineProperty(_blendEquationMap, gl.FUNC_SUBTRACT, 'subtract'), _defineProperty(_blendEquationMap, gl.FUNC_REVERSE_SUBTRACT, 'reverse subtract'), _blendEquationMap);\nexport var blendFuncMap = (_blendFuncMap = {}, _defineProperty(_blendFuncMap, gl.ZERO, 'zero'), _defineProperty(_blendFuncMap, gl.ONE, 'one'), _defineProperty(_blendFuncMap, gl.SRC_COLOR, 'src color'), _defineProperty(_blendFuncMap, gl.ONE_MINUS_SRC_COLOR, 'one minus src color'), _defineProperty(_blendFuncMap, gl.SRC_ALPHA, 'src alpha'), _defineProperty(_blendFuncMap, gl.ONE_MINUS_SRC_ALPHA, 'one minus src alpha'), _defineProperty(_blendFuncMap, gl.DST_COLOR, 'dst color'), _defineProperty(_blendFuncMap, gl.ONE_MINUS_DST_COLOR, 'one minus dst color'), _defineProperty(_blendFuncMap, gl.DST_ALPHA, 'dst alpha'), _defineProperty(_blendFuncMap, gl.ONE_MINUS_DST_ALPHA, 'one minus dst alpha'), _defineProperty(_blendFuncMap, gl.CONSTANT_COLOR, 'constant color'), _defineProperty(_blendFuncMap, gl.ONE_MINUS_CONSTANT_COLOR, 'one minus constant color'), _defineProperty(_blendFuncMap, gl.CONSTANT_ALPHA, 'constant alpha'), _defineProperty(_blendFuncMap, gl.ONE_MINUS_CONSTANT_ALPHA, 'one minus constant alpha'), _defineProperty(_blendFuncMap, gl.SRC_ALPHA_SATURATE, 'src alpha saturate'), _blendFuncMap);\nexport var stencilFuncMap = (_stencilFuncMap = {}, _defineProperty(_stencilFuncMap, gl.NEVER, 'never'), _defineProperty(_stencilFuncMap, gl.ALWAYS, 'always'), _defineProperty(_stencilFuncMap, gl.LESS, 'less'), _defineProperty(_stencilFuncMap, gl.LEQUAL, 'lequal'), _defineProperty(_stencilFuncMap, gl.GREATER, 'greater'), _defineProperty(_stencilFuncMap, gl.GEQUAL, 'gequal'), _defineProperty(_stencilFuncMap, gl.EQUAL, 'equal'), _defineProperty(_stencilFuncMap, gl.NOTEQUAL, 'notequal'), _stencilFuncMap);\nexport var stencilOpMap = (_stencilOpMap = {}, _defineProperty(_stencilOpMap, gl.ZERO, 'zero'), _defineProperty(_stencilOpMap, gl.KEEP, 'keep'), _defineProperty(_stencilOpMap, gl.REPLACE, 'replace'), _defineProperty(_stencilOpMap, gl.INVERT, 'invert'), _defineProperty(_stencilOpMap, gl.INCR, 'increment'), _defineProperty(_stencilOpMap, gl.DECR, 'decrement'), _defineProperty(_stencilOpMap, gl.INCR_WRAP, 'increment wrap'), _defineProperty(_stencilOpMap, gl.DECR_WRAP, 'decrement wrap'), _stencilOpMap);\nexport var cullFaceMap = (_cullFaceMap = {}, _defineProperty(_cullFaceMap, gl.FRONT, 'front'), _defineProperty(_cullFaceMap, gl.BACK, 'back'), _cullFaceMap);\n//# sourceMappingURL=constants.js.map","export default class Grid {\n    constructor() {\n        this.cells = [];\n        this.columnNum = 0;\n        this.rowNum = 0;\n        this.additionColumn = [];\n        this.additionRow = [];\n    }\n    init(width, height, gridSize) {\n        this.cells = [];\n        this.CELL_W = gridSize.CELL_W || Grid.DEFAULT_CELL_W;\n        this.CELL_H = gridSize.CELL_H || Grid.DEFAULT_CELL_H;\n        this.columnNum = Math.ceil(width / this.CELL_W);\n        this.rowNum = Math.ceil(height / this.CELL_H);\n        Grid.MIN_DIST = Math.pow(width, 2) + Math.pow(height, 2);\n        for (let i = 0; i < this.columnNum; i++) {\n            const tmp = [];\n            for (let j = 0; j < this.rowNum; j++) {\n                const cell = {\n                    dx: i,\n                    dy: j,\n                    x: i * this.CELL_W,\n                    y: j * this.CELL_H,\n                    occupied: false\n                };\n                tmp.push(cell);\n            }\n            this.cells.push(tmp);\n        }\n    }\n    findGridByNodeId(nodeId) {\n        var _a, _b;\n        for (let i = 0; i < this.columnNum; i++) {\n            for (let j = 0; j < this.rowNum; j++) {\n                if (this.cells[i][j].node) {\n                    if (((_b = (_a = this.cells[i][j]) === null || _a === void 0 ? void 0 : _a.node) === null || _b === void 0 ? void 0 : _b.id) === nodeId) {\n                        return { column: i, row: j };\n                    }\n                }\n            }\n        }\n        return null;\n    }\n    sqdist(a, b) {\n        return Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2);\n    }\n    occupyNearest(p) {\n        let minDist = Grid.MIN_DIST;\n        let d;\n        let candidate = null;\n        for (let i = 0; i < this.columnNum; i++) {\n            for (let j = 0; j < this.rowNum; j++) {\n                if (!this.cells[i][j].occupied && (d = this.sqdist(p, this.cells[i][j])) < minDist) {\n                    minDist = d;\n                    candidate = this.cells[i][j];\n                }\n            }\n        }\n        if (candidate) {\n            candidate.occupied = true;\n        }\n        return candidate;\n    }\n    insertColumn(columnIndex, length) {\n        if (length <= 0)\n            return;\n        // 插入空列\n        for (let i = 0; i < length; i++) {\n            this.cells[i + this.columnNum] = [];\n            for (let j = 0; j < this.rowNum; j++) {\n                this.cells[i + this.columnNum][j] = {\n                    dx: i,\n                    dy: j,\n                    x: i * this.CELL_W,\n                    y: j * this.CELL_H,\n                    occupied: false,\n                    node: null,\n                };\n            }\n        }\n        // 交换数据\n        for (let i = (this.columnNum - 1); i > columnIndex; i--) {\n            for (let j = 0; j < this.rowNum; j++) {\n                this.cells[i + length][j] = Object.assign(Object.assign({}, this.cells[i][j]), { x: (i + length) * this.CELL_W, y: j * this.CELL_H });\n                this.cells[i][j] = {\n                    x: i * this.CELL_W,\n                    y: j * this.CELL_H,\n                    occupied: true,\n                    node: null,\n                };\n            }\n        }\n        // 已有行列的处理\n        for (let j = 0; j < this.additionColumn.length; j++) {\n            if (this.additionColumn[j] >= columnIndex) {\n                this.additionColumn[j] += length;\n            }\n        }\n        // 记录新增的行列\n        for (let i = 0; i < length; i++) {\n            this.additionColumn.push(columnIndex + i + 1);\n        }\n        this.columnNum += length;\n    }\n    insertRow(rowIndex, length) {\n        if (length <= 0)\n            return;\n        // 插入空行\n        for (let j = 0; j < length; j++) {\n            for (let i = 0; i < this.columnNum; i++) {\n                this.cells[i][j + this.rowNum] = {\n                    dx: i,\n                    dy: j,\n                    x: i * this.CELL_W,\n                    y: j * this.CELL_H,\n                    occupied: false,\n                    node: null,\n                };\n            }\n        }\n        // 交换数据\n        for (let i = 0; i < this.columnNum; i++) {\n            for (let j = (this.rowNum - 1); j > rowIndex; j--) {\n                this.cells[i][j + length] = Object.assign(Object.assign({}, this.cells[i][j]), { dx: i, dy: j + length, x: i * this.CELL_W, y: (j + length) * this.CELL_H });\n                this.cells[i][j] = {\n                    dx: i,\n                    dy: j,\n                    x: i * this.CELL_W,\n                    y: j * this.CELL_H,\n                    occupied: false,\n                    node: null,\n                };\n            }\n        }\n        // 已有行列的处理\n        for (let j = 0; j < this.additionRow.length; j++) {\n            if (this.additionRow[j] >= rowIndex) {\n                this.additionRow[j] += length;\n            }\n        }\n        // 记录新增的行列\n        for (let i = 0; i < length; i++) {\n            this.additionRow.push(rowIndex + i + 1);\n        }\n        this.rowNum += length;\n    }\n    getNodes() {\n        const nodes = [];\n        for (let i = 0; i < this.columnNum; i++) {\n            for (let j = 0; j < this.rowNum; j++) {\n                if (this.cells[i][j].node) {\n                    nodes.push(this.cells[i][j]);\n                }\n            }\n        }\n        return nodes;\n    }\n}\nGrid.MIN_DIST = 50;\nGrid.DEFAULT_CELL_W = 80;\nGrid.DEFAULT_CELL_H = 80;\n//# sourceMappingURL=grid.js.map","const graphWidth = 1200;\nconst graphHeight = 800;\nconst OVERLAP_QUOT = 10000000;\nconst MIN_DIST = 10;\nconst M_PI = 3.14159265358979323846;\nconst M_PI_2 = 1.57079632679489661923;\nconst PI_38 = M_PI * 0.375;\nconst PI_58 = M_PI * 0.625;\nconst nodeEdgeMap = new Map();\nconst CELL_W = 10;\nconst CELL_H = 10;\nlet T = 0.8;\nconst T_MIN = 0.1;\nconst R = 0.5;\nfunction distanceToNode(node1, node2, isHoriz) {\n    const x11 = node1.x - node1.size[0] / 2;\n    const y11 = node1.y - node1.size[1] / 2;\n    const x12 = node1.x + node1.size[0] / 2;\n    const y12 = node1.y + node1.size[1] / 2;\n    const x21 = node2.x - node2.size[0] / 2;\n    const y21 = node2.y - node2.size[1] / 2;\n    const x22 = node2.x + node2.size[0] / 2;\n    const y22 = node2.y + node2.size[1] / 2;\n    const cx1 = node1.x;\n    const cy1 = node1.y;\n    const cx2 = node2.x;\n    const cy2 = node2.y;\n    const dcx = cx2 - cx1;\n    // 两个节点间的方位角  \n    const qr = Math.atan2(dcx, (cy2 - cy1));\n    let dx = 0;\n    let dy = 0;\n    let l1 = 0;\n    let l2 = 0;\n    if (qr > M_PI_2) {\n        dy = y11 - y22;\n        dx = x21 - x12;\n        l1 = parseFloat(dy ? (dy / Math.cos(qr)).toFixed(2) : (dx).toFixed(2));\n        l2 = parseFloat(dx ? (dx / Math.sin(qr)).toFixed(2) : (dy).toFixed(2));\n    }\n    else if (0.0 < qr && qr <= M_PI_2) {\n        dy = y21 - y12;\n        dx = x21 - x12;\n        if (dy > dx) {\n            l1 = l2 = parseFloat(dy ? (dy / Math.cos(qr)).toFixed(2) : (dx).toFixed(2));\n        }\n        else {\n            l1 = l2 = parseFloat(dx ? (dx / Math.sin(qr)).toFixed(2) : (dy).toFixed(2));\n        }\n    }\n    else if (qr < -M_PI_2) {\n        dy = y11 - y22;\n        dx = -(x22 - x11);\n        if (dy > dx) {\n            l1 = l2 = parseFloat(dy ? (dy / Math.cos(qr)).toFixed(2) : (dx).toFixed(2));\n        }\n        else {\n            l1 = l2 = parseFloat(dx ? (dx / Math.sin(qr)).toFixed(2) : (dy).toFixed(2));\n        }\n    }\n    else {\n        dy = y21 - y12;\n        if (Math.abs(dcx) > (x12 - x11) / 2) {\n            dx = x11 - x22;\n        }\n        else {\n            dx = dcx;\n        }\n        if (dy > dx) {\n            l1 = l2 = parseFloat(dy ? (dy / Math.cos(qr)).toFixed(2) : (dx).toFixed(2));\n        }\n        else {\n            l1 = l2 = parseFloat((dx && qr !== 0.0) ? (dx / Math.sin(qr)).toFixed(2) : (dy).toFixed(2));\n        }\n    }\n    const aqr = parseFloat(qr.toFixed(2));\n    // 判断是否水平，角度\n    let newHoriz = isHoriz;\n    if (isHoriz) {\n        newHoriz = PI_38 < aqr && aqr < PI_58;\n    }\n    return {\n        distance: Math.abs(l1 < l2 ? l1 : l2),\n        isHoriz: newHoriz,\n    };\n}\nfunction calcNodePair(nodeA, nodeB) {\n    // 确定两个节点间是否存在连线\n    const edges = nodeEdgeMap.get(nodeA.id) || [];\n    const isLinked = edges.find((edge) => {\n        return edge.source === nodeB.id || edge.target === nodeB.id;\n    });\n    const areaA = nodeA.size[0] * nodeA.size[1];\n    const areaB = nodeB.size[0] * nodeB.size[1];\n    const node1 = areaA > areaB ? nodeB : nodeA;\n    const node2 = areaA > areaB ? nodeA : nodeB;\n    const x11 = node1.x - node1.size[0] / 2;\n    const y11 = node1.y - node1.size[1] / 2;\n    const x12 = node1.x + node1.size[0] / 2;\n    const y12 = node1.y + node1.size[1] / 2;\n    const x21 = node2.x - node2.size[0] / 2;\n    const y21 = node2.y - node2.size[1] / 2;\n    const x22 = node2.x + node2.size[0] / 2;\n    const y22 = node2.y + node2.size[1] / 2;\n    const cx1 = node1.x;\n    const cy1 = node1.y;\n    const cx2 = node2.x;\n    const cy2 = node2.y;\n    // Detect if nodes overlap  检查节点之间是否存在覆盖问题\n    const isoverlap = ((x12 >= x21) && (x22 >= x11) && (y12 >= y21) && (y22 >= y11));\n    let e = 0;\n    let distance = 0;\n    if (isoverlap) {\n        distance = Math.sqrt(Math.pow((cx2 - cx1), 2) + Math.pow((cy2 - cy1), 2));\n        // calc area of overlap 计算重复区域的坐标和面积\n        const sx1 = x11 > x21 ? x11 : x21;\n        const sy1 = y11 > y21 ? y11 : y21;\n        const sx2 = x12 < x22 ? x12 : x22;\n        const sy2 = y12 < y22 ? y12 : y22;\n        const dsx = sx2 - sx1;\n        const dsy = sy2 - sy1;\n        const sov = dsx * dsy;\n        if (distance === 0.0) {\n            distance = 0.0000001;\n        }\n        e = MIN_DIST * 1 / distance * 100 + sov;\n        e *= OVERLAP_QUOT;\n    }\n    else {\n        let isHoriz = false;\n        const res = distanceToNode(node1, node2, isHoriz);\n        distance = res.distance;\n        isHoriz = res.isHoriz;\n        if (distance <= MIN_DIST) {\n            if (distance !== 0) {\n                if (isLinked) {\n                    e += MIN_DIST + OVERLAP_QUOT * 1 / distance;\n                }\n                else {\n                    e += MIN_DIST + OVERLAP_QUOT * MIN_DIST / distance;\n                }\n            }\n            else {\n                e += OVERLAP_QUOT;\n            }\n        }\n        else {\n            e += distance;\n            if (isLinked) {\n                e += distance * distance;\n            }\n        }\n    }\n    return e;\n}\nfunction calcEnergy(nodes) {\n    let energy = 0;\n    for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n        if ((node.x < 0) || (node.y < 0) || (node.x > graphWidth) || (node.y > graphHeight)) {\n            energy += 1000000000000;\n        }\n        for (let j = i + 1; j < nodes.length; j++) {\n            energy += calcNodePair(node, nodes[j]);\n        }\n    }\n    return energy;\n}\nfunction isCorrectPosition(node, newPosition, nodes, edges) {\n    const nodeIdxMap = new Map();\n    nodes.forEach((o, i) => {\n        nodeIdxMap.set(o.id, o);\n    });\n    const relateEdges = edges.filter((edge) => edge.source === node.id || edge.target === node.id) || [];\n    const relateNodes = [];\n    relateEdges.forEach((edge) => {\n        const otherNodeId = edge.source === node.id ? edge.target : edge.source;\n        const otherNode = nodeIdxMap.get(otherNodeId);\n        if (otherNode) {\n            relateNodes.push(otherNode);\n        }\n    });\n    let flag = true;\n    for (let i = 0; i < relateNodes.length; i++) {\n        const item = relateNodes[i];\n        // 判断条件调整，节点的坐标不需要完全一致。可以根据节点间的夹角来判断\n        const delta = Math.atan((node.y - item.y) / (item.x - node.y)) * 180;\n        const newDelta = Math.atan((newPosition.y - item.y) / (item.x - newPosition.y)) * 180;\n        const isHor = delta < 30 || delta > 150;\n        const newIsHor = newDelta < 30 || newDelta > 150;\n        const isVer = delta > 70 && delta < 110;\n        const newIsVer = newDelta > 70 && newDelta < 110;\n        // 定义四个相似角度区间，0-15度，75-90度，90到105度，165到180度。\n        if (isHor && !newIsHor || ((delta * newDelta) < 0)) {\n            flag = false;\n            break;\n        }\n        else if (isVer && !newIsVer || ((delta * newDelta) < 0)) {\n            flag = false;\n            break;\n        }\n        else if ((item.x - node.x) * (item.x - newPosition.x) < 0) {\n            flag = false;\n            break;\n        }\n        else if ((item.y - node.y) * (item.y - newPosition.y) < 0) {\n            flag = false;\n            break;\n        }\n    }\n    return flag;\n}\nfunction shuffle(nodes, edges) {\n    let foundSmallerEnergy = false;\n    // 多次测试发现step为1时的效果最佳。\n    const step = 1;\n    const wstep = CELL_W * step;\n    const hstep = CELL_H * step;\n    const wsteps = [wstep, -wstep, 0, 0,];\n    const hsteps = [0, 0, hstep, -hstep,];\n    for (let i = 0; i < nodes.length; ++i) {\n        const node = nodes[i];\n        let nodeEnergy = calcNodeEnergy(node, nodes);\n        for (let ns = 0; ns < wsteps.length; ns++) {\n            // 判断新位置与其他连线节点的位置关系是否违规\n            const flag = isCorrectPosition(node, { x: node.x + wsteps[ns], y: node.y + hsteps[ns] }, nodes, edges);\n            if (flag) {\n                // 节点朝上下左右四个方向移动，找到能量最小的那个位置\n                node.x += wsteps[ns];\n                node.y += hsteps[ns];\n                // 计算移动后节点的能量\n                const energy = calcNodeEnergy(node, nodes);\n                const rdm = Math.random();\n                if (energy < nodeEnergy) {\n                    nodeEnergy = energy;\n                    foundSmallerEnergy = true;\n                }\n                else if (rdm < T && rdm > T_MIN) {\n                    nodeEnergy = energy;\n                    foundSmallerEnergy = true;\n                }\n                else {\n                    // 回归原位\n                    node.x -= wsteps[ns];\n                    node.y -= hsteps[ns];\n                }\n            }\n        }\n    }\n    if (T > T_MIN) {\n        T *= R;\n    }\n    // 重新计算图整体的能量\n    if (foundSmallerEnergy) {\n        return calcEnergy(nodes);\n    }\n    return 0;\n}\n// 计算节点的能量，\nfunction calcNodeEnergy(node, nodes) {\n    let e = 0.0;\n    if ((node.x < 0) || (node.y < 0) ||\n        (node.x + node.size[0] + 20 > graphWidth) ||\n        (node.y + node.size[1] + 20 > graphHeight)) {\n        e += 1000000000000.0;\n    }\n    for (let i = 0; i < nodes.length; ++i) {\n        if (node.id !== nodes[i].id) {\n            e += calcNodePair(node, nodes[i]);\n        }\n    }\n    return e;\n}\nfunction layout(nodes, edges) {\n    if (nodes.length === 0) {\n        return { nodes, edges };\n    }\n    nodes.forEach((node) => {\n        const relateEdge = edges.filter((edge) => edge.source === node.id || edge.target === node.id);\n        nodeEdgeMap.set(node, relateEdge);\n    });\n    // 1. 初始化\n    // 将node按照连接数进行排序\n    nodes.sort((node1, node2) => {\n        var _a, _b;\n        return ((_a = nodeEdgeMap.get(node1.id)) === null || _a === void 0 ? void 0 : _a.length) - ((_b = nodeEdgeMap.get(node2.id)) === null || _b === void 0 ? void 0 : _b.length);\n    });\n    // 2. 计算图能量\n    let minEnergy = calcEnergy(nodes);\n    let deSameCount = 20; // de=0 count\n    let de = 1; // energy delta\n    let prevEnergy = 0;\n    // 定义总的迭代次数。超过就停掉，防止死循环\n    const MAX_COUNT = 50;\n    let count = 0;\n    while (deSameCount > 0) {\n        count++;\n        if (count >= MAX_COUNT) {\n            break;\n        }\n        const ea = shuffle(nodes, edges);\n        if (ea !== 0) {\n            prevEnergy = ea;\n        }\n        de = prevEnergy - minEnergy;\n        minEnergy = prevEnergy;\n        if (de === 0) {\n            --deSameCount;\n        }\n        else {\n            deSameCount = 20;\n        }\n    }\n    nodes.forEach((node) => {\n        node.x = node.x - node.size[0] / 2;\n        node.y = node.y - node.size[1] / 2;\n    });\n    return {\n        nodes,\n        edges,\n    };\n}\nexport default layout;\n//# sourceMappingURL=mysqlWorkbench.js.map","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"flow-composition-wrapper\"},[_c('div',{staticClass:\"composition-header\"},[_vm._v(\"组件：\")]),_c('div',{staticClass:\"composition-content\"},[_c('svg',{staticClass:\"rhombic judge\",attrs:{\"preserveAspectRatio\":\"xMidYMid\",\"viewBox\":\"0 0 246 82\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"data-type\":\"judge\",\"data-ctype\":\"判定\"},on:{\"mousedown\":_vm.startDrag}},[_c('path',{attrs:{\"vector-effect\":\"non-scaling-stroke\",\"d\":\"M3.16228 41L123 1.05409L242.838 41L123 80.9459L3.16228 41Z\",\"fill\":\"#EFF4FF\",\"fill-opacity\":\"0.6\",\"stroke\":\"#5F95FF\",\"stroke-width\":\"1\"}}),_c('text',{attrs:{\"x\":\"90\",\"y\":\"40\",\"dominant-baseline\":\"middle\",\"font-size\":\"40\",\"stroke\":\"#000\",\"fill\":\"#0000ff\"}},[_vm._v(\"判定\")])]),_c('div',{staticClass:\"dnd-rect\",attrs:{\"data-type\":\"dialogue\",\"data-ctype\":\"对话框\"},on:{\"mousedown\":_vm.startDrag}},[_vm._v(\" 对话框 \")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"flow-composition-wrapper\">\r\n    <div class=\"composition-header\">组件：</div>\r\n    <div class=\"composition-content\">\r\n      <svg\r\n        class=\"rhombic judge\"\r\n        preserveAspectRatio=\"xMidYMid\"\r\n        viewBox=\"0 0 246 82\"\r\n        fill=\"none\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        data-type=\"judge\"\r\n        data-ctype=\"判定\"\r\n        @mousedown=\"startDrag\"\r\n      >\r\n        <path\r\n          vector-effect=\"non-scaling-stroke\"\r\n          d=\"M3.16228 41L123 1.05409L242.838 41L123 80.9459L3.16228 41Z\"\r\n          fill=\"#EFF4FF\"\r\n          fill-opacity=\"0.6\"\r\n          stroke=\"#5F95FF\"\r\n          stroke-width=\"1\"\r\n        />\r\n        <text x=\"90\" y=\"40\" dominant-baseline=\"middle\"\r\n              font-size=\"40\" stroke=\"#000\" fill=\"#0000ff\"\r\n        >判定</text>\r\n      </svg>\r\n      <div data-type=\"dialogue\" data-ctype=\"对话框\" class=\"dnd-rect\" @mousedown=\"startDrag\">\r\n        对话框\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n    }\r\n  },\r\n  methods: {\r\n    startDrag (e) {\r\n      console.debug('startDrag: ', e)\r\n      this.$emit('drag', e)\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n .flow-composition-wrapper {\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    width: 100px;\r\n    height: 200px;\r\n    border 1px solid #ddd\r\n    box-sizing border-box\r\n    z-index 100\r\n    background-color #fff\r\n }\r\n .composition-header {\r\n  border-bottom 1px solid #ddd\r\n  height 30px\r\n  font-size 14px\r\n  line-height 30px\r\n  color #ccc\r\n  padding-left 10px\r\n  user-select none\r\n }\r\n  .composition-content {\r\n    display flex\r\n    flex-direction column\r\n    justify-content center\r\n    align-items center\r\n    padding 20px\r\n    box-sizing border-box\r\n    width 100%\r\n    height calc(100% - 30px)\r\n    .rhombic {\r\n      width 80px\r\n      display flex\r\n      flex-direction column\r\n      justify-content center\r\n      align-items center\r\n      cursor move\r\n      user-select none\r\n    }\r\n    .dnd-rect {\r\n      width 80px\r\n      height 30px\r\n      // margin 16px\r\n      margin-top 20px\r\n      line-height 30px\r\n      text-align center\r\n      border 1px solid #5F95FF\r\n      border-radius 6px\r\n      cursor move\r\n      font-size 14px\r\n      user-select none\r\n      color #000\r\n      background-color #EFF4FF\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Composition.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Composition.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Composition.vue?vue&type=template&id=cd590736&scoped=true&\"\nimport script from \"./Composition.vue?vue&type=script&lang=js&\"\nexport * from \"./Composition.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Composition.vue?vue&type=style&index=0&id=cd590736&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cd590736\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{staticClass:\"operate-component-wrapper\"},_vm._l((_vm.features),function(item,index){return _c('li',{key:index,staticClass:\"operate-button\",on:{\"click\":function($event){return _vm.handleCommand(item.command)}}},[_vm._v(\" \"+_vm._s(item.title)+\" \")])}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <ul class=\"operate-component-wrapper\">\r\n    <li\r\n      class=\"operate-button\"\r\n      v-for=\"(item, index) in features\"\r\n      :key=\"index\"\r\n      @click=\"handleCommand(item.command)\"\r\n    >\r\n      {{ item.title }}\r\n    </li>\r\n  </ul>\r\n</template>\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      features: [\r\n        {\r\n          name: '放大画布',\r\n          title: '+',\r\n          command: 'add'\r\n        },\r\n        {\r\n          name: '缩小画布',\r\n          title: '-',\r\n          command: 'reduce'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    handleCommand (command) {\r\n      console.debug('handleCommand: ', command)\r\n      this.$emit(command)\r\n    }\r\n  }\r\n}\r\n</script>\r\n  <style lang=\"stylus\" scoped>\r\n.operate-component-wrapper {\r\n  position absolute\r\n  bottom 0\r\n  right 0\r\n  width 80px\r\n  height 160px\r\n  display flex\r\n  flex-direction column\r\n  justify-content center\r\n  padding 10px 0\r\n  box-sizing border-box\r\n  // border 1px solid #ddd\r\n  margin-right 0px\r\n  z-index 100\r\n  background-color #fff\r\n\r\n  .operate-button {\r\n    width 80px\r\n    margin 0 auto\r\n    height 60px\r\n    font-size 40px\r\n    line-height 60px\r\n    text-align center\r\n    cursor pointer\r\n    user-select none\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Operate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Operate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Operate.vue?vue&type=template&id=7a9a0d73&scoped=true&\"\nimport script from \"./Operate.vue?vue&type=script&lang=js&\"\nexport * from \"./Operate.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Operate.vue?vue&type=style&index=0&id=7a9a0d73&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a9a0d73\",\n  null\n  \n)\n\nexport default component.exports","import fetch from 'cseed-frame/services/_fetch'\r\n\r\nexport function getAnyliseVersionListAPI (params) { // 根据服务获取版本号列表\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/analysis/listVersion',\r\n    params\r\n  })\r\n}\r\n\r\nexport function getAnyliseTreeAPI (params) { // 根据版本id获取树结构转化率\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/analysis/conversionRate',\r\n    params\r\n  })\r\n}\r\n","<template>\r\n  <div :class=\"[showNodeDetail ? 'limit-graph' : '', 'graph-component']\">\r\n    <FlowComposition v-if=\"isEdit\" @drag=\"handleCompositionDrag\"></FlowComposition>\r\n    <!-- 解决画布resize后,节点被遮挡问题 -->\r\n    <div style=\"width: 100%;height: 100%\">\r\n      <div class=\"graph-simply-container\" :id=\"containerId\"></div>\r\n    </div>\r\n    <Operate\r\n      v-if=\"isEdit\"\r\n      @add=\"addZoom\"\r\n      @reduce=\"reduceZoom\"\r\n    ></Operate>\r\n  </div>\r\n</template>\r\n<script>\r\nimport store from 'cseed-frame/store/_index'\r\nimport { Graph, Shape, ObjectExt } from '@antv/x6'\r\nimport { Dnd } from '@antv/x6-plugin-dnd' // 拖拽\r\nimport { Snapline } from '@antv/x6-plugin-snapline' // 对齐线\r\nimport { Transform } from '@antv/x6-plugin-transform' // 拉动节点 显示图形转换\r\nimport { DagreLayout } from '@antv/layout' // 层次布局\r\nimport FlowComposition from '@/components/Flow/Composition'\r\nimport Operate from '@/components/Flow/Operate'\r\nimport { addJudgeNodeAPI, addDialogueNodeAPI, deleteNodeAPI, getVersionIdAPI, getTreeDataAPI } from '@/services/flow'\r\nimport { getStatuTitleAPI } from '@/services/services'\r\nimport { getAnyliseTreeAPI } from '@/services/anylise'\r\nexport default {\r\n  components: {\r\n    FlowComposition,\r\n    Operate\r\n  },\r\n  props: {\r\n    showNodeDetail: { // 显示节点详情\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  inject: ['serviceId'],\r\n  data () {\r\n    return {\r\n      showAnylise: false,\r\n      versionId: '',\r\n      graph: null, // 画布\r\n      dnd: null, // 拖拽\r\n      tree: [], // 后台给的树形结构\r\n      resizingOptions: {\r\n        enabled: true,\r\n        minWidth: 80,\r\n        maxWidth: 200,\r\n        minHeight: 40,\r\n        maxHeight: 150,\r\n        orthogonal: true,\r\n        restrict: false,\r\n        preserveAspectRatio: true\r\n      },\r\n      startNode: { // 开始节点\r\n        id: '', // String，节点的唯一标识\r\n        shape: 'ellipse', // 使用 ellipse 渲染\r\n        x: 50, // Number，必选，节点位置的 x 值\r\n        y: 50, // Number，必选，节点位置的 y 值\r\n        width: 100, // Number，可选，节点大小的 width 值\r\n        height: 50, // Number，可选，节点大小的 height 值\r\n        attrs: {\r\n          body: {\r\n            fill: '#eff4ff',\r\n            stroke: '#5f95ff',\r\n            strokeWidth: 1,\r\n            rx: 16,\r\n            ry: 16\r\n          },\r\n          label: {\r\n            text: '开始',\r\n            fill: '#333',\r\n            fontSize: 16,\r\n            fontWeight: 'normal',\r\n            fontVariant: 'small-caps'\r\n          }\r\n        },\r\n        data: {\r\n          type: 'start'\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    layout () { // 按照树级结构，重新渲染节点\r\n      const dagreLayout = new DagreLayout({\r\n        type: 'dagre',\r\n        begin: [100, 60],\r\n        rankDir: 'TB',\r\n        rankSep: 40,\r\n        nodeSep: 40\r\n      })\r\n      //   // this.startNode\r\n      const cells = this.graph.toJSON().cells\r\n      const edges = cells.filter((cellItem, cellIndex) => {\r\n        return cellItem.shape === 'edge'\r\n      })\r\n      const parentNodes = cells.filter((cellItem, cellIndex) => { //  && !cellItem.parent\r\n        return cellItem.shape !== 'edge' && !cellItem.parent\r\n      })\r\n      const parentEdges = edges.filter((edgeItem, edgeIndex) => {\r\n        const sourceCell = this.graph.getCellById(edgeItem?.source?.cell)\r\n        const targetCell = this.graph.getCellById(edgeItem?.target?.cell)\r\n        return !sourceCell.hasParent() && !targetCell.hasParent()\r\n      })\r\n      const childEdges = edges.filter((edgeItem, edgeIndex) => {\r\n        const sourceCell = this.graph.getCellById(edgeItem?.source?.cell)\r\n        const targetCell = this.graph.getCellById(edgeItem?.target?.cell)\r\n        return sourceCell.hasParent() || targetCell.hasParent()\r\n      })\r\n      const childNodes = cells.filter((cellItem, cellIndex) => {\r\n        return cellItem.shape !== 'edge' && cellItem.parent\r\n      })\r\n      const dialogStaticButtonNodes = childNodes.filter((cellItem, cellIndex) => { // 静态按钮\r\n        return cellItem.data['button-type'] === 'dialogue-static-button'\r\n      })\r\n      const dynamicButtonNodes = childNodes.filter((cellItem, cellIndex) => { // 动态按钮\r\n        return cellItem.data['button-type'] === 'dialogue-button'\r\n      })\r\n      const childLayoutArr = []\r\n      const parentLayout = dagreLayout.layout({ // 只对父级重新布局\r\n        nodes: [...parentNodes],\r\n        edges: [...parentEdges]\r\n      })\r\n      console.debug('layout data: ', parentLayout)\r\n      parentLayout.nodes.forEach((parentNode, parentIndex) => {\r\n        // 给父级节点更新位置\r\n        parentNode.position = {\r\n          x: parentNode.x && parentNode.x,\r\n          y: parentNode.y && parentNode.y\r\n        }\r\n        // 不同属性，子级节点的位置不同，要都有对应设置x，y的规则\r\n        childNodes.forEach((childNode, childIndex) => {\r\n          if (childNode.parent === parentNode.id) {\r\n            if (childNode.data.type === 'title-node') { // title-node\r\n              childNode.x = parentNode.position.x - 30\r\n              childNode.y = parentNode.position.y - 30\r\n              childNode.position = {\r\n                x: childNode.x,\r\n                y: childNode.y\r\n              }\r\n            }\r\n          }\r\n        })\r\n        dialogStaticButtonNodes.forEach((dialogStaticButtonNode, dialogStaticButtonIndex) => {\r\n          if (dialogStaticButtonNode.parent === parentNode.id) {\r\n            dialogStaticButtonNode.x = parentNode.position.x + parentNode.size.width - 60 - 10\r\n            dialogStaticButtonNode.y = parentNode.position.y + parentNode.size.height / 2 - 20 + 30 * dialogStaticButtonIndex\r\n            dialogStaticButtonNode.position = {\r\n              x: dialogStaticButtonNode.x,\r\n              y: dialogStaticButtonNode.y\r\n            }\r\n          }\r\n        })\r\n        dynamicButtonNodes.forEach((dynamicButtonNode, dynamicButtonIndex) => {\r\n          if (dynamicButtonNode.parent === parentNode.id) {\r\n            dynamicButtonNode.x = parentNode.position.x + 10 + 60 * dynamicButtonIndex\r\n            dynamicButtonNode.y = parentNode.position.y + parentNode.size.height - 30\r\n            dynamicButtonNode.position = {\r\n              x: dynamicButtonNode.x,\r\n              y: dynamicButtonNode.y\r\n            }\r\n          }\r\n        })\r\n      })\r\n      const newCells = {\r\n        nodes: [...(parentLayout.nodes), ...childNodes, ...dialogStaticButtonNodes, ...dynamicButtonNodes],\r\n        edges: [...(parentLayout.edges), ...childEdges]\r\n      }\r\n      // this.jsonToGraph(newCells)\r\n    },\r\n    generateRenderTree (treeData) { // 生成渲染树 x6 cell 格式树\r\n      console.debug('generateRenderTree: ', treeData)\r\n      if (this.graph && this.graph.getCellCount() > 0) {\r\n        this.graph.clearCells()\r\n      }\r\n      treeData.forEach((treeItem, treeIndex) => {\r\n        switch (treeItem.nodeType) {\r\n          case 1: // 'start'\r\n            // eslint-disable-next-line no-case-declarations\r\n            let startParentNode = { // 开始节点\r\n              id: treeItem.nodeId.toString(), // String，节点的唯一标识\r\n              shape: 'ellipse', // 使用 ellipse 渲染\r\n              x: 0, // Number，必选，节点位置的 x 值\r\n              y: 0, // Number，必选，节点位置的 y 值\r\n              width: 100, // Number，可选，节点大小的 width 值\r\n              height: 50, // Number，可选，节点大小的 height 值\r\n              attrs: {\r\n                body: {\r\n                  fill: '#eff4ff',\r\n                  stroke: '#5f95ff',\r\n                  strokeWidth: 1,\r\n                  rx: 16,\r\n                  ry: 16\r\n                },\r\n                label: {\r\n                  text: treeItem.title,\r\n                  fill: '#333',\r\n                  fontSize: 16,\r\n                  fontWeight: 'normal',\r\n                  fontVariant: 'small-caps'\r\n                }\r\n              },\r\n              data: {\r\n                type: 'start',\r\n                ...treeItem\r\n              }\r\n            }\r\n            // eslint-disable-next-line no-case-declarations\r\n            const RateNode = null\r\n            startParentNode = this.graph.addNode(startParentNode)\r\n            if (!this.isEdit && this.showAnylise) {\r\n              treeItem?.conversionRateStr.split('/n').forEach((item, index) => {\r\n                startParentNode.addChild(this.graph.addNode({\r\n                  shape: 'title-node',\r\n                  x: startParentNode.getBBox().x - startParentNode.size().width - 30,\r\n                  y: startParentNode.getBBox().y + 30 * index,\r\n                  attrs: {\r\n                    text: {\r\n                      text: item\r\n                    }\r\n                  }\r\n                }))\r\n              })\r\n            }\r\n            startParentNode.addChild(RateNode)\r\n            break\r\n          case 2: // 'dialogue'\r\n            // eslint-disable-next-line no-case-declarations\r\n            const dialogNode = {\r\n              shape: 'rect',\r\n              width: 320,\r\n              height: 80,\r\n              x: 200 + 200 * treeIndex,\r\n              y: 200 + 100 * treeIndex,\r\n              deep: true,\r\n              position: {\r\n                x: 200 + 200 * treeIndex,\r\n                y: 200 + 100 * treeIndex\r\n                // deep: true\r\n              },\r\n              label: '',\r\n              attrs: {\r\n                text: {\r\n                  // textAnchor: 'left', // 左对齐\r\n                  // refX: -10, // x 轴偏移量\r\n                  // refY: -10,\r\n                  textAnchor: 'center',\r\n                  text: treeItem?.context || ''\r\n                }\r\n              },\r\n              data: {\r\n                type: 'dialogue',\r\n                ctype: '对话框',\r\n                ...treeItem\r\n              }\r\n            }\r\n            // eslint-disable-next-line no-case-declarations\r\n            const parentNode = this.graph.addNode(dialogNode)\r\n            // eslint-disable-next-line no-case-declarations\r\n            const titleNode = this.graph.addNode({\r\n              shape: 'title-node',\r\n              x: parentNode.getBBox().x - 30,\r\n              y: parentNode.getBBox().y - 30,\r\n              attrs: {\r\n                text: {\r\n                  text: treeItem?.title\r\n                }\r\n              }\r\n            })\r\n            parentNode.addChild(titleNode)\r\n            if (treeItem?.buttonDataList) { // 渲染底部按钮 包括动态按钮 和 静态按钮\r\n              const staticButtons = treeItem.buttonDataList.filter((item, index) => {\r\n                return item.type === 2 || item.type === 3\r\n              })\r\n              const dynamicButtons = treeItem.buttonDataList.filter((item, index) => {\r\n                return item.type === 1\r\n              })\r\n              dynamicButtons.forEach((buttonItem, buttonIndex) => {\r\n                const node = this.graph.addNode({\r\n                  shape: 'dynamic-button',\r\n                  x: parentNode.getBBox().x + 10 + 60 * buttonIndex,\r\n                  y: parentNode.getBBox().y + parentNode.size().height - 30,\r\n                  attrs: {\r\n                    text: {\r\n                      text: buttonItem.title\r\n                    }\r\n                  },\r\n                  ports: {\r\n                    items: [\r\n                      {\r\n                        id: `${parentNode.id}_${buttonIndex}`,\r\n                        group: 'bottom',\r\n                        zIndex: 20\r\n                      }\r\n                    ]\r\n                  },\r\n                  data: {\r\n                    'button-type': 'dialogue-button',\r\n                    ...buttonItem\r\n                  }\r\n                })\r\n                parentNode.addChild(node)\r\n              })\r\n              staticButtons.forEach((buttonItem, buttonIndex) => {\r\n                const node = this.graph.addNode({\r\n                  shape: 'dotted-button',\r\n                  x: parentNode.getBBox().x + parentNode.size().width - 60 - 10,\r\n                  y: parentNode.getBBox().y + parentNode.size().height / 2 - 20 + 30 * buttonIndex,\r\n                  attrs: {\r\n                    text: {\r\n                      text: buttonItem.title\r\n                    }\r\n                  },\r\n                  data: {\r\n                    'button-type': 'dialogue-static-button',\r\n                    ...buttonItem\r\n                  }\r\n                })\r\n                parentNode.addChild(node)\r\n              })\r\n            }\r\n            if (!this.isEdit && this.showAnylise) {\r\n              treeItem?.conversionRateStr.split('/n').forEach((item, index) => {\r\n                parentNode.addChild(this.graph.addNode({\r\n                  shape: 'title-node',\r\n                  x: parentNode.getBBox().x - 80,\r\n                  y: parentNode.getBBox().y + 30 * index,\r\n                  attrs: {\r\n                    text: {\r\n                      text: item\r\n                    }\r\n                  }\r\n                }))\r\n              })\r\n            }\r\n            break\r\n          case 3: // judge\r\n            // eslint-disable-next-line no-case-declarations\r\n            const judgeParentNode = this.graph.addNode({\r\n              shape: 'custom-polygon',\r\n              data: {\r\n                ...treeItem\r\n              },\r\n              x: 50 + 100 * treeIndex,\r\n              y: 50 + 100 * treeIndex\r\n            })\r\n            // eslint-disable-next-line no-case-declarations\r\n            const juidgeTitleNode = this.graph.addNode({\r\n              shape: 'title-node',\r\n              x: judgeParentNode.getBBox().x - 30,\r\n              y: judgeParentNode.getBBox().y - 30,\r\n              attrs: {\r\n                text: {\r\n                  text: treeItem?.title\r\n                }\r\n              }\r\n            })\r\n            judgeParentNode.addChild(juidgeTitleNode)\r\n            if (!this.isEdit && this.showAnylise) {\r\n              treeItem?.conversionRateStr.split('/n').forEach((item, index) => {\r\n                judgeParentNode.addChild(this.graph.addNode({\r\n                  shape: 'title-node',\r\n                  x: judgeParentNode.getBBox().x - 80,\r\n                  y: judgeParentNode.getBBox().y + 30 * index,\r\n                  attrs: {\r\n                    text: {\r\n                      text: item\r\n                    }\r\n                  }\r\n                }))\r\n              })\r\n            }\r\n            break\r\n          case 4: // skill节点\r\n            // eslint-disable-next-line no-case-declarations\r\n            const skillNode = this.graph.addNode({\r\n              shape: 'rect',\r\n              size: {\r\n                width: 100,\r\n                height: 40\r\n              },\r\n              x: -200 + 100 * treeIndex,\r\n              y: 300 + 100 * treeIndex,\r\n              attrs: {\r\n                text: {\r\n                  text: treeItem.title\r\n                }\r\n              },\r\n              data: {\r\n                ...treeItem,\r\n                type: 'skill'\r\n              }\r\n            })\r\n            if (!this.isEdit && this.showAnylise) {\r\n              treeItem?.conversionRateStr.split('/n').forEach((item, index) => {\r\n                skillNode.addChild(this.graph.addNode({\r\n                  shape: 'title-node',\r\n                  x: skillNode.getBBox().x - 100,\r\n                  y: skillNode.getBBox().y + 30 * index,\r\n                  attrs: {\r\n                    text: {\r\n                      text: item\r\n                    }\r\n                  }\r\n                }))\r\n              })\r\n            }\r\n            break\r\n          case 5:\r\n            // eslint-disable-next-line no-case-declarations\r\n            const { source, target } = treeItem\r\n            // eslint-disable-next-line no-case-declarations\r\n            let sourceData = {}\r\n            // eslint-disable-next-line no-case-declarations\r\n            let targetData = {}\r\n            // eslint-disable-next-line no-case-declarations\r\n            const sourceCell = this.graph.getNodes().find((node, index) => {\r\n              return this.getNodeId(node) === source\r\n            })\r\n            // eslint-disable-next-line no-case-declarations\r\n            const targetCell = this.graph.getNodes().find((node, index) => {\r\n              return this.getNodeId(node) === target\r\n            })\r\n            if (sourceCell.hasPorts()) {\r\n              const bottomPort = sourceCell.getPorts().find((port, index) => {\r\n                return port.group === 'bottom'\r\n              })\r\n              sourceData = {\r\n                cell: sourceCell.id,\r\n                port: bottomPort.id\r\n              }\r\n            } else {\r\n              sourceData = {\r\n                cell: sourceCell.id\r\n              }\r\n            }\r\n            if (targetCell?.hasPorts() && targetCell.getData().type === 'judge') {\r\n              const topPort = targetCell.getPorts().find((port, index) => {\r\n                return port.group === 'top'\r\n              })\r\n              targetData = {\r\n                cell: targetCell.id,\r\n                port: topPort.id\r\n              }\r\n            } else {\r\n              targetData = {\r\n                cell: targetCell?.id\r\n              }\r\n            }\r\n            this.graph.addEdge({\r\n              source: {\r\n                ...sourceData\r\n              },\r\n              target: {\r\n                ...targetData\r\n              },\r\n              label: treeItem?.lineText,\r\n              router: {\r\n                name: 'manhattan',\r\n                // name: 'er',\r\n                args: {\r\n                  startDirections: ['bottom'],\r\n                  endDirections: ['top']\r\n                }\r\n              }\r\n            })\r\n            break\r\n          default:\r\n            break\r\n        }\r\n      })\r\n      // this.layout()\r\n    },\r\n    getNodeId (node) {\r\n      const data = node.getData()\r\n      if (data.nodeType === 3 || data.nodeType === 2 || data.nodeType === 1 || data.nodeType === 4) {\r\n        return data.nodeId\r\n      } else if (data.type === 1 && data['button-type'] === 'dialogue-button') {\r\n        return data.buttonId\r\n      }\r\n      return ''\r\n    },\r\n    logGraph () {\r\n      console.debug('logGraph: ', this.graph.toJSON())\r\n    },\r\n    testLinkPort () { // 测试连接桩 连接对话框底部按钮能力\r\n      // 获取页面节点\r\n      const nodeList = this.graph.getNodes()\r\n      const dialogNode = nodeList.find((node, index) => {\r\n        return node.getData().nodeType === 2\r\n      })\r\n      // 获取连接桩id\r\n      const childrenId = dialogNode.getChildren()[0].id\r\n      const firstPortId = dialogNode.getChildren()[0].getPorts()[0].id\r\n      // 获取开始节点\r\n      const startNode = nodeList.find((node, index) => {\r\n        return node.id === 'start'\r\n      })\r\n      // 建立连接线\r\n      this.graph.addEdge({\r\n        source: {\r\n          cell: childrenId,\r\n          port: firstPortId\r\n        },\r\n        target: { cell: startNode },\r\n        router: {\r\n          name: 'manhattan',\r\n          args: {\r\n            startDirections: ['top'],\r\n            endDirections: ['bottom']\r\n          }\r\n        }\r\n      })\r\n      console.debug('graph: ', this.graph.toJSON())\r\n    },\r\n    initGraph () {\r\n      // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n      const scope = this\r\n      this.graph = new Graph({\r\n        container: document.getElementById(this.containerId),\r\n        interacting: function (cellView) {\r\n          if (cellView.cell.hasParent()) { // 子节点 不允许移动 （比如对话框内的节点）\r\n            return { nodeMovable: false }\r\n          }\r\n          return true\r\n        }, // 交互 是否允许\r\n        width: '100%',\r\n        height: '100%',\r\n        autoResize: true,\r\n        grid: {\r\n          visible: true,\r\n          type: 'doubleMesh',\r\n          args: [\r\n            {\r\n              color: '#eee', // 主网格线颜色\r\n              thickness: 1 // 主网格线宽度\r\n            },\r\n            {\r\n              color: '#ddd', // 次网格线颜色\r\n              thickness: 1, // 次网格线宽度\r\n              factor: 4 // 主次网格线间隔\r\n            }\r\n          ]\r\n        },\r\n        panning: true, // 是否启用画布平移\r\n        mousewheel: true\r\n      })\r\n      this.graph.use( // 拉动节点 显示图形转换 初始化\r\n        new Transform({\r\n          resizing: this.resizingOptions\r\n        })\r\n      )\r\n      const graphInfo = store.getters.graphList.find(item => item.serviceId === this.serviceId)?.graphInfo\r\n      // console.debug('graphInfo renderdata: ', graphInfo)\r\n      // console.debug('graphInfo renderdata: ', this.tree)\r\n\r\n      this.graph.centerContent() // 居中显示画布\r\n      this.graph.use(\r\n        new Snapline({\r\n          enabled: true\r\n        })\r\n      )\r\n      this.dnd = new Dnd({\r\n        target: this.graph,\r\n        scaled: false,\r\n        dndContainer: document.querySelector('.composition-content'),\r\n        getDragNode: (beforeNode) => {\r\n          console.debug('before getDragNode: ', beforeNode)\r\n          return beforeNode.clone()\r\n        },\r\n        getDropNode: (afterNode) => {\r\n          console.debug('after getDropNode: ', afterNode)\r\n          const targetType = afterNode.getData().type\r\n          const targetCtype = afterNode.getData().ctype\r\n          const nodeList = this.graph.getNodes().filter((item) => item.getData().type === targetType)\r\n          return afterNode.clone()\r\n          // return afterNode.clone().setAttrByPath('text/text', `${targetCtype}${nodeList.length + 1}`)\r\n        },\r\n        validateNode: async (node, options) => {\r\n          const { type, ctype } = node.getData()\r\n          const nodeList = this.graph.getNodes().filter((item) => item.getData().type === type)\r\n          const nodeTitle = `${ctype}${nodeList.length + 1}`\r\n          const titleNode = this.graph.addNode({\r\n            shape: 'title-node',\r\n            x: node.getBBox().x - 30,\r\n            y: node.getBBox().y - 30,\r\n            attrs: {\r\n              text: {\r\n                text: nodeTitle\r\n              }\r\n            }\r\n          })\r\n          node.addChild(titleNode)\r\n          if (type === 'judge') {\r\n            try {\r\n              const res = await addJudgeNodeAPI({\r\n                title: nodeTitle,\r\n                versionId: this.versionId\r\n              })\r\n              // console.debug('addJudgeNodeAPI res: ', res)\r\n              if (res.code === 1000) {\r\n                const { nodeId } = res.data\r\n                node.setData({\r\n                  nodeId: nodeId.toString()\r\n                })\r\n                return true\r\n              }\r\n            } catch (error) {\r\n              return false\r\n            }\r\n          } else if (type === 'dialogue') {\r\n            try {\r\n              const res = await addDialogueNodeAPI({\r\n                title: nodeTitle,\r\n                versionId: this.versionId\r\n              })\r\n              if (res.code === 1000) {\r\n                // console.debug('addDialogueNodeAPI res: ', res)\r\n                const { nodeId } = res.data\r\n                node.setData({\r\n                  nodeId: nodeId.toString()\r\n                })\r\n                return true\r\n              }\r\n            } catch (error) {\r\n              console.error('add dialogue api error: ', error)\r\n              return false\r\n            } finally {\r\n              this.logGraph()\r\n            }\r\n          }\r\n        }\r\n      })\r\n    },\r\n    treeToGraph () {\r\n      // console.debug('renderGraph: ', this.tree)\r\n      if (this.tree.length > 0) {\r\n        this.generateRenderTree(this.tree)\r\n      }\r\n      this.logGraph()\r\n    },\r\n    jsonToGraph (data) { // 渲染画布\r\n      console.debug('jsonToGraph data :', data)\r\n      this.graph.fromJSON(data)\r\n      store.commit('flow/setGraphList', {\r\n        serviceId: this.serviceId,\r\n        graphInfo: this.graph.toJSON()\r\n      })\r\n      store.commit('flow/setNodeList', {\r\n        serviceId: this.serviceId,\r\n        nodeList: this.graph.getNodes()\r\n      })\r\n    },\r\n    handleCompositionDrag (e) { // 拖拽组件回调\r\n      const type = e.currentTarget.dataset.type\r\n      const ctype = e.currentTarget.dataset.ctype\r\n      // console.debug('handleCompositionDrag: ', type, ctype)\r\n      let node = null\r\n      if (type === 'judge') {\r\n        node = this.graph.createNode({\r\n          shape: 'custom-polygon',\r\n          label: '',\r\n          data: {\r\n            type,\r\n            ctype\r\n          }\r\n        })\r\n      } else if (type === 'dialogue') {\r\n        node = this.graph.createNode({\r\n          shape: 'rect',\r\n          width: 300,\r\n          height: 80,\r\n          label: '',\r\n          text: {\r\n            textAnchor: 'left', // 左对齐\r\n            refX: -5, // x 轴偏移量\r\n            refY: -5,\r\n            text: ctype\r\n          },\r\n          data: {\r\n            type,\r\n            ctype\r\n          }\r\n        })\r\n      } else if (type === 'skill') {\r\n        node = this.graph.createNode({\r\n          shape: 'rect',\r\n          width: 100,\r\n          height: 40,\r\n          attrs: {\r\n            body: {\r\n              rx: 6,\r\n              ry: 6\r\n            }\r\n          },\r\n          data: {\r\n            type\r\n          }\r\n        })\r\n      }\r\n      this.dnd.start(node, e)\r\n    },\r\n    addZoom () {\r\n      // 偏移歪了\r\n      this.graph.zoom(0.1).centerContent()\r\n    },\r\n    reduceZoom () {\r\n      this.graph.zoom(-0.1).centerContent()\r\n    },\r\n    initConfig () {\r\n      this.initShapeConfig()\r\n      this.initRhombicNode()\r\n      // this.initCustomNode()\r\n    },\r\n    initCustomNode () {\r\n      // Graph.registerVueComponent('dialogue', Dialogue, ['testArr']) // 注册dialogue的自定义vue组件\r\n      // register({\r\n      //   shape: 'dialogue',\r\n      //   width: 350,\r\n      //   height: 150,\r\n      //   component: Dialogue,\r\n      //   data: {\r\n      //     type: 'dialogue',\r\n      //     ctype: '对话框'\r\n      //   }\r\n      // })\r\n    },\r\n    initShapeConfig () { // 初始化矩形图形配置\r\n      // https://x6.antv.antgroup.com/tutorial/basic/node#:~:text=%7D-,%E5%AE%9A%E5%88%B6%E8%8A%82%E7%82%B9,-%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E9%80%9A%E8%BF%87\r\n      Shape.Rect.config({ // config 改变rect默认设置 ， 同修改全局的有个regiserNode\r\n        width: 80,\r\n        height: 40,\r\n        markup: [\r\n          {\r\n            tagName: 'rect',\r\n            selector: 'body'\r\n          },\r\n          {\r\n            tagName: 'text',\r\n            selector: 'label'\r\n          }\r\n        ],\r\n        attrs: {\r\n          body: { // 对应selector css\r\n            fill: '#eff4ff',\r\n            stroke: '#5f95ff',\r\n            strokeWidth: 1\r\n          },\r\n          label: {\r\n            fontSize: 14,\r\n            fill: '#000',\r\n            fontFamily: 'Pingfang-medium, Arial, helvetica, sans-serif',\r\n            textAnchor: 'middle', // 左对齐\r\n            textVerticalAnchor: 'middle',\r\n            textWrap: {\r\n              width: 180,\r\n              height: 50,\r\n              ellipsis: true\r\n            }\r\n            // refX: -10, // x 轴偏移量\r\n            // refY: -10\r\n          }\r\n        },\r\n        propHooks: { // 自定义选项\r\n          label (metadata) {\r\n            const { label, ...others } = metadata\r\n            if (label) {\r\n              ObjectExt.setByPath(others, 'attrs/text/text', label)\r\n            }\r\n            return others\r\n          },\r\n          rx (metadata) {\r\n            const { rx, ...others } = metadata\r\n            if (rx != null) {\r\n              ObjectExt.setByPath(others, 'attrs/body/rx', rx)\r\n            }\r\n            return others\r\n          },\r\n          ry (metadata) {\r\n            const { ry, ...others } = metadata\r\n            if (ry != null) {\r\n              ObjectExt.setByPath(others, 'attrs/body/ry', ry)\r\n            }\r\n            return others\r\n          }\r\n        }\r\n      })\r\n      Graph.registerNode( // 对话框内的动态按钮 底部需要有连接桩\r\n        'dynamic-button',\r\n        {\r\n          inherit: 'rect',\r\n          width: 50,\r\n          height: 20,\r\n          attrs: {\r\n            body: {\r\n              fill: '#eff4ff',\r\n              stroke: '#5f95ff',\r\n              strokeWidth: 1,\r\n              rx: 6,\r\n              ry: 6\r\n            },\r\n            text: {\r\n              fontSize: 12,\r\n              fill: '#000',\r\n              fontFamily: 'Pingfang-medium, Arial, helvetica, sans-serif',\r\n              textAnchor: 'middle', // 左对齐\r\n              textVerticalAnchor: 'middle'\r\n            }\r\n          },\r\n          ports: { // 连接桩\r\n            groups: {\r\n              bottom: {\r\n                position: 'bottom',\r\n                attrs: {\r\n                  circle: {\r\n                  // magnet: true,\r\n                    stroke: '#5f95ff',\r\n                    r: 3\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        true\r\n      )\r\n      Graph.registerNode( // 对话框内的虚线边框静态按钮\r\n        'dotted-button',\r\n        {\r\n          inherit: 'rect', // 继承于 rect 节点\r\n          width: 60,\r\n          height: 25,\r\n          attrs: {\r\n            body: {\r\n            // rx: 6,\r\n            // ry: 6,\r\n              fill: '#eff4ff',\r\n              stroke: '#b8b0b0',\r\n              strokeWidth: 1,\r\n              strokeDasharray: 8\r\n            },\r\n            text: {\r\n              fontSize: 12,\r\n              fill: '#b8b0b0',\r\n              fontFamily: 'Pingfang-medium, Arial, helvetica, sans-serif',\r\n              textAnchor: 'middle', // 左对齐\r\n              textVerticalAnchor: 'middle'\r\n            }\r\n          }\r\n        },\r\n        true\r\n      )\r\n      Graph.registerNode( // 节点左上方的标题节点\r\n        'title-node',\r\n        {\r\n          inherit: 'rect',\r\n          attrs: {\r\n            body: {\r\n              fill: 'transparent',\r\n              stroke: ''\r\n            },\r\n            label: {\r\n              fill: '#000',\r\n              fontSize: 12\r\n            }\r\n          },\r\n          data: {\r\n            type: 'title-node'\r\n          }\r\n        },\r\n        true\r\n      )\r\n    },\r\n    initRhombicNode () { // 初始化菱形节点\r\n      // #region 初始化图形\r\n      const ports = {\r\n        groups: {\r\n          top: {\r\n            position: 'top',\r\n            attrs: {\r\n              circle: {\r\n                r: 4,\r\n                magnet: true,\r\n                stroke: '#5F95FF',\r\n                strokeWidth: 1,\r\n                fill: '#fff',\r\n                style: {\r\n                  visibility: 'hidden'\r\n                }\r\n              }\r\n            }\r\n          },\r\n          right: {\r\n            position: 'right',\r\n            attrs: {\r\n              circle: {\r\n                r: 4,\r\n                magnet: true,\r\n                stroke: '#5F95FF',\r\n                strokeWidth: 1,\r\n                fill: '#fff',\r\n                style: {\r\n                  visibility: 'hidden'\r\n                }\r\n              }\r\n            }\r\n          },\r\n          bottom: {\r\n            position: 'bottom',\r\n            attrs: {\r\n              circle: {\r\n                r: 4,\r\n                magnet: true,\r\n                stroke: '#5F95FF',\r\n                strokeWidth: 1,\r\n                fill: '#fff',\r\n                style: {\r\n                  visibility: 'hidden'\r\n                }\r\n              }\r\n            }\r\n          },\r\n          left: {\r\n            position: 'left',\r\n            attrs: {\r\n              circle: {\r\n                r: 4,\r\n                magnet: true,\r\n                stroke: '#5F95FF',\r\n                strokeWidth: 1,\r\n                fill: '#fff',\r\n                style: {\r\n                  visibility: 'hidden'\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        items: [\r\n          {\r\n            group: 'top'\r\n          },\r\n          {\r\n            group: 'right'\r\n          },\r\n          {\r\n            group: 'bottom'\r\n          },\r\n          {\r\n            group: 'left'\r\n          }\r\n        ]\r\n      }\r\n      Graph.registerNode(\r\n        'custom-polygon',\r\n        {\r\n          inherit: 'polygon',\r\n          width: 100,\r\n          height: 50,\r\n          attrs: {\r\n            body: {\r\n              strokeWidth: 1,\r\n              stroke: '#5F95FF',\r\n              fill: '#EFF4FF',\r\n              refPoints: '0,10 10,0 20,10 10,20'\r\n            },\r\n            // text: {\r\n            //   fontSize: 12,\r\n            //   fill: '#262626',\r\n            //   textAnchor: 'left', // 左对齐\r\n            //   refX: -5, // x 轴偏移量\r\n            //   refY: -5,\r\n            //   text: '判定'\r\n            // }\r\n            text: {\r\n              text: '判定'\r\n            }\r\n          },\r\n          data: {\r\n            type: 'judge',\r\n            ctype: '判定'\r\n          },\r\n          ports: {\r\n            ...ports,\r\n            items: [\r\n              {\r\n                group: 'top'\r\n              },\r\n              {\r\n                group: 'bottom'\r\n              }\r\n            ]\r\n          }\r\n        },\r\n        true\r\n      )\r\n    },\r\n    initGraphListen () {\r\n      this.graph.on('node:removed', ({ node, index, options }) => {\r\n        // console.debug('node:removed: ', node, index, options)\r\n        return false\r\n      })\r\n      this.graph.on('node:added', ({ node, index, options }) => {\r\n        // console.debug('node:added: ', node, index, options)\r\n        store.commit('flow/setGraphList', {\r\n          serviceId: this.serviceId,\r\n          graphInfo: this.graph.toJSON()\r\n        })\r\n        store.commit('flow/setNodeList', {\r\n          serviceId: this.serviceId,\r\n          nodeList: this.graph.getNodes()\r\n        })\r\n      })\r\n      this.graph.on('cell:mouseenter', ({ cell }) => {\r\n        // console.debug('mouseenter cell: ', cell)\r\n        if (cell.isNode()) {\r\n          cell.getData().nodeType !== 1 && cell.id !== 'start' && !cell.hasParent() && this.isEdit && cell.addTools([\r\n            {\r\n              name: 'button-remove',\r\n              args: {\r\n                x: '100%',\r\n                y: '50%',\r\n                offset: { x: -10, y: 0 },\r\n                onClick: async (payload) => {\r\n                  const { cell, e } = payload\r\n                  // console.debug('button-remove: ', e, cell)\r\n                  try {\r\n                    const res = await deleteNodeAPI({\r\n                      nodeId: cell.getData().nodeId\r\n                    })\r\n                    if (res.code === 1000) {\r\n                      cell.remove()\r\n                      // console.debug('graph: ', this.graph.toJSON())\r\n                      this.jsonToGraph(this.graph.toJSON())\r\n                      return true\r\n                    }\r\n                  } catch (error) {\r\n                    console.error('delete node error: ', error)\r\n                    return false\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          ])\r\n        } else {\r\n          cell.addTools(['vertices', 'segments']) // 线段工具\r\n        }\r\n      })\r\n      this.graph.on('cell:mouseleave', ({ cell }) => {\r\n        cell.removeTools()\r\n      })\r\n      this.graph.on('node:click', ({ e, x, y, node, view }) => { // 节点点击事件\r\n        const { type, nodeId, nodeType } = node.getData()\r\n        console.debug('click: node.getData(): ', node.getData())\r\n        if ((type !== 'skill' || nodeType !== 4) && !node.hasParent()) {\r\n          this.$emit('updateDetail', true)\r\n          // save to vuex\r\n          store.commit('flow/setCellRenderData', node)\r\n          store.commit('flow/setNodeType', type)\r\n          store.commit('flow/setNodeId', nodeId)\r\n        }\r\n      })\r\n      this.graph.on('resize', ({ width, height }) => {\r\n        this.graph.centerContent()\r\n      })\r\n    },\r\n    normalizeNodePosition (nodes) { // 格式化节点位置\r\n      nodes.forEach((node) => {\r\n        node.x -= node.size.width / 2\r\n        node.y -= node.size.height / 2\r\n      })\r\n    },\r\n    updateStartNodeLink (payload) { // 更新节点信息 连线布局\r\n      // console.debug('updateStartNodeLink: ')\r\n      if (payload.serviceId !== this.serviceId) return\r\n      setTimeout(() => {\r\n        this.getTreeData()\r\n        store.commit('flow/updateStatuTitle', {\r\n          serviceId: this.serviceId\r\n        })\r\n      }, 500)\r\n    },\r\n    updateJudgeNodeRender (formInfo) {\r\n      // console.debug('updateJudgeNodeRender: ')\r\n      setTimeout(() => {\r\n        this.getTreeData()\r\n        store.commit('flow/updateStatuTitle', {\r\n          serviceId: this.serviceId\r\n        })\r\n      }, 500)\r\n    },\r\n    updateDialogueNodeRender (formInfo) { // 更新画布中 刚更新过的对话框节点 渲染\r\n      // console.debug('updateDialogueNodeRender: ')\r\n      setTimeout(() => {\r\n        this.getTreeData()\r\n        store.commit('flow/updateStatuTitle', {\r\n          serviceId: this.serviceId\r\n        })\r\n      }, 500)\r\n      this.$nextTick(() => {\r\n        this.logGraph()\r\n      })\r\n    },\r\n    async getAnyliseTreeData (formData) {\r\n      try {\r\n        delete formData.time\r\n        const res = await getAnyliseTreeAPI(formData)\r\n        if (res.code === 1000) {\r\n          // console.debug('getAnyliseTreeData')\r\n          this.tree = res.data\r\n          this.treeToGraph()\r\n          this.showAnylise = true\r\n        }\r\n      } catch (error) {\r\n        console.error('getAnyliseTreeData error: ', error)\r\n      }\r\n    },\r\n    initVuexListen () {\r\n      store.subscribe((mutation, state) => {\r\n        if (mutation.type === 'flow/updateStartNodeLink') {\r\n          // console.debug('mutation type triggle,', mutation.type)\r\n          if (mutation.payload.serviceId !== this.serviceId) return\r\n          this.updateStartNodeLink(mutation.payload)\r\n        }\r\n        if (mutation.type === 'flow/updateDialogueDetail') {\r\n          this.updateDialogueNodeRender(mutation.payload)\r\n        }\r\n        if (mutation.type === 'flow/updateJudgeNodeDetail') {\r\n          this.updateJudgeNodeRender(mutation.payload)\r\n        }\r\n        if (mutation.type === 'flow/updateGraphTree') {\r\n          if (mutation.payload.serviceId !== this.serviceId) return\r\n          console.debug('mutation updateGraphTree getTreeData')\r\n          this.getTreeData().then(() => {\r\n            setTimeout(() => {\r\n              this.getVersionId()\r\n            }, 800)\r\n          })\r\n          setTimeout(() => {\r\n            store.commit('flow/updateVersionId', {\r\n              serviceId: this.serviceId\r\n            })\r\n          })\r\n        }\r\n        if (mutation.type === 'flow/setAnyliseFilterForm') {\r\n          // console.debug('setAnyliseFilterForm: ', mutation.payload)\r\n          if (mutation.payload.serviceId !== this.serviceId) return\r\n          this.getAnyliseTreeData(mutation.payload)\r\n        }\r\n      })\r\n    },\r\n    async getVersionId () {\r\n      try {\r\n        const res = await getVersionIdAPI({\r\n          serviceId: this.serviceId\r\n        })\r\n        if (res.code === 1000) {\r\n          this.versionId = res.data\r\n        }\r\n      } catch (error) {\r\n        console.error('getVersionId error: ', error)\r\n      }\r\n    },\r\n    async getTreeData () {\r\n      try {\r\n        const res = await getTreeDataAPI({\r\n          serviceId: Number(this.serviceId)\r\n        })\r\n        console.debug('getTreeData res: ', res)\r\n        if (res.code === 1000) {\r\n          this.tree = res.data\r\n        }\r\n      } catch (error) {\r\n        console.error('getTreeData error: ', error)\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    containerId () {\r\n      return `graphContainer_${this.serviceId}`\r\n    },\r\n    isEdit () {\r\n      return this.$route.query.mode === 'edit'\r\n    }\r\n  },\r\n  watch: {\r\n    tree: {\r\n      handler (newVal, oldVal) {\r\n        // console.debug('tree watch: ', newVal, oldVal)\r\n        this.treeToGraph()\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  created () {\r\n    if (this.isEdit) {\r\n      this.getVersionId()\r\n      // console.debug('created getTreeData')\r\n      this.getTreeData()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.initConfig()\r\n    this.initGraph()\r\n    this.initGraphListen()\r\n    this.initVuexListen()\r\n    store.commit('flow/updateStatuTitle', {\r\n      serviceId: this.serviceId\r\n    })\r\n  },\r\n  activated () {\r\n    if (this.graph && this.graph.getCellCount() > 0) {\r\n      this.graph.clearCells()\r\n    }\r\n    if (!this.isEdit) {\r\n      store.commit('flow/initAnyliseData', {\r\n        serviceId: this.serviceId\r\n      })\r\n    } else {\r\n      // console.debug('activated isEdit getTreeData')\r\n      this.getVersionId()\r\n      this.getTreeData()\r\n      store.commit('flow/updateStatuTitle', {\r\n        serviceId: this.serviceId\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n.graph-component {\r\n    position relative\r\n    display flex\r\n    flex-direction row\r\n    justify-content flex-end\r\n    width 100%\r\n    height 100%\r\n    &.limit-graph {\r\n        width calc(100% - 400px)\r\n    }\r\n    .graph-simply-container {\r\n        width 100%\r\n        height 100%\r\n    }\r\n}\r\n\r\n// transform\r\n>>>.x6-widget-transform {\r\n    // margin: -1px 0 0 -1px;\r\n    // padding: 0;\r\n    border: 1px solid #239edd;\r\n    // border-radius: 6px;\r\n  }\r\n\r\n  >>>.x6-widget-transform > div {\r\n    border: 1px solid #239edd;\r\n  }\r\n\r\n  >>>.x6-widget-transform > div:hover {\r\n    background-color: #3dafe4;\r\n  }\r\n\r\n  >>>.x6-widget-transform-active-handle {\r\n    background-color: #3dafe4;\r\n  }\r\n\r\n//   >>>.x6-widget-transform-resize {\r\n//     border-radius: 0;\r\n//   }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Graph.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Graph.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Graph.vue?vue&type=template&id=0855fda0&scoped=true&\"\nimport script from \"./Graph.vue?vue&type=script&lang=js&\"\nexport * from \"./Graph.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Graph.vue?vue&type=style&index=0&id=0855fda0&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0855fda0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"graph-info-detail-component\"},[_c('el-drawer',{ref:\"drawer\",attrs:{\"custom-class\":\"detail-drawer\",\"title\":_vm.title,\"visible\":_vm.showBool,\"direction\":_vm.direction,\"before-close\":_vm.handleClose,\"close-on-press-escape\":false,\"modal-append-to-body\":false,\"wrapperClosable\":true,\"modal\":false,\"size\":400},on:{\"update:visible\":function($event){_vm.showBool=$event}}},[(_vm.nodeType === 'start')?[_c('el-form',{attrs:{\"model\":_vm.startForm,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"操作：\"}},[_c('el-col',{attrs:{\"span\":11}},[_c('el-select',{attrs:{\"placeholder\":\"调用\"},on:{\"change\":_vm.updateNodeOrSkillPick},model:{value:(_vm.startForm.NodeOrSkill),callback:function ($$v) {_vm.$set(_vm.startForm, \"NodeOrSkill\", $$v)},expression:\"startForm.NodeOrSkill\"}},[_c('el-option',{attrs:{\"label\":\"调用技能\",\"value\":1}}),_c('el-option',{attrs:{\"label\":\"调用节点\",\"value\":2}})],1)],1),_c('el-col',{attrs:{\"span\":1}},[_vm._v(\"  \")]),_c('el-col',{attrs:{\"span\":11}},[(_vm.startForm.NodeOrSkill === 1)?_c('el-select',{attrs:{\"placeholder\":\"请选择技能\",\"filterable\":\"\"},model:{value:(_vm.startForm.NodeOrSkillVal),callback:function ($$v) {_vm.$set(_vm.startForm, \"NodeOrSkillVal\", $$v)},expression:\"startForm.NodeOrSkillVal\"}},_vm._l((_vm.skillList),function(item){return _c('el-option',{key:item.skillId,attrs:{\"label\":item.skillName,\"value\":Number(item.skillId)}})}),1):_c('el-select',{attrs:{\"placeholder\":\"请选择节点\",\"filterable\":\"\"},model:{value:(_vm.startForm.NodeOrSkillVal),callback:function ($$v) {_vm.$set(_vm.startForm, \"NodeOrSkillVal\", $$v)},expression:\"startForm.NodeOrSkillVal\"}},_vm._l((_vm.nodeSelectList),function(item){return _c('el-option',{key:item.nodeId,attrs:{\"label\":item.title,\"value\":item.nodeId}})}),1)],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveStartNodeOperate}},[_vm._v(\"保存\")])],1)],1)]:(_vm.nodeType === 'judge')?[_c('JudgeDetail',{ref:\"judgeDetailComponent\",attrs:{\"versionId\":_vm.versionId,\"skillList\":_vm.skillList,\"childNodeList\":_vm.nodeSelectList,\"renderData\":_vm.judgeDetailData},on:{\"submit\":_vm.handleSubmitJudge}})]:(_vm.nodeType === 'dialogue')?[_c('DialogueDetail',{ref:\"dialogueDetailComponent\",attrs:{\"versionId\":_vm.versionId,\"skillList\":_vm.skillList,\"childNodeList\":_vm.nodeSelectList,\"renderData\":_vm.dialogueDetailData},on:{\"submit\":_vm.handleSubmitDialogue}})]:_vm._e()],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"dialogue-detail-wrapper\"},[_c('el-form',{ref:\"dialogueForm\",staticClass:\"dialogue-form-wrapper\",attrs:{\"rules\":_vm.rules,\"model\":_vm.detailForm,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"节点ID：\"}},[_vm._v(_vm._s(_vm.detailForm.nodeId))]),_c('el-form-item',{attrs:{\"label\":\"命名：\",\"prop\":\"title\"}},[_c('el-col',{attrs:{\"span\":11}},[_c('el-input',{model:{value:(_vm.detailForm.title),callback:function ($$v) {_vm.$set(_vm.detailForm, \"title\", $$v)},expression:\"detailForm.title\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"显示时机：\"}},[_c('el-col',{staticClass:\"flex-box\"},[_c('span',{staticClass:\"text\",staticStyle:{\"margin-left\":\"0\"}},[_vm._v(\"延后\")]),_c('div',{staticClass:\"delay-text-box\"},[_c('el-input',{staticClass:\"input-wrapper\",model:{value:(_vm.detailForm.delayHours),callback:function ($$v) {_vm.$set(_vm.detailForm, \"delayHours\", $$v)},expression:\"detailForm.delayHours\"}}),_c('span',{staticClass:\"text\"},[_vm._v(\"小时\")]),_c('el-input',{staticClass:\"input-wrapper\",model:{value:(_vm.detailForm.delayMinutes),callback:function ($$v) {_vm.$set(_vm.detailForm, \"delayMinutes\", $$v)},expression:\"detailForm.delayMinutes\"}}),_c('span',{staticClass:\"text\"},[_vm._v(\"分钟\")]),_c('el-input',{staticClass:\"input-wrapper\",model:{value:(_vm.detailForm.delaySeconds),callback:function ($$v) {_vm.$set(_vm.detailForm, \"delaySeconds\", $$v)},expression:\"detailForm.delaySeconds\"}}),_c('span',{staticClass:\"text\"},[_vm._v(\"秒\")])],1)])],1),_c('el-form-item',{attrs:{\"label\":\"显示时长：\"}},[_c('el-input-number',{attrs:{\"controls-position\":\"right\",\"min\":15,\"max\":600},on:{\"change\":_vm.handleDisplayDuration},model:{value:(_vm.detailForm.displayDuration),callback:function ($$v) {_vm.$set(_vm.detailForm, \"displayDuration\", $$v)},expression:\"detailForm.displayDuration\"}}),_vm._v(\" s \")],1),_c('el-form-item',{attrs:{\"label\":\"文案\",\"prop\":\"content\"}},[_c('el-col',{attrs:{\"span\":11}},[_c('el-input',{attrs:{\"placeholder\":\"请编辑\"},model:{value:(_vm.detailForm.content),callback:function ($$v) {_vm.$set(_vm.detailForm, \"content\", $$v)},expression:\"detailForm.content\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"按钮\"}},[_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.addButton}},[_vm._v(\"添加按钮\")]),_c('div',{staticClass:\"buttons-layout\"},[_c('el-col',{attrs:{\"span\":20}},[(_vm.detailForm.interActifyButtonsList.length > 0)?_c('ul',{staticClass:\"buttons-wrapper\"},[_c('draggable',{attrs:{\"group\":\"buttonList\"},model:{value:(_vm.detailForm.interActifyButtonsList),callback:function ($$v) {_vm.$set(_vm.detailForm, \"interActifyButtonsList\", $$v)},expression:\"detailForm.interActifyButtonsList\"}},_vm._l((_vm.detailForm.interActifyButtonsList),function(item,index){return _c('li',{key:item.id,staticClass:\"button-item\"},[(_vm.buttonActiveIndex === index)?_c('i',{staticClass:\"el-icon-caret-right\",staticStyle:{\"margin-right\":\"5px\",\"color\":\"#409EFF\"}}):_c('i',{staticStyle:{\"width\":\"14px\",\"height\":\"14px\",\"margin-right\":\"5px\"}},[_vm._v(\" \")]),(item.showEditInput)?_c('el-input',{ref:'editInput_' + index,refInFor:true,staticStyle:{\"width\":\"200px\"},attrs:{\"size\":\"mini\",\"maxlength\":10},on:{\"blur\":function($event){item.showEditInput = false}},model:{value:(item.name),callback:function ($$v) {_vm.$set(item, \"name\", $$v)},expression:\"item.name\"}}):_c('el-button',{staticStyle:{\"width\":\"200px\"},on:{\"click\":function($event){return _vm.clickOperateButton(index)}}},[_vm._v(\" \"+_vm._s(item.name)+\" \"),_c('i',{staticClass:\"el-icon-edit el-icon--right\",on:{\"click\":function($event){return _vm.updateEditInput(index)}}})]),_c('el-button',{staticClass:\"el-icon-close delete\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.deleteButton(index)}}})],1)}),0)],1):_vm._e()]),_c('el-col',{attrs:{\"span\":5}},[_c('ul',{staticClass:\"static-buttons-wrapper\"},[_c('li',{staticClass:\"button-item\"},[_vm._v(\"用户返回\")]),_c('li',{staticClass:\"button-item\"},[_vm._v(\"自动消失\")])])])],1),(_vm.buttonDetail)?_c('div',{staticClass:\"button-detail\"},[_c('span',{staticClass:\"button-id\"},[_vm._v(\"按钮ID：\"+_vm._s(_vm.buttonDetail.buttonId))]),_c('Behavior',{attrs:{\"list\":_vm.buttonDetail.nextNodeList,\"skillList\":_vm.skillList,\"childNodeList\":_vm.childNodeList,\"desc\":\"操作\",\"isLimitOnly\":false},on:{\"del\":_vm.deleteOperate,\"add\":_vm.addOperate}})],1):_vm._e()],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"保存\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"behavior-wrapper\"},[(_vm.list.length > 0)?_c('ul',{staticClass:\"all-list-wrapper\"},_vm._l((_vm.list),function(item,index){return _c('li',{key:index,staticClass:\"list-item\"},[_c('span',{staticClass:\"head-text\"},[_vm._v(_vm._s(_vm.desc)+\" :\")]),_c('el-select',{staticClass:\"short-select-width\",staticStyle:{\"margin-right\":\"5px\"},attrs:{\"placeholder\":\"调用\"},on:{\"change\":_vm.updatePicked},model:{value:(item.callType),callback:function ($$v) {_vm.$set(item, \"callType\", $$v)},expression:\"item.callType\"}},[_c('el-option',{attrs:{\"label\":\"调用技能\",\"value\":1}}),_c('el-option',{attrs:{\"label\":\"调用节点\",\"value\":2,\"disabled\":_vm.disableAdd}})],1),(item.callType === 1)?_c('el-select',{staticClass:\"short-select-width\",attrs:{\"placeholder\":\"选择技能\",\"filterable\":\"\"},on:{\"change\":_vm.updateSkillPicked},model:{value:(item.nextSkillId),callback:function ($$v) {_vm.$set(item, \"nextSkillId\", $$v)},expression:\"item.nextSkillId\"}},_vm._l((_vm.skillList),function(skillItem){return _c('el-option',{key:skillItem.skillId,attrs:{\"label\":skillItem.skillName,\"value\":Number(skillItem.skillId)}})}),1):(item.callType === 2)?_c('el-select',{staticClass:\"short-select-width\",attrs:{\"placeholder\":\"选择节点\",\"filterable\":\"\"},on:{\"change\":_vm.updateNodePicked},model:{value:(item.nextNodeId),callback:function ($$v) {_vm.$set(item, \"nextNodeId\", $$v)},expression:\"item.nextNodeId\"}},_vm._l((_vm.childNodeList),function(nodeItem){return _c('el-option',{key:nodeItem.nodeId,attrs:{\"label\":nodeItem.title,\"value\":nodeItem.nodeId}})}),1):_vm._e(),(item.callType === 1 && item.nextSkillId && _vm.getCurrentSkillItem(index).paramList.length > 0)?_vm._l((_vm.getCurrentSkillItem(index).paramList),function(paramItem){return _c('el-form-item',{key:paramItem.paramKey,attrs:{\"label\":paramItem.paramName}},[_c('el-input',{staticStyle:{\"margin-top\":\"5px\",\"height\":\"30px\"},attrs:{\"type\":paramItem.dataType === 1 ? 'number': 'text'},model:{value:(item[paramItem.paramKey]),callback:function ($$v) {_vm.$set(item, paramItem.paramKey, $$v)},expression:\"item[paramItem.paramKey]\"}})],1)}):_vm._e(),_c('el-button',{staticClass:\"el-icon-close delete\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.del(index)}}})],2)}),0):_vm._e(),_c('el-button',{attrs:{\"type\":\"text\"},on:{\"click\":_vm.add}},[_vm._v(\"+添加\"+_vm._s(_vm.desc))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"behavior-wrapper\">\r\n    <ul class=\"all-list-wrapper\" v-if=\"list.length > 0\">\r\n      <li\r\n        class=\"list-item\"\r\n        v-for=\"(item, index) in list\"\r\n        :key=\"index\"\r\n      >\r\n        <span class=\"head-text\">{{ desc }} :</span>\r\n        <el-select\r\n          class=\"short-select-width\"\r\n          v-model=\"item.callType\"\r\n          placeholder=\"调用\"\r\n          style=\"margin-right: 5px;\"\r\n          @change=\"updatePicked\"\r\n        >\r\n          <el-option label=\"调用技能\" :value=\"1\"></el-option>\r\n          <el-option label=\"调用节点\" :value=\"2\" :disabled=\"disableAdd\"></el-option>\r\n        </el-select>\r\n        <el-select\r\n          class=\"short-select-width\"\r\n          v-if=\"item.callType === 1\"\r\n          v-model=\"item.nextSkillId\"\r\n          placeholder=\"选择技能\"\r\n          filterable\r\n          @change=\"updateSkillPicked\"\r\n        >\r\n          <el-option\r\n            v-for=\"skillItem in skillList\"\r\n            :key=\"skillItem.skillId\"\r\n            :label=\"skillItem.skillName\"\r\n            :value=\"Number(skillItem.skillId)\"\r\n          ></el-option>\r\n        </el-select>\r\n        <el-select\r\n          class=\"short-select-width\"\r\n          v-else-if=\"item.callType === 2\"\r\n          v-model=\"item.nextNodeId\"\r\n          placeholder=\"选择节点\"\r\n          @change=\"updateNodePicked\"\r\n          filterable\r\n        >\r\n          <el-option\r\n            v-for=\"nodeItem in childNodeList\"\r\n            :key=\"nodeItem.nodeId\"\r\n            :label=\"nodeItem.title\"\r\n            :value=\"nodeItem.nodeId\"\r\n          ></el-option>\r\n        </el-select>\r\n        <template v-if=\"item.callType === 1 && item.nextSkillId && getCurrentSkillItem(index).paramList.length > 0\">\r\n          <el-form-item\r\n            v-for=\"(paramItem) in getCurrentSkillItem(index).paramList\"\r\n            :key=\"paramItem.paramKey\"\r\n            :label=\"paramItem.paramName\"\r\n          >\r\n            <el-input\r\n              style=\"margin-top: 5px;height: 30px;\"\r\n              :type=\"paramItem.dataType === 1 ? 'number': 'text'\"\r\n              v-model=\"item[paramItem.paramKey]\"\r\n            >\r\n            </el-input>\r\n          </el-form-item>\r\n        </template>\r\n        <el-button type=\"text\" @click=\"del(index)\" class=\"el-icon-close delete\"></el-button>\r\n      </li>\r\n    </ul>\r\n    <el-button type=\"text\" @click=\"add\">+添加{{ desc }}</el-button>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  props: {\r\n    isLimitOnly: { // 是否限制唯一一个\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    desc: { // 描述: 调用 | 操作\r\n      type: String,\r\n      default: ''\r\n    },\r\n    skillList: { // 数据来源 - 技能列表\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    childNodeList: { // 数据来源 - 节点列表\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    list: { // 数据来源 - 下一节点列表\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    parentIndex: { // list的父级节点索引 多层结构会用到\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n    }\r\n  },\r\n  computed: {\r\n    disableAdd () {\r\n      return this.list.filter((item) => {\r\n        return item.callType === 2\r\n      }).length >= 1\r\n    }\r\n  },\r\n  watch: {\r\n    //\r\n  },\r\n  methods: {\r\n    getCurrentSkillItem (index) {\r\n      const res = this.skillList.find(item => item.skillId.toString() === this.list[index].nextSkillId.toString()) || []\r\n      return res\r\n    },\r\n    updatePicked () {\r\n    //\r\n    },\r\n    updateSkillPicked () {\r\n      // this.list[index].nextSkillId = listItem.nextSkillId\r\n    },\r\n    updateNodePicked () {\r\n      // console.debug('updateNodePicked', listItem)\r\n    },\r\n    getNodeId (node) {\r\n      const data = node.getData()\r\n      if (data.nodeType === 3 || data.nodeType === 2 || data.nodeType === 1) {\r\n        return data.nodeId\r\n      } else if (data.type === 1 && data['button-type'] === 'dialogue-button') {\r\n        return data.buttonId\r\n      }\r\n      return ''\r\n    },\r\n    add () { // 添加操作\r\n      this.$emit('add', { parentIndex: this.$props.parentIndex })\r\n    },\r\n    del (index) {\r\n      this.$emit('del', { levelIndex: index, parentIndex: this.$props.parentIndex })\r\n    }\r\n  },\r\n  mounted () {\r\n    // console.debug('mounted nodeList: ', this.skillList)\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n    .behavior-wrapper {\r\n        // padding-left 10px\r\n        .all-list-wrapper {\r\n            .head-text {\r\n                white-space nowrap\r\n                margin-right 5px\r\n                color #666\r\n                font-size 14px\r\n            }\r\n            .list-item {\r\n                display flex\r\n                align-items center\r\n                flex-wrap wrap\r\n                padding 10px\r\n                .short-select-width {\r\n                    width 110px\r\n                    margin-bottom 5px\r\n                    margin-left 5px\r\n                }\r\n                .delete {\r\n                    color #666\r\n                    font-size 14px\r\n                    margin-left 10px\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=e9d29416&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=e9d29416&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e9d29416\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"dialogue-detail-wrapper\">\r\n    <el-form class=\"dialogue-form-wrapper\" ref=\"dialogueForm\" :rules=\"rules\" :model=\"detailForm\"\r\n             label-width=\"80px\"\r\n    >\r\n      <el-form-item label=\"节点ID：\">{{ detailForm.nodeId }}</el-form-item>\r\n      <el-form-item label=\"命名：\" prop=\"title\">\r\n        <el-col :span=\"11\">\r\n          <el-input v-model=\"detailForm.title\"></el-input>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"显示时机：\">\r\n        <el-col class=\"flex-box\">\r\n          <span class=\"text\" style=\"margin-left: 0;\">延后</span>\r\n          <div class=\"delay-text-box\">\r\n            <el-input class=\"input-wrapper\" v-model=\"detailForm.delayHours\"></el-input><span class=\"text\">小时</span>\r\n            <el-input class=\"input-wrapper\" v-model=\"detailForm.delayMinutes\"></el-input><span class=\"text\">分钟</span>\r\n            <el-input class=\"input-wrapper\" v-model=\"detailForm.delaySeconds\"></el-input><span class=\"text\">秒</span>\r\n          </div>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"显示时长：\">\r\n        <el-input-number v-model=\"detailForm.displayDuration\" controls-position=\"right\" @change=\"handleDisplayDuration\" :min=\"15\"\r\n                         :max=\"600\"\r\n        ></el-input-number> s\r\n      </el-form-item>\r\n      <el-form-item label=\"文案\" prop=\"content\">\r\n        <el-col :span=\"11\">\r\n          <el-input v-model=\"detailForm.content\" placeholder=\"请编辑\"></el-input>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"按钮\">\r\n        <el-button type=\"text\" @click=\"addButton\">添加按钮</el-button>\r\n        <div class=\"buttons-layout\">\r\n          <el-col :span=\"20\">\r\n            <ul class=\"buttons-wrapper\" v-if=\"detailForm.interActifyButtonsList.length > 0\">\r\n              <draggable v-model=\"detailForm.interActifyButtonsList\" group=\"buttonList\">\r\n                <li\r\n                  v-for=\"(item, index) in detailForm.interActifyButtonsList\"\r\n                  :key=\"item.id\"\r\n                  class=\"button-item\"\r\n                >\r\n                  <i v-if=\"buttonActiveIndex === index\" class=\"el-icon-caret-right\" style=\"margin-right: 5px;color: #409EFF; \"></i>\r\n                  <i v-else style=\"width: 14px;height: 14px;margin-right: 5px;\">&nbsp;</i>\r\n                  <el-input\r\n                    v-model=\"item.name\"\r\n                    size=\"mini\"\r\n                    style=\"width: 200px;\"\r\n                    :maxlength=\"10\"\r\n                    :ref=\"'editInput_' + index\"\r\n                    v-if=\"item.showEditInput\"\r\n                    @blur=\"item.showEditInput = false\"\r\n                  >\r\n                  </el-input>\r\n                  <el-button\r\n                    v-else\r\n                    style=\"width: 200px;\"\r\n                    @click=\"clickOperateButton(index)\"\r\n                  >\r\n                    {{ item.name }}\r\n                    <i\r\n                      class=\"el-icon-edit el-icon--right\"\r\n                      @click=\"updateEditInput(index)\"\r\n                    ></i>\r\n                  </el-button>\r\n                  <el-button type=\"text\" @click=\"deleteButton(index)\" class=\"el-icon-close delete\"></el-button>\r\n                </li>\r\n              </draggable>\r\n            </ul>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <ul class=\"static-buttons-wrapper\">\r\n              <li class=\"button-item\">用户返回</li>\r\n              <li class=\"button-item\">自动消失</li>\r\n            </ul>\r\n          </el-col>\r\n        </div>\r\n        <div class=\"button-detail\" v-if=\"buttonDetail\">\r\n          <span class=\"button-id\">按钮ID：{{ buttonDetail.buttonId }}</span>\r\n          <Behavior\r\n            :list=\"buttonDetail.nextNodeList\"\r\n            :skillList=\"skillList\"\r\n            :childNodeList=\"childNodeList\"\r\n            desc=\"操作\"\r\n            :isLimitOnly=\"false\"\r\n            @del=\"deleteOperate\"\r\n            @add=\"addOperate\"\r\n          ></Behavior>\r\n        </div>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitForm\">保存</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport draggable from 'vuedraggable'\r\nimport Behavior from '@/components/Behavior/Index.vue'\r\nexport default {\r\n  components: {\r\n    Behavior,\r\n    draggable\r\n  },\r\n  props: {\r\n    skillList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    childNodeList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    renderData: {\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    versionId: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      detailForm: {\r\n        title: '', // 命名\r\n        nodeId: '', // 节点id\r\n        interActifyButtonsList: [], // 交互按钮列表\r\n        staticButtonsList: [], // 静态按钮列表\r\n        delayHours: null,\r\n        delayMinutes: null,\r\n        delaySeconds: null,\r\n        displayDuration: '',\r\n        content: '' // 文案\r\n      },\r\n      rules: {\r\n        title: [\r\n          { required: true, message: '请输入命名', trigger: 'blur' },\r\n          { min: 1, max: 50, message: '不可超过50个字符', trigger: 'blur' }\r\n        ],\r\n        content: [\r\n          { required: true, message: '请输入文案', trigger: 'blur' },\r\n          { min: 1, max: 50, message: '不可超过50个字符', trigger: 'blur' }\r\n        ]\r\n      },\r\n      buttonDetail: {}, // 按钮详情\r\n      buttonActiveIndex: 0\r\n    }\r\n  },\r\n  computed: {},\r\n  methods: {\r\n    handleDisplayDuration () {\r\n      console.debug('handleDisplayDuration', this.detailForm.displayDuration)\r\n    },\r\n    getCurrentSkillItem (operateItemIndex) {\r\n      // console.debug('buttonDetail: ', operateItemIndex)\r\n      const res = this.skillList.find(item => item.skillId.toString() === this.buttonDetail.nextNodeList[operateItemIndex].nextSkillId.toString()) || []\r\n      // console.debug('getCurrentSkillItem res: ', res)\r\n      return res\r\n    },\r\n    addButton () {\r\n      console.debug('addButton')\r\n      if (this.detailForm.interActifyButtonsList.length >= 4) {\r\n        this.$message.warning('最多添加4个按钮')\r\n        return\r\n      }\r\n      // this.detailForm.interActifyButtonsList.push({\r\n      //   name: '按钮',\r\n      //   type: 1\r\n      // })\r\n      this.$set(this.detailForm, 'interActifyButtonsList', [...this.detailForm.interActifyButtonsList, {\r\n        name: '按钮',\r\n        type: 1\r\n      }])\r\n    },\r\n    updateSkillPicked (data) {\r\n      console.debug('updateSkillPicked', data)\r\n    },\r\n    updateNodePicked (data) {\r\n      console.debug('updateNodePicked', data)\r\n    },\r\n    deleteButton (index) {\r\n      // console.debug('deleteButton', index)\r\n      this.detailForm.interActifyButtonsList.splice(index, 1)\r\n    },\r\n    deleteOperate ({ levelIndex }) {\r\n      this.buttonDetail.nextNodeList.splice(levelIndex, 1)\r\n    },\r\n    addOperate () {\r\n      console.debug('addOperate')\r\n      const buttonItem = this.detailForm.interActifyButtonsList[this.buttonActiveIndex]\r\n      if (!buttonItem?.nextNodeList) {\r\n        this.$set(buttonItem, 'nextNodeList', [{ }])\r\n      } else {\r\n        buttonItem.nextNodeList.push({ })\r\n      }\r\n    },\r\n    updateEditInput (index) {\r\n      console.debug('updateEditInput', index)\r\n      this.$set(this.detailForm.interActifyButtonsList[index], 'showEditInput', true)\r\n      this.buttonDetail = this.detailForm.interActifyButtonsList[index]\r\n      this.buttonActiveIndex = index\r\n      this.$nextTick(() => {\r\n        this.$refs[`editInput_${index}`][0].$refs.input.focus()\r\n      })\r\n    },\r\n    clickOperateButton (index) {\r\n      this.buttonActiveIndex = index\r\n      this.buttonDetail = this.detailForm.interActifyButtonsList[index]\r\n    },\r\n    initTransformData (data) {\r\n      data.interActifyButtonsList.forEach((buttonItem, buttonIndex) => {\r\n        if (buttonItem.type === 2 || buttonItem.type === 3) {\r\n          this.detailForm.staticButtonsList.push(buttonItem)\r\n        } else {\r\n          buttonItem.nextNodeList.forEach((operateItem, operateIndex) => {\r\n            if (operateItem.callType === 1 && operateItem.skillParam) { // callType 1 技能 2 节点\r\n              operateItem.skillParam = JSON.parse(operateItem.skillParam)\r\n              operateItem.skillParam.forEach(paramItem => {\r\n                operateItem[paramItem.key] = paramItem.value\r\n              })\r\n              operateItem.nextNodeId = '' // 避免回填切换节点时，出现节点id\r\n            }\r\n            if (operateItem.callType === 2) {\r\n              operateItem.nextSkillId = ''\r\n            }\r\n          })\r\n        }\r\n      })\r\n      data.interActifyButtonsList = data.interActifyButtonsList.filter(item => item.type !== 2 && item.type !== 3)\r\n      return data\r\n    },\r\n    initData () {\r\n      // console.debug('renderData: ', this.$props.renderData)\r\n      let renderData = JSON.parse(JSON.stringify(this.$props.renderData))\r\n      renderData = this.initTransformData(renderData)\r\n      this.detailForm = {\r\n        ...this.detailForm,\r\n        ...renderData\r\n      }\r\n      this.clickOperateButton(0)\r\n      // console.debug('detailForm: ', this.detailForm)\r\n    },\r\n    transformSubmitData (data) {\r\n      const info = JSON.parse(JSON.stringify(data))\r\n      let {\r\n        nodeId,\r\n        title,\r\n        interActifyButtonsList,\r\n        staticButtonsList,\r\n        delayHours,\r\n        delayMinutes,\r\n        delaySeconds,\r\n        displayDuration,\r\n        content\r\n      } = info\r\n      interActifyButtonsList.forEach((buttonItem, buttonIndex) => {\r\n        if (buttonItem?.nextNodeList?.length > 0) {\r\n          buttonItem.nextNodeList.forEach((operateItem, operateIndex) => {\r\n            if (operateItem?.callType === 1 && operateItem?.nextSkillId) {\r\n              // console.debug('keys：', Object.keys(operateItem))\r\n              operateItem.skillParam = []\r\n              const keys = Object.keys(operateItem)\r\n              this.skillList.forEach((skillItem, skillIndex) => {\r\n                if (skillItem.skillId.toString() === operateItem?.nextSkillId.toString()) {\r\n                  const paramList = skillItem.paramList\r\n                  paramList.forEach((paramItem, paramIndex) => {\r\n                    const key = paramItem.paramKey\r\n                    if (!operateItem.skillParam) {\r\n                      operateItem.skillParam = []\r\n                    } else {\r\n                      if (typeof operateItem.skillParam === 'string') {\r\n                        operateItem.skillParam = JSON.parse(operateItem.skillParam)\r\n                      }\r\n                    }\r\n                    if (keys.includes(key)) {\r\n                      if (paramItem.dataType === 1) { // 1数值 2字符串\r\n                        operateItem.skillParam.push({\r\n                          key: paramItem.paramKey,\r\n                          name: paramItem.paramName,\r\n                          value: Number(operateItem[paramItem.paramKey])\r\n                        })\r\n                      } else if (paramItem.dataType === 2) {\r\n                        operateItem.skillParam.push({\r\n                          key: paramItem.paramKey,\r\n                          name: paramItem.paramName,\r\n                          value: (operateItem[paramItem.paramKey]).toString()\r\n                        })\r\n                      }\r\n                    }\r\n                  })\r\n                }\r\n              })\r\n              operateItem.skillParam = JSON.stringify(operateItem.skillParam)\r\n            }\r\n          })\r\n        }\r\n      })\r\n      if (staticButtonsList.length === 0) {\r\n        staticButtonsList = [{\r\n          type: 2,\r\n          name: '用户返回'\r\n        },\r\n        {\r\n          type: 3,\r\n          name: '自动消失'\r\n        }]\r\n      }\r\n      return {\r\n        nodeId,\r\n        title,\r\n        displayDuration,\r\n        delayHours: Number(delayHours) || 0,\r\n        delayMinutes: Number(delayMinutes) || 0,\r\n        delaySeconds: Number(delaySeconds) || 0,\r\n        content,\r\n        interActifyButtonsList: [\r\n          ...interActifyButtonsList,\r\n          ...staticButtonsList\r\n        ],\r\n        versionId: this.$props.versionId\r\n      }\r\n    },\r\n    submitForm () {\r\n      this.$refs.dialogueForm.validate(valid => {\r\n        if (valid) {\r\n          const info = this.transformSubmitData(this.detailForm)\r\n          this.$emit('submit', info)\r\n        } else {\r\n          // console.debug('submitForm invalid')\r\n          return false\r\n        }\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n  //\r\n  },\r\n  created () {\r\n    this.clickOperateButton(0)\r\n  },\r\n  watch: {\r\n    renderData: function (newval, oldval) {\r\n      // console.debug('renderData: ', newval)\r\n      this.initData()\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n        >>>.dialogue-form-wrapper {\r\n            .el-form-item__label {\r\n                white-space nowrap\r\n            }\r\n            .delay-text-box {\r\n                display flex\r\n                align-items center\r\n                flex-wrap no-wrap\r\n                .input-wrapper {\r\n                    width auto\r\n                    // margin 0 5px\r\n                }\r\n            }\r\n            .buttons-layout {\r\n                display flex\r\n                align-items flex-start\r\n                margin-left -40px\r\n                .buttons-wrapper {\r\n                    display flex\r\n                    // align-items center\r\n                    flex-wrap wrap\r\n                    flex-direction column\r\n                    .button-item {\r\n                        display flex\r\n                        align-items center\r\n                        margin-bottom 15px\r\n                        &:last-child {\r\n                            margin-bottom 0\r\n                        }\r\n                        .delete {\r\n                            color #666\r\n                            font-size 14px\r\n                            margin-left 10px\r\n                        }\r\n                    }\r\n                }\r\n                .static-buttons-wrapper {\r\n                    display flex\r\n                    flex-direction column\r\n                    align-items center\r\n                    .button-item {\r\n                        border 1px dashed #ccc\r\n                        font-size 12px\r\n                        color #666\r\n                        padding 2px\r\n                        white-space nowrap\r\n                        margin-bottom 5px\r\n                        // &:last-child {\r\n                        //     margin-bottom 0\r\n                        // }\r\n                    }\r\n                }\r\n            }\r\n            .button-detail {\r\n                margin-left -45px\r\n            }\r\n        }\r\n        >>>.flex-box {\r\n            display flex\r\n            align-items center\r\n        }\r\n        .text {\r\n            white-space nowrap\r\n            margin 0 5px\r\n            font-size 12px\r\n        }\r\n\r\n.button-id {\r\n    margin-bottom 5px\r\n    display inline-block\r\n}\r\n.operate-list-wrapper {\r\n    .head-text {\r\n        white-space nowrap\r\n        margin-right 5px\r\n    }\r\n    .operate-list-item {\r\n        display flex\r\n        align-items center\r\n        flex-wrap wrap\r\n        .delete {\r\n            color #666\r\n            font-size 14px\r\n            margin-left 10px\r\n        }\r\n    }\r\n    .short-select-width {\r\n        width 120px\r\n        margin-bottom 5px\r\n        margin-top 5px\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DialogueDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DialogueDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DialogueDetail.vue?vue&type=template&id=dff755ea&scoped=true&\"\nimport script from \"./DialogueDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./DialogueDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DialogueDetail.vue?vue&type=style&index=0&id=dff755ea&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dff755ea\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"judge-detail-wrapper\"},[_c('el-form',{ref:\"judgeForm\",staticClass:\"judge-form-wrapper\",attrs:{\"rules\":_vm.rules,\"model\":_vm.form,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"节点ID：\"}},[_vm._v(_vm._s(_vm.form.nodeId))]),_c('el-form-item',{attrs:{\"label\":\"命名/展示：\",\"prop\":\"title\"}},[_c('el-col',{attrs:{\"span\":20}},[_c('el-input',{model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1)],1),_c('ul',{staticClass:\"draglist-wrapper\"},[_c('draggable',{attrs:{\"group\":\"people\"},on:{\"start\":function($event){_vm.drag=true},\"end\":function($event){_vm.drag=false}},model:{value:(_vm.unBackupList),callback:function ($$v) {_vm.unBackupList=$$v},expression:\"unBackupList\"}},_vm._l((_vm.unBackupList),function(item,index){return _c('li',{key:index,staticClass:\"list-item\"},[_c('TagsRule',{ref:\"tagRule\",refInFor:true,attrs:{\"tagList\":_vm.ruleTagsList,\"ruleJson\":item.ruleJsonObj,\"tagIds\":item.tagIds,\"parentIndex\":index},on:{\"update:ruleJson\":function($event){return _vm.$set(item, \"ruleJsonObj\", $event)},\"update:rule-json\":function($event){return _vm.$set(item, \"ruleJsonObj\", $event)},\"update:tagIds\":function($event){return _vm.$set(item, \"tagIds\", $event)},\"update:tag-ids\":function($event){return _vm.$set(item, \"tagIds\", $event)}}}),_c('span',{staticClass:\"text\"},[_vm._v(\"进入分支:\")]),_c('Behavior',{attrs:{\"list\":item.nextNodeList,\"skillList\":_vm.skillList,\"childNodeList\":_vm.childNodeList,\"parentIndex\":index,\"desc\":\"调用\",\"isLimitOnly\":false},on:{\"del\":_vm.deleteUnBackupItemBehavior,\"add\":_vm.addUnBackupItemBehavior}})],1)}),0),_c('el-form-item',[_c('el-button',{staticStyle:{\"font-size\":\"14px\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.addUnBackupItem}},[_vm._v(\"+添加判定\")])],1)],1),_c('div',{staticClass:\"gurantee-box\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"兜底\")]),_c('div',{staticClass:\"flex-box\"},[_c('span',{staticClass:\"text\"},[_vm._v(\"进入分支:\")]),_c('Behavior',{attrs:{\"list\":_vm.nextNodeList,\"skillList\":_vm.skillList,\"childNodeList\":_vm.childNodeList,\"desc\":\"调用\",\"isLimitOnly\":false},on:{\"del\":_vm.deleteBackupItem,\"add\":_vm.addBackupItem}})],1)]),_c('el-form-item',{staticStyle:{\"margin-top\":\"10px\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"保存\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"judge-detail-wrapper\">\r\n    <el-form\r\n      class=\"judge-form-wrapper\"\r\n      ref=\"judgeForm\"\r\n      :rules=\"rules\"\r\n      :model=\"form\"\r\n      label-width=\"100px\"\r\n    >\r\n      <el-form-item label=\"节点ID：\">{{ form.nodeId }}</el-form-item>\r\n      <el-form-item label=\"命名/展示：\" prop=\"title\">\r\n        <el-col :span=\"20\">\r\n          <el-input v-model=\"form.title\"></el-input>\r\n        </el-col>\r\n      </el-form-item>\r\n      <ul class=\"draglist-wrapper\">\r\n        <draggable v-model=\"unBackupList\" group=\"people\" @start=\"drag=true\" @end=\"drag=false\">\r\n          <li\r\n            class=\"list-item\"\r\n            v-for=\"(item,index) in unBackupList\"\r\n            :key=\"index\"\r\n          >\r\n            <TagsRule\r\n              ref=\"tagRule\"\r\n              :tagList=\"ruleTagsList\"\r\n              :ruleJson.sync=\"item.ruleJsonObj\"\r\n              :tagIds.sync=\"item.tagIds\"\r\n              :parentIndex=\"index\"\r\n            ></TagsRule>\r\n            <span class=\"text\">进入分支:</span>\r\n            <Behavior\r\n              :list=\"item.nextNodeList\"\r\n              :skillList=\"skillList\"\r\n              :childNodeList=\"childNodeList\"\r\n              :parentIndex=\"index\"\r\n              desc=\"调用\"\r\n              :isLimitOnly=\"false\"\r\n              @del=\"deleteUnBackupItemBehavior\"\r\n              @add=\"addUnBackupItemBehavior\"\r\n            ></Behavior>\r\n          </li>\r\n        </draggable>\r\n        <el-form-item>\r\n          <el-button type=\"text\" style=\"font-size: 14px;\" @click=\"addUnBackupItem\">+添加判定</el-button>\r\n        </el-form-item>\r\n      </ul>\r\n      <div class=\"gurantee-box\">\r\n        <p class=\"title\">兜底</p>\r\n        <div class=\"flex-box\">\r\n          <span class=\"text\">进入分支:</span>\r\n          <Behavior\r\n            :list=\"nextNodeList\"\r\n            :skillList=\"skillList\"\r\n            :childNodeList=\"childNodeList\"\r\n            desc=\"调用\"\r\n            :isLimitOnly=\"false\"\r\n            @del=\"deleteBackupItem\"\r\n            @add=\"addBackupItem\"\r\n          ></Behavior>\r\n        </div>\r\n      </div>\r\n      <el-form-item style=\"margin-top: 10px;\">\r\n        <el-button type=\"primary\" @click=\"submitForm\">保存</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Behavior from '@/components/Behavior/Index.vue'\r\nimport TagsRule from '@/components/TagsRule/Index.vue'\r\nimport draggable from 'vuedraggable'\r\nimport { getRuleTagsListAPI } from '@/services/tag'\r\nexport default {\r\n  components: {\r\n    Behavior,\r\n    draggable,\r\n    TagsRule\r\n  },\r\n  props: {\r\n    skillList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    childNodeList: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    renderData: { // 后台返回的详情结构\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    versionId: {\r\n      type: Number\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      drag: false,\r\n      ruleTagsList: [], // 规则标签列表\r\n      form: {\r\n        nodeId: '',\r\n        title: '',\r\n        interActifyAssertsList: [], // 判断列表\r\n        content: ''\r\n      },\r\n      backupList: [], // 兜底列表 唯一\r\n      unBackupList: [], // 非兜底列表\r\n      rules: {\r\n        title: [\r\n          { required: true, message: '请输入', trigger: 'blur' },\r\n          { min: 1, max: 50, message: '不可超过50个字符', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    nextNodeList () {\r\n      if (this.backupList.length > 0) {\r\n        return this.backupList[0].nextNodeList\r\n      }\r\n      return []\r\n    }\r\n  },\r\n  watch: {\r\n    renderData: function (newval, oldval) {\r\n      console.debug('watch renderData : ', newval)\r\n      this.initData()\r\n    }\r\n  },\r\n  methods: {\r\n    addUnBackupItem () {\r\n      this.unBackupList.push({\r\n        isBackup: 0,\r\n        nextNodeList: [],\r\n        // ruleJson: '',\r\n        ruleJsonObj: {\r\n          rules: [],\r\n          condition: 'AND'\r\n        },\r\n        ruleJson: JSON.stringify({ rules: [], condition: 'AND' })\r\n      })\r\n    },\r\n    getUnBackupNextNodeList (list) {\r\n      if (list.length > 0) {\r\n        return list\r\n      }\r\n      return []\r\n    },\r\n    addUnBackupItemBehavior ({ parentIndex }) {\r\n      // console.debug('unBackupList: ', this.unBackupList)\r\n      if (this.unBackupList.length === 0) {\r\n        this.unBackupList.push({\r\n          isBackup: 0,\r\n          nextNodeList: []\r\n        })\r\n      }\r\n      const nextNodeList = this.unBackupList[parentIndex].nextNodeList\r\n      nextNodeList.push({})\r\n    },\r\n    deleteUnBackupItemBehavior ({ levelIndex, parentIndex }) {\r\n      // console.debug('deleteUnBackupItemBehavior', levelIndex, parentIndex)\r\n      this.unBackupList[parentIndex].nextNodeList.splice(levelIndex, 1)\r\n    },\r\n    addBackupItem () {\r\n      // console.debug('backupList: ', this.backupList)\r\n      if (this.backupList.length === 0) {\r\n        this.backupList.push({\r\n          isBackup: 1,\r\n          nextNodeList: []\r\n        })\r\n      }\r\n      const nextNodeList = this.backupList[0].nextNodeList\r\n      nextNodeList.push({})\r\n    },\r\n    deleteBackupItem ({ levelIndex, parentIndex }) {\r\n      // console.debug('deleteBackupItem', index)\r\n      this.backupList[0].nextNodeList.splice(levelIndex, 1)\r\n    },\r\n    transformSubmitData (data) {\r\n      const info = JSON.parse(JSON.stringify(data))\r\n      info.interActifyAssertsList = [...this.backupList, ...this.unBackupList]\r\n      info.interActifyAssertsList.forEach(item => {\r\n        if (item?.nextNodeList?.length > 0) { // 技能 / 节点 处理\r\n          item.nextNodeList.forEach((nextNodeItem, nextNodeIndex) => {\r\n            nextNodeItem.skillParam = []\r\n            const keys = Object.keys(nextNodeItem)\r\n            this.skillList.forEach((skillItem, skillIndex) => {\r\n              if (nextNodeItem?.callType === 1 && nextNodeItem?.nextSkillId) {\r\n                if (skillItem.skillId.toString() === nextNodeItem?.nextSkillId.toString()) {\r\n                  const paramList = skillItem.paramList\r\n                  paramList.forEach((paramItem, paramIndex) => {\r\n                    const key = paramItem.paramKey\r\n                    if (!nextNodeItem.skillParam) {\r\n                      nextNodeItem.skillParam = []\r\n                    } else {\r\n                      if (typeof nextNodeItem.skillParam === 'string') {\r\n                        nextNodeItem.skillParam = JSON.parse(nextNodeItem.skillParam)\r\n                      }\r\n                    }\r\n                    if (keys.includes(key)) {\r\n                      if (paramItem.dataType === 1) { // 1数值 2字符串\r\n                        nextNodeItem.skillParam.push({\r\n                          key: paramItem.paramKey,\r\n                          name: paramItem.paramName,\r\n                          value: Number(nextNodeItem[paramItem.paramKey])\r\n                        })\r\n                      } else if (paramItem.dataType === 2) {\r\n                        nextNodeItem.skillParam.push({\r\n                          key: paramItem.paramKey,\r\n                          name: paramItem.paramName,\r\n                          value: nextNodeItem[paramItem.paramKey].toString()\r\n                        })\r\n                      }\r\n                    }\r\n                  })\r\n                }\r\n              } else {\r\n                nextNodeItem.skillParam = []\r\n              }\r\n            })\r\n            nextNodeItem.skillParam = JSON.stringify(nextNodeItem.skillParam) || ''\r\n          })\r\n        }\r\n        if (item?.ruleJsonObj?.rules && item?.ruleJsonObj?.rules?.length > 0) { // 非兜底的子节点规则json 字符串化\r\n          item.ruleJson = JSON.stringify(item.ruleJsonObj)\r\n        } else {\r\n          item.ruleJson = JSON.stringify({ rules: [], condition: 'AND' })\r\n        }\r\n      })\r\n      this.form.interActifyAssertsList = info.interActifyAssertsList\r\n      // console.debug('tranform info: ', info)\r\n      info.versionId = this.versionId\r\n      return info\r\n    },\r\n    initTransformData (data) {\r\n      data.interActifyAssertsList && data.interActifyAssertsList.forEach((item, index) => {\r\n        item.nextNodeList.forEach((nextNodeItem, nextNodeIndex) => {\r\n          if (nextNodeItem.callType === 1) { // 回填技能 额外框\r\n            if (nextNodeItem.skillParam === '') {\r\n              nextNodeItem.skillParam = []\r\n            } else {\r\n              nextNodeItem.skillParam = JSON.parse(nextNodeItem.skillParam)\r\n            }\r\n            nextNodeItem.skillParam.forEach(paramItem => {\r\n              nextNodeItem[paramItem.key] = paramItem.value\r\n            })\r\n          }\r\n        })\r\n        if (item.isBackup === 0 && (item.ruleJson !== '' || item.ruleJson !== '[]')) { // 处理非兜底节点的规则回填\r\n          item.ruleJsonObj = JSON.parse(item.ruleJson)\r\n        }\r\n      })\r\n      return data\r\n    },\r\n    initData () {\r\n      let renderData = JSON.parse(JSON.stringify(this.$props.renderData))\r\n      // console.debug('init renderData: ', renderData)\r\n      renderData = this.initTransformData(renderData)\r\n      this.form = {\r\n        ...this.form,\r\n        ...renderData\r\n      }\r\n      this.backupList = this.form.interActifyAssertsList.filter(item => item.isBackup === 1)\r\n      this.unBackupList = this.form.interActifyAssertsList.filter(item => item.isBackup === 0)\r\n      if (this.unBackupList.length === 0) {\r\n        this.unBackupList.push({\r\n          isBackup: 0,\r\n          nextNodeList: [],\r\n          ruleJsonObj: {\r\n            rules: [],\r\n            condition: 'AND'\r\n          },\r\n          ruleJson: JSON.stringify({ rules: [], condition: 'AND' }),\r\n          tagIds: [] // 存储标签id数组\r\n        })\r\n      } else {\r\n        this.unBackupList = this.unBackupList.map(item => {\r\n          return {\r\n            ...item,\r\n            tagIds: [],\r\n            ruleJsonObj: item.ruleJson\r\n              ? JSON.parse(item.ruleJson)\r\n              : {\r\n                  rules: [],\r\n                  condition: 'AND'\r\n                }\r\n          }\r\n        })\r\n      }\r\n    },\r\n    submitForm () {\r\n      this.$refs.judgeForm.validate(valid => {\r\n        if (valid) {\r\n          this.$refs.tagRule && this.$refs.tagRule.map((component) => {\r\n            component.transformSaveRules()\r\n          })\r\n          const info = this.transformSubmitData(this.form)\r\n          this.$emit('submit', info)\r\n          return true\r\n        } else {\r\n          console.debug('submitForm valid fail')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    async getRuleTagsList () {\r\n      try {\r\n        const res = await getRuleTagsListAPI()\r\n        if (res.code === 1000) {\r\n          this.ruleTagsList = res.data.map((item) => {\r\n            return {\r\n              ...item,\r\n              ruleJson: item.ruleJson ? JSON.parse(item.ruleJson) : {}\r\n            }\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error('getRuleTagsList error: ', error)\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getRuleTagsList()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n  >>>.judge-form-wrapper {\r\n    .el-form-item__label {\r\n      white-space nowrap\r\n    }\r\n    .draglist-wrapper {\r\n      width 92%\r\n      margin 10px auto 0\r\n      .list-item {\r\n        background-color rgb(239, 244, 255)\r\n        padding 10px\r\n        margin-bottom 10px\r\n        .text {\r\n          font-size 14px\r\n          color #606266\r\n          display flex\r\n          // background-color #fff\r\n          width 70px\r\n          height 32px\r\n          box-sizing border-box\r\n          // padding 2px 10px\r\n          white-space nowrap\r\n          align-items center\r\n          justify-content center\r\n          margin-right 10px\r\n        }\r\n      }\r\n    }\r\n    .gurantee-box {\r\n      margin-top 10px\r\n      background-color rgb(239, 244, 255)\r\n      padding 10px\r\n      width 92%\r\n      margin 0 auto\r\n      box-sizing border-box\r\n      .title {\r\n        font-weight bold\r\n        font-size 14px\r\n        text-align center\r\n        height 25px\r\n        line-height 25px\r\n        color #918e8e\r\n      }\r\n      .flex-box {\r\n        // display flex\r\n        // flex-wrap nowrap\r\n        // align-items flex-start\r\n        .text {\r\n          font-size 14px\r\n          color #606266\r\n          display flex\r\n          // background-color #fff\r\n          width 70px\r\n          height 32px\r\n          box-sizing border-box\r\n          // padding 2px 10px\r\n          white-space nowrap\r\n          align-items center\r\n          justify-content center\r\n          margin-right 10px\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./JudgeDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./JudgeDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./JudgeDetail.vue?vue&type=template&id=30a10d5a&scoped=true&\"\nimport script from \"./JudgeDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./JudgeDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./JudgeDetail.vue?vue&type=style&index=0&id=30a10d5a&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30a10d5a\",\n  null\n  \n)\n\nexport default component.exports","import fetch from 'cseed-frame/services/_fetch'\r\n\r\nexport function getSkillListAPI (params) {\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/tag/skill',\r\n    params\r\n  })\r\n}\r\n","<template>\r\n  <div class=\"graph-info-detail-component\">\r\n    <el-drawer\r\n      ref=\"drawer\"\r\n      custom-class=\"detail-drawer\"\r\n      :title=\"title\"\r\n      :visible.sync=\"showBool\"\r\n      :direction=\"direction\"\r\n      :before-close=\"handleClose\"\r\n      :close-on-press-escape=\"false\"\r\n      :modal-append-to-body=\"false\"\r\n      :wrapperClosable=\"true\"\r\n      :modal=\"false\"\r\n      :size=\"400\"\r\n    >\r\n      <template v-if=\"nodeType === 'start'\">\r\n        <el-form :model=\"startForm\" label-width=\"70px\">\r\n          <el-form-item label=\"操作：\">\r\n            <el-col :span=\"11\">\r\n              <el-select\r\n                v-model=\"startForm.NodeOrSkill\"\r\n                placeholder=\"调用\"\r\n                @change=\"updateNodeOrSkillPick\"\r\n              >\r\n                <el-option label=\"调用技能\" :value=\"1\"></el-option>\r\n                <el-option label=\"调用节点\" :value=\"2\"></el-option>\r\n              </el-select>\r\n            </el-col>\r\n            <el-col :span=\"1\">&nbsp;&nbsp;</el-col>\r\n            <el-col :span=\"11\">\r\n              <!-- @change=\"updateSkillPicked\" -->\r\n              <el-select\r\n                v-if=\"startForm.NodeOrSkill === 1\"\r\n                v-model=\"startForm.NodeOrSkillVal\"\r\n                placeholder=\"请选择技能\"\r\n                filterable\r\n              >\r\n                <el-option\r\n                  v-for=\"item in skillList\"\r\n                  :key=\"item.skillId\"\r\n                  :label=\"item.skillName\"\r\n                  :value=\"Number(item.skillId)\"\r\n                ></el-option>\r\n              </el-select>\r\n              <!-- @change=\"updateNodePicked\" -->\r\n              <el-select\r\n                v-else\r\n                v-model=\"startForm.NodeOrSkillVal\"\r\n                placeholder=\"请选择节点\"\r\n                filterable\r\n              >\r\n                <el-option\r\n                  v-for=\"item in nodeSelectList\"\r\n                  :key=\"item.nodeId\"\r\n                  :label=\"item.title\"\r\n                  :value=\"item.nodeId\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-col>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"saveStartNodeOperate\">保存</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </template>\r\n      <template v-else-if=\"nodeType === 'judge'\">\r\n        <JudgeDetail\r\n          ref=\"judgeDetailComponent\"\r\n          :versionId=\"versionId\"\r\n          :skillList=\"skillList\"\r\n          :childNodeList=\"nodeSelectList\"\r\n          :renderData=\"judgeDetailData\"\r\n          @submit=\"handleSubmitJudge\"\r\n        ></JudgeDetail>\r\n      </template>\r\n      <template v-else-if=\"nodeType === 'dialogue'\">\r\n        <DialogueDetail\r\n          ref=\"dialogueDetailComponent\"\r\n          :versionId=\"versionId\"\r\n          :skillList=\"skillList\"\r\n          :childNodeList=\"nodeSelectList\"\r\n          :renderData=\"dialogueDetailData\"\r\n          @submit=\"handleSubmitDialogue\"\r\n        ></DialogueDetail>\r\n      </template>\r\n    </el-drawer>\r\n  </div>\r\n</template>\r\n<script>\r\nimport store from 'cseed-frame/store/_index'\r\nimport DialogueDetail from '@/components/Flow/DialogueDetail.vue'\r\nimport JudgeDetail from '@/components/Flow/JudgeDetail.vue'\r\nimport { getSkillListAPI } from '@/services/skill'\r\nimport { getStartNodeAPI, getDialogueNodeDetailAPI, updateStartNodeAPI, updateDialogueDetailAPI, getJudgeNodeDetailAPI, updateJudgeNodeDetailAPI, getVersionIdAPI, getNodeSelectListAPI } from '@/services/flow'\r\nexport default {\r\n  components: {\r\n    DialogueDetail,\r\n    JudgeDetail\r\n  },\r\n  props: {\r\n    showNodeDetail: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  inject: ['serviceId'],\r\n  data () {\r\n    return {\r\n      direction: 'rtl',\r\n      showBool: this.showNodeDetail,\r\n      nodeType: store.getters.nodeType,\r\n      versionId: 0,\r\n      startForm: {\r\n        NodeOrSkill: '',\r\n        NodeOrSkillVal: null\r\n      },\r\n      skillList: [],\r\n      nodeSelectList: [],\r\n      dialogueDetailData: {},\r\n      judgeDetailData: {},\r\n      startDetailData: {},\r\n      drawerRef: null\r\n    }\r\n  },\r\n  watch: {\r\n    versionId (newval, oldval) {\r\n      // console.debug('versionId: ', newval)\r\n      this.getNodeSelectList(newval)\r\n    }\r\n  },\r\n  methods: {\r\n    updateNodeOrSkillPick (val) { // 开始详情 改变选择 节点/技能\r\n      this.startForm.NodeOrSkillVal = null\r\n    },\r\n    async getNodeSelectList (versionId) {\r\n      try {\r\n        const res = await getNodeSelectListAPI({\r\n          versionId\r\n        })\r\n        if (res.code === 1000) {\r\n          // console.debug('getNodeSelectList res: ', res)\r\n          this.nodeSelectList = res.data\r\n        }\r\n      } catch (error) {\r\n        console.error('getNodeSelectList error: ', error)\r\n      }\r\n    },\r\n    getNodeId (node) {\r\n      const data = node.getData()\r\n      if (data.nodeType === 3 || data.nodeType === 2 || data.nodeType === 1) {\r\n        return data.nodeId\r\n      } else if (data.type === 1 && data['button-type'] === 'dialogue-button') {\r\n        return data.buttonId\r\n      }\r\n      return ''\r\n    },\r\n    async saveStartNodeOperate () { // 保存开始节点的操作\r\n      console.debug('saveStartNodeOperate')\r\n      const { NodeOrSkill, NodeOrSkillVal } = this.startForm\r\n      let payload = {}\r\n      if (NodeOrSkill === '') {\r\n        this.$message.error('请调用操作')\r\n        return false\r\n      }\r\n      if (NodeOrSkill === 1) { // skill\r\n        payload.nextSkillId = NodeOrSkillVal || ''\r\n        payload = {\r\n          nextSkillId: NodeOrSkillVal || '',\r\n          callType: NodeOrSkill,\r\n          nodeId: this.startDetailData.nodeId,\r\n          skillParam: '',\r\n          versionId: this.versionId\r\n        }\r\n        this.updateStartPickSkill()\r\n      } else if (NodeOrSkill === 2) { // node\r\n        payload = {\r\n          nextNodeId: NodeOrSkillVal || '',\r\n          callType: NodeOrSkill,\r\n          nodeId: this.startDetailData.nodeId,\r\n          skillParam: '',\r\n          versionId: this.versionId\r\n        }\r\n        this.updateStartPickNode()\r\n      }\r\n      try {\r\n        const res = await updateStartNodeAPI(payload)\r\n        if (res.code === 1000) {\r\n          // console.debug('updateStartNodeAPI res: ', res)\r\n        }\r\n      } catch (error) {\r\n        console.error('updateStartNodeAPI error: ', error)\r\n      }\r\n    },\r\n    handleClose (done) {\r\n      const nodeType = store.getters.nodeType\r\n      // 服务交互，节点多时，每次保存都需要较长时间影响体验。建议优化。Bug: CLOUDARCH-904 先隐藏自动保存功能\r\n      // if (nodeType === 'start') {\r\n      //   this.saveStartNodeOperate()\r\n      // } else if (nodeType === 'judge') {\r\n      //   if (this.$refs.judgeDetailComponent) {\r\n      //     this.$refs.judgeDetailComponent.submitForm()\r\n      //   }\r\n      // } else if (nodeType === 'dialogue') {\r\n      //   if (this.$refs.dialogueDetailComponent) {\r\n      //     this.$refs.dialogueDetailComponent.submitForm()\r\n      //   }\r\n      // }\r\n      done()\r\n      this.$emit('update:showNodeDetail', this.showBool)\r\n    },\r\n    async handleSubmitJudge (payload) {\r\n      // console.debug('handleSubmitJudge :', payload)\r\n      try {\r\n        const res = await updateJudgeNodeDetailAPI(payload)\r\n        if (res.code === 1000) {\r\n          this.drawerRef.closeDrawer()\r\n          store.commit('flow/updateJudgeNodeDetail', payload)\r\n        }\r\n        // console.debug('updateJudgeNodeDetailAPI res: ', res)\r\n      } catch (error) {\r\n        console.error('handleSubmitJudge error: ', error)\r\n      }\r\n    },\r\n    async handleSubmitDialogue (payload) {\r\n      console.debug('handleSubmitDialogue payload: ', payload)\r\n      try {\r\n        const res = await updateDialogueDetailAPI(payload)\r\n        if (res.code === 1000) {\r\n          this.drawerRef.closeDrawer()\r\n          store.commit('flow/updateDialogueDetail', payload)\r\n        }\r\n      } catch (error) {\r\n        console.error('handleSubmitDialogue error: ', error)\r\n      }\r\n    },\r\n    async getSkillList () {\r\n      try {\r\n        const res = await getSkillListAPI()\r\n        console.debug('getSkillList res：', res)\r\n        if (res.code === 1000) {\r\n          this.skillList = res.data\r\n        }\r\n      } catch (error) {\r\n        console.error('getSkillList error：', error)\r\n      }\r\n    },\r\n    updateStartPickSkill () { // 更新开始节点 选择的技能\r\n      // vuex监听事件 graph响应更新连线 （1） 生成节点 生成连线 （2） 删除旧线旧节点(不用删除，直接覆盖)\r\n      console.debug('updateStartPickSkill: ', this.startForm.NodeOrSkillVal)\r\n      store.commit('flow/updateStartNodeLink', {\r\n        serviceId: this.serviceId,\r\n        type: 'skill',\r\n        sourceNodeId: this.startDetailData.nodeId,\r\n        targetNodeInfo: {\r\n          id: this.startForm.NodeOrSkillVal,\r\n          label: this.skillList.find(item => Number(item.skillId) === this.startForm.NodeOrSkillVal).skillName\r\n        }\r\n      })\r\n      console.debug('updateStartPickSkill end: ')\r\n    },\r\n    updateStartPickNode () { // 更新开始节点 选择其他子节点\r\n      // vuex监听事件 graph响应更新连线 （1） 生成节点 生成连线 （2） 删除旧线旧节点(不用删除，直接覆盖)\r\n      console.debug('updateStartPickNode: ', this.startForm.NodeOrSkillVal)\r\n      const pickNode = this.childNodeList.find(item => this.getNodeId(item) === this.startForm.NodeOrSkillVal)\r\n      store.commit('flow/updateStartNodeLink', {\r\n        serviceId: this.serviceId,\r\n        type: 'node', // skill node\r\n        sourceNodeId: this.startDetailData.nodeId,\r\n        targetNodeInfo: pickNode\r\n      })\r\n    },\r\n    async reFill () { // 回填（重新打开drawer的时候）\r\n      // console.debug('getters: ', store.getters.cellRenderData)\r\n      const nodeId = store.getters.nodeId\r\n      const nodeType = store.getters.nodeType\r\n      const cellRenderData = store.getters.cellRenderData\r\n      if (nodeType === 'start') {\r\n        const res = await getStartNodeAPI({\r\n          nodeId\r\n        })\r\n        if (res.code === 1000) {\r\n          console.debug('getStartNodeAPI res:', res)\r\n          this.startDetailData = res.data\r\n          const { callType, nextNodeId, nextSkillId } = res.data\r\n          this.startForm = {\r\n            NodeOrSkill: callType,\r\n            NodeOrSkillVal: callType === 1 ? nextSkillId : nextNodeId\r\n          }\r\n        }\r\n        if (Object.keys(cellRenderData.model.incomings).length > 0) {\r\n          //\r\n        }\r\n      } else if (nodeType === 'judge') {\r\n        const res = await getJudgeNodeDetailAPI({\r\n          nodeId\r\n        })\r\n        if (res.code === 1000) {\r\n          console.debug('getJudgeNodeDetailAPI res:', res)\r\n          this.judgeDetailData = res.data\r\n        }\r\n      } else if (nodeType === 'dialogue') {\r\n        // console.debug('cellRenderData 1: ', cellRenderData)\r\n        const res = await getDialogueNodeDetailAPI({\r\n          nodeId\r\n        })\r\n        // console.debug('getDialogueNodeDetailAPI res:', res)\r\n        if (res.code === 1000) {\r\n          this.dialogueDetailData = res.data\r\n        }\r\n      }\r\n    },\r\n    async getVersionId () {\r\n      try {\r\n        const res = await getVersionIdAPI({\r\n          serviceId: this.serviceId\r\n        })\r\n        if (res.code === 1000) {\r\n          this.versionId = res.data\r\n        }\r\n      } catch (error) {\r\n        console.error('getVersionId error: ', error)\r\n      }\r\n    },\r\n    initDrawerRef () {\r\n      this.drawerRef = this.$refs.drawer\r\n    }\r\n  },\r\n  computed: {\r\n    title () {\r\n      if (store.getters.nodeType === 'start') {\r\n        return '开始'\r\n      } else {\r\n        // return store.getters.cellRenderData.getAttrs('label/text').text.text\r\n        return store.getters.cellRenderData.getData().ctype\r\n      }\r\n    },\r\n    childNodeList () { // 除了开始节点以外的所有节点 废弃 不从前端计算节点\r\n      const currentGraph = store.getters.graphList.find(item => item.serviceId === this.serviceId)\r\n      return currentGraph?.nodeList.filter(item => item.getData().nodeType === 2 ||\r\n               item.getData().nodeType === 3 ||\r\n               (item.getData().type === 1 && item.getData()['button-type'] === 'dialogue-button')) ||\r\n                []\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getVersionId()\r\n    this.getSkillList()\r\n    this.reFill()\r\n    this.initDrawerRef()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n.graph-info-detail-component {\r\n  >>>.detail-drawer {\r\n    .el-drawer__header {\r\n      font-weight bold\r\n      font-size 25px\r\n      color #5f95ff\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=68204753&scoped=true&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&id=68204753&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68204753\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"flowchart-component-wrapper\">\r\n    <div class=\"anylise-filter-wrapper\" v-if=\"!isEdit\">\r\n      <el-form :inline=\"true\">\r\n        <el-form-item>\r\n          <el-radio-group v-model=\"anyliseFilterForm.versionId\" size=\"medium\">\r\n            <el-radio-button\r\n              v-for=\"(item) in anyliseVersionList\"\r\n              :key=\"item.id\"\r\n              :label=\"item.id\"\r\n            >{{ item.humanVersion }}</el-radio-button>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"维度\" style=\"margin-left: 20px\">\r\n          <el-radio-group v-model=\"anyliseFilterForm.dataType\">\r\n            <el-radio :label=\"1\">PV</el-radio>\r\n            <el-radio :label=\"2\">UV</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"选择日期\" style=\"margin-left: 20px\">\r\n          <el-date-picker\r\n            v-model=\"anyliseFilterForm.time\"\r\n            type=\"daterange\"\r\n            range-separator=\"至\"\r\n            start-placeholder=\"开始日期\"\r\n            end-placeholder=\"结束日期\"\r\n            value-format=\"yyyy-MM-dd\"\r\n          >\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"search\">查询</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <Graph\r\n      :showNodeDetail=\"showNodeDetail\"\r\n      @updateDetail=\"updateDetail\"\r\n    ></Graph>\r\n    <Detail\r\n      v-if=\"showDetail\"\r\n      class=\"detail-wrapper\"\r\n      :showNodeDetail.sync=\"showNodeDetail\"\r\n      @update:showNodeDetail=\"showNodeDetail = $event\"\r\n    ></Detail>\r\n  </div>\r\n</template>\r\n<script>\r\nimport store from 'cseed-frame/store/_index'\r\nimport Graph from '@/components/Flow/Graph'\r\nimport Detail from '@/components/Flow/Detail'\r\nimport { getAnyliseVersionListAPI } from '@/services/anylise'\r\nexport default {\r\n  components: {\r\n    Graph,\r\n    Detail\r\n  },\r\n  props: {\r\n    statu: { // edit, anylise\r\n      type: String,\r\n      default: 'edit'\r\n    },\r\n    serviceId: {\r\n      type: Number\r\n    }\r\n  },\r\n  provide () {\r\n    return {\r\n      serviceId: this.serviceId\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      showNodeDetail: false,\r\n      anyliseVersionList: [], // 分析版本列表 array\r\n      anyliseFilterForm: {\r\n        versionId: '',\r\n        dataType: 1,\r\n        time: '',\r\n        beginTime: '',\r\n        endTime: ''\r\n      } // 分析筛选表单\r\n    }\r\n  },\r\n  methods: {\r\n    updateDetail (data) {\r\n      this.showNodeDetail = data\r\n    },\r\n    search () {\r\n      if (this.anyliseFilterForm.time) {\r\n        this.anyliseFilterForm.beginTime = this.anyliseFilterForm.time[0]\r\n        this.anyliseFilterForm.endTime = this.anyliseFilterForm.time[1]\r\n      }\r\n      this.anyliseFilterForm.serviceId = this.serviceId\r\n      store.commit('flow/setAnyliseFilterForm', this.anyliseFilterForm)\r\n    },\r\n    async getAnyliseVersionList () {\r\n      try {\r\n        const res = await getAnyliseVersionListAPI({\r\n          serviceId: Number(this.serviceId) // 19Number(this.serviceId)\r\n        })\r\n        if (res.code === 1000) {\r\n          // console.debug('getAnyliseVersionList res: ', res)\r\n          this.anyliseVersionList = res.data\r\n          // this.versionList = res.data\r\n        }\r\n      } catch (error) {\r\n        console.error('getAnyliseVersionList error: ', error)\r\n      }\r\n    },\r\n    initVuexListen () {\r\n      store.subscribe((mutation, state) => {\r\n        if (mutation.type === 'flow/initAnyliseData') { // 初始化分析数据\r\n          if (mutation.payload.serviceId !== this.serviceId) return\r\n          this.initSelectedVersion()\r\n          if (this.$route.query.mode === 'anylise') {\r\n            // console.debug('initAnyliseData mutation search')\r\n            this.search()\r\n          }\r\n        }\r\n      })\r\n    },\r\n    async initAnylise () {\r\n      // （1）获取版本列表\r\n      await this.getAnyliseVersionList()\r\n    },\r\n    initSelectedVersion () {\r\n      // （2）初始化选中版本\r\n      if (this.anyliseVersionList.length > 0) {\r\n        this.anyliseFilterForm.versionId = this.anyliseVersionList[this.anyliseVersionList.length - 1].id\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    anyliseVersionList (newVal, oldVal) {\r\n      if (newVal.length > 0) {\r\n        this.anyliseFilterForm.versionId = newVal[newVal.length - 1].id\r\n        this.initSelectedVersion()\r\n        if (this.$route.query.mode === 'anylise') {\r\n          // console.debug('watch versionList change search')\r\n          this.search()\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    this.initVuexListen()\r\n  },\r\n  created () {\r\n    if (this.$route.query.mode === 'anylise') {\r\n      this.initAnylise()\r\n    }\r\n  },\r\n  activated () {\r\n    // console.debug('flowchart activated')\r\n    if (this.$route.query.mode === 'anylise') {\r\n      // console.debug('flowchart activated getversionList')\r\n      this.getAnyliseVersionList()\r\n    }\r\n  },\r\n  computed: {\r\n    isEdit () {\r\n      return this.$route.query.mode === 'edit'\r\n    },\r\n    showDetail () {\r\n      return this.showNodeDetail && this.isEdit\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n.flowchart-component-wrapper {\r\n  display block\r\n  width 100%\r\n  height 68vh\r\n  .detail-wrapper {\r\n\r\n  }\r\n  .anylise-filter-wrapper {\r\n    margin-bottom 10px\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Flowchart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Flowchart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Flowchart.vue?vue&type=template&id=3086d04a&scoped=true&\"\nimport script from \"./Flowchart.vue?vue&type=script&lang=js&\"\nexport * from \"./Flowchart.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Flowchart.vue?vue&type=style&index=0&id=3086d04a&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3086d04a\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"detail-page-wrapper\">\r\n    <el-page-header @back=\"goBack\" content=\"交互详情\"></el-page-header>\r\n    <el-tabs\r\n      style=\"margin-top: 10px;\"\r\n      v-model=\"activeTabId\"\r\n      type=\"card\"\r\n      @tab-remove=\"removeTab\"\r\n    >\r\n      <el-tab-pane\r\n        v-for=\"(item) in tabsArr\"\r\n        :key=\"item.id.toString()\"\r\n        :label=\"item.serviceName\"\r\n        :name=\"item.id.toString()\"\r\n        :closable=\"true\"\r\n        :lazy=\"true\"\r\n      >\r\n        <Version v-show=\"mode === 'edit'\" :serviceId=\"item.id\"></Version>\r\n        <Flowchart :serviceId=\"item.id\"></Flowchart>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n  </div>\r\n</template>\r\n<script>\r\nimport store from 'cseed-frame/store/_index'\r\nimport Version from '@/components/Version.vue'\r\nimport Flowchart from '@/components/Flowchart.vue'\r\nexport default {\r\n  components: {\r\n    Version,\r\n    Flowchart\r\n  },\r\n  data () {\r\n    return {\r\n      activeTabId: '',\r\n      tabsArr: [],\r\n      tabIndex: 2,\r\n      mode: 'edit'\r\n    }\r\n  },\r\n  methods: {\r\n    init () {\r\n      this.tabsArr = store.getters.tabsArr\r\n      this.activeTabId = store.getters.activeTab.id.toString()\r\n      // console.debug(this.$route)\r\n      this.mode = this.$route.query.mode\r\n    },\r\n    updateTabActiveIndex () {\r\n      // store.commit('services/updateTabActiveIndex', )\r\n    },\r\n    goBack () {\r\n      this.$router.go(-1)\r\n    },\r\n    removeTab (tabId) {\r\n      const tabs = this.tabsArr\r\n      let activeTabId = this.activeTabId\r\n      if (activeTabId === tabId) {\r\n        tabs.forEach((tab, index) => {\r\n          if (tab.id.toString() === tabId) {\r\n            const nextTab = tabs[index + 1] || tabs[index - 1]\r\n            if (nextTab) {\r\n              activeTabId = nextTab.id.toString()\r\n              store.commit('services/removeTab', index)\r\n            } else {\r\n              if (index === 0 && tabs.length === 1) {\r\n                activeTabId = ''\r\n                store.commit('services/removeTab', index)\r\n                this.$router.push({\r\n                  path: '/service-interaction'\r\n                })\r\n              }\r\n            }\r\n          }\r\n        })\r\n      } else {\r\n        const index = tabs.findIndex(tab => tab.id.toString() === tabId)\r\n        store.commit('services/removeTab', index)\r\n      }\r\n      this.activeTabId = activeTabId\r\n    //   this.tabsArr = tabs.filter(tab => tab.id !== tabId)\r\n    },\r\n    addTab (targetName) {\r\n      const newTabName = ++this.tabIndex + ''\r\n      this.editableTabs.push({\r\n        title: 'New Tab',\r\n        name: newTabName,\r\n        content: 'New Tab content'\r\n      })\r\n      this.editableTabsValue = newTabName\r\n    }\r\n  },\r\n  created () {\r\n    this.init()\r\n  },\r\n  activated () {\r\n    this.init()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n.detail-page-wrapper {\r\n    width 100%\r\n    // height 100%\r\n    background-color #fff\r\n    padding 20px\r\n    box-sizing border-box\r\n    // >>>.el-page-header {\r\n    //     .el-page-header__title {\r\n    //         font-size 16px\r\n    //     }\r\n    // }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=40bce72d&scoped=true&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&id=40bce72d&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40bce72d\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"list-page-wrapper\"},[_c('ul',{staticClass:\"services-list-wrapper\"},[_vm._l((_vm.listArr),function(item,index){return _c('li',{key:index,staticClass:\"list-item-wrapper\",on:{\"click\":function($event){return _vm.handleCommand('open_' + index)}}},[_c('img',{staticClass:\"list-img\",attrs:{\"src\":item.img,\"alt\":\"\"}}),_c('div',{staticClass:\"content-wrapper\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.serviceName))]),_c('p',{staticClass:\"desc\"},[_vm._v(_vm._s(item.remark))])]),_c('div',{staticClass:\"more\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('el-dropdown',{attrs:{\"placement\":\"bottom-end\",\"trigger\":\"click\",\"hide-on-click\":true},on:{\"command\":_vm.handleCommand}},[_c('i',{staticClass:\"el-icon-more\"}),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":'open_' + index}},[_vm._v(\"打开\")]),_c('el-dropdown-item',{attrs:{\"command\":'anylise_' + index}},[_vm._v(\"分析\")]),(item.status === 1)?_c('el-dropdown-item',{attrs:{\"command\":'withDraw_' + index}},[_vm._v(\"下架\")]):(item.status === 0)?_c('el-dropdown-item',{attrs:{\"command\":'onShelve_' + index}},[_vm._v(\"上架\")]):_vm._e(),_c('el-dropdown-item',{attrs:{\"command\":'delete_' + index}},[_vm._v(\"删除\")])],1)],1)],1)])}),_c('li',{staticClass:\"list-item-wrapper add-wrapper\",on:{\"click\":_vm.add}},[_c('i',{staticClass:\"el-icon-plus add-icon\"}),_c('p',{staticClass:\"add-desc\"},[_vm._v(\"添加服务\")])])],2),_c('el-dialog',{attrs:{\"title\":\"新建服务\",\"visible\":_vm.showAddServiceDialog,\"width\":\"50%\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.showAddServiceDialog=$event},\"close\":_vm.closeAddServiceDialog}},[_c('el-form',{ref:\"servicesForm\",attrs:{\"model\":_vm.servicesForm,\"rules\":_vm.rule}},[_c('el-form-item',{attrs:{\"label\":\"服务名\",\"label-width\":\"150\",\"prop\":\"serviceName\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\",\"autocomplete\":\"off\"},model:{value:(_vm.servicesForm.serviceName),callback:function ($$v) {_vm.$set(_vm.servicesForm, \"serviceName\", $$v)},expression:\"servicesForm.serviceName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"服务标识\",\"label-width\":\"150\",\"prop\":\"serviceKey\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\",\"autocomplete\":\"off\"},model:{value:(_vm.servicesForm.serviceKey),callback:function ($$v) {_vm.$set(_vm.servicesForm, \"serviceKey\", $$v)},expression:\"servicesForm.serviceKey\"}})],1),_c('el-form-item',{attrs:{\"label\":\"描述\",\"label-width\":\"150\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"rows\":5,\"placeholder\":\"请输入备注\",\"type\":\"textarea\"},model:{value:(_vm.servicesForm.remark),callback:function ($$v) {_vm.$set(_vm.servicesForm, \"remark\", $$v)},expression:\"servicesForm.remark\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showAddServiceDialog = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.confirmAddService}},[_vm._v(\"确 定\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"list-page-wrapper\">\r\n    <ul class=\"services-list-wrapper\">\r\n      <li\r\n        class=\"list-item-wrapper\"\r\n        v-for=\"(item, index) in listArr\"\r\n        :key=\"index\"\r\n        @click=\"handleCommand('open_' + index)\"\r\n      >\r\n        <img class=\"list-img\" :src=\"item.img\" alt=\"\" />\r\n        <div class=\"content-wrapper\">\r\n          <p class=\"title\">{{ item.serviceName }}</p>\r\n          <p class=\"desc\">{{ item.remark }}</p>\r\n        </div>\r\n        <div class=\"more\" @click.stop>\r\n          <el-dropdown\r\n            placement=\"bottom-end\"\r\n            trigger=\"click\"\r\n            :hide-on-click=\"true\"\r\n            @command=\"handleCommand\"\r\n          >\r\n            <i class=\"el-icon-more\"></i>\r\n            <el-dropdown-menu slot=\"dropdown\">\r\n              <el-dropdown-item :command=\"'open_' + index\">打开</el-dropdown-item>\r\n              <el-dropdown-item :command=\"'anylise_' + index\">分析</el-dropdown-item>\r\n              <!-- status 1上架 0下架 -->\r\n              <!-- v-permission=\"accessMap.offShell\" -->\r\n              <el-dropdown-item v-if=\"item.status === 1\" :command=\"'withDraw_' + index\">下架</el-dropdown-item>\r\n              <el-dropdown-item v-else-if=\"item.status === 0\" :command=\"'onShelve_' + index\">上架</el-dropdown-item>\r\n              <el-dropdown-item :command=\"'delete_' + index\">删除</el-dropdown-item>\r\n            </el-dropdown-menu>\r\n          </el-dropdown>\r\n        </div>\r\n      </li>\r\n      <li class=\"list-item-wrapper add-wrapper\" @click=\"add\">\r\n        <i class=\"el-icon-plus add-icon\"></i>\r\n        <p class=\"add-desc\">添加服务</p>\r\n      </li>\r\n    </ul>\r\n    <el-dialog\r\n      title=\"新建服务\"\r\n      :visible.sync=\"showAddServiceDialog\"\r\n      width=\"50%\"\r\n      :close-on-click-modal=\"false\"\r\n      @close=\"closeAddServiceDialog\"\r\n    >\r\n      <el-form :model=\"servicesForm\" :rules=\"rule\" ref=\"servicesForm\">\r\n        <el-form-item label=\"服务名\" label-width=\"150\" prop=\"serviceName\">\r\n          <el-input v-model=\"servicesForm.serviceName\" placeholder=\"请输入\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"服务标识\" label-width=\"150\" prop=\"serviceKey\">\r\n          <el-input v-model=\"servicesForm.serviceKey\" placeholder=\"请输入\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"描述\" label-width=\"150\">\r\n          <el-input\r\n            autocomplete=\"off\"\r\n            :rows=\"5\"\r\n            v-model=\"servicesForm.remark\"\r\n            placeholder=\"请输入备注\"\r\n            type=\"textarea\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"showAddServiceDialog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirmAddService\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { getServicesListAPI, addServicesAPI, deleteServicesAPI, onlineServiceAPI, offlineServiceAPI, getServiceAPI } from '@/services/services'\r\nexport default {\r\n  data () {\r\n    return {\r\n      showAddServiceDialog: false,\r\n      listArr: [],\r\n      activeIndex: -1,\r\n      servicesForm: {\r\n        serviceName: '',\r\n        serviceKey: '',\r\n        remark: ''\r\n      },\r\n      rule: {\r\n        serviceName: [\r\n          { required: true, message: '请输入服务名', trigger: 'blur' },\r\n          { min: 1, max: 50, message: '不可超过50字符', trigger: 'blur' }\r\n        ],\r\n        serviceKey: [\r\n          { required: true, message: '请输入服务标识', trigger: 'blur' },\r\n          { pattern: /^[a-zA-Z][\\w]{0,49}$/, message: '仅支持字母、数字、下划线,首字符必须为字母,不可超过50字符', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    accessMap () { // 所有权限\r\n      return this.$store.getters.getAccessMap()\r\n    }\r\n  },\r\n  methods: {\r\n    async initList () {\r\n      try {\r\n        const res = await getServicesListAPI()\r\n        if (res.code === 1000 && res.data) {\r\n          this.listArr = res.data.map((item) => {\r\n            return {\r\n              ...item,\r\n              img: 'https://images.pexels.com/photos/4321069/pexels-photo-4321069.jpeg?auto=compress&cs=tinysrgb&w=800'\r\n            }\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error('initList error', error)\r\n      }\r\n    },\r\n    openService () {\r\n      console.log('openService')\r\n      const targetTabInfo = this.listArr[this.activeIndex]\r\n      this.$store.commit('services/addTab', targetTabInfo)\r\n      this.$router.push({\r\n        path: '/interaction-detail',\r\n        query: {\r\n          mode: 'edit'\r\n        }\r\n      })\r\n    },\r\n    anylise () {\r\n      // console.log('anylise')\r\n      const targetTabInfo = this.listArr[this.activeIndex]\r\n      // console.debug('anylise targetTabInfo', targetTabInfo)\r\n      this.$store.commit('services/addTab', targetTabInfo)\r\n      this.$router.push({\r\n        path: '/interaction-detail',\r\n        query: {\r\n          mode: 'anylise'\r\n        }\r\n      })\r\n    },\r\n    async onShelve () { // 上架\r\n      try {\r\n        const res = await onlineServiceAPI({\r\n          id: Number(this.listArr[this.activeIndex].id)\r\n        })\r\n        if (res.code === 1000) {\r\n          this.initList()\r\n          this.$message({\r\n            type: 'success',\r\n            message: res.msg\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error('onShelve error', error)\r\n      }\r\n    },\r\n    async withDraw () { // 下架\r\n      try {\r\n        const res = await offlineServiceAPI({\r\n          id: Number(this.listArr[this.activeIndex].id)\r\n        })\r\n        console.debug('withDraw res', res)\r\n        if (res.code === 1000) {\r\n          this.initList()\r\n          this.$message({\r\n            type: 'success',\r\n            message: res.msg\r\n          })\r\n        } else {\r\n          console.error('withDraw code !== 0', res)\r\n        }\r\n      } catch (error) {\r\n        console.error('withDraw error', error)\r\n      }\r\n    },\r\n    async deleteService () {\r\n      try {\r\n        const res = await deleteServicesAPI({\r\n          id: Number(this.listArr[this.activeIndex].id)\r\n        })\r\n        console.debug('deleteServicesAPI res', res)\r\n        if (res.code === 1000) {\r\n          this.initList()\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          })\r\n        } else {\r\n          console.error('deleteServicesAPI code !== 0', res)\r\n        }\r\n      } catch (error) {\r\n        console.error('deleteServicesAPI error', error)\r\n      }\r\n      // confirm\r\n      // const h = this.$createElement\r\n      // this.$msgbox({\r\n      //   title: '提示',\r\n      //   closeOnClickModal: false,\r\n      //   message: h('div', null, [\r\n      //     h('p', null, [\r\n      //       h('i', { class: 'el-icon-warning', style: 'color: #faad14;margin-right: 5px' }, ''),\r\n      //       h('span', null, '该服务包含以下版本, 不能删除。 ')\r\n      //     ]),\r\n      //     h('p', null, 'v1 '),\r\n      //     h('p', null, 'v2'),\r\n      //     h('p', null, 'v3 ')\r\n      //   ]),\r\n      //   showCancelButton: true,\r\n      //   confirmButtonText: '确定',\r\n      //   cancelButtonText: '取消'\r\n      // }).then(async action => {\r\n      //   this.$message({\r\n      //     type: 'info',\r\n      //     message: 'action: ' + action\r\n      //   })\r\n      // })\r\n    },\r\n    handleCommand (commandStr) {\r\n      console.debug('handleCommand', commandStr)\r\n      this.activeIndex = commandStr.split('_')[1]\r\n      const command = commandStr.split('_')[0]\r\n      switch (command) {\r\n        case 'open':\r\n          this.openService()\r\n          break\r\n        case 'anylise':\r\n          this.anylise()\r\n          break\r\n        case 'withDraw':\r\n          this.withDraw()\r\n          break\r\n        case 'onShelve':\r\n          this.onShelve()\r\n          break\r\n        case 'delete':\r\n          this.deleteService()\r\n          break\r\n        default:\r\n          this.openService()\r\n          break\r\n      }\r\n    },\r\n    add () {\r\n      this.showAddServiceDialog = true\r\n    },\r\n    confirmAddService () {\r\n      this.$refs.servicesForm.validate(async valid => {\r\n        if (valid) {\r\n          this.showAddServiceDialog = false\r\n          const res = await addServicesAPI(this.servicesForm)\r\n          console.debug('addServicesAPI res', res)\r\n          if (res.code === 1000) {\r\n            this.initList()\r\n            this.$message({\r\n              type: 'success',\r\n              message: '添加成功!'\r\n            })\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    closeAddServiceDialog () {\r\n      this.servicesForm = {\r\n        serviceName: '',\r\n        remark: ''\r\n      }\r\n    }\r\n    // async getFirstService (payload) {\r\n    //   try {\r\n    //     const res = await getServiceAPI(payload)\r\n    //     console.debug('getFirstService res', res)\r\n    //   } catch (error) {\r\n    //     console.error('getFirstService error', error)\r\n    //   }\r\n    // }\r\n  },\r\n  async created () {\r\n    await this.initList()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\nul {\r\n    margin-block-start 0\r\n    margin-block-end 0\r\n    padding-inline-start 0\r\n    padding-inline-end 0\r\n    li {\r\n        list-style none\r\n    }\r\n}\r\n.list-page-wrapper {\r\n    width 100%\r\n    min-height 100%\r\n    background-color #fff\r\n    padding 20px\r\n    box-sizing border-box\r\n    position relative\r\n    .services-list-wrapper {\r\n        display flex\r\n        flex-wrap wrap\r\n        flex-direction row\r\n        .list-item-wrapper {\r\n            width 250px\r\n            height 300px\r\n            box-shadow 0 2px 12px 0 rgba(0,0,0,.1)\r\n            margin-right 30px\r\n            margin-bottom 30px\r\n            display flex\r\n            flex-direction column\r\n            position relative\r\n            cursor pointer\r\n            &.add-wrapper {\r\n                border 1px dotted #999\r\n                display flex\r\n                justify-content center\r\n                align-items center\r\n                flex-direction column\r\n                cursor pointer\r\n                .add-icon {\r\n                    font-size 60px\r\n                    color #999\r\n                    margin-bottom 20px\r\n                }\r\n                .add-desc {\r\n                    font-size 15px\r\n                    color #999\r\n                }\r\n            }\r\n            .list-img {\r\n                width 100%\r\n                height 150px\r\n            }\r\n            .content-wrapper {\r\n                width 100%\r\n                flex 1\r\n                padding 20px\r\n                box-sizing border-box\r\n                .title {\r\n                    font-size 15px\r\n                    color #000\r\n                    font-family PingFangSC-Medium\r\n                    font-weight 500\r\n                }\r\n                .desc {\r\n                    font-size 12px\r\n                    color #999\r\n                    font-family PingFangSC-Regular\r\n                    font-weight 400\r\n                }\r\n            }\r\n            .more {\r\n                position absolute\r\n                right 10px\r\n                bottom 10px\r\n                width 20px\r\n                height 20px\r\n                display block\r\n                cursor pointer\r\n                i {\r\n                    font-size 20px\r\n                    color #999\r\n                    transform rotate(90deg)\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=bf647986&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\nimport style0 from \"./List.vue?vue&type=style&index=0&id=bf647986&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bf647986\",\n  null\n  \n)\n\nexport default component.exports","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    (global.createREGL = factory());\n}(this, (function () { 'use strict';\n\nvar isTypedArray = function (x) {\n  return (\n    x instanceof Uint8Array ||\n    x instanceof Uint16Array ||\n    x instanceof Uint32Array ||\n    x instanceof Int8Array ||\n    x instanceof Int16Array ||\n    x instanceof Int32Array ||\n    x instanceof Float32Array ||\n    x instanceof Float64Array ||\n    x instanceof Uint8ClampedArray\n  )\n}\n\nvar extend = function (base, opts) {\n  var keys = Object.keys(opts)\n  for (var i = 0; i < keys.length; ++i) {\n    base[keys[i]] = opts[keys[i]]\n  }\n  return base\n}\n\n// Error checking and parameter validation.\n//\n// Statements for the form `check.someProcedure(...)` get removed by\n// a browserify transform for optimized/minified bundles.\n//\n/* globals atob */\nvar endl = '\\n'\n\n// only used for extracting shader names.  if atob not present, then errors\n// will be slightly crappier\nfunction decodeB64 (str) {\n  if (typeof atob !== 'undefined') {\n    return atob(str)\n  }\n  return 'base64:' + str\n}\n\nfunction raise (message) {\n  var error = new Error('(regl) ' + message)\n  console.error(error)\n  throw error\n}\n\nfunction check (pred, message) {\n  if (!pred) {\n    raise(message)\n  }\n}\n\nfunction encolon (message) {\n  if (message) {\n    return ': ' + message\n  }\n  return ''\n}\n\nfunction checkParameter (param, possibilities, message) {\n  if (!(param in possibilities)) {\n    raise('unknown parameter (' + param + ')' + encolon(message) +\n          '. possible values: ' + Object.keys(possibilities).join())\n  }\n}\n\nfunction checkIsTypedArray (data, message) {\n  if (!isTypedArray(data)) {\n    raise(\n      'invalid parameter type' + encolon(message) +\n      '. must be a typed array')\n  }\n}\n\nfunction standardTypeEh (value, type) {\n  switch (type) {\n    case 'number': return typeof value === 'number'\n    case 'object': return typeof value === 'object'\n    case 'string': return typeof value === 'string'\n    case 'boolean': return typeof value === 'boolean'\n    case 'function': return typeof value === 'function'\n    case 'undefined': return typeof value === 'undefined'\n    case 'symbol': return typeof value === 'symbol'\n  }\n}\n\nfunction checkTypeOf (value, type, message) {\n  if (!standardTypeEh(value, type)) {\n    raise(\n      'invalid parameter type' + encolon(message) +\n      '. expected ' + type + ', got ' + (typeof value))\n  }\n}\n\nfunction checkNonNegativeInt (value, message) {\n  if (!((value >= 0) &&\n        ((value | 0) === value))) {\n    raise('invalid parameter type, (' + value + ')' + encolon(message) +\n          '. must be a nonnegative integer')\n  }\n}\n\nfunction checkOneOf (value, list, message) {\n  if (list.indexOf(value) < 0) {\n    raise('invalid value' + encolon(message) + '. must be one of: ' + list)\n  }\n}\n\nvar constructorKeys = [\n  'gl',\n  'canvas',\n  'container',\n  'attributes',\n  'pixelRatio',\n  'extensions',\n  'optionalExtensions',\n  'profile',\n  'onDone'\n]\n\nfunction checkConstructor (obj) {\n  Object.keys(obj).forEach(function (key) {\n    if (constructorKeys.indexOf(key) < 0) {\n      raise('invalid regl constructor argument \"' + key + '\". must be one of ' + constructorKeys)\n    }\n  })\n}\n\nfunction leftPad (str, n) {\n  str = str + ''\n  while (str.length < n) {\n    str = ' ' + str\n  }\n  return str\n}\n\nfunction ShaderFile () {\n  this.name = 'unknown'\n  this.lines = []\n  this.index = {}\n  this.hasErrors = false\n}\n\nfunction ShaderLine (number, line) {\n  this.number = number\n  this.line = line\n  this.errors = []\n}\n\nfunction ShaderError (fileNumber, lineNumber, message) {\n  this.file = fileNumber\n  this.line = lineNumber\n  this.message = message\n}\n\nfunction guessCommand () {\n  var error = new Error()\n  var stack = (error.stack || error).toString()\n  var pat = /compileProcedure.*\\n\\s*at.*\\((.*)\\)/.exec(stack)\n  if (pat) {\n    return pat[1]\n  }\n  var pat2 = /compileProcedure.*\\n\\s*at\\s+(.*)(\\n|$)/.exec(stack)\n  if (pat2) {\n    return pat2[1]\n  }\n  return 'unknown'\n}\n\nfunction guessCallSite () {\n  var error = new Error()\n  var stack = (error.stack || error).toString()\n  var pat = /at REGLCommand.*\\n\\s+at.*\\((.*)\\)/.exec(stack)\n  if (pat) {\n    return pat[1]\n  }\n  var pat2 = /at REGLCommand.*\\n\\s+at\\s+(.*)\\n/.exec(stack)\n  if (pat2) {\n    return pat2[1]\n  }\n  return 'unknown'\n}\n\nfunction parseSource (source, command) {\n  var lines = source.split('\\n')\n  var lineNumber = 1\n  var fileNumber = 0\n  var files = {\n    unknown: new ShaderFile(),\n    0: new ShaderFile()\n  }\n  files.unknown.name = files[0].name = command || guessCommand()\n  files.unknown.lines.push(new ShaderLine(0, ''))\n  for (var i = 0; i < lines.length; ++i) {\n    var line = lines[i]\n    var parts = /^\\s*#\\s*(\\w+)\\s+(.+)\\s*$/.exec(line)\n    if (parts) {\n      switch (parts[1]) {\n        case 'line':\n          var lineNumberInfo = /(\\d+)(\\s+\\d+)?/.exec(parts[2])\n          if (lineNumberInfo) {\n            lineNumber = lineNumberInfo[1] | 0\n            if (lineNumberInfo[2]) {\n              fileNumber = lineNumberInfo[2] | 0\n              if (!(fileNumber in files)) {\n                files[fileNumber] = new ShaderFile()\n              }\n            }\n          }\n          break\n        case 'define':\n          var nameInfo = /SHADER_NAME(_B64)?\\s+(.*)$/.exec(parts[2])\n          if (nameInfo) {\n            files[fileNumber].name = (nameInfo[1]\n              ? decodeB64(nameInfo[2])\n              : nameInfo[2])\n          }\n          break\n      }\n    }\n    files[fileNumber].lines.push(new ShaderLine(lineNumber++, line))\n  }\n  Object.keys(files).forEach(function (fileNumber) {\n    var file = files[fileNumber]\n    file.lines.forEach(function (line) {\n      file.index[line.number] = line\n    })\n  })\n  return files\n}\n\nfunction parseErrorLog (errLog) {\n  var result = []\n  errLog.split('\\n').forEach(function (errMsg) {\n    if (errMsg.length < 5) {\n      return\n    }\n    var parts = /^ERROR:\\s+(\\d+):(\\d+):\\s*(.*)$/.exec(errMsg)\n    if (parts) {\n      result.push(new ShaderError(\n        parts[1] | 0,\n        parts[2] | 0,\n        parts[3].trim()))\n    } else if (errMsg.length > 0) {\n      result.push(new ShaderError('unknown', 0, errMsg))\n    }\n  })\n  return result\n}\n\nfunction annotateFiles (files, errors) {\n  errors.forEach(function (error) {\n    var file = files[error.file]\n    if (file) {\n      var line = file.index[error.line]\n      if (line) {\n        line.errors.push(error)\n        file.hasErrors = true\n        return\n      }\n    }\n    files.unknown.hasErrors = true\n    files.unknown.lines[0].errors.push(error)\n  })\n}\n\nfunction checkShaderError (gl, shader, source, type, command) {\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    var errLog = gl.getShaderInfoLog(shader)\n    var typeName = type === gl.FRAGMENT_SHADER ? 'fragment' : 'vertex'\n    checkCommandType(source, 'string', typeName + ' shader source must be a string', command)\n    var files = parseSource(source, command)\n    var errors = parseErrorLog(errLog)\n    annotateFiles(files, errors)\n\n    Object.keys(files).forEach(function (fileNumber) {\n      var file = files[fileNumber]\n      if (!file.hasErrors) {\n        return\n      }\n\n      var strings = ['']\n      var styles = ['']\n\n      function push (str, style) {\n        strings.push(str)\n        styles.push(style || '')\n      }\n\n      push('file number ' + fileNumber + ': ' + file.name + '\\n', 'color:red;text-decoration:underline;font-weight:bold')\n\n      file.lines.forEach(function (line) {\n        if (line.errors.length > 0) {\n          push(leftPad(line.number, 4) + '|  ', 'background-color:yellow; font-weight:bold')\n          push(line.line + endl, 'color:red; background-color:yellow; font-weight:bold')\n\n          // try to guess token\n          var offset = 0\n          line.errors.forEach(function (error) {\n            var message = error.message\n            var token = /^\\s*'(.*)'\\s*:\\s*(.*)$/.exec(message)\n            if (token) {\n              var tokenPat = token[1]\n              message = token[2]\n              switch (tokenPat) {\n                case 'assign':\n                  tokenPat = '='\n                  break\n              }\n              offset = Math.max(line.line.indexOf(tokenPat, offset), 0)\n            } else {\n              offset = 0\n            }\n\n            push(leftPad('| ', 6))\n            push(leftPad('^^^', offset + 3) + endl, 'font-weight:bold')\n            push(leftPad('| ', 6))\n            push(message + endl, 'font-weight:bold')\n          })\n          push(leftPad('| ', 6) + endl)\n        } else {\n          push(leftPad(line.number, 4) + '|  ')\n          push(line.line + endl, 'color:red')\n        }\n      })\n      if (typeof document !== 'undefined' && !window.chrome) {\n        styles[0] = strings.join('%c')\n        console.log.apply(console, styles)\n      } else {\n        console.log(strings.join(''))\n      }\n    })\n\n    check.raise('Error compiling ' + typeName + ' shader, ' + files[0].name)\n  }\n}\n\nfunction checkLinkError (gl, program, fragShader, vertShader, command) {\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    var errLog = gl.getProgramInfoLog(program)\n    var fragParse = parseSource(fragShader, command)\n    var vertParse = parseSource(vertShader, command)\n\n    var header = 'Error linking program with vertex shader, \"' +\n      vertParse[0].name + '\", and fragment shader \"' + fragParse[0].name + '\"'\n\n    if (typeof document !== 'undefined') {\n      console.log('%c' + header + endl + '%c' + errLog,\n        'color:red;text-decoration:underline;font-weight:bold',\n        'color:red')\n    } else {\n      console.log(header + endl + errLog)\n    }\n    check.raise(header)\n  }\n}\n\nfunction saveCommandRef (object) {\n  object._commandRef = guessCommand()\n}\n\nfunction saveDrawCommandInfo (opts, uniforms, attributes, stringStore) {\n  saveCommandRef(opts)\n\n  function id (str) {\n    if (str) {\n      return stringStore.id(str)\n    }\n    return 0\n  }\n  opts._fragId = id(opts.static.frag)\n  opts._vertId = id(opts.static.vert)\n\n  function addProps (dict, set) {\n    Object.keys(set).forEach(function (u) {\n      dict[stringStore.id(u)] = true\n    })\n  }\n\n  var uniformSet = opts._uniformSet = {}\n  addProps(uniformSet, uniforms.static)\n  addProps(uniformSet, uniforms.dynamic)\n\n  var attributeSet = opts._attributeSet = {}\n  addProps(attributeSet, attributes.static)\n  addProps(attributeSet, attributes.dynamic)\n\n  opts._hasCount = (\n    'count' in opts.static ||\n    'count' in opts.dynamic ||\n    'elements' in opts.static ||\n    'elements' in opts.dynamic)\n}\n\nfunction commandRaise (message, command) {\n  var callSite = guessCallSite()\n  raise(message +\n    ' in command ' + (command || guessCommand()) +\n    (callSite === 'unknown' ? '' : ' called from ' + callSite))\n}\n\nfunction checkCommand (pred, message, command) {\n  if (!pred) {\n    commandRaise(message, command || guessCommand())\n  }\n}\n\nfunction checkParameterCommand (param, possibilities, message, command) {\n  if (!(param in possibilities)) {\n    commandRaise(\n      'unknown parameter (' + param + ')' + encolon(message) +\n      '. possible values: ' + Object.keys(possibilities).join(),\n      command || guessCommand())\n  }\n}\n\nfunction checkCommandType (value, type, message, command) {\n  if (!standardTypeEh(value, type)) {\n    commandRaise(\n      'invalid parameter type' + encolon(message) +\n      '. expected ' + type + ', got ' + (typeof value),\n      command || guessCommand())\n  }\n}\n\nfunction checkOptional (block) {\n  block()\n}\n\nfunction checkFramebufferFormat (attachment, texFormats, rbFormats) {\n  if (attachment.texture) {\n    checkOneOf(\n      attachment.texture._texture.internalformat,\n      texFormats,\n      'unsupported texture format for attachment')\n  } else {\n    checkOneOf(\n      attachment.renderbuffer._renderbuffer.format,\n      rbFormats,\n      'unsupported renderbuffer format for attachment')\n  }\n}\n\nvar GL_CLAMP_TO_EDGE = 0x812F\n\nvar GL_NEAREST = 0x2600\nvar GL_NEAREST_MIPMAP_NEAREST = 0x2700\nvar GL_LINEAR_MIPMAP_NEAREST = 0x2701\nvar GL_NEAREST_MIPMAP_LINEAR = 0x2702\nvar GL_LINEAR_MIPMAP_LINEAR = 0x2703\n\nvar GL_BYTE = 5120\nvar GL_UNSIGNED_BYTE = 5121\nvar GL_SHORT = 5122\nvar GL_UNSIGNED_SHORT = 5123\nvar GL_INT = 5124\nvar GL_UNSIGNED_INT = 5125\nvar GL_FLOAT = 5126\n\nvar GL_UNSIGNED_SHORT_4_4_4_4 = 0x8033\nvar GL_UNSIGNED_SHORT_5_5_5_1 = 0x8034\nvar GL_UNSIGNED_SHORT_5_6_5 = 0x8363\nvar GL_UNSIGNED_INT_24_8_WEBGL = 0x84FA\n\nvar GL_HALF_FLOAT_OES = 0x8D61\n\nvar TYPE_SIZE = {}\n\nTYPE_SIZE[GL_BYTE] =\nTYPE_SIZE[GL_UNSIGNED_BYTE] = 1\n\nTYPE_SIZE[GL_SHORT] =\nTYPE_SIZE[GL_UNSIGNED_SHORT] =\nTYPE_SIZE[GL_HALF_FLOAT_OES] =\nTYPE_SIZE[GL_UNSIGNED_SHORT_5_6_5] =\nTYPE_SIZE[GL_UNSIGNED_SHORT_4_4_4_4] =\nTYPE_SIZE[GL_UNSIGNED_SHORT_5_5_5_1] = 2\n\nTYPE_SIZE[GL_INT] =\nTYPE_SIZE[GL_UNSIGNED_INT] =\nTYPE_SIZE[GL_FLOAT] =\nTYPE_SIZE[GL_UNSIGNED_INT_24_8_WEBGL] = 4\n\nfunction pixelSize (type, channels) {\n  if (type === GL_UNSIGNED_SHORT_5_5_5_1 ||\n      type === GL_UNSIGNED_SHORT_4_4_4_4 ||\n      type === GL_UNSIGNED_SHORT_5_6_5) {\n    return 2\n  } else if (type === GL_UNSIGNED_INT_24_8_WEBGL) {\n    return 4\n  } else {\n    return TYPE_SIZE[type] * channels\n  }\n}\n\nfunction isPow2 (v) {\n  return !(v & (v - 1)) && (!!v)\n}\n\nfunction checkTexture2D (info, mipData, limits) {\n  var i\n  var w = mipData.width\n  var h = mipData.height\n  var c = mipData.channels\n\n  // Check texture shape\n  check(w > 0 && w <= limits.maxTextureSize &&\n        h > 0 && h <= limits.maxTextureSize,\n  'invalid texture shape')\n\n  // check wrap mode\n  if (info.wrapS !== GL_CLAMP_TO_EDGE || info.wrapT !== GL_CLAMP_TO_EDGE) {\n    check(isPow2(w) && isPow2(h),\n      'incompatible wrap mode for texture, both width and height must be power of 2')\n  }\n\n  if (mipData.mipmask === 1) {\n    if (w !== 1 && h !== 1) {\n      check(\n        info.minFilter !== GL_NEAREST_MIPMAP_NEAREST &&\n        info.minFilter !== GL_NEAREST_MIPMAP_LINEAR &&\n        info.minFilter !== GL_LINEAR_MIPMAP_NEAREST &&\n        info.minFilter !== GL_LINEAR_MIPMAP_LINEAR,\n        'min filter requires mipmap')\n    }\n  } else {\n    // texture must be power of 2\n    check(isPow2(w) && isPow2(h),\n      'texture must be a square power of 2 to support mipmapping')\n    check(mipData.mipmask === (w << 1) - 1,\n      'missing or incomplete mipmap data')\n  }\n\n  if (mipData.type === GL_FLOAT) {\n    if (limits.extensions.indexOf('oes_texture_float_linear') < 0) {\n      check(info.minFilter === GL_NEAREST && info.magFilter === GL_NEAREST,\n        'filter not supported, must enable oes_texture_float_linear')\n    }\n    check(!info.genMipmaps,\n      'mipmap generation not supported with float textures')\n  }\n\n  // check image complete\n  var mipimages = mipData.images\n  for (i = 0; i < 16; ++i) {\n    if (mipimages[i]) {\n      var mw = w >> i\n      var mh = h >> i\n      check(mipData.mipmask & (1 << i), 'missing mipmap data')\n\n      var img = mipimages[i]\n\n      check(\n        img.width === mw &&\n        img.height === mh,\n        'invalid shape for mip images')\n\n      check(\n        img.format === mipData.format &&\n        img.internalformat === mipData.internalformat &&\n        img.type === mipData.type,\n        'incompatible type for mip image')\n\n      if (img.compressed) {\n        // TODO: check size for compressed images\n      } else if (img.data) {\n        // check(img.data.byteLength === mw * mh *\n        // Math.max(pixelSize(img.type, c), img.unpackAlignment),\n        var rowSize = Math.ceil(pixelSize(img.type, c) * mw / img.unpackAlignment) * img.unpackAlignment\n        check(img.data.byteLength === rowSize * mh,\n          'invalid data for image, buffer size is inconsistent with image format')\n      } else if (img.element) {\n        // TODO: check element can be loaded\n      } else if (img.copy) {\n        // TODO: check compatible format and type\n      }\n    } else if (!info.genMipmaps) {\n      check((mipData.mipmask & (1 << i)) === 0, 'extra mipmap data')\n    }\n  }\n\n  if (mipData.compressed) {\n    check(!info.genMipmaps,\n      'mipmap generation for compressed images not supported')\n  }\n}\n\nfunction checkTextureCube (texture, info, faces, limits) {\n  var w = texture.width\n  var h = texture.height\n  var c = texture.channels\n\n  // Check texture shape\n  check(\n    w > 0 && w <= limits.maxTextureSize && h > 0 && h <= limits.maxTextureSize,\n    'invalid texture shape')\n  check(\n    w === h,\n    'cube map must be square')\n  check(\n    info.wrapS === GL_CLAMP_TO_EDGE && info.wrapT === GL_CLAMP_TO_EDGE,\n    'wrap mode not supported by cube map')\n\n  for (var i = 0; i < faces.length; ++i) {\n    var face = faces[i]\n    check(\n      face.width === w && face.height === h,\n      'inconsistent cube map face shape')\n\n    if (info.genMipmaps) {\n      check(!face.compressed,\n        'can not generate mipmap for compressed textures')\n      check(face.mipmask === 1,\n        'can not specify mipmaps and generate mipmaps')\n    } else {\n      // TODO: check mip and filter mode\n    }\n\n    var mipmaps = face.images\n    for (var j = 0; j < 16; ++j) {\n      var img = mipmaps[j]\n      if (img) {\n        var mw = w >> j\n        var mh = h >> j\n        check(face.mipmask & (1 << j), 'missing mipmap data')\n        check(\n          img.width === mw &&\n          img.height === mh,\n          'invalid shape for mip images')\n        check(\n          img.format === texture.format &&\n          img.internalformat === texture.internalformat &&\n          img.type === texture.type,\n          'incompatible type for mip image')\n\n        if (img.compressed) {\n          // TODO: check size for compressed images\n        } else if (img.data) {\n          check(img.data.byteLength === mw * mh *\n            Math.max(pixelSize(img.type, c), img.unpackAlignment),\n          'invalid data for image, buffer size is inconsistent with image format')\n        } else if (img.element) {\n          // TODO: check element can be loaded\n        } else if (img.copy) {\n          // TODO: check compatible format and type\n        }\n      }\n    }\n  }\n}\n\nvar check$1 = extend(check, {\n  optional: checkOptional,\n  raise: raise,\n  commandRaise: commandRaise,\n  command: checkCommand,\n  parameter: checkParameter,\n  commandParameter: checkParameterCommand,\n  constructor: checkConstructor,\n  type: checkTypeOf,\n  commandType: checkCommandType,\n  isTypedArray: checkIsTypedArray,\n  nni: checkNonNegativeInt,\n  oneOf: checkOneOf,\n  shaderError: checkShaderError,\n  linkError: checkLinkError,\n  callSite: guessCallSite,\n  saveCommandRef: saveCommandRef,\n  saveDrawInfo: saveDrawCommandInfo,\n  framebufferFormat: checkFramebufferFormat,\n  guessCommand: guessCommand,\n  texture2D: checkTexture2D,\n  textureCube: checkTextureCube\n});\n\nvar VARIABLE_COUNTER = 0\n\nvar DYN_FUNC = 0\nvar DYN_CONSTANT = 5\nvar DYN_ARRAY = 6\n\nfunction DynamicVariable (type, data) {\n  this.id = (VARIABLE_COUNTER++)\n  this.type = type\n  this.data = data\n}\n\nfunction escapeStr (str) {\n  return str.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"')\n}\n\nfunction splitParts (str) {\n  if (str.length === 0) {\n    return []\n  }\n\n  var firstChar = str.charAt(0)\n  var lastChar = str.charAt(str.length - 1)\n\n  if (str.length > 1 &&\n      firstChar === lastChar &&\n      (firstChar === '\"' || firstChar === \"'\")) {\n    return ['\"' + escapeStr(str.substr(1, str.length - 2)) + '\"']\n  }\n\n  var parts = /\\[(false|true|null|\\d+|'[^']*'|\"[^\"]*\")\\]/.exec(str)\n  if (parts) {\n    return (\n      splitParts(str.substr(0, parts.index))\n        .concat(splitParts(parts[1]))\n        .concat(splitParts(str.substr(parts.index + parts[0].length)))\n    )\n  }\n\n  var subparts = str.split('.')\n  if (subparts.length === 1) {\n    return ['\"' + escapeStr(str) + '\"']\n  }\n\n  var result = []\n  for (var i = 0; i < subparts.length; ++i) {\n    result = result.concat(splitParts(subparts[i]))\n  }\n  return result\n}\n\nfunction toAccessorString (str) {\n  return '[' + splitParts(str).join('][') + ']'\n}\n\nfunction defineDynamic (type, data) {\n  return new DynamicVariable(type, toAccessorString(data + ''))\n}\n\nfunction isDynamic (x) {\n  return (typeof x === 'function' && !x._reglType) || (x instanceof DynamicVariable)\n}\n\nfunction unbox (x, path) {\n  if (typeof x === 'function') {\n    return new DynamicVariable(DYN_FUNC, x)\n  } else if (typeof x === 'number' || typeof x === 'boolean') {\n    return new DynamicVariable(DYN_CONSTANT, x)\n  } else if (Array.isArray(x)) {\n    return new DynamicVariable(DYN_ARRAY, x.map((y, i) => unbox(y, path + '[' + i + ']')))\n  } else if (x instanceof DynamicVariable) {\n    return x\n  }\n  check$1(false, 'invalid option type in uniform ' + path)\n}\n\nvar dynamic = {\n  DynamicVariable: DynamicVariable,\n  define: defineDynamic,\n  isDynamic: isDynamic,\n  unbox: unbox,\n  accessor: toAccessorString\n};\n\n/* globals requestAnimationFrame, cancelAnimationFrame */\nvar raf = {\n  next: typeof requestAnimationFrame === 'function'\n    ? function (cb) { return requestAnimationFrame(cb) }\n    : function (cb) { return setTimeout(cb, 16) },\n  cancel: typeof cancelAnimationFrame === 'function'\n    ? function (raf) { return cancelAnimationFrame(raf) }\n    : clearTimeout\n};\n\n/* globals performance */\nvar clock = (typeof performance !== 'undefined' && performance.now)\n    ? function () { return performance.now() }\n    : function () { return +(new Date()) };\n\nfunction createStringStore () {\n  var stringIds = { '': 0 }\n  var stringValues = ['']\n  return {\n    id: function (str) {\n      var result = stringIds[str]\n      if (result) {\n        return result\n      }\n      result = stringIds[str] = stringValues.length\n      stringValues.push(str)\n      return result\n    },\n\n    str: function (id) {\n      return stringValues[id]\n    }\n  }\n}\n\n// Context and canvas creation helper functions\nfunction createCanvas (element, onDone, pixelRatio) {\n  var canvas = document.createElement('canvas')\n  extend(canvas.style, {\n    border: 0,\n    margin: 0,\n    padding: 0,\n    top: 0,\n    left: 0\n  })\n  element.appendChild(canvas)\n\n  if (element === document.body) {\n    canvas.style.position = 'absolute'\n    extend(element.style, {\n      margin: 0,\n      padding: 0\n    })\n  }\n\n  function resize () {\n    var w = window.innerWidth\n    var h = window.innerHeight\n    if (element !== document.body) {\n      var bounds = element.getBoundingClientRect()\n      w = bounds.right - bounds.left\n      h = bounds.bottom - bounds.top\n    }\n    canvas.width = pixelRatio * w\n    canvas.height = pixelRatio * h\n    extend(canvas.style, {\n      width: w + 'px',\n      height: h + 'px'\n    })\n  }\n\n  var resizeObserver\n  if (element !== document.body && typeof ResizeObserver === 'function') {\n    // ignore 'ResizeObserver' is not defined\n    // eslint-disable-next-line\n    resizeObserver = new ResizeObserver(function () {\n      // setTimeout to avoid flicker\n      setTimeout(resize)\n    })\n    resizeObserver.observe(element)\n  } else {\n    window.addEventListener('resize', resize, false)\n  }\n\n  function onDestroy () {\n    if (resizeObserver) {\n      resizeObserver.disconnect()\n    } else {\n      window.removeEventListener('resize', resize)\n    }\n    element.removeChild(canvas)\n  }\n\n  resize()\n\n  return {\n    canvas: canvas,\n    onDestroy: onDestroy\n  }\n}\n\nfunction createContext (canvas, contextAttributes) {\n  function get (name) {\n    try {\n      return canvas.getContext(name, contextAttributes)\n    } catch (e) {\n      return null\n    }\n  }\n  return (\n    get('webgl') ||\n    get('experimental-webgl') ||\n    get('webgl-experimental')\n  )\n}\n\nfunction isHTMLElement (obj) {\n  return (\n    typeof obj.nodeName === 'string' &&\n    typeof obj.appendChild === 'function' &&\n    typeof obj.getBoundingClientRect === 'function'\n  )\n}\n\nfunction isWebGLContext (obj) {\n  return (\n    typeof obj.drawArrays === 'function' ||\n    typeof obj.drawElements === 'function'\n  )\n}\n\nfunction parseExtensions (input) {\n  if (typeof input === 'string') {\n    return input.split()\n  }\n  check$1(Array.isArray(input), 'invalid extension array')\n  return input\n}\n\nfunction getElement (desc) {\n  if (typeof desc === 'string') {\n    check$1(typeof document !== 'undefined', 'not supported outside of DOM')\n    return document.querySelector(desc)\n  }\n  return desc\n}\n\nfunction parseArgs (args_) {\n  var args = args_ || {}\n  var element, container, canvas, gl\n  var contextAttributes = {}\n  var extensions = []\n  var optionalExtensions = []\n  var pixelRatio = (typeof window === 'undefined' ? 1 : window.devicePixelRatio)\n  var profile = false\n  var onDone = function (err) {\n    if (err) {\n      check$1.raise(err)\n    }\n  }\n  var onDestroy = function () {}\n  if (typeof args === 'string') {\n    check$1(\n      typeof document !== 'undefined',\n      'selector queries only supported in DOM enviroments')\n    element = document.querySelector(args)\n    check$1(element, 'invalid query string for element')\n  } else if (typeof args === 'object') {\n    if (isHTMLElement(args)) {\n      element = args\n    } else if (isWebGLContext(args)) {\n      gl = args\n      canvas = gl.canvas\n    } else {\n      check$1.constructor(args)\n      if ('gl' in args) {\n        gl = args.gl\n      } else if ('canvas' in args) {\n        canvas = getElement(args.canvas)\n      } else if ('container' in args) {\n        container = getElement(args.container)\n      }\n      if ('attributes' in args) {\n        contextAttributes = args.attributes\n        check$1.type(contextAttributes, 'object', 'invalid context attributes')\n      }\n      if ('extensions' in args) {\n        extensions = parseExtensions(args.extensions)\n      }\n      if ('optionalExtensions' in args) {\n        optionalExtensions = parseExtensions(args.optionalExtensions)\n      }\n      if ('onDone' in args) {\n        check$1.type(\n          args.onDone, 'function',\n          'invalid or missing onDone callback')\n        onDone = args.onDone\n      }\n      if ('profile' in args) {\n        profile = !!args.profile\n      }\n      if ('pixelRatio' in args) {\n        pixelRatio = +args.pixelRatio\n        check$1(pixelRatio > 0, 'invalid pixel ratio')\n      }\n    }\n  } else {\n    check$1.raise('invalid arguments to regl')\n  }\n\n  if (element) {\n    if (element.nodeName.toLowerCase() === 'canvas') {\n      canvas = element\n    } else {\n      container = element\n    }\n  }\n\n  if (!gl) {\n    if (!canvas) {\n      check$1(\n        typeof document !== 'undefined',\n        'must manually specify webgl context outside of DOM environments')\n      var result = createCanvas(container || document.body, onDone, pixelRatio)\n      if (!result) {\n        return null\n      }\n      canvas = result.canvas\n      onDestroy = result.onDestroy\n    }\n    // workaround for chromium bug, premultiplied alpha value is platform dependent\n    if (contextAttributes.premultipliedAlpha === undefined) contextAttributes.premultipliedAlpha = true\n    gl = createContext(canvas, contextAttributes)\n  }\n\n  if (!gl) {\n    onDestroy()\n    onDone('webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org')\n    return null\n  }\n\n  return {\n    gl: gl,\n    canvas: canvas,\n    container: container,\n    extensions: extensions,\n    optionalExtensions: optionalExtensions,\n    pixelRatio: pixelRatio,\n    profile: profile,\n    onDone: onDone,\n    onDestroy: onDestroy\n  }\n}\n\nfunction createExtensionCache (gl, config) {\n  var extensions = {}\n\n  function tryLoadExtension (name_) {\n    check$1.type(name_, 'string', 'extension name must be string')\n    var name = name_.toLowerCase()\n    var ext\n    try {\n      ext = extensions[name] = gl.getExtension(name)\n    } catch (e) {}\n    return !!ext\n  }\n\n  for (var i = 0; i < config.extensions.length; ++i) {\n    var name = config.extensions[i]\n    if (!tryLoadExtension(name)) {\n      config.onDestroy()\n      config.onDone('\"' + name + '\" extension is not supported by the current WebGL context, try upgrading your system or a different browser')\n      return null\n    }\n  }\n\n  config.optionalExtensions.forEach(tryLoadExtension)\n\n  return {\n    extensions: extensions,\n    restore: function () {\n      Object.keys(extensions).forEach(function (name) {\n        if (extensions[name] && !tryLoadExtension(name)) {\n          throw new Error('(regl): error restoring extension ' + name)\n        }\n      })\n    }\n  }\n}\n\nfunction loop (n, f) {\n  var result = Array(n)\n  for (var i = 0; i < n; ++i) {\n    result[i] = f(i)\n  }\n  return result\n}\n\nvar GL_BYTE$1 = 5120\nvar GL_UNSIGNED_BYTE$2 = 5121\nvar GL_SHORT$1 = 5122\nvar GL_UNSIGNED_SHORT$1 = 5123\nvar GL_INT$1 = 5124\nvar GL_UNSIGNED_INT$1 = 5125\nvar GL_FLOAT$2 = 5126\n\nfunction nextPow16 (v) {\n  for (var i = 16; i <= (1 << 28); i *= 16) {\n    if (v <= i) {\n      return i\n    }\n  }\n  return 0\n}\n\nfunction log2 (v) {\n  var r, shift\n  r = (v > 0xFFFF) << 4\n  v >>>= r\n  shift = (v > 0xFF) << 3\n  v >>>= shift; r |= shift\n  shift = (v > 0xF) << 2\n  v >>>= shift; r |= shift\n  shift = (v > 0x3) << 1\n  v >>>= shift; r |= shift\n  return r | (v >> 1)\n}\n\nfunction createPool () {\n  var bufferPool = loop(8, function () {\n    return []\n  })\n\n  function alloc (n) {\n    var sz = nextPow16(n)\n    var bin = bufferPool[log2(sz) >> 2]\n    if (bin.length > 0) {\n      return bin.pop()\n    }\n    return new ArrayBuffer(sz)\n  }\n\n  function free (buf) {\n    bufferPool[log2(buf.byteLength) >> 2].push(buf)\n  }\n\n  function allocType (type, n) {\n    var result = null\n    switch (type) {\n      case GL_BYTE$1:\n        result = new Int8Array(alloc(n), 0, n)\n        break\n      case GL_UNSIGNED_BYTE$2:\n        result = new Uint8Array(alloc(n), 0, n)\n        break\n      case GL_SHORT$1:\n        result = new Int16Array(alloc(2 * n), 0, n)\n        break\n      case GL_UNSIGNED_SHORT$1:\n        result = new Uint16Array(alloc(2 * n), 0, n)\n        break\n      case GL_INT$1:\n        result = new Int32Array(alloc(4 * n), 0, n)\n        break\n      case GL_UNSIGNED_INT$1:\n        result = new Uint32Array(alloc(4 * n), 0, n)\n        break\n      case GL_FLOAT$2:\n        result = new Float32Array(alloc(4 * n), 0, n)\n        break\n      default:\n        return null\n    }\n    if (result.length !== n) {\n      return result.subarray(0, n)\n    }\n    return result\n  }\n\n  function freeType (array) {\n    free(array.buffer)\n  }\n\n  return {\n    alloc: alloc,\n    free: free,\n    allocType: allocType,\n    freeType: freeType\n  }\n}\n\nvar pool = createPool()\n\n// zero pool for initial zero data\npool.zero = createPool()\n\nvar GL_SUBPIXEL_BITS = 0x0D50\nvar GL_RED_BITS = 0x0D52\nvar GL_GREEN_BITS = 0x0D53\nvar GL_BLUE_BITS = 0x0D54\nvar GL_ALPHA_BITS = 0x0D55\nvar GL_DEPTH_BITS = 0x0D56\nvar GL_STENCIL_BITS = 0x0D57\n\nvar GL_ALIASED_POINT_SIZE_RANGE = 0x846D\nvar GL_ALIASED_LINE_WIDTH_RANGE = 0x846E\n\nvar GL_MAX_TEXTURE_SIZE = 0x0D33\nvar GL_MAX_VIEWPORT_DIMS = 0x0D3A\nvar GL_MAX_VERTEX_ATTRIBS = 0x8869\nvar GL_MAX_VERTEX_UNIFORM_VECTORS = 0x8DFB\nvar GL_MAX_VARYING_VECTORS = 0x8DFC\nvar GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS = 0x8B4D\nvar GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS = 0x8B4C\nvar GL_MAX_TEXTURE_IMAGE_UNITS = 0x8872\nvar GL_MAX_FRAGMENT_UNIFORM_VECTORS = 0x8DFD\nvar GL_MAX_CUBE_MAP_TEXTURE_SIZE = 0x851C\nvar GL_MAX_RENDERBUFFER_SIZE = 0x84E8\n\nvar GL_VENDOR = 0x1F00\nvar GL_RENDERER = 0x1F01\nvar GL_VERSION = 0x1F02\nvar GL_SHADING_LANGUAGE_VERSION = 0x8B8C\n\nvar GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT = 0x84FF\n\nvar GL_MAX_COLOR_ATTACHMENTS_WEBGL = 0x8CDF\nvar GL_MAX_DRAW_BUFFERS_WEBGL = 0x8824\n\nvar GL_TEXTURE_2D = 0x0DE1\nvar GL_TEXTURE_CUBE_MAP = 0x8513\nvar GL_TEXTURE_CUBE_MAP_POSITIVE_X = 0x8515\nvar GL_TEXTURE0 = 0x84C0\nvar GL_RGBA = 0x1908\nvar GL_FLOAT$1 = 0x1406\nvar GL_UNSIGNED_BYTE$1 = 0x1401\nvar GL_FRAMEBUFFER = 0x8D40\nvar GL_FRAMEBUFFER_COMPLETE = 0x8CD5\nvar GL_COLOR_ATTACHMENT0 = 0x8CE0\nvar GL_COLOR_BUFFER_BIT$1 = 0x4000\n\nvar wrapLimits = function (gl, extensions) {\n  var maxAnisotropic = 1\n  if (extensions.ext_texture_filter_anisotropic) {\n    maxAnisotropic = gl.getParameter(GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT)\n  }\n\n  var maxDrawbuffers = 1\n  var maxColorAttachments = 1\n  if (extensions.webgl_draw_buffers) {\n    maxDrawbuffers = gl.getParameter(GL_MAX_DRAW_BUFFERS_WEBGL)\n    maxColorAttachments = gl.getParameter(GL_MAX_COLOR_ATTACHMENTS_WEBGL)\n  }\n\n  // detect if reading float textures is available (Safari doesn't support)\n  var readFloat = !!extensions.oes_texture_float\n  if (readFloat) {\n    var readFloatTexture = gl.createTexture()\n    gl.bindTexture(GL_TEXTURE_2D, readFloatTexture)\n    gl.texImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 1, 1, 0, GL_RGBA, GL_FLOAT$1, null)\n\n    var fbo = gl.createFramebuffer()\n    gl.bindFramebuffer(GL_FRAMEBUFFER, fbo)\n    gl.framebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, readFloatTexture, 0)\n    gl.bindTexture(GL_TEXTURE_2D, null)\n\n    if (gl.checkFramebufferStatus(GL_FRAMEBUFFER) !== GL_FRAMEBUFFER_COMPLETE) readFloat = false\n\n    else {\n      gl.viewport(0, 0, 1, 1)\n      gl.clearColor(1.0, 0.0, 0.0, 1.0)\n      gl.clear(GL_COLOR_BUFFER_BIT$1)\n      var pixels = pool.allocType(GL_FLOAT$1, 4)\n      gl.readPixels(0, 0, 1, 1, GL_RGBA, GL_FLOAT$1, pixels)\n\n      if (gl.getError()) readFloat = false\n      else {\n        gl.deleteFramebuffer(fbo)\n        gl.deleteTexture(readFloatTexture)\n\n        readFloat = pixels[0] === 1.0\n      }\n\n      pool.freeType(pixels)\n    }\n  }\n\n  // detect non power of two cube textures support (IE doesn't support)\n  var isIE = typeof navigator !== 'undefined' && (/MSIE/.test(navigator.userAgent) || /Trident\\//.test(navigator.appVersion) || /Edge/.test(navigator.userAgent))\n\n  var npotTextureCube = true\n\n  if (!isIE) {\n    var cubeTexture = gl.createTexture()\n    var data = pool.allocType(GL_UNSIGNED_BYTE$1, 36)\n    gl.activeTexture(GL_TEXTURE0)\n    gl.bindTexture(GL_TEXTURE_CUBE_MAP, cubeTexture)\n    gl.texImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X, 0, GL_RGBA, 3, 3, 0, GL_RGBA, GL_UNSIGNED_BYTE$1, data)\n    pool.freeType(data)\n    gl.bindTexture(GL_TEXTURE_CUBE_MAP, null)\n    gl.deleteTexture(cubeTexture)\n    npotTextureCube = !gl.getError()\n  }\n\n  return {\n    // drawing buffer bit depth\n    colorBits: [\n      gl.getParameter(GL_RED_BITS),\n      gl.getParameter(GL_GREEN_BITS),\n      gl.getParameter(GL_BLUE_BITS),\n      gl.getParameter(GL_ALPHA_BITS)\n    ],\n    depthBits: gl.getParameter(GL_DEPTH_BITS),\n    stencilBits: gl.getParameter(GL_STENCIL_BITS),\n    subpixelBits: gl.getParameter(GL_SUBPIXEL_BITS),\n\n    // supported extensions\n    extensions: Object.keys(extensions).filter(function (ext) {\n      return !!extensions[ext]\n    }),\n\n    // max aniso samples\n    maxAnisotropic: maxAnisotropic,\n\n    // max draw buffers\n    maxDrawbuffers: maxDrawbuffers,\n    maxColorAttachments: maxColorAttachments,\n\n    // point and line size ranges\n    pointSizeDims: gl.getParameter(GL_ALIASED_POINT_SIZE_RANGE),\n    lineWidthDims: gl.getParameter(GL_ALIASED_LINE_WIDTH_RANGE),\n    maxViewportDims: gl.getParameter(GL_MAX_VIEWPORT_DIMS),\n    maxCombinedTextureUnits: gl.getParameter(GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS),\n    maxCubeMapSize: gl.getParameter(GL_MAX_CUBE_MAP_TEXTURE_SIZE),\n    maxRenderbufferSize: gl.getParameter(GL_MAX_RENDERBUFFER_SIZE),\n    maxTextureUnits: gl.getParameter(GL_MAX_TEXTURE_IMAGE_UNITS),\n    maxTextureSize: gl.getParameter(GL_MAX_TEXTURE_SIZE),\n    maxAttributes: gl.getParameter(GL_MAX_VERTEX_ATTRIBS),\n    maxVertexUniforms: gl.getParameter(GL_MAX_VERTEX_UNIFORM_VECTORS),\n    maxVertexTextureUnits: gl.getParameter(GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS),\n    maxVaryingVectors: gl.getParameter(GL_MAX_VARYING_VECTORS),\n    maxFragmentUniforms: gl.getParameter(GL_MAX_FRAGMENT_UNIFORM_VECTORS),\n\n    // vendor info\n    glsl: gl.getParameter(GL_SHADING_LANGUAGE_VERSION),\n    renderer: gl.getParameter(GL_RENDERER),\n    vendor: gl.getParameter(GL_VENDOR),\n    version: gl.getParameter(GL_VERSION),\n\n    // quirks\n    readFloat: readFloat,\n    npotTextureCube: npotTextureCube\n  }\n}\n\nfunction isNDArrayLike (obj) {\n  return (\n    !!obj &&\n    typeof obj === 'object' &&\n    Array.isArray(obj.shape) &&\n    Array.isArray(obj.stride) &&\n    typeof obj.offset === 'number' &&\n    obj.shape.length === obj.stride.length &&\n    (Array.isArray(obj.data) ||\n      isTypedArray(obj.data)))\n}\n\nvar values = function (obj) {\n  return Object.keys(obj).map(function (key) { return obj[key] })\n}\n\nvar flattenUtils = {\n  shape: arrayShape$1,\n  flatten: flattenArray\n};\n\nfunction flatten1D (array, nx, out) {\n  for (var i = 0; i < nx; ++i) {\n    out[i] = array[i]\n  }\n}\n\nfunction flatten2D (array, nx, ny, out) {\n  var ptr = 0\n  for (var i = 0; i < nx; ++i) {\n    var row = array[i]\n    for (var j = 0; j < ny; ++j) {\n      out[ptr++] = row[j]\n    }\n  }\n}\n\nfunction flatten3D (array, nx, ny, nz, out, ptr_) {\n  var ptr = ptr_\n  for (var i = 0; i < nx; ++i) {\n    var row = array[i]\n    for (var j = 0; j < ny; ++j) {\n      var col = row[j]\n      for (var k = 0; k < nz; ++k) {\n        out[ptr++] = col[k]\n      }\n    }\n  }\n}\n\nfunction flattenRec (array, shape, level, out, ptr) {\n  var stride = 1\n  for (var i = level + 1; i < shape.length; ++i) {\n    stride *= shape[i]\n  }\n  var n = shape[level]\n  if (shape.length - level === 4) {\n    var nx = shape[level + 1]\n    var ny = shape[level + 2]\n    var nz = shape[level + 3]\n    for (i = 0; i < n; ++i) {\n      flatten3D(array[i], nx, ny, nz, out, ptr)\n      ptr += stride\n    }\n  } else {\n    for (i = 0; i < n; ++i) {\n      flattenRec(array[i], shape, level + 1, out, ptr)\n      ptr += stride\n    }\n  }\n}\n\nfunction flattenArray (array, shape, type, out_) {\n  var sz = 1\n  if (shape.length) {\n    for (var i = 0; i < shape.length; ++i) {\n      sz *= shape[i]\n    }\n  } else {\n    sz = 0\n  }\n  var out = out_ || pool.allocType(type, sz)\n  switch (shape.length) {\n    case 0:\n      break\n    case 1:\n      flatten1D(array, shape[0], out)\n      break\n    case 2:\n      flatten2D(array, shape[0], shape[1], out)\n      break\n    case 3:\n      flatten3D(array, shape[0], shape[1], shape[2], out, 0)\n      break\n    default:\n      flattenRec(array, shape, 0, out, 0)\n  }\n  return out\n}\n\nfunction arrayShape$1 (array_) {\n  var shape = []\n  for (var array = array_; array.length; array = array[0]) {\n    shape.push(array.length)\n  }\n  return shape\n}\n\nvar arrayTypes =  {\n\t\"[object Int8Array]\": 5120,\n\t\"[object Int16Array]\": 5122,\n\t\"[object Int32Array]\": 5124,\n\t\"[object Uint8Array]\": 5121,\n\t\"[object Uint8ClampedArray]\": 5121,\n\t\"[object Uint16Array]\": 5123,\n\t\"[object Uint32Array]\": 5125,\n\t\"[object Float32Array]\": 5126,\n\t\"[object Float64Array]\": 5121,\n\t\"[object ArrayBuffer]\": 5121\n};\n\nvar int8 = 5120;\nvar int16 = 5122;\nvar int32 = 5124;\nvar uint8 = 5121;\nvar uint16 = 5123;\nvar uint32 = 5125;\nvar float = 5126;\nvar float32 = 5126;\nvar glTypes = {\n\tint8: int8,\n\tint16: int16,\n\tint32: int32,\n\tuint8: uint8,\n\tuint16: uint16,\n\tuint32: uint32,\n\tfloat: float,\n\tfloat32: float32\n};\n\nvar dynamic$1 = 35048;\nvar stream = 35040;\nvar usageTypes = {\n\tdynamic: dynamic$1,\n\tstream: stream,\n\t\"static\": 35044\n};\n\nvar arrayFlatten = flattenUtils.flatten\nvar arrayShape = flattenUtils.shape\n\nvar GL_STATIC_DRAW = 0x88E4\nvar GL_STREAM_DRAW = 0x88E0\n\nvar GL_UNSIGNED_BYTE$3 = 5121\nvar GL_FLOAT$3 = 5126\n\nvar DTYPES_SIZES = []\nDTYPES_SIZES[5120] = 1 // int8\nDTYPES_SIZES[5122] = 2 // int16\nDTYPES_SIZES[5124] = 4 // int32\nDTYPES_SIZES[5121] = 1 // uint8\nDTYPES_SIZES[5123] = 2 // uint16\nDTYPES_SIZES[5125] = 4 // uint32\nDTYPES_SIZES[5126] = 4 // float32\n\nfunction typedArrayCode (data) {\n  return arrayTypes[Object.prototype.toString.call(data)] | 0\n}\n\nfunction copyArray (out, inp) {\n  for (var i = 0; i < inp.length; ++i) {\n    out[i] = inp[i]\n  }\n}\n\nfunction transpose (\n  result, data, shapeX, shapeY, strideX, strideY, offset) {\n  var ptr = 0\n  for (var i = 0; i < shapeX; ++i) {\n    for (var j = 0; j < shapeY; ++j) {\n      result[ptr++] = data[strideX * i + strideY * j + offset]\n    }\n  }\n}\n\nfunction wrapBufferState (gl, stats, config, destroyBuffer) {\n  var bufferCount = 0\n  var bufferSet = {}\n\n  function REGLBuffer (type) {\n    this.id = bufferCount++\n    this.buffer = gl.createBuffer()\n    this.type = type\n    this.usage = GL_STATIC_DRAW\n    this.byteLength = 0\n    this.dimension = 1\n    this.dtype = GL_UNSIGNED_BYTE$3\n\n    this.persistentData = null\n\n    if (config.profile) {\n      this.stats = { size: 0 }\n    }\n  }\n\n  REGLBuffer.prototype.bind = function () {\n    gl.bindBuffer(this.type, this.buffer)\n  }\n\n  REGLBuffer.prototype.destroy = function () {\n    destroy(this)\n  }\n\n  var streamPool = []\n\n  function createStream (type, data) {\n    var buffer = streamPool.pop()\n    if (!buffer) {\n      buffer = new REGLBuffer(type)\n    }\n    buffer.bind()\n    initBufferFromData(buffer, data, GL_STREAM_DRAW, 0, 1, false)\n    return buffer\n  }\n\n  function destroyStream (stream$$1) {\n    streamPool.push(stream$$1)\n  }\n\n  function initBufferFromTypedArray (buffer, data, usage) {\n    buffer.byteLength = data.byteLength\n    gl.bufferData(buffer.type, data, usage)\n  }\n\n  function initBufferFromData (buffer, data, usage, dtype, dimension, persist) {\n    var shape\n    buffer.usage = usage\n    if (Array.isArray(data)) {\n      buffer.dtype = dtype || GL_FLOAT$3\n      if (data.length > 0) {\n        var flatData\n        if (Array.isArray(data[0])) {\n          shape = arrayShape(data)\n          var dim = 1\n          for (var i = 1; i < shape.length; ++i) {\n            dim *= shape[i]\n          }\n          buffer.dimension = dim\n          flatData = arrayFlatten(data, shape, buffer.dtype)\n          initBufferFromTypedArray(buffer, flatData, usage)\n          if (persist) {\n            buffer.persistentData = flatData\n          } else {\n            pool.freeType(flatData)\n          }\n        } else if (typeof data[0] === 'number') {\n          buffer.dimension = dimension\n          var typedData = pool.allocType(buffer.dtype, data.length)\n          copyArray(typedData, data)\n          initBufferFromTypedArray(buffer, typedData, usage)\n          if (persist) {\n            buffer.persistentData = typedData\n          } else {\n            pool.freeType(typedData)\n          }\n        } else if (isTypedArray(data[0])) {\n          buffer.dimension = data[0].length\n          buffer.dtype = dtype || typedArrayCode(data[0]) || GL_FLOAT$3\n          flatData = arrayFlatten(\n            data,\n            [data.length, data[0].length],\n            buffer.dtype)\n          initBufferFromTypedArray(buffer, flatData, usage)\n          if (persist) {\n            buffer.persistentData = flatData\n          } else {\n            pool.freeType(flatData)\n          }\n        } else {\n          check$1.raise('invalid buffer data')\n        }\n      }\n    } else if (isTypedArray(data)) {\n      buffer.dtype = dtype || typedArrayCode(data)\n      buffer.dimension = dimension\n      initBufferFromTypedArray(buffer, data, usage)\n      if (persist) {\n        buffer.persistentData = new Uint8Array(new Uint8Array(data.buffer))\n      }\n    } else if (isNDArrayLike(data)) {\n      shape = data.shape\n      var stride = data.stride\n      var offset = data.offset\n\n      var shapeX = 0\n      var shapeY = 0\n      var strideX = 0\n      var strideY = 0\n      if (shape.length === 1) {\n        shapeX = shape[0]\n        shapeY = 1\n        strideX = stride[0]\n        strideY = 0\n      } else if (shape.length === 2) {\n        shapeX = shape[0]\n        shapeY = shape[1]\n        strideX = stride[0]\n        strideY = stride[1]\n      } else {\n        check$1.raise('invalid shape')\n      }\n\n      buffer.dtype = dtype || typedArrayCode(data.data) || GL_FLOAT$3\n      buffer.dimension = shapeY\n\n      var transposeData = pool.allocType(buffer.dtype, shapeX * shapeY)\n      transpose(transposeData,\n        data.data,\n        shapeX, shapeY,\n        strideX, strideY,\n        offset)\n      initBufferFromTypedArray(buffer, transposeData, usage)\n      if (persist) {\n        buffer.persistentData = transposeData\n      } else {\n        pool.freeType(transposeData)\n      }\n    } else if (data instanceof ArrayBuffer) {\n      buffer.dtype = GL_UNSIGNED_BYTE$3\n      buffer.dimension = dimension\n      initBufferFromTypedArray(buffer, data, usage)\n      if (persist) {\n        buffer.persistentData = new Uint8Array(new Uint8Array(data))\n      }\n    } else {\n      check$1.raise('invalid buffer data')\n    }\n  }\n\n  function destroy (buffer) {\n    stats.bufferCount--\n\n    // remove attribute link\n    destroyBuffer(buffer)\n\n    var handle = buffer.buffer\n    check$1(handle, 'buffer must not be deleted already')\n    gl.deleteBuffer(handle)\n    buffer.buffer = null\n    delete bufferSet[buffer.id]\n  }\n\n  function createBuffer (options, type, deferInit, persistent) {\n    stats.bufferCount++\n\n    var buffer = new REGLBuffer(type)\n    bufferSet[buffer.id] = buffer\n\n    function reglBuffer (options) {\n      var usage = GL_STATIC_DRAW\n      var data = null\n      var byteLength = 0\n      var dtype = 0\n      var dimension = 1\n      if (Array.isArray(options) ||\n          isTypedArray(options) ||\n          isNDArrayLike(options) ||\n          options instanceof ArrayBuffer) {\n        data = options\n      } else if (typeof options === 'number') {\n        byteLength = options | 0\n      } else if (options) {\n        check$1.type(\n          options, 'object',\n          'buffer arguments must be an object, a number or an array')\n\n        if ('data' in options) {\n          check$1(\n            data === null ||\n            Array.isArray(data) ||\n            isTypedArray(data) ||\n            isNDArrayLike(data),\n            'invalid data for buffer')\n          data = options.data\n        }\n\n        if ('usage' in options) {\n          check$1.parameter(options.usage, usageTypes, 'invalid buffer usage')\n          usage = usageTypes[options.usage]\n        }\n\n        if ('type' in options) {\n          check$1.parameter(options.type, glTypes, 'invalid buffer type')\n          dtype = glTypes[options.type]\n        }\n\n        if ('dimension' in options) {\n          check$1.type(options.dimension, 'number', 'invalid dimension')\n          dimension = options.dimension | 0\n        }\n\n        if ('length' in options) {\n          check$1.nni(byteLength, 'buffer length must be a nonnegative integer')\n          byteLength = options.length | 0\n        }\n      }\n\n      buffer.bind()\n      if (!data) {\n        // #475\n        if (byteLength) gl.bufferData(buffer.type, byteLength, usage)\n        buffer.dtype = dtype || GL_UNSIGNED_BYTE$3\n        buffer.usage = usage\n        buffer.dimension = dimension\n        buffer.byteLength = byteLength\n      } else {\n        initBufferFromData(buffer, data, usage, dtype, dimension, persistent)\n      }\n\n      if (config.profile) {\n        buffer.stats.size = buffer.byteLength * DTYPES_SIZES[buffer.dtype]\n      }\n\n      return reglBuffer\n    }\n\n    function setSubData (data, offset) {\n      check$1(offset + data.byteLength <= buffer.byteLength,\n        'invalid buffer subdata call, buffer is too small. ' + ' Can\\'t write data of size ' + data.byteLength + ' starting from offset ' + offset + ' to a buffer of size ' + buffer.byteLength)\n\n      gl.bufferSubData(buffer.type, offset, data)\n    }\n\n    function subdata (data, offset_) {\n      var offset = (offset_ || 0) | 0\n      var shape\n      buffer.bind()\n      if (isTypedArray(data) || data instanceof ArrayBuffer) {\n        setSubData(data, offset)\n      } else if (Array.isArray(data)) {\n        if (data.length > 0) {\n          if (typeof data[0] === 'number') {\n            var converted = pool.allocType(buffer.dtype, data.length)\n            copyArray(converted, data)\n            setSubData(converted, offset)\n            pool.freeType(converted)\n          } else if (Array.isArray(data[0]) || isTypedArray(data[0])) {\n            shape = arrayShape(data)\n            var flatData = arrayFlatten(data, shape, buffer.dtype)\n            setSubData(flatData, offset)\n            pool.freeType(flatData)\n          } else {\n            check$1.raise('invalid buffer data')\n          }\n        }\n      } else if (isNDArrayLike(data)) {\n        shape = data.shape\n        var stride = data.stride\n\n        var shapeX = 0\n        var shapeY = 0\n        var strideX = 0\n        var strideY = 0\n        if (shape.length === 1) {\n          shapeX = shape[0]\n          shapeY = 1\n          strideX = stride[0]\n          strideY = 0\n        } else if (shape.length === 2) {\n          shapeX = shape[0]\n          shapeY = shape[1]\n          strideX = stride[0]\n          strideY = stride[1]\n        } else {\n          check$1.raise('invalid shape')\n        }\n        var dtype = Array.isArray(data.data)\n          ? buffer.dtype\n          : typedArrayCode(data.data)\n\n        var transposeData = pool.allocType(dtype, shapeX * shapeY)\n        transpose(transposeData,\n          data.data,\n          shapeX, shapeY,\n          strideX, strideY,\n          data.offset)\n        setSubData(transposeData, offset)\n        pool.freeType(transposeData)\n      } else {\n        check$1.raise('invalid data for buffer subdata')\n      }\n      return reglBuffer\n    }\n\n    if (!deferInit) {\n      reglBuffer(options)\n    }\n\n    reglBuffer._reglType = 'buffer'\n    reglBuffer._buffer = buffer\n    reglBuffer.subdata = subdata\n    if (config.profile) {\n      reglBuffer.stats = buffer.stats\n    }\n    reglBuffer.destroy = function () { destroy(buffer) }\n\n    return reglBuffer\n  }\n\n  function restoreBuffers () {\n    values(bufferSet).forEach(function (buffer) {\n      buffer.buffer = gl.createBuffer()\n      gl.bindBuffer(buffer.type, buffer.buffer)\n      gl.bufferData(\n        buffer.type, buffer.persistentData || buffer.byteLength, buffer.usage)\n    })\n  }\n\n  if (config.profile) {\n    stats.getTotalBufferSize = function () {\n      var total = 0\n      // TODO: Right now, the streams are not part of the total count.\n      Object.keys(bufferSet).forEach(function (key) {\n        total += bufferSet[key].stats.size\n      })\n      return total\n    }\n  }\n\n  return {\n    create: createBuffer,\n\n    createStream: createStream,\n    destroyStream: destroyStream,\n\n    clear: function () {\n      values(bufferSet).forEach(destroy)\n      streamPool.forEach(destroy)\n    },\n\n    getBuffer: function (wrapper) {\n      if (wrapper && wrapper._buffer instanceof REGLBuffer) {\n        return wrapper._buffer\n      }\n      return null\n    },\n\n    restore: restoreBuffers,\n\n    _initBuffer: initBufferFromData\n  }\n}\n\nvar points = 0;\nvar point = 0;\nvar lines = 1;\nvar line = 1;\nvar triangles = 4;\nvar triangle = 4;\nvar primTypes = {\n\tpoints: points,\n\tpoint: point,\n\tlines: lines,\n\tline: line,\n\ttriangles: triangles,\n\ttriangle: triangle,\n\t\"line loop\": 2,\n\t\"line strip\": 3,\n\t\"triangle strip\": 5,\n\t\"triangle fan\": 6\n};\n\nvar GL_POINTS = 0\nvar GL_LINES = 1\nvar GL_TRIANGLES = 4\n\nvar GL_BYTE$2 = 5120\nvar GL_UNSIGNED_BYTE$4 = 5121\nvar GL_SHORT$2 = 5122\nvar GL_UNSIGNED_SHORT$2 = 5123\nvar GL_INT$2 = 5124\nvar GL_UNSIGNED_INT$2 = 5125\n\nvar GL_ELEMENT_ARRAY_BUFFER = 34963\n\nvar GL_STREAM_DRAW$1 = 0x88E0\nvar GL_STATIC_DRAW$1 = 0x88E4\n\nfunction wrapElementsState (gl, extensions, bufferState, stats) {\n  var elementSet = {}\n  var elementCount = 0\n\n  var elementTypes = {\n    'uint8': GL_UNSIGNED_BYTE$4,\n    'uint16': GL_UNSIGNED_SHORT$2\n  }\n\n  if (extensions.oes_element_index_uint) {\n    elementTypes.uint32 = GL_UNSIGNED_INT$2\n  }\n\n  function REGLElementBuffer (buffer) {\n    this.id = elementCount++\n    elementSet[this.id] = this\n    this.buffer = buffer\n    this.primType = GL_TRIANGLES\n    this.vertCount = 0\n    this.type = 0\n  }\n\n  REGLElementBuffer.prototype.bind = function () {\n    this.buffer.bind()\n  }\n\n  var bufferPool = []\n\n  function createElementStream (data) {\n    var result = bufferPool.pop()\n    if (!result) {\n      result = new REGLElementBuffer(bufferState.create(\n        null,\n        GL_ELEMENT_ARRAY_BUFFER,\n        true,\n        false)._buffer)\n    }\n    initElements(result, data, GL_STREAM_DRAW$1, -1, -1, 0, 0)\n    return result\n  }\n\n  function destroyElementStream (elements) {\n    bufferPool.push(elements)\n  }\n\n  function initElements (\n    elements,\n    data,\n    usage,\n    prim,\n    count,\n    byteLength,\n    type) {\n    elements.buffer.bind()\n    var dtype\n    if (data) {\n      var predictedType = type\n      if (!type && (\n        !isTypedArray(data) ||\n         (isNDArrayLike(data) && !isTypedArray(data.data)))) {\n        predictedType = extensions.oes_element_index_uint\n          ? GL_UNSIGNED_INT$2\n          : GL_UNSIGNED_SHORT$2\n      }\n      bufferState._initBuffer(\n        elements.buffer,\n        data,\n        usage,\n        predictedType,\n        3)\n    } else {\n      gl.bufferData(GL_ELEMENT_ARRAY_BUFFER, byteLength, usage)\n      elements.buffer.dtype = dtype || GL_UNSIGNED_BYTE$4\n      elements.buffer.usage = usage\n      elements.buffer.dimension = 3\n      elements.buffer.byteLength = byteLength\n    }\n\n    dtype = type\n    if (!type) {\n      switch (elements.buffer.dtype) {\n        case GL_UNSIGNED_BYTE$4:\n        case GL_BYTE$2:\n          dtype = GL_UNSIGNED_BYTE$4\n          break\n\n        case GL_UNSIGNED_SHORT$2:\n        case GL_SHORT$2:\n          dtype = GL_UNSIGNED_SHORT$2\n          break\n\n        case GL_UNSIGNED_INT$2:\n        case GL_INT$2:\n          dtype = GL_UNSIGNED_INT$2\n          break\n\n        default:\n          check$1.raise('unsupported type for element array')\n      }\n      elements.buffer.dtype = dtype\n    }\n    elements.type = dtype\n\n    // Check oes_element_index_uint extension\n    check$1(\n      dtype !== GL_UNSIGNED_INT$2 ||\n      !!extensions.oes_element_index_uint,\n      '32 bit element buffers not supported, enable oes_element_index_uint first')\n\n    // try to guess default primitive type and arguments\n    var vertCount = count\n    if (vertCount < 0) {\n      vertCount = elements.buffer.byteLength\n      if (dtype === GL_UNSIGNED_SHORT$2) {\n        vertCount >>= 1\n      } else if (dtype === GL_UNSIGNED_INT$2) {\n        vertCount >>= 2\n      }\n    }\n    elements.vertCount = vertCount\n\n    // try to guess primitive type from cell dimension\n    var primType = prim\n    if (prim < 0) {\n      primType = GL_TRIANGLES\n      var dimension = elements.buffer.dimension\n      if (dimension === 1) primType = GL_POINTS\n      if (dimension === 2) primType = GL_LINES\n      if (dimension === 3) primType = GL_TRIANGLES\n    }\n    elements.primType = primType\n  }\n\n  function destroyElements (elements) {\n    stats.elementsCount--\n\n    check$1(elements.buffer !== null, 'must not double destroy elements')\n    delete elementSet[elements.id]\n    elements.buffer.destroy()\n    elements.buffer = null\n  }\n\n  function createElements (options, persistent) {\n    var buffer = bufferState.create(null, GL_ELEMENT_ARRAY_BUFFER, true)\n    var elements = new REGLElementBuffer(buffer._buffer)\n    stats.elementsCount++\n\n    function reglElements (options) {\n      if (!options) {\n        buffer()\n        elements.primType = GL_TRIANGLES\n        elements.vertCount = 0\n        elements.type = GL_UNSIGNED_BYTE$4\n      } else if (typeof options === 'number') {\n        buffer(options)\n        elements.primType = GL_TRIANGLES\n        elements.vertCount = options | 0\n        elements.type = GL_UNSIGNED_BYTE$4\n      } else {\n        var data = null\n        var usage = GL_STATIC_DRAW$1\n        var primType = -1\n        var vertCount = -1\n        var byteLength = 0\n        var dtype = 0\n        if (Array.isArray(options) ||\n            isTypedArray(options) ||\n            isNDArrayLike(options)) {\n          data = options\n        } else {\n          check$1.type(options, 'object', 'invalid arguments for elements')\n          if ('data' in options) {\n            data = options.data\n            check$1(\n              Array.isArray(data) ||\n                isTypedArray(data) ||\n                isNDArrayLike(data),\n              'invalid data for element buffer')\n          }\n          if ('usage' in options) {\n            check$1.parameter(\n              options.usage,\n              usageTypes,\n              'invalid element buffer usage')\n            usage = usageTypes[options.usage]\n          }\n          if ('primitive' in options) {\n            check$1.parameter(\n              options.primitive,\n              primTypes,\n              'invalid element buffer primitive')\n            primType = primTypes[options.primitive]\n          }\n          if ('count' in options) {\n            check$1(\n              typeof options.count === 'number' && options.count >= 0,\n              'invalid vertex count for elements')\n            vertCount = options.count | 0\n          }\n          if ('type' in options) {\n            check$1.parameter(\n              options.type,\n              elementTypes,\n              'invalid buffer type')\n            dtype = elementTypes[options.type]\n          }\n          if ('length' in options) {\n            byteLength = options.length | 0\n          } else {\n            byteLength = vertCount\n            if (dtype === GL_UNSIGNED_SHORT$2 || dtype === GL_SHORT$2) {\n              byteLength *= 2\n            } else if (dtype === GL_UNSIGNED_INT$2 || dtype === GL_INT$2) {\n              byteLength *= 4\n            }\n          }\n        }\n        initElements(\n          elements,\n          data,\n          usage,\n          primType,\n          vertCount,\n          byteLength,\n          dtype)\n      }\n\n      return reglElements\n    }\n\n    reglElements(options)\n\n    reglElements._reglType = 'elements'\n    reglElements._elements = elements\n    reglElements.subdata = function (data, offset) {\n      buffer.subdata(data, offset)\n      return reglElements\n    }\n    reglElements.destroy = function () {\n      destroyElements(elements)\n    }\n\n    return reglElements\n  }\n\n  return {\n    create: createElements,\n    createStream: createElementStream,\n    destroyStream: destroyElementStream,\n    getElements: function (elements) {\n      if (typeof elements === 'function' &&\n          elements._elements instanceof REGLElementBuffer) {\n        return elements._elements\n      }\n      return null\n    },\n    clear: function () {\n      values(elementSet).forEach(destroyElements)\n    }\n  }\n}\n\nvar FLOAT = new Float32Array(1)\nvar INT = new Uint32Array(FLOAT.buffer)\n\nvar GL_UNSIGNED_SHORT$4 = 5123\n\nfunction convertToHalfFloat (array) {\n  var ushorts = pool.allocType(GL_UNSIGNED_SHORT$4, array.length)\n\n  for (var i = 0; i < array.length; ++i) {\n    if (isNaN(array[i])) {\n      ushorts[i] = 0xffff\n    } else if (array[i] === Infinity) {\n      ushorts[i] = 0x7c00\n    } else if (array[i] === -Infinity) {\n      ushorts[i] = 0xfc00\n    } else {\n      FLOAT[0] = array[i]\n      var x = INT[0]\n\n      var sgn = (x >>> 31) << 15\n      var exp = ((x << 1) >>> 24) - 127\n      var frac = (x >> 13) & ((1 << 10) - 1)\n\n      if (exp < -24) {\n        // round non-representable denormals to 0\n        ushorts[i] = sgn\n      } else if (exp < -14) {\n        // handle denormals\n        var s = -14 - exp\n        ushorts[i] = sgn + ((frac + (1 << 10)) >> s)\n      } else if (exp > 15) {\n        // round overflow to +/- Infinity\n        ushorts[i] = sgn + 0x7c00\n      } else {\n        // otherwise convert directly\n        ushorts[i] = sgn + ((exp + 15) << 10) + frac\n      }\n    }\n  }\n\n  return ushorts\n}\n\nfunction isArrayLike (s) {\n  return Array.isArray(s) || isTypedArray(s)\n}\n\nvar isPow2$1 = function (v) {\n  return !(v & (v - 1)) && (!!v)\n}\n\nvar GL_COMPRESSED_TEXTURE_FORMATS = 0x86A3\n\nvar GL_TEXTURE_2D$1 = 0x0DE1\nvar GL_TEXTURE_CUBE_MAP$1 = 0x8513\nvar GL_TEXTURE_CUBE_MAP_POSITIVE_X$1 = 0x8515\n\nvar GL_RGBA$1 = 0x1908\nvar GL_ALPHA = 0x1906\nvar GL_RGB = 0x1907\nvar GL_LUMINANCE = 0x1909\nvar GL_LUMINANCE_ALPHA = 0x190A\n\nvar GL_RGBA4 = 0x8056\nvar GL_RGB5_A1 = 0x8057\nvar GL_RGB565 = 0x8D62\n\nvar GL_UNSIGNED_SHORT_4_4_4_4$1 = 0x8033\nvar GL_UNSIGNED_SHORT_5_5_5_1$1 = 0x8034\nvar GL_UNSIGNED_SHORT_5_6_5$1 = 0x8363\nvar GL_UNSIGNED_INT_24_8_WEBGL$1 = 0x84FA\n\nvar GL_DEPTH_COMPONENT = 0x1902\nvar GL_DEPTH_STENCIL = 0x84F9\n\nvar GL_SRGB_EXT = 0x8C40\nvar GL_SRGB_ALPHA_EXT = 0x8C42\n\nvar GL_HALF_FLOAT_OES$1 = 0x8D61\n\nvar GL_COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83F0\nvar GL_COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83F1\nvar GL_COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83F2\nvar GL_COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83F3\n\nvar GL_COMPRESSED_RGB_ATC_WEBGL = 0x8C92\nvar GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 0x8C93\nvar GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 0x87EE\n\nvar GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 0x8C00\nvar GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 0x8C01\nvar GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 0x8C02\nvar GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 0x8C03\n\nvar GL_COMPRESSED_RGB_ETC1_WEBGL = 0x8D64\n\nvar GL_UNSIGNED_BYTE$5 = 0x1401\nvar GL_UNSIGNED_SHORT$3 = 0x1403\nvar GL_UNSIGNED_INT$3 = 0x1405\nvar GL_FLOAT$4 = 0x1406\n\nvar GL_TEXTURE_WRAP_S = 0x2802\nvar GL_TEXTURE_WRAP_T = 0x2803\n\nvar GL_REPEAT = 0x2901\nvar GL_CLAMP_TO_EDGE$1 = 0x812F\nvar GL_MIRRORED_REPEAT = 0x8370\n\nvar GL_TEXTURE_MAG_FILTER = 0x2800\nvar GL_TEXTURE_MIN_FILTER = 0x2801\n\nvar GL_NEAREST$1 = 0x2600\nvar GL_LINEAR = 0x2601\nvar GL_NEAREST_MIPMAP_NEAREST$1 = 0x2700\nvar GL_LINEAR_MIPMAP_NEAREST$1 = 0x2701\nvar GL_NEAREST_MIPMAP_LINEAR$1 = 0x2702\nvar GL_LINEAR_MIPMAP_LINEAR$1 = 0x2703\n\nvar GL_GENERATE_MIPMAP_HINT = 0x8192\nvar GL_DONT_CARE = 0x1100\nvar GL_FASTEST = 0x1101\nvar GL_NICEST = 0x1102\n\nvar GL_TEXTURE_MAX_ANISOTROPY_EXT = 0x84FE\n\nvar GL_UNPACK_ALIGNMENT = 0x0CF5\nvar GL_UNPACK_FLIP_Y_WEBGL = 0x9240\nvar GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL = 0x9241\nvar GL_UNPACK_COLORSPACE_CONVERSION_WEBGL = 0x9243\n\nvar GL_BROWSER_DEFAULT_WEBGL = 0x9244\n\nvar GL_TEXTURE0$1 = 0x84C0\n\nvar MIPMAP_FILTERS = [\n  GL_NEAREST_MIPMAP_NEAREST$1,\n  GL_NEAREST_MIPMAP_LINEAR$1,\n  GL_LINEAR_MIPMAP_NEAREST$1,\n  GL_LINEAR_MIPMAP_LINEAR$1\n]\n\nvar CHANNELS_FORMAT = [\n  0,\n  GL_LUMINANCE,\n  GL_LUMINANCE_ALPHA,\n  GL_RGB,\n  GL_RGBA$1\n]\n\nvar FORMAT_CHANNELS = {}\nFORMAT_CHANNELS[GL_LUMINANCE] =\nFORMAT_CHANNELS[GL_ALPHA] =\nFORMAT_CHANNELS[GL_DEPTH_COMPONENT] = 1\nFORMAT_CHANNELS[GL_DEPTH_STENCIL] =\nFORMAT_CHANNELS[GL_LUMINANCE_ALPHA] = 2\nFORMAT_CHANNELS[GL_RGB] =\nFORMAT_CHANNELS[GL_SRGB_EXT] = 3\nFORMAT_CHANNELS[GL_RGBA$1] =\nFORMAT_CHANNELS[GL_SRGB_ALPHA_EXT] = 4\n\nfunction objectName (str) {\n  return '[object ' + str + ']'\n}\n\nvar CANVAS_CLASS = objectName('HTMLCanvasElement')\nvar OFFSCREENCANVAS_CLASS = objectName('OffscreenCanvas')\nvar CONTEXT2D_CLASS = objectName('CanvasRenderingContext2D')\nvar BITMAP_CLASS = objectName('ImageBitmap')\nvar IMAGE_CLASS = objectName('HTMLImageElement')\nvar VIDEO_CLASS = objectName('HTMLVideoElement')\n\nvar PIXEL_CLASSES = Object.keys(arrayTypes).concat([\n  CANVAS_CLASS,\n  OFFSCREENCANVAS_CLASS,\n  CONTEXT2D_CLASS,\n  BITMAP_CLASS,\n  IMAGE_CLASS,\n  VIDEO_CLASS\n])\n\n// for every texture type, store\n// the size in bytes.\nvar TYPE_SIZES = []\nTYPE_SIZES[GL_UNSIGNED_BYTE$5] = 1\nTYPE_SIZES[GL_FLOAT$4] = 4\nTYPE_SIZES[GL_HALF_FLOAT_OES$1] = 2\n\nTYPE_SIZES[GL_UNSIGNED_SHORT$3] = 2\nTYPE_SIZES[GL_UNSIGNED_INT$3] = 4\n\nvar FORMAT_SIZES_SPECIAL = []\nFORMAT_SIZES_SPECIAL[GL_RGBA4] = 2\nFORMAT_SIZES_SPECIAL[GL_RGB5_A1] = 2\nFORMAT_SIZES_SPECIAL[GL_RGB565] = 2\nFORMAT_SIZES_SPECIAL[GL_DEPTH_STENCIL] = 4\n\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_S3TC_DXT1_EXT] = 0.5\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_S3TC_DXT1_EXT] = 0.5\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_S3TC_DXT3_EXT] = 1\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_S3TC_DXT5_EXT] = 1\n\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_ATC_WEBGL] = 0.5\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL] = 1\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL] = 1\n\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG] = 0.5\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG] = 0.25\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG] = 0.5\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG] = 0.25\n\nFORMAT_SIZES_SPECIAL[GL_COMPRESSED_RGB_ETC1_WEBGL] = 0.5\n\nfunction isNumericArray (arr) {\n  return (\n    Array.isArray(arr) &&\n    (arr.length === 0 ||\n    typeof arr[0] === 'number'))\n}\n\nfunction isRectArray (arr) {\n  if (!Array.isArray(arr)) {\n    return false\n  }\n  var width = arr.length\n  if (width === 0 || !isArrayLike(arr[0])) {\n    return false\n  }\n  return true\n}\n\nfunction classString (x) {\n  return Object.prototype.toString.call(x)\n}\n\nfunction isCanvasElement (object) {\n  return classString(object) === CANVAS_CLASS\n}\n\nfunction isOffscreenCanvas (object) {\n  return classString(object) === OFFSCREENCANVAS_CLASS\n}\n\nfunction isContext2D (object) {\n  return classString(object) === CONTEXT2D_CLASS\n}\n\nfunction isBitmap (object) {\n  return classString(object) === BITMAP_CLASS\n}\n\nfunction isImageElement (object) {\n  return classString(object) === IMAGE_CLASS\n}\n\nfunction isVideoElement (object) {\n  return classString(object) === VIDEO_CLASS\n}\n\nfunction isPixelData (object) {\n  if (!object) {\n    return false\n  }\n  var className = classString(object)\n  if (PIXEL_CLASSES.indexOf(className) >= 0) {\n    return true\n  }\n  return (\n    isNumericArray(object) ||\n    isRectArray(object) ||\n    isNDArrayLike(object))\n}\n\nfunction typedArrayCode$1 (data) {\n  return arrayTypes[Object.prototype.toString.call(data)] | 0\n}\n\nfunction convertData (result, data) {\n  var n = data.length\n  switch (result.type) {\n    case GL_UNSIGNED_BYTE$5:\n    case GL_UNSIGNED_SHORT$3:\n    case GL_UNSIGNED_INT$3:\n    case GL_FLOAT$4:\n      var converted = pool.allocType(result.type, n)\n      converted.set(data)\n      result.data = converted\n      break\n\n    case GL_HALF_FLOAT_OES$1:\n      result.data = convertToHalfFloat(data)\n      break\n\n    default:\n      check$1.raise('unsupported texture type, must specify a typed array')\n  }\n}\n\nfunction preConvert (image, n) {\n  return pool.allocType(\n    image.type === GL_HALF_FLOAT_OES$1\n      ? GL_FLOAT$4\n      : image.type, n)\n}\n\nfunction postConvert (image, data) {\n  if (image.type === GL_HALF_FLOAT_OES$1) {\n    image.data = convertToHalfFloat(data)\n    pool.freeType(data)\n  } else {\n    image.data = data\n  }\n}\n\nfunction transposeData (image, array, strideX, strideY, strideC, offset) {\n  var w = image.width\n  var h = image.height\n  var c = image.channels\n  var n = w * h * c\n  var data = preConvert(image, n)\n\n  var p = 0\n  for (var i = 0; i < h; ++i) {\n    for (var j = 0; j < w; ++j) {\n      for (var k = 0; k < c; ++k) {\n        data[p++] = array[strideX * j + strideY * i + strideC * k + offset]\n      }\n    }\n  }\n\n  postConvert(image, data)\n}\n\nfunction getTextureSize (format, type, width, height, isMipmap, isCube) {\n  var s\n  if (typeof FORMAT_SIZES_SPECIAL[format] !== 'undefined') {\n    // we have a special array for dealing with weird color formats such as RGB5A1\n    s = FORMAT_SIZES_SPECIAL[format]\n  } else {\n    s = FORMAT_CHANNELS[format] * TYPE_SIZES[type]\n  }\n\n  if (isCube) {\n    s *= 6\n  }\n\n  if (isMipmap) {\n    // compute the total size of all the mipmaps.\n    var total = 0\n\n    var w = width\n    while (w >= 1) {\n      // we can only use mipmaps on a square image,\n      // so we can simply use the width and ignore the height:\n      total += s * w * w\n      w /= 2\n    }\n    return total\n  } else {\n    return s * width * height\n  }\n}\n\nfunction createTextureSet (\n  gl, extensions, limits, reglPoll, contextState, stats, config) {\n  // -------------------------------------------------------\n  // Initialize constants and parameter tables here\n  // -------------------------------------------------------\n  var mipmapHint = {\n    \"don't care\": GL_DONT_CARE,\n    'dont care': GL_DONT_CARE,\n    'nice': GL_NICEST,\n    'fast': GL_FASTEST\n  }\n\n  var wrapModes = {\n    'repeat': GL_REPEAT,\n    'clamp': GL_CLAMP_TO_EDGE$1,\n    'mirror': GL_MIRRORED_REPEAT\n  }\n\n  var magFilters = {\n    'nearest': GL_NEAREST$1,\n    'linear': GL_LINEAR\n  }\n\n  var minFilters = extend({\n    'mipmap': GL_LINEAR_MIPMAP_LINEAR$1,\n    'nearest mipmap nearest': GL_NEAREST_MIPMAP_NEAREST$1,\n    'linear mipmap nearest': GL_LINEAR_MIPMAP_NEAREST$1,\n    'nearest mipmap linear': GL_NEAREST_MIPMAP_LINEAR$1,\n    'linear mipmap linear': GL_LINEAR_MIPMAP_LINEAR$1\n  }, magFilters)\n\n  var colorSpace = {\n    'none': 0,\n    'browser': GL_BROWSER_DEFAULT_WEBGL\n  }\n\n  var textureTypes = {\n    'uint8': GL_UNSIGNED_BYTE$5,\n    'rgba4': GL_UNSIGNED_SHORT_4_4_4_4$1,\n    'rgb565': GL_UNSIGNED_SHORT_5_6_5$1,\n    'rgb5 a1': GL_UNSIGNED_SHORT_5_5_5_1$1\n  }\n\n  var textureFormats = {\n    'alpha': GL_ALPHA,\n    'luminance': GL_LUMINANCE,\n    'luminance alpha': GL_LUMINANCE_ALPHA,\n    'rgb': GL_RGB,\n    'rgba': GL_RGBA$1,\n    'rgba4': GL_RGBA4,\n    'rgb5 a1': GL_RGB5_A1,\n    'rgb565': GL_RGB565\n  }\n\n  var compressedTextureFormats = {}\n\n  if (extensions.ext_srgb) {\n    textureFormats.srgb = GL_SRGB_EXT\n    textureFormats.srgba = GL_SRGB_ALPHA_EXT\n  }\n\n  if (extensions.oes_texture_float) {\n    textureTypes.float32 = textureTypes.float = GL_FLOAT$4\n  }\n\n  if (extensions.oes_texture_half_float) {\n    textureTypes['float16'] = textureTypes['half float'] = GL_HALF_FLOAT_OES$1\n  }\n\n  if (extensions.webgl_depth_texture) {\n    extend(textureFormats, {\n      'depth': GL_DEPTH_COMPONENT,\n      'depth stencil': GL_DEPTH_STENCIL\n    })\n\n    extend(textureTypes, {\n      'uint16': GL_UNSIGNED_SHORT$3,\n      'uint32': GL_UNSIGNED_INT$3,\n      'depth stencil': GL_UNSIGNED_INT_24_8_WEBGL$1\n    })\n  }\n\n  if (extensions.webgl_compressed_texture_s3tc) {\n    extend(compressedTextureFormats, {\n      'rgb s3tc dxt1': GL_COMPRESSED_RGB_S3TC_DXT1_EXT,\n      'rgba s3tc dxt1': GL_COMPRESSED_RGBA_S3TC_DXT1_EXT,\n      'rgba s3tc dxt3': GL_COMPRESSED_RGBA_S3TC_DXT3_EXT,\n      'rgba s3tc dxt5': GL_COMPRESSED_RGBA_S3TC_DXT5_EXT\n    })\n  }\n\n  if (extensions.webgl_compressed_texture_atc) {\n    extend(compressedTextureFormats, {\n      'rgb atc': GL_COMPRESSED_RGB_ATC_WEBGL,\n      'rgba atc explicit alpha': GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,\n      'rgba atc interpolated alpha': GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL\n    })\n  }\n\n  if (extensions.webgl_compressed_texture_pvrtc) {\n    extend(compressedTextureFormats, {\n      'rgb pvrtc 4bppv1': GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG,\n      'rgb pvrtc 2bppv1': GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG,\n      'rgba pvrtc 4bppv1': GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,\n      'rgba pvrtc 2bppv1': GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG\n    })\n  }\n\n  if (extensions.webgl_compressed_texture_etc1) {\n    compressedTextureFormats['rgb etc1'] = GL_COMPRESSED_RGB_ETC1_WEBGL\n  }\n\n  // Copy over all texture formats\n  var supportedCompressedFormats = Array.prototype.slice.call(\n    gl.getParameter(GL_COMPRESSED_TEXTURE_FORMATS))\n  Object.keys(compressedTextureFormats).forEach(function (name) {\n    var format = compressedTextureFormats[name]\n    if (supportedCompressedFormats.indexOf(format) >= 0) {\n      textureFormats[name] = format\n    }\n  })\n\n  var supportedFormats = Object.keys(textureFormats)\n  limits.textureFormats = supportedFormats\n\n  // associate with every format string its\n  // corresponding GL-value.\n  var textureFormatsInvert = []\n  Object.keys(textureFormats).forEach(function (key) {\n    var val = textureFormats[key]\n    textureFormatsInvert[val] = key\n  })\n\n  // associate with every type string its\n  // corresponding GL-value.\n  var textureTypesInvert = []\n  Object.keys(textureTypes).forEach(function (key) {\n    var val = textureTypes[key]\n    textureTypesInvert[val] = key\n  })\n\n  var magFiltersInvert = []\n  Object.keys(magFilters).forEach(function (key) {\n    var val = magFilters[key]\n    magFiltersInvert[val] = key\n  })\n\n  var minFiltersInvert = []\n  Object.keys(minFilters).forEach(function (key) {\n    var val = minFilters[key]\n    minFiltersInvert[val] = key\n  })\n\n  var wrapModesInvert = []\n  Object.keys(wrapModes).forEach(function (key) {\n    var val = wrapModes[key]\n    wrapModesInvert[val] = key\n  })\n\n  // colorFormats[] gives the format (channels) associated to an\n  // internalformat\n  var colorFormats = supportedFormats.reduce(function (color, key) {\n    var glenum = textureFormats[key]\n    if (glenum === GL_LUMINANCE ||\n        glenum === GL_ALPHA ||\n        glenum === GL_LUMINANCE ||\n        glenum === GL_LUMINANCE_ALPHA ||\n        glenum === GL_DEPTH_COMPONENT ||\n        glenum === GL_DEPTH_STENCIL ||\n        (extensions.ext_srgb &&\n                (glenum === GL_SRGB_EXT ||\n                 glenum === GL_SRGB_ALPHA_EXT))) {\n      color[glenum] = glenum\n    } else if (glenum === GL_RGB5_A1 || key.indexOf('rgba') >= 0) {\n      color[glenum] = GL_RGBA$1\n    } else {\n      color[glenum] = GL_RGB\n    }\n    return color\n  }, {})\n\n  function TexFlags () {\n    // format info\n    this.internalformat = GL_RGBA$1\n    this.format = GL_RGBA$1\n    this.type = GL_UNSIGNED_BYTE$5\n    this.compressed = false\n\n    // pixel storage\n    this.premultiplyAlpha = false\n    this.flipY = false\n    this.unpackAlignment = 1\n    this.colorSpace = GL_BROWSER_DEFAULT_WEBGL\n\n    // shape info\n    this.width = 0\n    this.height = 0\n    this.channels = 0\n  }\n\n  function copyFlags (result, other) {\n    result.internalformat = other.internalformat\n    result.format = other.format\n    result.type = other.type\n    result.compressed = other.compressed\n\n    result.premultiplyAlpha = other.premultiplyAlpha\n    result.flipY = other.flipY\n    result.unpackAlignment = other.unpackAlignment\n    result.colorSpace = other.colorSpace\n\n    result.width = other.width\n    result.height = other.height\n    result.channels = other.channels\n  }\n\n  function parseFlags (flags, options) {\n    if (typeof options !== 'object' || !options) {\n      return\n    }\n\n    if ('premultiplyAlpha' in options) {\n      check$1.type(options.premultiplyAlpha, 'boolean',\n        'invalid premultiplyAlpha')\n      flags.premultiplyAlpha = options.premultiplyAlpha\n    }\n\n    if ('flipY' in options) {\n      check$1.type(options.flipY, 'boolean',\n        'invalid texture flip')\n      flags.flipY = options.flipY\n    }\n\n    if ('alignment' in options) {\n      check$1.oneOf(options.alignment, [1, 2, 4, 8],\n        'invalid texture unpack alignment')\n      flags.unpackAlignment = options.alignment\n    }\n\n    if ('colorSpace' in options) {\n      check$1.parameter(options.colorSpace, colorSpace,\n        'invalid colorSpace')\n      flags.colorSpace = colorSpace[options.colorSpace]\n    }\n\n    if ('type' in options) {\n      var type = options.type\n      check$1(extensions.oes_texture_float ||\n        !(type === 'float' || type === 'float32'),\n      'you must enable the OES_texture_float extension in order to use floating point textures.')\n      check$1(extensions.oes_texture_half_float ||\n        !(type === 'half float' || type === 'float16'),\n      'you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures.')\n      check$1(extensions.webgl_depth_texture ||\n        !(type === 'uint16' || type === 'uint32' || type === 'depth stencil'),\n      'you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.')\n      check$1.parameter(type, textureTypes,\n        'invalid texture type')\n      flags.type = textureTypes[type]\n    }\n\n    var w = flags.width\n    var h = flags.height\n    var c = flags.channels\n    var hasChannels = false\n    if ('shape' in options) {\n      check$1(Array.isArray(options.shape) && options.shape.length >= 2,\n        'shape must be an array')\n      w = options.shape[0]\n      h = options.shape[1]\n      if (options.shape.length === 3) {\n        c = options.shape[2]\n        check$1(c > 0 && c <= 4, 'invalid number of channels')\n        hasChannels = true\n      }\n      check$1(w >= 0 && w <= limits.maxTextureSize, 'invalid width')\n      check$1(h >= 0 && h <= limits.maxTextureSize, 'invalid height')\n    } else {\n      if ('radius' in options) {\n        w = h = options.radius\n        check$1(w >= 0 && w <= limits.maxTextureSize, 'invalid radius')\n      }\n      if ('width' in options) {\n        w = options.width\n        check$1(w >= 0 && w <= limits.maxTextureSize, 'invalid width')\n      }\n      if ('height' in options) {\n        h = options.height\n        check$1(h >= 0 && h <= limits.maxTextureSize, 'invalid height')\n      }\n      if ('channels' in options) {\n        c = options.channels\n        check$1(c > 0 && c <= 4, 'invalid number of channels')\n        hasChannels = true\n      }\n    }\n    flags.width = w | 0\n    flags.height = h | 0\n    flags.channels = c | 0\n\n    var hasFormat = false\n    if ('format' in options) {\n      var formatStr = options.format\n      check$1(extensions.webgl_depth_texture ||\n        !(formatStr === 'depth' || formatStr === 'depth stencil'),\n      'you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures.')\n      check$1.parameter(formatStr, textureFormats,\n        'invalid texture format')\n      var internalformat = flags.internalformat = textureFormats[formatStr]\n      flags.format = colorFormats[internalformat]\n      if (formatStr in textureTypes) {\n        if (!('type' in options)) {\n          flags.type = textureTypes[formatStr]\n        }\n      }\n      if (formatStr in compressedTextureFormats) {\n        flags.compressed = true\n      }\n      hasFormat = true\n    }\n\n    // Reconcile channels and format\n    if (!hasChannels && hasFormat) {\n      flags.channels = FORMAT_CHANNELS[flags.format]\n    } else if (hasChannels && !hasFormat) {\n      if (flags.channels !== CHANNELS_FORMAT[flags.format]) {\n        flags.format = flags.internalformat = CHANNELS_FORMAT[flags.channels]\n      }\n    } else if (hasFormat && hasChannels) {\n      check$1(\n        flags.channels === FORMAT_CHANNELS[flags.format],\n        'number of channels inconsistent with specified format')\n    }\n  }\n\n  function setFlags (flags) {\n    gl.pixelStorei(GL_UNPACK_FLIP_Y_WEBGL, flags.flipY)\n    gl.pixelStorei(GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL, flags.premultiplyAlpha)\n    gl.pixelStorei(GL_UNPACK_COLORSPACE_CONVERSION_WEBGL, flags.colorSpace)\n    gl.pixelStorei(GL_UNPACK_ALIGNMENT, flags.unpackAlignment)\n  }\n\n  // -------------------------------------------------------\n  // Tex image data\n  // -------------------------------------------------------\n  function TexImage () {\n    TexFlags.call(this)\n\n    this.xOffset = 0\n    this.yOffset = 0\n\n    // data\n    this.data = null\n    this.needsFree = false\n\n    // html element\n    this.element = null\n\n    // copyTexImage info\n    this.needsCopy = false\n  }\n\n  function parseImage (image, options) {\n    var data = null\n    if (isPixelData(options)) {\n      data = options\n    } else if (options) {\n      check$1.type(options, 'object', 'invalid pixel data type')\n      parseFlags(image, options)\n      if ('x' in options) {\n        image.xOffset = options.x | 0\n      }\n      if ('y' in options) {\n        image.yOffset = options.y | 0\n      }\n      if (isPixelData(options.data)) {\n        data = options.data\n      }\n    }\n\n    check$1(\n      !image.compressed ||\n      data instanceof Uint8Array,\n      'compressed texture data must be stored in a uint8array')\n\n    if (options.copy) {\n      check$1(!data, 'can not specify copy and data field for the same texture')\n      var viewW = contextState.viewportWidth\n      var viewH = contextState.viewportHeight\n      image.width = image.width || (viewW - image.xOffset)\n      image.height = image.height || (viewH - image.yOffset)\n      image.needsCopy = true\n      check$1(image.xOffset >= 0 && image.xOffset < viewW &&\n            image.yOffset >= 0 && image.yOffset < viewH &&\n            image.width > 0 && image.width <= viewW &&\n            image.height > 0 && image.height <= viewH,\n      'copy texture read out of bounds')\n    } else if (!data) {\n      image.width = image.width || 1\n      image.height = image.height || 1\n      image.channels = image.channels || 4\n    } else if (isTypedArray(data)) {\n      image.channels = image.channels || 4\n      image.data = data\n      if (!('type' in options) && image.type === GL_UNSIGNED_BYTE$5) {\n        image.type = typedArrayCode$1(data)\n      }\n    } else if (isNumericArray(data)) {\n      image.channels = image.channels || 4\n      convertData(image, data)\n      image.alignment = 1\n      image.needsFree = true\n    } else if (isNDArrayLike(data)) {\n      var array = data.data\n      if (!Array.isArray(array) && image.type === GL_UNSIGNED_BYTE$5) {\n        image.type = typedArrayCode$1(array)\n      }\n      var shape = data.shape\n      var stride = data.stride\n      var shapeX, shapeY, shapeC, strideX, strideY, strideC\n      if (shape.length === 3) {\n        shapeC = shape[2]\n        strideC = stride[2]\n      } else {\n        check$1(shape.length === 2, 'invalid ndarray pixel data, must be 2 or 3D')\n        shapeC = 1\n        strideC = 1\n      }\n      shapeX = shape[0]\n      shapeY = shape[1]\n      strideX = stride[0]\n      strideY = stride[1]\n      image.alignment = 1\n      image.width = shapeX\n      image.height = shapeY\n      image.channels = shapeC\n      image.format = image.internalformat = CHANNELS_FORMAT[shapeC]\n      image.needsFree = true\n      transposeData(image, array, strideX, strideY, strideC, data.offset)\n    } else if (isCanvasElement(data) || isOffscreenCanvas(data) || isContext2D(data)) {\n      if (isCanvasElement(data) || isOffscreenCanvas(data)) {\n        image.element = data\n      } else {\n        image.element = data.canvas\n      }\n      image.width = image.element.width\n      image.height = image.element.height\n      image.channels = 4\n    } else if (isBitmap(data)) {\n      image.element = data\n      image.width = data.width\n      image.height = data.height\n      image.channels = 4\n    } else if (isImageElement(data)) {\n      image.element = data\n      image.width = data.naturalWidth\n      image.height = data.naturalHeight\n      image.channels = 4\n    } else if (isVideoElement(data)) {\n      image.element = data\n      image.width = data.videoWidth\n      image.height = data.videoHeight\n      image.channels = 4\n    } else if (isRectArray(data)) {\n      var w = image.width || data[0].length\n      var h = image.height || data.length\n      var c = image.channels\n      if (isArrayLike(data[0][0])) {\n        c = c || data[0][0].length\n      } else {\n        c = c || 1\n      }\n      var arrayShape = flattenUtils.shape(data)\n      var n = 1\n      for (var dd = 0; dd < arrayShape.length; ++dd) {\n        n *= arrayShape[dd]\n      }\n      var allocData = preConvert(image, n)\n      flattenUtils.flatten(data, arrayShape, '', allocData)\n      postConvert(image, allocData)\n      image.alignment = 1\n      image.width = w\n      image.height = h\n      image.channels = c\n      image.format = image.internalformat = CHANNELS_FORMAT[c]\n      image.needsFree = true\n    }\n\n    if (image.type === GL_FLOAT$4) {\n      check$1(limits.extensions.indexOf('oes_texture_float') >= 0,\n        'oes_texture_float extension not enabled')\n    } else if (image.type === GL_HALF_FLOAT_OES$1) {\n      check$1(limits.extensions.indexOf('oes_texture_half_float') >= 0,\n        'oes_texture_half_float extension not enabled')\n    }\n\n    // do compressed texture  validation here.\n  }\n\n  function setImage (info, target, miplevel) {\n    var element = info.element\n    var data = info.data\n    var internalformat = info.internalformat\n    var format = info.format\n    var type = info.type\n    var width = info.width\n    var height = info.height\n\n    setFlags(info)\n\n    if (element) {\n      gl.texImage2D(target, miplevel, format, format, type, element)\n    } else if (info.compressed) {\n      gl.compressedTexImage2D(target, miplevel, internalformat, width, height, 0, data)\n    } else if (info.needsCopy) {\n      reglPoll()\n      gl.copyTexImage2D(\n        target, miplevel, format, info.xOffset, info.yOffset, width, height, 0)\n    } else {\n      gl.texImage2D(target, miplevel, format, width, height, 0, format, type, data || null)\n    }\n  }\n\n  function setSubImage (info, target, x, y, miplevel) {\n    var element = info.element\n    var data = info.data\n    var internalformat = info.internalformat\n    var format = info.format\n    var type = info.type\n    var width = info.width\n    var height = info.height\n\n    setFlags(info)\n\n    if (element) {\n      gl.texSubImage2D(\n        target, miplevel, x, y, format, type, element)\n    } else if (info.compressed) {\n      gl.compressedTexSubImage2D(\n        target, miplevel, x, y, internalformat, width, height, data)\n    } else if (info.needsCopy) {\n      reglPoll()\n      gl.copyTexSubImage2D(\n        target, miplevel, x, y, info.xOffset, info.yOffset, width, height)\n    } else {\n      gl.texSubImage2D(\n        target, miplevel, x, y, width, height, format, type, data)\n    }\n  }\n\n  // texImage pool\n  var imagePool = []\n\n  function allocImage () {\n    return imagePool.pop() || new TexImage()\n  }\n\n  function freeImage (image) {\n    if (image.needsFree) {\n      pool.freeType(image.data)\n    }\n    TexImage.call(image)\n    imagePool.push(image)\n  }\n\n  // -------------------------------------------------------\n  // Mip map\n  // -------------------------------------------------------\n  function MipMap () {\n    TexFlags.call(this)\n\n    this.genMipmaps = false\n    this.mipmapHint = GL_DONT_CARE\n    this.mipmask = 0\n    this.images = Array(16)\n  }\n\n  function parseMipMapFromShape (mipmap, width, height) {\n    var img = mipmap.images[0] = allocImage()\n    mipmap.mipmask = 1\n    img.width = mipmap.width = width\n    img.height = mipmap.height = height\n    img.channels = mipmap.channels = 4\n  }\n\n  function parseMipMapFromObject (mipmap, options) {\n    var imgData = null\n    if (isPixelData(options)) {\n      imgData = mipmap.images[0] = allocImage()\n      copyFlags(imgData, mipmap)\n      parseImage(imgData, options)\n      mipmap.mipmask = 1\n    } else {\n      parseFlags(mipmap, options)\n      if (Array.isArray(options.mipmap)) {\n        var mipData = options.mipmap\n        for (var i = 0; i < mipData.length; ++i) {\n          imgData = mipmap.images[i] = allocImage()\n          copyFlags(imgData, mipmap)\n          imgData.width >>= i\n          imgData.height >>= i\n          parseImage(imgData, mipData[i])\n          mipmap.mipmask |= (1 << i)\n        }\n      } else {\n        imgData = mipmap.images[0] = allocImage()\n        copyFlags(imgData, mipmap)\n        parseImage(imgData, options)\n        mipmap.mipmask = 1\n      }\n    }\n    copyFlags(mipmap, mipmap.images[0])\n\n    // For textures of the compressed format WEBGL_compressed_texture_s3tc\n    // we must have that\n    //\n    // \"When level equals zero width and height must be a multiple of 4.\n    // When level is greater than 0 width and height must be 0, 1, 2 or a multiple of 4. \"\n    //\n    // but we do not yet support having multiple mipmap levels for compressed textures,\n    // so we only test for level zero.\n\n    if (\n      mipmap.compressed &&\n      (\n        mipmap.internalformat === GL_COMPRESSED_RGB_S3TC_DXT1_EXT ||\n        mipmap.internalformat === GL_COMPRESSED_RGBA_S3TC_DXT1_EXT ||\n        mipmap.internalformat === GL_COMPRESSED_RGBA_S3TC_DXT3_EXT ||\n        mipmap.internalformat === GL_COMPRESSED_RGBA_S3TC_DXT5_EXT\n      )\n    ) {\n      check$1(mipmap.width % 4 === 0 && mipmap.height % 4 === 0,\n        'for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4')\n    }\n  }\n\n  function setMipMap (mipmap, target) {\n    var images = mipmap.images\n    for (var i = 0; i < images.length; ++i) {\n      if (!images[i]) {\n        return\n      }\n      setImage(images[i], target, i)\n    }\n  }\n\n  var mipPool = []\n\n  function allocMipMap () {\n    var result = mipPool.pop() || new MipMap()\n    TexFlags.call(result)\n    result.mipmask = 0\n    for (var i = 0; i < 16; ++i) {\n      result.images[i] = null\n    }\n    return result\n  }\n\n  function freeMipMap (mipmap) {\n    var images = mipmap.images\n    for (var i = 0; i < images.length; ++i) {\n      if (images[i]) {\n        freeImage(images[i])\n      }\n      images[i] = null\n    }\n    mipPool.push(mipmap)\n  }\n\n  // -------------------------------------------------------\n  // Tex info\n  // -------------------------------------------------------\n  function TexInfo () {\n    this.minFilter = GL_NEAREST$1\n    this.magFilter = GL_NEAREST$1\n\n    this.wrapS = GL_CLAMP_TO_EDGE$1\n    this.wrapT = GL_CLAMP_TO_EDGE$1\n\n    this.anisotropic = 1\n\n    this.genMipmaps = false\n    this.mipmapHint = GL_DONT_CARE\n  }\n\n  function parseTexInfo (info, options) {\n    if ('min' in options) {\n      var minFilter = options.min\n      check$1.parameter(minFilter, minFilters)\n      info.minFilter = minFilters[minFilter]\n      if (MIPMAP_FILTERS.indexOf(info.minFilter) >= 0 && !('faces' in options)) {\n        info.genMipmaps = true\n      }\n    }\n\n    if ('mag' in options) {\n      var magFilter = options.mag\n      check$1.parameter(magFilter, magFilters)\n      info.magFilter = magFilters[magFilter]\n    }\n\n    var wrapS = info.wrapS\n    var wrapT = info.wrapT\n    if ('wrap' in options) {\n      var wrap = options.wrap\n      if (typeof wrap === 'string') {\n        check$1.parameter(wrap, wrapModes)\n        wrapS = wrapT = wrapModes[wrap]\n      } else if (Array.isArray(wrap)) {\n        check$1.parameter(wrap[0], wrapModes)\n        check$1.parameter(wrap[1], wrapModes)\n        wrapS = wrapModes[wrap[0]]\n        wrapT = wrapModes[wrap[1]]\n      }\n    } else {\n      if ('wrapS' in options) {\n        var optWrapS = options.wrapS\n        check$1.parameter(optWrapS, wrapModes)\n        wrapS = wrapModes[optWrapS]\n      }\n      if ('wrapT' in options) {\n        var optWrapT = options.wrapT\n        check$1.parameter(optWrapT, wrapModes)\n        wrapT = wrapModes[optWrapT]\n      }\n    }\n    info.wrapS = wrapS\n    info.wrapT = wrapT\n\n    if ('anisotropic' in options) {\n      var anisotropic = options.anisotropic\n      check$1(typeof anisotropic === 'number' &&\n         anisotropic >= 1 && anisotropic <= limits.maxAnisotropic,\n      'aniso samples must be between 1 and ')\n      info.anisotropic = options.anisotropic\n    }\n\n    if ('mipmap' in options) {\n      var hasMipMap = false\n      switch (typeof options.mipmap) {\n        case 'string':\n          check$1.parameter(options.mipmap, mipmapHint,\n            'invalid mipmap hint')\n          info.mipmapHint = mipmapHint[options.mipmap]\n          info.genMipmaps = true\n          hasMipMap = true\n          break\n\n        case 'boolean':\n          hasMipMap = info.genMipmaps = options.mipmap\n          break\n\n        case 'object':\n          check$1(Array.isArray(options.mipmap), 'invalid mipmap type')\n          info.genMipmaps = false\n          hasMipMap = true\n          break\n\n        default:\n          check$1.raise('invalid mipmap type')\n      }\n      if (hasMipMap && !('min' in options)) {\n        info.minFilter = GL_NEAREST_MIPMAP_NEAREST$1\n      }\n    }\n  }\n\n  function setTexInfo (info, target) {\n    gl.texParameteri(target, GL_TEXTURE_MIN_FILTER, info.minFilter)\n    gl.texParameteri(target, GL_TEXTURE_MAG_FILTER, info.magFilter)\n    gl.texParameteri(target, GL_TEXTURE_WRAP_S, info.wrapS)\n    gl.texParameteri(target, GL_TEXTURE_WRAP_T, info.wrapT)\n    if (extensions.ext_texture_filter_anisotropic) {\n      gl.texParameteri(target, GL_TEXTURE_MAX_ANISOTROPY_EXT, info.anisotropic)\n    }\n    if (info.genMipmaps) {\n      gl.hint(GL_GENERATE_MIPMAP_HINT, info.mipmapHint)\n      gl.generateMipmap(target)\n    }\n  }\n\n  // -------------------------------------------------------\n  // Full texture object\n  // -------------------------------------------------------\n  var textureCount = 0\n  var textureSet = {}\n  var numTexUnits = limits.maxTextureUnits\n  var textureUnits = Array(numTexUnits).map(function () {\n    return null\n  })\n\n  function REGLTexture (target) {\n    TexFlags.call(this)\n    this.mipmask = 0\n    this.internalformat = GL_RGBA$1\n\n    this.id = textureCount++\n\n    this.refCount = 1\n\n    this.target = target\n    this.texture = gl.createTexture()\n\n    this.unit = -1\n    this.bindCount = 0\n\n    this.texInfo = new TexInfo()\n\n    if (config.profile) {\n      this.stats = { size: 0 }\n    }\n  }\n\n  function tempBind (texture) {\n    gl.activeTexture(GL_TEXTURE0$1)\n    gl.bindTexture(texture.target, texture.texture)\n  }\n\n  function tempRestore () {\n    var prev = textureUnits[0]\n    if (prev) {\n      gl.bindTexture(prev.target, prev.texture)\n    } else {\n      gl.bindTexture(GL_TEXTURE_2D$1, null)\n    }\n  }\n\n  function destroy (texture) {\n    var handle = texture.texture\n    check$1(handle, 'must not double destroy texture')\n    var unit = texture.unit\n    var target = texture.target\n    if (unit >= 0) {\n      gl.activeTexture(GL_TEXTURE0$1 + unit)\n      gl.bindTexture(target, null)\n      textureUnits[unit] = null\n    }\n    gl.deleteTexture(handle)\n    texture.texture = null\n    texture.params = null\n    texture.pixels = null\n    texture.refCount = 0\n    delete textureSet[texture.id]\n    stats.textureCount--\n  }\n\n  extend(REGLTexture.prototype, {\n    bind: function () {\n      var texture = this\n      texture.bindCount += 1\n      var unit = texture.unit\n      if (unit < 0) {\n        for (var i = 0; i < numTexUnits; ++i) {\n          var other = textureUnits[i]\n          if (other) {\n            if (other.bindCount > 0) {\n              continue\n            }\n            other.unit = -1\n          }\n          textureUnits[i] = texture\n          unit = i\n          break\n        }\n        if (unit >= numTexUnits) {\n          check$1.raise('insufficient number of texture units')\n        }\n        if (config.profile && stats.maxTextureUnits < (unit + 1)) {\n          stats.maxTextureUnits = unit + 1 // +1, since the units are zero-based\n        }\n        texture.unit = unit\n        gl.activeTexture(GL_TEXTURE0$1 + unit)\n        gl.bindTexture(texture.target, texture.texture)\n      }\n      return unit\n    },\n\n    unbind: function () {\n      this.bindCount -= 1\n    },\n\n    decRef: function () {\n      if (--this.refCount <= 0) {\n        destroy(this)\n      }\n    }\n  })\n\n  function createTexture2D (a, b) {\n    var texture = new REGLTexture(GL_TEXTURE_2D$1)\n    textureSet[texture.id] = texture\n    stats.textureCount++\n\n    function reglTexture2D (a, b) {\n      var texInfo = texture.texInfo\n      TexInfo.call(texInfo)\n      var mipData = allocMipMap()\n\n      if (typeof a === 'number') {\n        if (typeof b === 'number') {\n          parseMipMapFromShape(mipData, a | 0, b | 0)\n        } else {\n          parseMipMapFromShape(mipData, a | 0, a | 0)\n        }\n      } else if (a) {\n        check$1.type(a, 'object', 'invalid arguments to regl.texture')\n        parseTexInfo(texInfo, a)\n        parseMipMapFromObject(mipData, a)\n      } else {\n        // empty textures get assigned a default shape of 1x1\n        parseMipMapFromShape(mipData, 1, 1)\n      }\n\n      if (texInfo.genMipmaps) {\n        mipData.mipmask = (mipData.width << 1) - 1\n      }\n      texture.mipmask = mipData.mipmask\n\n      copyFlags(texture, mipData)\n\n      check$1.texture2D(texInfo, mipData, limits)\n      texture.internalformat = mipData.internalformat\n\n      reglTexture2D.width = mipData.width\n      reglTexture2D.height = mipData.height\n\n      tempBind(texture)\n      setMipMap(mipData, GL_TEXTURE_2D$1)\n      setTexInfo(texInfo, GL_TEXTURE_2D$1)\n      tempRestore()\n\n      freeMipMap(mipData)\n\n      if (config.profile) {\n        texture.stats.size = getTextureSize(\n          texture.internalformat,\n          texture.type,\n          mipData.width,\n          mipData.height,\n          texInfo.genMipmaps,\n          false)\n      }\n      reglTexture2D.format = textureFormatsInvert[texture.internalformat]\n      reglTexture2D.type = textureTypesInvert[texture.type]\n\n      reglTexture2D.mag = magFiltersInvert[texInfo.magFilter]\n      reglTexture2D.min = minFiltersInvert[texInfo.minFilter]\n\n      reglTexture2D.wrapS = wrapModesInvert[texInfo.wrapS]\n      reglTexture2D.wrapT = wrapModesInvert[texInfo.wrapT]\n\n      return reglTexture2D\n    }\n\n    function subimage (image, x_, y_, level_) {\n      check$1(!!image, 'must specify image data')\n\n      var x = x_ | 0\n      var y = y_ | 0\n      var level = level_ | 0\n\n      var imageData = allocImage()\n      copyFlags(imageData, texture)\n      imageData.width = 0\n      imageData.height = 0\n      parseImage(imageData, image)\n      imageData.width = imageData.width || ((texture.width >> level) - x)\n      imageData.height = imageData.height || ((texture.height >> level) - y)\n\n      check$1(\n        texture.type === imageData.type &&\n        texture.format === imageData.format &&\n        texture.internalformat === imageData.internalformat,\n        'incompatible format for texture.subimage')\n      check$1(\n        x >= 0 && y >= 0 &&\n        x + imageData.width <= texture.width &&\n        y + imageData.height <= texture.height,\n        'texture.subimage write out of bounds')\n      check$1(\n        texture.mipmask & (1 << level),\n        'missing mipmap data')\n      check$1(\n        imageData.data || imageData.element || imageData.needsCopy,\n        'missing image data')\n\n      tempBind(texture)\n      setSubImage(imageData, GL_TEXTURE_2D$1, x, y, level)\n      tempRestore()\n\n      freeImage(imageData)\n\n      return reglTexture2D\n    }\n\n    function resize (w_, h_) {\n      var w = w_ | 0\n      var h = (h_ | 0) || w\n      if (w === texture.width && h === texture.height) {\n        return reglTexture2D\n      }\n\n      reglTexture2D.width = texture.width = w\n      reglTexture2D.height = texture.height = h\n\n      tempBind(texture)\n\n      for (var i = 0; texture.mipmask >> i; ++i) {\n        var _w = w >> i\n        var _h = h >> i\n        if (!_w || !_h) break\n        gl.texImage2D(\n          GL_TEXTURE_2D$1,\n          i,\n          texture.format,\n          _w,\n          _h,\n          0,\n          texture.format,\n          texture.type,\n          null)\n      }\n      tempRestore()\n\n      // also, recompute the texture size.\n      if (config.profile) {\n        texture.stats.size = getTextureSize(\n          texture.internalformat,\n          texture.type,\n          w,\n          h,\n          false,\n          false)\n      }\n\n      return reglTexture2D\n    }\n\n    reglTexture2D(a, b)\n\n    reglTexture2D.subimage = subimage\n    reglTexture2D.resize = resize\n    reglTexture2D._reglType = 'texture2d'\n    reglTexture2D._texture = texture\n    if (config.profile) {\n      reglTexture2D.stats = texture.stats\n    }\n    reglTexture2D.destroy = function () {\n      texture.decRef()\n    }\n\n    return reglTexture2D\n  }\n\n  function createTextureCube (a0, a1, a2, a3, a4, a5) {\n    var texture = new REGLTexture(GL_TEXTURE_CUBE_MAP$1)\n    textureSet[texture.id] = texture\n    stats.cubeCount++\n\n    var faces = new Array(6)\n\n    function reglTextureCube (a0, a1, a2, a3, a4, a5) {\n      var i\n      var texInfo = texture.texInfo\n      TexInfo.call(texInfo)\n      for (i = 0; i < 6; ++i) {\n        faces[i] = allocMipMap()\n      }\n\n      if (typeof a0 === 'number' || !a0) {\n        var s = (a0 | 0) || 1\n        for (i = 0; i < 6; ++i) {\n          parseMipMapFromShape(faces[i], s, s)\n        }\n      } else if (typeof a0 === 'object') {\n        if (a1) {\n          parseMipMapFromObject(faces[0], a0)\n          parseMipMapFromObject(faces[1], a1)\n          parseMipMapFromObject(faces[2], a2)\n          parseMipMapFromObject(faces[3], a3)\n          parseMipMapFromObject(faces[4], a4)\n          parseMipMapFromObject(faces[5], a5)\n        } else {\n          parseTexInfo(texInfo, a0)\n          parseFlags(texture, a0)\n          if ('faces' in a0) {\n            var faceInput = a0.faces\n            check$1(Array.isArray(faceInput) && faceInput.length === 6,\n              'cube faces must be a length 6 array')\n            for (i = 0; i < 6; ++i) {\n              check$1(typeof faceInput[i] === 'object' && !!faceInput[i],\n                'invalid input for cube map face')\n              copyFlags(faces[i], texture)\n              parseMipMapFromObject(faces[i], faceInput[i])\n            }\n          } else {\n            for (i = 0; i < 6; ++i) {\n              parseMipMapFromObject(faces[i], a0)\n            }\n          }\n        }\n      } else {\n        check$1.raise('invalid arguments to cube map')\n      }\n\n      copyFlags(texture, faces[0])\n\n      if (!limits.npotTextureCube) {\n        check$1(isPow2$1(texture.width) && isPow2$1(texture.height), 'your browser does not support non power or two texture dimensions')\n      }\n\n      if (texInfo.genMipmaps) {\n        texture.mipmask = (faces[0].width << 1) - 1\n      } else {\n        texture.mipmask = faces[0].mipmask\n      }\n\n      check$1.textureCube(texture, texInfo, faces, limits)\n      texture.internalformat = faces[0].internalformat\n\n      reglTextureCube.width = faces[0].width\n      reglTextureCube.height = faces[0].height\n\n      tempBind(texture)\n      for (i = 0; i < 6; ++i) {\n        setMipMap(faces[i], GL_TEXTURE_CUBE_MAP_POSITIVE_X$1 + i)\n      }\n      setTexInfo(texInfo, GL_TEXTURE_CUBE_MAP$1)\n      tempRestore()\n\n      if (config.profile) {\n        texture.stats.size = getTextureSize(\n          texture.internalformat,\n          texture.type,\n          reglTextureCube.width,\n          reglTextureCube.height,\n          texInfo.genMipmaps,\n          true)\n      }\n\n      reglTextureCube.format = textureFormatsInvert[texture.internalformat]\n      reglTextureCube.type = textureTypesInvert[texture.type]\n\n      reglTextureCube.mag = magFiltersInvert[texInfo.magFilter]\n      reglTextureCube.min = minFiltersInvert[texInfo.minFilter]\n\n      reglTextureCube.wrapS = wrapModesInvert[texInfo.wrapS]\n      reglTextureCube.wrapT = wrapModesInvert[texInfo.wrapT]\n\n      for (i = 0; i < 6; ++i) {\n        freeMipMap(faces[i])\n      }\n\n      return reglTextureCube\n    }\n\n    function subimage (face, image, x_, y_, level_) {\n      check$1(!!image, 'must specify image data')\n      check$1(typeof face === 'number' && face === (face | 0) &&\n        face >= 0 && face < 6, 'invalid face')\n\n      var x = x_ | 0\n      var y = y_ | 0\n      var level = level_ | 0\n\n      var imageData = allocImage()\n      copyFlags(imageData, texture)\n      imageData.width = 0\n      imageData.height = 0\n      parseImage(imageData, image)\n      imageData.width = imageData.width || ((texture.width >> level) - x)\n      imageData.height = imageData.height || ((texture.height >> level) - y)\n\n      check$1(\n        texture.type === imageData.type &&\n        texture.format === imageData.format &&\n        texture.internalformat === imageData.internalformat,\n        'incompatible format for texture.subimage')\n      check$1(\n        x >= 0 && y >= 0 &&\n        x + imageData.width <= texture.width &&\n        y + imageData.height <= texture.height,\n        'texture.subimage write out of bounds')\n      check$1(\n        texture.mipmask & (1 << level),\n        'missing mipmap data')\n      check$1(\n        imageData.data || imageData.element || imageData.needsCopy,\n        'missing image data')\n\n      tempBind(texture)\n      setSubImage(imageData, GL_TEXTURE_CUBE_MAP_POSITIVE_X$1 + face, x, y, level)\n      tempRestore()\n\n      freeImage(imageData)\n\n      return reglTextureCube\n    }\n\n    function resize (radius_) {\n      var radius = radius_ | 0\n      if (radius === texture.width) {\n        return\n      }\n\n      reglTextureCube.width = texture.width = radius\n      reglTextureCube.height = texture.height = radius\n\n      tempBind(texture)\n      for (var i = 0; i < 6; ++i) {\n        for (var j = 0; texture.mipmask >> j; ++j) {\n          gl.texImage2D(\n            GL_TEXTURE_CUBE_MAP_POSITIVE_X$1 + i,\n            j,\n            texture.format,\n            radius >> j,\n            radius >> j,\n            0,\n            texture.format,\n            texture.type,\n            null)\n        }\n      }\n      tempRestore()\n\n      if (config.profile) {\n        texture.stats.size = getTextureSize(\n          texture.internalformat,\n          texture.type,\n          reglTextureCube.width,\n          reglTextureCube.height,\n          false,\n          true)\n      }\n\n      return reglTextureCube\n    }\n\n    reglTextureCube(a0, a1, a2, a3, a4, a5)\n\n    reglTextureCube.subimage = subimage\n    reglTextureCube.resize = resize\n    reglTextureCube._reglType = 'textureCube'\n    reglTextureCube._texture = texture\n    if (config.profile) {\n      reglTextureCube.stats = texture.stats\n    }\n    reglTextureCube.destroy = function () {\n      texture.decRef()\n    }\n\n    return reglTextureCube\n  }\n\n  // Called when regl is destroyed\n  function destroyTextures () {\n    for (var i = 0; i < numTexUnits; ++i) {\n      gl.activeTexture(GL_TEXTURE0$1 + i)\n      gl.bindTexture(GL_TEXTURE_2D$1, null)\n      textureUnits[i] = null\n    }\n    values(textureSet).forEach(destroy)\n\n    stats.cubeCount = 0\n    stats.textureCount = 0\n  }\n\n  if (config.profile) {\n    stats.getTotalTextureSize = function () {\n      var total = 0\n      Object.keys(textureSet).forEach(function (key) {\n        total += textureSet[key].stats.size\n      })\n      return total\n    }\n  }\n\n  function restoreTextures () {\n    for (var i = 0; i < numTexUnits; ++i) {\n      var tex = textureUnits[i]\n      if (tex) {\n        tex.bindCount = 0\n        tex.unit = -1\n        textureUnits[i] = null\n      }\n    }\n\n    values(textureSet).forEach(function (texture) {\n      texture.texture = gl.createTexture()\n      gl.bindTexture(texture.target, texture.texture)\n      for (var i = 0; i < 32; ++i) {\n        if ((texture.mipmask & (1 << i)) === 0) {\n          continue\n        }\n        if (texture.target === GL_TEXTURE_2D$1) {\n          gl.texImage2D(GL_TEXTURE_2D$1,\n            i,\n            texture.internalformat,\n            texture.width >> i,\n            texture.height >> i,\n            0,\n            texture.internalformat,\n            texture.type,\n            null)\n        } else {\n          for (var j = 0; j < 6; ++j) {\n            gl.texImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X$1 + j,\n              i,\n              texture.internalformat,\n              texture.width >> i,\n              texture.height >> i,\n              0,\n              texture.internalformat,\n              texture.type,\n              null)\n          }\n        }\n      }\n      setTexInfo(texture.texInfo, texture.target)\n    })\n  }\n\n  function refreshTextures () {\n    for (var i = 0; i < numTexUnits; ++i) {\n      var tex = textureUnits[i]\n      if (tex) {\n        tex.bindCount = 0\n        tex.unit = -1\n        textureUnits[i] = null\n      }\n      gl.activeTexture(GL_TEXTURE0$1 + i)\n      gl.bindTexture(GL_TEXTURE_2D$1, null)\n      gl.bindTexture(GL_TEXTURE_CUBE_MAP$1, null)\n    }\n  }\n\n  return {\n    create2D: createTexture2D,\n    createCube: createTextureCube,\n    clear: destroyTextures,\n    getTexture: function (wrapper) {\n      return null\n    },\n    restore: restoreTextures,\n    refresh: refreshTextures\n  }\n}\n\nvar GL_RENDERBUFFER = 0x8D41\n\nvar GL_RGBA4$1 = 0x8056\nvar GL_RGB5_A1$1 = 0x8057\nvar GL_RGB565$1 = 0x8D62\nvar GL_DEPTH_COMPONENT16 = 0x81A5\nvar GL_STENCIL_INDEX8 = 0x8D48\nvar GL_DEPTH_STENCIL$1 = 0x84F9\n\nvar GL_SRGB8_ALPHA8_EXT = 0x8C43\n\nvar GL_RGBA32F_EXT = 0x8814\n\nvar GL_RGBA16F_EXT = 0x881A\nvar GL_RGB16F_EXT = 0x881B\n\nvar FORMAT_SIZES = []\n\nFORMAT_SIZES[GL_RGBA4$1] = 2\nFORMAT_SIZES[GL_RGB5_A1$1] = 2\nFORMAT_SIZES[GL_RGB565$1] = 2\n\nFORMAT_SIZES[GL_DEPTH_COMPONENT16] = 2\nFORMAT_SIZES[GL_STENCIL_INDEX8] = 1\nFORMAT_SIZES[GL_DEPTH_STENCIL$1] = 4\n\nFORMAT_SIZES[GL_SRGB8_ALPHA8_EXT] = 4\nFORMAT_SIZES[GL_RGBA32F_EXT] = 16\nFORMAT_SIZES[GL_RGBA16F_EXT] = 8\nFORMAT_SIZES[GL_RGB16F_EXT] = 6\n\nfunction getRenderbufferSize (format, width, height) {\n  return FORMAT_SIZES[format] * width * height\n}\n\nvar wrapRenderbuffers = function (gl, extensions, limits, stats, config) {\n  var formatTypes = {\n    'rgba4': GL_RGBA4$1,\n    'rgb565': GL_RGB565$1,\n    'rgb5 a1': GL_RGB5_A1$1,\n    'depth': GL_DEPTH_COMPONENT16,\n    'stencil': GL_STENCIL_INDEX8,\n    'depth stencil': GL_DEPTH_STENCIL$1\n  }\n\n  if (extensions.ext_srgb) {\n    formatTypes['srgba'] = GL_SRGB8_ALPHA8_EXT\n  }\n\n  if (extensions.ext_color_buffer_half_float) {\n    formatTypes['rgba16f'] = GL_RGBA16F_EXT\n    formatTypes['rgb16f'] = GL_RGB16F_EXT\n  }\n\n  if (extensions.webgl_color_buffer_float) {\n    formatTypes['rgba32f'] = GL_RGBA32F_EXT\n  }\n\n  var formatTypesInvert = []\n  Object.keys(formatTypes).forEach(function (key) {\n    var val = formatTypes[key]\n    formatTypesInvert[val] = key\n  })\n\n  var renderbufferCount = 0\n  var renderbufferSet = {}\n\n  function REGLRenderbuffer (renderbuffer) {\n    this.id = renderbufferCount++\n    this.refCount = 1\n\n    this.renderbuffer = renderbuffer\n\n    this.format = GL_RGBA4$1\n    this.width = 0\n    this.height = 0\n\n    if (config.profile) {\n      this.stats = { size: 0 }\n    }\n  }\n\n  REGLRenderbuffer.prototype.decRef = function () {\n    if (--this.refCount <= 0) {\n      destroy(this)\n    }\n  }\n\n  function destroy (rb) {\n    var handle = rb.renderbuffer\n    check$1(handle, 'must not double destroy renderbuffer')\n    gl.bindRenderbuffer(GL_RENDERBUFFER, null)\n    gl.deleteRenderbuffer(handle)\n    rb.renderbuffer = null\n    rb.refCount = 0\n    delete renderbufferSet[rb.id]\n    stats.renderbufferCount--\n  }\n\n  function createRenderbuffer (a, b) {\n    var renderbuffer = new REGLRenderbuffer(gl.createRenderbuffer())\n    renderbufferSet[renderbuffer.id] = renderbuffer\n    stats.renderbufferCount++\n\n    function reglRenderbuffer (a, b) {\n      var w = 0\n      var h = 0\n      var format = GL_RGBA4$1\n\n      if (typeof a === 'object' && a) {\n        var options = a\n        if ('shape' in options) {\n          var shape = options.shape\n          check$1(Array.isArray(shape) && shape.length >= 2,\n            'invalid renderbuffer shape')\n          w = shape[0] | 0\n          h = shape[1] | 0\n        } else {\n          if ('radius' in options) {\n            w = h = options.radius | 0\n          }\n          if ('width' in options) {\n            w = options.width | 0\n          }\n          if ('height' in options) {\n            h = options.height | 0\n          }\n        }\n        if ('format' in options) {\n          check$1.parameter(options.format, formatTypes,\n            'invalid renderbuffer format')\n          format = formatTypes[options.format]\n        }\n      } else if (typeof a === 'number') {\n        w = a | 0\n        if (typeof b === 'number') {\n          h = b | 0\n        } else {\n          h = w\n        }\n      } else if (!a) {\n        w = h = 1\n      } else {\n        check$1.raise('invalid arguments to renderbuffer constructor')\n      }\n\n      // check shape\n      check$1(\n        w > 0 && h > 0 &&\n        w <= limits.maxRenderbufferSize && h <= limits.maxRenderbufferSize,\n        'invalid renderbuffer size')\n\n      if (w === renderbuffer.width &&\n          h === renderbuffer.height &&\n          format === renderbuffer.format) {\n        return\n      }\n\n      reglRenderbuffer.width = renderbuffer.width = w\n      reglRenderbuffer.height = renderbuffer.height = h\n      renderbuffer.format = format\n\n      gl.bindRenderbuffer(GL_RENDERBUFFER, renderbuffer.renderbuffer)\n      gl.renderbufferStorage(GL_RENDERBUFFER, format, w, h)\n\n      check$1(\n        gl.getError() === 0,\n        'invalid render buffer format')\n\n      if (config.profile) {\n        renderbuffer.stats.size = getRenderbufferSize(renderbuffer.format, renderbuffer.width, renderbuffer.height)\n      }\n      reglRenderbuffer.format = formatTypesInvert[renderbuffer.format]\n\n      return reglRenderbuffer\n    }\n\n    function resize (w_, h_) {\n      var w = w_ | 0\n      var h = (h_ | 0) || w\n\n      if (w === renderbuffer.width && h === renderbuffer.height) {\n        return reglRenderbuffer\n      }\n\n      // check shape\n      check$1(\n        w > 0 && h > 0 &&\n        w <= limits.maxRenderbufferSize && h <= limits.maxRenderbufferSize,\n        'invalid renderbuffer size')\n\n      reglRenderbuffer.width = renderbuffer.width = w\n      reglRenderbuffer.height = renderbuffer.height = h\n\n      gl.bindRenderbuffer(GL_RENDERBUFFER, renderbuffer.renderbuffer)\n      gl.renderbufferStorage(GL_RENDERBUFFER, renderbuffer.format, w, h)\n\n      check$1(\n        gl.getError() === 0,\n        'invalid render buffer format')\n\n      // also, recompute size.\n      if (config.profile) {\n        renderbuffer.stats.size = getRenderbufferSize(\n          renderbuffer.format, renderbuffer.width, renderbuffer.height)\n      }\n\n      return reglRenderbuffer\n    }\n\n    reglRenderbuffer(a, b)\n\n    reglRenderbuffer.resize = resize\n    reglRenderbuffer._reglType = 'renderbuffer'\n    reglRenderbuffer._renderbuffer = renderbuffer\n    if (config.profile) {\n      reglRenderbuffer.stats = renderbuffer.stats\n    }\n    reglRenderbuffer.destroy = function () {\n      renderbuffer.decRef()\n    }\n\n    return reglRenderbuffer\n  }\n\n  if (config.profile) {\n    stats.getTotalRenderbufferSize = function () {\n      var total = 0\n      Object.keys(renderbufferSet).forEach(function (key) {\n        total += renderbufferSet[key].stats.size\n      })\n      return total\n    }\n  }\n\n  function restoreRenderbuffers () {\n    values(renderbufferSet).forEach(function (rb) {\n      rb.renderbuffer = gl.createRenderbuffer()\n      gl.bindRenderbuffer(GL_RENDERBUFFER, rb.renderbuffer)\n      gl.renderbufferStorage(GL_RENDERBUFFER, rb.format, rb.width, rb.height)\n    })\n    gl.bindRenderbuffer(GL_RENDERBUFFER, null)\n  }\n\n  return {\n    create: createRenderbuffer,\n    clear: function () {\n      values(renderbufferSet).forEach(destroy)\n    },\n    restore: restoreRenderbuffers\n  }\n}\n\n// We store these constants so that the minifier can inline them\nvar GL_FRAMEBUFFER$1 = 0x8D40\nvar GL_RENDERBUFFER$1 = 0x8D41\n\nvar GL_TEXTURE_2D$2 = 0x0DE1\nvar GL_TEXTURE_CUBE_MAP_POSITIVE_X$2 = 0x8515\n\nvar GL_COLOR_ATTACHMENT0$1 = 0x8CE0\nvar GL_DEPTH_ATTACHMENT = 0x8D00\nvar GL_STENCIL_ATTACHMENT = 0x8D20\nvar GL_DEPTH_STENCIL_ATTACHMENT = 0x821A\n\nvar GL_FRAMEBUFFER_COMPLETE$1 = 0x8CD5\nvar GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT = 0x8CD6\nvar GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT = 0x8CD7\nvar GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS = 0x8CD9\nvar GL_FRAMEBUFFER_UNSUPPORTED = 0x8CDD\n\nvar GL_HALF_FLOAT_OES$2 = 0x8D61\nvar GL_UNSIGNED_BYTE$6 = 0x1401\nvar GL_FLOAT$5 = 0x1406\n\nvar GL_RGB$1 = 0x1907\nvar GL_RGBA$2 = 0x1908\n\nvar GL_DEPTH_COMPONENT$1 = 0x1902\n\nvar colorTextureFormatEnums = [\n  GL_RGB$1,\n  GL_RGBA$2\n]\n\n// for every texture format, store\n// the number of channels\nvar textureFormatChannels = []\ntextureFormatChannels[GL_RGBA$2] = 4\ntextureFormatChannels[GL_RGB$1] = 3\n\n// for every texture type, store\n// the size in bytes.\nvar textureTypeSizes = []\ntextureTypeSizes[GL_UNSIGNED_BYTE$6] = 1\ntextureTypeSizes[GL_FLOAT$5] = 4\ntextureTypeSizes[GL_HALF_FLOAT_OES$2] = 2\n\nvar GL_RGBA4$2 = 0x8056\nvar GL_RGB5_A1$2 = 0x8057\nvar GL_RGB565$2 = 0x8D62\nvar GL_DEPTH_COMPONENT16$1 = 0x81A5\nvar GL_STENCIL_INDEX8$1 = 0x8D48\nvar GL_DEPTH_STENCIL$2 = 0x84F9\n\nvar GL_SRGB8_ALPHA8_EXT$1 = 0x8C43\n\nvar GL_RGBA32F_EXT$1 = 0x8814\n\nvar GL_RGBA16F_EXT$1 = 0x881A\nvar GL_RGB16F_EXT$1 = 0x881B\n\nvar colorRenderbufferFormatEnums = [\n  GL_RGBA4$2,\n  GL_RGB5_A1$2,\n  GL_RGB565$2,\n  GL_SRGB8_ALPHA8_EXT$1,\n  GL_RGBA16F_EXT$1,\n  GL_RGB16F_EXT$1,\n  GL_RGBA32F_EXT$1\n]\n\nvar statusCode = {}\nstatusCode[GL_FRAMEBUFFER_COMPLETE$1] = 'complete'\nstatusCode[GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT] = 'incomplete attachment'\nstatusCode[GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS] = 'incomplete dimensions'\nstatusCode[GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT] = 'incomplete, missing attachment'\nstatusCode[GL_FRAMEBUFFER_UNSUPPORTED] = 'unsupported'\n\nfunction wrapFBOState (\n  gl,\n  extensions,\n  limits,\n  textureState,\n  renderbufferState,\n  stats) {\n  var framebufferState = {\n    cur: null,\n    next: null,\n    dirty: false,\n    setFBO: null\n  }\n\n  var colorTextureFormats = ['rgba']\n  var colorRenderbufferFormats = ['rgba4', 'rgb565', 'rgb5 a1']\n\n  if (extensions.ext_srgb) {\n    colorRenderbufferFormats.push('srgba')\n  }\n\n  if (extensions.ext_color_buffer_half_float) {\n    colorRenderbufferFormats.push('rgba16f', 'rgb16f')\n  }\n\n  if (extensions.webgl_color_buffer_float) {\n    colorRenderbufferFormats.push('rgba32f')\n  }\n\n  var colorTypes = ['uint8']\n  if (extensions.oes_texture_half_float) {\n    colorTypes.push('half float', 'float16')\n  }\n  if (extensions.oes_texture_float) {\n    colorTypes.push('float', 'float32')\n  }\n\n  function FramebufferAttachment (target, texture, renderbuffer) {\n    this.target = target\n    this.texture = texture\n    this.renderbuffer = renderbuffer\n\n    var w = 0\n    var h = 0\n    if (texture) {\n      w = texture.width\n      h = texture.height\n    } else if (renderbuffer) {\n      w = renderbuffer.width\n      h = renderbuffer.height\n    }\n    this.width = w\n    this.height = h\n  }\n\n  function decRef (attachment) {\n    if (attachment) {\n      if (attachment.texture) {\n        attachment.texture._texture.decRef()\n      }\n      if (attachment.renderbuffer) {\n        attachment.renderbuffer._renderbuffer.decRef()\n      }\n    }\n  }\n\n  function incRefAndCheckShape (attachment, width, height) {\n    if (!attachment) {\n      return\n    }\n    if (attachment.texture) {\n      var texture = attachment.texture._texture\n      var tw = Math.max(1, texture.width)\n      var th = Math.max(1, texture.height)\n      check$1(tw === width && th === height,\n        'inconsistent width/height for supplied texture')\n      texture.refCount += 1\n    } else {\n      var renderbuffer = attachment.renderbuffer._renderbuffer\n      check$1(\n        renderbuffer.width === width && renderbuffer.height === height,\n        'inconsistent width/height for renderbuffer')\n      renderbuffer.refCount += 1\n    }\n  }\n\n  function attach (location, attachment) {\n    if (attachment) {\n      if (attachment.texture) {\n        gl.framebufferTexture2D(\n          GL_FRAMEBUFFER$1,\n          location,\n          attachment.target,\n          attachment.texture._texture.texture,\n          0)\n      } else {\n        gl.framebufferRenderbuffer(\n          GL_FRAMEBUFFER$1,\n          location,\n          GL_RENDERBUFFER$1,\n          attachment.renderbuffer._renderbuffer.renderbuffer)\n      }\n    }\n  }\n\n  function parseAttachment (attachment) {\n    var target = GL_TEXTURE_2D$2\n    var texture = null\n    var renderbuffer = null\n\n    var data = attachment\n    if (typeof attachment === 'object') {\n      data = attachment.data\n      if ('target' in attachment) {\n        target = attachment.target | 0\n      }\n    }\n\n    check$1.type(data, 'function', 'invalid attachment data')\n\n    var type = data._reglType\n    if (type === 'texture2d') {\n      texture = data\n      check$1(target === GL_TEXTURE_2D$2)\n    } else if (type === 'textureCube') {\n      texture = data\n      check$1(\n        target >= GL_TEXTURE_CUBE_MAP_POSITIVE_X$2 &&\n        target < GL_TEXTURE_CUBE_MAP_POSITIVE_X$2 + 6,\n        'invalid cube map target')\n    } else if (type === 'renderbuffer') {\n      renderbuffer = data\n      target = GL_RENDERBUFFER$1\n    } else {\n      check$1.raise('invalid regl object for attachment')\n    }\n\n    return new FramebufferAttachment(target, texture, renderbuffer)\n  }\n\n  function allocAttachment (\n    width,\n    height,\n    isTexture,\n    format,\n    type) {\n    if (isTexture) {\n      var texture = textureState.create2D({\n        width: width,\n        height: height,\n        format: format,\n        type: type\n      })\n      texture._texture.refCount = 0\n      return new FramebufferAttachment(GL_TEXTURE_2D$2, texture, null)\n    } else {\n      var rb = renderbufferState.create({\n        width: width,\n        height: height,\n        format: format\n      })\n      rb._renderbuffer.refCount = 0\n      return new FramebufferAttachment(GL_RENDERBUFFER$1, null, rb)\n    }\n  }\n\n  function unwrapAttachment (attachment) {\n    return attachment && (attachment.texture || attachment.renderbuffer)\n  }\n\n  function resizeAttachment (attachment, w, h) {\n    if (attachment) {\n      if (attachment.texture) {\n        attachment.texture.resize(w, h)\n      } else if (attachment.renderbuffer) {\n        attachment.renderbuffer.resize(w, h)\n      }\n      attachment.width = w\n      attachment.height = h\n    }\n  }\n\n  var framebufferCount = 0\n  var framebufferSet = {}\n\n  function REGLFramebuffer () {\n    this.id = framebufferCount++\n    framebufferSet[this.id] = this\n\n    this.framebuffer = gl.createFramebuffer()\n    this.width = 0\n    this.height = 0\n\n    this.colorAttachments = []\n    this.depthAttachment = null\n    this.stencilAttachment = null\n    this.depthStencilAttachment = null\n  }\n\n  function decFBORefs (framebuffer) {\n    framebuffer.colorAttachments.forEach(decRef)\n    decRef(framebuffer.depthAttachment)\n    decRef(framebuffer.stencilAttachment)\n    decRef(framebuffer.depthStencilAttachment)\n  }\n\n  function destroy (framebuffer) {\n    var handle = framebuffer.framebuffer\n    check$1(handle, 'must not double destroy framebuffer')\n    gl.deleteFramebuffer(handle)\n    framebuffer.framebuffer = null\n    stats.framebufferCount--\n    delete framebufferSet[framebuffer.id]\n  }\n\n  function updateFramebuffer (framebuffer) {\n    var i\n\n    gl.bindFramebuffer(GL_FRAMEBUFFER$1, framebuffer.framebuffer)\n    var colorAttachments = framebuffer.colorAttachments\n    for (i = 0; i < colorAttachments.length; ++i) {\n      attach(GL_COLOR_ATTACHMENT0$1 + i, colorAttachments[i])\n    }\n    for (i = colorAttachments.length; i < limits.maxColorAttachments; ++i) {\n      gl.framebufferTexture2D(\n        GL_FRAMEBUFFER$1,\n        GL_COLOR_ATTACHMENT0$1 + i,\n        GL_TEXTURE_2D$2,\n        null,\n        0)\n    }\n\n    gl.framebufferTexture2D(\n      GL_FRAMEBUFFER$1,\n      GL_DEPTH_STENCIL_ATTACHMENT,\n      GL_TEXTURE_2D$2,\n      null,\n      0)\n    gl.framebufferTexture2D(\n      GL_FRAMEBUFFER$1,\n      GL_DEPTH_ATTACHMENT,\n      GL_TEXTURE_2D$2,\n      null,\n      0)\n    gl.framebufferTexture2D(\n      GL_FRAMEBUFFER$1,\n      GL_STENCIL_ATTACHMENT,\n      GL_TEXTURE_2D$2,\n      null,\n      0)\n\n    attach(GL_DEPTH_ATTACHMENT, framebuffer.depthAttachment)\n    attach(GL_STENCIL_ATTACHMENT, framebuffer.stencilAttachment)\n    attach(GL_DEPTH_STENCIL_ATTACHMENT, framebuffer.depthStencilAttachment)\n\n    // Check status code\n    var status = gl.checkFramebufferStatus(GL_FRAMEBUFFER$1)\n    if (!gl.isContextLost() && status !== GL_FRAMEBUFFER_COMPLETE$1) {\n      check$1.raise('framebuffer configuration not supported, status = ' +\n        statusCode[status])\n    }\n\n    gl.bindFramebuffer(GL_FRAMEBUFFER$1, framebufferState.next ? framebufferState.next.framebuffer : null)\n    framebufferState.cur = framebufferState.next\n\n    // FIXME: Clear error code here.  This is a work around for a bug in\n    // headless-gl\n    gl.getError()\n  }\n\n  function createFBO (a0, a1) {\n    var framebuffer = new REGLFramebuffer()\n    stats.framebufferCount++\n\n    function reglFramebuffer (a, b) {\n      var i\n\n      check$1(framebufferState.next !== framebuffer,\n        'can not update framebuffer which is currently in use')\n\n      var width = 0\n      var height = 0\n\n      var needsDepth = true\n      var needsStencil = true\n\n      var colorBuffer = null\n      var colorTexture = true\n      var colorFormat = 'rgba'\n      var colorType = 'uint8'\n      var colorCount = 1\n\n      var depthBuffer = null\n      var stencilBuffer = null\n      var depthStencilBuffer = null\n      var depthStencilTexture = false\n\n      if (typeof a === 'number') {\n        width = a | 0\n        height = (b | 0) || width\n      } else if (!a) {\n        width = height = 1\n      } else {\n        check$1.type(a, 'object', 'invalid arguments for framebuffer')\n        var options = a\n\n        if ('shape' in options) {\n          var shape = options.shape\n          check$1(Array.isArray(shape) && shape.length >= 2,\n            'invalid shape for framebuffer')\n          width = shape[0]\n          height = shape[1]\n        } else {\n          if ('radius' in options) {\n            width = height = options.radius\n          }\n          if ('width' in options) {\n            width = options.width\n          }\n          if ('height' in options) {\n            height = options.height\n          }\n        }\n\n        if ('color' in options ||\n            'colors' in options) {\n          colorBuffer =\n            options.color ||\n            options.colors\n          if (Array.isArray(colorBuffer)) {\n            check$1(\n              colorBuffer.length === 1 || extensions.webgl_draw_buffers,\n              'multiple render targets not supported')\n          }\n        }\n\n        if (!colorBuffer) {\n          if ('colorCount' in options) {\n            colorCount = options.colorCount | 0\n            check$1(colorCount > 0, 'invalid color buffer count')\n          }\n\n          if ('colorTexture' in options) {\n            colorTexture = !!options.colorTexture\n            colorFormat = 'rgba4'\n          }\n\n          if ('colorType' in options) {\n            colorType = options.colorType\n            if (!colorTexture) {\n              if (colorType === 'half float' || colorType === 'float16') {\n                check$1(extensions.ext_color_buffer_half_float,\n                  'you must enable EXT_color_buffer_half_float to use 16-bit render buffers')\n                colorFormat = 'rgba16f'\n              } else if (colorType === 'float' || colorType === 'float32') {\n                check$1(extensions.webgl_color_buffer_float,\n                  'you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers')\n                colorFormat = 'rgba32f'\n              }\n            } else {\n              check$1(extensions.oes_texture_float ||\n                !(colorType === 'float' || colorType === 'float32'),\n              'you must enable OES_texture_float in order to use floating point framebuffer objects')\n              check$1(extensions.oes_texture_half_float ||\n                !(colorType === 'half float' || colorType === 'float16'),\n              'you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects')\n            }\n            check$1.oneOf(colorType, colorTypes, 'invalid color type')\n          }\n\n          if ('colorFormat' in options) {\n            colorFormat = options.colorFormat\n            if (colorTextureFormats.indexOf(colorFormat) >= 0) {\n              colorTexture = true\n            } else if (colorRenderbufferFormats.indexOf(colorFormat) >= 0) {\n              colorTexture = false\n            } else {\n              if (colorTexture) {\n                check$1.oneOf(\n                  options.colorFormat, colorTextureFormats,\n                  'invalid color format for texture')\n              } else {\n                check$1.oneOf(\n                  options.colorFormat, colorRenderbufferFormats,\n                  'invalid color format for renderbuffer')\n              }\n            }\n          }\n        }\n\n        if ('depthTexture' in options || 'depthStencilTexture' in options) {\n          depthStencilTexture = !!(options.depthTexture ||\n            options.depthStencilTexture)\n          check$1(!depthStencilTexture || extensions.webgl_depth_texture,\n            'webgl_depth_texture extension not supported')\n        }\n\n        if ('depth' in options) {\n          if (typeof options.depth === 'boolean') {\n            needsDepth = options.depth\n          } else {\n            depthBuffer = options.depth\n            needsStencil = false\n          }\n        }\n\n        if ('stencil' in options) {\n          if (typeof options.stencil === 'boolean') {\n            needsStencil = options.stencil\n          } else {\n            stencilBuffer = options.stencil\n            needsDepth = false\n          }\n        }\n\n        if ('depthStencil' in options) {\n          if (typeof options.depthStencil === 'boolean') {\n            needsDepth = needsStencil = options.depthStencil\n          } else {\n            depthStencilBuffer = options.depthStencil\n            needsDepth = false\n            needsStencil = false\n          }\n        }\n      }\n\n      // parse attachments\n      var colorAttachments = null\n      var depthAttachment = null\n      var stencilAttachment = null\n      var depthStencilAttachment = null\n\n      // Set up color attachments\n      if (Array.isArray(colorBuffer)) {\n        colorAttachments = colorBuffer.map(parseAttachment)\n      } else if (colorBuffer) {\n        colorAttachments = [parseAttachment(colorBuffer)]\n      } else {\n        colorAttachments = new Array(colorCount)\n        for (i = 0; i < colorCount; ++i) {\n          colorAttachments[i] = allocAttachment(\n            width,\n            height,\n            colorTexture,\n            colorFormat,\n            colorType)\n        }\n      }\n\n      check$1(extensions.webgl_draw_buffers || colorAttachments.length <= 1,\n        'you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers.')\n      check$1(colorAttachments.length <= limits.maxColorAttachments,\n        'too many color attachments, not supported')\n\n      width = width || colorAttachments[0].width\n      height = height || colorAttachments[0].height\n\n      if (depthBuffer) {\n        depthAttachment = parseAttachment(depthBuffer)\n      } else if (needsDepth && !needsStencil) {\n        depthAttachment = allocAttachment(\n          width,\n          height,\n          depthStencilTexture,\n          'depth',\n          'uint32')\n      }\n\n      if (stencilBuffer) {\n        stencilAttachment = parseAttachment(stencilBuffer)\n      } else if (needsStencil && !needsDepth) {\n        stencilAttachment = allocAttachment(\n          width,\n          height,\n          false,\n          'stencil',\n          'uint8')\n      }\n\n      if (depthStencilBuffer) {\n        depthStencilAttachment = parseAttachment(depthStencilBuffer)\n      } else if (!depthBuffer && !stencilBuffer && needsStencil && needsDepth) {\n        depthStencilAttachment = allocAttachment(\n          width,\n          height,\n          depthStencilTexture,\n          'depth stencil',\n          'depth stencil')\n      }\n\n      check$1(\n        (!!depthBuffer) + (!!stencilBuffer) + (!!depthStencilBuffer) <= 1,\n        'invalid framebuffer configuration, can specify exactly one depth/stencil attachment')\n\n      var commonColorAttachmentSize = null\n\n      for (i = 0; i < colorAttachments.length; ++i) {\n        incRefAndCheckShape(colorAttachments[i], width, height)\n        check$1(!colorAttachments[i] ||\n          (colorAttachments[i].texture &&\n            colorTextureFormatEnums.indexOf(colorAttachments[i].texture._texture.format) >= 0) ||\n          (colorAttachments[i].renderbuffer &&\n            colorRenderbufferFormatEnums.indexOf(colorAttachments[i].renderbuffer._renderbuffer.format) >= 0),\n        'framebuffer color attachment ' + i + ' is invalid')\n\n        if (colorAttachments[i] && colorAttachments[i].texture) {\n          var colorAttachmentSize =\n              textureFormatChannels[colorAttachments[i].texture._texture.format] *\n              textureTypeSizes[colorAttachments[i].texture._texture.type]\n\n          if (commonColorAttachmentSize === null) {\n            commonColorAttachmentSize = colorAttachmentSize\n          } else {\n            // We need to make sure that all color attachments have the same number of bitplanes\n            // (that is, the same numer of bits per pixel)\n            // This is required by the GLES2.0 standard. See the beginning of Chapter 4 in that document.\n            check$1(commonColorAttachmentSize === colorAttachmentSize,\n              'all color attachments much have the same number of bits per pixel.')\n          }\n        }\n      }\n      incRefAndCheckShape(depthAttachment, width, height)\n      check$1(!depthAttachment ||\n        (depthAttachment.texture &&\n          depthAttachment.texture._texture.format === GL_DEPTH_COMPONENT$1) ||\n        (depthAttachment.renderbuffer &&\n          depthAttachment.renderbuffer._renderbuffer.format === GL_DEPTH_COMPONENT16$1),\n      'invalid depth attachment for framebuffer object')\n      incRefAndCheckShape(stencilAttachment, width, height)\n      check$1(!stencilAttachment ||\n        (stencilAttachment.renderbuffer &&\n          stencilAttachment.renderbuffer._renderbuffer.format === GL_STENCIL_INDEX8$1),\n      'invalid stencil attachment for framebuffer object')\n      incRefAndCheckShape(depthStencilAttachment, width, height)\n      check$1(!depthStencilAttachment ||\n        (depthStencilAttachment.texture &&\n          depthStencilAttachment.texture._texture.format === GL_DEPTH_STENCIL$2) ||\n        (depthStencilAttachment.renderbuffer &&\n          depthStencilAttachment.renderbuffer._renderbuffer.format === GL_DEPTH_STENCIL$2),\n      'invalid depth-stencil attachment for framebuffer object')\n\n      // decrement references\n      decFBORefs(framebuffer)\n\n      framebuffer.width = width\n      framebuffer.height = height\n\n      framebuffer.colorAttachments = colorAttachments\n      framebuffer.depthAttachment = depthAttachment\n      framebuffer.stencilAttachment = stencilAttachment\n      framebuffer.depthStencilAttachment = depthStencilAttachment\n\n      reglFramebuffer.color = colorAttachments.map(unwrapAttachment)\n      reglFramebuffer.depth = unwrapAttachment(depthAttachment)\n      reglFramebuffer.stencil = unwrapAttachment(stencilAttachment)\n      reglFramebuffer.depthStencil = unwrapAttachment(depthStencilAttachment)\n\n      reglFramebuffer.width = framebuffer.width\n      reglFramebuffer.height = framebuffer.height\n\n      updateFramebuffer(framebuffer)\n\n      return reglFramebuffer\n    }\n\n    function resize (w_, h_) {\n      check$1(framebufferState.next !== framebuffer,\n        'can not resize a framebuffer which is currently in use')\n\n      var w = Math.max(w_ | 0, 1)\n      var h = Math.max((h_ | 0) || w, 1)\n      if (w === framebuffer.width && h === framebuffer.height) {\n        return reglFramebuffer\n      }\n\n      // resize all buffers\n      var colorAttachments = framebuffer.colorAttachments\n      for (var i = 0; i < colorAttachments.length; ++i) {\n        resizeAttachment(colorAttachments[i], w, h)\n      }\n      resizeAttachment(framebuffer.depthAttachment, w, h)\n      resizeAttachment(framebuffer.stencilAttachment, w, h)\n      resizeAttachment(framebuffer.depthStencilAttachment, w, h)\n\n      framebuffer.width = reglFramebuffer.width = w\n      framebuffer.height = reglFramebuffer.height = h\n\n      updateFramebuffer(framebuffer)\n\n      return reglFramebuffer\n    }\n\n    reglFramebuffer(a0, a1)\n\n    return extend(reglFramebuffer, {\n      resize: resize,\n      _reglType: 'framebuffer',\n      _framebuffer: framebuffer,\n      destroy: function () {\n        destroy(framebuffer)\n        decFBORefs(framebuffer)\n      },\n      use: function (block) {\n        framebufferState.setFBO({\n          framebuffer: reglFramebuffer\n        }, block)\n      }\n    })\n  }\n\n  function createCubeFBO (options) {\n    var faces = Array(6)\n\n    function reglFramebufferCube (a) {\n      var i\n\n      check$1(faces.indexOf(framebufferState.next) < 0,\n        'can not update framebuffer which is currently in use')\n\n      var params = {\n        color: null\n      }\n\n      var radius = 0\n\n      var colorBuffer = null\n      var colorFormat = 'rgba'\n      var colorType = 'uint8'\n      var colorCount = 1\n\n      if (typeof a === 'number') {\n        radius = a | 0\n      } else if (!a) {\n        radius = 1\n      } else {\n        check$1.type(a, 'object', 'invalid arguments for framebuffer')\n        var options = a\n\n        if ('shape' in options) {\n          var shape = options.shape\n          check$1(\n            Array.isArray(shape) && shape.length >= 2,\n            'invalid shape for framebuffer')\n          check$1(\n            shape[0] === shape[1],\n            'cube framebuffer must be square')\n          radius = shape[0]\n        } else {\n          if ('radius' in options) {\n            radius = options.radius | 0\n          }\n          if ('width' in options) {\n            radius = options.width | 0\n            if ('height' in options) {\n              check$1(options.height === radius, 'must be square')\n            }\n          } else if ('height' in options) {\n            radius = options.height | 0\n          }\n        }\n\n        if ('color' in options ||\n            'colors' in options) {\n          colorBuffer =\n            options.color ||\n            options.colors\n          if (Array.isArray(colorBuffer)) {\n            check$1(\n              colorBuffer.length === 1 || extensions.webgl_draw_buffers,\n              'multiple render targets not supported')\n          }\n        }\n\n        if (!colorBuffer) {\n          if ('colorCount' in options) {\n            colorCount = options.colorCount | 0\n            check$1(colorCount > 0, 'invalid color buffer count')\n          }\n\n          if ('colorType' in options) {\n            check$1.oneOf(\n              options.colorType, colorTypes,\n              'invalid color type')\n            colorType = options.colorType\n          }\n\n          if ('colorFormat' in options) {\n            colorFormat = options.colorFormat\n            check$1.oneOf(\n              options.colorFormat, colorTextureFormats,\n              'invalid color format for texture')\n          }\n        }\n\n        if ('depth' in options) {\n          params.depth = options.depth\n        }\n\n        if ('stencil' in options) {\n          params.stencil = options.stencil\n        }\n\n        if ('depthStencil' in options) {\n          params.depthStencil = options.depthStencil\n        }\n      }\n\n      var colorCubes\n      if (colorBuffer) {\n        if (Array.isArray(colorBuffer)) {\n          colorCubes = []\n          for (i = 0; i < colorBuffer.length; ++i) {\n            colorCubes[i] = colorBuffer[i]\n          }\n        } else {\n          colorCubes = [ colorBuffer ]\n        }\n      } else {\n        colorCubes = Array(colorCount)\n        var cubeMapParams = {\n          radius: radius,\n          format: colorFormat,\n          type: colorType\n        }\n        for (i = 0; i < colorCount; ++i) {\n          colorCubes[i] = textureState.createCube(cubeMapParams)\n        }\n      }\n\n      // Check color cubes\n      params.color = Array(colorCubes.length)\n      for (i = 0; i < colorCubes.length; ++i) {\n        var cube = colorCubes[i]\n        check$1(\n          typeof cube === 'function' && cube._reglType === 'textureCube',\n          'invalid cube map')\n        radius = radius || cube.width\n        check$1(\n          cube.width === radius && cube.height === radius,\n          'invalid cube map shape')\n        params.color[i] = {\n          target: GL_TEXTURE_CUBE_MAP_POSITIVE_X$2,\n          data: colorCubes[i]\n        }\n      }\n\n      for (i = 0; i < 6; ++i) {\n        for (var j = 0; j < colorCubes.length; ++j) {\n          params.color[j].target = GL_TEXTURE_CUBE_MAP_POSITIVE_X$2 + i\n        }\n        // reuse depth-stencil attachments across all cube maps\n        if (i > 0) {\n          params.depth = faces[0].depth\n          params.stencil = faces[0].stencil\n          params.depthStencil = faces[0].depthStencil\n        }\n        if (faces[i]) {\n          (faces[i])(params)\n        } else {\n          faces[i] = createFBO(params)\n        }\n      }\n\n      return extend(reglFramebufferCube, {\n        width: radius,\n        height: radius,\n        color: colorCubes\n      })\n    }\n\n    function resize (radius_) {\n      var i\n      var radius = radius_ | 0\n      check$1(radius > 0 && radius <= limits.maxCubeMapSize,\n        'invalid radius for cube fbo')\n\n      if (radius === reglFramebufferCube.width) {\n        return reglFramebufferCube\n      }\n\n      var colors = reglFramebufferCube.color\n      for (i = 0; i < colors.length; ++i) {\n        colors[i].resize(radius)\n      }\n\n      for (i = 0; i < 6; ++i) {\n        faces[i].resize(radius)\n      }\n\n      reglFramebufferCube.width = reglFramebufferCube.height = radius\n\n      return reglFramebufferCube\n    }\n\n    reglFramebufferCube(options)\n\n    return extend(reglFramebufferCube, {\n      faces: faces,\n      resize: resize,\n      _reglType: 'framebufferCube',\n      destroy: function () {\n        faces.forEach(function (f) {\n          f.destroy()\n        })\n      }\n    })\n  }\n\n  function restoreFramebuffers () {\n    framebufferState.cur = null\n    framebufferState.next = null\n    framebufferState.dirty = true\n    values(framebufferSet).forEach(function (fb) {\n      fb.framebuffer = gl.createFramebuffer()\n      updateFramebuffer(fb)\n    })\n  }\n\n  return extend(framebufferState, {\n    getFramebuffer: function (object) {\n      if (typeof object === 'function' && object._reglType === 'framebuffer') {\n        var fbo = object._framebuffer\n        if (fbo instanceof REGLFramebuffer) {\n          return fbo\n        }\n      }\n      return null\n    },\n    create: createFBO,\n    createCube: createCubeFBO,\n    clear: function () {\n      values(framebufferSet).forEach(destroy)\n    },\n    restore: restoreFramebuffers\n  })\n}\n\nvar GL_FLOAT$6 = 5126\nvar GL_ARRAY_BUFFER$1 = 34962\n\nfunction AttributeRecord () {\n  this.state = 0\n\n  this.x = 0.0\n  this.y = 0.0\n  this.z = 0.0\n  this.w = 0.0\n\n  this.buffer = null\n  this.size = 0\n  this.normalized = false\n  this.type = GL_FLOAT$6\n  this.offset = 0\n  this.stride = 0\n  this.divisor = 0\n}\n\nfunction wrapAttributeState (\n  gl,\n  extensions,\n  limits,\n  stats,\n  bufferState) {\n  var NUM_ATTRIBUTES = limits.maxAttributes\n  var attributeBindings = new Array(NUM_ATTRIBUTES)\n  for (var i = 0; i < NUM_ATTRIBUTES; ++i) {\n    attributeBindings[i] = new AttributeRecord()\n  }\n  var vaoCount = 0\n  var vaoSet = {}\n\n  var state = {\n    Record: AttributeRecord,\n    scope: {},\n    state: attributeBindings,\n    currentVAO: null,\n    targetVAO: null,\n    restore: extVAO() ? restoreVAO : function () {},\n    createVAO: createVAO,\n    getVAO: getVAO,\n    destroyBuffer: destroyBuffer,\n    setVAO: extVAO() ? setVAOEXT : setVAOEmulated,\n    clear: extVAO() ? destroyVAOEXT : function () {}\n  }\n\n  function destroyBuffer (buffer) {\n    for (var i = 0; i < attributeBindings.length; ++i) {\n      var record = attributeBindings[i]\n      if (record.buffer === buffer) {\n        gl.disableVertexAttribArray(i)\n        record.buffer = null\n      }\n    }\n  }\n\n  function extVAO () {\n    return extensions.oes_vertex_array_object\n  }\n\n  function extInstanced () {\n    return extensions.angle_instanced_arrays\n  }\n\n  function getVAO (vao) {\n    if (typeof vao === 'function' && vao._vao) {\n      return vao._vao\n    }\n    return null\n  }\n\n  function setVAOEXT (vao) {\n    if (vao === state.currentVAO) {\n      return\n    }\n    var ext = extVAO()\n    if (vao) {\n      ext.bindVertexArrayOES(vao.vao)\n    } else {\n      ext.bindVertexArrayOES(null)\n    }\n    state.currentVAO = vao\n  }\n\n  function setVAOEmulated (vao) {\n    if (vao === state.currentVAO) {\n      return\n    }\n    if (vao) {\n      vao.bindAttrs()\n    } else {\n      var exti = extInstanced()\n      for (var i = 0; i < attributeBindings.length; ++i) {\n        var binding = attributeBindings[i]\n        if (binding.buffer) {\n          gl.enableVertexAttribArray(i)\n          gl.vertexAttribPointer(i, binding.size, binding.type, binding.normalized, binding.stride, binding.offfset)\n          if (exti && binding.divisor) {\n            exti.vertexAttribDivisorANGLE(i, binding.divisor)\n          }\n        } else {\n          gl.disableVertexAttribArray(i)\n          gl.vertexAttrib4f(i, binding.x, binding.y, binding.z, binding.w)\n        }\n      }\n    }\n    state.currentVAO = vao\n  }\n\n  function destroyVAOEXT () {\n    values(vaoSet).forEach(function (vao) {\n      vao.destroy()\n    })\n  }\n\n  function REGLVAO () {\n    this.id = ++vaoCount\n    this.attributes = []\n    var extension = extVAO()\n    if (extension) {\n      this.vao = extension.createVertexArrayOES()\n    } else {\n      this.vao = null\n    }\n    vaoSet[this.id] = this\n    this.buffers = []\n  }\n\n  REGLVAO.prototype.bindAttrs = function () {\n    var exti = extInstanced()\n    var attributes = this.attributes\n    for (var i = 0; i < attributes.length; ++i) {\n      var attr = attributes[i]\n      if (attr.buffer) {\n        gl.enableVertexAttribArray(i)\n        gl.bindBuffer(GL_ARRAY_BUFFER$1, attr.buffer.buffer)\n        gl.vertexAttribPointer(i, attr.size, attr.type, attr.normalized, attr.stride, attr.offset)\n        if (exti && attr.divisor) {\n          exti.vertexAttribDivisorANGLE(i, attr.divisor)\n        }\n      } else {\n        gl.disableVertexAttribArray(i)\n        gl.vertexAttrib4f(i, attr.x, attr.y, attr.z, attr.w)\n      }\n    }\n    for (var j = attributes.length; j < NUM_ATTRIBUTES; ++j) {\n      gl.disableVertexAttribArray(j)\n    }\n  }\n\n  REGLVAO.prototype.refresh = function () {\n    var ext = extVAO()\n    if (ext) {\n      ext.bindVertexArrayOES(this.vao)\n      this.bindAttrs()\n      state.currentVAO = this\n    }\n  }\n\n  REGLVAO.prototype.destroy = function () {\n    if (this.vao) {\n      var extension = extVAO()\n      if (this === state.currentVAO) {\n        state.currentVAO = null\n        extension.bindVertexArrayOES(null)\n      }\n      extension.deleteVertexArrayOES(this.vao)\n      this.vao = null\n    }\n    if (vaoSet[this.id]) {\n      delete vaoSet[this.id]\n      stats.vaoCount -= 1\n    }\n  }\n\n  function restoreVAO () {\n    var ext = extVAO()\n    if (ext) {\n      values(vaoSet).forEach(function (vao) {\n        vao.refresh()\n      })\n    }\n  }\n\n  function createVAO (_attr) {\n    var vao = new REGLVAO()\n    stats.vaoCount += 1\n\n    function updateVAO (attributes) {\n      check$1(Array.isArray(attributes), 'arguments to vertex array constructor must be an array')\n      check$1(attributes.length < NUM_ATTRIBUTES, 'too many attributes')\n      check$1(attributes.length > 0, 'must specify at least one attribute')\n\n      var bufUpdated = {}\n      var nattributes = vao.attributes\n      nattributes.length = attributes.length\n      for (var i = 0; i < attributes.length; ++i) {\n        var spec = attributes[i]\n        var rec = nattributes[i] = new AttributeRecord()\n        var data = spec.data || spec\n        if (Array.isArray(data) || isTypedArray(data) || isNDArrayLike(data)) {\n          var buf\n          if (vao.buffers[i]) {\n            buf = vao.buffers[i]\n            if (isTypedArray(data) && buf._buffer.byteLength >= data.byteLength) {\n              buf.subdata(data)\n            } else {\n              buf.destroy()\n              vao.buffers[i] = null\n            }\n          }\n          if (!vao.buffers[i]) {\n            buf = vao.buffers[i] = bufferState.create(spec, GL_ARRAY_BUFFER$1, false, true)\n          }\n          rec.buffer = bufferState.getBuffer(buf)\n          rec.size = rec.buffer.dimension | 0\n          rec.normalized = false\n          rec.type = rec.buffer.dtype\n          rec.offset = 0\n          rec.stride = 0\n          rec.divisor = 0\n          rec.state = 1\n          bufUpdated[i] = 1\n        } else if (bufferState.getBuffer(spec)) {\n          rec.buffer = bufferState.getBuffer(spec)\n          rec.size = rec.buffer.dimension | 0\n          rec.normalized = false\n          rec.type = rec.buffer.dtype\n          rec.offset = 0\n          rec.stride = 0\n          rec.divisor = 0\n          rec.state = 1\n        } else if (bufferState.getBuffer(spec.buffer)) {\n          rec.buffer = bufferState.getBuffer(spec.buffer)\n          rec.size = ((+spec.size) || rec.buffer.dimension) | 0\n          rec.normalized = !!spec.normalized || false\n          if ('type' in spec) {\n            check$1.parameter(spec.type, glTypes, 'invalid buffer type')\n            rec.type = glTypes[spec.type]\n          } else {\n            rec.type = rec.buffer.dtype\n          }\n          rec.offset = (spec.offset || 0) | 0\n          rec.stride = (spec.stride || 0) | 0\n          rec.divisor = (spec.divisor || 0) | 0\n          rec.state = 1\n\n          check$1(rec.size >= 1 && rec.size <= 4, 'size must be between 1 and 4')\n          check$1(rec.offset >= 0, 'invalid offset')\n          check$1(rec.stride >= 0 && rec.stride <= 255, 'stride must be between 0 and 255')\n          check$1(rec.divisor >= 0, 'divisor must be positive')\n          check$1(!rec.divisor || !!extensions.angle_instanced_arrays, 'ANGLE_instanced_arrays must be enabled to use divisor')\n        } else if ('x' in spec) {\n          check$1(i > 0, 'first attribute must not be a constant')\n          rec.x = +spec.x || 0\n          rec.y = +spec.y || 0\n          rec.z = +spec.z || 0\n          rec.w = +spec.w || 0\n          rec.state = 2\n        } else {\n          check$1(false, 'invalid attribute spec for location ' + i)\n        }\n      }\n\n      // retire unused buffers\n      for (var j = 0; j < vao.buffers.length; ++j) {\n        if (!bufUpdated[j] && vao.buffers[j]) {\n          vao.buffers[j].destroy()\n          vao.buffers[j] = null\n        }\n      }\n\n      vao.refresh()\n      return updateVAO\n    }\n\n    updateVAO.destroy = function () {\n      for (var j = 0; j < vao.buffers.length; ++j) {\n        if (vao.buffers[j]) {\n          vao.buffers[j].destroy()\n        }\n      }\n      vao.buffers.length = 0\n      vao.destroy()\n    }\n\n    updateVAO._vao = vao\n    updateVAO._reglType = 'vao'\n\n    return updateVAO(_attr)\n  }\n\n  return state\n}\n\nvar GL_FRAGMENT_SHADER = 35632\nvar GL_VERTEX_SHADER = 35633\n\nvar GL_ACTIVE_UNIFORMS = 0x8B86\nvar GL_ACTIVE_ATTRIBUTES = 0x8B89\n\nfunction wrapShaderState (gl, stringStore, stats, config) {\n  // ===================================================\n  // glsl compilation and linking\n  // ===================================================\n  var fragShaders = {}\n  var vertShaders = {}\n\n  function ActiveInfo (name, id, location, info) {\n    this.name = name\n    this.id = id\n    this.location = location\n    this.info = info\n  }\n\n  function insertActiveInfo (list, info) {\n    for (var i = 0; i < list.length; ++i) {\n      if (list[i].id === info.id) {\n        list[i].location = info.location\n        return\n      }\n    }\n    list.push(info)\n  }\n\n  function getShader (type, id, command) {\n    var cache = type === GL_FRAGMENT_SHADER ? fragShaders : vertShaders\n    var shader = cache[id]\n\n    if (!shader) {\n      var source = stringStore.str(id)\n      shader = gl.createShader(type)\n      gl.shaderSource(shader, source)\n      gl.compileShader(shader)\n      check$1.shaderError(gl, shader, source, type, command)\n      cache[id] = shader\n    }\n\n    return shader\n  }\n\n  // ===================================================\n  // program linking\n  // ===================================================\n  var programCache = {}\n  var programList = []\n\n  var PROGRAM_COUNTER = 0\n\n  function REGLProgram (fragId, vertId) {\n    this.id = PROGRAM_COUNTER++\n    this.fragId = fragId\n    this.vertId = vertId\n    this.program = null\n    this.uniforms = []\n    this.attributes = []\n    this.refCount = 1\n\n    if (config.profile) {\n      this.stats = {\n        uniformsCount: 0,\n        attributesCount: 0\n      }\n    }\n  }\n\n  function linkProgram (desc, command, attributeLocations) {\n    var i, info\n\n    // -------------------------------\n    // compile & link\n    // -------------------------------\n    var fragShader = getShader(GL_FRAGMENT_SHADER, desc.fragId)\n    var vertShader = getShader(GL_VERTEX_SHADER, desc.vertId)\n\n    var program = desc.program = gl.createProgram()\n    gl.attachShader(program, fragShader)\n    gl.attachShader(program, vertShader)\n    if (attributeLocations) {\n      for (i = 0; i < attributeLocations.length; ++i) {\n        var binding = attributeLocations[i]\n        gl.bindAttribLocation(program, binding[0], binding[1])\n      }\n    }\n\n    gl.linkProgram(program)\n    check$1.linkError(\n      gl,\n      program,\n      stringStore.str(desc.fragId),\n      stringStore.str(desc.vertId),\n      command)\n\n    // -------------------------------\n    // grab uniforms\n    // -------------------------------\n    var numUniforms = gl.getProgramParameter(program, GL_ACTIVE_UNIFORMS)\n    if (config.profile) {\n      desc.stats.uniformsCount = numUniforms\n    }\n    var uniforms = desc.uniforms\n    for (i = 0; i < numUniforms; ++i) {\n      info = gl.getActiveUniform(program, i)\n      if (info) {\n        if (info.size > 1) {\n          for (var j = 0; j < info.size; ++j) {\n            var name = info.name.replace('[0]', '[' + j + ']')\n            insertActiveInfo(uniforms, new ActiveInfo(\n              name,\n              stringStore.id(name),\n              gl.getUniformLocation(program, name),\n              info))\n          }\n        } else {\n          insertActiveInfo(uniforms, new ActiveInfo(\n            info.name,\n            stringStore.id(info.name),\n            gl.getUniformLocation(program, info.name),\n            info))\n        }\n      }\n    }\n\n    // -------------------------------\n    // grab attributes\n    // -------------------------------\n    var numAttributes = gl.getProgramParameter(program, GL_ACTIVE_ATTRIBUTES)\n    if (config.profile) {\n      desc.stats.attributesCount = numAttributes\n    }\n\n    var attributes = desc.attributes\n    for (i = 0; i < numAttributes; ++i) {\n      info = gl.getActiveAttrib(program, i)\n      if (info) {\n        insertActiveInfo(attributes, new ActiveInfo(\n          info.name,\n          stringStore.id(info.name),\n          gl.getAttribLocation(program, info.name),\n          info))\n      }\n    }\n  }\n\n  if (config.profile) {\n    stats.getMaxUniformsCount = function () {\n      var m = 0\n      programList.forEach(function (desc) {\n        if (desc.stats.uniformsCount > m) {\n          m = desc.stats.uniformsCount\n        }\n      })\n      return m\n    }\n\n    stats.getMaxAttributesCount = function () {\n      var m = 0\n      programList.forEach(function (desc) {\n        if (desc.stats.attributesCount > m) {\n          m = desc.stats.attributesCount\n        }\n      })\n      return m\n    }\n  }\n\n  function restoreShaders () {\n    fragShaders = {}\n    vertShaders = {}\n    for (var i = 0; i < programList.length; ++i) {\n      linkProgram(programList[i], null, programList[i].attributes.map(function (info) {\n        return [info.location, info.name]\n      }))\n    }\n  }\n\n  return {\n    clear: function () {\n      var deleteShader = gl.deleteShader.bind(gl)\n      values(fragShaders).forEach(deleteShader)\n      fragShaders = {}\n      values(vertShaders).forEach(deleteShader)\n      vertShaders = {}\n\n      programList.forEach(function (desc) {\n        gl.deleteProgram(desc.program)\n      })\n      programList.length = 0\n      programCache = {}\n\n      stats.shaderCount = 0\n    },\n\n    program: function (vertId, fragId, command, attribLocations) {\n      check$1.command(vertId >= 0, 'missing vertex shader', command)\n      check$1.command(fragId >= 0, 'missing fragment shader', command)\n\n      var cache = programCache[fragId]\n      if (!cache) {\n        cache = programCache[fragId] = {}\n      }\n      var prevProgram = cache[vertId]\n      if (prevProgram) {\n        prevProgram.refCount++\n        if (!attribLocations) {\n          return prevProgram\n        }\n      }\n      var program = new REGLProgram(fragId, vertId)\n      stats.shaderCount++\n      linkProgram(program, command, attribLocations)\n      if (!prevProgram) {\n        cache[vertId] = program\n      }\n      programList.push(program)\n      return extend(program, {\n        destroy: function () {\n          program.refCount--\n          if (program.refCount <= 0) {\n            gl.deleteProgram(program.program)\n            var idx = programList.indexOf(program)\n            programList.splice(idx, 1)\n            stats.shaderCount--\n          }\n          // no program is linked to this vert anymore\n          if (cache[program.vertId].refCount <= 0) {\n            gl.deleteShader(vertShaders[program.vertId])\n            delete vertShaders[program.vertId]\n            delete programCache[program.fragId][program.vertId]\n          }\n          // no program is linked to this frag anymore\n          if (!Object.keys(programCache[program.fragId]).length) {\n            gl.deleteShader(fragShaders[program.fragId])\n            delete fragShaders[program.fragId]\n            delete programCache[program.fragId]\n          }\n        }\n      })\n    },\n\n    restore: restoreShaders,\n\n    shader: getShader,\n\n    frag: -1,\n    vert: -1\n  }\n}\n\nvar GL_RGBA$3 = 6408\nvar GL_UNSIGNED_BYTE$7 = 5121\nvar GL_PACK_ALIGNMENT = 0x0D05\nvar GL_FLOAT$7 = 0x1406 // 5126\n\nfunction wrapReadPixels (\n  gl,\n  framebufferState,\n  reglPoll,\n  context,\n  glAttributes,\n  extensions,\n  limits) {\n  function readPixelsImpl (input) {\n    var type\n    if (framebufferState.next === null) {\n      check$1(\n        glAttributes.preserveDrawingBuffer,\n        'you must create a webgl context with \"preserveDrawingBuffer\":true in order to read pixels from the drawing buffer')\n      type = GL_UNSIGNED_BYTE$7\n    } else {\n      check$1(\n        framebufferState.next.colorAttachments[0].texture !== null,\n        'You cannot read from a renderbuffer')\n      type = framebufferState.next.colorAttachments[0].texture._texture.type\n\n      if (extensions.oes_texture_float) {\n        check$1(\n          type === GL_UNSIGNED_BYTE$7 || type === GL_FLOAT$7,\n          'Reading from a framebuffer is only allowed for the types \\'uint8\\' and \\'float\\'')\n\n        if (type === GL_FLOAT$7) {\n          check$1(limits.readFloat, 'Reading \\'float\\' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float')\n        }\n      } else {\n        check$1(\n          type === GL_UNSIGNED_BYTE$7,\n          'Reading from a framebuffer is only allowed for the type \\'uint8\\'')\n      }\n    }\n\n    var x = 0\n    var y = 0\n    var width = context.framebufferWidth\n    var height = context.framebufferHeight\n    var data = null\n\n    if (isTypedArray(input)) {\n      data = input\n    } else if (input) {\n      check$1.type(input, 'object', 'invalid arguments to regl.read()')\n      x = input.x | 0\n      y = input.y | 0\n      check$1(\n        x >= 0 && x < context.framebufferWidth,\n        'invalid x offset for regl.read')\n      check$1(\n        y >= 0 && y < context.framebufferHeight,\n        'invalid y offset for regl.read')\n      width = (input.width || (context.framebufferWidth - x)) | 0\n      height = (input.height || (context.framebufferHeight - y)) | 0\n      data = input.data || null\n    }\n\n    // sanity check input.data\n    if (data) {\n      if (type === GL_UNSIGNED_BYTE$7) {\n        check$1(\n          data instanceof Uint8Array,\n          'buffer must be \\'Uint8Array\\' when reading from a framebuffer of type \\'uint8\\'')\n      } else if (type === GL_FLOAT$7) {\n        check$1(\n          data instanceof Float32Array,\n          'buffer must be \\'Float32Array\\' when reading from a framebuffer of type \\'float\\'')\n      }\n    }\n\n    check$1(\n      width > 0 && width + x <= context.framebufferWidth,\n      'invalid width for read pixels')\n    check$1(\n      height > 0 && height + y <= context.framebufferHeight,\n      'invalid height for read pixels')\n\n    // Update WebGL state\n    reglPoll()\n\n    // Compute size\n    var size = width * height * 4\n\n    // Allocate data\n    if (!data) {\n      if (type === GL_UNSIGNED_BYTE$7) {\n        data = new Uint8Array(size)\n      } else if (type === GL_FLOAT$7) {\n        data = data || new Float32Array(size)\n      }\n    }\n\n    // Type check\n    check$1.isTypedArray(data, 'data buffer for regl.read() must be a typedarray')\n    check$1(data.byteLength >= size, 'data buffer for regl.read() too small')\n\n    // Run read pixels\n    gl.pixelStorei(GL_PACK_ALIGNMENT, 4)\n    gl.readPixels(x, y, width, height, GL_RGBA$3,\n      type,\n      data)\n\n    return data\n  }\n\n  function readPixelsFBO (options) {\n    var result\n    framebufferState.setFBO({\n      framebuffer: options.framebuffer\n    }, function () {\n      result = readPixelsImpl(options)\n    })\n    return result\n  }\n\n  function readPixels (options) {\n    if (!options || !('framebuffer' in options)) {\n      return readPixelsImpl(options)\n    } else {\n      return readPixelsFBO(options)\n    }\n  }\n\n  return readPixels\n}\n\nfunction slice (x) {\n  return Array.prototype.slice.call(x)\n}\n\nfunction join (x) {\n  return slice(x).join('')\n}\n\nfunction createEnvironment () {\n  // Unique variable id counter\n  var varCounter = 0\n\n  // Linked values are passed from this scope into the generated code block\n  // Calling link() passes a value into the generated scope and returns\n  // the variable name which it is bound to\n  var linkedNames = []\n  var linkedValues = []\n  function link (value) {\n    for (var i = 0; i < linkedValues.length; ++i) {\n      if (linkedValues[i] === value) {\n        return linkedNames[i]\n      }\n    }\n\n    var name = 'g' + (varCounter++)\n    linkedNames.push(name)\n    linkedValues.push(value)\n    return name\n  }\n\n  // create a code block\n  function block () {\n    var code = []\n    function push () {\n      code.push.apply(code, slice(arguments))\n    }\n\n    var vars = []\n    function def () {\n      var name = 'v' + (varCounter++)\n      vars.push(name)\n\n      if (arguments.length > 0) {\n        code.push(name, '=')\n        code.push.apply(code, slice(arguments))\n        code.push(';')\n      }\n\n      return name\n    }\n\n    return extend(push, {\n      def: def,\n      toString: function () {\n        return join([\n          (vars.length > 0 ? 'var ' + vars.join(',') + ';' : ''),\n          join(code)\n        ])\n      }\n    })\n  }\n\n  function scope () {\n    var entry = block()\n    var exit = block()\n\n    var entryToString = entry.toString\n    var exitToString = exit.toString\n\n    function save (object, prop) {\n      exit(object, prop, '=', entry.def(object, prop), ';')\n    }\n\n    return extend(function () {\n      entry.apply(entry, slice(arguments))\n    }, {\n      def: entry.def,\n      entry: entry,\n      exit: exit,\n      save: save,\n      set: function (object, prop, value) {\n        save(object, prop)\n        entry(object, prop, '=', value, ';')\n      },\n      toString: function () {\n        return entryToString() + exitToString()\n      }\n    })\n  }\n\n  function conditional () {\n    var pred = join(arguments)\n    var thenBlock = scope()\n    var elseBlock = scope()\n\n    var thenToString = thenBlock.toString\n    var elseToString = elseBlock.toString\n\n    return extend(thenBlock, {\n      then: function () {\n        thenBlock.apply(thenBlock, slice(arguments))\n        return this\n      },\n      else: function () {\n        elseBlock.apply(elseBlock, slice(arguments))\n        return this\n      },\n      toString: function () {\n        var elseClause = elseToString()\n        if (elseClause) {\n          elseClause = 'else{' + elseClause + '}'\n        }\n        return join([\n          'if(', pred, '){',\n          thenToString(),\n          '}', elseClause\n        ])\n      }\n    })\n  }\n\n  // procedure list\n  var globalBlock = block()\n  var procedures = {}\n  function proc (name, count) {\n    var args = []\n    function arg () {\n      var name = 'a' + args.length\n      args.push(name)\n      return name\n    }\n\n    count = count || 0\n    for (var i = 0; i < count; ++i) {\n      arg()\n    }\n\n    var body = scope()\n    var bodyToString = body.toString\n\n    var result = procedures[name] = extend(body, {\n      arg: arg,\n      toString: function () {\n        return join([\n          'function(', args.join(), '){',\n          bodyToString(),\n          '}'\n        ])\n      }\n    })\n\n    return result\n  }\n\n  function compile () {\n    var code = ['\"use strict\";',\n      globalBlock,\n      'return {']\n    Object.keys(procedures).forEach(function (name) {\n      code.push('\"', name, '\":', procedures[name].toString(), ',')\n    })\n    code.push('}')\n    var src = join(code)\n      .replace(/;/g, ';\\n')\n      .replace(/}/g, '}\\n')\n      .replace(/{/g, '{\\n')\n    var proc = Function.apply(null, linkedNames.concat(src))\n    return proc.apply(null, linkedValues)\n  }\n\n  return {\n    global: globalBlock,\n    link: link,\n    block: block,\n    proc: proc,\n    scope: scope,\n    cond: conditional,\n    compile: compile\n  }\n}\n\n// \"cute\" names for vector components\nvar CUTE_COMPONENTS = 'xyzw'.split('')\n\nvar GL_UNSIGNED_BYTE$8 = 5121\n\nvar ATTRIB_STATE_POINTER = 1\nvar ATTRIB_STATE_CONSTANT = 2\n\nvar DYN_FUNC$1 = 0\nvar DYN_PROP$1 = 1\nvar DYN_CONTEXT$1 = 2\nvar DYN_STATE$1 = 3\nvar DYN_THUNK = 4\nvar DYN_CONSTANT$1 = 5\nvar DYN_ARRAY$1 = 6\n\nvar S_DITHER = 'dither'\nvar S_BLEND_ENABLE = 'blend.enable'\nvar S_BLEND_COLOR = 'blend.color'\nvar S_BLEND_EQUATION = 'blend.equation'\nvar S_BLEND_FUNC = 'blend.func'\nvar S_DEPTH_ENABLE = 'depth.enable'\nvar S_DEPTH_FUNC = 'depth.func'\nvar S_DEPTH_RANGE = 'depth.range'\nvar S_DEPTH_MASK = 'depth.mask'\nvar S_COLOR_MASK = 'colorMask'\nvar S_CULL_ENABLE = 'cull.enable'\nvar S_CULL_FACE = 'cull.face'\nvar S_FRONT_FACE = 'frontFace'\nvar S_LINE_WIDTH = 'lineWidth'\nvar S_POLYGON_OFFSET_ENABLE = 'polygonOffset.enable'\nvar S_POLYGON_OFFSET_OFFSET = 'polygonOffset.offset'\nvar S_SAMPLE_ALPHA = 'sample.alpha'\nvar S_SAMPLE_ENABLE = 'sample.enable'\nvar S_SAMPLE_COVERAGE = 'sample.coverage'\nvar S_STENCIL_ENABLE = 'stencil.enable'\nvar S_STENCIL_MASK = 'stencil.mask'\nvar S_STENCIL_FUNC = 'stencil.func'\nvar S_STENCIL_OPFRONT = 'stencil.opFront'\nvar S_STENCIL_OPBACK = 'stencil.opBack'\nvar S_SCISSOR_ENABLE = 'scissor.enable'\nvar S_SCISSOR_BOX = 'scissor.box'\nvar S_VIEWPORT = 'viewport'\n\nvar S_PROFILE = 'profile'\n\nvar S_FRAMEBUFFER = 'framebuffer'\nvar S_VERT = 'vert'\nvar S_FRAG = 'frag'\nvar S_ELEMENTS = 'elements'\nvar S_PRIMITIVE = 'primitive'\nvar S_COUNT = 'count'\nvar S_OFFSET = 'offset'\nvar S_INSTANCES = 'instances'\nvar S_VAO = 'vao'\n\nvar SUFFIX_WIDTH = 'Width'\nvar SUFFIX_HEIGHT = 'Height'\n\nvar S_FRAMEBUFFER_WIDTH = S_FRAMEBUFFER + SUFFIX_WIDTH\nvar S_FRAMEBUFFER_HEIGHT = S_FRAMEBUFFER + SUFFIX_HEIGHT\nvar S_VIEWPORT_WIDTH = S_VIEWPORT + SUFFIX_WIDTH\nvar S_VIEWPORT_HEIGHT = S_VIEWPORT + SUFFIX_HEIGHT\nvar S_DRAWINGBUFFER = 'drawingBuffer'\nvar S_DRAWINGBUFFER_WIDTH = S_DRAWINGBUFFER + SUFFIX_WIDTH\nvar S_DRAWINGBUFFER_HEIGHT = S_DRAWINGBUFFER + SUFFIX_HEIGHT\n\nvar NESTED_OPTIONS = [\n  S_BLEND_FUNC,\n  S_BLEND_EQUATION,\n  S_STENCIL_FUNC,\n  S_STENCIL_OPFRONT,\n  S_STENCIL_OPBACK,\n  S_SAMPLE_COVERAGE,\n  S_VIEWPORT,\n  S_SCISSOR_BOX,\n  S_POLYGON_OFFSET_OFFSET\n]\n\nvar GL_ARRAY_BUFFER$2 = 34962\nvar GL_ELEMENT_ARRAY_BUFFER$1 = 34963\n\nvar GL_FRAGMENT_SHADER$1 = 35632\nvar GL_VERTEX_SHADER$1 = 35633\n\nvar GL_TEXTURE_2D$3 = 0x0DE1\nvar GL_TEXTURE_CUBE_MAP$2 = 0x8513\n\nvar GL_CULL_FACE = 0x0B44\nvar GL_BLEND = 0x0BE2\nvar GL_DITHER = 0x0BD0\nvar GL_STENCIL_TEST = 0x0B90\nvar GL_DEPTH_TEST = 0x0B71\nvar GL_SCISSOR_TEST = 0x0C11\nvar GL_POLYGON_OFFSET_FILL = 0x8037\nvar GL_SAMPLE_ALPHA_TO_COVERAGE = 0x809E\nvar GL_SAMPLE_COVERAGE = 0x80A0\n\nvar GL_FLOAT$8 = 5126\nvar GL_FLOAT_VEC2 = 35664\nvar GL_FLOAT_VEC3 = 35665\nvar GL_FLOAT_VEC4 = 35666\nvar GL_INT$3 = 5124\nvar GL_INT_VEC2 = 35667\nvar GL_INT_VEC3 = 35668\nvar GL_INT_VEC4 = 35669\nvar GL_BOOL = 35670\nvar GL_BOOL_VEC2 = 35671\nvar GL_BOOL_VEC3 = 35672\nvar GL_BOOL_VEC4 = 35673\nvar GL_FLOAT_MAT2 = 35674\nvar GL_FLOAT_MAT3 = 35675\nvar GL_FLOAT_MAT4 = 35676\nvar GL_SAMPLER_2D = 35678\nvar GL_SAMPLER_CUBE = 35680\n\nvar GL_TRIANGLES$1 = 4\n\nvar GL_FRONT = 1028\nvar GL_BACK = 1029\nvar GL_CW = 0x0900\nvar GL_CCW = 0x0901\nvar GL_MIN_EXT = 0x8007\nvar GL_MAX_EXT = 0x8008\nvar GL_ALWAYS = 519\nvar GL_KEEP = 7680\nvar GL_ZERO = 0\nvar GL_ONE = 1\nvar GL_FUNC_ADD = 0x8006\nvar GL_LESS = 513\n\nvar GL_FRAMEBUFFER$2 = 0x8D40\nvar GL_COLOR_ATTACHMENT0$2 = 0x8CE0\n\nvar blendFuncs = {\n  '0': 0,\n  '1': 1,\n  'zero': 0,\n  'one': 1,\n  'src color': 768,\n  'one minus src color': 769,\n  'src alpha': 770,\n  'one minus src alpha': 771,\n  'dst color': 774,\n  'one minus dst color': 775,\n  'dst alpha': 772,\n  'one minus dst alpha': 773,\n  'constant color': 32769,\n  'one minus constant color': 32770,\n  'constant alpha': 32771,\n  'one minus constant alpha': 32772,\n  'src alpha saturate': 776\n}\n\n// There are invalid values for srcRGB and dstRGB. See:\n// https://www.khronos.org/registry/webgl/specs/1.0/#6.13\n// https://github.com/KhronosGroup/WebGL/blob/0d3201f5f7ec3c0060bc1f04077461541f1987b9/conformance-suites/1.0.3/conformance/misc/webgl-specific.html#L56\nvar invalidBlendCombinations = [\n  'constant color, constant alpha',\n  'one minus constant color, constant alpha',\n  'constant color, one minus constant alpha',\n  'one minus constant color, one minus constant alpha',\n  'constant alpha, constant color',\n  'constant alpha, one minus constant color',\n  'one minus constant alpha, constant color',\n  'one minus constant alpha, one minus constant color'\n]\n\nvar compareFuncs = {\n  'never': 512,\n  'less': 513,\n  '<': 513,\n  'equal': 514,\n  '=': 514,\n  '==': 514,\n  '===': 514,\n  'lequal': 515,\n  '<=': 515,\n  'greater': 516,\n  '>': 516,\n  'notequal': 517,\n  '!=': 517,\n  '!==': 517,\n  'gequal': 518,\n  '>=': 518,\n  'always': 519\n}\n\nvar stencilOps = {\n  '0': 0,\n  'zero': 0,\n  'keep': 7680,\n  'replace': 7681,\n  'increment': 7682,\n  'decrement': 7683,\n  'increment wrap': 34055,\n  'decrement wrap': 34056,\n  'invert': 5386\n}\n\nvar shaderType = {\n  'frag': GL_FRAGMENT_SHADER$1,\n  'vert': GL_VERTEX_SHADER$1\n}\n\nvar orientationType = {\n  'cw': GL_CW,\n  'ccw': GL_CCW\n}\n\nfunction isBufferArgs (x) {\n  return Array.isArray(x) ||\n    isTypedArray(x) ||\n    isNDArrayLike(x)\n}\n\n// Make sure viewport is processed first\nfunction sortState (state) {\n  return state.sort(function (a, b) {\n    if (a === S_VIEWPORT) {\n      return -1\n    } else if (b === S_VIEWPORT) {\n      return 1\n    }\n    return (a < b) ? -1 : 1\n  })\n}\n\nfunction Declaration (thisDep, contextDep, propDep, append) {\n  this.thisDep = thisDep\n  this.contextDep = contextDep\n  this.propDep = propDep\n  this.append = append\n}\n\nfunction isStatic (decl) {\n  return decl && !(decl.thisDep || decl.contextDep || decl.propDep)\n}\n\nfunction createStaticDecl (append) {\n  return new Declaration(false, false, false, append)\n}\n\nfunction createDynamicDecl (dyn, append) {\n  var type = dyn.type\n  if (type === DYN_FUNC$1) {\n    var numArgs = dyn.data.length\n    return new Declaration(\n      true,\n      numArgs >= 1,\n      numArgs >= 2,\n      append)\n  } else if (type === DYN_THUNK) {\n    var data = dyn.data\n    return new Declaration(\n      data.thisDep,\n      data.contextDep,\n      data.propDep,\n      append)\n  } else if (type === DYN_CONSTANT$1) {\n    return new Declaration(\n      false,\n      false,\n      false,\n      append)\n  } else if (type === DYN_ARRAY$1) {\n    var thisDep = false\n    var contextDep = false\n    var propDep = false\n    for (var i = 0; i < dyn.data.length; ++i) {\n      var subDyn = dyn.data[i]\n      if (subDyn.type === DYN_PROP$1) {\n        propDep = true\n      } else if (subDyn.type === DYN_CONTEXT$1) {\n        contextDep = true\n      } else if (subDyn.type === DYN_STATE$1) {\n        thisDep = true\n      } else if (subDyn.type === DYN_FUNC$1) {\n        thisDep = true\n        var subArgs = subDyn.data\n        if (subArgs >= 1) {\n          contextDep = true\n        }\n        if (subArgs >= 2) {\n          propDep = true\n        }\n      } else if (subDyn.type === DYN_THUNK) {\n        thisDep = thisDep || subDyn.data.thisDep\n        contextDep = contextDep || subDyn.data.contextDep\n        propDep = propDep || subDyn.data.propDep\n      }\n    }\n    return new Declaration(\n      thisDep,\n      contextDep,\n      propDep,\n      append)\n  } else {\n    return new Declaration(\n      type === DYN_STATE$1,\n      type === DYN_CONTEXT$1,\n      type === DYN_PROP$1,\n      append)\n  }\n}\n\nvar SCOPE_DECL = new Declaration(false, false, false, function () {})\n\nfunction reglCore (\n  gl,\n  stringStore,\n  extensions,\n  limits,\n  bufferState,\n  elementState,\n  textureState,\n  framebufferState,\n  uniformState,\n  attributeState,\n  shaderState,\n  drawState,\n  contextState,\n  timer,\n  config) {\n  var AttributeRecord = attributeState.Record\n\n  var blendEquations = {\n    'add': 32774,\n    'subtract': 32778,\n    'reverse subtract': 32779\n  }\n  if (extensions.ext_blend_minmax) {\n    blendEquations.min = GL_MIN_EXT\n    blendEquations.max = GL_MAX_EXT\n  }\n\n  var extInstancing = extensions.angle_instanced_arrays\n  var extDrawBuffers = extensions.webgl_draw_buffers\n\n  // ===================================================\n  // ===================================================\n  // WEBGL STATE\n  // ===================================================\n  // ===================================================\n  var currentState = {\n    dirty: true,\n    profile: config.profile\n  }\n  var nextState = {}\n  var GL_STATE_NAMES = []\n  var GL_FLAGS = {}\n  var GL_VARIABLES = {}\n\n  function propName (name) {\n    return name.replace('.', '_')\n  }\n\n  function stateFlag (sname, cap, init) {\n    var name = propName(sname)\n    GL_STATE_NAMES.push(sname)\n    nextState[name] = currentState[name] = !!init\n    GL_FLAGS[name] = cap\n  }\n\n  function stateVariable (sname, func, init) {\n    var name = propName(sname)\n    GL_STATE_NAMES.push(sname)\n    if (Array.isArray(init)) {\n      currentState[name] = init.slice()\n      nextState[name] = init.slice()\n    } else {\n      currentState[name] = nextState[name] = init\n    }\n    GL_VARIABLES[name] = func\n  }\n\n  // Dithering\n  stateFlag(S_DITHER, GL_DITHER)\n\n  // Blending\n  stateFlag(S_BLEND_ENABLE, GL_BLEND)\n  stateVariable(S_BLEND_COLOR, 'blendColor', [0, 0, 0, 0])\n  stateVariable(S_BLEND_EQUATION, 'blendEquationSeparate',\n    [GL_FUNC_ADD, GL_FUNC_ADD])\n  stateVariable(S_BLEND_FUNC, 'blendFuncSeparate',\n    [GL_ONE, GL_ZERO, GL_ONE, GL_ZERO])\n\n  // Depth\n  stateFlag(S_DEPTH_ENABLE, GL_DEPTH_TEST, true)\n  stateVariable(S_DEPTH_FUNC, 'depthFunc', GL_LESS)\n  stateVariable(S_DEPTH_RANGE, 'depthRange', [0, 1])\n  stateVariable(S_DEPTH_MASK, 'depthMask', true)\n\n  // Color mask\n  stateVariable(S_COLOR_MASK, S_COLOR_MASK, [true, true, true, true])\n\n  // Face culling\n  stateFlag(S_CULL_ENABLE, GL_CULL_FACE)\n  stateVariable(S_CULL_FACE, 'cullFace', GL_BACK)\n\n  // Front face orientation\n  stateVariable(S_FRONT_FACE, S_FRONT_FACE, GL_CCW)\n\n  // Line width\n  stateVariable(S_LINE_WIDTH, S_LINE_WIDTH, 1)\n\n  // Polygon offset\n  stateFlag(S_POLYGON_OFFSET_ENABLE, GL_POLYGON_OFFSET_FILL)\n  stateVariable(S_POLYGON_OFFSET_OFFSET, 'polygonOffset', [0, 0])\n\n  // Sample coverage\n  stateFlag(S_SAMPLE_ALPHA, GL_SAMPLE_ALPHA_TO_COVERAGE)\n  stateFlag(S_SAMPLE_ENABLE, GL_SAMPLE_COVERAGE)\n  stateVariable(S_SAMPLE_COVERAGE, 'sampleCoverage', [1, false])\n\n  // Stencil\n  stateFlag(S_STENCIL_ENABLE, GL_STENCIL_TEST)\n  stateVariable(S_STENCIL_MASK, 'stencilMask', -1)\n  stateVariable(S_STENCIL_FUNC, 'stencilFunc', [GL_ALWAYS, 0, -1])\n  stateVariable(S_STENCIL_OPFRONT, 'stencilOpSeparate',\n    [GL_FRONT, GL_KEEP, GL_KEEP, GL_KEEP])\n  stateVariable(S_STENCIL_OPBACK, 'stencilOpSeparate',\n    [GL_BACK, GL_KEEP, GL_KEEP, GL_KEEP])\n\n  // Scissor\n  stateFlag(S_SCISSOR_ENABLE, GL_SCISSOR_TEST)\n  stateVariable(S_SCISSOR_BOX, 'scissor',\n    [0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight])\n\n  // Viewport\n  stateVariable(S_VIEWPORT, S_VIEWPORT,\n    [0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight])\n\n  // ===================================================\n  // ===================================================\n  // ENVIRONMENT\n  // ===================================================\n  // ===================================================\n  var sharedState = {\n    gl: gl,\n    context: contextState,\n    strings: stringStore,\n    next: nextState,\n    current: currentState,\n    draw: drawState,\n    elements: elementState,\n    buffer: bufferState,\n    shader: shaderState,\n    attributes: attributeState.state,\n    vao: attributeState,\n    uniforms: uniformState,\n    framebuffer: framebufferState,\n    extensions: extensions,\n\n    timer: timer,\n    isBufferArgs: isBufferArgs\n  }\n\n  var sharedConstants = {\n    primTypes: primTypes,\n    compareFuncs: compareFuncs,\n    blendFuncs: blendFuncs,\n    blendEquations: blendEquations,\n    stencilOps: stencilOps,\n    glTypes: glTypes,\n    orientationType: orientationType\n  }\n\n  check$1.optional(function () {\n    sharedState.isArrayLike = isArrayLike\n  })\n\n  if (extDrawBuffers) {\n    sharedConstants.backBuffer = [GL_BACK]\n    sharedConstants.drawBuffer = loop(limits.maxDrawbuffers, function (i) {\n      if (i === 0) {\n        return [0]\n      }\n      return loop(i, function (j) {\n        return GL_COLOR_ATTACHMENT0$2 + j\n      })\n    })\n  }\n\n  var drawCallCounter = 0\n  function createREGLEnvironment () {\n    var env = createEnvironment()\n    var link = env.link\n    var global = env.global\n    env.id = drawCallCounter++\n\n    env.batchId = '0'\n\n    // link shared state\n    var SHARED = link(sharedState)\n    var shared = env.shared = {\n      props: 'a0'\n    }\n    Object.keys(sharedState).forEach(function (prop) {\n      shared[prop] = global.def(SHARED, '.', prop)\n    })\n\n    // Inject runtime assertion stuff for debug builds\n    check$1.optional(function () {\n      env.CHECK = link(check$1)\n      env.commandStr = check$1.guessCommand()\n      env.command = link(env.commandStr)\n      env.assert = function (block, pred, message) {\n        block(\n          'if(!(', pred, '))',\n          this.CHECK, '.commandRaise(', link(message), ',', this.command, ');')\n      }\n\n      sharedConstants.invalidBlendCombinations = invalidBlendCombinations\n    })\n\n    // Copy GL state variables over\n    var nextVars = env.next = {}\n    var currentVars = env.current = {}\n    Object.keys(GL_VARIABLES).forEach(function (variable) {\n      if (Array.isArray(currentState[variable])) {\n        nextVars[variable] = global.def(shared.next, '.', variable)\n        currentVars[variable] = global.def(shared.current, '.', variable)\n      }\n    })\n\n    // Initialize shared constants\n    var constants = env.constants = {}\n    Object.keys(sharedConstants).forEach(function (name) {\n      constants[name] = global.def(JSON.stringify(sharedConstants[name]))\n    })\n\n    // Helper function for calling a block\n    env.invoke = function (block, x) {\n      switch (x.type) {\n        case DYN_FUNC$1:\n          var argList = [\n            'this',\n            shared.context,\n            shared.props,\n            env.batchId\n          ]\n          return block.def(\n            link(x.data), '.call(',\n            argList.slice(0, Math.max(x.data.length + 1, 4)),\n            ')')\n        case DYN_PROP$1:\n          return block.def(shared.props, x.data)\n        case DYN_CONTEXT$1:\n          return block.def(shared.context, x.data)\n        case DYN_STATE$1:\n          return block.def('this', x.data)\n        case DYN_THUNK:\n          x.data.append(env, block)\n          return x.data.ref\n        case DYN_CONSTANT$1:\n          return x.data.toString()\n        case DYN_ARRAY$1:\n          return x.data.map(function (y) {\n            return env.invoke(block, y)\n          })\n      }\n    }\n\n    env.attribCache = {}\n\n    var scopeAttribs = {}\n    env.scopeAttrib = function (name) {\n      var id = stringStore.id(name)\n      if (id in scopeAttribs) {\n        return scopeAttribs[id]\n      }\n      var binding = attributeState.scope[id]\n      if (!binding) {\n        binding = attributeState.scope[id] = new AttributeRecord()\n      }\n      var result = scopeAttribs[id] = link(binding)\n      return result\n    }\n\n    return env\n  }\n\n  // ===================================================\n  // ===================================================\n  // PARSING\n  // ===================================================\n  // ===================================================\n  function parseProfile (options) {\n    var staticOptions = options.static\n    var dynamicOptions = options.dynamic\n\n    var profileEnable\n    if (S_PROFILE in staticOptions) {\n      var value = !!staticOptions[S_PROFILE]\n      profileEnable = createStaticDecl(function (env, scope) {\n        return value\n      })\n      profileEnable.enable = value\n    } else if (S_PROFILE in dynamicOptions) {\n      var dyn = dynamicOptions[S_PROFILE]\n      profileEnable = createDynamicDecl(dyn, function (env, scope) {\n        return env.invoke(scope, dyn)\n      })\n    }\n\n    return profileEnable\n  }\n\n  function parseFramebuffer (options, env) {\n    var staticOptions = options.static\n    var dynamicOptions = options.dynamic\n\n    if (S_FRAMEBUFFER in staticOptions) {\n      var framebuffer = staticOptions[S_FRAMEBUFFER]\n      if (framebuffer) {\n        framebuffer = framebufferState.getFramebuffer(framebuffer)\n        check$1.command(framebuffer, 'invalid framebuffer object')\n        return createStaticDecl(function (env, block) {\n          var FRAMEBUFFER = env.link(framebuffer)\n          var shared = env.shared\n          block.set(\n            shared.framebuffer,\n            '.next',\n            FRAMEBUFFER)\n          var CONTEXT = shared.context\n          block.set(\n            CONTEXT,\n            '.' + S_FRAMEBUFFER_WIDTH,\n            FRAMEBUFFER + '.width')\n          block.set(\n            CONTEXT,\n            '.' + S_FRAMEBUFFER_HEIGHT,\n            FRAMEBUFFER + '.height')\n          return FRAMEBUFFER\n        })\n      } else {\n        return createStaticDecl(function (env, scope) {\n          var shared = env.shared\n          scope.set(\n            shared.framebuffer,\n            '.next',\n            'null')\n          var CONTEXT = shared.context\n          scope.set(\n            CONTEXT,\n            '.' + S_FRAMEBUFFER_WIDTH,\n            CONTEXT + '.' + S_DRAWINGBUFFER_WIDTH)\n          scope.set(\n            CONTEXT,\n            '.' + S_FRAMEBUFFER_HEIGHT,\n            CONTEXT + '.' + S_DRAWINGBUFFER_HEIGHT)\n          return 'null'\n        })\n      }\n    } else if (S_FRAMEBUFFER in dynamicOptions) {\n      var dyn = dynamicOptions[S_FRAMEBUFFER]\n      return createDynamicDecl(dyn, function (env, scope) {\n        var FRAMEBUFFER_FUNC = env.invoke(scope, dyn)\n        var shared = env.shared\n        var FRAMEBUFFER_STATE = shared.framebuffer\n        var FRAMEBUFFER = scope.def(\n          FRAMEBUFFER_STATE, '.getFramebuffer(', FRAMEBUFFER_FUNC, ')')\n\n        check$1.optional(function () {\n          env.assert(scope,\n            '!' + FRAMEBUFFER_FUNC + '||' + FRAMEBUFFER,\n            'invalid framebuffer object')\n        })\n\n        scope.set(\n          FRAMEBUFFER_STATE,\n          '.next',\n          FRAMEBUFFER)\n        var CONTEXT = shared.context\n        scope.set(\n          CONTEXT,\n          '.' + S_FRAMEBUFFER_WIDTH,\n          FRAMEBUFFER + '?' + FRAMEBUFFER + '.width:' +\n          CONTEXT + '.' + S_DRAWINGBUFFER_WIDTH)\n        scope.set(\n          CONTEXT,\n          '.' + S_FRAMEBUFFER_HEIGHT,\n          FRAMEBUFFER +\n          '?' + FRAMEBUFFER + '.height:' +\n          CONTEXT + '.' + S_DRAWINGBUFFER_HEIGHT)\n        return FRAMEBUFFER\n      })\n    } else {\n      return null\n    }\n  }\n\n  function parseViewportScissor (options, framebuffer, env) {\n    var staticOptions = options.static\n    var dynamicOptions = options.dynamic\n\n    function parseBox (param) {\n      if (param in staticOptions) {\n        var box = staticOptions[param]\n        check$1.commandType(box, 'object', 'invalid ' + param, env.commandStr)\n\n        var isStatic = true\n        var x = box.x | 0\n        var y = box.y | 0\n        var w, h\n        if ('width' in box) {\n          w = box.width | 0\n          check$1.command(w >= 0, 'invalid ' + param, env.commandStr)\n        } else {\n          isStatic = false\n        }\n        if ('height' in box) {\n          h = box.height | 0\n          check$1.command(h >= 0, 'invalid ' + param, env.commandStr)\n        } else {\n          isStatic = false\n        }\n\n        return new Declaration(\n          !isStatic && framebuffer && framebuffer.thisDep,\n          !isStatic && framebuffer && framebuffer.contextDep,\n          !isStatic && framebuffer && framebuffer.propDep,\n          function (env, scope) {\n            var CONTEXT = env.shared.context\n            var BOX_W = w\n            if (!('width' in box)) {\n              BOX_W = scope.def(CONTEXT, '.', S_FRAMEBUFFER_WIDTH, '-', x)\n            }\n            var BOX_H = h\n            if (!('height' in box)) {\n              BOX_H = scope.def(CONTEXT, '.', S_FRAMEBUFFER_HEIGHT, '-', y)\n            }\n            return [x, y, BOX_W, BOX_H]\n          })\n      } else if (param in dynamicOptions) {\n        var dynBox = dynamicOptions[param]\n        var result = createDynamicDecl(dynBox, function (env, scope) {\n          var BOX = env.invoke(scope, dynBox)\n\n          check$1.optional(function () {\n            env.assert(scope,\n              BOX + '&&typeof ' + BOX + '===\"object\"',\n              'invalid ' + param)\n          })\n\n          var CONTEXT = env.shared.context\n          var BOX_X = scope.def(BOX, '.x|0')\n          var BOX_Y = scope.def(BOX, '.y|0')\n          var BOX_W = scope.def(\n            '\"width\" in ', BOX, '?', BOX, '.width|0:',\n            '(', CONTEXT, '.', S_FRAMEBUFFER_WIDTH, '-', BOX_X, ')')\n          var BOX_H = scope.def(\n            '\"height\" in ', BOX, '?', BOX, '.height|0:',\n            '(', CONTEXT, '.', S_FRAMEBUFFER_HEIGHT, '-', BOX_Y, ')')\n\n          check$1.optional(function () {\n            env.assert(scope,\n              BOX_W + '>=0&&' +\n              BOX_H + '>=0',\n              'invalid ' + param)\n          })\n\n          return [BOX_X, BOX_Y, BOX_W, BOX_H]\n        })\n        if (framebuffer) {\n          result.thisDep = result.thisDep || framebuffer.thisDep\n          result.contextDep = result.contextDep || framebuffer.contextDep\n          result.propDep = result.propDep || framebuffer.propDep\n        }\n        return result\n      } else if (framebuffer) {\n        return new Declaration(\n          framebuffer.thisDep,\n          framebuffer.contextDep,\n          framebuffer.propDep,\n          function (env, scope) {\n            var CONTEXT = env.shared.context\n            return [\n              0, 0,\n              scope.def(CONTEXT, '.', S_FRAMEBUFFER_WIDTH),\n              scope.def(CONTEXT, '.', S_FRAMEBUFFER_HEIGHT)]\n          })\n      } else {\n        return null\n      }\n    }\n\n    var viewport = parseBox(S_VIEWPORT)\n\n    if (viewport) {\n      var prevViewport = viewport\n      viewport = new Declaration(\n        viewport.thisDep,\n        viewport.contextDep,\n        viewport.propDep,\n        function (env, scope) {\n          var VIEWPORT = prevViewport.append(env, scope)\n          var CONTEXT = env.shared.context\n          scope.set(\n            CONTEXT,\n            '.' + S_VIEWPORT_WIDTH,\n            VIEWPORT[2])\n          scope.set(\n            CONTEXT,\n            '.' + S_VIEWPORT_HEIGHT,\n            VIEWPORT[3])\n          return VIEWPORT\n        })\n    }\n\n    return {\n      viewport: viewport,\n      scissor_box: parseBox(S_SCISSOR_BOX)\n    }\n  }\n\n  function parseAttribLocations (options, attributes) {\n    var staticOptions = options.static\n    var staticProgram =\n      typeof staticOptions[S_FRAG] === 'string' &&\n      typeof staticOptions[S_VERT] === 'string'\n    if (staticProgram) {\n      if (Object.keys(attributes.dynamic).length > 0) {\n        return null\n      }\n      var staticAttributes = attributes.static\n      var sAttributes = Object.keys(staticAttributes)\n      if (sAttributes.length > 0 && typeof staticAttributes[sAttributes[0]] === 'number') {\n        var bindings = []\n        for (var i = 0; i < sAttributes.length; ++i) {\n          check$1(typeof staticAttributes[sAttributes[i]] === 'number', 'must specify all vertex attribute locations when using vaos')\n          bindings.push([staticAttributes[sAttributes[i]] | 0, sAttributes[i]])\n        }\n        return bindings\n      }\n    }\n    return null\n  }\n\n  function parseProgram (options, env, attribLocations) {\n    var staticOptions = options.static\n    var dynamicOptions = options.dynamic\n\n    function parseShader (name) {\n      if (name in staticOptions) {\n        var id = stringStore.id(staticOptions[name])\n        check$1.optional(function () {\n          shaderState.shader(shaderType[name], id, check$1.guessCommand())\n        })\n        var result = createStaticDecl(function () {\n          return id\n        })\n        result.id = id\n        return result\n      } else if (name in dynamicOptions) {\n        var dyn = dynamicOptions[name]\n        return createDynamicDecl(dyn, function (env, scope) {\n          var str = env.invoke(scope, dyn)\n          var id = scope.def(env.shared.strings, '.id(', str, ')')\n          check$1.optional(function () {\n            scope(\n              env.shared.shader, '.shader(',\n              shaderType[name], ',',\n              id, ',',\n              env.command, ');')\n          })\n          return id\n        })\n      }\n      return null\n    }\n\n    var frag = parseShader(S_FRAG)\n    var vert = parseShader(S_VERT)\n\n    var program = null\n    var progVar\n    if (isStatic(frag) && isStatic(vert)) {\n      program = shaderState.program(vert.id, frag.id, null, attribLocations)\n      progVar = createStaticDecl(function (env, scope) {\n        return env.link(program)\n      })\n    } else {\n      progVar = new Declaration(\n        (frag && frag.thisDep) || (vert && vert.thisDep),\n        (frag && frag.contextDep) || (vert && vert.contextDep),\n        (frag && frag.propDep) || (vert && vert.propDep),\n        function (env, scope) {\n          var SHADER_STATE = env.shared.shader\n          var fragId\n          if (frag) {\n            fragId = frag.append(env, scope)\n          } else {\n            fragId = scope.def(SHADER_STATE, '.', S_FRAG)\n          }\n          var vertId\n          if (vert) {\n            vertId = vert.append(env, scope)\n          } else {\n            vertId = scope.def(SHADER_STATE, '.', S_VERT)\n          }\n          var progDef = SHADER_STATE + '.program(' + vertId + ',' + fragId\n          check$1.optional(function () {\n            progDef += ',' + env.command\n          })\n          return scope.def(progDef + ')')\n        })\n    }\n\n    return {\n      frag: frag,\n      vert: vert,\n      progVar: progVar,\n      program: program\n    }\n  }\n\n  function parseDraw (options, env) {\n    var staticOptions = options.static\n    var dynamicOptions = options.dynamic\n\n    function parseElements () {\n      if (S_ELEMENTS in staticOptions) {\n        var elements = staticOptions[S_ELEMENTS]\n        if (isBufferArgs(elements)) {\n          elements = elementState.getElements(elementState.create(elements, true))\n        } else if (elements) {\n          elements = elementState.getElements(elements)\n          check$1.command(elements, 'invalid elements', env.commandStr)\n        }\n        var result = createStaticDecl(function (env, scope) {\n          if (elements) {\n            var result = env.link(elements)\n            env.ELEMENTS = result\n            return result\n          }\n          env.ELEMENTS = null\n          return null\n        })\n        result.value = elements\n        return result\n      } else if (S_ELEMENTS in dynamicOptions) {\n        var dyn = dynamicOptions[S_ELEMENTS]\n        return createDynamicDecl(dyn, function (env, scope) {\n          var shared = env.shared\n\n          var IS_BUFFER_ARGS = shared.isBufferArgs\n          var ELEMENT_STATE = shared.elements\n\n          var elementDefn = env.invoke(scope, dyn)\n          var elements = scope.def('null')\n          var elementStream = scope.def(IS_BUFFER_ARGS, '(', elementDefn, ')')\n\n          var ifte = env.cond(elementStream)\n            .then(elements, '=', ELEMENT_STATE, '.createStream(', elementDefn, ');')\n            .else(elements, '=', ELEMENT_STATE, '.getElements(', elementDefn, ');')\n\n          check$1.optional(function () {\n            env.assert(ifte.else,\n              '!' + elementDefn + '||' + elements,\n              'invalid elements')\n          })\n\n          scope.entry(ifte)\n          scope.exit(\n            env.cond(elementStream)\n              .then(ELEMENT_STATE, '.destroyStream(', elements, ');'))\n\n          env.ELEMENTS = elements\n\n          return elements\n        })\n      }\n\n      return null\n    }\n\n    var elements = parseElements()\n\n    function parsePrimitive () {\n      if (S_PRIMITIVE in staticOptions) {\n        var primitive = staticOptions[S_PRIMITIVE]\n        check$1.commandParameter(primitive, primTypes, 'invalid primitve', env.commandStr)\n        return createStaticDecl(function (env, scope) {\n          return primTypes[primitive]\n        })\n      } else if (S_PRIMITIVE in dynamicOptions) {\n        var dynPrimitive = dynamicOptions[S_PRIMITIVE]\n        return createDynamicDecl(dynPrimitive, function (env, scope) {\n          var PRIM_TYPES = env.constants.primTypes\n          var prim = env.invoke(scope, dynPrimitive)\n          check$1.optional(function () {\n            env.assert(scope,\n              prim + ' in ' + PRIM_TYPES,\n              'invalid primitive, must be one of ' + Object.keys(primTypes))\n          })\n          return scope.def(PRIM_TYPES, '[', prim, ']')\n        })\n      } else if (elements) {\n        if (isStatic(elements)) {\n          if (elements.value) {\n            return createStaticDecl(function (env, scope) {\n              return scope.def(env.ELEMENTS, '.primType')\n            })\n          } else {\n            return createStaticDecl(function () {\n              return GL_TRIANGLES$1\n            })\n          }\n        } else {\n          return new Declaration(\n            elements.thisDep,\n            elements.contextDep,\n            elements.propDep,\n            function (env, scope) {\n              var elements = env.ELEMENTS\n              return scope.def(elements, '?', elements, '.primType:', GL_TRIANGLES$1)\n            })\n        }\n      }\n      return null\n    }\n\n    function parseParam (param, isOffset) {\n      if (param in staticOptions) {\n        var value = staticOptions[param] | 0\n        check$1.command(!isOffset || value >= 0, 'invalid ' + param, env.commandStr)\n        return createStaticDecl(function (env, scope) {\n          if (isOffset) {\n            env.OFFSET = value\n          }\n          return value\n        })\n      } else if (param in dynamicOptions) {\n        var dynValue = dynamicOptions[param]\n        return createDynamicDecl(dynValue, function (env, scope) {\n          var result = env.invoke(scope, dynValue)\n          if (isOffset) {\n            env.OFFSET = result\n            check$1.optional(function () {\n              env.assert(scope,\n                result + '>=0',\n                'invalid ' + param)\n            })\n          }\n          return result\n        })\n      } else if (isOffset && elements) {\n        return createStaticDecl(function (env, scope) {\n          env.OFFSET = '0'\n          return 0\n        })\n      }\n      return null\n    }\n\n    var OFFSET = parseParam(S_OFFSET, true)\n\n    function parseVertCount () {\n      if (S_COUNT in staticOptions) {\n        var count = staticOptions[S_COUNT] | 0\n        check$1.command(\n          typeof count === 'number' && count >= 0, 'invalid vertex count', env.commandStr)\n        return createStaticDecl(function () {\n          return count\n        })\n      } else if (S_COUNT in dynamicOptions) {\n        var dynCount = dynamicOptions[S_COUNT]\n        return createDynamicDecl(dynCount, function (env, scope) {\n          var result = env.invoke(scope, dynCount)\n          check$1.optional(function () {\n            env.assert(scope,\n              'typeof ' + result + '===\"number\"&&' +\n              result + '>=0&&' +\n              result + '===(' + result + '|0)',\n              'invalid vertex count')\n          })\n          return result\n        })\n      } else if (elements) {\n        if (isStatic(elements)) {\n          if (elements) {\n            if (OFFSET) {\n              return new Declaration(\n                OFFSET.thisDep,\n                OFFSET.contextDep,\n                OFFSET.propDep,\n                function (env, scope) {\n                  var result = scope.def(\n                    env.ELEMENTS, '.vertCount-', env.OFFSET)\n\n                  check$1.optional(function () {\n                    env.assert(scope,\n                      result + '>=0',\n                      'invalid vertex offset/element buffer too small')\n                  })\n\n                  return result\n                })\n            } else {\n              return createStaticDecl(function (env, scope) {\n                return scope.def(env.ELEMENTS, '.vertCount')\n              })\n            }\n          } else {\n            var result = createStaticDecl(function () {\n              return -1\n            })\n            check$1.optional(function () {\n              result.MISSING = true\n            })\n            return result\n          }\n        } else {\n          var variable = new Declaration(\n            elements.thisDep || OFFSET.thisDep,\n            elements.contextDep || OFFSET.contextDep,\n            elements.propDep || OFFSET.propDep,\n            function (env, scope) {\n              var elements = env.ELEMENTS\n              if (env.OFFSET) {\n                return scope.def(elements, '?', elements, '.vertCount-',\n                  env.OFFSET, ':-1')\n              }\n              return scope.def(elements, '?', elements, '.vertCount:-1')\n            })\n          check$1.optional(function () {\n            variable.DYNAMIC = true\n          })\n          return variable\n        }\n      }\n      return null\n    }\n\n    return {\n      elements: elements,\n      primitive: parsePrimitive(),\n      count: parseVertCount(),\n      instances: parseParam(S_INSTANCES, false),\n      offset: OFFSET\n    }\n  }\n\n  function parseGLState (options, env) {\n    var staticOptions = options.static\n    var dynamicOptions = options.dynamic\n\n    var STATE = {}\n\n    GL_STATE_NAMES.forEach(function (prop) {\n      var param = propName(prop)\n\n      function parseParam (parseStatic, parseDynamic) {\n        if (prop in staticOptions) {\n          var value = parseStatic(staticOptions[prop])\n          STATE[param] = createStaticDecl(function () {\n            return value\n          })\n        } else if (prop in dynamicOptions) {\n          var dyn = dynamicOptions[prop]\n          STATE[param] = createDynamicDecl(dyn, function (env, scope) {\n            return parseDynamic(env, scope, env.invoke(scope, dyn))\n          })\n        }\n      }\n\n      switch (prop) {\n        case S_CULL_ENABLE:\n        case S_BLEND_ENABLE:\n        case S_DITHER:\n        case S_STENCIL_ENABLE:\n        case S_DEPTH_ENABLE:\n        case S_SCISSOR_ENABLE:\n        case S_POLYGON_OFFSET_ENABLE:\n        case S_SAMPLE_ALPHA:\n        case S_SAMPLE_ENABLE:\n        case S_DEPTH_MASK:\n          return parseParam(\n            function (value) {\n              check$1.commandType(value, 'boolean', prop, env.commandStr)\n              return value\n            },\n            function (env, scope, value) {\n              check$1.optional(function () {\n                env.assert(scope,\n                  'typeof ' + value + '===\"boolean\"',\n                  'invalid flag ' + prop, env.commandStr)\n              })\n              return value\n            })\n\n        case S_DEPTH_FUNC:\n          return parseParam(\n            function (value) {\n              check$1.commandParameter(value, compareFuncs, 'invalid ' + prop, env.commandStr)\n              return compareFuncs[value]\n            },\n            function (env, scope, value) {\n              var COMPARE_FUNCS = env.constants.compareFuncs\n              check$1.optional(function () {\n                env.assert(scope,\n                  value + ' in ' + COMPARE_FUNCS,\n                  'invalid ' + prop + ', must be one of ' + Object.keys(compareFuncs))\n              })\n              return scope.def(COMPARE_FUNCS, '[', value, ']')\n            })\n\n        case S_DEPTH_RANGE:\n          return parseParam(\n            function (value) {\n              check$1.command(\n                isArrayLike(value) &&\n                value.length === 2 &&\n                typeof value[0] === 'number' &&\n                typeof value[1] === 'number' &&\n                value[0] <= value[1],\n                'depth range is 2d array',\n                env.commandStr)\n              return value\n            },\n            function (env, scope, value) {\n              check$1.optional(function () {\n                env.assert(scope,\n                  env.shared.isArrayLike + '(' + value + ')&&' +\n                  value + '.length===2&&' +\n                  'typeof ' + value + '[0]===\"number\"&&' +\n                  'typeof ' + value + '[1]===\"number\"&&' +\n                  value + '[0]<=' + value + '[1]',\n                  'depth range must be a 2d array')\n              })\n\n              var Z_NEAR = scope.def('+', value, '[0]')\n              var Z_FAR = scope.def('+', value, '[1]')\n              return [Z_NEAR, Z_FAR]\n            })\n\n        case S_BLEND_FUNC:\n          return parseParam(\n            function (value) {\n              check$1.commandType(value, 'object', 'blend.func', env.commandStr)\n              var srcRGB = ('srcRGB' in value ? value.srcRGB : value.src)\n              var srcAlpha = ('srcAlpha' in value ? value.srcAlpha : value.src)\n              var dstRGB = ('dstRGB' in value ? value.dstRGB : value.dst)\n              var dstAlpha = ('dstAlpha' in value ? value.dstAlpha : value.dst)\n              check$1.commandParameter(srcRGB, blendFuncs, param + '.srcRGB', env.commandStr)\n              check$1.commandParameter(srcAlpha, blendFuncs, param + '.srcAlpha', env.commandStr)\n              check$1.commandParameter(dstRGB, blendFuncs, param + '.dstRGB', env.commandStr)\n              check$1.commandParameter(dstAlpha, blendFuncs, param + '.dstAlpha', env.commandStr)\n\n              check$1.command(\n                (invalidBlendCombinations.indexOf(srcRGB + ', ' + dstRGB) === -1),\n                'unallowed blending combination (srcRGB, dstRGB) = (' + srcRGB + ', ' + dstRGB + ')', env.commandStr)\n\n              return [\n                blendFuncs[srcRGB],\n                blendFuncs[dstRGB],\n                blendFuncs[srcAlpha],\n                blendFuncs[dstAlpha]\n              ]\n            },\n            function (env, scope, value) {\n              var BLEND_FUNCS = env.constants.blendFuncs\n\n              check$1.optional(function () {\n                env.assert(scope,\n                  value + '&&typeof ' + value + '===\"object\"',\n                  'invalid blend func, must be an object')\n              })\n\n              function read (prefix, suffix) {\n                var func = scope.def(\n                  '\"', prefix, suffix, '\" in ', value,\n                  '?', value, '.', prefix, suffix,\n                  ':', value, '.', prefix)\n\n                check$1.optional(function () {\n                  env.assert(scope,\n                    func + ' in ' + BLEND_FUNCS,\n                    'invalid ' + prop + '.' + prefix + suffix + ', must be one of ' + Object.keys(blendFuncs))\n                })\n\n                return func\n              }\n\n              var srcRGB = read('src', 'RGB')\n              var dstRGB = read('dst', 'RGB')\n\n              check$1.optional(function () {\n                var INVALID_BLEND_COMBINATIONS = env.constants.invalidBlendCombinations\n\n                env.assert(scope,\n                  INVALID_BLEND_COMBINATIONS +\n                           '.indexOf(' + srcRGB + '+\", \"+' + dstRGB + ') === -1 ',\n                  'unallowed blending combination for (srcRGB, dstRGB)'\n                )\n              })\n\n              var SRC_RGB = scope.def(BLEND_FUNCS, '[', srcRGB, ']')\n              var SRC_ALPHA = scope.def(BLEND_FUNCS, '[', read('src', 'Alpha'), ']')\n              var DST_RGB = scope.def(BLEND_FUNCS, '[', dstRGB, ']')\n              var DST_ALPHA = scope.def(BLEND_FUNCS, '[', read('dst', 'Alpha'), ']')\n\n              return [SRC_RGB, DST_RGB, SRC_ALPHA, DST_ALPHA]\n            })\n\n        case S_BLEND_EQUATION:\n          return parseParam(\n            function (value) {\n              if (typeof value === 'string') {\n                check$1.commandParameter(value, blendEquations, 'invalid ' + prop, env.commandStr)\n                return [\n                  blendEquations[value],\n                  blendEquations[value]\n                ]\n              } else if (typeof value === 'object') {\n                check$1.commandParameter(\n                  value.rgb, blendEquations, prop + '.rgb', env.commandStr)\n                check$1.commandParameter(\n                  value.alpha, blendEquations, prop + '.alpha', env.commandStr)\n                return [\n                  blendEquations[value.rgb],\n                  blendEquations[value.alpha]\n                ]\n              } else {\n                check$1.commandRaise('invalid blend.equation', env.commandStr)\n              }\n            },\n            function (env, scope, value) {\n              var BLEND_EQUATIONS = env.constants.blendEquations\n\n              var RGB = scope.def()\n              var ALPHA = scope.def()\n\n              var ifte = env.cond('typeof ', value, '===\"string\"')\n\n              check$1.optional(function () {\n                function checkProp (block, name, value) {\n                  env.assert(block,\n                    value + ' in ' + BLEND_EQUATIONS,\n                    'invalid ' + name + ', must be one of ' + Object.keys(blendEquations))\n                }\n                checkProp(ifte.then, prop, value)\n\n                env.assert(ifte.else,\n                  value + '&&typeof ' + value + '===\"object\"',\n                  'invalid ' + prop)\n                checkProp(ifte.else, prop + '.rgb', value + '.rgb')\n                checkProp(ifte.else, prop + '.alpha', value + '.alpha')\n              })\n\n              ifte.then(\n                RGB, '=', ALPHA, '=', BLEND_EQUATIONS, '[', value, '];')\n              ifte.else(\n                RGB, '=', BLEND_EQUATIONS, '[', value, '.rgb];',\n                ALPHA, '=', BLEND_EQUATIONS, '[', value, '.alpha];')\n\n              scope(ifte)\n\n              return [RGB, ALPHA]\n            })\n\n        case S_BLEND_COLOR:\n          return parseParam(\n            function (value) {\n              check$1.command(\n                isArrayLike(value) &&\n                value.length === 4,\n                'blend.color must be a 4d array', env.commandStr)\n              return loop(4, function (i) {\n                return +value[i]\n              })\n            },\n            function (env, scope, value) {\n              check$1.optional(function () {\n                env.assert(scope,\n                  env.shared.isArrayLike + '(' + value + ')&&' +\n                  value + '.length===4',\n                  'blend.color must be a 4d array')\n              })\n              return loop(4, function (i) {\n                return scope.def('+', value, '[', i, ']')\n              })\n            })\n\n        case S_STENCIL_MASK:\n          return parseParam(\n            function (value) {\n              check$1.commandType(value, 'number', param, env.commandStr)\n              return value | 0\n            },\n            function (env, scope, value) {\n              check$1.optional(function () {\n                env.assert(scope,\n                  'typeof ' + value + '===\"number\"',\n                  'invalid stencil.mask')\n              })\n              return scope.def(value, '|0')\n            })\n\n        case S_STENCIL_FUNC:\n          return parseParam(\n            function (value) {\n              check$1.commandType(value, 'object', param, env.commandStr)\n              var cmp = value.cmp || 'keep'\n              var ref = value.ref || 0\n              var mask = 'mask' in value ? value.mask : -1\n              check$1.commandParameter(cmp, compareFuncs, prop + '.cmp', env.commandStr)\n              check$1.commandType(ref, 'number', prop + '.ref', env.commandStr)\n              check$1.commandType(mask, 'number', prop + '.mask', env.commandStr)\n              return [\n                compareFuncs[cmp],\n                ref,\n                mask\n              ]\n            },\n            function (env, scope, value) {\n              var COMPARE_FUNCS = env.constants.compareFuncs\n              check$1.optional(function () {\n                function assert () {\n                  env.assert(scope,\n                    Array.prototype.join.call(arguments, ''),\n                    'invalid stencil.func')\n                }\n                assert(value + '&&typeof ', value, '===\"object\"')\n                assert('!(\"cmp\" in ', value, ')||(',\n                  value, '.cmp in ', COMPARE_FUNCS, ')')\n              })\n              var cmp = scope.def(\n                '\"cmp\" in ', value,\n                '?', COMPARE_FUNCS, '[', value, '.cmp]',\n                ':', GL_KEEP)\n              var ref = scope.def(value, '.ref|0')\n              var mask = scope.def(\n                '\"mask\" in ', value,\n                '?', value, '.mask|0:-1')\n              return [cmp, ref, mask]\n            })\n\n        case S_STENCIL_OPFRONT:\n        case S_STENCIL_OPBACK:\n          return parseParam(\n            function (value) {\n              check$1.commandType(value, 'object', param, env.commandStr)\n              var fail = value.fail || 'keep'\n              var zfail = value.zfail || 'keep'\n              var zpass = value.zpass || 'keep'\n              check$1.commandParameter(fail, stencilOps, prop + '.fail', env.commandStr)\n              check$1.commandParameter(zfail, stencilOps, prop + '.zfail', env.commandStr)\n              check$1.commandParameter(zpass, stencilOps, prop + '.zpass', env.commandStr)\n              return [\n                prop === S_STENCIL_OPBACK ? GL_BACK : GL_FRONT,\n                stencilOps[fail],\n                stencilOps[zfail],\n                stencilOps[zpass]\n              ]\n            },\n            function (env, scope, value) {\n              var STENCIL_OPS = env.constants.stencilOps\n\n              check$1.optional(function () {\n                env.assert(scope,\n                  value + '&&typeof ' + value + '===\"object\"',\n                  'invalid ' + prop)\n              })\n\n              function read (name) {\n                check$1.optional(function () {\n                  env.assert(scope,\n                    '!(\"' + name + '\" in ' + value + ')||' +\n                    '(' + value + '.' + name + ' in ' + STENCIL_OPS + ')',\n                    'invalid ' + prop + '.' + name + ', must be one of ' + Object.keys(stencilOps))\n                })\n\n                return scope.def(\n                  '\"', name, '\" in ', value,\n                  '?', STENCIL_OPS, '[', value, '.', name, ']:',\n                  GL_KEEP)\n              }\n\n              return [\n                prop === S_STENCIL_OPBACK ? GL_BACK : GL_FRONT,\n                read('fail'),\n                read('zfail'),\n                read('zpass')\n              ]\n            })\n\n        case S_POLYGON_OFFSET_OFFSET:\n          return parseParam(\n            function (value) {\n              check$1.commandType(value, 'object', param, env.commandStr)\n              var factor = value.factor | 0\n              var units = value.units | 0\n              check$1.commandType(factor, 'number', param + '.factor', env.commandStr)\n              check$1.commandType(units, 'number', param + '.units', env.commandStr)\n              return [factor, units]\n            },\n            function (env, scope, value) {\n              check$1.optional(function () {\n                env.assert(scope,\n                  value + '&&typeof ' + value + '===\"object\"',\n                  'invalid ' + prop)\n              })\n\n              var FACTOR = scope.def(value, '.factor|0')\n              var UNITS = scope.def(value, '.units|0')\n\n              return [FACTOR, UNITS]\n            })\n\n        case S_CULL_FACE:\n          return parseParam(\n            function (value) {\n              var face = 0\n              if (value === 'front') {\n                face = GL_FRONT\n              } else if (value === 'back') {\n                face = GL_BACK\n              }\n              check$1.command(!!face, param, env.commandStr)\n              return face\n            },\n            function (env, scope, value) {\n              check$1.optional(function () {\n                env.assert(scope,\n                  value + '===\"front\"||' +\n                  value + '===\"back\"',\n                  'invalid cull.face')\n              })\n              return scope.def(value, '===\"front\"?', GL_FRONT, ':', GL_BACK)\n            })\n\n        case S_LINE_WIDTH:\n          return parseParam(\n            function (value) {\n              check$1.command(\n                typeof value === 'number' &&\n                value >= limits.lineWidthDims[0] &&\n                value <= limits.lineWidthDims[1],\n                'invalid line width, must be a positive number between ' +\n                limits.lineWidthDims[0] + ' and ' + limits.lineWidthDims[1], env.commandStr)\n              return value\n            },\n            function (env, scope, value) {\n              check$1.optional(function () {\n                env.assert(scope,\n                  'typeof ' + value + '===\"number\"&&' +\n                  value + '>=' + limits.lineWidthDims[0] + '&&' +\n                  value + '<=' + limits.lineWidthDims[1],\n                  'invalid line width')\n              })\n\n              return value\n            })\n\n        case S_FRONT_FACE:\n          return parseParam(\n            function (value) {\n              check$1.commandParameter(value, orientationType, param, env.commandStr)\n              return orientationType[value]\n            },\n            function (env, scope, value) {\n              check$1.optional(function () {\n                env.assert(scope,\n                  value + '===\"cw\"||' +\n                  value + '===\"ccw\"',\n                  'invalid frontFace, must be one of cw,ccw')\n              })\n              return scope.def(value + '===\"cw\"?' + GL_CW + ':' + GL_CCW)\n            })\n\n        case S_COLOR_MASK:\n          return parseParam(\n            function (value) {\n              check$1.command(\n                isArrayLike(value) && value.length === 4,\n                'color.mask must be length 4 array', env.commandStr)\n              return value.map(function (v) { return !!v })\n            },\n            function (env, scope, value) {\n              check$1.optional(function () {\n                env.assert(scope,\n                  env.shared.isArrayLike + '(' + value + ')&&' +\n                  value + '.length===4',\n                  'invalid color.mask')\n              })\n              return loop(4, function (i) {\n                return '!!' + value + '[' + i + ']'\n              })\n            })\n\n        case S_SAMPLE_COVERAGE:\n          return parseParam(\n            function (value) {\n              check$1.command(typeof value === 'object' && value, param, env.commandStr)\n              var sampleValue = 'value' in value ? value.value : 1\n              var sampleInvert = !!value.invert\n              check$1.command(\n                typeof sampleValue === 'number' &&\n                sampleValue >= 0 && sampleValue <= 1,\n                'sample.coverage.value must be a number between 0 and 1', env.commandStr)\n              return [sampleValue, sampleInvert]\n            },\n            function (env, scope, value) {\n              check$1.optional(function () {\n                env.assert(scope,\n                  value + '&&typeof ' + value + '===\"object\"',\n                  'invalid sample.coverage')\n              })\n              var VALUE = scope.def(\n                '\"value\" in ', value, '?+', value, '.value:1')\n              var INVERT = scope.def('!!', value, '.invert')\n              return [VALUE, INVERT]\n            })\n      }\n    })\n\n    return STATE\n  }\n\n  function parseUniforms (uniforms, env) {\n    var staticUniforms = uniforms.static\n    var dynamicUniforms = uniforms.dynamic\n\n    var UNIFORMS = {}\n\n    Object.keys(staticUniforms).forEach(function (name) {\n      var value = staticUniforms[name]\n      var result\n      if (typeof value === 'number' ||\n          typeof value === 'boolean') {\n        result = createStaticDecl(function () {\n          return value\n        })\n      } else if (typeof value === 'function') {\n        var reglType = value._reglType\n        if (reglType === 'texture2d' ||\n            reglType === 'textureCube') {\n          result = createStaticDecl(function (env) {\n            return env.link(value)\n          })\n        } else if (reglType === 'framebuffer' ||\n                   reglType === 'framebufferCube') {\n          check$1.command(value.color.length > 0,\n            'missing color attachment for framebuffer sent to uniform \"' + name + '\"', env.commandStr)\n          result = createStaticDecl(function (env) {\n            return env.link(value.color[0])\n          })\n        } else {\n          check$1.commandRaise('invalid data for uniform \"' + name + '\"', env.commandStr)\n        }\n      } else if (isArrayLike(value)) {\n        result = createStaticDecl(function (env) {\n          var ITEM = env.global.def('[',\n            loop(value.length, function (i) {\n              check$1.command(\n                typeof value[i] === 'number' ||\n                typeof value[i] === 'boolean',\n                'invalid uniform ' + name, env.commandStr)\n              return value[i]\n            }), ']')\n          return ITEM\n        })\n      } else {\n        check$1.commandRaise('invalid or missing data for uniform \"' + name + '\"', env.commandStr)\n      }\n      result.value = value\n      UNIFORMS[name] = result\n    })\n\n    Object.keys(dynamicUniforms).forEach(function (key) {\n      var dyn = dynamicUniforms[key]\n      UNIFORMS[key] = createDynamicDecl(dyn, function (env, scope) {\n        return env.invoke(scope, dyn)\n      })\n    })\n\n    return UNIFORMS\n  }\n\n  function parseAttributes (attributes, env) {\n    var staticAttributes = attributes.static\n    var dynamicAttributes = attributes.dynamic\n\n    var attributeDefs = {}\n\n    Object.keys(staticAttributes).forEach(function (attribute) {\n      var value = staticAttributes[attribute]\n      var id = stringStore.id(attribute)\n\n      var record = new AttributeRecord()\n      if (isBufferArgs(value)) {\n        record.state = ATTRIB_STATE_POINTER\n        record.buffer = bufferState.getBuffer(\n          bufferState.create(value, GL_ARRAY_BUFFER$2, false, true))\n        record.type = 0\n      } else {\n        var buffer = bufferState.getBuffer(value)\n        if (buffer) {\n          record.state = ATTRIB_STATE_POINTER\n          record.buffer = buffer\n          record.type = 0\n        } else {\n          check$1.command(typeof value === 'object' && value,\n            'invalid data for attribute ' + attribute, env.commandStr)\n          if ('constant' in value) {\n            var constant = value.constant\n            record.buffer = 'null'\n            record.state = ATTRIB_STATE_CONSTANT\n            if (typeof constant === 'number') {\n              record.x = constant\n            } else {\n              check$1.command(\n                isArrayLike(constant) &&\n                constant.length > 0 &&\n                constant.length <= 4,\n                'invalid constant for attribute ' + attribute, env.commandStr)\n              CUTE_COMPONENTS.forEach(function (c, i) {\n                if (i < constant.length) {\n                  record[c] = constant[i]\n                }\n              })\n            }\n          } else {\n            if (isBufferArgs(value.buffer)) {\n              buffer = bufferState.getBuffer(\n                bufferState.create(value.buffer, GL_ARRAY_BUFFER$2, false, true))\n            } else {\n              buffer = bufferState.getBuffer(value.buffer)\n            }\n            check$1.command(!!buffer, 'missing buffer for attribute \"' + attribute + '\"', env.commandStr)\n\n            var offset = value.offset | 0\n            check$1.command(offset >= 0,\n              'invalid offset for attribute \"' + attribute + '\"', env.commandStr)\n\n            var stride = value.stride | 0\n            check$1.command(stride >= 0 && stride < 256,\n              'invalid stride for attribute \"' + attribute + '\", must be integer betweeen [0, 255]', env.commandStr)\n\n            var size = value.size | 0\n            check$1.command(!('size' in value) || (size > 0 && size <= 4),\n              'invalid size for attribute \"' + attribute + '\", must be 1,2,3,4', env.commandStr)\n\n            var normalized = !!value.normalized\n\n            var type = 0\n            if ('type' in value) {\n              check$1.commandParameter(\n                value.type, glTypes,\n                'invalid type for attribute ' + attribute, env.commandStr)\n              type = glTypes[value.type]\n            }\n\n            var divisor = value.divisor | 0\n            if ('divisor' in value) {\n              check$1.command(divisor === 0 || extInstancing,\n                'cannot specify divisor for attribute \"' + attribute + '\", instancing not supported', env.commandStr)\n              check$1.command(divisor >= 0,\n                'invalid divisor for attribute \"' + attribute + '\"', env.commandStr)\n            }\n\n            check$1.optional(function () {\n              var command = env.commandStr\n\n              var VALID_KEYS = [\n                'buffer',\n                'offset',\n                'divisor',\n                'normalized',\n                'type',\n                'size',\n                'stride'\n              ]\n\n              Object.keys(value).forEach(function (prop) {\n                check$1.command(\n                  VALID_KEYS.indexOf(prop) >= 0,\n                  'unknown parameter \"' + prop + '\" for attribute pointer \"' + attribute + '\" (valid parameters are ' + VALID_KEYS + ')',\n                  command)\n              })\n            })\n\n            record.buffer = buffer\n            record.state = ATTRIB_STATE_POINTER\n            record.size = size\n            record.normalized = normalized\n            record.type = type || buffer.dtype\n            record.offset = offset\n            record.stride = stride\n            record.divisor = divisor\n          }\n        }\n      }\n\n      attributeDefs[attribute] = createStaticDecl(function (env, scope) {\n        var cache = env.attribCache\n        if (id in cache) {\n          return cache[id]\n        }\n        var result = {\n          isStream: false\n        }\n        Object.keys(record).forEach(function (key) {\n          result[key] = record[key]\n        })\n        if (record.buffer) {\n          result.buffer = env.link(record.buffer)\n          result.type = result.type || (result.buffer + '.dtype')\n        }\n        cache[id] = result\n        return result\n      })\n    })\n\n    Object.keys(dynamicAttributes).forEach(function (attribute) {\n      var dyn = dynamicAttributes[attribute]\n\n      function appendAttributeCode (env, block) {\n        var VALUE = env.invoke(block, dyn)\n\n        var shared = env.shared\n        var constants = env.constants\n\n        var IS_BUFFER_ARGS = shared.isBufferArgs\n        var BUFFER_STATE = shared.buffer\n\n        // Perform validation on attribute\n        check$1.optional(function () {\n          env.assert(block,\n            VALUE + '&&(typeof ' + VALUE + '===\"object\"||typeof ' +\n            VALUE + '===\"function\")&&(' +\n            IS_BUFFER_ARGS + '(' + VALUE + ')||' +\n            BUFFER_STATE + '.getBuffer(' + VALUE + ')||' +\n            BUFFER_STATE + '.getBuffer(' + VALUE + '.buffer)||' +\n            IS_BUFFER_ARGS + '(' + VALUE + '.buffer)||' +\n            '(\"constant\" in ' + VALUE +\n            '&&(typeof ' + VALUE + '.constant===\"number\"||' +\n            shared.isArrayLike + '(' + VALUE + '.constant))))',\n            'invalid dynamic attribute \"' + attribute + '\"')\n        })\n\n        // allocate names for result\n        var result = {\n          isStream: block.def(false)\n        }\n        var defaultRecord = new AttributeRecord()\n        defaultRecord.state = ATTRIB_STATE_POINTER\n        Object.keys(defaultRecord).forEach(function (key) {\n          result[key] = block.def('' + defaultRecord[key])\n        })\n\n        var BUFFER = result.buffer\n        var TYPE = result.type\n        block(\n          'if(', IS_BUFFER_ARGS, '(', VALUE, ')){',\n          result.isStream, '=true;',\n          BUFFER, '=', BUFFER_STATE, '.createStream(', GL_ARRAY_BUFFER$2, ',', VALUE, ');',\n          TYPE, '=', BUFFER, '.dtype;',\n          '}else{',\n          BUFFER, '=', BUFFER_STATE, '.getBuffer(', VALUE, ');',\n          'if(', BUFFER, '){',\n          TYPE, '=', BUFFER, '.dtype;',\n          '}else if(\"constant\" in ', VALUE, '){',\n          result.state, '=', ATTRIB_STATE_CONSTANT, ';',\n          'if(typeof ' + VALUE + '.constant === \"number\"){',\n          result[CUTE_COMPONENTS[0]], '=', VALUE, '.constant;',\n          CUTE_COMPONENTS.slice(1).map(function (n) {\n            return result[n]\n          }).join('='), '=0;',\n          '}else{',\n          CUTE_COMPONENTS.map(function (name, i) {\n            return (\n              result[name] + '=' + VALUE + '.constant.length>' + i +\n              '?' + VALUE + '.constant[' + i + ']:0;'\n            )\n          }).join(''),\n          '}}else{',\n          'if(', IS_BUFFER_ARGS, '(', VALUE, '.buffer)){',\n          BUFFER, '=', BUFFER_STATE, '.createStream(', GL_ARRAY_BUFFER$2, ',', VALUE, '.buffer);',\n          '}else{',\n          BUFFER, '=', BUFFER_STATE, '.getBuffer(', VALUE, '.buffer);',\n          '}',\n          TYPE, '=\"type\" in ', VALUE, '?',\n          constants.glTypes, '[', VALUE, '.type]:', BUFFER, '.dtype;',\n          result.normalized, '=!!', VALUE, '.normalized;')\n        function emitReadRecord (name) {\n          block(result[name], '=', VALUE, '.', name, '|0;')\n        }\n        emitReadRecord('size')\n        emitReadRecord('offset')\n        emitReadRecord('stride')\n        emitReadRecord('divisor')\n\n        block('}}')\n\n        block.exit(\n          'if(', result.isStream, '){',\n          BUFFER_STATE, '.destroyStream(', BUFFER, ');',\n          '}')\n\n        return result\n      }\n\n      attributeDefs[attribute] = createDynamicDecl(dyn, appendAttributeCode)\n    })\n\n    return attributeDefs\n  }\n\n  function parseVAO (options, env) {\n    var staticOptions = options.static\n    var dynamicOptions = options.dynamic\n    if (S_VAO in staticOptions) {\n      var vao = staticOptions[S_VAO]\n      if (vao !== null && attributeState.getVAO(vao) === null) {\n        vao = attributeState.createVAO(vao)\n      }\n      return createStaticDecl(function (env) {\n        return env.link(attributeState.getVAO(vao))\n      })\n    } else if (S_VAO in dynamicOptions) {\n      var dyn = dynamicOptions[S_VAO]\n      return createDynamicDecl(dyn, function (env, scope) {\n        var vaoRef = env.invoke(scope, dyn)\n        return scope.def(env.shared.vao + '.getVAO(' + vaoRef + ')')\n      })\n    }\n    return null\n  }\n\n  function parseContext (context) {\n    var staticContext = context.static\n    var dynamicContext = context.dynamic\n    var result = {}\n\n    Object.keys(staticContext).forEach(function (name) {\n      var value = staticContext[name]\n      result[name] = createStaticDecl(function (env, scope) {\n        if (typeof value === 'number' || typeof value === 'boolean') {\n          return '' + value\n        } else {\n          return env.link(value)\n        }\n      })\n    })\n\n    Object.keys(dynamicContext).forEach(function (name) {\n      var dyn = dynamicContext[name]\n      result[name] = createDynamicDecl(dyn, function (env, scope) {\n        return env.invoke(scope, dyn)\n      })\n    })\n\n    return result\n  }\n\n  function parseArguments (options, attributes, uniforms, context, env) {\n    var staticOptions = options.static\n    var dynamicOptions = options.dynamic\n\n    check$1.optional(function () {\n      var KEY_NAMES = [\n        S_FRAMEBUFFER,\n        S_VERT,\n        S_FRAG,\n        S_ELEMENTS,\n        S_PRIMITIVE,\n        S_OFFSET,\n        S_COUNT,\n        S_INSTANCES,\n        S_PROFILE,\n        S_VAO\n      ].concat(GL_STATE_NAMES)\n\n      function checkKeys (dict) {\n        Object.keys(dict).forEach(function (key) {\n          check$1.command(\n            KEY_NAMES.indexOf(key) >= 0,\n            'unknown parameter \"' + key + '\"',\n            env.commandStr)\n        })\n      }\n\n      checkKeys(staticOptions)\n      checkKeys(dynamicOptions)\n    })\n\n    var attribLocations = parseAttribLocations(options, attributes)\n\n    var framebuffer = parseFramebuffer(options, env)\n    var viewportAndScissor = parseViewportScissor(options, framebuffer, env)\n    var draw = parseDraw(options, env)\n    var state = parseGLState(options, env)\n    var shader = parseProgram(options, env, attribLocations)\n\n    function copyBox (name) {\n      var defn = viewportAndScissor[name]\n      if (defn) {\n        state[name] = defn\n      }\n    }\n    copyBox(S_VIEWPORT)\n    copyBox(propName(S_SCISSOR_BOX))\n\n    var dirty = Object.keys(state).length > 0\n\n    var result = {\n      framebuffer: framebuffer,\n      draw: draw,\n      shader: shader,\n      state: state,\n      dirty: dirty,\n      scopeVAO: null,\n      drawVAO: null,\n      useVAO: false,\n      attributes: {}\n    }\n\n    result.profile = parseProfile(options, env)\n    result.uniforms = parseUniforms(uniforms, env)\n    result.drawVAO = result.scopeVAO = parseVAO(options, env)\n    // special case: check if we can statically allocate a vertex array object for this program\n    if (!result.drawVAO && shader.program && !attribLocations && extensions.angle_instanced_arrays) {\n      var useVAO = true\n      var staticBindings = shader.program.attributes.map(function (attr) {\n        var binding = attributes.static[attr]\n        useVAO = useVAO && !!binding\n        return binding\n      })\n      if (useVAO && staticBindings.length > 0) {\n        var vao = attributeState.getVAO(attributeState.createVAO(staticBindings))\n        result.drawVAO = new Declaration(null, null, null, function (env, scope) {\n          return env.link(vao)\n        })\n        result.useVAO = true\n      }\n    }\n    if (attribLocations) {\n      result.useVAO = true\n    } else {\n      result.attributes = parseAttributes(attributes, env)\n    }\n    result.context = parseContext(context, env)\n    return result\n  }\n\n  // ===================================================\n  // ===================================================\n  // COMMON UPDATE FUNCTIONS\n  // ===================================================\n  // ===================================================\n  function emitContext (env, scope, context) {\n    var shared = env.shared\n    var CONTEXT = shared.context\n\n    var contextEnter = env.scope()\n\n    Object.keys(context).forEach(function (name) {\n      scope.save(CONTEXT, '.' + name)\n      var defn = context[name]\n      var value = defn.append(env, scope)\n      if (Array.isArray(value)) {\n        contextEnter(CONTEXT, '.', name, '=[', value.join(), '];')\n      } else {\n        contextEnter(CONTEXT, '.', name, '=', value, ';')\n      }\n    })\n\n    scope(contextEnter)\n  }\n\n  // ===================================================\n  // ===================================================\n  // COMMON DRAWING FUNCTIONS\n  // ===================================================\n  // ===================================================\n  function emitPollFramebuffer (env, scope, framebuffer, skipCheck) {\n    var shared = env.shared\n\n    var GL = shared.gl\n    var FRAMEBUFFER_STATE = shared.framebuffer\n    var EXT_DRAW_BUFFERS\n    if (extDrawBuffers) {\n      EXT_DRAW_BUFFERS = scope.def(shared.extensions, '.webgl_draw_buffers')\n    }\n\n    var constants = env.constants\n\n    var DRAW_BUFFERS = constants.drawBuffer\n    var BACK_BUFFER = constants.backBuffer\n\n    var NEXT\n    if (framebuffer) {\n      NEXT = framebuffer.append(env, scope)\n    } else {\n      NEXT = scope.def(FRAMEBUFFER_STATE, '.next')\n    }\n\n    if (!skipCheck) {\n      scope('if(', NEXT, '!==', FRAMEBUFFER_STATE, '.cur){')\n    }\n    scope(\n      'if(', NEXT, '){',\n      GL, '.bindFramebuffer(', GL_FRAMEBUFFER$2, ',', NEXT, '.framebuffer);')\n    if (extDrawBuffers) {\n      scope(EXT_DRAW_BUFFERS, '.drawBuffersWEBGL(',\n        DRAW_BUFFERS, '[', NEXT, '.colorAttachments.length]);')\n    }\n    scope('}else{',\n      GL, '.bindFramebuffer(', GL_FRAMEBUFFER$2, ',null);')\n    if (extDrawBuffers) {\n      scope(EXT_DRAW_BUFFERS, '.drawBuffersWEBGL(', BACK_BUFFER, ');')\n    }\n    scope(\n      '}',\n      FRAMEBUFFER_STATE, '.cur=', NEXT, ';')\n    if (!skipCheck) {\n      scope('}')\n    }\n  }\n\n  function emitPollState (env, scope, args) {\n    var shared = env.shared\n\n    var GL = shared.gl\n\n    var CURRENT_VARS = env.current\n    var NEXT_VARS = env.next\n    var CURRENT_STATE = shared.current\n    var NEXT_STATE = shared.next\n\n    var block = env.cond(CURRENT_STATE, '.dirty')\n\n    GL_STATE_NAMES.forEach(function (prop) {\n      var param = propName(prop)\n      if (param in args.state) {\n        return\n      }\n\n      var NEXT, CURRENT\n      if (param in NEXT_VARS) {\n        NEXT = NEXT_VARS[param]\n        CURRENT = CURRENT_VARS[param]\n        var parts = loop(currentState[param].length, function (i) {\n          return block.def(NEXT, '[', i, ']')\n        })\n        block(env.cond(parts.map(function (p, i) {\n          return p + '!==' + CURRENT + '[' + i + ']'\n        }).join('||'))\n          .then(\n            GL, '.', GL_VARIABLES[param], '(', parts, ');',\n            parts.map(function (p, i) {\n              return CURRENT + '[' + i + ']=' + p\n            }).join(';'), ';'))\n      } else {\n        NEXT = block.def(NEXT_STATE, '.', param)\n        var ifte = env.cond(NEXT, '!==', CURRENT_STATE, '.', param)\n        block(ifte)\n        if (param in GL_FLAGS) {\n          ifte(\n            env.cond(NEXT)\n              .then(GL, '.enable(', GL_FLAGS[param], ');')\n              .else(GL, '.disable(', GL_FLAGS[param], ');'),\n            CURRENT_STATE, '.', param, '=', NEXT, ';')\n        } else {\n          ifte(\n            GL, '.', GL_VARIABLES[param], '(', NEXT, ');',\n            CURRENT_STATE, '.', param, '=', NEXT, ';')\n        }\n      }\n    })\n    if (Object.keys(args.state).length === 0) {\n      block(CURRENT_STATE, '.dirty=false;')\n    }\n    scope(block)\n  }\n\n  function emitSetOptions (env, scope, options, filter) {\n    var shared = env.shared\n    var CURRENT_VARS = env.current\n    var CURRENT_STATE = shared.current\n    var GL = shared.gl\n    sortState(Object.keys(options)).forEach(function (param) {\n      var defn = options[param]\n      if (filter && !filter(defn)) {\n        return\n      }\n      var variable = defn.append(env, scope)\n      if (GL_FLAGS[param]) {\n        var flag = GL_FLAGS[param]\n        if (isStatic(defn)) {\n          if (variable) {\n            scope(GL, '.enable(', flag, ');')\n          } else {\n            scope(GL, '.disable(', flag, ');')\n          }\n        } else {\n          scope(env.cond(variable)\n            .then(GL, '.enable(', flag, ');')\n            .else(GL, '.disable(', flag, ');'))\n        }\n        scope(CURRENT_STATE, '.', param, '=', variable, ';')\n      } else if (isArrayLike(variable)) {\n        var CURRENT = CURRENT_VARS[param]\n        scope(\n          GL, '.', GL_VARIABLES[param], '(', variable, ');',\n          variable.map(function (v, i) {\n            return CURRENT + '[' + i + ']=' + v\n          }).join(';'), ';')\n      } else {\n        scope(\n          GL, '.', GL_VARIABLES[param], '(', variable, ');',\n          CURRENT_STATE, '.', param, '=', variable, ';')\n      }\n    })\n  }\n\n  function injectExtensions (env, scope) {\n    if (extInstancing) {\n      env.instancing = scope.def(\n        env.shared.extensions, '.angle_instanced_arrays')\n    }\n  }\n\n  function emitProfile (env, scope, args, useScope, incrementCounter) {\n    var shared = env.shared\n    var STATS = env.stats\n    var CURRENT_STATE = shared.current\n    var TIMER = shared.timer\n    var profileArg = args.profile\n\n    function perfCounter () {\n      if (typeof performance === 'undefined') {\n        return 'Date.now()'\n      } else {\n        return 'performance.now()'\n      }\n    }\n\n    var CPU_START, QUERY_COUNTER\n    function emitProfileStart (block) {\n      CPU_START = scope.def()\n      block(CPU_START, '=', perfCounter(), ';')\n      if (typeof incrementCounter === 'string') {\n        block(STATS, '.count+=', incrementCounter, ';')\n      } else {\n        block(STATS, '.count++;')\n      }\n      if (timer) {\n        if (useScope) {\n          QUERY_COUNTER = scope.def()\n          block(QUERY_COUNTER, '=', TIMER, '.getNumPendingQueries();')\n        } else {\n          block(TIMER, '.beginQuery(', STATS, ');')\n        }\n      }\n    }\n\n    function emitProfileEnd (block) {\n      block(STATS, '.cpuTime+=', perfCounter(), '-', CPU_START, ';')\n      if (timer) {\n        if (useScope) {\n          block(TIMER, '.pushScopeStats(',\n            QUERY_COUNTER, ',',\n            TIMER, '.getNumPendingQueries(),',\n            STATS, ');')\n        } else {\n          block(TIMER, '.endQuery();')\n        }\n      }\n    }\n\n    function scopeProfile (value) {\n      var prev = scope.def(CURRENT_STATE, '.profile')\n      scope(CURRENT_STATE, '.profile=', value, ';')\n      scope.exit(CURRENT_STATE, '.profile=', prev, ';')\n    }\n\n    var USE_PROFILE\n    if (profileArg) {\n      if (isStatic(profileArg)) {\n        if (profileArg.enable) {\n          emitProfileStart(scope)\n          emitProfileEnd(scope.exit)\n          scopeProfile('true')\n        } else {\n          scopeProfile('false')\n        }\n        return\n      }\n      USE_PROFILE = profileArg.append(env, scope)\n      scopeProfile(USE_PROFILE)\n    } else {\n      USE_PROFILE = scope.def(CURRENT_STATE, '.profile')\n    }\n\n    var start = env.block()\n    emitProfileStart(start)\n    scope('if(', USE_PROFILE, '){', start, '}')\n    var end = env.block()\n    emitProfileEnd(end)\n    scope.exit('if(', USE_PROFILE, '){', end, '}')\n  }\n\n  function emitAttributes (env, scope, args, attributes, filter) {\n    var shared = env.shared\n\n    function typeLength (x) {\n      switch (x) {\n        case GL_FLOAT_VEC2:\n        case GL_INT_VEC2:\n        case GL_BOOL_VEC2:\n          return 2\n        case GL_FLOAT_VEC3:\n        case GL_INT_VEC3:\n        case GL_BOOL_VEC3:\n          return 3\n        case GL_FLOAT_VEC4:\n        case GL_INT_VEC4:\n        case GL_BOOL_VEC4:\n          return 4\n        default:\n          return 1\n      }\n    }\n\n    function emitBindAttribute (ATTRIBUTE, size, record) {\n      var GL = shared.gl\n\n      var LOCATION = scope.def(ATTRIBUTE, '.location')\n      var BINDING = scope.def(shared.attributes, '[', LOCATION, ']')\n\n      var STATE = record.state\n      var BUFFER = record.buffer\n      var CONST_COMPONENTS = [\n        record.x,\n        record.y,\n        record.z,\n        record.w\n      ]\n\n      var COMMON_KEYS = [\n        'buffer',\n        'normalized',\n        'offset',\n        'stride'\n      ]\n\n      function emitBuffer () {\n        scope(\n          'if(!', BINDING, '.buffer){',\n          GL, '.enableVertexAttribArray(', LOCATION, ');}')\n\n        var TYPE = record.type\n        var SIZE\n        if (!record.size) {\n          SIZE = size\n        } else {\n          SIZE = scope.def(record.size, '||', size)\n        }\n\n        scope('if(',\n          BINDING, '.type!==', TYPE, '||',\n          BINDING, '.size!==', SIZE, '||',\n          COMMON_KEYS.map(function (key) {\n            return BINDING + '.' + key + '!==' + record[key]\n          }).join('||'),\n          '){',\n          GL, '.bindBuffer(', GL_ARRAY_BUFFER$2, ',', BUFFER, '.buffer);',\n          GL, '.vertexAttribPointer(', [\n            LOCATION,\n            SIZE,\n            TYPE,\n            record.normalized,\n            record.stride,\n            record.offset\n          ], ');',\n          BINDING, '.type=', TYPE, ';',\n          BINDING, '.size=', SIZE, ';',\n          COMMON_KEYS.map(function (key) {\n            return BINDING + '.' + key + '=' + record[key] + ';'\n          }).join(''),\n          '}')\n\n        if (extInstancing) {\n          var DIVISOR = record.divisor\n          scope(\n            'if(', BINDING, '.divisor!==', DIVISOR, '){',\n            env.instancing, '.vertexAttribDivisorANGLE(', [LOCATION, DIVISOR], ');',\n            BINDING, '.divisor=', DIVISOR, ';}')\n        }\n      }\n\n      function emitConstant () {\n        scope(\n          'if(', BINDING, '.buffer){',\n          GL, '.disableVertexAttribArray(', LOCATION, ');',\n          BINDING, '.buffer=null;',\n          '}if(', CUTE_COMPONENTS.map(function (c, i) {\n            return BINDING + '.' + c + '!==' + CONST_COMPONENTS[i]\n          }).join('||'), '){',\n          GL, '.vertexAttrib4f(', LOCATION, ',', CONST_COMPONENTS, ');',\n          CUTE_COMPONENTS.map(function (c, i) {\n            return BINDING + '.' + c + '=' + CONST_COMPONENTS[i] + ';'\n          }).join(''),\n          '}')\n      }\n\n      if (STATE === ATTRIB_STATE_POINTER) {\n        emitBuffer()\n      } else if (STATE === ATTRIB_STATE_CONSTANT) {\n        emitConstant()\n      } else {\n        scope('if(', STATE, '===', ATTRIB_STATE_POINTER, '){')\n        emitBuffer()\n        scope('}else{')\n        emitConstant()\n        scope('}')\n      }\n    }\n\n    attributes.forEach(function (attribute) {\n      var name = attribute.name\n      var arg = args.attributes[name]\n      var record\n      if (arg) {\n        if (!filter(arg)) {\n          return\n        }\n        record = arg.append(env, scope)\n      } else {\n        if (!filter(SCOPE_DECL)) {\n          return\n        }\n        var scopeAttrib = env.scopeAttrib(name)\n        check$1.optional(function () {\n          env.assert(scope,\n            scopeAttrib + '.state',\n            'missing attribute ' + name)\n        })\n        record = {}\n        Object.keys(new AttributeRecord()).forEach(function (key) {\n          record[key] = scope.def(scopeAttrib, '.', key)\n        })\n      }\n      emitBindAttribute(\n        env.link(attribute), typeLength(attribute.info.type), record)\n    })\n  }\n\n  function emitUniforms (env, scope, args, uniforms, filter) {\n    var shared = env.shared\n    var GL = shared.gl\n\n    var infix\n    for (var i = 0; i < uniforms.length; ++i) {\n      var uniform = uniforms[i]\n      var name = uniform.name\n      var type = uniform.info.type\n      var arg = args.uniforms[name]\n      var UNIFORM = env.link(uniform)\n      var LOCATION = UNIFORM + '.location'\n\n      var VALUE\n      if (arg) {\n        if (!filter(arg)) {\n          continue\n        }\n        if (isStatic(arg)) {\n          var value = arg.value\n          check$1.command(\n            value !== null && typeof value !== 'undefined',\n            'missing uniform \"' + name + '\"', env.commandStr)\n          if (type === GL_SAMPLER_2D || type === GL_SAMPLER_CUBE) {\n            check$1.command(\n              typeof value === 'function' &&\n              ((type === GL_SAMPLER_2D &&\n                (value._reglType === 'texture2d' ||\n                value._reglType === 'framebuffer')) ||\n              (type === GL_SAMPLER_CUBE &&\n                (value._reglType === 'textureCube' ||\n                value._reglType === 'framebufferCube'))),\n              'invalid texture for uniform ' + name, env.commandStr)\n            var TEX_VALUE = env.link(value._texture || value.color[0]._texture)\n            scope(GL, '.uniform1i(', LOCATION, ',', TEX_VALUE + '.bind());')\n            scope.exit(TEX_VALUE, '.unbind();')\n          } else if (\n            type === GL_FLOAT_MAT2 ||\n            type === GL_FLOAT_MAT3 ||\n            type === GL_FLOAT_MAT4) {\n            check$1.optional(function () {\n              check$1.command(isArrayLike(value),\n                'invalid matrix for uniform ' + name, env.commandStr)\n              check$1.command(\n                (type === GL_FLOAT_MAT2 && value.length === 4) ||\n                (type === GL_FLOAT_MAT3 && value.length === 9) ||\n                (type === GL_FLOAT_MAT4 && value.length === 16),\n                'invalid length for matrix uniform ' + name, env.commandStr)\n            })\n            var MAT_VALUE = env.global.def('new Float32Array([' +\n              Array.prototype.slice.call(value) + '])')\n            var dim = 2\n            if (type === GL_FLOAT_MAT3) {\n              dim = 3\n            } else if (type === GL_FLOAT_MAT4) {\n              dim = 4\n            }\n            scope(\n              GL, '.uniformMatrix', dim, 'fv(',\n              LOCATION, ',false,', MAT_VALUE, ');')\n          } else {\n            switch (type) {\n              case GL_FLOAT$8:\n                check$1.commandType(value, 'number', 'uniform ' + name, env.commandStr)\n                infix = '1f'\n                break\n              case GL_FLOAT_VEC2:\n                check$1.command(\n                  isArrayLike(value) && value.length === 2,\n                  'uniform ' + name, env.commandStr)\n                infix = '2f'\n                break\n              case GL_FLOAT_VEC3:\n                check$1.command(\n                  isArrayLike(value) && value.length === 3,\n                  'uniform ' + name, env.commandStr)\n                infix = '3f'\n                break\n              case GL_FLOAT_VEC4:\n                check$1.command(\n                  isArrayLike(value) && value.length === 4,\n                  'uniform ' + name, env.commandStr)\n                infix = '4f'\n                break\n              case GL_BOOL:\n                check$1.commandType(value, 'boolean', 'uniform ' + name, env.commandStr)\n                infix = '1i'\n                break\n              case GL_INT$3:\n                check$1.commandType(value, 'number', 'uniform ' + name, env.commandStr)\n                infix = '1i'\n                break\n              case GL_BOOL_VEC2:\n                check$1.command(\n                  isArrayLike(value) && value.length === 2,\n                  'uniform ' + name, env.commandStr)\n                infix = '2i'\n                break\n              case GL_INT_VEC2:\n                check$1.command(\n                  isArrayLike(value) && value.length === 2,\n                  'uniform ' + name, env.commandStr)\n                infix = '2i'\n                break\n              case GL_BOOL_VEC3:\n                check$1.command(\n                  isArrayLike(value) && value.length === 3,\n                  'uniform ' + name, env.commandStr)\n                infix = '3i'\n                break\n              case GL_INT_VEC3:\n                check$1.command(\n                  isArrayLike(value) && value.length === 3,\n                  'uniform ' + name, env.commandStr)\n                infix = '3i'\n                break\n              case GL_BOOL_VEC4:\n                check$1.command(\n                  isArrayLike(value) && value.length === 4,\n                  'uniform ' + name, env.commandStr)\n                infix = '4i'\n                break\n              case GL_INT_VEC4:\n                check$1.command(\n                  isArrayLike(value) && value.length === 4,\n                  'uniform ' + name, env.commandStr)\n                infix = '4i'\n                break\n            }\n            scope(GL, '.uniform', infix, '(', LOCATION, ',',\n              isArrayLike(value) ? Array.prototype.slice.call(value) : value,\n              ');')\n          }\n          continue\n        } else {\n          VALUE = arg.append(env, scope)\n        }\n      } else {\n        if (!filter(SCOPE_DECL)) {\n          continue\n        }\n        VALUE = scope.def(shared.uniforms, '[', stringStore.id(name), ']')\n      }\n\n      if (type === GL_SAMPLER_2D) {\n        check$1(!Array.isArray(VALUE), 'must specify a scalar prop for textures')\n        scope(\n          'if(', VALUE, '&&', VALUE, '._reglType===\"framebuffer\"){',\n          VALUE, '=', VALUE, '.color[0];',\n          '}')\n      } else if (type === GL_SAMPLER_CUBE) {\n        check$1(!Array.isArray(VALUE), 'must specify a scalar prop for cube maps')\n        scope(\n          'if(', VALUE, '&&', VALUE, '._reglType===\"framebufferCube\"){',\n          VALUE, '=', VALUE, '.color[0];',\n          '}')\n      }\n\n      // perform type validation\n      check$1.optional(function () {\n        function emitCheck (pred, message) {\n          env.assert(scope, pred,\n            'bad data or missing for uniform \"' + name + '\".  ' + message)\n        }\n\n        function checkType (type) {\n          check$1(!Array.isArray(VALUE), 'must not specify an array type for uniform')\n          emitCheck(\n            'typeof ' + VALUE + '===\"' + type + '\"',\n            'invalid type, expected ' + type)\n        }\n\n        function checkVector (n, type) {\n          if (Array.isArray(VALUE)) {\n            check$1(VALUE.length === n, 'must have length ' + n)\n          } else {\n            emitCheck(\n              shared.isArrayLike + '(' + VALUE + ')&&' + VALUE + '.length===' + n,\n              'invalid vector, should have length ' + n, env.commandStr)\n          }\n        }\n\n        function checkTexture (target) {\n          check$1(!Array.isArray(VALUE), 'must not specify a value type')\n          emitCheck(\n            'typeof ' + VALUE + '===\"function\"&&' +\n            VALUE + '._reglType===\"texture' +\n            (target === GL_TEXTURE_2D$3 ? '2d' : 'Cube') + '\"',\n            'invalid texture type', env.commandStr)\n        }\n\n        switch (type) {\n          case GL_INT$3:\n            checkType('number')\n            break\n          case GL_INT_VEC2:\n            checkVector(2, 'number')\n            break\n          case GL_INT_VEC3:\n            checkVector(3, 'number')\n            break\n          case GL_INT_VEC4:\n            checkVector(4, 'number')\n            break\n          case GL_FLOAT$8:\n            checkType('number')\n            break\n          case GL_FLOAT_VEC2:\n            checkVector(2, 'number')\n            break\n          case GL_FLOAT_VEC3:\n            checkVector(3, 'number')\n            break\n          case GL_FLOAT_VEC4:\n            checkVector(4, 'number')\n            break\n          case GL_BOOL:\n            checkType('boolean')\n            break\n          case GL_BOOL_VEC2:\n            checkVector(2, 'boolean')\n            break\n          case GL_BOOL_VEC3:\n            checkVector(3, 'boolean')\n            break\n          case GL_BOOL_VEC4:\n            checkVector(4, 'boolean')\n            break\n          case GL_FLOAT_MAT2:\n            checkVector(4, 'number')\n            break\n          case GL_FLOAT_MAT3:\n            checkVector(9, 'number')\n            break\n          case GL_FLOAT_MAT4:\n            checkVector(16, 'number')\n            break\n          case GL_SAMPLER_2D:\n            checkTexture(GL_TEXTURE_2D$3)\n            break\n          case GL_SAMPLER_CUBE:\n            checkTexture(GL_TEXTURE_CUBE_MAP$2)\n            break\n        }\n      })\n\n      var unroll = 1\n      switch (type) {\n        case GL_SAMPLER_2D:\n        case GL_SAMPLER_CUBE:\n          var TEX = scope.def(VALUE, '._texture')\n          scope(GL, '.uniform1i(', LOCATION, ',', TEX, '.bind());')\n          scope.exit(TEX, '.unbind();')\n          continue\n\n        case GL_INT$3:\n        case GL_BOOL:\n          infix = '1i'\n          break\n\n        case GL_INT_VEC2:\n        case GL_BOOL_VEC2:\n          infix = '2i'\n          unroll = 2\n          break\n\n        case GL_INT_VEC3:\n        case GL_BOOL_VEC3:\n          infix = '3i'\n          unroll = 3\n          break\n\n        case GL_INT_VEC4:\n        case GL_BOOL_VEC4:\n          infix = '4i'\n          unroll = 4\n          break\n\n        case GL_FLOAT$8:\n          infix = '1f'\n          break\n\n        case GL_FLOAT_VEC2:\n          infix = '2f'\n          unroll = 2\n          break\n\n        case GL_FLOAT_VEC3:\n          infix = '3f'\n          unroll = 3\n          break\n\n        case GL_FLOAT_VEC4:\n          infix = '4f'\n          unroll = 4\n          break\n\n        case GL_FLOAT_MAT2:\n          infix = 'Matrix2fv'\n          break\n\n        case GL_FLOAT_MAT3:\n          infix = 'Matrix3fv'\n          break\n\n        case GL_FLOAT_MAT4:\n          infix = 'Matrix4fv'\n          break\n      }\n\n      scope(GL, '.uniform', infix, '(', LOCATION, ',')\n      if (infix.charAt(0) === 'M') {\n        var matSize = Math.pow(type - GL_FLOAT_MAT2 + 2, 2)\n        var STORAGE = env.global.def('new Float32Array(', matSize, ')')\n        if (Array.isArray(VALUE)) {\n          scope(\n            'false,(',\n            loop(matSize, function (i) {\n              return STORAGE + '[' + i + ']=' + VALUE[i]\n            }), ',', STORAGE, ')')\n        } else {\n          scope(\n            'false,(Array.isArray(', VALUE, ')||', VALUE, ' instanceof Float32Array)?', VALUE, ':(',\n            loop(matSize, function (i) {\n              return STORAGE + '[' + i + ']=' + VALUE + '[' + i + ']'\n            }), ',', STORAGE, ')')\n        }\n      } else if (unroll > 1) {\n        scope(loop(unroll, function (i) {\n          return Array.isArray(VALUE) ? VALUE[i] : VALUE + '[' + i + ']'\n        }))\n      } else {\n        check$1(!Array.isArray(VALUE), 'uniform value must not be an array')\n        scope(VALUE)\n      }\n      scope(');')\n    }\n  }\n\n  function emitDraw (env, outer, inner, args) {\n    var shared = env.shared\n    var GL = shared.gl\n    var DRAW_STATE = shared.draw\n\n    var drawOptions = args.draw\n\n    function emitElements () {\n      var defn = drawOptions.elements\n      var ELEMENTS\n      var scope = outer\n      if (defn) {\n        if ((defn.contextDep && args.contextDynamic) || defn.propDep) {\n          scope = inner\n        }\n        ELEMENTS = defn.append(env, scope)\n      } else {\n        ELEMENTS = scope.def(DRAW_STATE, '.', S_ELEMENTS)\n      }\n      if (ELEMENTS) {\n        scope(\n          'if(' + ELEMENTS + ')' +\n          GL + '.bindBuffer(' + GL_ELEMENT_ARRAY_BUFFER$1 + ',' + ELEMENTS + '.buffer.buffer);')\n      }\n      return ELEMENTS\n    }\n\n    function emitCount () {\n      var defn = drawOptions.count\n      var COUNT\n      var scope = outer\n      if (defn) {\n        if ((defn.contextDep && args.contextDynamic) || defn.propDep) {\n          scope = inner\n        }\n        COUNT = defn.append(env, scope)\n        check$1.optional(function () {\n          if (defn.MISSING) {\n            env.assert(outer, 'false', 'missing vertex count')\n          }\n          if (defn.DYNAMIC) {\n            env.assert(scope, COUNT + '>=0', 'missing vertex count')\n          }\n        })\n      } else {\n        COUNT = scope.def(DRAW_STATE, '.', S_COUNT)\n        check$1.optional(function () {\n          env.assert(scope, COUNT + '>=0', 'missing vertex count')\n        })\n      }\n      return COUNT\n    }\n\n    var ELEMENTS = emitElements()\n    function emitValue (name) {\n      var defn = drawOptions[name]\n      if (defn) {\n        if ((defn.contextDep && args.contextDynamic) || defn.propDep) {\n          return defn.append(env, inner)\n        } else {\n          return defn.append(env, outer)\n        }\n      } else {\n        return outer.def(DRAW_STATE, '.', name)\n      }\n    }\n\n    var PRIMITIVE = emitValue(S_PRIMITIVE)\n    var OFFSET = emitValue(S_OFFSET)\n\n    var COUNT = emitCount()\n    if (typeof COUNT === 'number') {\n      if (COUNT === 0) {\n        return\n      }\n    } else {\n      inner('if(', COUNT, '){')\n      inner.exit('}')\n    }\n\n    var INSTANCES, EXT_INSTANCING\n    if (extInstancing) {\n      INSTANCES = emitValue(S_INSTANCES)\n      EXT_INSTANCING = env.instancing\n    }\n\n    var ELEMENT_TYPE = ELEMENTS + '.type'\n\n    var elementsStatic = drawOptions.elements && isStatic(drawOptions.elements)\n\n    function emitInstancing () {\n      function drawElements () {\n        inner(EXT_INSTANCING, '.drawElementsInstancedANGLE(', [\n          PRIMITIVE,\n          COUNT,\n          ELEMENT_TYPE,\n          OFFSET + '<<((' + ELEMENT_TYPE + '-' + GL_UNSIGNED_BYTE$8 + ')>>1)',\n          INSTANCES\n        ], ');')\n      }\n\n      function drawArrays () {\n        inner(EXT_INSTANCING, '.drawArraysInstancedANGLE(',\n          [PRIMITIVE, OFFSET, COUNT, INSTANCES], ');')\n      }\n\n      if (ELEMENTS) {\n        if (!elementsStatic) {\n          inner('if(', ELEMENTS, '){')\n          drawElements()\n          inner('}else{')\n          drawArrays()\n          inner('}')\n        } else {\n          drawElements()\n        }\n      } else {\n        drawArrays()\n      }\n    }\n\n    function emitRegular () {\n      function drawElements () {\n        inner(GL + '.drawElements(' + [\n          PRIMITIVE,\n          COUNT,\n          ELEMENT_TYPE,\n          OFFSET + '<<((' + ELEMENT_TYPE + '-' + GL_UNSIGNED_BYTE$8 + ')>>1)'\n        ] + ');')\n      }\n\n      function drawArrays () {\n        inner(GL + '.drawArrays(' + [PRIMITIVE, OFFSET, COUNT] + ');')\n      }\n\n      if (ELEMENTS) {\n        if (!elementsStatic) {\n          inner('if(', ELEMENTS, '){')\n          drawElements()\n          inner('}else{')\n          drawArrays()\n          inner('}')\n        } else {\n          drawElements()\n        }\n      } else {\n        drawArrays()\n      }\n    }\n\n    if (extInstancing && (typeof INSTANCES !== 'number' || INSTANCES >= 0)) {\n      if (typeof INSTANCES === 'string') {\n        inner('if(', INSTANCES, '>0){')\n        emitInstancing()\n        inner('}else if(', INSTANCES, '<0){')\n        emitRegular()\n        inner('}')\n      } else {\n        emitInstancing()\n      }\n    } else {\n      emitRegular()\n    }\n  }\n\n  function createBody (emitBody, parentEnv, args, program, count) {\n    var env = createREGLEnvironment()\n    var scope = env.proc('body', count)\n    check$1.optional(function () {\n      env.commandStr = parentEnv.commandStr\n      env.command = env.link(parentEnv.commandStr)\n    })\n    if (extInstancing) {\n      env.instancing = scope.def(\n        env.shared.extensions, '.angle_instanced_arrays')\n    }\n    emitBody(env, scope, args, program)\n    return env.compile().body\n  }\n\n  // ===================================================\n  // ===================================================\n  // DRAW PROC\n  // ===================================================\n  // ===================================================\n  function emitDrawBody (env, draw, args, program) {\n    injectExtensions(env, draw)\n    if (args.useVAO) {\n      if (args.drawVAO) {\n        draw(env.shared.vao, '.setVAO(', args.drawVAO.append(env, draw), ');')\n      } else {\n        draw(env.shared.vao, '.setVAO(', env.shared.vao, '.targetVAO);')\n      }\n    } else {\n      draw(env.shared.vao, '.setVAO(null);')\n      emitAttributes(env, draw, args, program.attributes, function () {\n        return true\n      })\n    }\n    emitUniforms(env, draw, args, program.uniforms, function () {\n      return true\n    })\n    emitDraw(env, draw, draw, args)\n  }\n\n  function emitDrawProc (env, args) {\n    var draw = env.proc('draw', 1)\n\n    injectExtensions(env, draw)\n\n    emitContext(env, draw, args.context)\n    emitPollFramebuffer(env, draw, args.framebuffer)\n\n    emitPollState(env, draw, args)\n    emitSetOptions(env, draw, args.state)\n\n    emitProfile(env, draw, args, false, true)\n\n    var program = args.shader.progVar.append(env, draw)\n    draw(env.shared.gl, '.useProgram(', program, '.program);')\n\n    if (args.shader.program) {\n      emitDrawBody(env, draw, args, args.shader.program)\n    } else {\n      draw(env.shared.vao, '.setVAO(null);')\n      var drawCache = env.global.def('{}')\n      var PROG_ID = draw.def(program, '.id')\n      var CACHED_PROC = draw.def(drawCache, '[', PROG_ID, ']')\n      draw(\n        env.cond(CACHED_PROC)\n          .then(CACHED_PROC, '.call(this,a0);')\n          .else(\n            CACHED_PROC, '=', drawCache, '[', PROG_ID, ']=',\n            env.link(function (program) {\n              return createBody(emitDrawBody, env, args, program, 1)\n            }), '(', program, ');',\n            CACHED_PROC, '.call(this,a0);'))\n    }\n\n    if (Object.keys(args.state).length > 0) {\n      draw(env.shared.current, '.dirty=true;')\n    }\n  }\n\n  // ===================================================\n  // ===================================================\n  // BATCH PROC\n  // ===================================================\n  // ===================================================\n\n  function emitBatchDynamicShaderBody (env, scope, args, program) {\n    env.batchId = 'a1'\n\n    injectExtensions(env, scope)\n\n    function all () {\n      return true\n    }\n\n    emitAttributes(env, scope, args, program.attributes, all)\n    emitUniforms(env, scope, args, program.uniforms, all)\n    emitDraw(env, scope, scope, args)\n  }\n\n  function emitBatchBody (env, scope, args, program) {\n    injectExtensions(env, scope)\n\n    var contextDynamic = args.contextDep\n\n    var BATCH_ID = scope.def()\n    var PROP_LIST = 'a0'\n    var NUM_PROPS = 'a1'\n    var PROPS = scope.def()\n    env.shared.props = PROPS\n    env.batchId = BATCH_ID\n\n    var outer = env.scope()\n    var inner = env.scope()\n\n    scope(\n      outer.entry,\n      'for(', BATCH_ID, '=0;', BATCH_ID, '<', NUM_PROPS, ';++', BATCH_ID, '){',\n      PROPS, '=', PROP_LIST, '[', BATCH_ID, '];',\n      inner,\n      '}',\n      outer.exit)\n\n    function isInnerDefn (defn) {\n      return ((defn.contextDep && contextDynamic) || defn.propDep)\n    }\n\n    function isOuterDefn (defn) {\n      return !isInnerDefn(defn)\n    }\n\n    if (args.needsContext) {\n      emitContext(env, inner, args.context)\n    }\n    if (args.needsFramebuffer) {\n      emitPollFramebuffer(env, inner, args.framebuffer)\n    }\n    emitSetOptions(env, inner, args.state, isInnerDefn)\n\n    if (args.profile && isInnerDefn(args.profile)) {\n      emitProfile(env, inner, args, false, true)\n    }\n\n    if (!program) {\n      var progCache = env.global.def('{}')\n      var PROGRAM = args.shader.progVar.append(env, inner)\n      var PROG_ID = inner.def(PROGRAM, '.id')\n      var CACHED_PROC = inner.def(progCache, '[', PROG_ID, ']')\n      inner(\n        env.shared.gl, '.useProgram(', PROGRAM, '.program);',\n        'if(!', CACHED_PROC, '){',\n        CACHED_PROC, '=', progCache, '[', PROG_ID, ']=',\n        env.link(function (program) {\n          return createBody(\n            emitBatchDynamicShaderBody, env, args, program, 2)\n        }), '(', PROGRAM, ');}',\n        CACHED_PROC, '.call(this,a0[', BATCH_ID, '],', BATCH_ID, ');')\n    } else {\n      if (args.useVAO) {\n        if (args.drawVAO) {\n          if (isInnerDefn(args.drawVAO)) {\n            // vao is a prop\n            inner(env.shared.vao, '.setVAO(', args.drawVAO.append(env, inner), ');')\n          } else {\n            // vao is invariant\n            outer(env.shared.vao, '.setVAO(', args.drawVAO.append(env, outer), ');')\n          }\n        } else {\n          // scoped vao binding\n          outer(env.shared.vao, '.setVAO(', env.shared.vao, '.targetVAO);')\n        }\n      } else {\n        outer(env.shared.vao, '.setVAO(null);')\n        emitAttributes(env, outer, args, program.attributes, isOuterDefn)\n        emitAttributes(env, inner, args, program.attributes, isInnerDefn)\n      }\n      emitUniforms(env, outer, args, program.uniforms, isOuterDefn)\n      emitUniforms(env, inner, args, program.uniforms, isInnerDefn)\n      emitDraw(env, outer, inner, args)\n    }\n  }\n\n  function emitBatchProc (env, args) {\n    var batch = env.proc('batch', 2)\n    env.batchId = '0'\n\n    injectExtensions(env, batch)\n\n    // Check if any context variables depend on props\n    var contextDynamic = false\n    var needsContext = true\n    Object.keys(args.context).forEach(function (name) {\n      contextDynamic = contextDynamic || args.context[name].propDep\n    })\n    if (!contextDynamic) {\n      emitContext(env, batch, args.context)\n      needsContext = false\n    }\n\n    // framebuffer state affects framebufferWidth/height context vars\n    var framebuffer = args.framebuffer\n    var needsFramebuffer = false\n    if (framebuffer) {\n      if (framebuffer.propDep) {\n        contextDynamic = needsFramebuffer = true\n      } else if (framebuffer.contextDep && contextDynamic) {\n        needsFramebuffer = true\n      }\n      if (!needsFramebuffer) {\n        emitPollFramebuffer(env, batch, framebuffer)\n      }\n    } else {\n      emitPollFramebuffer(env, batch, null)\n    }\n\n    // viewport is weird because it can affect context vars\n    if (args.state.viewport && args.state.viewport.propDep) {\n      contextDynamic = true\n    }\n\n    function isInnerDefn (defn) {\n      return (defn.contextDep && contextDynamic) || defn.propDep\n    }\n\n    // set webgl options\n    emitPollState(env, batch, args)\n    emitSetOptions(env, batch, args.state, function (defn) {\n      return !isInnerDefn(defn)\n    })\n\n    if (!args.profile || !isInnerDefn(args.profile)) {\n      emitProfile(env, batch, args, false, 'a1')\n    }\n\n    // Save these values to args so that the batch body routine can use them\n    args.contextDep = contextDynamic\n    args.needsContext = needsContext\n    args.needsFramebuffer = needsFramebuffer\n\n    // determine if shader is dynamic\n    var progDefn = args.shader.progVar\n    if ((progDefn.contextDep && contextDynamic) || progDefn.propDep) {\n      emitBatchBody(\n        env,\n        batch,\n        args,\n        null)\n    } else {\n      var PROGRAM = progDefn.append(env, batch)\n      batch(env.shared.gl, '.useProgram(', PROGRAM, '.program);')\n      if (args.shader.program) {\n        emitBatchBody(\n          env,\n          batch,\n          args,\n          args.shader.program)\n      } else {\n        batch(env.shared.vao, '.setVAO(null);')\n        var batchCache = env.global.def('{}')\n        var PROG_ID = batch.def(PROGRAM, '.id')\n        var CACHED_PROC = batch.def(batchCache, '[', PROG_ID, ']')\n        batch(\n          env.cond(CACHED_PROC)\n            .then(CACHED_PROC, '.call(this,a0,a1);')\n            .else(\n              CACHED_PROC, '=', batchCache, '[', PROG_ID, ']=',\n              env.link(function (program) {\n                return createBody(emitBatchBody, env, args, program, 2)\n              }), '(', PROGRAM, ');',\n              CACHED_PROC, '.call(this,a0,a1);'))\n      }\n    }\n\n    if (Object.keys(args.state).length > 0) {\n      batch(env.shared.current, '.dirty=true;')\n    }\n  }\n\n  // ===================================================\n  // ===================================================\n  // SCOPE COMMAND\n  // ===================================================\n  // ===================================================\n  function emitScopeProc (env, args) {\n    var scope = env.proc('scope', 3)\n    env.batchId = 'a2'\n\n    var shared = env.shared\n    var CURRENT_STATE = shared.current\n\n    emitContext(env, scope, args.context)\n\n    if (args.framebuffer) {\n      args.framebuffer.append(env, scope)\n    }\n\n    sortState(Object.keys(args.state)).forEach(function (name) {\n      var defn = args.state[name]\n      var value = defn.append(env, scope)\n      if (isArrayLike(value)) {\n        value.forEach(function (v, i) {\n          scope.set(env.next[name], '[' + i + ']', v)\n        })\n      } else {\n        scope.set(shared.next, '.' + name, value)\n      }\n    })\n\n    emitProfile(env, scope, args, true, true)\n\n    ;[S_ELEMENTS, S_OFFSET, S_COUNT, S_INSTANCES, S_PRIMITIVE].forEach(\n      function (opt) {\n        var variable = args.draw[opt]\n        if (!variable) {\n          return\n        }\n        scope.set(shared.draw, '.' + opt, '' + variable.append(env, scope))\n      })\n\n    Object.keys(args.uniforms).forEach(function (opt) {\n      var value = args.uniforms[opt].append(env, scope)\n      if (Array.isArray(value)) {\n        value = '[' + value.join() + ']'\n      }\n      scope.set(\n        shared.uniforms,\n        '[' + stringStore.id(opt) + ']',\n        value)\n    })\n\n    Object.keys(args.attributes).forEach(function (name) {\n      var record = args.attributes[name].append(env, scope)\n      var scopeAttrib = env.scopeAttrib(name)\n      Object.keys(new AttributeRecord()).forEach(function (prop) {\n        scope.set(scopeAttrib, '.' + prop, record[prop])\n      })\n    })\n\n    if (args.scopeVAO) {\n      scope.set(shared.vao, '.targetVAO', args.scopeVAO.append(env, scope))\n    }\n\n    function saveShader (name) {\n      var shader = args.shader[name]\n      if (shader) {\n        scope.set(shared.shader, '.' + name, shader.append(env, scope))\n      }\n    }\n    saveShader(S_VERT)\n    saveShader(S_FRAG)\n\n    if (Object.keys(args.state).length > 0) {\n      scope(CURRENT_STATE, '.dirty=true;')\n      scope.exit(CURRENT_STATE, '.dirty=true;')\n    }\n\n    scope('a1(', env.shared.context, ',a0,', env.batchId, ');')\n  }\n\n  function isDynamicObject (object) {\n    if (typeof object !== 'object' || isArrayLike(object)) {\n      return\n    }\n    var props = Object.keys(object)\n    for (var i = 0; i < props.length; ++i) {\n      if (dynamic.isDynamic(object[props[i]])) {\n        return true\n      }\n    }\n    return false\n  }\n\n  function splatObject (env, options, name) {\n    var object = options.static[name]\n    if (!object || !isDynamicObject(object)) {\n      return\n    }\n\n    var globals = env.global\n    var keys = Object.keys(object)\n    var thisDep = false\n    var contextDep = false\n    var propDep = false\n    var objectRef = env.global.def('{}')\n    keys.forEach(function (key) {\n      var value = object[key]\n      if (dynamic.isDynamic(value)) {\n        if (typeof value === 'function') {\n          value = object[key] = dynamic.unbox(value)\n        }\n        var deps = createDynamicDecl(value, null)\n        thisDep = thisDep || deps.thisDep\n        propDep = propDep || deps.propDep\n        contextDep = contextDep || deps.contextDep\n      } else {\n        globals(objectRef, '.', key, '=')\n        switch (typeof value) {\n          case 'number':\n            globals(value)\n            break\n          case 'string':\n            globals('\"', value, '\"')\n            break\n          case 'object':\n            if (Array.isArray(value)) {\n              globals('[', value.join(), ']')\n            }\n            break\n          default:\n            globals(env.link(value))\n            break\n        }\n        globals(';')\n      }\n    })\n\n    function appendBlock (env, block) {\n      keys.forEach(function (key) {\n        var value = object[key]\n        if (!dynamic.isDynamic(value)) {\n          return\n        }\n        var ref = env.invoke(block, value)\n        block(objectRef, '.', key, '=', ref, ';')\n      })\n    }\n\n    options.dynamic[name] = new dynamic.DynamicVariable(DYN_THUNK, {\n      thisDep: thisDep,\n      contextDep: contextDep,\n      propDep: propDep,\n      ref: objectRef,\n      append: appendBlock\n    })\n    delete options.static[name]\n  }\n\n  // ===========================================================================\n  // ===========================================================================\n  // MAIN DRAW COMMAND\n  // ===========================================================================\n  // ===========================================================================\n  function compileCommand (options, attributes, uniforms, context, stats) {\n    var env = createREGLEnvironment()\n\n    // link stats, so that we can easily access it in the program.\n    env.stats = env.link(stats)\n\n    // splat options and attributes to allow for dynamic nested properties\n    Object.keys(attributes.static).forEach(function (key) {\n      splatObject(env, attributes, key)\n    })\n    NESTED_OPTIONS.forEach(function (name) {\n      splatObject(env, options, name)\n    })\n\n    var args = parseArguments(options, attributes, uniforms, context, env)\n\n    emitDrawProc(env, args)\n    emitScopeProc(env, args)\n    emitBatchProc(env, args)\n\n    return extend(env.compile(), {\n      destroy: function () {\n        args.shader.program.destroy()\n      }\n    })\n  }\n\n  // ===========================================================================\n  // ===========================================================================\n  // POLL / REFRESH\n  // ===========================================================================\n  // ===========================================================================\n  return {\n    next: nextState,\n    current: currentState,\n    procs: (function () {\n      var env = createREGLEnvironment()\n      var poll = env.proc('poll')\n      var refresh = env.proc('refresh')\n      var common = env.block()\n      poll(common)\n      refresh(common)\n\n      var shared = env.shared\n      var GL = shared.gl\n      var NEXT_STATE = shared.next\n      var CURRENT_STATE = shared.current\n\n      common(CURRENT_STATE, '.dirty=false;')\n\n      emitPollFramebuffer(env, poll)\n      emitPollFramebuffer(env, refresh, null, true)\n\n      // Refresh updates all attribute state changes\n      var INSTANCING\n      if (extInstancing) {\n        INSTANCING = env.link(extInstancing)\n      }\n\n      // update vertex array bindings\n      if (extensions.oes_vertex_array_object) {\n        refresh(env.link(extensions.oes_vertex_array_object), '.bindVertexArrayOES(null);')\n      }\n      for (var i = 0; i < limits.maxAttributes; ++i) {\n        var BINDING = refresh.def(shared.attributes, '[', i, ']')\n        var ifte = env.cond(BINDING, '.buffer')\n        ifte.then(\n          GL, '.enableVertexAttribArray(', i, ');',\n          GL, '.bindBuffer(',\n          GL_ARRAY_BUFFER$2, ',',\n          BINDING, '.buffer.buffer);',\n          GL, '.vertexAttribPointer(',\n          i, ',',\n          BINDING, '.size,',\n          BINDING, '.type,',\n          BINDING, '.normalized,',\n          BINDING, '.stride,',\n          BINDING, '.offset);'\n        ).else(\n          GL, '.disableVertexAttribArray(', i, ');',\n          GL, '.vertexAttrib4f(',\n          i, ',',\n          BINDING, '.x,',\n          BINDING, '.y,',\n          BINDING, '.z,',\n          BINDING, '.w);',\n          BINDING, '.buffer=null;')\n        refresh(ifte)\n        if (extInstancing) {\n          refresh(\n            INSTANCING, '.vertexAttribDivisorANGLE(',\n            i, ',',\n            BINDING, '.divisor);')\n        }\n      }\n      refresh(\n        env.shared.vao, '.currentVAO=null;',\n        env.shared.vao, '.setVAO(', env.shared.vao, '.targetVAO);')\n\n      Object.keys(GL_FLAGS).forEach(function (flag) {\n        var cap = GL_FLAGS[flag]\n        var NEXT = common.def(NEXT_STATE, '.', flag)\n        var block = env.block()\n        block('if(', NEXT, '){',\n          GL, '.enable(', cap, ')}else{',\n          GL, '.disable(', cap, ')}',\n          CURRENT_STATE, '.', flag, '=', NEXT, ';')\n        refresh(block)\n        poll(\n          'if(', NEXT, '!==', CURRENT_STATE, '.', flag, '){',\n          block,\n          '}')\n      })\n\n      Object.keys(GL_VARIABLES).forEach(function (name) {\n        var func = GL_VARIABLES[name]\n        var init = currentState[name]\n        var NEXT, CURRENT\n        var block = env.block()\n        block(GL, '.', func, '(')\n        if (isArrayLike(init)) {\n          var n = init.length\n          NEXT = env.global.def(NEXT_STATE, '.', name)\n          CURRENT = env.global.def(CURRENT_STATE, '.', name)\n          block(\n            loop(n, function (i) {\n              return NEXT + '[' + i + ']'\n            }), ');',\n            loop(n, function (i) {\n              return CURRENT + '[' + i + ']=' + NEXT + '[' + i + '];'\n            }).join(''))\n          poll(\n            'if(', loop(n, function (i) {\n              return NEXT + '[' + i + ']!==' + CURRENT + '[' + i + ']'\n            }).join('||'), '){',\n            block,\n            '}')\n        } else {\n          NEXT = common.def(NEXT_STATE, '.', name)\n          CURRENT = common.def(CURRENT_STATE, '.', name)\n          block(\n            NEXT, ');',\n            CURRENT_STATE, '.', name, '=', NEXT, ';')\n          poll(\n            'if(', NEXT, '!==', CURRENT, '){',\n            block,\n            '}')\n        }\n        refresh(block)\n      })\n\n      return env.compile()\n    })(),\n    compile: compileCommand\n  }\n}\n\nfunction stats () {\n  return {\n    vaoCount: 0,\n    bufferCount: 0,\n    elementsCount: 0,\n    framebufferCount: 0,\n    shaderCount: 0,\n    textureCount: 0,\n    cubeCount: 0,\n    renderbufferCount: 0,\n    maxTextureUnits: 0\n  }\n}\n\nvar GL_QUERY_RESULT_EXT = 0x8866\nvar GL_QUERY_RESULT_AVAILABLE_EXT = 0x8867\nvar GL_TIME_ELAPSED_EXT = 0x88BF\n\nvar createTimer = function (gl, extensions) {\n  if (!extensions.ext_disjoint_timer_query) {\n    return null\n  }\n\n  // QUERY POOL BEGIN\n  var queryPool = []\n  function allocQuery () {\n    return queryPool.pop() || extensions.ext_disjoint_timer_query.createQueryEXT()\n  }\n  function freeQuery (query) {\n    queryPool.push(query)\n  }\n  // QUERY POOL END\n\n  var pendingQueries = []\n  function beginQuery (stats) {\n    var query = allocQuery()\n    extensions.ext_disjoint_timer_query.beginQueryEXT(GL_TIME_ELAPSED_EXT, query)\n    pendingQueries.push(query)\n    pushScopeStats(pendingQueries.length - 1, pendingQueries.length, stats)\n  }\n\n  function endQuery () {\n    extensions.ext_disjoint_timer_query.endQueryEXT(GL_TIME_ELAPSED_EXT)\n  }\n\n  //\n  // Pending stats pool.\n  //\n  function PendingStats () {\n    this.startQueryIndex = -1\n    this.endQueryIndex = -1\n    this.sum = 0\n    this.stats = null\n  }\n  var pendingStatsPool = []\n  function allocPendingStats () {\n    return pendingStatsPool.pop() || new PendingStats()\n  }\n  function freePendingStats (pendingStats) {\n    pendingStatsPool.push(pendingStats)\n  }\n  // Pending stats pool end\n\n  var pendingStats = []\n  function pushScopeStats (start, end, stats) {\n    var ps = allocPendingStats()\n    ps.startQueryIndex = start\n    ps.endQueryIndex = end\n    ps.sum = 0\n    ps.stats = stats\n    pendingStats.push(ps)\n  }\n\n  // we should call this at the beginning of the frame,\n  // in order to update gpuTime\n  var timeSum = []\n  var queryPtr = []\n  function update () {\n    var ptr, i\n\n    var n = pendingQueries.length\n    if (n === 0) {\n      return\n    }\n\n    // Reserve space\n    queryPtr.length = Math.max(queryPtr.length, n + 1)\n    timeSum.length = Math.max(timeSum.length, n + 1)\n    timeSum[0] = 0\n    queryPtr[0] = 0\n\n    // Update all pending timer queries\n    var queryTime = 0\n    ptr = 0\n    for (i = 0; i < pendingQueries.length; ++i) {\n      var query = pendingQueries[i]\n      if (extensions.ext_disjoint_timer_query.getQueryObjectEXT(query, GL_QUERY_RESULT_AVAILABLE_EXT)) {\n        queryTime += extensions.ext_disjoint_timer_query.getQueryObjectEXT(query, GL_QUERY_RESULT_EXT)\n        freeQuery(query)\n      } else {\n        pendingQueries[ptr++] = query\n      }\n      timeSum[i + 1] = queryTime\n      queryPtr[i + 1] = ptr\n    }\n    pendingQueries.length = ptr\n\n    // Update all pending stat queries\n    ptr = 0\n    for (i = 0; i < pendingStats.length; ++i) {\n      var stats = pendingStats[i]\n      var start = stats.startQueryIndex\n      var end = stats.endQueryIndex\n      stats.sum += timeSum[end] - timeSum[start]\n      var startPtr = queryPtr[start]\n      var endPtr = queryPtr[end]\n      if (endPtr === startPtr) {\n        stats.stats.gpuTime += stats.sum / 1e6\n        freePendingStats(stats)\n      } else {\n        stats.startQueryIndex = startPtr\n        stats.endQueryIndex = endPtr\n        pendingStats[ptr++] = stats\n      }\n    }\n    pendingStats.length = ptr\n  }\n\n  return {\n    beginQuery: beginQuery,\n    endQuery: endQuery,\n    pushScopeStats: pushScopeStats,\n    update: update,\n    getNumPendingQueries: function () {\n      return pendingQueries.length\n    },\n    clear: function () {\n      queryPool.push.apply(queryPool, pendingQueries)\n      for (var i = 0; i < queryPool.length; i++) {\n        extensions.ext_disjoint_timer_query.deleteQueryEXT(queryPool[i])\n      }\n      pendingQueries.length = 0\n      queryPool.length = 0\n    },\n    restore: function () {\n      pendingQueries.length = 0\n      queryPool.length = 0\n    }\n  }\n}\n\nvar GL_COLOR_BUFFER_BIT = 16384\nvar GL_DEPTH_BUFFER_BIT = 256\nvar GL_STENCIL_BUFFER_BIT = 1024\n\nvar GL_ARRAY_BUFFER = 34962\n\nvar CONTEXT_LOST_EVENT = 'webglcontextlost'\nvar CONTEXT_RESTORED_EVENT = 'webglcontextrestored'\n\nvar DYN_PROP = 1\nvar DYN_CONTEXT = 2\nvar DYN_STATE = 3\n\nfunction find (haystack, needle) {\n  for (var i = 0; i < haystack.length; ++i) {\n    if (haystack[i] === needle) {\n      return i\n    }\n  }\n  return -1\n}\n\nfunction wrapREGL (args) {\n  var config = parseArgs(args)\n  if (!config) {\n    return null\n  }\n\n  var gl = config.gl\n  var glAttributes = gl.getContextAttributes()\n  var contextLost = gl.isContextLost()\n\n  var extensionState = createExtensionCache(gl, config)\n  if (!extensionState) {\n    return null\n  }\n\n  var stringStore = createStringStore()\n  var stats$$1 = stats()\n  var extensions = extensionState.extensions\n  var timer = createTimer(gl, extensions)\n\n  var START_TIME = clock()\n  var WIDTH = gl.drawingBufferWidth\n  var HEIGHT = gl.drawingBufferHeight\n\n  var contextState = {\n    tick: 0,\n    time: 0,\n    viewportWidth: WIDTH,\n    viewportHeight: HEIGHT,\n    framebufferWidth: WIDTH,\n    framebufferHeight: HEIGHT,\n    drawingBufferWidth: WIDTH,\n    drawingBufferHeight: HEIGHT,\n    pixelRatio: config.pixelRatio\n  }\n  var uniformState = {}\n  var drawState = {\n    elements: null,\n    primitive: 4, // GL_TRIANGLES\n    count: -1,\n    offset: 0,\n    instances: -1\n  }\n\n  var limits = wrapLimits(gl, extensions)\n  var bufferState = wrapBufferState(\n    gl,\n    stats$$1,\n    config,\n    destroyBuffer)\n  var attributeState = wrapAttributeState(\n    gl,\n    extensions,\n    limits,\n    stats$$1,\n    bufferState)\n  function destroyBuffer (buffer) {\n    return attributeState.destroyBuffer(buffer)\n  }\n  var elementState = wrapElementsState(gl, extensions, bufferState, stats$$1)\n  var shaderState = wrapShaderState(gl, stringStore, stats$$1, config)\n  var textureState = createTextureSet(\n    gl,\n    extensions,\n    limits,\n    function () { core.procs.poll() },\n    contextState,\n    stats$$1,\n    config)\n  var renderbufferState = wrapRenderbuffers(gl, extensions, limits, stats$$1, config)\n  var framebufferState = wrapFBOState(\n    gl,\n    extensions,\n    limits,\n    textureState,\n    renderbufferState,\n    stats$$1)\n  var core = reglCore(\n    gl,\n    stringStore,\n    extensions,\n    limits,\n    bufferState,\n    elementState,\n    textureState,\n    framebufferState,\n    uniformState,\n    attributeState,\n    shaderState,\n    drawState,\n    contextState,\n    timer,\n    config)\n  var readPixels = wrapReadPixels(\n    gl,\n    framebufferState,\n    core.procs.poll,\n    contextState,\n    glAttributes, extensions, limits)\n\n  var nextState = core.next\n  var canvas = gl.canvas\n\n  var rafCallbacks = []\n  var lossCallbacks = []\n  var restoreCallbacks = []\n  var destroyCallbacks = [config.onDestroy]\n\n  var activeRAF = null\n  function handleRAF () {\n    if (rafCallbacks.length === 0) {\n      if (timer) {\n        timer.update()\n      }\n      activeRAF = null\n      return\n    }\n\n    // schedule next animation frame\n    activeRAF = raf.next(handleRAF)\n\n    // poll for changes\n    poll()\n\n    // fire a callback for all pending rafs\n    for (var i = rafCallbacks.length - 1; i >= 0; --i) {\n      var cb = rafCallbacks[i]\n      if (cb) {\n        cb(contextState, null, 0)\n      }\n    }\n\n    // flush all pending webgl calls\n    gl.flush()\n\n    // poll GPU timers *after* gl.flush so we don't delay command dispatch\n    if (timer) {\n      timer.update()\n    }\n  }\n\n  function startRAF () {\n    if (!activeRAF && rafCallbacks.length > 0) {\n      activeRAF = raf.next(handleRAF)\n    }\n  }\n\n  function stopRAF () {\n    if (activeRAF) {\n      raf.cancel(handleRAF)\n      activeRAF = null\n    }\n  }\n\n  function handleContextLoss (event) {\n    event.preventDefault()\n\n    // set context lost flag\n    contextLost = true\n\n    // pause request animation frame\n    stopRAF()\n\n    // lose context\n    lossCallbacks.forEach(function (cb) {\n      cb()\n    })\n  }\n\n  function handleContextRestored (event) {\n    // clear error code\n    gl.getError()\n\n    // clear context lost flag\n    contextLost = false\n\n    // refresh state\n    extensionState.restore()\n    shaderState.restore()\n    bufferState.restore()\n    textureState.restore()\n    renderbufferState.restore()\n    framebufferState.restore()\n    attributeState.restore()\n    if (timer) {\n      timer.restore()\n    }\n\n    // refresh state\n    core.procs.refresh()\n\n    // restart RAF\n    startRAF()\n\n    // restore context\n    restoreCallbacks.forEach(function (cb) {\n      cb()\n    })\n  }\n\n  if (canvas) {\n    canvas.addEventListener(CONTEXT_LOST_EVENT, handleContextLoss, false)\n    canvas.addEventListener(CONTEXT_RESTORED_EVENT, handleContextRestored, false)\n  }\n\n  function destroy () {\n    rafCallbacks.length = 0\n    stopRAF()\n\n    if (canvas) {\n      canvas.removeEventListener(CONTEXT_LOST_EVENT, handleContextLoss)\n      canvas.removeEventListener(CONTEXT_RESTORED_EVENT, handleContextRestored)\n    }\n\n    shaderState.clear()\n    framebufferState.clear()\n    renderbufferState.clear()\n    textureState.clear()\n    elementState.clear()\n    bufferState.clear()\n    attributeState.clear()\n\n    if (timer) {\n      timer.clear()\n    }\n\n    destroyCallbacks.forEach(function (cb) {\n      cb()\n    })\n  }\n\n  function compileProcedure (options) {\n    check$1(!!options, 'invalid args to regl({...})')\n    check$1.type(options, 'object', 'invalid args to regl({...})')\n\n    function flattenNestedOptions (options) {\n      var result = extend({}, options)\n      delete result.uniforms\n      delete result.attributes\n      delete result.context\n      delete result.vao\n\n      if ('stencil' in result && result.stencil.op) {\n        result.stencil.opBack = result.stencil.opFront = result.stencil.op\n        delete result.stencil.op\n      }\n\n      function merge (name) {\n        if (name in result) {\n          var child = result[name]\n          delete result[name]\n          Object.keys(child).forEach(function (prop) {\n            result[name + '.' + prop] = child[prop]\n          })\n        }\n      }\n      merge('blend')\n      merge('depth')\n      merge('cull')\n      merge('stencil')\n      merge('polygonOffset')\n      merge('scissor')\n      merge('sample')\n\n      if ('vao' in options) {\n        result.vao = options.vao\n      }\n\n      return result\n    }\n\n    function separateDynamic (object, useArrays) {\n      var staticItems = {}\n      var dynamicItems = {}\n      Object.keys(object).forEach(function (option) {\n        var value = object[option]\n        if (dynamic.isDynamic(value)) {\n          dynamicItems[option] = dynamic.unbox(value, option)\n          return\n        } else if (useArrays && Array.isArray(value)) {\n          for (var i = 0; i < value.length; ++i) {\n            if (dynamic.isDynamic(value[i])) {\n              dynamicItems[option] = dynamic.unbox(value, option)\n              return\n            }\n          }\n        }\n        staticItems[option] = value\n      })\n      return {\n        dynamic: dynamicItems,\n        static: staticItems\n      }\n    }\n\n    // Treat context variables separate from other dynamic variables\n    var context = separateDynamic(options.context || {}, true)\n    var uniforms = separateDynamic(options.uniforms || {}, true)\n    var attributes = separateDynamic(options.attributes || {}, false)\n    var opts = separateDynamic(flattenNestedOptions(options), false)\n\n    var stats$$1 = {\n      gpuTime: 0.0,\n      cpuTime: 0.0,\n      count: 0\n    }\n\n    var compiled = core.compile(opts, attributes, uniforms, context, stats$$1)\n\n    var draw = compiled.draw\n    var batch = compiled.batch\n    var scope = compiled.scope\n\n    // FIXME: we should modify code generation for batch commands so this\n    // isn't necessary\n    var EMPTY_ARRAY = []\n    function reserve (count) {\n      while (EMPTY_ARRAY.length < count) {\n        EMPTY_ARRAY.push(null)\n      }\n      return EMPTY_ARRAY\n    }\n\n    function REGLCommand (args, body) {\n      var i\n      if (contextLost) {\n        check$1.raise('context lost')\n      }\n      if (typeof args === 'function') {\n        return scope.call(this, null, args, 0)\n      } else if (typeof body === 'function') {\n        if (typeof args === 'number') {\n          for (i = 0; i < args; ++i) {\n            scope.call(this, null, body, i)\n          }\n        } else if (Array.isArray(args)) {\n          for (i = 0; i < args.length; ++i) {\n            scope.call(this, args[i], body, i)\n          }\n        } else {\n          return scope.call(this, args, body, 0)\n        }\n      } else if (typeof args === 'number') {\n        if (args > 0) {\n          return batch.call(this, reserve(args | 0), args | 0)\n        }\n      } else if (Array.isArray(args)) {\n        if (args.length) {\n          return batch.call(this, args, args.length)\n        }\n      } else {\n        return draw.call(this, args)\n      }\n    }\n\n    return extend(REGLCommand, {\n      stats: stats$$1,\n      destroy: function () {\n        compiled.destroy()\n      }\n    })\n  }\n\n  var setFBO = framebufferState.setFBO = compileProcedure({\n    framebuffer: dynamic.define.call(null, DYN_PROP, 'framebuffer')\n  })\n\n  function clearImpl (_, options) {\n    var clearFlags = 0\n    core.procs.poll()\n\n    var c = options.color\n    if (c) {\n      gl.clearColor(+c[0] || 0, +c[1] || 0, +c[2] || 0, +c[3] || 0)\n      clearFlags |= GL_COLOR_BUFFER_BIT\n    }\n    if ('depth' in options) {\n      gl.clearDepth(+options.depth)\n      clearFlags |= GL_DEPTH_BUFFER_BIT\n    }\n    if ('stencil' in options) {\n      gl.clearStencil(options.stencil | 0)\n      clearFlags |= GL_STENCIL_BUFFER_BIT\n    }\n\n    check$1(!!clearFlags, 'called regl.clear with no buffer specified')\n    gl.clear(clearFlags)\n  }\n\n  function clear (options) {\n    check$1(\n      typeof options === 'object' && options,\n      'regl.clear() takes an object as input')\n    if ('framebuffer' in options) {\n      if (options.framebuffer &&\n          options.framebuffer_reglType === 'framebufferCube') {\n        for (var i = 0; i < 6; ++i) {\n          setFBO(extend({\n            framebuffer: options.framebuffer.faces[i]\n          }, options), clearImpl)\n        }\n      } else {\n        setFBO(options, clearImpl)\n      }\n    } else {\n      clearImpl(null, options)\n    }\n  }\n\n  function frame (cb) {\n    check$1.type(cb, 'function', 'regl.frame() callback must be a function')\n    rafCallbacks.push(cb)\n\n    function cancel () {\n      // FIXME:  should we check something other than equals cb here?\n      // what if a user calls frame twice with the same callback...\n      //\n      var i = find(rafCallbacks, cb)\n      check$1(i >= 0, 'cannot cancel a frame twice')\n      function pendingCancel () {\n        var index = find(rafCallbacks, pendingCancel)\n        rafCallbacks[index] = rafCallbacks[rafCallbacks.length - 1]\n        rafCallbacks.length -= 1\n        if (rafCallbacks.length <= 0) {\n          stopRAF()\n        }\n      }\n      rafCallbacks[i] = pendingCancel\n    }\n\n    startRAF()\n\n    return {\n      cancel: cancel\n    }\n  }\n\n  // poll viewport\n  function pollViewport () {\n    var viewport = nextState.viewport\n    var scissorBox = nextState.scissor_box\n    viewport[0] = viewport[1] = scissorBox[0] = scissorBox[1] = 0\n    contextState.viewportWidth =\n      contextState.framebufferWidth =\n      contextState.drawingBufferWidth =\n      viewport[2] =\n      scissorBox[2] = gl.drawingBufferWidth\n    contextState.viewportHeight =\n      contextState.framebufferHeight =\n      contextState.drawingBufferHeight =\n      viewport[3] =\n      scissorBox[3] = gl.drawingBufferHeight\n  }\n\n  function poll () {\n    contextState.tick += 1\n    contextState.time = now()\n    pollViewport()\n    core.procs.poll()\n  }\n\n  function refresh () {\n    textureState.refresh()\n    pollViewport()\n    core.procs.refresh()\n    if (timer) {\n      timer.update()\n    }\n  }\n\n  function now () {\n    return (clock() - START_TIME) / 1000.0\n  }\n\n  refresh()\n\n  function addListener (event, callback) {\n    check$1.type(callback, 'function', 'listener callback must be a function')\n\n    var callbacks\n    switch (event) {\n      case 'frame':\n        return frame(callback)\n      case 'lost':\n        callbacks = lossCallbacks\n        break\n      case 'restore':\n        callbacks = restoreCallbacks\n        break\n      case 'destroy':\n        callbacks = destroyCallbacks\n        break\n      default:\n        check$1.raise('invalid event, must be one of frame,lost,restore,destroy')\n    }\n\n    callbacks.push(callback)\n    return {\n      cancel: function () {\n        for (var i = 0; i < callbacks.length; ++i) {\n          if (callbacks[i] === callback) {\n            callbacks[i] = callbacks[callbacks.length - 1]\n            callbacks.pop()\n            return\n          }\n        }\n      }\n    }\n  }\n\n  var regl = extend(compileProcedure, {\n    // Clear current FBO\n    clear: clear,\n\n    // Short cuts for dynamic variables\n    prop: dynamic.define.bind(null, DYN_PROP),\n    context: dynamic.define.bind(null, DYN_CONTEXT),\n    this: dynamic.define.bind(null, DYN_STATE),\n\n    // executes an empty draw command\n    draw: compileProcedure({}),\n\n    // Resources\n    buffer: function (options) {\n      return bufferState.create(options, GL_ARRAY_BUFFER, false, false)\n    },\n    elements: function (options) {\n      return elementState.create(options, false)\n    },\n    texture: textureState.create2D,\n    cube: textureState.createCube,\n    renderbuffer: renderbufferState.create,\n    framebuffer: framebufferState.create,\n    framebufferCube: framebufferState.createCube,\n    vao: attributeState.createVAO,\n\n    // Expose context attributes\n    attributes: glAttributes,\n\n    // Frame rendering\n    frame: frame,\n    on: addListener,\n\n    // System limits\n    limits: limits,\n    hasExtension: function (name) {\n      return limits.extensions.indexOf(name.toLowerCase()) >= 0\n    },\n\n    // Read pixels\n    read: readPixels,\n\n    // Destroy regl and all associated resources\n    destroy: destroy,\n\n    // Direct GL state manipulation\n    _gl: gl,\n    _refresh: refresh,\n\n    poll: function () {\n      poll()\n      if (timer) {\n        timer.update()\n      }\n    },\n\n    // Current time\n    now: now,\n\n    // regl Statistics Information\n    stats: stats$$1\n  })\n\n  config.onDone(null, regl)\n\n  return regl\n}\n\nreturn wrapREGL;\n\n})));\n//# sourceMappingURL=regl.js.map\n","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n"],"names":["window","NodeList","prototype","forEach","Array","arr","item","Object","hasOwnProperty","call","defineProperty","configurable","enumerable","writable","value","args","docFrag","document","createDocumentFragment","arg","isNode","Node","appendChild","createTextNode","String","this","Element","Document","DocumentFragment","render","_vm","_c","_self","staticClass","attrs","on","goBack","staticStyle","removeTab","model","activeTabId","callback","$$v","expression","_l","tabsArr","key","id","toString","serviceName","directives","name","rawName","mode","staticRenderFns","_v","_s","editStatuStr","uploadVersion","$event","stopPropagation","handleCommand","slot","onlineVersionAPI","params","fetch","method","url","props","serviceId","type","Number","data","versionId","methods","payload","resetVersion","setTimeout","store","res","code","$message","success","fetchStatuTitle","resetServiceAPI","statuRes","getStatuTitleAPI","error","console","initVuexListen","mutation","state","getVersionId","getVersionIdAPI","mounted","component","isEdit","_e","anyliseFilterForm","$set","anyliseVersionList","humanVersion","dataType","time","search","showNodeDetail","updateDetail","showDetail","class","handleCompositionDrag","containerId","addZoom","reduceZoom","Disposable","disposed","_disposed","dispose","target","methodName","descriptor","raw","proto","__proto__","DisposableSet","constructor","isDisposed","items","Set","clear","contains","has","add","remove","delete","from","set","freeGlobal","global","freeSelf","self","root","Function","now","reWhitespace","trimmedEndIndex","string","index","length","test","charAt","reTrimStart","baseTrim","slice","replace","objectProto","nativeObjectToString","symToStringTag","undefined","getRawTag","isOwn","tag","unmasked","e","result","objectToString","nullTag","undefinedTag","baseGetTag","isObjectLike","symbolTag","isSymbol","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","toNumber","other","valueOf","isBinary","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","debounce","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","thisArg","apply","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","arguments","throttle","fn","ctx","isAsyncLike","obj","then","isAsync","Promise","toAsyncBoolean","inputs","results","isArray","push","hasAsync","some","deferres","map","resolve","all","reduce","memo","every","toDeferredBoolean","ret","list","i","handler","context","Events","listeners","cache","once","cb","off","names","keys","n","splice","trigger","returned","emit","baseHas","object","reIsDeepProp","reIsPlainProp","isKey","asyncTag","funcTag","genTag","proxyTag","isFunction","coreJsData","maskSrcKey","uid","exec","isMasked","funcProto","funcToString","toSource","reRegExpChar","reIsHostCtor","reIsNative","RegExp","baseIsNative","pattern","getValue","getNative","nativeCreate","hashClear","__data__","size","hashDelete","HASH_UNDEFINED","hashGet","hashHas","hashSet","Hash","entries","entry","get","listCacheClear","eq","assocIndexOf","array","arrayProto","listCacheDelete","lastIndex","pop","listCacheGet","listCacheHas","listCacheSet","ListCache","mapCacheClear","isKeyable","getMapData","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","memoize","resolver","memoized","Cache","MAX_MEMOIZE_SIZE","memoizeCapped","rePropName","reEscapeChar","stringToPath","charCodeAt","match","number","quote","subString","arrayMap","iteratee","INFINITY","symbolProto","symbolToString","baseToString","castPath","argsTag","baseIsArguments","propertyIsEnumerable","isArguments","MAX_SAFE_INTEGER","reIsUint","isIndex","isLength","toKey","hasPath","path","hasFunc","baseGet","baseAssignValue","assignValue","objValue","baseSet","customizer","nested","newValue","basePickBy","paths","predicate","baseHasIn","hasIn","basePick","arrayPush","values","offset","spreadableSymbol","isFlattenable","baseFlatten","depth","isStrict","flatten","overRest","start","transform","otherArgs","constant","identity","baseSetToString","HOT_COUNT","HOT_SPAN","nativeNow","Date","shortOut","count","lastCalled","stamp","remaining","setToString","flatRest","stackClear","stackDelete","stackGet","stackHas","LARGE_ARRAY_SIZE","stackSet","pairs","Stack","assignMergeValue","createBaseFor","fromRight","keysFunc","iterable","baseFor","freeExports","exports","nodeType","freeModule","module","moduleExports","Buffer","allocUnsafe","cloneBuffer","buffer","isDeep","copy","cloneArrayBuffer","arrayBuffer","byteLength","cloneTypedArray","typedArray","byteOffset","copyArray","source","objectCreate","create","baseCreate","overArg","getPrototype","getPrototypeOf","isPrototype","Ctor","initCloneObject","isArrayLike","isArrayLikeObject","stubFalse","nativeIsBuffer","isBuffer","objectTag","objectCtorString","isPlainObject","arrayTag","boolTag","dateTag","errorTag","mapTag","numberTag","regexpTag","setTag","stringTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","typedArrayTags","baseIsTypedArray","baseUnary","freeProcess","nodeUtil","types","require","binding","nodeIsTypedArray","isTypedArray","safeGet","copyObject","isNew","baseTimes","arrayLikeKeys","inherited","isArr","isArg","isBuff","isType","skipIndexes","nativeKeysIn","baseKeysIn","isProto","keysIn","toPlainObject","baseMergeDeep","srcIndex","mergeFunc","stack","srcValue","stacked","isCommon","isTyped","baseMerge","baseRest","isIterateeCall","createAssigner","assigner","sources","guard","merge","setCacheAdd","setCacheHas","SetCache","arraySome","cacheHas","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","equalArrays","bitmask","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","mapToArray","setToArray","symbolValueOf","equalByTag","message","convert","baseGetAllKeys","symbolsFunc","arrayFilter","resIndex","stubArray","nativeGetSymbols","getOwnPropertySymbols","getSymbols","symbol","nativeKeys","baseKeys","getAllKeys","equalObjects","objProps","objLength","othProps","objStacked","skipCtor","objCtor","othCtor","DataView","promiseTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","ctorString","baseIsEqualDeep","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","baseIsEqual","isEqual","isEmpty","arrayEach","baseAssign","baseAssignIn","copySymbols","getSymbolsIn","copySymbolsIn","getAllKeysIn","initCloneArray","input","cloneDataView","dataView","reFlags","cloneRegExp","regexp","cloneSymbol","initCloneByTag","baseIsMap","nodeIsMap","isMap","baseIsSet","nodeIsSet","isSet","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","cloneableTags","baseClone","isFlat","isFull","isFunc","subValue","clone","cloneDeep","defaults","propsIndex","propsLength","customDefaultsMerge","mergeWith","defaultsDeep","applyMixins","derivedCtor","baseCtors","baseCtor","getOwnPropertyNames","getOwnPropertyDescriptor","extendStatics","setPrototypeOf","d","b","p","inherit","cls","base","tmp","A","isNativeClass","createClass","className","isMaliciousProp","prop","getByPath","delimiter","split","shift","setByPath","lastKey","diver","unsetByPath","propertyToRemove","parent","Basecoat","baseFindIndex","fromIndex","baseIsNaN","strictIndexOf","baseIndexOf","arrayIncludes","arrayIncludesWith","comparator","noop","createSet","baseUniq","includes","outer","computed","seenIndex","uniq","union","arrays","MAX_ARRAY_LENGTH","MAX_ARRAY_INDEX","nativeFloor","floor","baseSortedIndexBy","retHighest","low","high","valIsNaN","valIsNull","valIsSymbol","valIsUndefined","mid","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","setLow","HALF_MAX_ARRAY_LENGTH","baseSortedIndex","sortedIndex","baseIsMatch","matchData","noCustomizer","isStrictComparable","getMatchData","matchesStrictComparable","baseMatches","defaultValue","baseMatchesProperty","baseProperty","basePropertyDeep","property","baseIteratee","sortedIndexBy","baseForOwn","createBaseEach","eachFunc","collection","baseEach","baseMap","baseSortBy","comparer","sort","compareAscending","valIsDefined","valIsReflexive","compareMultiple","orders","objCriteria","criteria","othCriteria","ordersLength","order","baseOrderBy","iteratees","sortBy","arrayAggregator","setter","accumulator","baseAggregator","createAggregator","initializer","groupBy","baseDifference","valuesLength","valuesIndex","difference","baseExtremum","current","baseGt","arrayReduce","initAccum","basePropertyOf","deburredLetters","deburrLetter","reLatin","rsComboMarksRange","reComboHalfMarksRange","rsComboSymbolsRange","rsComboRange","rsCombo","reComboMark","deburr","reAsciiWord","asciiWords","reHasUnicodeWord","hasUnicodeWord","rsAstralRange","rsDingbatRange","rsLowerRange","rsMathOpRange","rsNonCharRange","rsPunctuationRange","rsSpaceRange","rsUpperRange","rsVarRange","rsBreakRange","rsApos","rsBreak","rsDigits","rsDingbat","rsLower","rsMisc","rsFitz","rsModifier","rsNonAstral","rsRegional","rsSurrPair","rsUpper","rsZWJ","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod","rsOptVar","rsOptJoin","join","rsOrdLower","rsOrdUpper","rsSeq","rsEmoji","reUnicodeWord","unicodeWords","words","reApos","createCompounder","baseSlice","end","castSlice","reHasUnicode","hasUnicode","asciiToArray","rsAstral","rsSymbol","reUnicode","unicodeToArray","stringToArray","createCaseFirst","strSymbols","chr","upperFirst","startCase","word","capitalize","toLowerCase","camelCase","upperCase","toUpperCase","lowerCase","lowerFirst","cacheStringFunction","str","hit","kebabCase","s","pascalCase","hashcode","hash","isUnicoded","ii","characterCode","unescape","encodeURIComponent","uuid","template","len","r","random","v","getSpellingSuggestion","candidates","getName","maximumLengthDifference","bestCandidate","bestDistance","justCheckExactMatches","nameLowerCase","candidate","candidateName","abs","candidateNameLowerCase","distance","levenshteinWithMax","s1","s2","previous","big","c1","minJ","maxJ","colMin","j","dist","temp","isNumber","baseClamp","lower","upper","clamp","val","normalizePercentage","num","ref","parseFloat","isFinite","normalizeSides","box","left","top","right","bottom","vertical","horizontal","_IS_MAC","_IS_IOS","_IS_WINDOWS","_IS_IE","_IS_IE11","_IS_EDGE","_IS_NETSCAPE","_IS_CHROME_APP","_IS_CHROME","_IS_OPERA","_IS_FIREFOX","_IS_SAFARI","_SUPPORT_TOUCH","_SUPPORT_POINTER","_SUPPORT_PASSIVE","_NO_FOREIGNOBJECT","navigator","ua","userAgent","indexOf","createElementNS","chrome","app","runtime","PointerEvent","documentElement","div","createElement","addEventListener","err","Platform","IS_MAC","IS_IOS","IS_WINDOWS","IS_IE","IS_IE11","IS_EDGE","IS_NETSCAPE","IS_CHROME_APP","IS_CHROME","IS_OPERA","IS_FIREFOX","IS_SAFARI","SUPPORT_TOUCH","SUPPORT_POINTER","SUPPORT_PASSIVE","NO_FOREIGNOBJECT","SUPPORT_FOREIGNOBJECT","getHMRStatus","mod","hot","status","isApplyingHMR","TAGNAMES","select","change","submit","reset","load","abort","isEventSupported","event","elem","eventName","isSupported","setAttribute","rclass","rnotwhite","fillSpaces","getClass","getAttribute","hasClass","selector","classNames","addClass","classes","oldValue","trim","removeClass","toggleClass","stateVal","metches","ensureId","isSVGGraphicsElement","getScreenCTM","SVGElement","svg","xmlns","xml","xlink","xhtml","svgVersion","tagName","doc","namespaceURI","createSvgElement","createSvgDocument","content","parseXML","async","setAttributeNS","parser","DOMParser","instance","parseFromString","mimeType","getElementsByTagName","Error","node","lowercase","nodeName","previousSibling","find","querySelectorAll","findOne","querySelector","findParentByClass","terminator","ownerSVGElement","parentNode","child","bup","compareDocumentPosition","elems","removeChild","empty","firstChild","append","prepend","before","insertBefore","appendTo","isHTMLElement","HTMLElement","style","ownerDocument","CASE_SENSITIVE_ATTR","removeAttribute","qualified","qualifyAttr","ns","hasAttributeNS","local","removeAttributeNS","hasAttribute","setAttributes","attr","attributes","combinedKey","kebablizeAttrs","styleToObject","styleString","styles","section","pair","mergeAttrs","to","so","tt","ss","annotate","t","annotations","opt","compacted","curr","prev","batch","jj","annotation","includeAnnotationIndices","JSON","stringify","sanitize","text","DataUri","millimeterSize","isDataUrl","prefix","substr","imageToDataUri","onError","onLoad","FileReader","xhr","reader","onload","evt","dataUri","onerror","readAsDataURL","response","u8a","CHUNK_SZ","c","fromCharCode","subarray","suffix","meta","bytes","Uint8Array","base64","btoa","XMLHttpRequest","responseType","open","send","dataUriToBlob","dataUrl","uri","decodeURIComponent","mime","decodedString","atob","ia","Blob","downloadBlob","blob","fileName","msSaveBlob","URL","createObjectURL","link","href","download","body","click","revokeObjectURL","downloadDataUri","parseViewBox","matches","getNumber","isNaN","svgToDataUrl","viewBox","getNumberFromViewBox","getNumberFromMatches","reg","w","width","h","height","decoded","header","supportedUnits","px","mm","cm","in","pt","pc","Unit","measure","cssWidth","cssHeight","unit","display","position","rect","getBoundingClientRect","toPx","hyphenPattern","camelize","_","char","prefixes","testStyle","getWithPrefix","prefixedName","getVendorPrefixedName","capitalizedName","defaultView","opener","getComputedStyle","getPropertyValue","selection","getSelection","numericProps","animationIterationCount","columnCount","flexGrow","flexShrink","fontWeight","gridArea","gridColumn","gridColumnEnd","gridColumnStart","gridRow","gridRowEnd","gridRowStart","lineHeight","opacity","orphans","widows","zIndex","isCSSVariable","computeStyle","isVariable","getSuffixedValue","css","setProperty","dataset","WeakMap","getData","setData","datas","Vector","toStringTag","Symbol","children","isVector","importNode","matrix","translate","tx","ty","rotate","angle","cx","cy","scale","sx","sy","getTransformToElement","toNode","SVGSVGElement","defs","defsNode","cloneNode","toNodes","replaceChild","first","last","lastChild","childNodes","vels","nodes","found","matcher","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","wrap","vel","currentChild","eachChild","deep","l","toLocalPoint","x","y","sample","interval","SVGPathElement","toPath","toPathData","vector","createVectors","markup","svgDoc","childNode","canvasContext","getContext","createTextPathNode","textPath","annotateTextLine","lineNode","lineAnnotations","eol","baseSize","tspanNode","maxFontSize","fontMetrics","lastJ","fontSize","annotationAttrs","vTSpan","textContent","annotationClass","emRegex","emToPx","em","numerical","calculateDY","alignment","linesMetrics","baseSizePx","lineMetrics","flMaxFont","rLineHeights","lineHeightPx","iLineHeight","llMaxFont","dy","verticalAnchor","textVerticalAnchor","namedVerticalAnchor","iai","defaultLineHeight","autoLineHeight","needEmpty","displayEmpty","strFontSize","containerNode","annotatedY","lines","lastI","lineClassName","line","lineNodeStyle","fillOpacity","strokeOpacity","baseVal","rh","firstLine","measureText","font","splitTextByLength","splitWidth","totalWidth","caches","round","frontText","frontWidth","behindText","behindWidth","breakText","textWidth","ceil","maxLines","remainText","remainWidth","ellipsis","ellipsisWidth","isLast","front","behind","KAPPA","getNumbericAttribute","NaN","getTotalLength","samples","getPointAtLength","lineToPathData","polygonToPathData","polygon","points","getPointsFromSvgElement","svgPointsToPath","polylineToPathData","polyline","nodePoints","numberOfItems","getItem","circleToPathData","circle","cd","ellipseToPathData","ellipse","rx","ry","cdx","cdy","rectangleToPathData","rectToPathData","topRx","bottomRx","topRy","bottomRy","svgDocument","transformRegex","transformSeparatorRegex","transformationListRegex","createSVGPoint","createSVGMatrix","mat","createSVGTransform","DOMMatrix","createSVGTransformFromMatrix","transformStringToMatrix","transformationString","transformationMatch","ctm","scaleNonUniform","skewX","skewY","a","f","multiply","matrixToTransformString","m","parseTransformString","translation","rotation","separator","decomposedMatrix","decomposeMatrix","translateX","translateY","scaleX","scaleY","transformations","translateMatch","rotateMatch","scaleMatch","deltaTransformPoint","point","dx","py","PI","atan2","sqrt","matrixToScale","matrixToRotation","deg","matrixToTranslation","absolute","transformList","svgTransform","appendItem","transformAttr","newTx","newTy","newTranslate","newAngle","newOrigin","newRotate","newScale","targetCTM","nodeCTM","inverse","getTransformToParentElement","matrixList","nodeMatrix","reverse","globalPoint","matrixTransform","globalToLocalMatrix","EventHook","Store","Util","Special","register","hook","unregister","ensure","events","stopPropagationCallback","removeEventListener","returnTrue","returnFalse","rNotHTMLWhite","rNamespace","splitType","normalizeType","parts","originType","namespaces","isValidTarget","isValidSelector","seed","ensureHandlerId","getHandlerId","removeHandlerId","setHandlerId","getHandlerQueue","queue","bag","handlers","delegateCount","button","disabled","matchedHandlers","matchedSelectors","handleObj","isWindow","adown","EventObject","isDefaultPrevented","isPropagationStopped","isImmediatePropagationStopped","isSimulated","preventDefault","originalEvent","stopImmediatePropagation","defaultPrevented","currentTarget","relatedTarget","timeStamp","assign","addProperty","commonProps","bubbles","cancelable","eventPhase","detail","view","buttons","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement","pointerId","pointerType","charCode","keyCode","touches","changedTouches","targetTouches","which","altKey","ctrlKey","metaKey","shiftKey","noBubble","postDispatch","returnValue","delegateType","bindType","handle","related","Core","Event","Private","__rest","triggered","handlerData","others","mainHandler","dispatch","guid","namespace","setup","mappedTypes","rns","originHandlerCount","teardown","delegateTarget","preDispatch","handlerQueue","matched","k","rnamespace","hookHandle","eventArgs","onlyHandlers","eventObj","ontype","bubbleType","eventPath","win","parentWindow","lastElement","currElement","originHandler","MouseWheelHandle","onWheelCallback","onWheelGuard","animationFrameId","deltaX","deltaY","onWheel","bind","didWheel","enable","passive","disable","changed","requestAnimationFrame","pageYOffset","pageXOffset","delay","timer","createSensor","element","sensor","contentDocument","overflow","pointerEvents","listener","destroy","unbind","idx","ResizeObserver","observe","disconnect","SizeSensor","Dijkstra","ModifierKey","Timing","Interp","PriorityQueue","defaultComparator","heapify","insert","priority","bubbleUp","peek","peekPriority","updatePriority","oldPriority","comp","bubbleDown","minIndex","run","adjacencyList","weight","u","scanned","Infinity","neighbours","alt","Color","color","g","fromString","blend","lighten","amount","rgba","toArray","darken","arg0","arg1","arg2","arg3","toHex","hex","toRGBA","toHSLA","rgba2hsla","toCSS","ignoreAlpha","rgb","toGrey","makeGrey","fromArray","fromHex","hex2rgb","fromRGBA","hue2rgb","m1","m2","h6","fromHSLA","hsla2rgba","startsWith","preset","named","toFixed","randomHex","letters","randomRGBA","invert","bw","pound","rgb2hex","bits","mask","bgr","pad","amt","lum","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","burntsienna","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","Dictionary","each","iterator","parse","modifiers","or","and","equals","modifiers1","modifiers2","or1","or2","and1","and2","equal","a1","a2","isMatch","strict","linear","quad","cubic","inout","t2","t3","exponential","pow","bounce","q","decorators","reflect","back","elastic","cos","easeInSine","easeOutSine","sin","easeInOutSine","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","t1","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInExpo","easeOutExpo","easeInOutExpo","scaledTime","scaledTime1","easeInCirc","easeOutCirc","easeInOutCirc","easeInBack","magnitude","easeOutBack","easeInOutBack","scaledTime2","easeInElastic","asin","easeOutElastic","easeInOutElastic","easeOutBounce","easeInBounce","easeInOutBounce","ma","mb","pb","aa","bb","precision","ca","ra","rd","ga","gd","ba","bd","cssModules","cssModule","loadTimes","styleElement","head","clean","findIndex","Angle","GeometryUtil","toDeg","rad","normalize","toRad","over360","isInteger","mmin","mmax","snapToGrid","gridSize","containsPoint","squaredLength","p1","p2","Geometry","toJSON","Point","super","update","degree","center","origin","closest","squaredDistance","manhattanDistance","theta","angleBetween","vectorAngle","zero","toPolar","changeInAngle","adhereToRect","bearing","lat1","lat2","lon1","lon2","dLon","brng","bearings","cross","dot","diff","lerp","move","reflection","gx","gy","serialize","isPoint","isPointLike","isPointData","fromPolar","org","o","equalPoints","x1","x2","y1","y2","rotateEx","Rectangle","topLeft","topCenter","topRight","bottomLeft","bottomCenter","bottomRight","corner","rightMiddle","leftMiddle","topLine","Line","rightLine","bottomLine","leftLine","getOrigin","getTopLeft","getTopCenter","getTopRight","getCenter","getCenterX","getCenterY","getBottomLeft","getBottomCenter","getBottomRight","getCorner","getRightMiddle","getLeftMiddle","getTopLine","getRightLine","getBottomLine","getLeftLine","bbox","st","ct","minX","minY","maxX","maxY","inflate","pos","p3","p4","rotate90","moveAndExpand","getMaxScaleToFit","limit","ox","oy","sx1","sx2","sx3","sx4","sy1","sy2","sy3","sy4","getMaxUniformScaleToFit","containsRect","w1","h1","w2","h2","intersectsWithLine","rectLines","dedupeArr","intersectsWithLineFromCenterToPoint","sides","connector","intersection","intersectsWithRect","isIntersectWithRect","myOrigin","myCorner","rOrigin","rCorner","xx","yy","newx","newy","newwidth","newheight","originX","originY","cornerX","cornerY","getNearestSideToPoint","distLeft","distRight","distTop","distBottom","side","getNearestPointToPoint","isRectangle","isRectangleLike","fromEllipse","fromSize","fromPositionAndSize","setLength","total","parallel","isDifferentiable","eRef","sRef","closestPoint","pointAt","closestPointNormalizedLength","closestPointLength","closestPointTangent","tangentAt","product","normalized","ratio","pointAtLength","fromStart","rate","divideAt","dividerPoint","divideAtLength","intersect","shape","pt1Dir","pt2Dir","det","deltaPt","alpha","beta","pointOffset","determinant","pointSquaredDistance","pointDistance","tangentStart","tangentLine","tangentAtLength","relativeCcw","dx1","dy1","dx2","dy2","ccw","isLine","Ellipse","normalizedDistance","intersections","dir","mDir","mDiff","ta","tb","mSquared","aSquared","bSquared","tangentTheta","x0","y0","refPointDelta","q1","q3","fromRect","isEllipse","regexSupportedData","isValid","draw","initialMove","close","exclude","rounded","arcSize","p0","wp","nx1","ny1","next","nx2","ny2","drawPoints","pts","arcToCurves","r1","r2","largeArcFlag","sweepFlag","cty","cpsi","spsi","rxd","ryd","rxdd","rydd","r1x","r2y","lamda","sds","seif","txd","tyd","dr","sse","seg","segr","cpsir1","cpsir2","spsir1","spsir2","mc","ms","x3","y3","drawArc","startX","startY","xAxisRotation","stopX","stopY","Polyline","cpLength","minSqrDistance","lineLength","cpNormalizedLength","cp","sqrDistance","startIndex","intersectionCount","endIndex","segment","xDifference","rayEnd","ray","int","lastPoint","lastValidLine","simplify","threshold","currentIndex","firstIndex","middleIndex","firstPoint","middlePoint","chord","closestPointDistance","toHull","startPoint","sortedRecords","record1","record2","unshift","insidePoints","hullRecords","getKey","record","currentRecord","currentPoint","correctTurnFound","lastHullRecord","lastHullPoint","secondLastHullRecord","secondLastHullPoint","crossProduct","THRESHOLD","lowestHullIndex","indexOfLowestHullIndexRecord","currentHullIndex","hullPointRecordsReordered","newFirstChunk","newSecondChunk","concat","hullPoints","isPolyline","svgString","coords","Curve","controlPoint1","controlPoint2","PRECISION","tvalues","bounds","b2ac","sqrtb2ac","mt","jlen","X","Y","pointAtT","closestPointT","opts","getOptions","lengthAtT","getPrecision","subdivisions","getDivisions","precisionRatio","investigatedSubdivision","investigatedSubdivisionStartT","investigatedSubdivisionEndT","distFromStart","distFromEnd","chordLength","minSumDist","piece","division","startDist","endDist","sumDist","endpointDistance","startPrecisionRatio","endPrecisionRatio","hasRequiredPrecision","hasMiniStartDistance","hasMiniEndDistance","hasMiniDistance","divided","divide","startDist1","endDist1","sumDist1","startDist2","endDist2","sumDist2","tangentAtT","toPolyline","divideAtT","tAt","tAtLength","dividerPoints","getSkeletonPoints","startControl1","startControlPoint1","startControl2","startControlPoint2","divider","dividerControl1","dividerControlPoint1","dividerControl2","dividerControlPoint2","control1","control2","midpoint1","midpoint2","midpoint3","subControl1","subControl2","divideLine","getSubdivisions","previousLength","iteration","divisions","subCurve","skeletonPoints","baselinePointDistFromStart","baselinePointDistFromEnd","newBaselinePointDistFromStart","newBaselinePointDistFromEnd","baseline1Length","baseline2Length","toPoints","isCurve","getFirstControlPoints","rhs","getCurveControlPoints","knots","firstControlPoints","secondControlPoints","throughPoints","controlPoints","curves","Segment","isVisible","isSegment","isSubpathStart","endPoint","previousSegment","LineTo","segments","Close","subpathStartSegment","MoveTo","CurveTo","arg4","arg5","curve","c2","q2c","ax","ay","v13","v23","a2c","recursive","v120","xy","f1","f2","rx2","ry2","df","f2old","x2old","y2old","hx","hy","m3","m4","newres","pathData","spaces","segmentReg","commandParamReg","paramsCount","z","segmetns","cmd","command","pathString","pathArray","mx","my","bx","by","qx","qy","processPath","pcom","nx","ny","T","Q","fixArc","pp","pi","commands","prevCommand","seglen","normalizePathData","Path","previousObj","appendSegment","createSegment","moveTo","lineTo","curveTo","arcTo","endX","endY","quadTo","sub","segmentBBox","lastSegment","currentSegment","nextSegment","prepareSegment","insertSegment","removeSegment","fixIndex","removedSegment","updateSubpathStartSegment","replaceSegment","replacedSegment","updateSubpathStart","getSegment","segmentAt","segmentIndexAt","segmentAtLength","segmentIndexAtLength","segmentSubdivisions","lastVisibleIndex","getSegmentSubdivisions","minSquaredDistance","segmentClosestPointT","segmentClosestPoint","segmentIndex","polylines","toPolylines","numIntersections","pathLength","lastVisibleSegment","numSegments","tValue","dividedSegmentIndex","lastValidSegment","lastValidSegmentIndex","pathCopy","divisionStartIndex","divisionMidIndex","divisionEndIndex","movetoEnd","secondPathSegmentIndexConversion","originalSegment","convertedSegment","firstPath","secondPath","partialPoints","otherSegments","isPath","commandRe","argRe","Registry","force","exist","onDuplicated","process","entity","onConflict","onNotFound","suggestion","getSpellingSuggestionForName","prefixed","thickness","fill","fixedDot","mesh","stroke","doubleMesh","factor","Grid","patterns","presets","registry","flipX","img","canvas","drawImage","flipY","flipXY","setTransform","watermark","radians","stepX","stepY","Background","Filter","getString","outline","margin","innerRadius","outerRadius","highlight","blur","stdDeviation","dropShadow","grayScale","sepia","saturate","hueRotate","amount2","brightness","contrast","xlinkHref","xlinkShow","xlinkRole","xlinkType","xlinkArcrole","xlinkTitle","xlinkActuate","xmlSpace","xmlBase","xmlLang","preserveAspectRatio","requiredExtension","requiredFeatures","systemLanguage","externalResourcesRequired","refX","positionWrapper","refY","refDx","refDy","refWidth","setWrapper","refHeight","refRx","refRy","refRInscribed","attrName","widthFn","heightFn","refBBox","refRCircumscribed","percentage","diagonalLength","rValue","refCx","refCy","refDResetOffset","dWrapper","resetOffset","refDKeepOffset","refPointsResetOffset","pointsWrapper","refPointsKeepOffset","refR","refD","refPoints","refX2","refY2","refWidth2","refHeight2","axis","dimension","delta","refOrigin","attrValue","shapeWrapper","shapeConstructor","cacheName","cachedShape","shapeBBox","shapeOrigin","fitScale","pathConstructor","qualify","graph","defineGradient","cell","isEdge","edgeView","sourcePoint","targetPoint","gradientUnits","textWrap","json","textHash","pathNode","info","wrappedText","txt","fontFamily","isTextInUse","title","titleElem","titleNode","xAlign","offsetWrapper","yAlign","html","innerHTML","filter","defineFilter","port","offset1","offset2","block","_a","createClassicMarker","classic","full","localAttrs","diamond","flip","opened","fliped","radius","circlePlus","radiusX","radiusy","Marker","sourceMarker","marker","createMarker","targetMarker","vertexMarker","manual","def","normalizeAttr","defineMarker","strokeWidth","isEdgeView","connection","_b","_d","stubs","getConnectionLength","getConnection","sourceParts","targetParts","getConnectionPathData","atConnectionLengthKeepGradient","atConnectionWrapper","atConnectionLengthIgnoreGradient","atConnectionRatioKeepGradient","atConnectionRatioIgnoreGradient","atConnectionLength","atConnectionRatio","zeroVector","tangent","Attr","isValidDefinition","Config","prefixCls","autoInsertCSS","useCSSSelector","defaultClassName","cellView","magnet","unhighlight","magnetEl","transformPoint","transformLine","transformPolyline","transformRectangle","corner1","corner2","corner3","corner4","withoutTransformations","getBBox","clientLeft","clientTop","clientWidth","clientHeight","outputBBox","getBoundingOffsetRect","childBBox","offsetLeft","offsetTop","offsetParent","offsetWidth","offsetHeight","toGeometryShape","translateAndAutoOrient","reference","translateToOrigin","setTranslate","rotateAroundOrigin","setRotate","translateFromOrigin","finalPosition","setMatrix","findShapeNode","nextElementSibling","firstElementChild","getBBoxV2","normalizeMarker","defaultOptions","padding","getHighlighterId","hasCache","magnetVel","magnetBBox","isEdgeElement","highlightMatrix","container","paddingMatrix","removeHandler","removeHighlighter","setCache","Highlighter","normalizePoint","toResult","rawArgs","check","highlighter","portsPositionArgs","elemBBox","groupPositionArgs","startAngle","stepAngle","step","ellipseLayout","ellipseSpread","stepFn","compensateRotate","lineLayout","PortLayout","portPosition","outside","outsideLayout","outsideOriented","inside","insideLayout","insideOriented","autoOrient","bboxAngles","getBBoxAngles","textAnchor","orientAngle","tl","bl","br","tr","radial","radialLayout","radialOriented","portCenterOffset","PortLabelLayout","Markup","View","cid","uniqueId","views","confirmUpdate","flag","unmount","removeEventListeners","onRemove","setClass","classList","setStyle","setAttrs","findAttr","rootElem","selectors","findByAttr","getSelector","prevSelector","nth","prefixClassName","delegateEvents","undelegateEvents","splitter","getEventHandler","delegateEvent","getEventNamespace","delegateDocumentEvents","addEventListeners","undelegateDocumentEvents","undelegateEvent","getEventTarget","fromPoint","elementFromPoint","setEventData","propagationStopped","getEventData","eventData","currentData","normalizeEvent","isSvgElement","validSelector","isCSSSelector","normalizedEvent","touchEvt","getView","counter","elemCache","pathCache","getMatrix","getShape","getBoundingRect","boundingRect","isJSONMarkup","isStringMarkup","parseJSONMarkup","fragment","groups","defines","define","groupSelector","nodeGroups","groupName","createContainer","renderMarkup","parseLabelStringMarkup","stop","getPortContainerMarkup","getPortMarkup","getPortLabelMarkup","getEdgeMarkup","cursor","strokeLinecap","getForeignObjectMarkup","bare","background","AttrManager","getDefinition","getAttrDefinition","processAttrs","normal","specials","definition","normalName","setDefine","offsetDefine","positionDefine","mergeProcessedAttrs","allProcessedAttrs","roProcessedAttrs","findAttrs","cellAttrs","rootNode","selectorCache","unique","selectedLength","sortIndex","reduceRight","updateRelativeAttrs","processedAttrs","rawAttrs","nodeAttrs","positionAttrs","offsetAttrs","nodeTransform","nodePosition","positioned","ts","offseted","nodeBoundingRect","getBoundingRectOfElement","nodeBBox","nodesAttrs","nodesAllAttrs","specialItems","processed","nodeAllAttrs","refSelector","refNode","processedAttributes","bboxCache","rotatableMatrix","unrotatedRefBBox","isRefNodeRotatable","rotatableNode","rootBBox","FlagManager","actions","bootstrap","flags","labels","label","getFlag","hasAction","removeAction","getBootstrapFlag","getChangedFlag","hasChanged","CellView","static","mergeActions","arr1","arr2","getDefaults","documentEvents","ensureOptions","setContainer","ensureContainer","init","removeTools","rootSelector","getConstructor","getContainerTagName","getContainerStyle","getContainerAttrs","getContainerClassName","isNodeView","handleAction","action","additionalRemovedActions","removedFlags","onAttrsChange","updated","dirty","toolId","renderer","requestViewUpdate","can","feature","interacting","cleanCache","getCache","getDataOfElement","getMatrixOfElement","getShapeOfElement","getBBoxOfElement","rm","getRootRotatedMatrix","tm","getRootTranslatedMatrix","getUnrotatedBBoxOfElement","useCellGeometry","getAngle","coord","localToGraphRect","getPosition","findMagnet","updateAttrs","prepareHighlight","partial","notify","edge","notifyUnhighlight","getEdgeTerminal","portId","terminal","hasPort","getMagnetFromEdgeTerminal","findPortElem","hasTools","tools","addTools","config","ToolsView","isToolsView","mount","updateTools","hideTools","hide","showTools","show","renderTools","getTools","getEventArgs","onClick","onDblClick","onContextMenu","onMouseDown","cachedModelForMouseEvent","startBatch","onMouseUp","stopBatch","onMouseMove","onMouseOver","onMouseOut","onMouseEnter","onMouseLeave","onMouseWheel","onCustomEvent","onMagnetMouseDown","onMagnetDblClick","onMagnetContextMenu","onLabelMouseDown","checkMouseleave","findViewByElem","Flag","isCellView","ctor","svgContainer","htmlContainer","normalizedTools","ToolItem","isToolItem","tool","NodeTool","EdgeTool","isSVGElement","focus","focusedTool","blurredTool","hasSVG","hasHTML","decorator","visible","toolsView","onRender","focusOpacity","getClassName","toPercentage","pin","relative","strategy","pinEdgeTerminal","pinNodeTerminal","anchor","totalLength","pinRelative","pinAbsolute","ConnectionStrategy","getAnchor","terminalView","terminalMagnet","getViewBBox","quick","Button","updatePosition","getEdgeMatrix","getNodeMatrix","getTangentAtRatio","getTangentAtLength","btn","mousedown","touchstart","Remove","ui","Boundary","Vertices","handles","vertices","getVertices","addable","updatePath","resetHandles","renderHandles","updateHandles","stopHandleListening","vertex","createHandle","processHandle","startHandleListening","onHandleChange","onHandleChanging","onHandleChanged","onHandleRemove","getNeighborPoints","sourceAnchor","targetAnchor","getMouseEventArgs","notifyMouseDown","snapVertex","setVertexAt","notifyMouseMove","vertexAdded","removeRedundancies","verticesRemoved","removeRedundantLinearVertices","notifyMouseUp","onChanged","snapRadius","neighbors","removable","removeVertexAt","onPathMouseDown","getVertexIndex","insertVertex","Handle","dblclick","mousemove","touchmove","mouseup","touchend","touchcancel","onDoubleClick","pathClassName","Segments","nextVertex","renderHandle","updateHandle","shiftHandleIndexes","resetAnchor","removeProp","snapHandle","anchorFn","sourceView","sourceBBox","changeSourceAnchor","deleteSourceAnchor","sourceAnchorPosition","sourceMagnet","sourceAnchorDef","targetView","targetBBox","changeTargetAnchor","deleteTargetAnchor","targetAnchorPosition","targetMagnet","targetAnchorDef","setVertices","segmentLine","getClosestPoint","Anchor","toggleArea","getTerminalView","updateAnchor","updateArea","anchorNode","getTerminalAnchor","customAnchor","anchorAttrs","customAnchorAttrs","defaultAnchorAttrs","areaNode","area","terminalCell","getTerminalMagnet","areaPadding","restrictArea","rewrite","terminalType","clientToLocalPoint","snapFn","snap","pointAtConnection","rotatedCoords","toolView","isSource","refIndex","getVertexAt","SourceAnchor","TargetAnchor","Arrowhead","getPointAtRatio","prepareArrowheadDragging","SourceArrowhead","TargetArrowhead","CellEditor","labelIndex","dblClick","onCellDblClick","editor","contentEditable","removeElement","updateEditor","updateNodeEditorTransform","updateEdgeEditorTransform","backgroundColor","getCellText","innerText","setCellText","minWidth","localToGraph","parentElement","isEdgeLabel","labelAddable","clientToLocal","onDocumentMouseDown","autoFocus","selectText","range","createRange","selectNodeContents","removeAllRanges","addRange","getText","setText","newLabel","appendLabel","removeLabelAt","NodeEditor","EdgeEditor","boundary","createBBoxAnchor","refView","refPoint","fixedAt","getPointAtEdge","isPercentage","orthogonal","orth","nodeCenter","endType","getConnectionPoint","middleSide","direction","midSide","NodeAnchor","OFFSET","getConnectionSubdivisions","vLine","hLine","vIntersections","hIntersections","fallbackAt","EdgeAnchor","getStrokeWidth","stroked","bboxRaw","lineRaw","localShape","magnetMatrix","translateMatrix","rotateMatrix","targetMatrix","localMatrix","localLine","localRef","insideout","localBBox","pathOptions","extrapolate","sticky","cpOffset","alignLine","coordinate","alignOffset","align","ConnectionPoint","oneSide","dim","getPointBBox","getPaddingBox","getSourceBBox","getTargetBBox","getSourceAnchor","getTargetAnchor","route","isOrthogonal","getBearing","insideNode","nodeToNode","nodeToVertex","isOrthogonalLoop","vertexToNode","vertexToVertex","opposites","N","S","E","W","freeJoin","getBBoxSize","d1","d2","opposite","fromBBox","toBBox","freePoints","freeBearingPoints","fromBorder","toBorder","startRoute","endRoute","reversed","maxLoopCount","maxDirectionChange","perpendicular","excludeTerminals","excludeNodes","excludeShapes","startDirections","endDirections","directionMap","cost","directions","penalties","paddingBox","fallbackRouter","draggingRouter","resolveOptions","point1","point2","OPEN","CLOSE","SortedSet","isOpen","isClose","ObstacleMap","mapGridSize","build","excludedTerminals","getCell","excludedAncestors","getSourceCellId","getAncestors","getTargetCellId","getNodes","excludedTerminal","excludedShape","excludedNode","excludedAncestor","excluded","isAccessible","rects","getSourceEndpoint","getTargetEndpoint","getDirectionAngle","directionCount","grid","quadrant","angleTheta","fixAngleEnd","normalizedAngle","diffX","diffY","gridStepsX","gridStepsY","distanceX","distanceY","getDirectionChange","angle1","angle2","getGridOffsets","gridOffsetX","gridOffsetY","getGrid","getGridDimension","roundedDiff","remainder","correction","snapGrid","getCost","anchors","getRectPoints","directionList","centerVector","rectPoints","ending","intersectionLine","farthestIntersectionDistance","farthestIntersection","reconstructRoute","parents","tailPoint","prevDiff","currentKey","leadPoint","fromDiff","findRoute","sourceEndpoint","targetEndpoint","startPoints","endPoints","openSet","costs","previousRouteDirectionAngle","previousDirectionAngle","isPathBeginning","directionChange","numDirections","endPointsKeys","sameStartEndPoints","loopsRemaining","currentParent","currentCost","isStartPoint","isRouteBeginning","skipEndCheck","directionAngle","neighborPoint","neighborKey","isEndPoint","endDirectionAngle","endDirectionChange","neighborCost","neighborPenalty","costFromStart","fallbackRoute","second","router","optionsRaw","oldVertices","newVertices","partialRoute","isEndingAtPoint","dragFrom","dragTo","warn","getGridSize","manhattan","diagonalCost","l1","l2","intersectionPoint","directionFrom","metro","linkView","er","offsetRaw","sourceX","targetX","sourceDelta","targetDelta","sourceY","targetY","rollup","center1","center2","loop","halfHeight","validate","angles","line1","line2","intersects1","intersects2","intersects","Router","routePoints","fix","middle","f13","f23","prevDistance","nextDistance","startMove","endMove","roundedStart","roundedEnd","smooth","controlPointX","controlPointY","CLOSE_PROXIMITY_PADDING","F13","F23","setupUpdating","updateList","_jumpOverUpdateList","createLines","findLineIntersections","crossCheckLines","crossCheckLine","getDistence","createJumps","jumpSize","skippedPoints","lastLine","jumpStart","jumpEnd","nextPoint","endDistance","startDistance","jumpLine","jumppedLines","buildPath","jumpType","xAxisRotate","centerLine","halfLine","xOffset","yOffset","nextLine","buildRoundedSegment","jumpover","ignoreConnectors","allLinks","getEdges","thisIndex","defaultConnector","connecting","edges","getConnector","linkViews","findViewByCell","thisLines","linkLines","jumpingLines","lineIntersections","Connector","__decorate","desc","Reflect","decorate","pending","changing","mutate","unset","silent","changes","pendingOptions","getPrevious","subset","delim","pathArrayLength","propertyPath","propertyValue","propertyPathArray","nextKey","isArrayIndex","merged","removeByPath","getChanges","old","Animation","ids","targetValue","startValue","getPropByPath","localOptions","timing","getTiming","interpolate","getInterp","interp","startTime","iterate","getTime","elaspe","progress","duration","currentValue","setPropByPath","getArgs","complete","finish","cancelAnimationFrame","commonArgs","jumpedToEnd","stopArgs","ShareRegistry","Cell","propHooks","attrHooks","metadata","preprocess","animation","postprocess","_model","ignoreIdCheck","applyPropHooks","isSameStore","getProp","setProp","_children","_parent","removePropByPath","getZIndex","removeZIndex","setZIndex","toFront","cells","getMaxZIndex","getDescendants","breadthFirst","batchUpdate","toBack","getMinZIndex","getMarkup","removeMarkup","setMarkup","getAttrs","removeAttrs","overwrite","replaceAttrs","hooks","getAttrHooks","getAttrByPath","prefixAttrPath","setAttrByPath","removeAttrByPath","setVisible","toggleVisible","removeData","replaceData","updateData","getParent","getChildren","getParentId","parentId","childrenIds","hasParent","isParentOf","isChildOf","filterChild","getChildCount","getChildIndex","getChildAt","ancestors","isDescendantOf","ancestor","isAncestorOf","descendant","getCommonAncestor","setParent","setChildren","unembed","embed","addTo","isCell","addChild","addCell","insertTo","insertChild","oldParent","incomings","getIncomingEdges","outgoings","getOutgoingEdges","updateParent","removeFromParent","removeChildAt","removeCell","transition","stopTransition","getTransitions","toolItems","setTools","normalizeTools","hasTool","removeTool","nameOrIndex","cellType","defaultAttrs","finalAttrs","defaultAttr","subName","finalProps","keepId","deepClone","findView","execute","getCellsBBox","cloneCells","cloneMap","sourceId","targetId","setSource","getSource","setTarget","getTarget","embeds","edgeRegistry","nodeRegistry","setEdgeRegistry","setNodeRegistry","PortManager","ports","getPorts","getGroup","getPortsByGroup","group","getPortsLayoutByGroup","groupPosition","groupPositionName","layoutFn","portsArgs","groupArgs","layouts","portLayout","portSize","portAttrs","labelSize","labelLayout","getPortLabelLayout","parseGroup","parsePort","getLabel","getPortPosition","createPosition","setDefault","getPortLabelPosition","setDefaults","initPorts","getSize","setSize","resize","currentSize","fixedPoint","imageFixedPoint","atan","setPosition","scaledBBox","currentPosition","parentPosition","translateBy","restrict","translatedPosition","currentAngle","getTerminal","getPort","getPortsPosition","portCenter","fit","portContainerMarkup","setPortContainerMarkup","getDefaultPortContainerMarkup","portMarkup","setPortMarkup","getDefaultPortMarkup","portLabelMarkup","setPortLabelMarkup","getDefaultPortLabelMarkup","getPortAt","hasPorts","getPortIndex","layout","getPortProp","prefixPortPath","setPortProp","removePortProp","portProp","addPort","addPorts","insertPort","removePort","removePortAt","removePorts","portsForRemoval","currentPorts","remainingPorts","getParsedPorts","getParsedGroups","updatePortData","processRemovedPort","currentItemsMap","removed","getConnectedEdges","incoming","getTargetPortId","outgoing","getSourcePortId","validatePorts","errors","generatePortId","added","prevPort","curPort","constructorName","Edge","sourceCell","sourcePort","targetCell","targetPort","isValidId","onLabelsChanged","onVertexsChanged","setTerminal","getSourcePoint","getTerminalPoint","getTargetPoint","getTerminalCell","getSourceCell","getTargetCell","cellId","getSourceNode","getTerminalNode","getTargetNode","visited","getRouter","removeRouter","setRouter","removeConnector","setConnector","getDefaultLabel","defaultLabel","getLabels","setLabels","parseLabel","insertLabel","getLabelAt","setLabelAt","parseStringLabel","label1","label2","vertice","appendVertex","getDefaultMarkup","applyToPoints","worker","getPolyline","newParent","prevParent","hasLoop","getFragmentAncestor","isFragmentDescendantOf","equalTerminals","b1","formated","Collection","localIndex","entities","sortable","sortAttr","existing","dryrun","removeCells","unreference","at","notifyCellEvent","Model","batches","addings","sortOnChangeZ","onCellAdded","onCellRemoved","onReset","onEdgeTerminalChanged","disconnectEdges","disconnectConnectedEdges","removeConnectedEdges","terminalId","prepareCell","resetCells","getCells","v1","v2","addNode","createNode","updateNode","updateCell","addEdge","createEdge","updateEdge","addCells","maxPosition","updateCellId","newId","newCell","sourceCellId","targetCellId","getFirstCell","getLastCell","getCellsFromCache","cellIds","indirect","collect","isOutgoing","descendants","embedsCache","collectSub","enclosed","isBoundary","isOrigin","getBoundaryNodes","nodeId","getRoots","getLeafs","isRoot","isLeaf","getNeighbors","isNeighbor","cell1","cell2","getSuccessors","successors","matchDistance","isSuccessor","getPredecessors","predecessors","isPredecessor","getSubGraph","subgraph","cloneSubGraph","getNodesFromPoint","getNodesInArea","getEdgesInArea","getNodesUnderNode","getAllCellsBBox","breadthFirstSearch","depthFirstSearch","neighbor","getShortestPath","directed","resizeCells","parseJSON","fromJSON","hasActiveBatch","isModel","setLabel","removeLabel","Base","bodyAttr","labelAttr","getImageUrlHook","imageUrl","imageWidth","imageHeight","image","createShape","Rect","strokeLinejoin","Poly","getPoints","setPoints","removePoints","pointsToString","bg","textAlign","boxSizing","alignItems","justifyContent","foreignObject","wrapValue","wrapAttrs","NodeView","portsCache","updateClassName","cleanPortsCache","renderPorts","partialAttrs","renderJSONMarkup","updateTransform","getTranslationString","getRotationString","rot","portRoot","portContentElement","portSelectors","portContentSelectors","cached","portElement","references","parsedPorts","portsGropsByZ","autoZIndexKey","getPortElement","appendPorts","updatePorts","refs","createPortElement","renderResult","portClass","portLabelElement","portLabelSelectors","existLabel","existPortLabel","onPortRendered","labelContainer","labelSelectors","contentContainer","contentSelectors","groupList","updatePortGroup","metrics","metric","applyPortTransform","initialAngle","getPortEventArgs","notifyPortEvent","startNodeDragging","dragMagnet","dragNode","stopMagnetDragging","stopNodeDragging","onMagnetClick","getMouseMovedCount","clickThreshold","startMagnetDragging","prepareEmbedding","localPoint","processEmbedding","embedding","findParent","frontOnly","zIndexMap","maxZIndex","newCandidateView","prevCandidateView","candidateEmbedView","validateEmbeding","childView","parentView","clearEmbedding","candidateParent","candidateView","finalizeEmbedding","previousParent","getDelegatedView","validateMagnet","magnetThreshold","startConnectting","delegateDragEvents","createEdgeFromMagnet","isNewEdge","fallbackAction","getDefaultEdge","autoScrollGraph","notifyUnhandledMouseDown","notifyNodeMove","getPlugin","isSelectionMovable","selectedCells","getSelectedCells","getRestrictArea","translating","getGraphArea","moving","posX","posY","enabled","scroller","autoScroll","EdgeView","POINT_ROUNDING","sourceDef","targetDef","updateTerminalProperties","onLabelsChange","renderLabels","customizeLabels","labelCache","onEdgeLabelRendered","normalizeLabelMarkup","parseLabelMarkup","labelNode","updateLabels","shouldRerenderLabels","updateLabelPositions","previousLabels","labelMarkup","hasChildNodes","canLabelMove","updateConnection","rawCount","simplifiedPoints","simplifiedCount","getTerminalConnectionPoint","translateConnectionPoints","findAnchors","findRoutePoints","connectionPoints","findConnectionPoints","markerPoints","findMarkerPoints","findPath","firstVertex","lastVertex","findAnchorsOrdered","firstType","secondType","secondPoint","firstAnchor","secondAnchor","firstTerminal","secondTerminal","firstView","secondView","firstMagnet","secondMagnet","firstRef","secondRef","sourceEdgeAnchor","targetEdgeAnchor","edgeAnchor","defaultRouter","sourceTerminal","targetTerminal","firstRoutePoint","lastRoutePoint","sourcePointRef","sourceLine","connectionPointDef","connectionPoint","sourceConnectionPoint","targetConnectionPointDef","targetConnectionPoint","targetPointRef","targetLine","getLineWidth","sourceMarkerPoint","targetMarkerPoint","sourceStrokeWidth","targetStrokeWidth","defaultPosition","normalizeLabelPosition","labelPosition","getLabelTransformationMatrix","viewKey","updateTerminalMagnet","getCellById","endView","propName","getLabelPositionAngle","getLabelPositionArgs","getDefaultLabelPositionArgs","mergeLabelPositionArgs","labelPositionArgs","defaultLabelPositionArgs","getClosestPointLength","getClosestPointRatio","getLabelPosition","isOffsetAbsolute","absoluteOffset","isDistanceRelative","absoluteDistance","isDistanceAbsoluteReverse","reverseDistance","labelPoint","labelOffset","labelDistance","labelOffsetDiff","labelAngle","offsetCoord","isKeepGradient","keepGradient","isEnsureLegibility","ensureLegibility","pathOpt","vertexLength","currentVertex","currentLength","startEdgeDragging","dragLabel","dragArrowhead","dragEdge","stopLabelDragging","stopArrowheadDragging","stopEdgeDragging","startLabelDragging","initialMagnet","initialTerminal","getValidateConnectionArgs","createValidateConnectionArgs","beforeArrowheadDragging","highlightAvailableMagnets","afterArrowheadDragging","unhighlightAvailableMagnets","validateConnection","candidateTerminal","allowLoop","allowNode","allowEdge","allowPort","allowMulti","valid","doValidate","connectedEdges","allowConnectToBlank","allowBlank","validateEdge","arrowheadDragging","currentMagnet","currentView","arrowheadDragged","snapArrowhead","findViewsInArea","nodeOnly","edgeViews","findEdgeViewsFromPoint","prevView","closestView","prevMagnet","closestMagnet","minDistance","snapArrowheadEnd","finishEmbedding","fallbackConnection","notifyConnectionEvent","currentTerminal","previousCell","previousPort","previousView","previousPoint","currentCell","currentPort","previousMagnet","marked","magnets","availableMagnets","startArrowheadDragging","positionAngle","positionArgs","originLabel","GraphView","viewport","primer","stage","overlay","restore","snapshoot","guarded","preventDefaultDblClick","isPreventDefaultContextMenu","preventDefaultContextMenu","mouseMovedCount","startPosition","preventDefaultMouseDown","preventDefaultBlankAction","moveThreshold","ev","relatedView","wheelDelta","handleMagnetEvent","magnetElem","magnetValue","onImageDragStart","cloned","contextmenu","mouseover","mouseout","mouseenter","mouseleave","mousewheel","DOMMouseScroll","CSSManager","Options","panning","defaultGrid","booleas","scaling","eventTypes","zoomAtMousePosition","highlighting","default","nodeAvailable","magnetAvailable","edgeLabelMovable","virtual","GridManager","startListening","stopListening","setGridSize","backgroundImage","resolveGrid","getInstance","settings","patternUnits","patternElem","XMLSerializer","serializeToString","TransformManager","viewportTransformString","viewportMatrix","getCTM","getComputedSize","getScale","clampScale","getTranslation","getZoom","zoom","clientSize","scaleGrid","maxScale","minScale","getRotation","setOrigin","fitToContent","gridWidth","gridHeight","paddings","border","contentArea","getContentArea","allowNewOrigin","minHeight","maxWidth","maxHeight","sizeChanged","originChanged","scaleContentToFit","scaleContentToFitImpl","contentBBox","contentLocalOrigin","getContentBBox","graphToLocal","minScaleX","maxScaleX","minScaleY","maxScaleY","fittingBox","viewportArea","computedSize","currentTranslate","currentScale","newSX","newSY","newOX","newOY","zoomToRect","centerPoint","zoomToFit","centerContent","centerCell","positionCell","positionPoint","positionRect","positionContent","BackgroundManager","updateBackgroundImage","backgroundSize","backgroundPosition","drawBackgroundImage","HTMLImageElement","optionsCache","backgroundRepeat","repeat","quality","HTMLCanvasElement","toDataURL","src","updateBackgroundColor","updateBackgroundOptions","PanningManager","widgetOptions","pannable","preparePanning","onRightMouseDown","mousewheelHandle","allowMouseWheel","allowRubberband","allowPanning","startPanning","pan","stopPanning","autoPanning","graphArea","enablePanning","disablePanning","MouseWheel","cumulatedFactor","startPos","targetScale","MIN_SAFE_INTEGER","hasScroller","clientToGraph","JOB_PRIORITY","VirtualRenderManager","resetRenderArea","enableVirtualRender","disableVirtualRender","setRenderArea","renderArea","JobQueue","isFlushing","isFlushPending","scheduleId","frameInterval","initialTime","queueJob","job","PRIOR","findInsertionIndex","queueFlush","scheduleJob","queueFlushSync","flushJobsSync","clearJobs","cancelScheduleJob","flushJobs","getCurrentTime","log","ins","requestIdleCallback","timeout","cancelIdleCallback","hasPerformanceNow","performance","Scheduler","willRemoveViews","renderViews","onModelReseted","onCellZIndexChanged","onCellVisibleChanged","removeZPivots","resetViews","removeViews","viewItem","FLAG_INSERT","Update","priorAction","renderViewInArea","effectedEdges","getEffectedEdges","flushWaitingViews","isViewMounted","ViewState","MOUNTED","createCellView","CREATED","getRenderPriority","isUpdatable","updateView","WAITING","RenderEdge","removeView","FLAG_REMOVE","insertView","pivot","addZPivot","zPivots","pivots","createComment","neighborZ","currentZ","layer","neighborPivot","nextSibling","createViewHook","flagLabels","RenderNode","FLAG_RENDER","Renderer","schedule","findViewsFromPoint","DefsManager","isDefined","getElementById","filterId","filterUnits","gradient","stops","markerUnits","markerOrient","markerId","pathMarker","orient","CoordManager","getClientMatrix","getClientOffset","getPageOffset","scrollX","scrollY","localToGraphPoint","localToClientPoint","localToPagePoint","localRect","localToClientRect","localToPageRect","graphToLocalPoint","graphPoint","clientPoint","clientToGraphPoint","pageToLocalPoint","pagePoint","graphToLocalRect","graphRect","clientToLocalRect","clientRect","clientToGraphRect","pageToLocalRect","pageOffset","HighlightManager","highlights","onCellHighlight","onCellUnhighlight","resolved","resolveHighlighter","graphOptions","highlighterDef","SizeManager","getScroller","getContainer","getSensorTarget","autoResize","installedPlugins","virtualRender","clearCells","addNodes","removeNode","addEdges","removeEdge","hasCell","getCellCount","getRootNodes","getLeafNodes","isRootNode","isLeafNode","searchCell","findViews","zoomTo","pageToLocal","localToPage","localToClient","showGrid","hideGrid","clearGrid","drawGrid","updateBackground","drawBackground","onGraph","clearBackground","isMouseWheelEnabled","enableMouseWheel","disableMouseWheel","toggleMouseWheel","isPannable","togglePanning","use","plugin","pluginName","getPlugins","enablePlugins","plugins","postPlugins","aboutToChangePlugins","disablePlugins","isPluginEnabled","pluginIns","isEnabled","disposePlugins","Graph","isGraph","registerNode","registerEdge","registerView","registerAttr","registerGrid","registerFilter","registerNodeTool","registerEdgeTool","registerBackground","registerHighlighter","registerPortLayout","registerPortLabelLayout","registerMarker","registerRouter","registerConnector","registerAnchor","registerEdgeAnchor","registerConnectionPoint","unregisterNode","unregisterEdge","unregisterView","unregisterAttr","unregisterGrid","unregisterFilter","unregisterNodeTool","unregisterEdgeTool","unregisterBackground","unregisterHighlighter","unregisterPortLayout","unregisterPortLabelLayout","unregisterMarker","unregisterRouter","unregisterConnector","unregisterAnchor","unregisterEdgeAnchor","unregisterConnectionPoint","HTML","shapeMaps","effect","renderHTMLComponent","foContent","fo","Dnd","targetScroller","targetGraph","targetModel","snapline","draggingGraph","delegateGraphOptions","draggingContainer","sourceNode","prepareDragging","updateNodePosition","isSnaplineEnabled","captureCursorOffset","draggingView","draggingNode","draggingModel","getDragNode","tolerance","scaled","clearDragging","delegateView","geometryBBox","draggingBBox","originOffset","updateGraphPosition","scrollTop","snapped","snapOffset","onDragging","embeddingMode","isValidArea","isInsideValidArea","snapOnMoving","onDragEnd","drop","onDropped","onDropInvalid","targetRect","dndRect","dndContainer","getDropArea","isInsideDndRect","outter","scrollLeft","droppingNode","getDropNode","validateNode","stencil","SnaplineImpl","containerClassName","verticalClassName","horizontalClassName","setFilter","containerWrapper","onBatchStop","snapOnResizing","isNodeMovable","resizing","trueDirection","nodeBbox","nodeBBoxRotated","nodeTopLeft","nodeBottomRight","verticalLeft","verticalTop","verticalHeight","horizontalTop","horizontalLeft","horizontalWidth","snapOrigin","relativeDirection","isIgnored","snapBBox","snapTopLeft","snapBottomRight","distances","dWidth","dHeight","quadrant13","newWidth","newHeight","snaplines","newRotatedBBox","delegatedView","cellBBox","verticalFix","horizontalFix","targetNode","snapCenter","newCenter","newX","newY","snapNode","sharp","resetTimer","toggleEnabled","isOnResizingEnabled","enableOnResizing","disableOnResizing","toggleOnResizing","isSharp","enableSharp","disableSharp","toggleSharp","getTolerance","setTolerance","Snapline","snaplineImpl","TransformImpl","resizeClassName","rotateClassName","onKnobMouseDown","onKnobMouseUp","knob","resizes","POSITIONS","NODE_CLS","orthogonalResizing","resizable","rotatable","updateResizerDirections","startHandle","stopHandle","DIRECTIONS","prevShift","getTrueDirection","toValidResizeDirection","startResizing","prepareResizing","startAction","resizeX","resizeY","startRotating","client","restrictedResizing","autoScrollOnResizing","resized","currentBBox","requestedSize","rawWidth","rawHeight","candidateWidth","candidateHeight","allowReverse","reverted","revertedDir","resizeOptions","rotated","rotateGrid","stopAction","createWidget","clearWidgets","Transform","widgets","Map","onNodeClick","onBlankMouseDown","widget","createTransform","getTransformOptions","rotating","parseOptionGroup","camelizeRE","getFunc","resultFunc","combos","comboEdges","hiddenNodes","hiddenEdges","hiddenCombos","vedges","positions","destroyed","onLayoutEnd","reloadData","executeWithWorker","getDefaultCfg","updateCfg","cfg","getType","_x","_y","cover","tree","xm","ym","xp","yp","_root","leaf","_x0","_y0","_x1","_y1","addAll","xz","yz","visit","quads","retainer","removeAll","defaultX","defaultY","quadtree","Quadtree","leaf_copy","treeProto","extent","visitAfter","Dispatch","parseTypenames","typenames","typename","that","taskHead","taskTail","pokeDelay","clockLast","clockNow","clockSkew","clock","setFrame","clearNow","Timer","_call","_time","_next","restart","timerFlush","wake","nap","poke","t0","sleep","clearInterval","setInterval","filterOutLinks","unlink","shortcut","dequeue","enqueue","strs","sentinel","GraphEnum","incrementOrInitEntry","decrementOrRemoveEntry","edgeArgsToId","isDirected","v_","w_","EDGE_KEY_DELIM","DEFAULT_EDGE_NAME","edgeArgsToObj","strV","strW","edgeObj","edgeObjToId","nodeToJSON","edgeToJSON","write","multigraph","isMultigraph","compound","isCompound","read","setGraph","setNode","setEdge","ownKeys","enumerableOnly","symbols","sym","_objectSpread","getOwnPropertyDescriptors","defineProperties","Constructor","_defineProperties","protoProps","staticProps","defaultOption","_this","GRAPH_NODE","nodeCountNum","edgeCountNum","defaultNodeLabelFn","defaultEdgeLabelFn","parentMap","childrenMap","nodesLabelMap","inEdgesMap","outEdgesMap","predecessorsMap","successorsMap","edgesMap","edgesLabelsMap","setDefaultNodeLabel","newDefault","nodeCount","_this$inEdgesMap$get","sinks","_this$outEdgesMap$get","setNodes","hasNode","checkCompound","_this$parentMap","removeFromParentsChildList","targetParent","_this$parentMap2","_this$childrenMap","realParent","checkNode","realParentChilren","_this$childrenMap2","preds","succs","_this$predecessors","_this$neighbors","_this$successors","filterNodes","copyGraph","setEdgeObj","setDefaultEdgeLabel","edgeCount","setPath","edgeFromArgs","hasEdge","removeEdgeObj","_ref","inEdges","inV","outEdges","outW","nodeEdges","_this$inEdges","nodeInDegree","nodeOutDegree","nodeDegree","resultOptions","_childrenMap$get","_this2","_this$parentMap3","_this$children","_this$childrenMap3","cleanEdge","inE","outE","_this$inEdgesMap$get2","_this$outEdgesMap$get2","edgeId","freeze","_edgeArgsToObj","keyIndice","swap","originI","originJ","innerDecrease","_arr$parent","largest","removeMin","decrease","prim","weightFn","pq","updateNeighbors","pri","edgeWeight","POSITIVE_INFINITY","_graph$nodeEdges","components","resultComponents","componentsArr","waitingList","_graph$successors","_graph$predecessors","doDFS","postorder","dfs","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","_i","_arr","_n","done","DEFAULT_WEIGHT_FUNC","dijkstra","edgeFn","runDijkstra","vEntry","wEntry","predecessor","_ref2","dijkstraAll","tarjan","onStack","lowlink","_visited$get","_wEntry","cmpt","findCycles","subClass","superClass","Derived","hasNativeReflectConstruct","Super","NewTarget","construct","ReferenceError","_wrapNativeSuper","Class","_cache","_isNativeFunction","Wrapper","_construct","Parent","sham","Proxy","Boolean","CycleException","_Error","_super","topsort","isAcyclic","preorder","runFloydWarshall","nodek","rowK","nodei","rowI","nodej","ik","kj","ij","altDistance","List","StateGraph","DEFAULT_WEIGHT_FN","greedyFAS","buildState","doGreedyFAS","buckets","zeroIdx","flat","collectPredecessors","uEntry","out","assignBucket","fasGraph","maxIn","maxOut","prevWeight","rangeMax","fas","acyclicer","dfsFAS","forwardName","undo","safeSort","valueA","valueB","addDummyNode","dummy","simplified","simpleLabel","minlen","asNonCompoundGraph","zipObject","intersectRect","layeringNodes","rankMax","maxRank","rank","va","vb","normalizeRanks","nodeRanks","removeEmptyRanks","layers","nodeRankFactor","vs","addBorderNode","partition","lhs","notime","minBy","valA","valB","dummyChains","normalizeEdge","vRank","wRank","edgeLabel","labelRank","labelpos","origLabel","currentV","longestPath","longestPathWithLayer","minRank","forwardVisited","dfsForward","nextRank","currRank","slack","feasibleTree","tightTree","findMinSlackEdge","shiftRanks","edgeV","feasibleTreeWithLayer","tightTreeWithLayer","networkSimplex","og","initLowLimValues","initCutValues","leaveEdge","enterEdge","exchangeEdges","assignCutValue","childLab","cutvalue","calcCutValue","childIsTail","graphEdge","cutValue","isOutEdge","pointsToHead","otherWeight","isTreeEdge","otherCutValue","dfsAssignLowLim","nextLim","useNextLim","lim","vLabel","wLabel","tailLabel","isDescendant","updateRanks","flipped","rootLabel","ranker","networkSimplexRanker","tightTreeRanker","longestPathRanker","dfsBothOrder","postorderNums","vPath","wPath","lca","parentDummyChains","startV","pathIdx","pathV","ascending","depths","treeDepths","maxDepth","nodeSep","nestingRoot","sumWeights","borderTop","borderBottom","childTop","childBottom","thisWeight","nestingEdge","cleanup","graphLabel","addBorderSegments","borderLeft","borderRight","sg","sgNode","borderType","adjust","rankDir","rankdir","swapWidthHeight","reverseY","swapXY","swapWidthHeightOne","reverseYOne","swapXYOne","initOrder","simpleNodes","orderedVs","beforeSort","fixorder","fixOrderNodes","twoLayerCrossCount","northLayer","southLayer","southPos","unflat","unsort","southEntries","treeSize","cc","weightSum","crossCount","layering","buildLayerGraph","relationship","createRootNode","addSubgraphConstraints","cg","rootPrev","prevChild","barycenter","movable","sum","nodeU","resolveConflicts","mappedEntries","indegree","entryV","entryW","sourceSet","doResolveConflicts","handleIn","mergeEntries","handleOut","filtered","picked","biasRight","usePrev","keepNodeOrder","hasFixOrder","unsortable","vsIndex","compareWithBias","consumeUnsortable","iindex","bias","sortSubgraph","subgraphs","barycenters","subgraphResult","mergeBarycenters","expandSubgraphs","blPred","brPred","vss","mxRank","range1","range2","downLayerGraphs","buildLayerGraphs","upLayerGraphs","assignOrder","best","bestCC","lastBest","sweepLayerGraphs","ranks","layerGraphs","lg","sorted","lnode","BlockGraph","findType1Conflicts","conflicts","visitLayer","prevLayer","k0","scanPos","prevLayerLength","lastNode","findOtherInnerSegmentNode","k1","scanNode","uLabel","uPos","addConflict","findType2Conflicts","scan","south","southEnd","prevNorthBorder","nextNorthBorder","uNode","getScannedKey","scanIfNeeded","scanCache","cacheKey","north","nextNorthPos","prevNorthPos","southLookahead","vv","ww","conflictsV","hasConflict","verticalAlignment","neighborFn","prevIdx","ws","mp","il","horizontalCompaction","reverseSep","xs","blockG","buildBlockGraph","setXsFunc","nextNodesFunc","pass1","acc","pass2","blockGraph","sepFn","sep","nodesep","edgesep","vRoot","uRoot","prevMax","findSmallestWidthAlignment","xss","NEGATIVE_INFINITY","halfWidth","alignCoordinates","alignTo","alignToVals","alignToMin","alignToMax","vert","horiz","xsVals","balance","ul","edgeSep","positionY","rankSep","ranksep","prevY","heights","adjustedLayering","inner","xsKey","smallestWidth","ng","initDataOrder","nodeOrder","debugTiming","prevGraph","inheritOrder","layoutGraph","buildLayoutGraph","edgeLabelSpace","makeSpaceForEdgeLabels","runLayout","updateInputGraph","removeSelfEdges","acyclic","injectEdgeLabelProxies","assignRankMinMax","removeEdgeLabelProxies","insertSelfEdges","positionSelfEdges","removeBorderNodes","fixupEdgeLabelCoords","translateGraph","assignNodeIntersects","reversePointsForReversedEdges","currG","prevG","prevNode","_order","inputGraph","inputLabel","layoutLabel","_rank","graphNumAttrs","graphDefaults","graphAttrs","nodeNumAttrs","nodeDefaults","edgeNumAttrs","edgeDefaults","labeloffset","edgeAttrs","canonicalize","pickedProperties","selectNumberAttrs","defaultNode","marginX","marginx","marginY","marginy","getExtremes","nodeV","nodeW","selfEdges","orderShift","selfEdge","selfNode","newAttrs","util","DagreLayout","sortByCombo","layoutNode","nodeSize","nodesepFunc","ranksepFunc","focusNode","begin","nodeMap","nodeComboMap","comboId","sortedNodes","visitedMap","nodeSizeFunc","ranksepfunc","nodesepfunc","horisep","vertisep","comboMap","combo","collapsed","verti","hori","comboEdge","targets","dagre","dBegin","isHorizontal","getRadialPos","focusId","focusLayer","sizeDim","currentNodesep","maxSize","diffLayer","diffLayerAbs","leftPos","rightPos","radiusMap","rangeLength","processNodes","layerNodes","propsMaxRanksep","arcRange","maxRanksep","currentNodeRanksep","isFirstLevel","_f","_g","leftRatio","it","otherDim","newControlPoints","sourceOtherDimValue","otherDimDist","sourceRadius","radiusDist","cRadius","newPos","layerCoords","isInvert","layerCoordSort","ndata","layerCoordsArr","isDifferentLayer","filterControlPointsOutOfBoundary","ps","getControlPoints","dimValue","dimRatio","sourceLayer","sourceNextLayerCoord","firstControlPoint","insertStartControlPoint","targetLayer","layerDiff","targetLastLayerCoord","lastControlPoints","insertEndControlPoint","META","NODE","BRIDGE","INCLUDE","EXCLUDE","UNSPECIFIED","CORE","OP","SERIES","globalThis","P","O","I","M","C","G","B","L","R","D","F","U","IE_PROTO","V","$","H","J","K","Z","ee","ne","te","re","oe","ie","ae","ue","ce","se","de","fe","he","le","ve","pe","ge","ye","be","me","we","Ee","je","xe","Ne","Oe","ke","Ie","Se","Me","Ce","Ge","Be","Ae","Le","Re","Te","De","Pe","ze","Fe","Ue","Ve","$e","He","We","qe","Ye","Je","Xe","Ke","Qe","Ze","en","nn","tn","rn","an","un","cn","sn","dn","hn","ln","vn","pn","gn","yn","bn","mn","wn","En","jn","xn","Nn","On","kn","In","Sn","Mn","Cn","Gn","Bn","An","Ln","Rn","Tn","Dn","Pn","zn","Fn","Un","Vn","$n","Hn","Wn","qn","Yn","Jn","Xn","Kn","Qn","Zn","et","nt","rt","ot","ut","dt","ft","ht","lt","vt","gt","yt","bt","wt","Et","_t","jt","xt","Nt","Ot","kt","It","St","Mt","Ct","Gt","Bt","At","Lt","Rt","Tt","Dt","Pt","zt","Ft","Ut","Vt","$t","Ht","Wt","qt","Yt","Jt","Xt","Kt","Qt","Zt","nr","rr","ir","ar","ur","cr","sr","fr","hr","lr","vr","pr","gr","yr","mr","wr","Er","_r","jr","xr","Nr","Or","kr","Ir","Sr","Mr","Cr","Gr","Br","Ar","Lr","Rr","Tr","Dr","Pr","zr","Fr","isConcatSpreadable","Ur","Vr","$r","Hr","Wr","qr","Yr","Jr","Xr","Kr","Qr","Zr","eo","no","ro","oo","io","ao","uo","co","isUndefined","ho","lo","vo","_isDirected","_isMultigraph","_isCompound","_label","_defaultNodeLabelFn","_defaultEdgeLabelFn","_nodes","_in","_preds","_out","_sucs","_edgeObjs","_edgeLabels","po","go","yo","bo","mo","_nodeCount","_edgeCount","_removeFromParentsChildList","wo","version","Eo","_o","jo","xo","No","Oo","_keyIndices","_decrease","_swap","_heapify","ko","Io","So","Mo","Co","Go","Bo","Ao","Lo","Ro","To","Do","Po","zo","alg","floydWarshall","graphlib","Vi","Fo","Uo","Vo","$o","Ho","Wo","qo","Yo","Jo","Xo","Ko","Qo","Zo","ei","ni","ti","ri","oi","ai","ci","si","di","fi","hi","li","vi","gi","yi","bi","mi","wi","Ei","ji","xi","Ni","Oi","ki","Ii","Si","Mi","Ci","Gi","Bi","Ai","Li","Ri","Ti","Di","Pi","zi","Fi","Ui","$i","forIn","mapValues","pick","Hi","Wi","qi","_prev","_sentinel","Yi","Ji","Xi","Ki","ea","Qi","Zi","na","oa","successorWeights","predecessorWeights","buildLayerMatrix","sa","da","fa","ha","la","pa","ya","wa","Ea","xa","Oa","Ia","ka","ja","Na","Sa","Ma","Ca","Ba","Ga","Aa","La","Ra","Ta","Da","Pa","za","Ua","Va","Fa","$a","Ha","Wa","qa","Ya","Ja","Xa","Ka","Qa","Za","eu","nu","tu","ru","iu","ou","au","uu","cu","su","hu","lu","vu","pu","gu","du","fu","yu","bu","mu","wu","Eu","_u","ju","Bu","Nu","Gu","xu","Ou","ku","Iu","Mu","Su","Cu","Au","Lu","debug","debugOrdering","isAnyArray","endsWith","_options$fromIndex","_options$toIndex","toIndex","maxValue","minValue","rescale","output","currentMin","currentMax","RangeError","_options$min","autoMinMax","_options$max","indent","indentData","inspectMatrix","inspectMatrixWithOptions","maxRows","maxColumns","maxNumSize","padMinus","inspectData","rows","columns","maxI","formatNumber","formatNumber2","padEnd","exp","toExponential","installMathOperations","AbstractMatrix","Matrix","addS","addM","checkMatrix","newMatrix","subS","subM","subtract","subtractS","subtractM","mul","mulS","mulM","multiplyS","multiplyM","divS","divM","divideS","divideM","modS","modM","modulus","modulusS","modulusM","andS","andM","orS","orM","xor","xorS","xorM","leftShift","leftShiftS","leftShiftM","signPropagatingRightShift","signPropagatingRightShiftS","signPropagatingRightShiftM","rightShift","rightShiftS","rightShiftM","zeroFillRightShift","zeroFillRightShiftS","zeroFillRightShiftM","not","acos","acosh","asinh","atanh","cbrt","clz32","cosh","expm1","fround","log1p","log10","log2","sign","sinh","tanh","trunc","powS","powM","checkRowIndex","checkColumnIndex","checkRowVector","to1DArray","checkColumnVector","checkRowIndices","rowIndices","checkColumnIndices","columnIndices","checkRange","startRow","endRow","startColumn","endColumn","checkNumber","newArray","checkNonEmpty","sumByRow","sumByColumn","sumAll","productByRow","productByColumn","productAll","varianceByRow","unbiased","mean","cols","variance","sum1","sum2","varianceByColumn","varianceAll","centerByRow","centerByColumn","centerAll","getScaleByRow","scaleByRow","getScaleByColumn","scaleByColumn","getScaleAll","scaleAll","newRows","newColumns","newData","row","column","zeros","matrix1","matrix2","isMatrix","klass","to2DArray","isRowVector","isColumnVector","isSquare","isSymmetric","isEchelonForm","previousColumn","checked","isReducedEchelonForm","echelonForm","iMax","swapRows","reducedEchelonForm","maxRow","setSubMatrix","neg","getRow","getRowVector","rowVector","setRow","row1","row2","getColumn","getColumnVector","columnVector","setColumn","swapColumns","column1","column2","addRowVector","subRowVector","mulRowVector","divRowVector","addColumnVector","subColumnVector","mulColumnVector","divColumnVector","mulRow","mulColumn","maxIndex","maxRowIndex","minRow","minRowIndex","maxColumn","maxColumnIndex","minColumn","minColumnIndex","diag","norm","cumulativeSum","vector2","vector1","mmul","Bcolj","Float64Array","strassen2x2","a11","b11","a12","b12","a21","b21","a22","b22","m5","m6","m7","c00","c01","c10","c11","strassen3x3","a00","a01","a02","a10","a20","b00","b01","b02","b10","b20","m8","m9","m10","m11","m12","m13","m14","m15","m16","m17","m18","m19","m20","m21","m22","m23","c02","c12","c20","c21","c22","mmulStrassen","resultat","blockMult","halfRows","halfCols","subMatrix","scaleRows","scaleColumns","flipRows","flipColumns","kroneckerProduct","kroneckerSum","AxI","eye","IxB","transpose","sortRows","compareFunction","compareNumbers","sortColumns","subMatrixRow","indices","subMatrixColumn","rowIndex","columnIndex","trace","standardDeviation","isArrayOfNumbers","for","rand","randomInt","randInt","diagonal","negate","tensorProduct","nRows","nColumns","arrayData","removeRow","addRow","removeColumn","newRow","addColumn","_typeof","_toPrimitive","hint","toPrimitive","_toPropertyKey","_defineProperty","toPropertyKey","gl","AST_TOKEN_TYPES","AST_NODE_TYPES","STORAGE_CLASS","Target","_primitiveMap","_usageMap","_dataTypeMap","_formatMap","_mipmapMap","_filterMap","_wrapModeMap","_colorSpaceMap","_depthFuncMap","_blendEquationMap","_blendFuncMap","_stencilFuncMap","_stencilOpMap","_cullFaceMap","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_FAN","TRIANGLE_STRIP","STATIC_DRAW","DYNAMIC_DRAW","STREAM_DRAW","BYTE","UNSIGNED_INT","INT","UNSIGNED_BYTE","UNSIGNED_SHORT","FLOAT","ALPHA","LUMINANCE","LUMINANCE_ALPHA","RGB","RGBA","RGBA4","RGB5_A1","RGB565","DEPTH_COMPONENT","DEPTH_STENCIL","DONT_CARE","NICEST","FASTEST","NEAREST","LINEAR","LINEAR_MIPMAP_LINEAR","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_NEAREST","REPEAT","CLAMP_TO_EDGE","MIRRORED_REPEAT","NONE","BROWSER_DEFAULT_WEBGL","NEVER","ALWAYS","LESS","LEQUAL","GREATER","GEQUAL","EQUAL","NOTEQUAL","FUNC_ADD","MIN_EXT","MAX_EXT","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","DST_ALPHA","ONE_MINUS_DST_ALPHA","CONSTANT_COLOR","ONE_MINUS_CONSTANT_COLOR","CONSTANT_ALPHA","ONE_MINUS_CONSTANT_ALPHA","SRC_ALPHA_SATURATE","KEEP","REPLACE","INVERT","INCR","DECR","INCR_WRAP","DECR_WRAP","FRONT","BACK","columnNum","rowNum","additionColumn","additionRow","CELL_W","DEFAULT_CELL_W","CELL_H","DEFAULT_CELL_H","MIN_DIST","occupied","findGridByNodeId","sqdist","occupyNearest","minDist","insertColumn","insertRow","startDrag","$emit","features","getAnyliseVersionListAPI","getAnyliseTreeAPI","FlowComposition","Operate","inject","showAnylise","dnd","resizingOptions","startNode","fontVariant","dagreLayout","cellItem","cellIndex","parentNodes","parentEdges","edgeItem","edgeIndex","childEdges","dialogStaticButtonNodes","dynamicButtonNodes","parentLayout","parentIndex","childIndex","dialogStaticButtonNode","dialogStaticButtonIndex","dynamicButtonNode","dynamicButtonIndex","generateRenderTree","treeData","treeItem","treeIndex","startParentNode","RateNode","conversionRateStr","dialogNode","ctype","buttonDataList","staticButtons","dynamicButtons","buttonItem","buttonIndex","judgeParentNode","juidgeTitleNode","skillNode","sourceData","targetData","getNodeId","bottomPort","topPort","lineText","buttonId","logGraph","testLinkPort","nodeList","childrenId","firstPortId","initGraph","nodeMovable","graphInfo","beforeNode","afterNode","targetType","nodeTitle","addJudgeNodeAPI","addDialogueNodeAPI","treeToGraph","jsonToGraph","initConfig","initShapeConfig","initRhombicNode","initCustomNode","Shape","ObjectExt","strokeDasharray","visibility","initGraphListen","deleteNodeAPI","normalizeNodePosition","updateStartNodeLink","getTreeData","updateJudgeNodeRender","formInfo","updateDialogueNodeRender","$nextTick","formData","getAnyliseTreeData","getTreeDataAPI","$route","query","watch","newVal","oldVal","created","activated","showBool","handleClose","startForm","updateNodeOrSkillPick","NodeOrSkill","NodeOrSkillVal","skillList","skillId","skillName","nodeSelectList","saveStartNodeOperate","judgeDetailData","handleSubmitJudge","dialogueDetailData","handleSubmitDialogue","rules","detailForm","delayHours","delayMinutes","delaySeconds","handleDisplayDuration","displayDuration","addButton","interActifyButtonsList","buttonActiveIndex","showEditInput","refInFor","clickOperateButton","updateEditInput","deleteButton","buttonDetail","nextNodeList","childNodeList","deleteOperate","addOperate","submitForm","updatePicked","callType","disableAdd","updateSkillPicked","nextSkillId","skillItem","updateNodePicked","nextNodeId","nodeItem","getCurrentSkillItem","paramList","paramItem","paramKey","paramName","del","isLimitOnly","$props","levelIndex","Behavior","draggable","renderData","staticButtonsList","required","operateItemIndex","warning","$refs","initTransformData","operateItem","operateIndex","skillParam","initData","transformSubmitData","skillIndex","paramIndex","dialogueForm","newval","oldval","form","drag","unBackupList","ruleTagsList","ruleJsonObj","tagIds","deleteUnBackupItemBehavior","addUnBackupItemBehavior","addUnBackupItem","deleteBackupItem","addBackupItem","TagsRule","interActifyAssertsList","backupList","isBackup","condition","ruleJson","getUnBackupNextNodeList","nextNodeItem","nextNodeIndex","judgeForm","tagRule","transformSaveRules","getRuleTagsListAPI","getRuleTagsList","getSkillListAPI","DialogueDetail","JudgeDetail","startDetailData","drawerRef","getNodeSelectList","getNodeSelectListAPI","updateStartPickSkill","updateStartPickNode","updateStartNodeAPI","updateJudgeNodeDetailAPI","closeDrawer","updateDialogueDetailAPI","sourceNodeId","targetNodeInfo","pickNode","cellRenderData","getStartNodeAPI","getJudgeNodeDetailAPI","getDialogueNodeDetailAPI","initDrawerRef","drawer","currentGraph","getSkillList","reFill","Detail","statu","provide","beginTime","endTime","initSelectedVersion","getAnyliseVersionList","initAnylise","Version","Flowchart","tabIndex","updateTabActiveIndex","$router","tabId","tabs","tab","nextTab","addTab","targetName","newTabName","editableTabs","editableTabsValue","listArr","remark","showAddServiceDialog","closeAddServiceDialog","servicesForm","rule","serviceKey","confirmAddService","activeIndex","accessMap","$store","getters","getAccessMap","getServicesListAPI","openService","targetTabInfo","commit","anylise","onlineServiceAPI","initList","msg","offlineServiceAPI","deleteServicesAPI","commandStr","withDraw","onShelve","deleteService","addServicesAPI","factory","Uint16Array","Uint32Array","Int8Array","Int16Array","Int32Array","Float32Array","Uint8ClampedArray","extend","endl","decodeB64","raise","pred","encolon","checkParameter","param","possibilities","checkIsTypedArray","standardTypeEh","checkTypeOf","checkNonNegativeInt","checkOneOf","constructorKeys","checkConstructor","leftPad","ShaderFile","hasErrors","ShaderLine","ShaderError","fileNumber","lineNumber","file","guessCommand","pat","pat2","guessCallSite","parseSource","files","unknown","lineNumberInfo","nameInfo","parseErrorLog","errLog","errMsg","annotateFiles","checkShaderError","shader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","typeName","FRAGMENT_SHADER","checkCommandType","strings","token","tokenPat","checkLinkError","program","fragShader","vertShader","getProgramParameter","LINK_STATUS","getProgramInfoLog","fragParse","vertParse","saveCommandRef","_commandRef","saveDrawCommandInfo","uniforms","stringStore","addProps","dict","_fragId","frag","_vertId","uniformSet","_uniformSet","dynamic","attributeSet","_attributeSet","_hasCount","commandRaise","callSite","checkCommand","checkParameterCommand","checkOptional","checkFramebufferFormat","attachment","texFormats","rbFormats","texture","_texture","internalformat","renderbuffer","_renderbuffer","format","GL_CLAMP_TO_EDGE","GL_NEAREST","GL_NEAREST_MIPMAP_NEAREST","GL_LINEAR_MIPMAP_NEAREST","GL_NEAREST_MIPMAP_LINEAR","GL_LINEAR_MIPMAP_LINEAR","GL_BYTE","GL_UNSIGNED_BYTE","GL_SHORT","GL_UNSIGNED_SHORT","GL_INT","GL_UNSIGNED_INT","GL_FLOAT","GL_UNSIGNED_SHORT_4_4_4_4","GL_UNSIGNED_SHORT_5_5_5_1","GL_UNSIGNED_SHORT_5_6_5","GL_UNSIGNED_INT_24_8_WEBGL","GL_HALF_FLOAT_OES","TYPE_SIZE","pixelSize","channels","isPow2","checkTexture2D","mipData","limits","maxTextureSize","wrapS","wrapT","mipmask","minFilter","extensions","magFilter","genMipmaps","mipimages","images","mw","mh","compressed","rowSize","unpackAlignment","checkTextureCube","faces","face","mipmaps","check$1","optional","parameter","commandParameter","commandType","nni","oneOf","shaderError","linkError","saveDrawInfo","framebufferFormat","texture2D","textureCube","VARIABLE_COUNTER","DYN_FUNC","DYN_CONSTANT","DYN_ARRAY","DynamicVariable","escapeStr","splitParts","firstChar","lastChar","subparts","toAccessorString","defineDynamic","isDynamic","_reglType","unbox","accessor","raf","createStringStore","stringIds","stringValues","createCanvas","onDone","pixelRatio","resizeObserver","innerWidth","innerHeight","onDestroy","createContext","contextAttributes","isWebGLContext","drawArrays","drawElements","parseExtensions","getElement","parseArgs","args_","optionalExtensions","devicePixelRatio","profile","premultipliedAlpha","createExtensionCache","tryLoadExtension","name_","ext","getExtension","GL_BYTE$1","GL_UNSIGNED_BYTE$2","GL_SHORT$1","GL_UNSIGNED_SHORT$1","GL_INT$1","GL_UNSIGNED_INT$1","GL_FLOAT$2","nextPow16","createPool","bufferPool","alloc","sz","bin","free","buf","allocType","freeType","pool","GL_SUBPIXEL_BITS","GL_RED_BITS","GL_GREEN_BITS","GL_BLUE_BITS","GL_ALPHA_BITS","GL_DEPTH_BITS","GL_STENCIL_BITS","GL_ALIASED_POINT_SIZE_RANGE","GL_ALIASED_LINE_WIDTH_RANGE","GL_MAX_TEXTURE_SIZE","GL_MAX_VIEWPORT_DIMS","GL_MAX_VERTEX_ATTRIBS","GL_MAX_VERTEX_UNIFORM_VECTORS","GL_MAX_VARYING_VECTORS","GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS","GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS","GL_MAX_TEXTURE_IMAGE_UNITS","GL_MAX_FRAGMENT_UNIFORM_VECTORS","GL_MAX_CUBE_MAP_TEXTURE_SIZE","GL_MAX_RENDERBUFFER_SIZE","GL_VENDOR","GL_RENDERER","GL_VERSION","GL_SHADING_LANGUAGE_VERSION","GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT","GL_MAX_COLOR_ATTACHMENTS_WEBGL","GL_MAX_DRAW_BUFFERS_WEBGL","GL_TEXTURE_2D","GL_TEXTURE_CUBE_MAP","GL_TEXTURE_CUBE_MAP_POSITIVE_X","GL_TEXTURE0","GL_RGBA","GL_FLOAT$1","GL_UNSIGNED_BYTE$1","GL_FRAMEBUFFER","GL_FRAMEBUFFER_COMPLETE","GL_COLOR_ATTACHMENT0","GL_COLOR_BUFFER_BIT$1","wrapLimits","maxAnisotropic","ext_texture_filter_anisotropic","getParameter","maxDrawbuffers","maxColorAttachments","webgl_draw_buffers","readFloat","oes_texture_float","readFloatTexture","createTexture","bindTexture","texImage2D","fbo","createFramebuffer","bindFramebuffer","framebufferTexture2D","checkFramebufferStatus","clearColor","pixels","readPixels","getError","deleteFramebuffer","deleteTexture","isIE","appVersion","npotTextureCube","cubeTexture","activeTexture","colorBits","depthBits","stencilBits","subpixelBits","pointSizeDims","lineWidthDims","maxViewportDims","maxCombinedTextureUnits","maxCubeMapSize","maxRenderbufferSize","maxTextureUnits","maxAttributes","maxVertexUniforms","maxVertexTextureUnits","maxVaryingVectors","maxFragmentUniforms","glsl","vendor","isNDArrayLike","stride","flattenUtils","arrayShape$1","flattenArray","flatten1D","flatten2D","ptr","flatten3D","nz","ptr_","col","flattenRec","level","out_","array_","arrayTypes","int8","int16","int32","uint8","uint16","uint32","float","float32","glTypes","dynamic$1","stream","usageTypes","arrayFlatten","arrayShape","GL_STATIC_DRAW","GL_STREAM_DRAW","GL_UNSIGNED_BYTE$3","GL_FLOAT$3","DTYPES_SIZES","typedArrayCode","inp","shapeX","shapeY","strideX","strideY","wrapBufferState","stats","destroyBuffer","bufferCount","bufferSet","REGLBuffer","createBuffer","usage","dtype","persistentData","bindBuffer","streamPool","createStream","initBufferFromData","destroyStream","stream$$1","initBufferFromTypedArray","bufferData","persist","flatData","typedData","transposeData","deleteBuffer","deferInit","persistent","reglBuffer","setSubData","bufferSubData","subdata","offset_","converted","_buffer","restoreBuffers","getTotalBufferSize","getBuffer","wrapper","_initBuffer","triangles","triangle","primTypes","GL_POINTS","GL_LINES","GL_TRIANGLES","GL_BYTE$2","GL_UNSIGNED_BYTE$4","GL_SHORT$2","GL_UNSIGNED_SHORT$2","GL_INT$2","GL_UNSIGNED_INT$2","GL_ELEMENT_ARRAY_BUFFER","GL_STREAM_DRAW$1","GL_STATIC_DRAW$1","wrapElementsState","bufferState","elementSet","elementCount","elementTypes","REGLElementBuffer","primType","vertCount","oes_element_index_uint","createElementStream","initElements","destroyElementStream","elements","predictedType","destroyElements","elementsCount","createElements","reglElements","primitive","_elements","getElements","GL_UNSIGNED_SHORT$4","convertToHalfFloat","ushorts","sgn","frac","isPow2$1","GL_COMPRESSED_TEXTURE_FORMATS","GL_TEXTURE_2D$1","GL_TEXTURE_CUBE_MAP$1","GL_TEXTURE_CUBE_MAP_POSITIVE_X$1","GL_RGBA$1","GL_ALPHA","GL_RGB","GL_LUMINANCE","GL_LUMINANCE_ALPHA","GL_RGBA4","GL_RGB5_A1","GL_RGB565","GL_UNSIGNED_SHORT_4_4_4_4$1","GL_UNSIGNED_SHORT_5_5_5_1$1","GL_UNSIGNED_SHORT_5_6_5$1","GL_UNSIGNED_INT_24_8_WEBGL$1","GL_DEPTH_COMPONENT","GL_DEPTH_STENCIL","GL_SRGB_EXT","GL_SRGB_ALPHA_EXT","GL_HALF_FLOAT_OES$1","GL_COMPRESSED_RGB_S3TC_DXT1_EXT","GL_COMPRESSED_RGBA_S3TC_DXT1_EXT","GL_COMPRESSED_RGBA_S3TC_DXT3_EXT","GL_COMPRESSED_RGBA_S3TC_DXT5_EXT","GL_COMPRESSED_RGB_ATC_WEBGL","GL_COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL","GL_COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL","GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG","GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG","GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","GL_COMPRESSED_RGB_ETC1_WEBGL","GL_UNSIGNED_BYTE$5","GL_UNSIGNED_SHORT$3","GL_UNSIGNED_INT$3","GL_FLOAT$4","GL_TEXTURE_WRAP_S","GL_TEXTURE_WRAP_T","GL_REPEAT","GL_CLAMP_TO_EDGE$1","GL_MIRRORED_REPEAT","GL_TEXTURE_MAG_FILTER","GL_TEXTURE_MIN_FILTER","GL_NEAREST$1","GL_LINEAR","GL_NEAREST_MIPMAP_NEAREST$1","GL_LINEAR_MIPMAP_NEAREST$1","GL_NEAREST_MIPMAP_LINEAR$1","GL_LINEAR_MIPMAP_LINEAR$1","GL_GENERATE_MIPMAP_HINT","GL_DONT_CARE","GL_FASTEST","GL_NICEST","GL_TEXTURE_MAX_ANISOTROPY_EXT","GL_UNPACK_ALIGNMENT","GL_UNPACK_FLIP_Y_WEBGL","GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL","GL_UNPACK_COLORSPACE_CONVERSION_WEBGL","GL_BROWSER_DEFAULT_WEBGL","GL_TEXTURE0$1","MIPMAP_FILTERS","CHANNELS_FORMAT","FORMAT_CHANNELS","objectName","CANVAS_CLASS","OFFSCREENCANVAS_CLASS","CONTEXT2D_CLASS","BITMAP_CLASS","IMAGE_CLASS","VIDEO_CLASS","PIXEL_CLASSES","TYPE_SIZES","FORMAT_SIZES_SPECIAL","isNumericArray","isRectArray","classString","isCanvasElement","isOffscreenCanvas","isContext2D","isBitmap","isImageElement","isVideoElement","isPixelData","typedArrayCode$1","convertData","preConvert","postConvert","strideC","getTextureSize","isMipmap","isCube","createTextureSet","reglPoll","contextState","mipmapHint","wrapModes","magFilters","minFilters","colorSpace","textureTypes","textureFormats","compressedTextureFormats","ext_srgb","srgb","srgba","oes_texture_half_float","webgl_depth_texture","webgl_compressed_texture_s3tc","webgl_compressed_texture_atc","webgl_compressed_texture_pvrtc","webgl_compressed_texture_etc1","supportedCompressedFormats","supportedFormats","textureFormatsInvert","textureTypesInvert","magFiltersInvert","minFiltersInvert","wrapModesInvert","colorFormats","glenum","TexFlags","premultiplyAlpha","copyFlags","parseFlags","hasChannels","hasFormat","formatStr","setFlags","pixelStorei","TexImage","needsFree","needsCopy","parseImage","viewW","viewportWidth","viewH","viewportHeight","shapeC","naturalWidth","naturalHeight","videoWidth","videoHeight","dd","allocData","setImage","miplevel","compressedTexImage2D","copyTexImage2D","setSubImage","texSubImage2D","compressedTexSubImage2D","copyTexSubImage2D","imagePool","allocImage","freeImage","MipMap","parseMipMapFromShape","mipmap","parseMipMapFromObject","imgData","setMipMap","mipPool","allocMipMap","freeMipMap","TexInfo","anisotropic","parseTexInfo","mag","optWrapS","optWrapT","hasMipMap","setTexInfo","texParameteri","generateMipmap","textureCount","textureSet","numTexUnits","textureUnits","REGLTexture","refCount","bindCount","texInfo","tempBind","tempRestore","createTexture2D","reglTexture2D","subimage","x_","y_","level_","imageData","h_","_w","_h","decRef","createTextureCube","a0","a3","a4","a5","cubeCount","reglTextureCube","faceInput","radius_","destroyTextures","restoreTextures","tex","refreshTextures","getTotalTextureSize","create2D","createCube","getTexture","refresh","GL_RENDERBUFFER","GL_RGBA4$1","GL_RGB5_A1$1","GL_RGB565$1","GL_DEPTH_COMPONENT16","GL_STENCIL_INDEX8","GL_DEPTH_STENCIL$1","GL_SRGB8_ALPHA8_EXT","GL_RGBA32F_EXT","GL_RGBA16F_EXT","GL_RGB16F_EXT","FORMAT_SIZES","getRenderbufferSize","wrapRenderbuffers","formatTypes","ext_color_buffer_half_float","webgl_color_buffer_float","formatTypesInvert","renderbufferCount","renderbufferSet","REGLRenderbuffer","rb","bindRenderbuffer","deleteRenderbuffer","createRenderbuffer","reglRenderbuffer","renderbufferStorage","restoreRenderbuffers","getTotalRenderbufferSize","GL_FRAMEBUFFER$1","GL_RENDERBUFFER$1","GL_TEXTURE_2D$2","GL_TEXTURE_CUBE_MAP_POSITIVE_X$2","GL_COLOR_ATTACHMENT0$1","GL_DEPTH_ATTACHMENT","GL_STENCIL_ATTACHMENT","GL_DEPTH_STENCIL_ATTACHMENT","GL_FRAMEBUFFER_COMPLETE$1","GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT","GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT","GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS","GL_FRAMEBUFFER_UNSUPPORTED","GL_HALF_FLOAT_OES$2","GL_UNSIGNED_BYTE$6","GL_FLOAT$5","GL_RGB$1","GL_RGBA$2","GL_DEPTH_COMPONENT$1","colorTextureFormatEnums","textureFormatChannels","textureTypeSizes","GL_RGBA4$2","GL_RGB5_A1$2","GL_RGB565$2","GL_DEPTH_COMPONENT16$1","GL_STENCIL_INDEX8$1","GL_DEPTH_STENCIL$2","GL_SRGB8_ALPHA8_EXT$1","GL_RGBA32F_EXT$1","GL_RGBA16F_EXT$1","GL_RGB16F_EXT$1","colorRenderbufferFormatEnums","statusCode","wrapFBOState","textureState","renderbufferState","framebufferState","cur","setFBO","colorTextureFormats","colorRenderbufferFormats","colorTypes","FramebufferAttachment","incRefAndCheckShape","tw","th","attach","location","framebufferRenderbuffer","parseAttachment","allocAttachment","isTexture","unwrapAttachment","resizeAttachment","framebufferCount","framebufferSet","REGLFramebuffer","framebuffer","colorAttachments","depthAttachment","stencilAttachment","depthStencilAttachment","decFBORefs","updateFramebuffer","isContextLost","createFBO","reglFramebuffer","needsDepth","needsStencil","colorBuffer","colorTexture","colorFormat","colorType","colorCount","depthBuffer","stencilBuffer","depthStencilBuffer","depthStencilTexture","colors","depthTexture","depthStencil","commonColorAttachmentSize","colorAttachmentSize","_framebuffer","createCubeFBO","reglFramebufferCube","colorCubes","cubeMapParams","cube","restoreFramebuffers","fb","getFramebuffer","GL_FLOAT$6","GL_ARRAY_BUFFER$1","AttributeRecord","divisor","wrapAttributeState","NUM_ATTRIBUTES","attributeBindings","vaoCount","vaoSet","Record","scope","currentVAO","targetVAO","extVAO","restoreVAO","createVAO","getVAO","setVAO","setVAOEXT","setVAOEmulated","destroyVAOEXT","disableVertexAttribArray","oes_vertex_array_object","extInstanced","angle_instanced_arrays","vao","_vao","bindVertexArrayOES","bindAttrs","exti","enableVertexAttribArray","vertexAttribPointer","offfset","vertexAttribDivisorANGLE","vertexAttrib4f","REGLVAO","extension","createVertexArrayOES","buffers","_attr","updateVAO","bufUpdated","nattributes","spec","rec","deleteVertexArrayOES","GL_FRAGMENT_SHADER","GL_VERTEX_SHADER","GL_ACTIVE_UNIFORMS","GL_ACTIVE_ATTRIBUTES","wrapShaderState","fragShaders","vertShaders","ActiveInfo","insertActiveInfo","getShader","createShader","shaderSource","compileShader","programCache","programList","PROGRAM_COUNTER","REGLProgram","fragId","vertId","uniformsCount","attributesCount","linkProgram","attributeLocations","createProgram","attachShader","bindAttribLocation","numUniforms","getActiveUniform","getUniformLocation","numAttributes","getActiveAttrib","getAttribLocation","restoreShaders","getMaxUniformsCount","getMaxAttributesCount","deleteShader","deleteProgram","shaderCount","attribLocations","prevProgram","GL_RGBA$3","GL_UNSIGNED_BYTE$7","GL_PACK_ALIGNMENT","GL_FLOAT$7","wrapReadPixels","glAttributes","readPixelsImpl","preserveDrawingBuffer","framebufferWidth","framebufferHeight","readPixelsFBO","createEnvironment","varCounter","linkedNames","linkedValues","vars","exit","entryToString","exitToString","save","conditional","thenBlock","elseBlock","thenToString","elseToString","else","elseClause","globalBlock","procedures","proc","bodyToString","compile","cond","CUTE_COMPONENTS","GL_UNSIGNED_BYTE$8","ATTRIB_STATE_POINTER","ATTRIB_STATE_CONSTANT","DYN_FUNC$1","DYN_PROP$1","DYN_CONTEXT$1","DYN_STATE$1","DYN_THUNK","DYN_CONSTANT$1","DYN_ARRAY$1","S_DITHER","S_BLEND_ENABLE","S_BLEND_COLOR","S_BLEND_EQUATION","S_BLEND_FUNC","S_DEPTH_ENABLE","S_DEPTH_FUNC","S_DEPTH_RANGE","S_DEPTH_MASK","S_COLOR_MASK","S_CULL_ENABLE","S_CULL_FACE","S_FRONT_FACE","S_LINE_WIDTH","S_POLYGON_OFFSET_ENABLE","S_POLYGON_OFFSET_OFFSET","S_SAMPLE_ALPHA","S_SAMPLE_ENABLE","S_SAMPLE_COVERAGE","S_STENCIL_ENABLE","S_STENCIL_MASK","S_STENCIL_FUNC","S_STENCIL_OPFRONT","S_STENCIL_OPBACK","S_SCISSOR_ENABLE","S_SCISSOR_BOX","S_VIEWPORT","S_PROFILE","S_FRAMEBUFFER","S_VERT","S_FRAG","S_ELEMENTS","S_PRIMITIVE","S_COUNT","S_OFFSET","S_INSTANCES","S_VAO","SUFFIX_WIDTH","SUFFIX_HEIGHT","S_FRAMEBUFFER_WIDTH","S_FRAMEBUFFER_HEIGHT","S_VIEWPORT_WIDTH","S_VIEWPORT_HEIGHT","S_DRAWINGBUFFER","S_DRAWINGBUFFER_WIDTH","S_DRAWINGBUFFER_HEIGHT","NESTED_OPTIONS","GL_ARRAY_BUFFER$2","GL_ELEMENT_ARRAY_BUFFER$1","GL_FRAGMENT_SHADER$1","GL_VERTEX_SHADER$1","GL_TEXTURE_2D$3","GL_TEXTURE_CUBE_MAP$2","GL_CULL_FACE","GL_BLEND","GL_DITHER","GL_STENCIL_TEST","GL_DEPTH_TEST","GL_SCISSOR_TEST","GL_POLYGON_OFFSET_FILL","GL_SAMPLE_ALPHA_TO_COVERAGE","GL_SAMPLE_COVERAGE","GL_FLOAT$8","GL_FLOAT_VEC2","GL_FLOAT_VEC3","GL_FLOAT_VEC4","GL_INT$3","GL_INT_VEC2","GL_INT_VEC3","GL_INT_VEC4","GL_BOOL","GL_BOOL_VEC2","GL_BOOL_VEC3","GL_BOOL_VEC4","GL_FLOAT_MAT2","GL_FLOAT_MAT3","GL_FLOAT_MAT4","GL_SAMPLER_2D","GL_SAMPLER_CUBE","GL_TRIANGLES$1","GL_FRONT","GL_BACK","GL_CW","GL_CCW","GL_MIN_EXT","GL_MAX_EXT","GL_ALWAYS","GL_KEEP","GL_ZERO","GL_ONE","GL_FUNC_ADD","GL_LESS","GL_FRAMEBUFFER$2","GL_COLOR_ATTACHMENT0$2","blendFuncs","invalidBlendCombinations","compareFuncs","stencilOps","shaderType","orientationType","isBufferArgs","sortState","Declaration","thisDep","contextDep","propDep","isStatic","decl","createStaticDecl","createDynamicDecl","dyn","numArgs","subDyn","subArgs","SCOPE_DECL","reglCore","elementState","uniformState","attributeState","shaderState","drawState","blendEquations","ext_blend_minmax","extInstancing","extDrawBuffers","currentState","nextState","GL_STATE_NAMES","GL_FLAGS","GL_VARIABLES","stateFlag","sname","cap","stateVariable","drawingBufferWidth","drawingBufferHeight","sharedState","sharedConstants","backBuffer","drawBuffer","drawCallCounter","createREGLEnvironment","env","batchId","SHARED","shared","CHECK","assert","nextVars","currentVars","variable","constants","invoke","argList","attribCache","scopeAttribs","scopeAttrib","parseProfile","profileEnable","staticOptions","dynamicOptions","parseFramebuffer","FRAMEBUFFER","CONTEXT","FRAMEBUFFER_FUNC","FRAMEBUFFER_STATE","parseViewportScissor","parseBox","BOX_W","BOX_H","dynBox","BOX","BOX_X","BOX_Y","prevViewport","VIEWPORT","scissor_box","parseAttribLocations","staticProgram","staticAttributes","sAttributes","bindings","parseProgram","parseShader","progVar","SHADER_STATE","progDef","parseDraw","parseElements","ELEMENTS","IS_BUFFER_ARGS","ELEMENT_STATE","elementDefn","elementStream","ifte","parsePrimitive","dynPrimitive","PRIM_TYPES","parseParam","isOffset","dynValue","parseVertCount","dynCount","MISSING","DYNAMIC","instances","parseGLState","STATE","parseStatic","parseDynamic","COMPARE_FUNCS","Z_NEAR","Z_FAR","srcRGB","srcAlpha","dstRGB","dst","dstAlpha","BLEND_FUNCS","INVALID_BLEND_COMBINATIONS","SRC_RGB","DST_RGB","BLEND_EQUATIONS","checkProp","cmp","fail","zfail","zpass","STENCIL_OPS","units","FACTOR","UNITS","sampleValue","sampleInvert","VALUE","parseUniforms","staticUniforms","dynamicUniforms","UNIFORMS","reglType","ITEM","parseAttributes","dynamicAttributes","attributeDefs","attribute","VALID_KEYS","isStream","appendAttributeCode","BUFFER_STATE","defaultRecord","BUFFER","TYPE","emitReadRecord","parseVAO","vaoRef","parseContext","staticContext","dynamicContext","parseArguments","KEY_NAMES","checkKeys","viewportAndScissor","copyBox","defn","scopeVAO","drawVAO","useVAO","staticBindings","emitContext","contextEnter","emitPollFramebuffer","skipCheck","EXT_DRAW_BUFFERS","GL","NEXT","DRAW_BUFFERS","BACK_BUFFER","emitPollState","CURRENT_VARS","NEXT_VARS","CURRENT_STATE","NEXT_STATE","CURRENT","emitSetOptions","injectExtensions","instancing","emitProfile","useScope","incrementCounter","CPU_START","QUERY_COUNTER","USE_PROFILE","STATS","TIMER","profileArg","perfCounter","emitProfileStart","emitProfileEnd","scopeProfile","emitAttributes","typeLength","emitBindAttribute","ATTRIBUTE","LOCATION","BINDING","CONST_COMPONENTS","COMMON_KEYS","emitBuffer","SIZE","DIVISOR","emitConstant","emitUniforms","infix","uniform","UNIFORM","TEX_VALUE","MAT_VALUE","emitCheck","checkType","checkVector","checkTexture","unroll","TEX","matSize","STORAGE","emitDraw","DRAW_STATE","drawOptions","emitElements","contextDynamic","emitCount","COUNT","emitValue","INSTANCES","EXT_INSTANCING","PRIMITIVE","ELEMENT_TYPE","elementsStatic","emitInstancing","emitRegular","createBody","emitBody","parentEnv","emitDrawBody","emitDrawProc","drawCache","PROG_ID","CACHED_PROC","emitBatchDynamicShaderBody","emitBatchBody","BATCH_ID","PROP_LIST","NUM_PROPS","PROPS","isInnerDefn","isOuterDefn","needsContext","needsFramebuffer","progCache","PROGRAM","emitBatchProc","progDefn","batchCache","emitScopeProc","saveShader","isDynamicObject","splatObject","globals","objectRef","deps","appendBlock","compileCommand","procs","poll","common","INSTANCING","GL_QUERY_RESULT_EXT","GL_QUERY_RESULT_AVAILABLE_EXT","GL_TIME_ELAPSED_EXT","createTimer","ext_disjoint_timer_query","queryPool","allocQuery","createQueryEXT","freeQuery","pendingQueries","beginQuery","beginQueryEXT","pushScopeStats","endQuery","endQueryEXT","PendingStats","startQueryIndex","endQueryIndex","pendingStatsPool","allocPendingStats","freePendingStats","pendingStats","timeSum","queryPtr","queryTime","getQueryObjectEXT","startPtr","endPtr","gpuTime","getNumPendingQueries","deleteQueryEXT","GL_COLOR_BUFFER_BIT","GL_DEPTH_BUFFER_BIT","GL_STENCIL_BUFFER_BIT","GL_ARRAY_BUFFER","CONTEXT_LOST_EVENT","CONTEXT_RESTORED_EVENT","DYN_PROP","DYN_CONTEXT","DYN_STATE","haystack","needle","wrapREGL","getContextAttributes","contextLost","extensionState","stats$$1","START_TIME","WIDTH","HEIGHT","tick","core","rafCallbacks","lossCallbacks","restoreCallbacks","destroyCallbacks","activeRAF","handleRAF","startRAF","stopRAF","handleContextLoss","handleContextRestored","compileProcedure","flattenNestedOptions","op","opBack","opFront","separateDynamic","useArrays","staticItems","dynamicItems","option","cpuTime","compiled","EMPTY_ARRAY","reserve","REGLCommand","clearImpl","clearFlags","clearDepth","clearStencil","framebuffer_reglType","frame","pendingCancel","pollViewport","scissorBox","addListener","callbacks","regl","framebufferCube","hasExtension","_gl","_refresh","_regeneratorRuntime","__esModule","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","makeInvokeMethod","tryCatch","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","reject","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iteratorMethod","displayName","isGeneratorFunction","genFun","mark","awrap","iter","skipTempReset","rootRecord","rval","exception","loc","caught","hasCatch","hasFinally","finallyEntry","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode"],"sourceRoot":""}