{"version":3,"file":"js/808.d2fdc49e.js","mappings":"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","sources":["webpack://proactiveServiceSaas/./src/components/TagsRule/Index.vue","webpack://proactiveServiceSaas/./src/utils/tag.js","webpack://proactiveServiceSaas/src/components/TagsRule/Index.vue","webpack://proactiveServiceSaas/./src/components/TagsRule/Index.vue?ed86","webpack://proactiveServiceSaas/./src/components/TagsRule/Index.vue?6211","webpack://proactiveServiceSaas/./src/services/flow.js","webpack://proactiveServiceSaas/./src/services/services.js","webpack://proactiveServiceSaas/./src/services/tag.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"tags-rule-wrapper\"},[[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ruleJson.rules.length > 1),expression:\"ruleJson.rules.length > 1\"}],key:_vm.parentIndex + 'or',staticClass:\"label-or-space\"},[_c('el-button',{key:'button2' + '_' + _vm.parentIndex,attrs:{\"type\":\"success\",\"round\":\"\"},on:{\"click\":function($event){return _vm.handleRulesConditionChange(_vm.ruleJson)}}},[_vm._v(\" \"+_vm._s(_vm.ruleJson.condition === 'AND' ? '且' : '或')+\" \")])],1),_vm._l((_vm.ruleJson.rules),function(item,index){return [_c('div',{key:_vm.parentIndex + '_' + index,staticClass:\"label-ground\"},[_c('div',{staticClass:\"tag-condition--parent\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.rules.length > 1),expression:\"item.rules.length > 1\"}],staticClass:\"tag-condition\"},[_c('el-button',{key:'button' + index + '_' + _vm.parentIndex,attrs:{\"type\":\"warning\",\"round\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleRulesConditionChange(item)}}},[_vm._v(\" \"+_vm._s(item.condition === 'AND' ? '且' : '或')+\" \")])],1),_vm._l((item.rules),function(childItem,n){return _c('div',{key:index + 'tagId' + n,class:{ 'label-item': true, paddingTop: n > 0 }},[(childItem.tagKey === 'button_click')?[_c('span',{staticClass:\"txt\"},[_vm._v(_vm._s(childItem.tagName))]),(_vm.cache[childItem.tagKey].list)?_c('el-select',{key:n + 'dialogue',staticStyle:{\"width\":\"130px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择对话框\"},on:{\"change\":function($event){return _vm.getDialogueButtonList(childItem.dialogueNodeId, childItem.tagKey)}},model:{value:(childItem.dialogueNodeId),callback:function ($$v) {_vm.$set(childItem, \"dialogueNodeId\", $$v)},expression:\"childItem.dialogueNodeId\"}},_vm._l((_vm.cache[childItem.tagKey].list),function(dialogueItem){return _c('el-option',{key:dialogueItem.id,attrs:{\"value\":dialogueItem.id,\"label\":dialogueItem.name}})}),1):_vm._e(),(childItem.dialogueNodeId)?_c('el-select',{key:n + 'button',staticStyle:{\"width\":\"150px\",\"margin-left\":\"5px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择按钮\"},model:{value:(childItem.buttonId),callback:function ($$v) {_vm.$set(childItem, \"buttonId\", $$v)},expression:\"childItem.buttonId\"}},_vm._l((_vm.cache[childItem.tagKey + '_button'].list),function(buttonItem){return _c('el-option',{key:buttonItem.id,attrs:{\"value\":buttonItem.id.toString(),\"label\":buttonItem.name}})}),1):_vm._e(),(childItem.dialogueNodeId && childItem.buttonId)?_c('el-input',{staticClass:\"short-input\",attrs:{\"size\":\"mini\"},model:{value:(childItem.count),callback:function ($$v) {_vm.$set(childItem, \"count\", $$v)},expression:\"childItem.count\"}}):_vm._e(),(childItem.dialogueNodeId && childItem.buttonId)?_c('span',{staticClass:\"txt end-text\"},[_vm._v(_vm._s(_vm.getTagUnit(childItem.tagKey))+\" \")]):_vm._e()]:(childItem.tagKey === 'dialog_show')?[_c('span',{staticClass:\"txt\"},[_vm._v(_vm._s(childItem.tagName))]),_c('el-select',{key:n + '-dialogue-show',staticStyle:{\"width\":\"130px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择对话框\"},model:{value:(childItem.showDialogueNodeId),callback:function ($$v) {_vm.$set(childItem, \"showDialogueNodeId\", $$v)},expression:\"childItem.showDialogueNodeId\"}},_vm._l((_vm.cache['button_click'].list),function(dialogueItem){return _c('el-option',{key:dialogueItem.id,attrs:{\"value\":dialogueItem.id,\"label\":dialogueItem.name}})}),1),(childItem.showDialogueNodeId)?_c('el-input',{staticClass:\"short-input\",attrs:{\"size\":\"mini\"},model:{value:(childItem.showCount),callback:function ($$v) {_vm.$set(childItem, \"showCount\", $$v)},expression:\"childItem.showCount\"}}):_vm._e(),(childItem.showDialogueNodeId)?_c('span',{staticClass:\"txt end-text\"},[_vm._v(_vm._s(_vm.getTagUnit(childItem.tagKey))+\" \")]):_vm._e()]:(childItem.tagKey === 'sleep_time')?[_c('span',{staticClass:\"txt\"},[_vm._v(_vm._s(childItem.tagName))]),_c('el-select',{key:n + childItem.tagKey,staticStyle:{\"width\":\"80px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(childItem.value),callback:function ($$v) {_vm.$set(childItem, \"value\", $$v)},expression:\"childItem.value\"}},_vm._l(([\n                    { id: 1, name: '是' },\n                    { id: 0, name: '否' }\n                  ]),function(boolItem){return _c('el-option',{key:boolItem.id,attrs:{\"value\":boolItem.id,\"label\":boolItem.name}})}),1)]:(childItem.tagKey === 'dmp_crowd')?[_c('span',{staticClass:\"txt\"},[_vm._v(_vm._s(childItem.tagName))]),_c('el-select',{key:n + childItem.tagKey,staticStyle:{\"width\":\"150px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(childItem.value),callback:function ($$v) {_vm.$set(childItem, \"value\", $$v)},expression:\"childItem.value\"}},_vm._l((_vm.cache[childItem.tagKey].list),function(crowdItem){return _c('el-option',{key:crowdItem.id,attrs:{\"value\":crowdItem.id,\"label\":crowdItem.name}})}),1)]:(childItem.tagKey === 'event_hit')?[_c('span',{staticClass:\"txt\"},[_vm._v(_vm._s(childItem.tagName))]),_c('el-select',{key:n + childItem.tagKey,staticStyle:{\"width\":\"130px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(childItem.value),callback:function ($$v) {_vm.$set(childItem, \"value\", $$v)},expression:\"childItem.value\"}},_vm._l((_vm.cache[childItem.tagKey].list),function(eventItem){return _c('el-option',{key:eventItem.eventCode,attrs:{\"value\":eventItem.eventCode,\"label\":eventItem.eventName}})}),1)]:(childItem.tagKey === 'time_hit')?[_c('span',{staticClass:\"txt\"},[_vm._v(_vm._s(childItem.tagName))]),_c('el-select',{key:n + childItem.tagKey,staticStyle:{\"width\":\"150px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择时间类型\"},model:{value:(childItem.type),callback:function ($$v) {_vm.$set(childItem, \"type\", $$v)},expression:\"childItem.type\"}},_vm._l(([\n                    { type: 1, name: '固定时间' },\n                    { type: 2, name: '推理时间' },\n                    { type: 3, name: '时间区间' },\n                    { type: 4, name: '区间推理时间' }\n                  ]),function(timeTypeItem){return _c('el-option',{key:timeTypeItem.type,attrs:{\"value\":timeTypeItem.type,\"label\":timeTypeItem.name}})}),1),(childItem.type === 1)?_c('el-time-picker',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"value-format\":\"HH:mm:ss\",\"placeholder\":\"选择时间\"},model:{value:(childItem.staticTimeVal),callback:function ($$v) {_vm.$set(childItem, \"staticTimeVal\", $$v)},expression:\"childItem.staticTimeVal\"}}):(childItem.type === 2)?_c('el-select',{key:n + childItem.tagKey + childItem.type,staticStyle:{\"width\":\"150px\",\"margin-left\":\"5px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(childItem.inferenceTimeVal),callback:function ($$v) {_vm.$set(childItem, \"inferenceTimeVal\", $$v)},expression:\"childItem.inferenceTimeVal\"}},_vm._l(([\n                    { id: 1, name: childItem.type + '_[PRESJTXTIME]', cname: childItem.type + '_睡觉时间'},\n                  ]),function(inferenceItem){return _c('el-option',{key:inferenceItem.id,attrs:{\"value\":inferenceItem.name,\"label\":inferenceItem.cname}})}),1):(childItem.type === 3)?_c('el-time-picker',{staticStyle:{\"margin-left\":\"5px\"},attrs:{\"is-range\":\"\",\"value-format\":\"HH:mm:ss\",\"range-separator\":\"至\",\"start-placeholder\":\"开始时间\",\"end-placeholder\":\"结束时间\",\"placeholder\":\"选择时间范围\"},model:{value:(childItem.intervalTimeVal),callback:function ($$v) {_vm.$set(childItem, \"intervalTimeVal\", $$v)},expression:\"childItem.intervalTimeVal\"}}):(childItem.type === 4)?[_c('el-select',{key:n + childItem.tagKey + childItem.type + 'region-type',staticStyle:{\"width\":\"150px\",\"margin-left\":\"5px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(childItem.inferRegionStartVal),callback:function ($$v) {_vm.$set(childItem, \"inferRegionStartVal\", $$v)},expression:\"childItem.inferRegionStartVal\"}},_vm._l(([\n                      { id: 1, name: 'YJYLBEGINTIME', cname: '静音开机开始时间' },\n                    ]),function(timeItem){return _c('el-option',{key:timeItem.id,attrs:{\"value\":timeItem.name,\"label\":timeItem.cname}})}),1),_c('span',{staticStyle:{\"color\":\"#666\"}},[_vm._v(\"-\")]),_c('el-select',{key:n + childItem.tagKey + childItem.type,staticStyle:{\"width\":\"150px\",\"margin-left\":\"5px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(childItem.inferRegionEndVal),callback:function ($$v) {_vm.$set(childItem, \"inferRegionEndVal\", $$v)},expression:\"childItem.inferRegionEndVal\"}},_vm._l(([\n                      { id: 1, name: 'YJYLENDTIME', cname: '静音开机结束时间' },\n                    ]),function(timeItem){return _c('el-option',{key:timeItem.id,attrs:{\"value\":timeItem.name,\"label\":timeItem.cname}})}),1)]:_vm._e()]:[_c('span',{staticClass:\"txt\"},[_vm._v(_vm._s(childItem.tagName))]),_c('el-select',{key:n + childItem.tagKey,staticStyle:{\"width\":\"80px\"},attrs:{\"filterable\":\"\",\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(childItem.value),callback:function ($$v) {_vm.$set(childItem, \"value\", $$v)},expression:\"childItem.value\"}},_vm._l(([\n                    { id: '1', name: '是' },\n                    { id: '0', name: '否' }\n                  ]),function(boolItem){return _c('el-option',{key:boolItem.id,attrs:{\"value\":boolItem.id,\"label\":boolItem.name}})}),1)],_c('span',{staticClass:\"i\",on:{\"click\":function($event){return _vm.handleRemoveRule(item, childItem)}}},[_c('i',{staticClass:\"icon iconfont el-icon-cc-delete\"})])],2)}),_c('div',{staticClass:\"label-add\"},[_c('div',{staticClass:\"optional-condition\"},_vm._l((_vm.tagList),function(tagItem){return _c('el-tag',{key:tagItem.tagItem,staticClass:\"oc-item\",attrs:{\"type\":_vm.dataSourceColorEnum[tagItem.dataSource]},nativeOn:{\"click\":function($event){return _vm.handleAddChildRule(item, tagItem)}}},[_vm._v(_vm._s(tagItem.tagName)+\" \")])}),1)])],2)])]}),_c('div',{staticClass:\"label-or\"},[(_vm.tagList.length)?_c('div',{staticClass:\"optional-condition\",style:({\n          'padding-top': _vm.ruleJson.rules.length > 0 ? '10px' : 0,\n        })},[_vm._l((_vm.tagList),function(item){return _c('el-tag',{key:item.tagName,staticClass:\"oc-item\",attrs:{\"type\":_vm.dataSourceColorEnum[item.dataSource]},nativeOn:{\"click\":function($event){return _vm.handleAddRule(item)}}},[_vm._v(_vm._s(item.tagName)+\" \")])}),(_vm.showHitTip)?_c('div',{staticClass:\"introjs-hint\",staticStyle:{\"font-size\":\"28px\",\"position\":\"absolute\",\"bottom\":\"-28px\",\"left\":\"20px\",\"color\":\"#999\"}},[_c('i',{staticClass:\"el-icon-thumb\",staticStyle:{\"font-size\":\"18px\"}}),_c('span',{staticStyle:{\"font-size\":\"12px\"}},[_vm._v(\"点击标签来编辑人群条件\")])]):_vm._e()],2):_vm._e()])]],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const dataSourceColorEnum = {\r\n  1: 'success',\r\n  2: 'danger',\r\n  3: '',\r\n  5: 'warning',\r\n  6: 'warningOrange',\r\n  7: 'warningOrange2',\r\n  8: 'warningCyan',\r\n  11: 'success',\r\n  12: 'gray',\r\n  12.2: 'gray',\r\n  13: 'pink'\r\n}\r\n\r\nexport const dataSourceColorClassEnum = {\r\n  1: 'checkbox--green',\r\n  2: 'checkbox--red',\r\n  3: 'checkbox--blue',\r\n  5: 'checkbox--yellow',\r\n  6: 'checkbox--orange',\r\n  7: 'checkbox--orange2',\r\n  8: 'checkbox--cyan',\r\n  11: 'success',\r\n  12: 'gray',\r\n  12.2: 'gray',\r\n  13: 'checkbox--pink'\r\n}\r\n","<template>\r\n  <div class=\"tags-rule-wrapper\">\r\n    <!-- v-if=\"tagList && tagList.length > 0\" -->\r\n    <template>\r\n      <div\r\n        class=\"label-or-space\"\r\n        :key=\"parentIndex + 'or'\"\r\n        v-show=\"ruleJson.rules.length > 1\"\r\n      >\r\n        <el-button\r\n          type=\"success\"\r\n          round\r\n          :key=\"'button2' + '_' + parentIndex\"\r\n          @click=\"handleRulesConditionChange(ruleJson)\"\r\n        >\r\n          {{ ruleJson.condition === 'AND' ? '且' : '或' }}\r\n        </el-button>\r\n      </div>\r\n      <template\r\n        v-for=\"(item, index) in ruleJson.rules\"\r\n      >\r\n        <div class=\"label-ground\" :key=\"parentIndex + '_' + index\">\r\n          <div class=\"tag-condition--parent\">\r\n            <div class=\"tag-condition\" v-show=\"item.rules.length > 1\">\r\n              <el-button\r\n                type=\"warning\"\r\n                @click=\"handleRulesConditionChange(item)\"\r\n                round\r\n                size=\"small\"\r\n                :key=\"'button' + index + '_' + parentIndex\"\r\n              >\r\n                {{ item.condition === 'AND' ? '且' : '或' }}\r\n              </el-button>\r\n            </div>\r\n            <div\r\n              v-for=\"(childItem, n) in item.rules\"\r\n              :key=\"index + 'tagId' + n\"\r\n              :class=\"{ 'label-item': true, paddingTop: n > 0 }\"\r\n            >\r\n              <!-- 渲染动态表单 -->\r\n              <!-- 按钮点击 -->\r\n              <template v-if=\"childItem.tagKey === 'button_click'\">\r\n                <span class=\"txt\">{{ childItem.tagName }}</span>\r\n                <el-select\r\n                  v-if=\"cache[childItem.tagKey].list\"\r\n                  style=\"width: 130px\"\r\n                  :key=\"n + 'dialogue'\"\r\n                  v-model=\"childItem.dialogueNodeId\"\r\n                  filterable\r\n                  clearable\r\n                  placeholder=\"请选择对话框\"\r\n                  @change=\"getDialogueButtonList(childItem.dialogueNodeId, childItem.tagKey)\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"dialogueItem in cache[childItem.tagKey].list\"\r\n                    :key=\"dialogueItem.id\"\r\n                    :value=\"dialogueItem.id\"\r\n                    :label=\"dialogueItem.name\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n                <el-select\r\n                  v-if=\"childItem.dialogueNodeId\"\r\n                  style=\"width: 150px;margin-left: 5px;\"\r\n                  :key=\"n + 'button'\"\r\n                  v-model=\"childItem.buttonId\"\r\n                  filterable\r\n                  clearable\r\n                  placeholder=\"请选择按钮\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"buttonItem in cache[childItem.tagKey + '_button'].list\"\r\n                    :key=\"buttonItem.id\"\r\n                    :value=\"buttonItem.id.toString()\"\r\n                    :label=\"buttonItem.name\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n                <el-input\r\n                  v-if=\"childItem.dialogueNodeId && childItem.buttonId\"\r\n                  size=\"mini\"\r\n                  class=\"short-input\"\r\n                  v-model=\"childItem.count\"\r\n                ></el-input>\r\n                <span\r\n                  class=\"txt end-text\"\r\n                  v-if=\"childItem.dialogueNodeId && childItem.buttonId\"\r\n                >{{ getTagUnit(childItem.tagKey) }}\r\n                </span>\r\n              </template>\r\n              <!-- 节点曝光 -->\r\n              <template v-else-if=\"childItem.tagKey === 'dialog_show'\">\r\n                <span class=\"txt\">{{ childItem.tagName }}</span>\r\n                <el-select\r\n                  style=\"width: 130px\"\r\n                  :key=\"n + '-dialogue-show'\"\r\n                  v-model=\"childItem.showDialogueNodeId\"\r\n                  filterable\r\n                  clearable\r\n                  placeholder=\"请选择对话框\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"dialogueItem in cache['button_click'].list\"\r\n                    :key=\"dialogueItem.id\"\r\n                    :value=\"dialogueItem.id\"\r\n                    :label=\"dialogueItem.name\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n                <el-input\r\n                  v-if=\"childItem.showDialogueNodeId\"\r\n                  size=\"mini\"\r\n                  class=\"short-input\"\r\n                  v-model=\"childItem.showCount\"\r\n                ></el-input>\r\n                <span\r\n                  class=\"txt end-text\"\r\n                  v-if=\"childItem.showDialogueNodeId\"\r\n                >{{ getTagUnit(childItem.tagKey) }}\r\n                </span>\r\n              </template>\r\n              <!-- 睡觉提醒是否冻结 -->\r\n              <!-- <template v-else-if=\"childItem.tagKey === 'is_lock'\">\r\n                <span class=\"txt\">{{ childItem.tagName }}</span>\r\n                <el-select\r\n                  style=\"width: 80px\"\r\n                  :key=\"n + childItem.tagKey\"\r\n                  v-model=\"childItem.value\"\r\n                  filterable\r\n                  clearable\r\n                  placeholder=\"请选择\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"boolItem in [\r\n                      { id: 1, name: '是' },\r\n                      { id: 0, name: '否' }\r\n                    ]\"\r\n                    :key=\"boolItem.id\"\r\n                    :value=\"boolItem.id\"\r\n                    :label=\"boolItem.name\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n              </template> -->\r\n              <!-- 是否有睡觉提醒经验值 -->\r\n              <template v-else-if=\"childItem.tagKey === 'sleep_time'\">\r\n                <span class=\"txt\">{{ childItem.tagName }}</span>\r\n                <el-select\r\n                  style=\"width: 80px\"\r\n                  :key=\"n + childItem.tagKey\"\r\n                  v-model=\"childItem.value\"\r\n                  filterable\r\n                  clearable\r\n                  placeholder=\"请选择\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"boolItem in [\r\n                      { id: 1, name: '是' },\r\n                      { id: 0, name: '否' }\r\n                    ]\"\r\n                    :key=\"boolItem.id\"\r\n                    :value=\"boolItem.id\"\r\n                    :label=\"boolItem.name\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n              </template>\r\n              <!-- 人群满足 -->\r\n              <template v-else-if=\"childItem.tagKey === 'dmp_crowd'\">\r\n                <span class=\"txt\">{{ childItem.tagName }}</span>\r\n                <el-select\r\n                  style=\"width: 150px\"\r\n                  :key=\"n + childItem.tagKey\"\r\n                  v-model=\"childItem.value\"\r\n                  filterable\r\n                  clearable\r\n                  placeholder=\"请选择\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"crowdItem in cache[childItem.tagKey].list\"\r\n                    :key=\"crowdItem.id\"\r\n                    :value=\"crowdItem.id\"\r\n                    :label=\"crowdItem.name\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n              </template>\r\n              <!-- 用户行为满足 -->\r\n              <template v-else-if=\"childItem.tagKey === 'event_hit'\">\r\n                <span class=\"txt\">{{ childItem.tagName }}</span>\r\n                <el-select\r\n                  style=\"width: 130px\"\r\n                  :key=\"n + childItem.tagKey\"\r\n                  v-model=\"childItem.value\"\r\n                  filterable\r\n                  clearable\r\n                  placeholder=\"请选择\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"eventItem in cache[childItem.tagKey].list\"\r\n                    :key=\"eventItem.eventCode\"\r\n                    :value=\"eventItem.eventCode\"\r\n                    :label=\"eventItem.eventName\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n              </template>\r\n              <!-- 时间到达 -->\r\n              <template v-else-if=\"childItem.tagKey === 'time_hit'\">\r\n                <span class=\"txt\">{{ childItem.tagName }}</span>\r\n                <el-select\r\n                  style=\"width: 150px\"\r\n                  :key=\"n + childItem.tagKey\"\r\n                  v-model=\"childItem.type\"\r\n                  filterable\r\n                  clearable\r\n                  placeholder=\"请选择时间类型\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"timeTypeItem in [\r\n                      { type: 1, name: '固定时间' },\r\n                      { type: 2, name: '推理时间' },\r\n                      { type: 3, name: '时间区间' },\r\n                      { type: 4, name: '区间推理时间' }\r\n                    ]\"\r\n                    :key=\"timeTypeItem.type\"\r\n                    :value=\"timeTypeItem.type\"\r\n                    :label=\"timeTypeItem.name\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n                <el-time-picker\r\n                  v-if=\"childItem.type === 1\"\r\n                  style=\"margin-left: 5px;\"\r\n                  v-model=\"childItem.staticTimeVal\"\r\n                  value-format=\"HH:mm:ss\"\r\n                  placeholder=\"选择时间\"\r\n                >\r\n                </el-time-picker>\r\n                <el-select\r\n                  v-else-if=\"childItem.type === 2\"\r\n                  style=\"width: 150px;margin-left: 5px;\"\r\n                  :key=\"n + childItem.tagKey + childItem.type\"\r\n                  v-model=\"childItem.inferenceTimeVal\"\r\n                  filterable\r\n                  clearable\r\n                  placeholder=\"请选择\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"inferenceItem in [\r\n                      { id: 1, name: childItem.type + '_[PRESJTXTIME]', cname: childItem.type + '_睡觉时间'},\r\n                    ]\"\r\n                    :key=\"inferenceItem.id\"\r\n                    :value=\"inferenceItem.name\"\r\n                    :label=\"inferenceItem.cname\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n                <el-time-picker\r\n                  v-else-if=\"childItem.type === 3\"\r\n                  style=\"margin-left: 5px;\"\r\n                  is-range\r\n                  v-model=\"childItem.intervalTimeVal\"\r\n                  value-format=\"HH:mm:ss\"\r\n                  range-separator=\"至\"\r\n                  start-placeholder=\"开始时间\"\r\n                  end-placeholder=\"结束时间\"\r\n                  placeholder=\"选择时间范围\"\r\n                >\r\n                </el-time-picker>\r\n                <template v-else-if=\"childItem.type === 4\">\r\n                  <el-select\r\n                    style=\"width: 150px;margin-left: 5px;\"\r\n                    :key=\"n + childItem.tagKey + childItem.type + 'region-type'\"\r\n                    v-model=\"childItem.inferRegionStartVal\"\r\n                    filterable\r\n                    clearable\r\n                    placeholder=\"请选择\"\r\n                  >\r\n                    <el-option\r\n                      v-for=\"timeItem in [\r\n                        { id: 1, name: 'YJYLBEGINTIME', cname: '静音开机开始时间' },\r\n                      ]\"\r\n                      :key=\"timeItem.id\"\r\n                      :value=\"timeItem.name\"\r\n                      :label=\"timeItem.cname\"\r\n                    >\r\n                    </el-option>\r\n                  </el-select>\r\n                  <span style=\"color: #666\">-</span>\r\n                  <el-select\r\n                    style=\"width: 150px;margin-left: 5px;\"\r\n                    :key=\"n + childItem.tagKey + childItem.type\"\r\n                    v-model=\"childItem.inferRegionEndVal\"\r\n                    filterable\r\n                    clearable\r\n                    placeholder=\"请选择\"\r\n                  >\r\n                    <el-option\r\n                      v-for=\"timeItem in [\r\n                        { id: 1, name: 'YJYLENDTIME', cname: '静音开机结束时间' },\r\n                      ]\"\r\n                      :key=\"timeItem.id\"\r\n                      :value=\"timeItem.name\"\r\n                      :label=\"timeItem.cname\"\r\n                    >\r\n                    </el-option>\r\n                  </el-select>\r\n                </template>\r\n              </template>\r\n              <!-- 其他 都按是否下拉框处理-->\r\n              <template v-else>\r\n                <span class=\"txt\">{{ childItem.tagName }}</span>\r\n                <el-select\r\n                  style=\"width: 80px\"\r\n                  :key=\"n + childItem.tagKey\"\r\n                  v-model=\"childItem.value\"\r\n                  filterable\r\n                  clearable\r\n                  placeholder=\"请选择\"\r\n                >\r\n                  <el-option\r\n                    v-for=\"boolItem in [\r\n                      { id: '1', name: '是' },\r\n                      { id: '0', name: '否' }\r\n                    ]\"\r\n                    :key=\"boolItem.id\"\r\n                    :value=\"boolItem.id\"\r\n                    :label=\"boolItem.name\"\r\n                  >\r\n                  </el-option>\r\n                </el-select>\r\n              </template>\r\n              <!-- delete -->\r\n              <span class=\"i\" @click=\"handleRemoveRule(item, childItem)\">\r\n                <i class=\"icon iconfont el-icon-cc-delete\"></i>\r\n              </span>\r\n            </div>\r\n            <!-- 一级标签列表 -->\r\n            <div class=\"label-add\">\r\n              <div class=\"optional-condition\">\r\n                <el-tag\r\n                  class=\"oc-item\"\r\n                  v-for=\"tagItem in tagList\"\r\n                  :key=\"tagItem.tagItem\"\r\n                  @click.native=\"handleAddChildRule(item, tagItem)\"\r\n                  :type=\"dataSourceColorEnum[tagItem.dataSource]\"\r\n                >{{ tagItem.tagName }}\r\n                </el-tag>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <div class=\"label-or\">\r\n        <div\r\n          class=\"optional-condition\"\r\n          v-if=\"tagList.length\"\r\n          :style=\"{\r\n            'padding-top': ruleJson.rules.length > 0 ? '10px' : 0,\r\n          }\"\r\n        >\r\n          <el-tag\r\n            class=\"oc-item\"\r\n            v-for=\"item in tagList\"\r\n            :key=\"item.tagName\"\r\n            @click.native=\"handleAddRule(item)\"\r\n            :type=\"dataSourceColorEnum[item.dataSource]\"\r\n          >{{ item.tagName }}\r\n          </el-tag>\r\n          <div v-if=\"showHitTip\" class=\"introjs-hint\" style=\"font-size: 28px; position: absolute; bottom: -28px; left: 20px; color: #999\">\r\n            <i class=\"el-icon-thumb\" style=\"font-size: 18px;\"></i>\r\n            <span style=\"font-size: 12px;\">点击标签来编辑人群条件</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { dataSourceColorEnum } from '@/utils/tag'\r\nimport { getVersionIdAPI } from '@/services/flow'\r\nimport { getCrowdListAPI, getDialogueListAPI, getButtonListAPI, getUserEventListAPI } from '@/services/tag'\r\nexport default {\r\n  inject: ['serviceId'],\r\n  props: {\r\n    tagList: { // 标签列表\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    ruleJson: { // 规则json\r\n      type: Object,\r\n      default: () => ({})\r\n    },\r\n    parentIndex: { // 父级索引\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    tagIds: { // 标签id列表\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    serviceId: {\r\n      type: Number\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      showHitTip: true,\r\n      cache: {}, // { tagId：{ select: boolean, list: [] } }\r\n      versionId: ''\r\n    }\r\n  },\r\n  computed: {\r\n    dataSourceColorEnum () {\r\n      return dataSourceColorEnum\r\n    }\r\n  },\r\n  watch: {\r\n    //\r\n  },\r\n  methods: {\r\n    handleRemoveRule (rule, childRule) { // 删除当前规则\r\n      const ruleJson = this.$props.ruleJson\r\n      rule.rules.splice(rule.rules.indexOf(childRule), 1)\r\n      if (rule.rules.length === 0) {\r\n        ruleJson.rules = ruleJson.rules.filter(function (item) {\r\n          return item !== rule\r\n        })\r\n      }\r\n    },\r\n    transformSaveRules () {\r\n      this.$props.ruleJson.rules.forEach(rule => {\r\n        rule.rules.forEach((childRule, childIndex) => {\r\n          // 特殊的tagkey要特殊转value\r\n          if (childRule.tagKey === 'button_click') {\r\n            const dialogueNodeId = childRule.dialogueNodeId || 'null'\r\n            const buttonId = childRule.buttonId || 'null'\r\n            const count = childRule.count.toString() || 'null'\r\n            childRule.value = `${dialogueNodeId}_${buttonId}_${count}`\r\n          } else if (childRule.tagKey === 'dialog_show') {\r\n            const showDialogueNodeId = childRule.showDialogueNodeId || 'null'\r\n            const showCount = childRule.showCount.toString() || 'null'\r\n            childRule.value = `${showDialogueNodeId}_${showCount}`\r\n          } else if (childRule.tagKey === 'time_hit') {\r\n            if (childRule.type === 1) {\r\n              const staticTimeVal = childRule.staticTimeVal || 'null'\r\n              childRule.value = `${childRule.type}_${childRule.staticTimeVal}`\r\n            } else if (childRule.type === 2) {\r\n              const inferenceTimeVal = childRule.inferenceTimeVal || 'null'\r\n              childRule.value = inferenceTimeVal\r\n            } else if (childRule.type === 3) {\r\n              const intervalTimeVal = childRule.intervalTimeVal || 'null'\r\n              if (Array.isArray(childRule.intervalTimeVal) && childRule.intervalTimeVal.length > 0) {\r\n                const intervalTimeVal = childRule.intervalTimeVal.join('-')\r\n                childRule.value = `${childRule.type}_${intervalTimeVal}`\r\n              } else {\r\n                childRule.value = `${childRule.type}_null`\r\n              }\r\n            } else if (childRule.type === 4) {\r\n              const inferRegionStartVal = childRule.inferRegionStartVal || 'null'\r\n              const inferRegionEndVal = childRule.inferRegionEndVal || 'null'\r\n              childRule.value = `${childRule.type}_[${inferRegionStartVal}]-[${inferRegionEndVal}]`\r\n            }\r\n          } else {\r\n            childRule.value = childRule.value.toString()\r\n          }\r\n        })\r\n      })\r\n      this.$emit('update:ruleJson', this.$props.ruleJson)\r\n    },\r\n    getTagUnit (tagKey) { // 获得标签key对应的单位\r\n      return this.$props.tagList.find((tagItem, tagIndex) => {\r\n        return tagItem.tagKey === tagKey\r\n      })?.tagUnit || ''\r\n    },\r\n    async getCrowdList (tagKey) { // 获取人群列表\r\n      try {\r\n        const res = await getCrowdListAPI({})\r\n        if (res.code === 1000) {\r\n          this.$set(this.cache, tagKey, {\r\n            list: res.data.map((item) => {\r\n              return {\r\n                ...item,\r\n                id: `${item.policyId}_${item.crowdId}`,\r\n                name: `${item.crowdId}_${item.crowdName}`\r\n              }\r\n            })\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error('getCrowdList error: ', error)\r\n      }\r\n    },\r\n    async getDialogueList (tagKey) { // 获取对话框列表\r\n      try {\r\n        const res = await getDialogueListAPI({\r\n          versionId: this.versionId\r\n        })\r\n        if (res.code === 1000) {\r\n          this.$set(this.cache, tagKey, {\r\n            list: res.data\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error('getDialogueList error: ', error)\r\n      }\r\n    },\r\n    async getDialogueButtonList (nodeId, tagKey) { // 获取对话框按钮列表\r\n      console.debug('getButtonList: ', nodeId, tagKey)\r\n      try {\r\n        const res = await getButtonListAPI({\r\n          nodeId\r\n        })\r\n        if (res.code === 1000) {\r\n          this.$set(this.cache, `${tagKey}_button`, {\r\n            list: res.data\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error('getDialogueButtonList error: ', error)\r\n      }\r\n    },\r\n    async getUserEventList (tagKey) { // 获取用户行为列表\r\n      try {\r\n        const res = await getUserEventListAPI({})\r\n        if (res.code === 1000) {\r\n          this.$set(this.cache, tagKey, {\r\n            list: res.data\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.error('getUserEventList error: ', error)\r\n      }\r\n    },\r\n    handleRulesConditionChange (item) { // 规则条件改变\r\n      item.condition = item.condition === 'AND' ? 'OR' : 'AND'\r\n    },\r\n    fetchTagSuggestions (tagInfo) { // 获取标签建议\r\n      const { tagKey } = tagInfo\r\n      switch (tagKey) {\r\n        case 'dmp_crowd':\r\n          this.getCrowdList(tagKey)\r\n          break\r\n        case 'button_click':\r\n          // this.getDialogueList(`${tagKey}_dialogue`) // 防止key重复\r\n          this.getDialogueList(tagKey)\r\n          // this.getDialogueButtonList(`${tagKey}_dialogue_button`)\r\n          break\r\n        case 'dialog_show':\r\n          this.getDialogueList('button_click')\r\n          break\r\n        case 'event_hit':\r\n          this.getUserEventList(tagKey)\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    async getVersionId () {\r\n      try {\r\n        const res = await getVersionIdAPI({\r\n          serviceId: this.serviceId || this.$props.serviceId\r\n        })\r\n        if (res.code === 1000) {\r\n          this.versionId = res.data\r\n        }\r\n      } catch (error) {\r\n        console.error('getVersionId error: ', error)\r\n      }\r\n    },\r\n    getDynamicTagRuleInfo (tagInfo) { // 动态表单的添加规则 的数据结构 生成初始化规则用到\r\n      const { tagId, tagKey } = tagInfo\r\n      let data = null\r\n      switch (tagKey) {\r\n        case 'button_click': // 按钮点击\r\n          data = {\r\n            dialogueNodeId: '', // 对话框节点id\r\n            buttonId: '', // 按钮id\r\n            count: 0 // 点击次数\r\n          }\r\n          break\r\n        case 'dialog_show': // 节点曝光\r\n          data = {\r\n            showDialogueNodeId: '', // 对话框节点id\r\n            showCount: 0 // 曝光次数\r\n          }\r\n          break\r\n        case 'time_hit': // 时间到达\r\n          data = {\r\n            type: 1, // 1 固定时间 2 推理时间 3区间时间 4区间推理时间\r\n            time: '', // 时间\r\n            staticTimeVal: '', // 固定时间value\r\n            inferenceTimeVal: '', // 推理时间value\r\n            intervalTimeVal: ['08:00:00', '09:00:00'], // 区间时间value [start, end]\r\n            inferRegionStartVal: '', // 区间推理时间 start\r\n            inferRegionEndVal: '' // 区间推理时间 end\r\n          }\r\n          break\r\n        default:\r\n          break\r\n      }\r\n      return data\r\n    },\r\n    initTagsSuggestions () { // 给父组件调用\r\n      const dynamicFormTagKeys = ['button_click', 'dialog_show', 'dmp_crowd', 'event_hit']\r\n      dynamicFormTagKeys.forEach(key => {\r\n        this.fetchTagSuggestions({ tagKey: key })\r\n      })\r\n    },\r\n    handleAddRule (tag) {\r\n      console.debug('addRule: ', tag)\r\n      this.showHitTip = false // 关闭新手指引 - 点击提示\r\n      if (this.ruleJson.rules.length > 50) { // 控制最多50个标签\r\n        this.$message({\r\n          message: '已达最大数量',\r\n          type: 'error'\r\n        })\r\n      }\r\n      // if (!this.tagIds.includes(tag.tagId)) { // 防止重复添加 tagId\r\n      //   this.tagIds.push(tag.tagId)\r\n      // }\r\n      // 标签设计：https://coocaa.feishu.cn/wiki/SMncwun4biFztdkmqRPcVDjGndf\r\n      const dynamicFormTagKeys = ['button_click', 'dialog_show', 'dmp_crowd', 'event_hit']\r\n      if (dynamicFormTagKeys.includes(tag.tagKey)) { //  规则和后台协定好对应的tagKey都是需要 请求动态表单\r\n        if (!this.cache[tag.tagKey]) {\r\n          this.fetchTagSuggestions(tag)\r\n        }\r\n      }\r\n      let operator = ''\r\n      if (['button_click', 'dialog_show'].includes(tag.tagKey)) {\r\n        operator = '>='\r\n      } else {\r\n        operator = '='\r\n      }\r\n      this.ruleJson.rules.push({\r\n        condition: 'AND',\r\n        rules: [\r\n          {\r\n            dataSource: tag.dataSource,\r\n            inputType: tag.inputType,\r\n            tagId: tag.tagId,\r\n            tagKey: tag.tagKey,\r\n            tagType: tag.tagType,\r\n            tagName: tag.tagName,\r\n            operator,\r\n            value: '',\r\n            ...this.getDynamicTagRuleInfo(tag)\r\n          }\r\n        ]\r\n      })\r\n      console.debug('handleAddRule cache: ', this.cache)\r\n    },\r\n    handleAddChildRule (rule, tag) {\r\n      console.debug('handleAddChildRule: ', rule, tag)\r\n      if (rule.rules.length >= 50) {\r\n        this.$message({\r\n          type: 'error',\r\n          message: '已达最大数量'\r\n        })\r\n        return\r\n      }\r\n      const dynamicFormTagKeys = ['button_click', 'dialog_show', 'dmp_crowd', 'event_hit']\r\n      if (dynamicFormTagKeys.includes(tag.tagKey)) { //  规则和后台协定好对应的tagKey都是需要 请求动态表单\r\n        if (!this.cache[tag.tagKey]) {\r\n          this.fetchTagSuggestions(tag)\r\n        }\r\n      }\r\n      // if (!this.tagIds.includes(tag.tagId)) { // 防止重复添加 tagId\r\n      //   this.tagIds.push(tag.tagId)\r\n      // }\r\n      let operator = ''\r\n      if (['button_click', 'dialog_show'].includes(tag.tagKey)) {\r\n        operator = '>='\r\n      } else {\r\n        operator = '='\r\n      }\r\n      rule.rules.push({\r\n        dataSource: tag.dataSource,\r\n        inputType: tag.inputType,\r\n        tagId: tag.tagId,\r\n        tagKey: tag.tagKey,\r\n        tagName: tag.tagName,\r\n        operator,\r\n        value: '',\r\n        ...this.getDynamicTagRuleInfo(tag)\r\n      })\r\n      console.debug('handleAddChildRule cache: ', this.cache)\r\n    },\r\n    initDynamicData () {\r\n      this.ruleJson.rules.forEach(ruleItem => {\r\n        ruleItem.rules.forEach((childRule, childIndex) => {\r\n          switch (childRule.tagKey) {\r\n            case 'button_click':\r\n              this.getDialogueButtonList(childRule.dialogueNodeId, childRule.tagKey)\r\n              break\r\n            default:\r\n              break\r\n          }\r\n        })\r\n      })\r\n    }\r\n  },\r\n  async mounted () {\r\n    // await this.getVersionId()\r\n    // this.initTagsSuggestions()\r\n    // this.initDynamicData()\r\n  },\r\n  async created () {\r\n    await this.getVersionId()\r\n    this.initTagsSuggestions()\r\n    this.initDynamicData()\r\n  }\r\n}\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n@keyframes b {\r\n  0% {\r\n    transform: translateY(0);\r\n  }\r\n  50% {\r\n    transform: translateY(-8px);\r\n  }\r\n  100% {\r\n    transform: translateY(0);\r\n  }\r\n}\r\n.tags-rule-wrapper {\r\n  z-index 1\r\n  position relative\r\n  padding-left 10px\r\n  margin-bottom 20px\r\n  margin-left 50px\r\n  .label-or-space {\r\n    position: absolute;\r\n    top: 10px;\r\n    right: 0;\r\n    bottom: 5px;\r\n    left: -50px;\r\n    width: 3px;\r\n    height: auto;\r\n    margin: auto 0;\r\n    border: 1px dashed #67C23A;\r\n    border-right: 0;\r\n    z-index: 999;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  .label-or >>> span {\r\n    cursor pointer\r\n    margin-right 5px\r\n    margin-bottom 5px\r\n  }\r\n  .label-or {\r\n    .introjs-hint {\r\n      animation b 0.5s ease 0s 3\r\n    }\r\n  }\r\n  .label-ground {\r\n    border 1px dashed #ccc\r\n    padding 10px\r\n    margin 10px 0\r\n    .tag-condition--parent {\r\n      position relative\r\n      z-index 1\r\n    }\r\n    .tag-condition {\r\n      position: absolute;\r\n      top: 10px;\r\n      right: 0;\r\n      bottom: 3px;\r\n      left: -35px;\r\n      width: 3px;\r\n      height: auto;\r\n      margin: auto 0;\r\n      border: 1px dashed #E6A23C;\r\n      border-right: 0;\r\n      z-index: 999;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n    }\r\n  }\r\n  .label-item {\r\n    display: flex;\r\n    position: relative;\r\n    align-items center\r\n    flex-wrap wrap\r\n    margin-bottom 10px\r\n    line-height 45px\r\n    .txt {\r\n      margin-right: 10px;\r\n      flex-shrink: 0;\r\n      font-size 14px\r\n      color #666\r\n    }\r\n    .end-text {\r\n      margin-left 5px\r\n    }\r\n    .short-input {\r\n      width 50px\r\n      margin-left 5px\r\n      margin-right 5px\r\n    }\r\n  }\r\n  .oc-item {\r\n    margin-right 5px\r\n    margin-bottom 5px\r\n  }\r\n  .i {\r\n    cursor pointer\r\n    margin-left 5px\r\n  }\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=269c91aa&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=269c91aa&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"269c91aa\",\n  null\n  \n)\n\nexport default component.exports","import fetch from 'cseed-frame/services/_fetch'\r\n\r\nexport function getStartNodeAPI (params) { // 获取开始节点\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/node/start/get',\r\n    params\r\n  })\r\n}\r\n\r\nexport function updateStartNodeAPI (data) { // 更新开始节点\r\n  return fetch({\r\n    method: 'post',\r\n    url: 'proactive_admin_api/interactify/node/start/update',\r\n    data\r\n  })\r\n}\r\n\r\nexport function addJudgeNodeAPI (data) { // 添加判断节点\r\n  return fetch({\r\n    method: 'post',\r\n    url: 'proactive_admin_api/interactify/node/assert/add',\r\n    data\r\n  })\r\n}\r\n\r\nexport function getJudgeNodeDetailAPI (params) { // 获取判断节点详情\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/node/assert/get',\r\n    params\r\n  })\r\n}\r\n\r\nexport function updateJudgeNodeDetailAPI (data) { // 更新判断节点详情\r\n  return fetch({\r\n    method: 'post',\r\n    url: 'proactive_admin_api/interactify/node/assert/update',\r\n    data\r\n  })\r\n}\r\n\r\nexport function deleteNodeAPI (params) { // 删除节点\r\n  return fetch({\r\n    method: 'delete',\r\n    url: 'proactive_admin_api/interactify/node/del',\r\n    params\r\n  })\r\n}\r\n\r\nexport function addDialogueNodeAPI (data) { // 添加对话框节点\r\n  return fetch({\r\n    method: 'post',\r\n    url: 'proactive_admin_api/interactify/node/dialog/add',\r\n    data\r\n  })\r\n}\r\n\r\nexport function getDialogueNodeDetailAPI (params) { // 获取对话框节点详情\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/node/dialog/get',\r\n    params\r\n  })\r\n}\r\n\r\nexport function updateDialogueDetailAPI (data) { // 更新对话框节点详情\r\n  return fetch({\r\n    method: 'post',\r\n    url: 'proactive_admin_api/interactify/node/dialog/update',\r\n    data\r\n  })\r\n}\r\n\r\nexport function getTreeDataAPI (params) { // 获取树形结构数据\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/node/tree/get',\r\n    params\r\n  })\r\n}\r\n\r\nexport function getVersionIdAPI (params) { // 根据serverId获取versionId\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/node/versionId',\r\n    params\r\n  })\r\n}\r\n\r\nexport function getNodeSelectListAPI (params) { // 获取当前版本节点下拉框数据\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/node/select',\r\n    params\r\n  })\r\n}\r\n","import fetch from 'cseed-frame/services/_fetch'\r\n\r\nexport function getServicesListAPI (params) {\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/service/list',\r\n    params\r\n  })\r\n}\r\n\r\nexport function addServicesAPI (data) {\r\n  return fetch({\r\n    method: 'post',\r\n    url: 'proactive_admin_api/interactify/service/add',\r\n    data\r\n  })\r\n}\r\n\r\nexport function deleteServicesAPI (params) {\r\n  return fetch({\r\n    method: 'delete',\r\n    url: 'proactive_admin_api/interactify/service/del',\r\n    params\r\n  })\r\n}\r\n\r\nexport function offlineServiceAPI (params) {\r\n  return fetch({\r\n    method: 'post',\r\n    url: 'proactive_admin_api/interactify/service/offline',\r\n    params\r\n  })\r\n}\r\n\r\nexport function getServiceAPI (params) {\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/service/get',\r\n    params\r\n  })\r\n}\r\n\r\nexport function getStatuTitleAPI (params) { // 根据服务id获取右上角标题\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/node/bar/title',\r\n    params\r\n  })\r\n}\r\n\r\nexport function resetServiceAPI (params) { // 重置服务交互\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/node/reset',\r\n    params\r\n  })\r\n}\r\n","import fetch from 'cseed-frame/services/_fetch'\r\n\r\nexport function getRuleTagsListAPI (params) { // 获取规则标签列表\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/tag/list',\r\n    params\r\n  })\r\n}\r\n\r\n// 人群满足标签(tagKey: dmp_crowd)\r\nexport function getCrowdListAPI (params) { // 获取主动服务(生活助手)下的人群列表\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/setting/admin/crowd/list',\r\n    params\r\n  })\r\n}\r\n\r\n// 按钮点击(tagKey: button_click)\r\nexport function getDialogueListAPI (params) { // 获取当前画布下对话框列表\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/tag/node',\r\n    params\r\n  })\r\n}\r\n\r\n// 按钮点击(tagKey: button_click)\r\nexport function getButtonListAPI (params) { // 获取当前对话框下的按钮列表\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/interactify/tag/button',\r\n    params\r\n  })\r\n}\r\n\r\n// 用户行为满足(tagkey: event_hit)\r\nexport function getUserEventListAPI (params) { // 获取用户行为 事件列表\r\n  return fetch({\r\n    method: 'get',\r\n    url: 'proactive_admin_api/scene/event/list',\r\n    params\r\n  })\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","directives","name","rawName","value","ruleJson","rules","length","expression","key","parentIndex","attrs","on","$event","handleRulesConditionChange","_v","_s","condition","_l","item","index","childItem","n","class","paddingTop","tagKey","tagName","cache","list","staticStyle","getDialogueButtonList","dialogueNodeId","model","callback","$$v","$set","dialogueItem","id","_e","buttonId","buttonItem","toString","count","getTagUnit","showDialogueNodeId","showCount","boolItem","crowdItem","eventItem","eventCode","eventName","type","timeTypeItem","staticTimeVal","inferenceTimeVal","cname","inferenceItem","intervalTimeVal","inferRegionStartVal","timeItem","inferRegionEndVal","handleRemoveRule","tagList","tagItem","dataSourceColorEnum","dataSource","nativeOn","handleAddChildRule","style","handleAddRule","showHitTip","staticRenderFns","inject","props","Array","default","Object","Number","tagIds","serviceId","data","versionId","computed","watch","methods","rule","childRule","$props","splice","indexOf","filter","transformSaveRules","forEach","childIndex","isArray","join","$emit","find","tagIndex","tagUnit","res","getCrowdListAPI","code","map","policyId","crowdId","crowdName","error","console","getDialogueListAPI","nodeId","debug","getButtonListAPI","getUserEventListAPI","fetchTagSuggestions","tagInfo","getCrowdList","getDialogueList","getUserEventList","getVersionIdAPI","getDynamicTagRuleInfo","tagId","time","initTagsSuggestions","dynamicFormTagKeys","tag","$message","message","includes","operator","push","inputType","tagType","initDynamicData","ruleItem","getVersionId","component","getStartNodeAPI","params","fetch","method","url","updateStartNodeAPI","addJudgeNodeAPI","getJudgeNodeDetailAPI","updateJudgeNodeDetailAPI","deleteNodeAPI","addDialogueNodeAPI","getDialogueNodeDetailAPI","updateDialogueDetailAPI","getTreeDataAPI","getNodeSelectListAPI","getServicesListAPI","addServicesAPI","deleteServicesAPI","offlineServiceAPI","getStatuTitleAPI","resetServiceAPI","getRuleTagsListAPI"],"sourceRoot":""}